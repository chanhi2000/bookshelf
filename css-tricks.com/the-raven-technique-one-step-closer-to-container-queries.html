<!doctype html>
<html lang="en-US" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.99" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"The Raven Technique: One Step Closer to Container Queries","image":["https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/10/RT_x4UFA.png?resize=1200%2C482&ssl=1"],"datePublished":"2020-11-10T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"Mathias H√ºlsbusch","url":"https://css-tricks.com/author/mathiashulsbusch/"}]}</script><meta property="og:url" content="https://chanhi2000.github.io/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html"><meta property="og:site_name" content="üìöBookshelf"><meta property="og:title" content="The Raven Technique: One Step Closer to Container Queries"><meta property="og:description" content="Article(s) > The Raven Technique: One Step Closer to Container Queries"><meta property="og:type" content="article"><meta property="og:image" content="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/10/RT_x4UFA.png"><meta property="og:locale" content="en-US"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:src" content="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/10/RT_x4UFA.png"><meta name="twitter:image:alt" content="The Raven Technique: One Step Closer to Container Queries"><meta property="article:author" content="Mathias H√ºlsbusch"><meta property="article:tag" content="css"><meta property="article:tag" content="css-tricks.com"><meta property="article:tag" content="blog"><meta property="article:published_time" content="2020-11-10T00:00:00.000Z"><link rel="icon" href="/bookshelf/assets/icon/favicon.svg"><title>The Raven Technique: One Step Closer to Container Queries | üìöBookshelf</title><meta name="description" content="Article(s) > The Raven Technique: One Step Closer to Container Queries">
    <link rel="preload" href="/bookshelf/assets/style-Bhb-QcDa.css" as="style"><link rel="stylesheet" href="/bookshelf/assets/style-Bhb-QcDa.css">
    
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/bookshelf/" aria-label="Take me home"><img class="vp-nav-logo" src="/bookshelf/assets/icon/favicon.svg" alt><!----><span class="vp-site-name hide-in-pad">üìöBookshelf</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/bookshelf/news.html" aria-label><!--[--><i class="vp-icon fas fa-rss" sizing="height"></i><!--]--><!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-keyboard" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/hackingwithswift.com/" aria-label="hackingwithswift.com"><!--[--><img class="vp-icon" src="https://hackingwithswift.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->hackingwithswift.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fcc/" aria-label="freecodecamp.org"><!--[--><img class="vp-icon" src="https://cdn.freecodecamp.org/universal/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->freecodecamp.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kodeco.com/" aria-label="kodeco.com"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->kodeco.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.kotzilla.io/" aria-label="blog.kotzilla.io"><!--[--><img class="vp-icon" src="https://blog.kotzilla.io/hubfs/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.kotzilla.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kt.academy/" aria-label="kt.academy"><!--[--><img class="vp-icon" src="https://kt.academy/logo.png" alt aria-hidden no-view sizing="both"><!--]-->kt.academy<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/droidcon.com/" aria-label="droidcon.com"><!--[--><img class="vp-icon" src="https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png" alt aria-hidden no-view sizing="both"><!--]-->droidcon.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/outcomeschool.com/" aria-label="outcomeschool.com"><!--[--><img class="vp-icon" src="https://outcomeschool.com/static/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->outcomeschool.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/frontendmasters.com/" aria-label="frontendmasters.com"><!--[--><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->frontendmasters.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/bookshelf/css-tricks.com/" aria-label="css-tricks.com"><!--[--><img class="vp-icon" src="https://css-tricks.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->css-tricks.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="smashingmagazine.com"><!--[--><img class="vp-icon" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->smashingmagazine.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="oddbird.net"><!--[--><img class="vp-icon" src="https://oddbird.net/safari-pinned-tab.svg" alt aria-hidden no-view sizing="both"><!--]-->oddbird.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/zeroheight.com/" aria-label="zeroheight.com"><!--[--><img class="vp-icon" src="https://zeroheight.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->zeroheight.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/typescript.tv/" aria-label="typescript.tv"><!--[--><img class="vp-icon" src="https://typescript.tv/_astro/android-chrome-192x192.BhQ8hcWh.png" alt aria-hidden no-view sizing="both"><!--]-->typescript.tv<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.logrocket.com/" aria-label="blog.logrocket.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.logrocket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/realpython.com/" aria-label="realpython.com"><!--[--><img class="vp-icon" src="https://realpython.com/static/favicon.68cbf4197b0c.png" alt aria-hidden no-view sizing="both"><!--]-->realpython.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/digitalocean.com/" aria-label="digitalocean.com"><!--[--><img class="vp-icon" src="https://digitalocean.com/_next/static/media/favicon.594d6067.ico" alt aria-hidden no-view sizing="both"><!--]-->digitalocean.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/antonioleiva.com/" aria-label="antonioleiva.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/antonioleiva.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->antonioleiva.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/johnnyreilly.com/" aria-label="johnnyreilly.com"><!--[--><img class="vp-icon" src="https://johnnyreilly.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->johnnyreilly.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/code-maze.com/" aria-label="code-maze.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/code-maze.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->code-maze.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/milanjovanovic.tech/" aria-label="milanjovanovic.tech"><!--[--><img class="vp-icon" src="https://milanjovanovic.tech/profile_favicon.png" alt aria-hidden no-view sizing="both"><!--]-->milanjovanovic.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/shopify.engineering/" aria-label="shopify.engineering"><!--[--><img class="vp-icon" src="https://cdn.shopify.com/static/shopify-favicon.png" alt aria-hidden no-view sizing="both"><!--]-->shopify.engineering<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devtoolstips.org/" aria-label="devtoolstips.org"><!--[--><img class="vp-icon" src="https://devtoolstips.org/assets/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devtoolstips.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/piccalil.li/" aria-label="piccalil.li"><!--[--><img class="vp-icon" src="https://piccalil.li/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->piccalil.li<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/sitepoint.com/" aria-label="sitepoint.com"><!--[--><img class="vp-icon" src="https://sitepoint.com/favicons/512x512.png" alt aria-hidden no-view sizing="both"><!--]-->sitepoint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/event-driven.io/" aria-label="event-driven.io"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/event-driven.io/favicon.jfif" alt aria-hidden no-view sizing="both"><!--]-->event-driven.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/packagemain.tech/" aria-label="packagemain.tech"><!--[--><img class="vp-icon" src="https://substack-post-media.s3.amazonaws.com/public/images/2ea54e25-eaa6-4630-bfc0-10b8cfdce894/apple-touch-icon-1024x1024.png" alt aria-hidden no-view sizing="both"><!--]-->packagemain.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/gosolve.io/" aria-label="gosolve.io"><!--[--><img class="vp-icon" src="https://gosolve.io/wp-content/uploads/2022/03/cropped-ikona1-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->gosolve.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/bram.us/" aria-label="bram.us"><!--[--><img class="vp-icon" src="https://bram.us/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->bram.us<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/una.im/" aria-label="una.im"><!--[--><img class="vp-icon" src="https://una.im/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->una.im<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/joshwcomeau.com/" aria-label="joshwcomeau.com"><!--[--><img class="vp-icon" src="https://joshwcomeau.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->joshwcomeau.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tip.com/" aria-label="css-tip.com"><!--[--><img class="vp-icon" src="https://css-tip.com/img/fav.png" alt aria-hidden no-view sizing="both"><!--]-->css-tip.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/nerdy.dev/" aria-label="nerdy.dev"><!--[--><img class="vp-icon" src="https://nerdy.dev/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->nerdy.dev<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/towardsdatascience.com/" aria-label="towardsdatascience.com"><!--[--><img class="vp-icon" src="https://cdn-images-1.medium.com/v2/resize:fill:128:128/1*VzTUkfeGymHP4Bvav-T-lA.png" alt aria-hidden no-view sizing="both"><!--]-->towardsdatascience.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/douggregor.net/" aria-label="douggregor.net"><!--[--><i class="vp-icon fas fa-globe" sizing="both"></i><!--]-->douggregor.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/d2.naver.com/" aria-label="d2.naver.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/d2.naver.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->d2.naver.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakao.com/" aria-label="tech.kakao.com"><!--[--><img class="vp-icon" src="https://www.kakaocorp.com/page/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakao.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakaopay.com/" aria-label="tech.kakaopay.com"><!--[--><img class="vp-icon" src="https://tech.kakaopay.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakaopay.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fe-developers.kakaoent.com/" aria-label="fe-developers.kakaoent.com"><!--[--><img class="vp-icon" src="https://fe-developers.kakaoent.com/favicon-32x32.png?v=44803cb16c1e2debd3984cf2e8cb2ded" alt aria-hidden no-view sizing="both"><!--]-->fe-developers.kakaoent.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/yozm.wishket.com/" aria-label="yozm.wishket.com"><!--[--><img class="vp-icon" src="https://yozm.wishket.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->yozm.wishket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/popit.kr/" aria-label="popit.kr"><!--[--><img class="vp-icon" src="https://popit.kr/wp-content/uploads/2016/08/favicon_32x32.png" alt aria-hidden no-view sizing="both"><!--]-->popit.kr<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devkuma.com/" aria-label="devkuma.com"><!--[--><img class="vp-icon" src="https://devkuma.com/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devkuma.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.gangnamunni.com/" aria-label="blog.gangnamunni.com"><!--[--><img class="vp-icon" src="https://blog.gangnamunni.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->blog.gangnamunni.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/codingeverybody.kr/" aria-label="codingeverybody.kr"><!--[--><img class="vp-icon" src="https://codingeverybody.kr/wp-content/uploads/cropped-favicon-origin-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->codingeverybody.kr<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-network-wired" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tecmint.com/" aria-label="tecmint.com"><!--[--><img class="vp-icon" src="https://tecmint.com/wp-content/uploads/2020/07/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tecmint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/docker.com/" aria-label="docker.com"><!--[--><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->docker.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/learnkube.com/" aria-label="learnkube.com"><!--[--><img class="vp-icon" src="https://static.learnkube.com/f7e5160d4744cf05c46161170b5c11c9.svg" alt aria-hidden no-view sizing="both"><!--]-->learnkube.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/itsfoss.com/" aria-label="itsfoss.com"><!--[--><img class="vp-icon" src="https://itsfoss.com/content/images/size/w256h256/2022/12/android-chrome-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->itsfoss.com<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/chanhi2000/bookshelf" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><!----></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="vp-icon" src="https://css-tricks.com/favicon.svg" alt aria-hidden no-view sizing="both"><span class="vp-sidebar-title">css-tricks.com</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><i class="vp-icon iconfont icon-css-tricks" sizing="both"></i><span class="vp-sidebar-title">Almanec</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><span class="vp-sidebar-title">Snippet(s)</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2026</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2025</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2024</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2023</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2022</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2021</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">2020</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html" aria-label="The Raven Technique: One Step Closer to Container Queries"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->The Raven Technique: One Step Closer to Container Queries<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/css-tricks.com/the-css-custom-property-toggle-trick.html" aria-label="The CSS Custom Property Toggle Trick"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->The CSS Custom Property Toggle Trick<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ.html" aria-label="Absolute, Relative, Fixed Positioning: How Do They Differ?"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Absolute, Relative, Fixed Positioning: How Do They Differ?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/css-tricks.com/absolute-positioning-inside-relative-positioning.html" aria-label="Absolute Positioning Inside Relative Positioning"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Absolute Positioning Inside Relative Positioning<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/css-tricks.com/practical-css-scroll-snapping.html" aria-label="Practical CSS Scroll Snapping"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Practical CSS Scroll Snapping<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/css-tricks.com/dark-mode-and-variable-fonts.html" aria-label="Dark mode and variable fonts"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Dark mode and variable fonts<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/css-tricks.com/fixed-headers-and-jump-links-the-solution-is-scroll-margin-top.html" aria-label="Fixed Headers and Jump Links? The Solution is scroll-margin-top"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Fixed Headers and Jump Links? The Solution is scroll-margin-top<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2019</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2018</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2017</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2016</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2015</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2014</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2013</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2012</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2011</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><div class="page-cover"><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/10/RT_x4UFA.png" alt no-view></div><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon fa-brands fa-css3-alt" sizing="height"></i>The Raven Technique: One Step Closer to Container Queries</h1><div class="page-info"><span class="page-author-info" aria-label="Authorüñä" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://css-tricks.com/author/mathiashulsbusch/" target="_blank" rel="noopener noreferrer">Mathias H√ºlsbusch</a></span><span property="author" content="Mathias H√ºlsbusch"></span></span><!----><span class="page-date-info" aria-label="Writing DateüìÖ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">11/10/20</span><meta property="datePublished" content="2020-11-10T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time‚åõ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 16 min</span><meta property="timeRequired" content="PT16M"></span><span class="page-category-info" aria-label="Categoryüåà" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color7" role>CSS</span><span class="page-category-item color8" role>Article(s)</span><!--]--><meta property="articleSection" content="CSS,Article(s)"></span><span class="page-tag-info" aria-label="Tagüè∑" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8" role>blog</span><span class="page-tag-item color5" role>css-tricks.com</span><span class="page-tag-item color2" role>css</span><!--]--><meta property="keywords" content="blog,css-tricks.com,css"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´" tabindex="-1"><a class="header-anchor" href="#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"><span>The Raven Technique: One Step Closer to Container Queries Í¥ÄÎ†®</span></a></h1><a class="route-link vp-card" href="/bookshelf/programming/css/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="/bookshelf/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">CSS > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><nav class="table-of-contents"><ul><li><a aria-current="page" href="/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html#why-raven" class="router-link-active router-link-exact-active">Why ‚ÄúRaven‚Äù?</a></li><li><a aria-current="page" href="/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html#recap-math-functions-in-css" class="router-link-active router-link-exact-active">Recap: Math functions in CSS</a></li><li><a aria-current="page" href="/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html#step-1-create-configuration-variables" class="router-link-active router-link-exact-active">Step 1: Create configuration variables</a></li><li><a aria-current="page" href="/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html#step-2-create-indicator-variables" class="router-link-active router-link-exact-active">Step 2: Create indicator variables</a></li><li><a aria-current="page" href="/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html#step-3-use-indicator-variables-to-select-interval-values" class="router-link-active router-link-exact-active">Step 3: Use indicator variables to select interval values</a></li><li><a aria-current="page" href="/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html#and-an-absurdly-large-integer-to-select-arbitrary-length-values" class="router-link-active router-link-exact-active">` and an absurdly large integer to select arbitrary-length values</a></li><li><a aria-current="page" href="/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html#step-5-bringing-it-all-together" class="router-link-active router-link-exact-active">Step 5: Bringing it all together</a></li><li><a aria-current="page" href="/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html#anything-else" class="router-link-active router-link-exact-active">Anything else?</a></li><li><a aria-current="page" href="/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html#what-about-heights" class="router-link-active router-link-exact-active">What about heights?</a></li><li><a aria-current="page" href="/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html#what-about-showing-and-hiding-things" class="router-link-active router-link-exact-active">What about showing and hiding things?</a></li><li><a aria-current="page" href="/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html#takeaways" class="router-link-active router-link-exact-active">Takeaways</a></li><li><a aria-current="page" href="/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html#bonus-boolean-logic" class="router-link-active router-link-exact-active">Bonus: Boolean logic</a></li><li><a aria-current="page" href="/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html#bonus-2-set-the-number-of-columns-in-a-grid-layout" class="router-link-active router-link-exact-active">Bonus 2: Set the number of columns in a grid layout</a></li><li><a aria-current="page" href="/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html#bonus-3-change-the-background-color-with-a-linear-gradient" class="router-link-active router-link-exact-active">Bonus 3: Change the background-color with a linear-gradient()</a></li><li><a aria-current="page" href="/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html#bonus-4-getting-rid-of-nested-variables" class="router-link-active router-link-exact-active">Bonus 4: Getting rid of nested variables</a></li><li><a aria-current="page" href="/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html#final-thoughts" class="router-link-active router-link-exact-active">Final thoughts</a></li></ul></nav><hr><div class="vp-site-info" data-name="The Raven Technique: One Step Closer to Container Queries"><a class="vp-site-info-navigator no-external-link-icon" title="The Raven Technique: One Step Closer to Container Queries" href="https://css-tricks.com/the-raven-technique-one-step-closer-to-container-queries" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/10/RT_x4UFA.png) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://css-tricks/favicon.svg" alt loading="lazy" no-view><div class="vp-site-info-name">The Raven Technique: One Step Closer to Container Queries</div><div class="vp-site-info-desc">For the millionth time: We need container queries in CSS! And guess what, it looks like we&#39;re heading in that direction.</div></div><!----></div><p>For the millionth time: <a class="route-link" href="/bookshelf/css-tricks.com/lets-not-forget-about-container-queries.html"><strong>We need container queries</strong></a> in CSS! And guess what, it looks like <a href="https://groups.google.com/a/chromium.org/g/blink-dev/c/u1AKdrXhPGI/m/wrJb-unhAgAJ" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-chrome" sizing="height"></i>we‚Äôre heading in that direction</a>.</p><p>When building components for a website, you don‚Äôt always know how that component will be used. Maybe it will be render as wide as the browser window is. Maybe two of them will sit side by side. Maybe it will be in some narrow column. The width of <em>it</em> doesn‚Äôt always correlate with the width of the <em>browser window</em>.</p><p>It‚Äôs common to reach a point where having container based queries for the CSS of the component would be super handy. If you search around the web for solution to this, you‚Äôll probably find several JavaScript-based solutions. But those come at a price: extra dependencies, styling that requires JavaScript, and polluted application logic and design logic.</p><p>I am a strong believer in separation of concerns, and layout is a CSS concern. For example, as nice of an API as <code>IntersectionObserver</code> is, I want things like <code>:in-viewport</code> in CSS! So I continued searching for a CSS-only solution and I came across Heydon Pickering‚Äôs <a href="https://heydonworks.com/article/the-flexbox-holy-albatross/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>The Flexbox Holy Albatross</a>. It is a nice solution for columns, but I wanted more. There are some refinements of the original albatross (like <a class="route-link" href="/bookshelf/css-tricks.com/holy-albatross-with-widths.html"><strong>The Unholy Albatross</strong></a>), but still, they are a little hacky and all that is happening is a rows-to-columns switch.</p><p>I still want more! I want to get closer to actual container queries! So, what does CSS have offer that I could tap into? I have a mathematical background, so functions like <code>calc()</code>, <code>min()</code>, <code>max()</code> and <code>clamp()</code> are things I like and understand.</p><p>Next step: build a container-query-like solution with them.</p><div class="hint-container info"><p class="hint-container-title">Info</p><p>Want to see what is possible before reading on? <a href="https://codepen.io/collection/XqLJdm" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-codepen" sizing="height"></i>Here is a CodePen collection</a> showing off what can be done with the ideas discussed in this article.</p></div><hr><h2 id="why-raven" tabindex="-1"><a class="header-anchor" href="#why-raven"><span>Why ‚ÄúRaven‚Äù?</span></a></h2><p>This work is inspired by Heydon‚Äôs albatross, but the technique can do more tricks, so I picked a raven, since ravens are very clever birds.</p><hr><h2 id="recap-math-functions-in-css" tabindex="-1"><a class="header-anchor" href="#recap-math-functions-in-css"><span>Recap: Math functions in CSS</span></a></h2><p><a class="route-link" href="/bookshelf/css-tricks.com/a-complete-guide-to-calc-in-css.html"><strong>The <code>calc()</code> function</strong></a> allows mathematical operations in CSS. As a bonus, one can combine units, so things like <code>calc(100vw - 300px)</code> are possible.</p><p>The <code>min()</code> and <code>max()</code> functions take two or more arguments and return the smallest or biggest argument (respectively).</p><p>The <code>clamp()</code> function is like a combination of <code>min()</code> and <code>max()</code> in a very useful way. The function <code>clamp(a, x, b)</code> will return:</p><ul><li><strong>a</strong> if x is smaller than a</li><li><strong>b</strong> if x is bigger than b and</li><li><strong>x</strong> if x is in between a and b</li></ul><p>So it‚Äôs a bit like <code>clamp(smallest, relative, largest)</code>. One may think of it as a shorthand for <code>min(max(a,x),b)</code>. <a href="https://web.dev/min-max-clamp/" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-webdev" sizing="height"></i>Here‚Äôs more info on all that</a> if you‚Äôd like to read more.</p><p>We‚Äôre also going to use another CSS tool pretty heavily in this article: <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/var" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-firefox" sizing="height"></i>CSS custom properties</a>. Those are the things like <code>--color: red;</code> or <code>--distance: 20px</code>. Variables, essentially. We‚Äôll be using them to keep the CSS cleaner, like not repeating ourselves too much.</p><p>Let‚Äôs get started with this Raven Technique.</p><hr><h2 id="step-1-create-configuration-variables" tabindex="-1"><a class="header-anchor" href="#step-1-create-configuration-variables"><span>Step 1: Create configuration variables</span></a></h2><p>Let‚Äôs create some CSS custom properties to set things up.</p><p>What is the base size we want our queries to be based on? Since we‚Äôre shooting for container query behavior, this would be <code>100%</code> ‚Äî using <code>100vw</code> would make this behave like a media query, because that‚Äôs the width of the browser window, not the container!</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--base_size</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now we think about the breakpoints. Literally container widths where we want a break in order to apply new styles.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--breakpoint_wide</span><span class="token punctuation">:</span> 1500px<span class="token punctuation">;</span> </span>
<span class="line"><span class="token comment">/* Wider than 1500px will be considered wide */</span></span>
<span class="line"><span class="token property">--breakpoint_medium</span><span class="token punctuation">:</span> 800px<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">/* From 801px to 1500px will be considered medium */</span></span>
<span class="line"><span class="token comment">/* Smaller than or exact 800px will be small */</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In the running example, we will use three intervals, but there is no limit with this technique.</p><p>Now let‚Äôs define some (CSS length) values we would like to be returned for the intervals defined by the breakpoints. These are literal values:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--length_4_small</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">(</span>100% / 1<span class="token punctuation">)</span> - 10px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Change to your needs */</span></span>
<span class="line"><span class="token property">--length_4_medium</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">(</span>100% / 2<span class="token punctuation">)</span> - 10px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Change to your needs */</span></span>
<span class="line"><span class="token property">--length_4_wide</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">(</span>100% / 3<span class="token punctuation">)</span> - 10px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Change to your needs */</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This is the config. Let‚Äôs use it!</p><hr><h2 id="step-2-create-indicator-variables" tabindex="-1"><a class="header-anchor" href="#step-2-create-indicator-variables"><span>Step 2: Create indicator variables</span></a></h2><p>We will create some indicator variables for the intervals. They act a bit like boolean values, but with a length unit (<code>0px</code> and <code>1px</code>). If we clamp those lengths as minimum and maximum values, then they serve as a sort of ‚Äútrue‚Äù and ‚Äúfalse‚Äù indicator.</p><p>So, if, and only if <code>--base_size</code> is bigger than <code>--breakpoint_wide</code>, we want a variable that‚Äôs <code>1px</code>. Otherwise, we want <code>0px</code>. This can be done with <code>clamp()</code>:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--is_wide</span><span class="token punctuation">:</span> <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_wide<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  1px</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If <code>var(--base_size) - var(--breakpoint_wide)</code> is negative, then <code>--base_size</code> is smaller than <code>--breakpoint_wide</code>, so <code>clamp()</code> will return <code>0px</code> in this case.</p><p>Conversely, if <code>--base_size</code> is bigger than <code>--breakpoint_wide</code>, the calculation will give a positive length, which is bigger than or equal to <code>1px</code>. That means <code>clamp()</code> will return <code>1px</code>.</p><p>Bingo! We got an indicator variable for ‚Äúwide.‚Äù</p><p>Let‚Äôs do this for the ‚Äúmedium‚Äù interval:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--is_medium</span><span class="token punctuation">:</span> <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_medium<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  1px</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/*  DO NOT USE, SEE BELOW! */</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This will give us <code>0px</code> for the small interval, but <code>1px</code> for the medium <em>and</em> the wide interval. What we want, however, is <code>0px</code> for the wide interval and <code>1px</code> for the medium interval <em>exclusively</em>.</p><p>We can solve this by subtracting <code>--is_wide</code> value. In the wide interval, <code>1px - 1px</code> is <code>0px</code>; in the medium interval <code>1px - 0px</code> is <code>1px</code>; and for the small interval <code>0px - 0px</code> gives <code>0px</code>. Perfect.</p><p>So we get:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--is_medium</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span> </span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_medium<span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">  1px<span class="token punctuation">)</span> </span>
<span class="line">  - <span class="token function">var</span><span class="token punctuation">(</span>--is_wide<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>See the idea? To calculate an indicator variable, use <code>clamp()</code> with <code>0px</code> and <code>1px</code> as borders and the difference of <code>--base_width</code> and <code>--breakpoint_whatever</code> as the clamped value. Then subtract the sum of all indicators for bigger intervals. This logic produces the following for the smallest interval indicator:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--is_small</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span> - 0px<span class="token punctuation">,</span></span>
<span class="line">    1px<span class="token punctuation">)</span></span>
<span class="line">  - <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_medium<span class="token punctuation">)</span> + <span class="token function">var</span><span class="token punctuation">(</span>--is_wide<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We can skip the clamp here because the breakpoint for small is <code>0px</code> and <code>--base_size</code> is positive, so <code>--base_size - 0px</code> is alway bigger than <code>1px</code> and <code>clamp()</code> will always return <code>1px</code>. Therefore, the calculation of <code>--is_small</code> can be simplified to:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--is_small</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>1px - <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_medium<span class="token punctuation">)</span> + <span class="token function">var</span><span class="token punctuation">(</span>--is_wide<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="step-3-use-indicator-variables-to-select-interval-values" tabindex="-1"><a class="header-anchor" href="#step-3-use-indicator-variables-to-select-interval-values"><span>Step 3: Use indicator variables to select interval values</span></a></h2><p>Now we need to go from these ‚Äúindicator variables‚Äù to something useful. Let‚Äôs assume we‚Äôre working with a pixel-based layout. Don‚Äôt panic, we will handle other units later.</p><p>Here‚Äôs a question. What does this return?</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span> * 100<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>If <code>--is_small</code> is <code>1px</code>, it will return <code>100px</code> and if <code>--is_small</code> is <code>0px</code>, it will return <code>0px</code>.</p><p>How is this useful? See this:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span> * 100<span class="token punctuation">)</span> </span>
<span class="line">  +</span>
<span class="line">  <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_medium<span class="token punctuation">)</span> * 200<span class="token punctuation">)</span> </span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This will return <code>100px + 0px = 100px</code> in the small interval (where <code>--is_small</code> is <code>1px</code> and <code>--is_medium</code> is <code>0px</code>). In the medium interval (where <code>--is_medium</code> is <code>1px</code> and <code>--is_small</code> is <code>0px</code>), it will return <code>0px + 200px = 200px</code>.</p><p>Do you get the idea? See Roman Komarov‚Äôs <a href="https://kizu.ru/conditions-for-css-variables/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>article</a> for a deeper look at what is going on here because it can be complex to grasp.</p><p>You multiply a pixel value (without a unit) by the corresponding indicator variable and sum up all these terms. So, for a pixel based layout, something like this is sufficient:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span>  * 100<span class="token punctuation">)</span> </span>
<span class="line">  + <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_medium<span class="token punctuation">)</span> * 200<span class="token punctuation">)</span> </span>
<span class="line">  + <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_wide<span class="token punctuation">)</span>   * 500<span class="token punctuation">)</span> </span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>But most of the time, we don‚Äôt want pixel-based values. We want concepts, like ‚Äúfull width‚Äù or ‚Äúthird width‚Äù or maybe even other units, like <code>2rem</code>, <code>65ch</code>, and the like. We‚Äôll have to keep going here for those.</p><hr><h2 id="and-an-absurdly-large-integer-to-select-arbitrary-length-values" tabindex="-1"><a class="header-anchor" href="#and-an-absurdly-large-integer-to-select-arbitrary-length-values"><span>` and an absurdly large integer to select arbitrary-length values</span></a></h2><p>In the first step, we defined something like this instead of a static pixel value:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--length_4_medium</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">(</span>100% / 2<span class="token punctuation">)</span> - 10px<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>How can we use them then? The <code>min()</code> function to the rescue!</p><p>Let‚Äôs define one helper variable:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--very_big_int</span><span class="token punctuation">:</span> 9999<span class="token punctuation">;</span> </span>
<span class="line"><span class="token comment">/* Pure, unitless number. Must be bigger than any length appearing elsewhere. */</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Multiplying this value by an indicator variable gives either <code>0px</code> or <code>9999px</code>. How large this value should be depends on your browser. Chrome will take <code>999999</code>, but Firefox will not accept that high of a number, so <code>9999</code> is a value that will work in both. There are very few viewports larger than <code>9999px</code> around, so we should be OK.</p><p>What happens, then, when we <code>min()</code> this with any value smaller than <code>9999px</code> but bigger than <code>0px</code>?</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token function">min</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--length_4_small<span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span> </span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If, and only if <code>--is_small</code> is <code>0px</code>, it will return <code>0px</code>. If <code>--is_small</code> is <code>1px</code>, the multiplication will return <code>9999px</code> (which is bigger than <code>--length_4_small</code>), and <code>min</code> will return: <code>--length_4_small</code>.</p><p>This is how we can select any length (that is, smaller than <code>9999px</code> but bigger than <code>0px</code>) based on indicator variables.</p><p>If you deal with viewports larger than 9999px, then you‚Äôll need to adjust the <code>--very_big_int</code> variable. This is a bit ugly, but we can fix this the moment pure CSS can <a href="https://css-tricks.com/property/" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-css-tricks" sizing="height"></i>drop the unit on a value</a> in order to get rid of the units at our indicator variables (and directly multiply it with any length). For now, this works.</p><p>We will now combine all the parts and make the Raven fly!</p><hr><h2 id="step-5-bringing-it-all-together" tabindex="-1"><a class="header-anchor" href="#step-5-bringing-it-all-together"><span>Step 5: Bringing it all together</span></a></h2><p>We can now calculate our dynamic container-width-based, breakpoint-driven value like this:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--dyn_length</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_wide<span class="token punctuation">)</span>   * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--length_4_wide<span class="token punctuation">)</span><span class="token punctuation">)</span> </span>
<span class="line">  + <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_medium<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--length_4_medium<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  + <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span>  * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--length_4_small<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Each line is a <code>min()</code> from Step 4. All lines are added up like in Step 3, the indicator variables are from Step 2 and all is based on the configuration we did in Step 1 ‚Äî they work all together in one big formula!</p><p>Want to try it out? Here is a <a href="https://codepen.io/batchman/pen/GRZNeaQ" target="_blank" rel="noopener noreferrer">is a Pen (<i class="vp-icon fa-brands fa-codepen" sizing="height"></i><code>batchman</code>)</a> to play with (see the notes in the CSS).</p><div class="codepen-wrapper codepen-GRZNeaQ"><!----><span>See <a>Meet the Raven (can do more tricks than the albatross)</a> by <a href="https://codepen.io/batchman">batchman</a> on <a href="https://codepen.io">CodePen</a>.</span></div><p>This Pen uses no flexbox, no grid, no floats. Just some divs. This is to show that helpers are unnecessary in this kind of layout. But feel free to use the Raven with these layouts too as it will help you do more complex layouts.</p><hr><h2 id="anything-else" tabindex="-1"><a class="header-anchor" href="#anything-else"><span>Anything else?</span></a></h2><p>So far, we‚Äôve used fixed pixel values as our breakpoints, but maybe we want to change layout if the container is bigger or smaller than <em>half</em> of the viewport, minus 10px? No problem:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--breakpoint_wide</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50vw - 10px<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>That just works! Other formulas work as well. To avoid strange behavior, we want to use something like:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--breakpoint_medium</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_wide<span class="token punctuation">)</span><span class="token punctuation">,</span> 500px<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>‚Ä¶to set a second breakpoint at <code>500px</code> width. The calculations in Step 2 depend on the fact that <code>--breakpoint_wide</code> is not smaller than <code>--breakpoint_medium</code>. Just keep your breakpoints in the right order: <code>min()</code> and/or <code>max()</code> are very useful here!</p><hr><h2 id="what-about-heights" tabindex="-1"><a class="header-anchor" href="#what-about-heights"><span>What about heights?</span></a></h2><p>The evaluations of all the calculations are done lazily. That is, when assigning <code>--dyn_length</code> to any property, the calculation will be based on whatever <code>--base_size</code> evaluates to in this place. So setting a height will base the breakpoints on 100% height, if <code>--base_size</code> is <code>100%</code>.</p><p>I have not (yet) found a way to set a height based on the width of a container. So, you can use <code>padding-top</code> since <code>100%</code> evaluates to the width for padding.</p><hr><h2 id="what-about-showing-and-hiding-things" tabindex="-1"><a class="header-anchor" href="#what-about-showing-and-hiding-things"><span>What about showing and hiding things?</span></a></h2><p>The simplest way to show and hide things the Raven way is to set the width to <code>100px</code> (or any other suitable width) at the appropriate indicator variable:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">.show_if_small</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span> * 100<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">.show_if_medium</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_medium<span class="token punctuation">)</span> * 100<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">.show_if_wide</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_wide<span class="token punctuation">)</span> * 100<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You need to set:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span></span>
<span class="line"><span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span> <span class="token comment">/* to avoid ugly empty lines */</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>‚Ä¶or some other way to hide things within a box of <code>width: 0px</code>. Completely hiding the box requires setting additional box model properties, including <code>margin</code>, <code>padding</code> and <code>border-width</code>, to <code>0px</code> . The Raven can do this for some properties, but it‚Äôs just as effective to fix them to <code>0px</code>.</p><p>Another alternative is to use <code>position: absolute;</code> and draw the element off-screen via <code>left: calc(var(--is_???) * 9999);</code>.</p><hr><h2 id="takeaways" tabindex="-1"><a class="header-anchor" href="#takeaways"><span>Takeaways</span></a></h2><p>We might not need JavaScript at all, even for container query behavior! Certainly, we‚Äôd hope that if we actually get container queries in the CSS syntax, it will be a lot easier to use and understand ‚Äî but it‚Äôs also very cool that things are possible in CSS today.</p><p>While working on this, I developed some opinions about other things CSS could use:</p><ul><li>Container-based units like <code>conW</code> and <code>conH</code> to set heights based on width. These units could be based on the root element of the current stacking context.</li><li>Some sort of ‚Äúevaluate to value‚Äù function, to overcome problems with lazy evaluation. This would work great with a ‚Äústrip unit‚Äù function that works at render time.</li></ul><div class="hint-container note"><p class="hint-container-title">Note</p><p>In an earlier version, I had used <code>cw</code> and <code>ch</code> for the units but it was pointed out to me that those can easily be confused by with CSS units with the same name. Thanks to Mikko Tapionlinna and Gilson Nunes Filho in the comments for the tip!</p></div><p>If we had that second one, it would allow us to set colors (in a clean way), borders, <code>box-shadow</code>, <code>flex-grow</code>, <code>background-position</code>, <code>z-index</code>, <code>scale()</code>, and other things with the Raven.</p><p>Together with component-based units, setting child dimensions to the same aspect-ratio as the parent would even be possible. Dividing by a value with unit is not possible; otherwise <code>--indicator / 1px</code> would work as ‚Äústrip unit‚Äù for the Raven.</p><hr><h2 id="bonus-boolean-logic" tabindex="-1"><a class="header-anchor" href="#bonus-boolean-logic"><span>Bonus: Boolean logic</span></a></h2><p>Indicator variables look like boolean values, right? The only difference is they have a ‚Äúpx‚Äù unit. What about the logical combination of those? Imagine things like ‚Äúcontainer is wider than half the screen‚Äù <strong>and</strong> ‚Äúlayout is in two-column mode.‚Äù CSS functions to the rescue again!</p><p>For the <code>OR</code> operator, we can <code>max()</code> over all of the indicators:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--a_OR_b</span><span class="token punctuation">:</span> <span class="token function">max</span><span class="token punctuation">(</span> <span class="token function">var</span><span class="token punctuation">(</span>--indicator_a<span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--indicator_b<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>For the <code>NOT</code> operator, we can subtract the indicator from <code>1px</code>:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--NOT_a</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>1px - <span class="token function">var</span><span class="token punctuation">(</span>--indicator_a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Logic purists may stop here, since <code>NOR(a,b) = NOT(OR(a,b))</code> is complete boolean algebra. But, hey, just for fun, here are some more:</p><p><code>AND</code>:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--a_AND_b</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--indicator_a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--indicator_b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This evaluates to <code>1px</code> if and only if both indicators are <code>1px</code>.</p><p>Note that <code>min()</code> and <code>max()</code> take more than two arguments. They still work as an <code>AND</code> and <code>OR</code> for (more than two) indicator variables.</p><p><code>XOR</code>:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--a_XOR_b</span><span class="token punctuation">:</span> <span class="token function">max</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--indicator_a<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--indicator_b<span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--indicator_b<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--indicator_a<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If (and only if) both indicators have the same value, both differences are <code>0px</code>, and <code>max()</code> will return this. If the indicators have different values, one term will give <code>-1px</code>, the other will give <code>1px</code>. <code>max()</code> returns <code>1px</code> in this case.</p><p>If anyone is interested in the case where two indicators are equal, use this:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--a_EQ_b</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>1px - </span>
<span class="line">  <span class="token function">max</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token function">var</span><span class="token punctuation">(</span>--indicator_a<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--indicator_b<span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">    <span class="token function">var</span><span class="token punctuation">(</span>--indicator_b<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--indicator_a<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>And yes, this is <code>NOT(a XOR b)</code><em>.</em> I was unable to find a ‚Äúnicer‚Äù solution to this.</p><p>Equality may be interesting for CSS length variables in general, rather than just being used for indicator variables. By using <code>clamp()</code> once again, this might help:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--a_EQUALS_b_general</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line">  1px -</span>
<span class="line">  <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span></span>
<span class="line">        <span class="token function">max</span><span class="token punctuation">(</span></span>
<span class="line">          <span class="token function">var</span><span class="token punctuation">(</span>--var_a<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--var_b<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token function">var</span><span class="token punctuation">(</span>--var_b<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--var_a<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        1px<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Remove the <code>px</code> units to get general equality for unit-less variables (integers).</p><p>I think this is enough boolean logic for most layouts!</p><hr><h2 id="bonus-2-set-the-number-of-columns-in-a-grid-layout" tabindex="-1"><a class="header-anchor" href="#bonus-2-set-the-number-of-columns-in-a-grid-layout"><span>Bonus 2: Set the number of columns in a grid layout</span></a></h2><p>Since the Raven is limited to return CSS length values, it is unable to directly choose the number of columns for a grid (since this is a value without a unit). But there is a way to make it work (assuming we declared the indicator variables like above):</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--number_of_cols_4_wide</span><span class="token punctuation">:</span> 4<span class="token punctuation">;</span></span>
<span class="line"><span class="token property">--number_of_cols_4_medium</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span></span>
<span class="line"><span class="token property">--number_of_cols_4_small</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span>
<span class="line"><span class="token property">--grid_gap</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token property">--grid_columns_width_4_wide</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line"><span class="token punctuation">(</span>100% - <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--number_of_cols_4_wide<span class="token punctuation">)</span> - 1<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--grid_gap<span class="token punctuation">)</span> <span class="token punctuation">)</span> / <span class="token function">var</span><span class="token punctuation">(</span>--number_of_cols_4_wide<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token property">--grid_columns_width_4_medium</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line"><span class="token punctuation">(</span>100% - <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--number_of_cols_4_medium<span class="token punctuation">)</span> - 1<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--grid_gap<span class="token punctuation">)</span> <span class="token punctuation">)</span> / <span class="token function">var</span><span class="token punctuation">(</span>--number_of_cols_4_medium<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token property">--grid_columns_width_4_small</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line"><span class="token punctuation">(</span>100% - <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--number_of_cols_4_small<span class="token punctuation">)</span> - 1<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--grid_gap<span class="token punctuation">)</span> <span class="token punctuation">)</span> / <span class="token function">var</span><span class="token punctuation">(</span>--number_of_cols_4_small<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token property">--raven_grid_columns_width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span> <span class="token comment">/*  use the Raven to combine the values  */</span></span>
<span class="line">  <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_wide<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">var</span><span class="token punctuation">(</span>--grid_columns_width_4_wide<span class="token punctuation">)</span><span class="token punctuation">)</span> </span>
<span class="line">  + <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_medium<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">var</span><span class="token punctuation">(</span>--grid_columns_width_4_medium<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  + <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">var</span><span class="token punctuation">(</span>--grid_columns_width_4_small<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>And set your grid up with:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">.grid_container</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> <span class="token function">repeat</span><span class="token punctuation">(</span>auto-fit<span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--raven_grid_columns_width<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">gap</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--grid_gap<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>How does this work?</p><ol><li>Define the number of columns we want for each interval (lines 1, 2, 3)</li><li>Calculate the perfect width of the columns for each interval (lines 5, 6, 7).</li></ol><div class="hint-container info"><p class="hint-container-title">What is happening here?</p><p>First, we calculate the available space for our columns. This is <code>100%</code>, minus the place the gaps will take. For <code>n</code> columns, there are <code>(n-1)</code> gaps. This space is then divided by the number of columns we want.</p></div><ol start="3"><li>Use the Raven to calculate the right column‚Äôs width for the actual <code>--base_size</code>.</li></ol><p>In the grid container, this line:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">grid-template-columns</span><span class="token punctuation">:</span> <span class="token function">repeat</span><span class="token punctuation">(</span>auto-fit<span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--raven_grid_columns_width<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>‚Ä¶then chooses the number of columns to fit the value the Raven provided (which will result in our <code>--number_of_cols_4_???</code> variables from above).</p><p>The Raven may not be able give the number of columns directly, but it can give a length to make <code>repeat</code> and <code>autofit</code> calculate the number we want for us.</p><p>But <code>auto-fit</code> with <code>minmax()</code> does the same thing, right? No! The solution above will never give three columns (or five) and the number of columns does not need to increase with the width of the container. Try to set the following values <a href="https://codepen.io/batchman/pen/GRZVGQx" target="_blank" rel="noopener noreferrer">in this Pen (<i class="vp-icon fa-brands fa-codepen" sizing="height"></i><code>batchman</code>)</a> to see the Raven take full flight:</p><div class="codepen-wrapper codepen-GRZVGQx"><!----><span>See <a>Raven for grid-columns</a> by <a href="https://codepen.io/batchman">batchman</a> on <a href="https://codepen.io">CodePen</a>.</span></div><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--number_of_cols_4_wide</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span>
<span class="line"><span class="token property">--number_of_cols_4_medium</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span></span>
<span class="line"><span class="token property">--number_of_cols_4_small</span><span class="token punctuation">:</span> 4<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="bonus-3-change-the-background-color-with-a-linear-gradient" tabindex="-1"><a class="header-anchor" href="#bonus-3-change-the-background-color-with-a-linear-gradient"><span>Bonus 3: Change the <code>background-color</code> with a <code>linear-gradient()</code></span></a></h2><p>This one is a little more mind-bending. The Raven is all about length values, so how can we get a color out of these? Well, <a class="route-link" href="/bookshelf/css-tricks.com/css3-gradients.html"><strong>linear gradients</strong></a> deal with both. They define colors in certain areas defined by length values. Let‚Äôs go through that concept in more detail before getting to the code.</p><p>To work around the actual gradient part, it is a well known technique to <a href="https://css-tricks.com/books/greatest-css-tricks/hard-stop-gradients/" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-css-tricks" sizing="height"></i>double up a color stop</a>, effectively making the gradient part happen within <code>0px</code>. Look at this code to see how this is done:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">background-image</span><span class="token punctuation">:</span><span class="token function">linear-gradient</span><span class="token punctuation">(</span></span>
<span class="line">  to right<span class="token punctuation">,</span></span>
<span class="line">  red 0%<span class="token punctuation">,</span></span>
<span class="line">  red 50%<span class="token punctuation">,</span></span>
<span class="line">  blue 50%<span class="token punctuation">,</span></span>
<span class="line">  blue 100%</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This will color your background red on the left half, blue on the right. Note the first argument ‚Äúto right.‚Äù This implies that percentage values are evaluated horizontally, from left to right.</p><p>Controlling the values of <code>50%</code> via Raven variables allows for shifting the color stop at will. And we can add more color stops. In the running example, we need three colors, resulting in two (doubled) inner color stops.</p><p>Adding some variables for color and color stops, this is what we get:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span></span>
<span class="line">  to right<span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_small<span class="token punctuation">)</span> 0px<span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_small<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--first_lgbreak_value<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_medium<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--first_lgbreak_value<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_medium<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--second_lgbreak_value<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_wide<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--second_lgbreak_value<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_wide<span class="token punctuation">)</span> 100%</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>But how do we calculate the values for <code>--first_lgbreak_value</code> and <code>--second_lgbreak_value</code>? Let‚Äôs see.</p><p>The first value controls where <code>--color_small</code> is visible. On the small interval, it should be <code>100%</code>, and <code>0px</code> in the other intervals. We‚Äôve seen how to do this with the raven. The second variable controls the visibility of <code>--color_medium</code>. It should be <code>100%</code> for the small interval, <code>100%</code> for the medium interval, but <code>0px</code> for the wide interval. The corresponding indicator must be <code>1px</code> if the container width is in the small <em>or</em> the medium interval.</p><p>Since we can do boolean logic on indicators, it is:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token function">max</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">,</span> --is_medium<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>‚Ä¶to get the right indicator. This gives:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--first_lgbreak_value</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span> 100%<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token property">--second_lgbreak_value</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--is_medium<span class="token punctuation">)</span><span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span> 100%<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Putting things together results in this CSS code to change the <code>background-color</code> based on the width (the interval indicators are calculated like shown above):</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--first_lgbreak_value</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span></span>
<span class="line">      <span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span> 100%<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token property">--second_lgbreak_value</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--is_medium<span class="token punctuation">)</span><span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span> 100%<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token property">--color_wide</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><span class="token comment">/* change to your needs*/</span></span>
<span class="line"><span class="token property">--color_medium</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span><span class="token comment">/* change to your needs*/</span></span>
<span class="line"><span class="token property">--color_small</span><span class="token punctuation">:</span> lightblue<span class="token punctuation">;</span><span class="token comment">/* change to your needs*/</span></span>
<span class="line"></span>
<span class="line"><span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span></span>
<span class="line">  to right<span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_small<span class="token punctuation">)</span> 0px<span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_small<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--first_lgbreak_value<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_medium<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--first_lgbreak_value<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_medium<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--second_lgbreak_value<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_wide<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--second_lgbreak_value<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_wide<span class="token punctuation">)</span> 100%</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://codepen.io/batchman/pen/XWdvPVo" target="_blank" rel="noopener noreferrer">Here‚Äôs a Pen (<i class="vp-icon iconfont icon-css-tricks" sizing="height"></i>)</a> to see that in action.</p><div class="codepen-wrapper codepen-XWdvPVo"><!----><span>See <a>Raven for grid-columns</a> by <a href="https://codepen.io/batchman">batchman</a> on <a href="https://codepen.io">CodePen</a>.</span></div><hr><h2 id="bonus-4-getting-rid-of-nested-variables" tabindex="-1"><a class="header-anchor" href="#bonus-4-getting-rid-of-nested-variables"><span>Bonus 4: Getting rid of nested variables</span></a></h2><p>While working with the Raven, I came across a strange problem: There is a limit on the number of nested variables that can be used in <code>calc()</code><em>.</em> This can cause some problems when using too many breakpoints. As far as I understand, this limit is in place to prevent page blocking while calculating the styles and allow for faster circle-reference checks.</p><p>In my opinion, something like <em>evaluate to value</em> would be a great way to overcome this. Nevertheless, this limit can give you a headache when pushing the limits of CSS. Hopefully this problem will be tackled in the future.</p><p>There is a way to calculate the indicator variables for the Raven without the need of (deeply) nested variables. Let‚Äôs look at the original calculation for the <code>--is_medium</code> value:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--is_medium</span><span class="token punctuation">:</span><span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span> </span>
<span class="line">        <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_medium<span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">        1px<span class="token punctuation">)</span> </span>
<span class="line">        - <span class="token function">var</span><span class="token punctuation">(</span>--is_wide<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The problem occurs with the subtraction of <code>--is_wide</code> . This causes the CSS parser to paste in the definition of the complete formula of <code>--is_wide</code>. The calculation of <code>--is_small</code> has even more of these types of references. (The definition for <code>--is_wide</code> will even be pasted twice since it is hidden within the definition of <code>--is_medium</code> and is also used directly.)</p><p>Fortunately, there is a way to calculate indicators without referencing indicators for bigger breakpoints.</p><p>The indicator is true if, and only if, <code>--base_size</code> is bigger than the lower breakpoint for the interval and smaller or equal than the higher breakpoint for the interval. This definition gives us the following code:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--is_medium</span><span class="token punctuation">:</span> </span>
<span class="line">  <span class="token function">min</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_medium<span class="token punctuation">)</span><span class="token punctuation">,</span> 1px<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span> 1px + <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_wide<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span><span class="token punctuation">,</span> 1px<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>min()</code> is used as a logical AND operator</li><li>the first <code>clamp()</code> is ‚Äú<code>--base_size</code> is bigger than <code>--breakpoint_medium</code>‚Äù</li><li>the second <code>clamp()</code> means ‚Äú<code>--base_size</code> is smaller or equal than <code>--breakpoint_wide</code>.‚Äù</li><li>Adding <code>1px</code> switches from ‚Äúsmaller than‚Äù to ‚Äúsmaller <strong>or equal</strong> than.‚Äù This works, because we are dealing with whole (pixel) numbers (<code>a &lt;= b</code> means <code>a &lt; (b+1)</code> for whole numbers).</li></ul><p>The complete calculation of the indicator variables can be done this way:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--is_wide</span><span class="token punctuation">:</span> <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_wide<span class="token punctuation">)</span><span class="token punctuation">,</span> 1px<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token property">--is_medium</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_medium<span class="token punctuation">)</span><span class="token punctuation">,</span> 1px<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                 <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span> 1px + <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_wide<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span><span class="token punctuation">,</span> 1px<span class="token punctuation">)</span></span>
<span class="line">             <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token property">--is_small</span><span class="token punctuation">:</span> <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span>1px + <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_medium<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span><span class="token punctuation">,</span> 1px<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The calculations for <code>--is_wide</code> and <code>--is_small</code> are simpler, because only one given breakpoint needs to be checked for each.</p><p>This works with all the things we‚Äôve looked at so far. <a href="https://codepen.io/batchman/pen/YzWKpOr" target="_blank" rel="noopener noreferrer">Here‚Äôs a Pen (<i class="vp-icon iconfont icon-css-tricks" sizing="height"></i>)</a> that combines examples.</p><div class="codepen-wrapper codepen-YzWKpOr"><!----><span>See <a>A less nested Raven</a> by <a href="https://codepen.io/batchman">batchman</a> on <a href="https://codepen.io">CodePen</a>.</span></div><hr><h2 id="final-thoughts" tabindex="-1"><a class="header-anchor" href="#final-thoughts"><span>Final thoughts</span></a></h2><p>The Raven is not capable of all the things that a media query can do. But we don‚Äôt need it to do that, as we have media queries in CSS. It is fine to use them for the ‚Äúbig‚Äù design changes, like the position of a sidebar or a reconfiguration of a menu. Those things happen within the context of the full viewport (the size of the browser window).</p><p>But for components, media queries are kind of <em>wrong</em>, since we never know how components will be sized.</p><p>Heydon Pickering demonstrated this problem with this image:</p><figure><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/10/RT_x4UFA.png?resize=1200%2C482&amp;ssl=1" alt="Three boxes representing browsers from left-to-right. The first is a wide viewport with three boxes in a single row. The second is a narrow viewport with the boxes stacked vertically. The third is a wide viewport, but with a dashed vertical line down the middle representing a container and the three boxes are to the right of it in a single row." tabindex="0" loading="lazy"><figcaption>Three boxes representing browsers from left-to-right. The first is a wide viewport with three boxes in a single row. The second is a narrow viewport with the boxes stacked vertically. The third is a wide viewport, but with a dashed vertical line down the middle representing a container and the three boxes are to the right of it in a single row.</figcaption></figure><p>I hope that the Raven helps you to overcome the problems of creating responsive layouts for components and pushes the limits of ‚Äúwhat can be done with CSS‚Äù a little bit further.</p><p>By showing what is possible today, maybe ‚Äúreal‚Äù container queries can be done by adding some syntax sugar and some very small new functions (like <code>conW</code>, <code>conH</code>, ‚Äústrip-unit‚Äù or ‚Äúevaluate-to-pixels‚Äù). If there was a function in CSS that allows to rewrite ‚Äú<code>1px</code>‚Äù to a whitespace, and ‚Äú<code>0px</code>‚Äù to ‚Äú<code>initial</code>‚Äú, the Raven could be combined with the <a class="route-link" href="/bookshelf/css-tricks.com/the-css-custom-property-toggle-trick.html"><strong>Custom Property Toggle Trick</strong></a> and change every CSS property, not just length values.</p><p>By avoiding JavaScript for this, your layouts will render faster because it‚Äôs not dependent on JavaScript downloading or running. It doesn‚Äôt even matter if JavaScript is disabled. These calculations will not block your main thread and your application logic isn‚Äôt cluttered with design logic.</p><div class="hint-container note"><p class="hint-container-title">Note</p><p>Thanks to <a href="https://css-tricks.com/author/chriscoyier/" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-css-tricks" sizing="height"></i>Chris</a>, <a href="https://css-tricks.com/author/agalante/" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-css-tricks" sizing="height"></i>Andr√©s Galante</a>, <a href="https://css-tricks.com/author/cathydutton/" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-css-tricks" sizing="height"></i>Cathy Dutton</a>, <a href="https://css-tricks.com/author/markoilic/" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-css-tricks" sizing="height"></i>Marko Ilic</a>, and <a href="https://css-tricks.com/author/daveatanda/" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-css-tricks" sizing="height"></i>David Atanda</a> for their great CSS-Tricks articles. They really helped me explore what can be done with the Raven.</p></div><!-- TODO: add ARTICLE CARD --><a class="vp-card" href="https://chanhi2000.github.io/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html" target="_blank" style="background:rgba(17,17,17,0.2);"><img class="vp-card-logo" src="https://css-tricks/favicon.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">The Raven Technique: One Step Closer to Container Queries</div><hr><div class="vp-card-desc">For the millionth time: We need container queries in CSS! And guess what, it looks like we're heading in that direction.</div></div></a></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/chanhi2000/bookshelf/edit/main/src/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/bookshelf/programming/css/articles/" aria-label="/programming/css/articles/"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->/programming/css/articles/</div></a><a class="route-link auto-link next" href="/bookshelf/css-tricks.com/the-css-custom-property-toggle-trick.html" aria-label="The CSS Custom Property Toggle Trick"><div class="hint">Next<span class="arrow end"></span></div><div class="link">The CSS Custom Property Toggle Trick<i class="vp-icon fa-brands fa-css3-alt" sizing="height"></i></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">MIT Licensed | Copyright ¬© 2022-present <a href="https://github.com/chanhi2000">Chan Hee Lee</a></div><div class="vp-copyright">Copyright ¬© 2026 Mathias H√ºlsbusch </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/bookshelf/assets/app-BItykJLQ.js" defer></script>
  </body>
</html>
