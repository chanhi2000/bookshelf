<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.24" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.94" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"A Deep Dive into the Inline Background Overlap Problem","image":["https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/416732169-9cbb369e-7dab-4ad1-b345-aefbdfaa50c9.png?resize=1024%2C250&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419917091-aeb8f280-1a3b-4827-85c1-c6bf6425fb96.png?resize=800%2C192&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419932978-df9f8eed-00ef-45b7-a954-bd8e7cbcf753-1.png?resize=800%2C192&ssl=1","https://cdpn.io/pen/debug/KwKvRKr","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419943848-cc3f8df9-621a-4c95-9227-9b64c8abd320.png?resize=800%2C192&ssl=1","https://codepen.io/thebabydino/pen/gbOwxGL","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419959733-8c866d6c-e940-4e24-b27e-294025425e69.png?resize=800%2C192&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419973578-7e5dd953-22e5-4106-8a96-ed4a240ffcfe.png?resize=800%2C342&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419983532-e37313d6-3ab8-4f77-850f-84b6ff6cdb41.png?resize=800%2C342&ssl=1","https://codepen.io/thebabydino/pen/ogNzGpw","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420042481-0b030caf-58d6-4dcd-8e37-9c1ffe97a930.png?resize=800%2C264&ssl=1","https://codepen.io/thebabydino/pen/azbpKpg","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420044455-77799210-3b25-4312-98a7-4cc296a9cdba.png?resize=800%2C264&ssl=1","https://codepen.io/thebabydino/pen/pvormNg","https://codepen.io/thebabydino/pen/yyLgWjQ","https://codepen.io/thebabydino/pen/ZYEJBZr","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420356221-86ba9f46-d026-4138-9975-04f6f8acddf8.png?resize=800%2C192&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420568656-a726cc27-9ef9-46a2-84d4-943370d2a18f.png?resize=800%2C360&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420592423-5ee58be4-e3b6-475d-8353-dbdd07b28506.png?resize=800%2C374&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420622735-172f79d1-5f49-4c70-9b01-c9cde68974c0.png?resize=800%2C400&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420622938-0a6221ab-593a-4f45-93ca-1dc28820428e.png?resize=800%2C400&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420623150-858f198f-0791-40de-8dae-7a4af30623f7.png?resize=800%2C400&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420624040-f48d5f15-0298-4ea1-923a-3dfcbdd96b92.png?resize=800%2C400&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421526552-d7aa5011-b420-42ad-86e9-7c218867d0f0.png?resize=800%2C416&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421563823-bef2a12e-63c3-48ae-8c03-ab698869dae1-1.png?resize=800%2C512&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421564769-35c90577-cc28-417d-8f11-fd28e1baaf26.png?resize=800%2C512&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421566248-cb88abc1-50fa-407c-9820-6484b5272908.png?resize=800%2C512&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421567092-20782bfb-8bd8-47a4-955d-1f7e8f7638b2.png?resize=800%2C416&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421568337-289ed7d9-92db-4c73-b5e0-9fcd041b98b3.png?resize=800%2C416&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421569320-65eb1151-e0fa-4d6e-a024-25b6ccadde1c.png?resize=800%2C512&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421569898-090dbf24-dc65-4dff-830b-b538d97c6128.png?resize=800%2C416&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421581023-73fac2b0-fa13-4029-b449-71036fdc48b7.png?resize=800%2C416&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421573835-3385e69e-5c01-4d25-9863-281e7d5e4a23.png?resize=800%2C416&ssl=1"],"datePublished":"2025-03-18T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"Ana Tudor","url":"https://frontendmasters.com/blog/author/anatudor/"}]}</script><meta property="og:url" content="https://chanhi2000.github.io/bookshelf/frontendmasters.com/overlapping-inline-backgrounds.html"><meta property="og:site_name" content="📚Bookshelf"><meta property="og:title" content="A Deep Dive into the Inline Background Overlap Problem"><meta property="og:description" content="Article(s) > A Deep Dive into the Inline Background Overlap Problem"><meta property="og:type" content="article"><meta property="og:image" content="https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/5330"><meta property="og:locale" content="en-US"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:src" content="https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/5330"><meta name="twitter:image:alt" content="A Deep Dive into the Inline Background Overlap Problem"><meta property="article:author" content="Ana Tudor"><meta property="article:tag" content="css"><meta property="article:tag" content="frontendmasters.com"><meta property="article:tag" content="blog"><meta property="article:published_time" content="2025-03-18T00:00:00.000Z"><link rel="icon" href="/bookshelf/assets/icon/favicon.svg"><title>A Deep Dive into the Inline Background Overlap Problem | 📚Bookshelf</title><meta name="description" content="Article(s) > A Deep Dive into the Inline Background Overlap Problem">
    <link rel="preload" href="/bookshelf/assets/style-DmRYlEXZ.css" as="style"><link rel="stylesheet" href="/bookshelf/assets/style-DmRYlEXZ.css">
    
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/bookshelf/" aria-label="Take me home"><img class="vp-nav-logo" src="/bookshelf/assets/icon/favicon.svg" alt><!----><span class="vp-site-name hide-in-pad">📚Bookshelf</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/bookshelf/news.html" aria-label><!--[--><i class="vp-icon fas fa-rss" sizing="height"></i><!--]--><!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-keyboard" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/hackingwithswift.com/" aria-label="hackingwithswift.com"><!--[--><img class="vp-icon" src="https://hackingwithswift.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->hackingwithswift.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fcc/" aria-label="freecodecamp.org"><!--[--><img class="vp-icon" src="https://cdn.freecodecamp.org/universal/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->freecodecamp.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kodeco.com/" aria-label="kodeco.com"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->kodeco.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.kotzilla.io/" aria-label="blog.kotzilla.io"><!--[--><img class="vp-icon" src="https://blog.kotzilla.io/hubfs/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.kotzilla.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kt.academy/" aria-label="kt.academy"><!--[--><img class="vp-icon" src="https://kt.academy/logo.png" alt aria-hidden no-view sizing="both"><!--]-->kt.academy<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/droidcon.com/" aria-label="droidcon.com"><!--[--><img class="vp-icon" src="https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png" alt aria-hidden no-view sizing="both"><!--]-->droidcon.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/outcomeschool.com/" aria-label="outcomeschool.com"><!--[--><img class="vp-icon" src="https://outcomeschool.com/static/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->outcomeschool.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/bookshelf/frontendmasters.com/" aria-label="frontendmasters.com"><!--[--><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->frontendmasters.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tricks.com/" aria-label="css-tricks.com"><!--[--><img class="vp-icon" src="https://css-tricks.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->css-tricks.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="smashingmagazine.com"><!--[--><img class="vp-icon" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->smashingmagazine.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.logrocket.com/" aria-label="blog.logrocket.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.logrocket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/realpython.com/" aria-label="realpython.com"><!--[--><img class="vp-icon" src="https://realpython.com/static/favicon.68cbf4197b0c.png" alt aria-hidden no-view sizing="both"><!--]-->realpython.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/digitalocean.com/" aria-label="digitalocean.com"><!--[--><img class="vp-icon" src="https://digitalocean.com/_next/static/media/favicon.594d6067.ico" alt aria-hidden no-view sizing="both"><!--]-->digitalocean.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/antonioleiva.com/" aria-label="antonioleiva.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/antonioleiva.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->antonioleiva.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/johnnyreilly.com/" aria-label="johnnyreilly.com"><!--[--><img class="vp-icon" src="https://johnnyreilly.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->johnnyreilly.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/code-maze.com/" aria-label="code-maze.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/code-maze.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->code-maze.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/milanjovanovic.tech/" aria-label="milanjovanovic.tech"><!--[--><img class="vp-icon" src="https://milanjovanovic.tech/profile_favicon.png" alt aria-hidden no-view sizing="both"><!--]-->milanjovanovic.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/shopify.engineering/" aria-label="shopify.engineering"><!--[--><img class="vp-icon" src="https://cdn.shopify.com/static/shopify-favicon.png" alt aria-hidden no-view sizing="both"><!--]-->shopify.engineering<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devtoolstips.org/" aria-label="devtoolstips.org"><!--[--><img class="vp-icon" src="https://devtoolstips.org/assets/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devtoolstips.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/piccalil.li/" aria-label="piccalil.li"><!--[--><img class="vp-icon" src="https://piccalil.li/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->piccalil.li<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/sitepoint.com/" aria-label="sitepoint.com"><!--[--><img class="vp-icon" src="https://sitepoint.com/favicons/512x512.png" alt aria-hidden no-view sizing="both"><!--]-->sitepoint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/event-driven.io/" aria-label="event-driven.io"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/event-driven.io/favicon.jfif" alt aria-hidden no-view sizing="both"><!--]-->event-driven.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/packagemain.tech/" aria-label="packagemain.tech"><!--[--><img class="vp-icon" src="https://substack-post-media.s3.amazonaws.com/public/images/2ea54e25-eaa6-4630-bfc0-10b8cfdce894/apple-touch-icon-1024x1024.png" alt aria-hidden no-view sizing="both"><!--]-->packagemain.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/gosolve.io/" aria-label="gosolve.io"><!--[--><img class="vp-icon" src="https://gosolve.io/wp-content/uploads/2022/03/cropped-ikona1-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->gosolve.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/towardsdatascience.com/" aria-label="towardsdatascience.com"><!--[--><img class="vp-icon" src="https://cdn-images-1.medium.com/v2/resize:fill:128:128/1*VzTUkfeGymHP4Bvav-T-lA.png" alt aria-hidden no-view sizing="both"><!--]-->towardsdatascience.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/douggregor.net/" aria-label="douggregor.net"><!--[--><i class="vp-icon fas fa-globe" sizing="both"></i><!--]-->douggregor.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/d2.naver.com/" aria-label="d2.naver.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/d2.naver.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->d2.naver.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakao.com/" aria-label="tech.kakao.com"><!--[--><img class="vp-icon" src="https://www.kakaocorp.com/page/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakao.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakaopay.com/" aria-label="tech.kakaopay.com"><!--[--><img class="vp-icon" src="https://tech.kakaopay.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakaopay.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fe-developers.kakaoent.com/" aria-label="fe-developers.kakaoent.com"><!--[--><img class="vp-icon" src="https://fe-developers.kakaoent.com/favicon-32x32.png?v=44803cb16c1e2debd3984cf2e8cb2ded" alt aria-hidden no-view sizing="both"><!--]-->fe-developers.kakaoent.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/yozm.wishket.com/" aria-label="yozm.wishket.com"><!--[--><img class="vp-icon" src="https://yozm.wishket.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->yozm.wishket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/popit.kr/" aria-label="popit.kr"><!--[--><img class="vp-icon" src="https://popit.kr/wp-content/uploads/2016/08/favicon_32x32.png" alt aria-hidden no-view sizing="both"><!--]-->popit.kr<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devkuma.com/" aria-label="devkuma.com"><!--[--><img class="vp-icon" src="https://devkuma.com/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devkuma.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.gangnamunni.com/" aria-label="blog.gangnamunni.com"><!--[--><img class="vp-icon" src="https://blog.gangnamunni.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->blog.gangnamunni.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/codingeverybody.kr/" aria-label="codingeverybody.kr"><!--[--><img class="vp-icon" src="https://codingeverybody.kr/wp-content/uploads/cropped-favicon-origin-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->codingeverybody.kr<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-network-wired" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tecmint.com/" aria-label="tecmint.com"><!--[--><img class="vp-icon" src="https://tecmint.com/wp-content/uploads/2020/07/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tecmint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/docker.com/" aria-label="docker.com"><!--[--><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->docker.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/learnk8s.io/" aria-label="learnk8s.io"><!--[--><img class="vp-icon" src="https://static.learnk8s.io/f7e5160d4744cf05c46161170b5c11c9.svg" alt aria-hidden no-view sizing="both"><!--]-->learnk8s.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/itsfoss.com/" aria-label="itsfoss.com"><!--[--><img class="vp-icon" src="https://itsfoss.com/content/images/size/w256h256/2022/12/android-chrome-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->itsfoss.com<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/chanhi2000/articles" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-appearance-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-appearance-dropdown"><!----></div></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><span class="vp-sidebar-title">frontendmasters.com</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">2025</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/inset-shadows-directly-on-img-elements-part-1.html" aria-label="Inset Shadows Directly on img Elements (Part 1)"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Inset Shadows Directly on img Elements (Part 1)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/learn-media-queries.html" aria-label="How much do you really know about media queries?"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->How much do you really know about media queries?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/the-coyier-css-starter.html" aria-label="The Coyier CSS Starter"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->The Coyier CSS Starter<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/what-you-need-to-know-about-modern-css-2025-edition.html" aria-label="What You Need to Know about Modern CSS (2025 Edition)"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->What You Need to Know about Modern CSS (2025 Edition)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/css-offset-and-animation-composition-for-rotating-menus.html" aria-label="CSS offset and animation-composition for Rotating Menus"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->CSS offset and animation-composition for Rotating Menus<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/choosing-the-right-model-in-cursor.html" aria-label="Choosing the Right Model in Cursor"><!--[--><i class="vp-icon iconfont icon-cursor" sizing="both"></i><!--]-->Choosing the Right Model in Cursor<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/getting-started-with-cursor.html" aria-label="Getting Started with Cursor"><!--[--><i class="vp-icon iconfont icon-cursor" sizing="both"></i><!--]-->Getting Started with Cursor<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/advanced-postgresql-indexing.html" aria-label="Advanced PostgreSQL Indexing: Multi-Key Queries and Performance Optimization"><!--[--><i class="vp-icon iconfont icon-postgresql" sizing="both"></i><!--]-->Advanced PostgreSQL Indexing: Multi-Key Queries and Performance Optimization<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/intro-to-postgres-indexes.html" aria-label="Introduction to Postgres Indexes"><!--[--><i class="vp-icon iconfont icon-postgresql" sizing="both"></i><!--]-->Introduction to Postgres Indexes<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/the-path-of-least-resistance-part-2.html" aria-label="The `-path` of Least Resistance (Part 2)"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->The `-path` of Least Resistance (Part 2)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/the-path-of-least-resistance-part-1.html" aria-label="The `-path` of Least Resistance (Part 1)"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->The `-path` of Least Resistance (Part 1)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/opening-a-details-element-from-the-url.html" aria-label="Opening a Details Element from the URL"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Opening a Details Element from the URL<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/very-early-playing-with-random-in-css.html" aria-label="Very Early Playing with random() in CSS"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Very Early Playing with random() in CSS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/quick-dark-mode-toggles.html" aria-label="Quick Dark Mode Toggles"><!--[--><i class="vp-icon fa-brands fa-chrome" sizing="both"></i><!--]-->Quick Dark Mode Toggles<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/obsessing-over-smooth-radial-gradient-disc-edges.html" aria-label="Obsessing Over Smooth radial-gradient() Disc Edges"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Obsessing Over Smooth radial-gradient() Disc Edges<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/web-design-what-is-the-web-capable-of-that-is-hard-to-express-in-design-software.html" aria-label="Web Design: What is the web capable of that is hard to express in design software?"><!--[--><i class="vp-icon fas fa-pen-ruler" sizing="both"></i><!--]-->Web Design: What is the web capable of that is hard to express in design software?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/architecture-through-component-colocation.html" aria-label="A Nice Vanilla App Archicture Using Web Components and CSS Module Scripts"><!--[--><i class="vp-icon fa-brands fa-node" sizing="both"></i><!--]-->A Nice Vanilla App Archicture Using Web Components and CSS Module Scripts<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/using-the-custom-highlight-api.html" aria-label="Using the Custom Highlight API"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->Using the Custom Highlight API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/count-auto-fill-columns.html" aria-label="Get the number of auto-fit/auto-fill columns in CSS"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Get the number of auto-fit/auto-fill columns in CSS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/infinite-marquee-animation-using-modern-css.html" aria-label="Infinite Marquee Animation using Modern CSS"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Infinite Marquee Animation using Modern CSS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/should-we-never-use-non-logical-properties.html" aria-label="Should we NEVER use non-logical properties?"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Should we NEVER use non-logical properties?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/the-figcaption-problem.html" aria-label="The Figcaption Problem"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->The Figcaption Problem<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/introducing-zustand.html" aria-label="Introducing Zustand (State Management)"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Introducing Zustand (State Management)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/adaptive-alerts-a-css-scroll-state-use-case.html" aria-label="Adaptive Alerts (a CSS scroll-state Use Case)"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Adaptive Alerts (a CSS scroll-state Use Case)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/stacked-transforms.html" aria-label="Stacked Transforms"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Stacked Transforms<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/deploy-a-site-with-a-build-process-a-custom-domain-name.html" aria-label="Deploy a Site with a Build Process &amp; a Custom Domain Name"><!--[--><i class="vp-icon fas fa-network-wired" sizing="both"></i><!--]-->Deploy a Site with a Build Process &amp; a Custom Domain Name<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/view-transition-list-reordering-with-a-kick-flip.html" aria-label="View Transition List Reordering (with a Kick Flip)"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->View Transition List Reordering (with a Kick Flip)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/satisfies-in-typescript.html" aria-label="Satisfies in TypeScript"><!--[--><i class="vp-icon iconfont icon-typescript" sizing="both"></i><!--]-->Satisfies in TypeScript<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/custom-select-that-comes-up-from-the-bottom-on-mobile.html" aria-label="Custom Select (that comes up from the bottom on mobile)"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Custom Select (that comes up from the bottom on mobile)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/step-gradients-with-a-given-number-of-steps.html" aria-label="Step Gradients with a Given Number of Steps"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Step Gradients with a Given Number of Steps<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/quantity-query-carousel.html" aria-label="Quantity Query Carousel"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Quantity Query Carousel<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/understanding-css-corner-shape-and-the-power-of-the-superellipse.html" aria-label="Understanding CSScorner-shapeand the Power of the Superellipse"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Understanding CSScorner-shapeand the Power of the Superellipse<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/drawing-css-shapes-using-corner-shape.html" aria-label="Drawing CSS Shapes using corner-shape"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Drawing CSS Shapes using corner-shape<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/scope-in-css.html" aria-label="Scope in CSS"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Scope in CSS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/grainy-gradients.html" aria-label="Grainy Gradients"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Grainy Gradients<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/1fr-1fr-vs-auto-auto-vs-50-50.html" aria-label="1fr 1fr vs auto auto vs 50% 50%"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->1fr 1fr vs auto auto vs 50% 50%<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/scroll-driven-letter-grid.html" aria-label="Scroll-Driven Letter Grid"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Scroll-Driven Letter Grid<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/firstchild-can-be-white-space.html" aria-label="firstChild can be white space"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->firstChild can be white space<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/the-simplest-way-to-deploy.html" aria-label="The Simplest Way to Deploy Your Own Updatable Portfolio Site"><!--[--><i class="vp-icon iconfont icon-github" sizing="both"></i><!--]-->The Simplest Way to Deploy Your Own Updatable Portfolio Site<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/css-spotlight-effect.html" aria-label="CSS Spotlight Effect"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->CSS Spotlight Effect<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/move-modal-in-on-a-shape.html" aria-label="Move Modal in on a… shape()"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Move Modal in on a… shape()<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/chatgpt-and-old-and-broken-code.html" aria-label="ChatGPT and the proliferation of obsolete and broken solutions to problems we hadn’t had for over half a decade before its launch"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->ChatGPT and the proliferation of obsolete and broken solutions to problems we hadn’t had for over half a decade before its launch<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/creating-blob-shapes-using-clip-path-shape.html" aria-label="Creating Blob Shapes using clip-path: shape()"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Creating Blob Shapes using clip-path: shape()<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/to-flip-or-not-to-flip.html" aria-label="Is there a Correct Answer? Flipping Layouts When Google Translate Swaps between a Left-to-Right Language and a Right-to-Left Language"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Is there a Correct Answer? Flipping Layouts When Google Translate Swaps between a Left-to-Right Language and a Right-to-Left Language<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/container-query-for-is-there-enough-space-outside-this-element.html" aria-label="Container Query for “is there enough space outside this element?”"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Container Query for “is there enough space outside this element?”<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/creating-flower-shapes-using-clip-path-shape.html" aria-label="Creating Flower Shapes using clip-path: shape()"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Creating Flower Shapes using clip-path: shape()<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/shape-a-new-powerful-drawing-syntax-in-css.html" aria-label="shape(): A New Powerful Drawing Syntax in CSS"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->shape(): A New Powerful Drawing Syntax in CSS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/using-container-query-units-relative-to-an-outer-container.html" aria-label="Using Container Query Units Relative to an Outer Container"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Using Container Query Units Relative to an Outer Container<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/curved-box-cutouts-in-css.html" aria-label="Curved Box Cutouts in CSS"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Curved Box Cutouts in CSS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/seeking-an-answer-why-cant-html-alone-do-includes.html" aria-label="Seeking an Answer: Why can’t HTML alone do includes?"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Seeking an Answer: Why can’t HTML alone do includes?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/react-internals-which-useeffect-runs-first.html" aria-label="React Internals: Which useEffect runs first?"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->React Internals: Which useEffect runs first?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/am-i-a-sadistic-developer-are-you.html" aria-label="Am I a Sadistic Developer? Are You?"><!--[--><i class="vp-icon fas fa-user-tie" sizing="both"></i><!--]-->Am I a Sadistic Developer? Are You?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/newfangled-browser-alternatives.html" aria-label="Newfangled Browser Alternatives"><!--[--><i class="vp-icon fa-brands fa-chrome" sizing="both"></i><!--]-->Newfangled Browser Alternatives<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/lessons-learned-from-recreating-a-styled-dialog.html" aria-label="Lessons Learned from Recreating a Styled Dialog"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Lessons Learned from Recreating a Styled Dialog<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/the-latest-in-the-how-are-we-going-to-do-masonry-debate-apple-says-item-flow.html" aria-label="The Latest in the “How are we going to do masonry?” Debate: Apple Says “Item Flow”"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->The Latest in the “How are we going to do masonry?” Debate: Apple Says “Item Flow”<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/using-currentcolor-in-2025.html" aria-label="Using currentColor in 2025"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Using currentColor in 2025<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/custom-progress-element-using-the-attr-function.html" aria-label="Custom progress element using the attr() function"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Custom progress element using the attr() function<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/css-bursts-with-conic-gradients.html" aria-label="CSS Bursts with Conic Gradients"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->CSS Bursts with Conic Gradients<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/reanimating-the-css-day-buttons.html" aria-label="Reanimating the CSS Day Buttons"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Reanimating the CSS Day Buttons<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/expanding-css-shadow-effects.html" aria-label="Expanding CSS Shadow Effects - Frontend Masters Blog"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Expanding CSS Shadow Effects - Frontend Masters Blog<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/layered-text-headers.html" aria-label="Layered Text Headers"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Layered Text Headers<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/one-thing-scope-can-do-is-reduce-concerns-about-source-order.html" aria-label="One Thing @scope Can Do is Reduce Concerns About Source Order"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->One Thing @scope Can Do is Reduce Concerns About Source Order<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/bookshelf/frontendmasters.com/overlapping-inline-backgrounds.html" aria-label="A Deep Dive into the Inline Background Overlap Problem"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->A Deep Dive into the Inline Background Overlap Problem<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/chilled-out-text-underlines.html" aria-label="Chilled Out Text Underlines"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Chilled Out Text Underlines<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/the-moment-you-need-a-database.html" aria-label="The Moment You Need a Database"><!--[--><i class="vp-icon fas fa-database" sizing="both"></i><!--]-->The Moment You Need a Database<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/movies-as-images.html" aria-label="Movies as Images"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Movies as Images<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/custom-property-fallbacks.html" aria-label="Custom Property Fallbacks"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Custom Property Fallbacks<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/examples-of-why-the-web-needs-anchored-popovers.html" aria-label="Examples of Why The Web Needs Anchored Popovers"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Examples of Why The Web Needs Anchored Popovers<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/how-to-use-attr-in-css-for-columns-colors-and-font-size.html" aria-label="How to Use attr() in CSS for Columns, Colors, and Font-Size"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->How to Use attr() in CSS for Columns, Colors, and Font-Size<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/a-color-input-that-also-shows-the-value.html" aria-label="A Color Input That Also Shows the Value"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->A Color Input That Also Shows the Value<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/rainbow-selection-in-css.html" aria-label="Rainbow Selection in CSS"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Rainbow Selection in CSS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/optimizing-images-for-web-performance.html" aria-label="Optimizing Images for Web Performance"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Optimizing Images for Web Performance<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/three-approaches-to-the-ampersand-selector-in-css.html" aria-label="Three Approaches to the “&amp;” (ampersand) Selector in CSS"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Three Approaches to the “&amp;” (ampersand) Selector in CSS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/html-css-for-a-one-time-password-input.html" aria-label="HTML &amp; CSS for a One-Time Password Input"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->HTML &amp; CSS for a One-Time Password Input<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/notes-on-the-code-editors-with-ai-landscape.html" aria-label="Notes on the Code Editors with AI Landscape"><!--[--><i class="vp-icon iconfont icon-vscode" sizing="both"></i><!--]-->Notes on the Code Editors with AI Landscape<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/mapping-with-leaflet.html" aria-label="Mapping with Leaflet"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->Mapping with Leaflet<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/full-bleed-layout-with-modern-css.html" aria-label="Full-Bleed Layout with Modern CSS"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Full-Bleed Layout with Modern CSS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/creating-an-angled-slider.html" aria-label="Creating an Angled Slider"><!--[--><i class="vp-icon fa-brands fa-sass" sizing="both"></i><!--]-->Creating an Angled Slider<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/simplify-lazy-loading-with-intersection-observers-scrollmargin.html" aria-label="Simplify Lazy Loading With Intersection Observer’s ScrollMargin"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->Simplify Lazy Loading With Intersection Observer’s ScrollMargin<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/css-wishlist-for-2025.html" aria-label="CSS Wishlist for 2025"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->CSS Wishlist for 2025<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/sharing-a-variable-across-html-css-and-javascript.html" aria-label="Sharing a Variable Across HTML, CSS, and JavaScript"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Sharing a Variable Across HTML, CSS, and JavaScript<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/bone-up-html-2025.html" aria-label="Relatively New Things You Should Know about HTML Heading Into 2025"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Relatively New Things You Should Know about HTML Heading Into 2025<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/containers-context.html" aria-label="Containers &amp; Context"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Containers &amp; Context<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2024</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2023</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><div class="page-cover"><img src="https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/5330" alt no-view></div><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon fa-brands fa-css3-alt" sizing="height"></i>A Deep Dive into the Inline Background Overlap Problem</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://frontendmasters.com/blog/author/anatudor/" target="_blank" rel="noopener noreferrer">Ana Tudor</a></span><span property="author" content="Ana Tudor"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">3/18/25</span><meta property="datePublished" content="2025-03-18T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 35 min</span><meta property="timeRequired" content="PT35M"></span><span class="page-category-info" aria-label="Category🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color7" role>CSS</span><span class="page-category-item color8" role>Article(s)</span><!--]--><meta property="articleSection" content="CSS,Article(s)"></span><span class="page-tag-info" aria-label="Tag🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8" role>blog</span><span class="page-tag-item color8" role>frontendmasters.com</span><span class="page-tag-item color2" role>css</span><!--]--><meta property="keywords" content="blog,frontendmasters.com,css"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="frontmatter-title-관련" tabindex="-1"><a class="header-anchor" href="#frontmatter-title-관련"><span>A Deep Dive into the Inline Background Overlap Problem 관련</span></a></h1><a class="route-link vp-card" href="/bookshelf/programming/css/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="/bookshelf/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">CSS > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><nav class="table-of-contents"><ul><li><a aria-current="page" href="/bookshelf/frontendmasters.com/overlapping-inline-backgrounds.html#the-initial-problem-and-exact-particular-solution" class="router-link-active router-link-exact-active">The initial problem and exact particular solution</a></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/overlapping-inline-backgrounds.html#expanding-the-problem-scope" class="router-link-active router-link-exact-active">Expanding the problem scope</a><ul><li><a aria-current="page" href="/bookshelf/frontendmasters.com/overlapping-inline-backgrounds.html#a-related-problem" class="router-link-active router-link-exact-active">A related problem</a></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/overlapping-inline-backgrounds.html#the-simplest-case-separate-spans-opaque-backgrounds-black-white-text" class="router-link-active router-link-exact-active">The simplest case: separate spans, opaque backgrounds, black/ white text</a></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/overlapping-inline-backgrounds.html#slightly-more-complex-long-wrapping-span-opaque-background-black-white-text" class="router-link-active router-link-exact-active">Slightly more complex: long wrapping span, opaque background, black/ white text</a></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/overlapping-inline-backgrounds.html#the-most-complex-case-transparent-background-where-neither-the-text-nor-the-background-are-black-white" class="router-link-active router-link-exact-active">The most complex case: transparent background where neither the text nor the background are black/white</a></li></ul></li></ul></nav><hr><div class="vp-site-info" data-name="A Deep Dive into the Inline Background Overlap Problem"><a class="vp-site-info-navigator no-external-link-icon" title="A Deep Dive into the Inline Background Overlap Problem" href="https://frontendmasters.com/blog/overlapping-inline-backgrounds/" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/5330) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://frontendmasters.com/favicon.ico" alt loading="lazy" no-view><div class="vp-site-info-name">A Deep Dive into the Inline Background Overlap Problem</div><div class="vp-site-info-desc">`box-decoration-break: clone;` in CSS can help us make for interesting backgrounds across lines of text that break, but when opacity gets involved, things can get complicated.</div></div><!----></div><p>A<a href="https://x.com/LukyVJ/status/1894338305795244316" target="_blank" rel="noopener noreferrer">tweet by Lucas Bonomi (<i class="vp-icon fa-brands fa-x-twitter" sizing="height"></i><code>LukyVJ</code>)</a>got me thinking about this problem: how to get a semitransparent background following some inline text with padding, but without the overlap problem that can be seen in the image below.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/416732169-9cbb369e-7dab-4ad1-b345-aefbdfaa50c9.png?resize=1024%2C250&amp;ssl=1" alt="Screenshot showing three lines of text, middle aligned, each with its own semitransparent background and padding. The padding on each line leads to intersection, and where we have intersection, the semi-transparent background becomes more opaque. The challenge is to get this result without the increase in alpha in the intersection areas." tabindex="0" loading="lazy"><figcaption>Screenshot showing three lines of text, middle aligned, each with its own semitransparent background and padding. The padding on each line leads to intersection, and where we have intersection, the semi-transparent background becomes more opaque. The challenge is to get this result without the increase in alpha in the intersection areas.</figcaption></figure><p>the problem at hand: the overlapping parts appear darker because of the layered opacity</p><p><a href="https://frontendmasters.com/blog/author/temaniafif/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Temani Afif</a> had already <a href="https://x.com/ChallengesCss/status/1894354015531450664" target="_blank" rel="noopener noreferrer">suggested (<i class="vp-icon fa-brands fa-x-twitter" sizing="height"></i><code>ChallengesCss</code>)</a> using an SVG<code>filter</code>solution, and that was my first instinct too.</p><p>While the initial problem has a pretty simple solution, more complex variations lead me down a deep rabbit hole and I thought the journey was worth sharing in an article.</p><hr><h2 id="the-initial-problem-and-exact-particular-solution" tabindex="-1"><a class="header-anchor" href="#the-initial-problem-and-exact-particular-solution"><span>The initial problem and exact particular solution</span></a></h2><p>We start with some middle-aligned text wrapped inside a<code>p</code>and a<code>span</code>. The<code>span</code>gets <code>padding</code>, <code>border-radius</code>,and a semi-transparent<code>background</code>.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">p &gt; span</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">padding</span><span class="token punctuation">:</span> .25em<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>0 0 0/ <span class="token function">var</span><span class="token punctuation">(</span>--a<span class="token punctuation">,</span> .7<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">box-decoration-break</span><span class="token punctuation">:</span> clone</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We’re also setting<code>box-decoration-break: clone</code>so that each wrapped line gets its own<code>padding</code>and corner rounding (this is a very neat CSS feature that’s<a href="https://css-tricks.com/decorating-lines-of-text-with-box-decoration-break/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>worth looking into</a>if you’re not familiar with it).</p><p>The result of the above code looks as follows:</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419917091-aeb8f280-1a3b-4827-85c1-c6bf6425fb96.png?resize=800%2C192&amp;ssl=1" alt="what the above CSS gives us: the overlap problem" tabindex="0" loading="lazy"><figcaption>what the above CSS gives us: the overlap problem</figcaption></figure><p>This is pretty much the same as the screenshot Lucas posted, so let’s see how we can fix it with an SVG<code>filter</code>!</p><p>The first step is to make the<code>background</code>of the<code>span</code>opaque by setting<code>--a</code>to<code>1</code>. This gets rid of the overlap increasing alpha problem because there is no more transparency. To restore that transparency, we use an SVG<code>filter</code>. We’ll get to that in a moment, but for now, these are the styles we add:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token comment">/* same other styles as before */</span></span>
<span class="line"><span class="token selector">p</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--a</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>#alpha<span class="token punctuation">)</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The SVG<code>filter</code>needs to live inside an<code>svg</code>element. Since this<code>svg</code>element only contains our<code>filter</code>and no actual SVG graphics to be displayed on the screen, it is functionally the same as a<code>style</code>element, so there’s no need for it to be visible/ take up space in the document flow.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0<span class="token punctuation">&#39;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0<span class="token punctuation">&#39;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>true<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>alpha<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token comment">&lt;!-- filter content goes here --&gt;</span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">svg[height=&#39;0&#39;][aria-hidden=&#39;true&#39;]</span> <span class="token punctuation">{</span> <span class="token property">position</span><span class="token punctuation">:</span> fixed <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The first primitive,<a href="https://webplatform.github.io/docs/svg/elements/feComponentTransfer/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i><code>feComponentTransfer</code></a>, takes the<code>SourceAlpha</code>(basically, the<code>filter</code>input, with the RGB channels of all pixels zeroed, all pixels become black, but keep their alpha) as input (<a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/in" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-firefox" sizing="height"></i><code>in</code></a>) and scales it to the desired alpha, basically giving us the semitransparent version of the shape of the<code>span</code>background. This is because the input alpha is<code>1</code>within the<code>span</code>background area and<code>0</code>outside it. Multiplying the desired alpha with<code>1</code>leaves it unchanged, while multiplying it with<code>0</code>… well, zeroes it.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0<span class="token punctuation">&#39;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0<span class="token punctuation">&#39;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>true<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>alpha<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>SourceAlpha<span class="token punctuation">&#39;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>back<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>linear<span class="token punctuation">&#39;</span></span> <span class="token attr-name">slope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>.7<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We’ve also named the<a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/result" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-firefox" sizing="height"></i><code>result</code></a>of this primitive<code>back</code>so we can reference it later in primitives not immediately folowing this particular<code>feComponentTransfer</code>one.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419932978-df9f8eed-00ef-45b7-a954-bd8e7cbcf753-1.png?resize=800%2C192&amp;ssl=1" alt="result of the first filter step: the semitransparent black background" tabindex="0" loading="lazy"><figcaption>result of the first filter step: the semitransparent black background</figcaption></figure><p>Now we have the semi-transparent multi-line<code>span</code>background with no increase in alpha in the overlap areas. But we still need to get the text and add it on top of it.</p><p>Next, we have a<a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/feColorMatrix" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-firefox" sizing="height"></i><code>feColorMatrix</code></a>primitive that uses the<a href="https://bsky.app/profile/anatudor.bsky.social/post/3kqibnwoquk2m" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>green channel as an alpha mask</a>(the second value on the last row of the matrix is the only non-zero one) and maxes out (sets to<code>100%</code>) all RGB channels of the output (last column, first three rows), basically<a href="https://bsky.app/profile/anatudor.bsky.social/post/3kojyswsn2q2w" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>painting the output</a>white with an alpha equal to the input green channel value. This means the result is full transparency where the input’s green channel is zero (everywhere outside the white text) and opaque white where it’s maxed out (just for the white text).</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alpha<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceAlpha<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>linear<span class="token punctuation">&quot;</span></span> <span class="token attr-name">slope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.7<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1 </span>
<span class="line">              0 0 0 0 1</span>
<span class="line">              0 0 0 0 1</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that by default, the inputs of any primitives other than the very first one in the<code>filter</code>get set to the result of the primitive right before, so for this<code>feColorMatrix</code>primitive we need to explicitly set the input<code>in</code>to<code>SourceGraphic</code>.</p><p>Also note that there’s a reason behind using the green channel to extract the text. This is because when using Chrome and a wide gamut display, we may hit<a href="https://issues.chromium.org/issues/373410239" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-chrome" sizing="height"></i>a bug</a>which causes<code>feColorMatrix</code>to find for example red in what’s <code>0%</code> red, <code>100%</code> green and <code>0%</code> blue. And it’s not just that, but extracting the red channel out of<code>100%</code> red, <code>0%</code> green and<code>0%</code> blue doesn’t give us<code>100%</code> red, but a lower value.</p><p>To get an idea of just how bad the problem is, check out the comparison screenshot below - everything should have all channels either maxed out or zeroed (like on the left), there should be no in betweens (like on the right).</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420838686-97a8bda8-f32c-4e6b-8ce7-4a2ff63feeb3.png?resize=1024%2C547&amp;ssl=1" alt="expected vs. wide gamut problem (&lt;VPIcon icon=&quot;fa-brands fa-codepen&quot;/&gt;live test)" tabindex="0" loading="lazy"><figcaption>expected vs. wide gamut problem (<a href="https://cdpn.io/pen/debug/KwKvRKr" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-codepen" sizing="height"></i>live test</a>)</figcaption></figure><p>After a bunch of tests, it results the problem is less noticeable when using the green channel (compared to when using the blue or red channels), so we’re trying to limit this bug on the hardware where it’s possible to hit it.</p><p>We now have just the white text:</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419943848-cc3f8df9-621a-4c95-9227-9b64c8abd320.png?resize=800%2C192&amp;ssl=1" alt="result of the second filter step: just the white text" tabindex="0" loading="lazy"><figcaption>result of the second filter step: just the white text</figcaption></figure><p>The final step is to place the semi-transparent black background underneath it (<a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/in2" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-firefox" sizing="height"></i><code>in2</code></a>specifies the bottom layer):</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alpha<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceAlpha<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>linear<span class="token punctuation">&quot;</span></span> <span class="token attr-name">slope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.7<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1</span>
<span class="line">              0 0 0 0 1</span>
<span class="line">              0 0 0 0 1</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feBlend</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>I see<a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/feMerge" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-firefox" sizing="height"></i><code>feMerge</code></a>often used for this, but here we only have two layers, so I find<a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/feBlend" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-firefox" sizing="height"></i><code>feBlend</code></a>(with the default<a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/mode" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-firefox" sizing="height"></i><code>mode</code></a>of<code>normal</code>which just places the top layer<code>in</code>over the bottom layer<code>in2</code>) a much simpler solution.</p><p>Note that we’re not specifying<code>in</code>explicitly because, by default, it’s the result of the previous primitive, the<code>feColorMatrix</code>. This is also why we didn’t bother with setting the<code>result</code>attribute like we did for the first primitive, the<code>feComponentTransfer</code>one because the output of this<code>feColorMatrix</code> primitive only gets fed automatically into the<code>in</code>input of the final primitive and nowhere else after that.</p><p>Cool, right?</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419953162-16382e11-1781-4ac9-af5b-3d49ac010d7a.png?resize=800%2C192&amp;ssl=1" alt="the desired result (live demo (&lt;VPIcon icon=&quot;fa-brands fa-codepen&quot;/&gt;))" tabindex="0" loading="lazy"><figcaption>the desired result (<a href="https://codepen.io/thebabydino/pen/gbOwxGL" target="_blank" rel="noopener noreferrer">live demo (<i class="vp-icon fa-brands fa-codepen" sizing="height"></i><code>thebabydino</code>)</a>)</figcaption></figure><hr><h2 id="expanding-the-problem-scope" tabindex="-1"><a class="header-anchor" href="#expanding-the-problem-scope"><span>Expanding the problem scope</span></a></h2><p>I thought this was a neat trick worth sharing, so I posted about it on social media, which lead to an interesting conversation on Mastodon.</p><h3 id="a-related-problem" tabindex="-1"><a class="header-anchor" href="#a-related-problem"><span>A related problem</span></a></h3><p>Patrick H. Lauke<a href="https://mastodon.social/@patrick_h_lauke/114064700058785709" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>pointed me</a>to<a href="https://codepen.io/patrickhlauke/pen/jOzJwvZ" target="_blank" rel="noopener noreferrer">a CodePen demo (<i class="vp-icon fa-brands fa-codepen" sizing="height"></i><code>patrickhlauke</code>)</a>he had made a few years back, higlighting a related problem I wasn’t hitting with the quick demo I had shared: the background of the later lines covering up the text of the ones right before them.</p><p>My demo wasn’t hitting this problem because I had tried to stay reasonably close to the initial challenge screenshot, so I hadn’t used a big enough<code>padding</code>to run into it. But let’s say we increase the<code>padding</code>of the<code>span</code>from<code>.25em</code>to<code>.5em</code>(and also remove the<code>filter</code>to make the problem more obvious).</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419959733-8c866d6c-e940-4e24-b27e-294025425e69.png?resize=800%2C192&amp;ssl=1" alt="the bigger padding problem" tabindex="0" loading="lazy"><figcaption>the bigger padding problem</figcaption></figure><h3 id="the-simplest-case-separate-spans-opaque-backgrounds-black-white-text" tabindex="-1"><a class="header-anchor" href="#the-simplest-case-separate-spans-opaque-backgrounds-black-white-text"><span>The simplest case: separate spans, opaque backgrounds, black/ white text</span></a></h3><p>We first consider the case when we only have separate words wrapped in spans with opaque backgrounds and the text is either black or white (or at least very close). In this very simple case, a properly set<code>mix-blend-mode</code>on<code>span</code>elements (<code>darken</code>for black text,<code>lighten</code>for white) suffices, there’s no need for an SVG<code>filter</code>.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419973578-7e5dd953-22e5-4106-8a96-ed4a240ffcfe.png?resize=800%2C342&amp;ssl=1" alt="isolated spans on opaque contrasting background" tabindex="0" loading="lazy"><figcaption>isolated spans on opaque contrasting background</figcaption></figure><p>Both<code>darken</code>and<code>lighten</code>value work on a per pixel, per channel basis. For each pixel of the input, they take either the minimum (<code>darken</code>) or the maximum (<code>lighten</code>) channel value betwen the two blended layers to produce the result.</p><p>Black always has all channels smaller or at most equal to those of anything else. So when we blend any background layer with black text using the<code>darken</code>blend mode, the result always shows the black text where there is overlap because the<code>0%</code>-valued channels of the black text are always the result of the minimum computation.</p><p>White always has all channels bigger or at most equal to those of anything else. So when we blend any background layer with white text using the<code>lighten</code>blend mode, the result always shows the white text where there is overlap because the<code>100%</code>-valued channels of the white text are always the result of the maximum computation.</p><p>Now this works fine as it is when we don’t have any backdrop behind or when the backdrop is either white for black text or black for white text. In other cases, for example if we have a busy image behind, things don’t look as good as the<code>span</code>elements also get blended with the image backdrop.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419983532-e37313d6-3ab8-4f77-850f-84b6ff6cdb41.png?resize=800%2C342&amp;ssl=1" alt="isolated spans on busy background problem" tabindex="0" loading="lazy"><figcaption>isolated spans on busy background problem</figcaption></figure><p>Luckily, the fix is straightforward: we just need to set<code>isolation: isolate</code>on the parent paragraph!</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419990476-c8acfa01-453b-46be-a940-f2f7d9919e13.png?resize=800%2C342&amp;ssl=1" alt="isolated spans on busy background solution (live demo (&lt;VPIcon icon=&quot;fa-brands fa-codepen&quot;/&gt;))" tabindex="0" loading="lazy"><figcaption>isolated spans on busy background solution (<a href="https://codepen.io/thebabydino/pen/ogNzGpw" target="_blank" rel="noopener noreferrer">live demo (<i class="vp-icon fa-brands fa-codepen" sizing="height"></i><code>thebabydino</code>)</a>)</figcaption></figure><h3 id="slightly-more-complex-long-wrapping-span-opaque-background-black-white-text" tabindex="-1"><a class="header-anchor" href="#slightly-more-complex-long-wrapping-span-opaque-background-black-white-text"><span>Slightly more complex: long wrapping span, opaque background, black/ white text</span></a></h3><p>In this case, the<code>mix-blend-mode</code>solution isn’t enough anymore because the point of it was to blend the<code>span</code>background with the text of the parent paragraph that gets covered. But now it’s the<code>span</code>‘s own text that gets covered by the<code>background</code>of its next line.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420042481-0b030caf-58d6-4dcd-8e37-9c1ffe97a930.png?resize=800%2C264&amp;ssl=1" alt="long wrapping span problem in spite of mix-blend-mode" tabindex="0" loading="lazy"><figcaption>long wrapping span problem in spite of mix-blend-mode</figcaption></figure><p>To get around this, we wrap the entire<code>span</code>in another<code>span</code>and set the <code>padding</code> and <code>background</code> only on the outer<code>span</code>(<code>p &gt; span</code>). This causes the black/white text of the inner<code>span</code>as well as that of the paragraph around the spans to get blended with the outer<code>span</code>background.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420043339-b2559f56-e965-4ae6-812a-75c0d41c8275.png?resize=800%2C423&amp;ssl=1" alt="long wrapping span nesting solution (live demo (&lt;VPIcon icon=&quot;fa-brands fa-codepen&quot;/&gt;))" tabindex="0" loading="lazy"><figcaption>long wrapping span nesting solution (<a href="https://codepen.io/thebabydino/pen/azbpKpg" target="_blank" rel="noopener noreferrer">live demo (<i class="vp-icon fa-brands fa-codepen" sizing="height"></i><code>thebabydino</code>)</a>)</figcaption></figure><p>If you’ve checked the above demo in Firefox, you may have noticed that it doesn’t work. This is due to<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1951653" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-firefox" sizing="height"></i>bug 1951653</a>.</p><p>In the particular case when the<em>entire</em>text in the paragraph is wrapped in a<code>span</code>, we can avoid the Firefox bug by setting the<code>mix-blend-mode</code>property<em>only</em>on the inner<code>span</code>(<code>span span</code>).</p><p>However, in the case above, where we also have paragraph text outside the outer<code>span</code>too, this unfortunately still leaves us with the problem of that text before the long<code>span</code>getting covered by the background of the next<code>span</code>line.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420044455-77799210-3b25-4312-98a7-4cc296a9cdba.png?resize=800%2C264&amp;ssl=1" alt="Firefox workaround not good enough if there’s paragraph text before the long wrapping span" tabindex="0" loading="lazy"><figcaption>Firefox workaround not good enough if there’s paragraph text before the long wrapping span</figcaption></figure><h3 id="the-most-complex-case-transparent-background-where-neither-the-text-nor-the-background-are-black-white" tabindex="-1"><a class="header-anchor" href="#the-most-complex-case-transparent-background-where-neither-the-text-nor-the-background-are-black-white"><span>The most complex case: transparent background where neither the text nor the background are black/white</span></a></h3><p>In this case, the blending solution isn’t enough anymore and we need an SVG<code>filter</code>one.</p><p>Going back to our original demo, we need to apply the solution from the previous case: wrap the<code>span</code>in another, set the<code>padding</code>and<code>background</code>only on the outer one (<code>p &gt; span</code>), blend<em>only</em>the inner<code>span</code>element with the outer one to ensure our solution works cross-browser (since we have white text, we use the<code>lighten</code>mode) and prevent blending with anything outside the containing paragraph<code>p</code>by setting<code>isolation: isolate</code>on it.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">p</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">isolation</span><span class="token punctuation">:</span> isolate<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>#alpha<span class="token punctuation">)</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token selector">p &gt; span</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">padding</span><span class="token punctuation">:</span> .5em<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">background</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">box-decoration-break</span><span class="token punctuation">:</span> clone<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token selector">span</span> <span class="token punctuation">{</span> <span class="token property">mix-blend-mode</span><span class="token punctuation">:</span> lighten <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420278763-d87f1df8-cc99-4e42-9aab-03662273003a.png?resize=800%2C192&amp;ssl=1" alt="the desired result in the bigger padding case (live demo (&lt;VPIcon icon=&quot;fa-brands fa-codepen&quot;/&gt;))" tabindex="0" loading="lazy"><figcaption>the desired result in the bigger padding case (<a href="https://codepen.io/thebabydino/pen/pvormNg" target="_blank" rel="noopener noreferrer">live demo (<i class="vp-icon fa-brands fa-codepen" sizing="height"></i><code>thebabydino</code>)</a>)</figcaption></figure><p>But what we want here is to move away from black/ white text and background, so let’s see how to do that.</p><h4 id="set-rgba-values-in-the-svg-filter" tabindex="-1"><a class="header-anchor" href="#set-rgba-values-in-the-svg-filter"><span>Set RGBA values in the SVG filter</span></a></h4><p>If we wanted to have a background that’s not semi-transparent black, but a semi-transparent dark blue, let’s say<code>rgb(25 25 112)</code>(which can also be written as<code>rgb(9.8% 9.8% 43.9%)</code>), as well as gold-orange text, let’s say<code>rgb(255 165 0)</code>(which can also be written as<code>rgb(100% 64.7% 0%)</code>), then we use<code>feColorMatrix</code>as the first primitive as well and alter the final column values on the first three matrix rows for both the first matrix giving us the background and the second one giving us the text to use the decimal representation of the three percentage RGB values:</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alpha<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0  .098 </span>
<span class="line">              0 0 0 0  .098 </span>
<span class="line">              0 0 0 0  .439 </span>
<span class="line">              0 0 0 .7 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">      <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1 </span>
<span class="line">              0 0 0 0 .647 </span>
<span class="line">              0 0 0 0 0 </span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feBlend</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Other than the<code>id</code>, we’ve now also set<a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/color-interpolation-filters" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-firefox" sizing="height"></i>another attribute</a>on the<code>filter</code>element. We aren’t going into it because I don’t really understand much about it, but just know that this attribute with this value needs to be added on any SVG<code>filter</code>that messes with the RGB channels. Otherwise, the result won’t be consistent between browsers (the default is<code>linearRGB</code>in theory, but only the<code>sRGB</code>value seems to work in Safari) and it may not match expectations (the<code>sRGB</code>value is the one that gives us the result we want). Previously, having just white text on a black background, we didn’t really need it and it was safe to skip it, but now we have to include it.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420321413-7ec2fa9c-4667-40ef-a0a0-5192a5333d30.png?resize=800%2C192&amp;ssl=1" alt="golden text on dark blue background using the method of setting the RGB values in the SVG filter (live demo (&lt;VPIcon icon=&quot;fa-brands fa-codepen&quot;/&gt;))" tabindex="0" loading="lazy"><figcaption>golden text on dark blue background using the method of setting the RGB values in the SVG filter (<a href="https://codepen.io/thebabydino/pen/yyLgWjQ" target="_blank" rel="noopener noreferrer">live demo (<i class="vp-icon fa-brands fa-codepen" sizing="height"></i><code>thebabydino</code>)</a>)</figcaption></figure><p>The problem with this solution is that it involves hardcoding the RGBA values for both the<code>span</code>background and text in the SVG<code>filter</code>, meaning we can’t control them from the CSS.</p><p>Let’s try another approach!</p><h4 id="set-rgba-values-upstream-of-the-svg-filter" tabindex="-1"><a class="header-anchor" href="#set-rgba-values-upstream-of-the-svg-filter"><span>Set RGBA values upstream of the SVG filter</span></a></h4><p>First, we set them as custom properties upstream of the<code>svg</code>:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">body</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--a</span><span class="token punctuation">:</span> .5<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">--back-c</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>25 25 112/ <span class="token function">var</span><span class="token punctuation">(</span>--a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">--text-c</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>255 165 0<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Then we modify the<code>filter</code>a bit. We use<code>SourceAlpha</code>to give us the background area, though we still extract the text area via a<code>feColorMatrix</code>primitive and save it as<code>text</code>, but this time we don’t care about the RGB values, we won’t use them anyway. We also flood the entire<code>filter</code>area with<code>--back-c</code>and<code>--text-c</code>(using<a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/feFlood" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-firefox" sizing="height"></i><code>feFlood</code></a>), but then, out of the entire area, we only keep what’s at the intersection (<a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/operator#fecomposite" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-firefox" sizing="height"></i><code>operator=&#39;in&#39;</code></a>of<a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/feComposite" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-firefox" sizing="height"></i><code>feComposite</code></a>) with the<code>SourceAlpha</code>and<code>text</code>areas respectively. Finally, we stack these intersections (via<code>feBlend</code>), with the text on top.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alpha<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFlood</span> <span class="token attr-name">flood-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>var(--back-c)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceAlpha<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0 </span>
<span class="line">              0 0 0 0 </span>
<span class="line">              0 0 0 0 0 </span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">      <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFlood</span> <span class="token attr-name">flood-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>var(--text-c)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feBlend</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This allows us to control both the text and background from the CSS.</p><p>However, the values of<code>--back-c</code>and<code>--text-c</code>are those of the<code>feFlood</code>primitive, not those on the element the<code>filter</code>applies to. So for any different text or background, we need to have a different <code>filter</code>.</p><p>If that’s difficult to grasp, let’s say we want two different options, the same golden-orange text on a dark blue background and also dark blue text on a pink background.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">body</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--a</span><span class="token punctuation">:</span> .7<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">--back-c-1</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>25 25 112/ <span class="token function">var</span><span class="token punctuation">(</span>--a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">--text-c-1</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>255 165 0<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">--back-c-2</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>255 105 180/ <span class="token function">var</span><span class="token punctuation">(</span>--a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">--text-c-2</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>25 25 112<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">--back-c</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--back-c-1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">--text-c</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--text-c-1<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now we can change<code>--back-c</code>and<code>--text-c</code>on the second paragraph:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">p:nth-child(2)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--back-c</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--back-c-2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">--text-c</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--text-c-2<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>But changing these variables on the second paragraph<a href="https://codepen.io/thebabydino/pen/JojEqBo" target="_blank" rel="noopener noreferrer">doesn’t do anything (<i class="vp-icon fa-brands fa-codepen" sizing="height"></i><code>thebabydino</code>)</a>for the result of the SVG<code>filter</code>applied to it because the values for<code>--back-c</code>and<code>--text-c</code>that get used by the<code>filter</code>are<em>always</em>those set upstream from it on the<code>body</code>.</p><div></div><p>Unfortunately, this is just how things are for SVG filters, even though CSS ones don’t have this limitation, like the comparison below shows.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421036374-6abf5652-0b1c-4fbe-89dd-e381a3cc1900.png?resize=800%2C778&amp;ssl=1" alt="CSS vs. SVG drop-shadow filter using a variable for(live demo (&lt;VPIcon icon=&quot;fa-brands fa-codepen&quot;/&gt;))" tabindex="0" loading="lazy"><figcaption>CSS vs. SVG drop-shadow filter using a variable for<code>flood-color</code>(<a href="https://codepen.io/thebabydino/pen/ZYEJBZr" target="_blank" rel="noopener noreferrer">live demo (<i class="vp-icon fa-brands fa-codepen" sizing="height"></i><code>thebabydino</code>)</a>)</figcaption></figure><h4 id="set-rgb-values-in-the-css-fix-alpha-in-the-svg-filter" tabindex="-1"><a class="header-anchor" href="#set-rgb-values-in-the-css-fix-alpha-in-the-svg-filter"><span>Set RGB values in the CSS, fix alpha in the SVG filter</span></a></h4><p>Amelia Bellamy-Royds<a href="https://mastodon.social/@AmeliaBR@front-end.social/114065645349479429" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>suggested</a>a<code>feComponentTransfer</code><a href="https://codepen.io/AmeliaBR/pen/XJWjEmM?editors=1100" target="_blank" rel="noopener noreferrer">approach (<i class="vp-icon fa-brands fa-codepen" sizing="height"></i><code>AmeliaBR</code>)</a>that allows setting the palette from the CSS and then using the SVG<code>filter</code>only to take care of the increase in alpha where there is overlap.</p><p>What Amelia’s<code>filter</code>does is use<code>feComponentTransfer</code>to preserve the alpha of everything that’s fully transparent (the area outside the span) or fully opaque (the text), but map a bunch of alpha values in between to the desired background alpha<code>a</code>. This should also catch and map the background overlap alpha (which is<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>+</mo><mi>a</mi><mo>−</mo><mi>a</mi><mo>×</mo><mi>a</mi><mo>=</mo><mn>2</mn><mo>×</mo><mi>a</mi><mo>−</mo><mi>a</mi><mo>×</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">a+a-a\times{a}=2\times{a}-a\times{a}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord"><span class="mord mathnormal">a</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">a</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord"><span class="mord mathnormal">a</span></span></span></span></span>- for more details, see this<a href="https://css-tricks.com/adventures-in-css-semi-transparency-land/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Adventures in CSS Semi-Transparency Land</a>article) to<code>a</code>.</p><p>This is a very smart solution and it seems to work really well for this particular background and text case as well as for similar cases. But there are still issues, points where it breaks.</p><p>First off, if we increase the alpha to something like<code>.75</code>, we start seeing an overlap.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420356221-86ba9f46-d026-4138-9975-04f6f8acddf8.png?resize=800%2C192&amp;ssl=1" alt="overlap problem becoming visible when alpha is bumped up to" tabindex="0" loading="lazy"><figcaption>overlap problem becoming visible when alpha is bumped up to<code>.75</code></figcaption></figure><p>My first instinct was to do what Amelia also suggests doing in the comments to her version - increase the number of intervals as the alpha gets closer to the ends of the<code>[0, 1]</code>interval.</p><p>Since I’m using <a href="https://pugjs.org/api/getting-started.html" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-pug" sizing="height"></i>Pug</a> to generate the markup anyway, I figured this would be a good way to first measure how large the base intervals would need to be - and by that I mean the minimum between the distance between the ends of the<code>[0, 1]</code>interval and the desired alpha as well as the overlap alpha.</p><p>We’re excluding<code>2*a - a*a</code>and<code>1 - a</code>from the minimum computation since<code>a</code>is subunitary, so<code>a</code>is always bigger than<code>a*a</code>, which results in<code>a</code>being always smaller than<code>2*a - a*a = a*(2 - a)</code>, which also results in<code>1 + a*a - 2*a</code>being smaller than<code>1 - a</code>.</p><p>Then we get how many such base intervals<code>u</code>we could fit between<code>0</code>and<code>1</code>, round up this number (<code>n</code>) and then generate the list of alpha values (for<code>tableValues</code>) which remains<code>0</code>and<code>1</code>at the ends, but is set to<code>a</code>everywhere in between.</p><div class="language-pug line-numbers-mode" data-highlighter="prismjs" data-ext="pug"><pre><code class="language-pug"><span class="line"><span class="token punctuation">-</span><span class="token code"> <span class="token keyword">let</span> u <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">+</span> a<span class="token operator">*</span>a <span class="token operator">-</span> <span class="token number">2</span><span class="token operator">*</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>
<span class="line"><span class="token punctuation">-</span><span class="token code"> <span class="token keyword">let</span> n <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>
<span class="line"><span class="token punctuation">-</span><span class="token code"> <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i<span class="token operator">*</span><span class="token punctuation">(</span>n <span class="token operator">-</span> i<span class="token punctuation">)</span> <span class="token operator">?</span> a <span class="token operator">:</span> i<span class="token operator">/</span>n<span class="token punctuation">)</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag">feFuncA<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">&#39;table&#39;</span> tableValues<span class="token operator">=</span>v<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39; &#39;</span></span><span class="token punctuation">)</span></span></span>)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This does indeed fix the background overlap problem for any alpha, though it still means we need different filters for different alphas. Here is what gets generated for a few different alpha values:</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token comment">&lt;!-- a = .8 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>table<span class="token punctuation">&#39;</span></span> </span>
<span class="line">         <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 1<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- a = .75 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>table<span class="token punctuation">&#39;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0 .75 .75 .75 .75 .75 .75 .75 .75 .75 .75 .75 .75 .75 .75 .75 1<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- a = .65 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>table<span class="token punctuation">&#39;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0 .65 .65 .65 .65 .65 .65 .65 .65 1<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- a = .5 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>table<span class="token punctuation">&#39;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0 .5 .5 .5 1<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- a = .35 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>table<span class="token punctuation">&#39;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0 .35 .35 1<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- a = .2 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>table<span class="token punctuation">&#39;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0 .2 .2 .2 .2 1<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- a = .1 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>table<span class="token punctuation">&#39;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0 .1 .1 .1 .1 .1 .1 .1 .1 .1 1<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- a = .05 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>table<span class="token punctuation">&#39;</span></span> </span>
<span class="line">         <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 1<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We also have another bigger problem: due to font anti-aliasing, the<code>feComponentTransfer</code> messes up the text for lower value alphas and the lower the value, the worse the problem looks.</p><p>Font anti-aliasing makes the edge pixels of text semi-transparent in order to avoid a<a href="https://bsky.app/profile/anatudor.bsky.social/post/3kzquolz3xs2c" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>jagged, pixelated, ugly</a>, even broken look. For comparison, below is the same text without vs. with anti-aliasing, at normal size and scaled up 12 times:</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420568656-a726cc27-9ef9-46a2-84d4-943370d2a18f.png?resize=800%2C360&amp;ssl=1" alt="without vs. with anti-aliasing" tabindex="0" loading="lazy"><figcaption>without vs. with anti-aliasing</figcaption></figure><p>Those semi-transparent font edge pixels placed on top of the semi-transparent background also give us semi-transparent pixels. At the same time, our<code>filter</code>maps the alpha of more and more of the semi-transparent pixels of the input to the desired background alpha<code>a</code>as this<code>a</code>nears the ends of the<code>[0, 1]</code>interval. As<code>a</code>nears<code>0</code>, then almost all semi-transparent edge pixels get this very low<code>a</code>alpha, making them much more transparent than they should be and causing an eroded look for our text.</p><div></div><div class="codepen-wrapper codepen-MYWoVKB"><!----><span>See <a>no alpha increase on inline background overlap #5a: fancy palette, dynamic alpha fix</a> by <a href="https://codepen.io/thebabydino">thebabydino</a> on <a href="https://codepen.io">CodePen</a>.</span></div><p>I guess a simple fix for that would be to only map to the desired alpha<code>a</code>the smallest number of alpha points possible and let all others keep their initial alpha. This would mean that the first alpha point we map to the desired alpha<code>a</code>is equal to it or the nearest smaller than it, while the last one is equal to the overlap alpha<code>2*a - a*a</code>or the nearest bigger than it.</p><p>For example, if the desired alpha<code>a</code>is<code>.2</code>, then the overlap alpha is<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.2</mn><mo>+</mo><mn>0.2</mn><mo>−</mo><mn>0.2</mn><mo>×</mo><mn>0.2</mn><mo>=</mo><mn>0.36</mn></mrow><annotation encoding="application/x-tex">0.2 +0.2-0.2\times{0.2}=0.36</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0.2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0.2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0.2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord"><span class="mord">0.2</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.36</span></span></span></span>. The base interval<code>u</code>is<code>.2</code>,<code>n</code>is<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>0.2</mn></mfrac><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">\frac{1}{0.2}=5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0.2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span>, so we generate<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>+</mo><mn>1</mn><mo>=</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">n+1=6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span></span></span></span>alpha points:</p><div class="language-plaintext line-numbers-mode" data-highlighter="prismjs" data-ext="plaintext"><pre><code class="language-plaintext"><span class="line">0 .2 .4 .6 .8 1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>If before we mapped all those between<code>0</code>and<code>1</code>to the desired alpha<code>.2</code>, now we only map to the desired alpha<code>a</code>, those loosely matching the<code>[.2, .36]</code>interval - that is,<code>.2</code>and<code>.4</code>:</p><div class="language-plaintext line-numbers-mode" data-highlighter="prismjs" data-ext="plaintext"><pre><code class="language-plaintext"><span class="line">0 .2 .2 .6 .8 1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>In general, that means our values array would become:</p><div class="language-pug line-numbers-mode" data-highlighter="prismjs" data-ext="pug"><pre><code class="language-pug"><span class="line"><span class="token punctuation">-</span><span class="token code"> <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>
<span class="line"><span class="token punctuation">-</span><span class="token code"> v <span class="token operator">=</span> v<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>i<span class="token operator">*</span><span class="token punctuation">(</span>n <span class="token operator">-</span> i<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span>n <span class="token operator">&gt;</span> a <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span>n <span class="token operator">&lt;</span> a<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">-</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> a <span class="token operator">:</span> i<span class="token operator">/</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Probably ensuring the values outside the interval mapped to<code>a</code>are evenly distributed would be the more correct solution, but this simpler trick also seems to work really well when it comes to fixing the text erosion problem.</p><div></div><div class="codepen-wrapper codepen-QwWgxMG"><!----><span>See <a>no alpha increase on inline background overlap #5b: fancy palette, better dynamic alpha fix</a> by <a href="https://codepen.io/thebabydino">thebabydino</a> on <a href="https://codepen.io">CodePen</a>.</span></div><p>But you may have noticed there’s still a problem and this is not an SVG<code>filter</code>one, it comes from the CSS.</p><p>To make it more obvious, let’s put result right next to what we got via the earlier method of seting the RGBA values from the SVG<code>filter</code>- can you see it?</p><div></div><div class="codepen-wrapper codepen-qEBjwzx"><!----><span>See <a>no alpha increase on inline background overlap #6: comparisons</a> by <a href="https://codepen.io/thebabydino">thebabydino</a> on <a href="https://codepen.io">CodePen</a>.</span></div><p>If you can’t spot it in the recording above, how about when we have a diagonal middle split in between the result we get when we bake into the filter all RGBA values and the result we get with this alpha fix method via<code>feComponentTransfer</code>?</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420592423-5ee58be4-e3b6-475d-8353-dbdd07b28506.png?resize=800%2C374&amp;ssl=1" alt="split comparison" tabindex="0" loading="lazy"><figcaption>split comparison</figcaption></figure><p>It’s pretty subtle here, but if you think it looks like this latest method is making the text a bit more faded, particularly at higher alpha values, you’re right.</p><p>This is because the blending fix for the background overlapping text problem results in the text<code>color</code>not being preserved. This was precisely why we switched from a blending-only solution to an SVG<code>filter</code>one in the case when the text isn’t black or white (or close enough and the particular choice of text and background preserves the text post-blending exactly as it was set).</p><p>A lot of text and background combinations don’t make this very obvious because, in order to have<a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/Guides/Understanding_WCAG/Perceivable/Color_contrast" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-firefox" sizing="height"></i>a good contrast ratio</a>, we often need either the text or the background behind it to be very dark or very bright - which means there’s a chance all three RGB channels of the text are either below or above the corresponding RGB channels of the background, or even if one of the channels is deviating on the other side, it’s not deviating enough to make a noticeable difference. But sometimes we can still see there’s a problem, as illustrated by the interactive demo below, which allows changing the palette.</p><div class="codepen-wrapper codepen-jEOwgoP"><!----><span>See <a>no alpha increase on inline background overlap #7: various palettes for dynamic alpha fix</a> by <a href="https://codepen.io/thebabydino">thebabydino</a> on <a href="https://codepen.io">CodePen</a>.</span></div><p>All of these palettes were chosen to have a good contrast ratio. Even so, there is some degree of text fading<em>for all of them</em>. And while it’s not easy to spot that for the first five, it’s way more noticeable for the second to last one and almost impossible to miss for the final one.</p><p>Let’s take the second to last one, which uses a lighter blue than our initial palette, so it has a somewhat lower contrast making the problem more obvious. The higher the alpha gets, what should be golden text on a semitransparent deep blue background looks more pink-ish. This is due to the text being<code>rgb(100% 74.51% 4.31%)</code>and the background being<code>rgb(22.75% 21.18% 100%)</code>(we leave out the transparency for now and assume the alpha is<code>1</code>). Blending these using the<code>lighten</code>blend mode means taking the maximum value out of the two for each channel - that is,<code>100%</code>(<code>max(100%, 22.75%)</code>) for the red channel,<code>74.51%</code>(<code>max(74.51%, 21.18%)</code>) for the green one and<code>100%</code>(<code>max(4.31%, 100%)</code>) for the blue one. That means our text is<code>rgb(100% 74.51% 100%)</code>, a light pink, which is different from the<code>color</code>value of<code>rgb(100% 74.51% 4.31%)</code>(golden) we’ve set.</p><div></div><p>The final text and background combination makes the problem even more clear. The higher the alpha gets, what should be lime text on a semitransparent blue background looks more like aqua text. This is due to the text being<code>rgb(0% 100% 0%)</code>and the background being<code>rgb(0% 0% 100%)</code>(again, we leave out the transparency for now and assume the alpha is<code>1</code>). Blending these using the<code>lighten</code>blend mode means taking the maximum value out of the two for each channel - that is,<code>0%</code>(<code>max(0%, 0%)</code>) for the red channel,<code>100%</code>(<code>max(100%, 0%)</code>) for the green one and<code>100%</code>(<code>max(0%, 100%)</code>) for the blue one. That means our text is<code>rgb(0% 100% 100%)</code>, so aqua, which is different from the<code>color</code>value of<code>rgb(0% 100% 0%)</code>(lime) we’ve set.</p><div></div><p>So what now? Well, the one solution I’ve been able to find is to pass in the text and background shapes separate from the RGBA values used for them. I’ve tried approaching this in multiple ways and ended up hitting bugs in all browsers. Tiling bugs in Safari and Chrome, a weird Windows-specific bug in Firefox, the same wide gamut bug mentioned before in Chrome… bugs everywhere.</p><p>So now we’re not going through all of my failed experiments, of which there were many, we’re just looking at the one solution I’ve managed to get working reasonably well across various browser, OS and hardware combinations.</p><h4 id="set-shapes-and-rgba-values-in-the-css-pass-them-to-the-svg-filter-via-different-channels-alpha-points" tabindex="-1"><a class="header-anchor" href="#set-shapes-and-rgba-values-in-the-css-pass-them-to-the-svg-filter-via-different-channels-alpha-points"><span>Set shapes and RGBA values in the CSS, pass them to the SVG filter via different channels/ alpha points</span></a></h4><p>The shape of the span background and that of the text get passed to the SVG filter using the<code>1</code>alpha point. That means we have white text on black background, all opaque, so we can extract it in the SVG by mapping all alpha points except<code>1</code>to<code>0</code>.</p><p>We pass the text and background RGB values using the<code>.75</code>and<code>.25</code>alpha points - this allows us to extract them in the SVG<code>filter</code>by mapping their corresponding alpha points to<code>1</code>, while all other alpha points are<code>0</code>.</p><p>Finally, we pass the alpha value to the SVG via the green channel, using the<code>.5</code>alpha point. By mapping the<code>.5</code>alpha point to<code>1</code>, while all other alpha points get mapped to<code>0</code>, we can extract in the SVG<code>filter</code>the desired background alpha value via the green channel value.</p><p>This means we have five alpha points (<code>0</code>,<code>.25</code>,<code>.5</code>,<code>.75</code>and<code>1</code>), so we’re going to need to use five values for the<code>tableValues</code>attribute of<code>feFuncA</code>, all of them zeroed, except the one corresponding to the point we’re interested in and which we map to<code>1</code>.</p><p>In order to do this, we first add an absolutely positioned, non-clickable pseudo on the<code>p</code>element. This pseudo has a<code>border</code>and two shadows (an outer one and an<code>inset</code>one) and is offset outwards (using a negative<code>inset</code>) to compensate for both the<code>inset</code>shadow and the<code>border</code>, so that there is no visible part of this pseudo intersecting the<code>span</code>background shape.</p><div class="language-scss line-numbers-mode" data-highlighter="prismjs" data-ext="scss"><pre><code class="language-scss"><span class="line"><span class="token selector">p </span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--a</span><span class="token punctuation">:</span> 0.7<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">--text-c</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>255 165 0<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">--back-c</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>25 25 112<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token selector"><span class="token parent important">&amp;</span>::after </span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">inset</span><span class="token punctuation">:</span> -2em<span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">border</span><span class="token punctuation">:</span> solid 1em <span class="token function">rgb</span><span class="token punctuation">(</span>0% <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--a<span class="token punctuation">)</span> <span class="token operator">*</span> 100%<span class="token punctuation">)</span> 0%/ 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">box-shadow</span><span class="token punctuation">:</span> inset 0 0 0 1em <span class="token function">rgba</span><span class="token punctuation">(</span>from <span class="token function">var</span><span class="token punctuation">(</span>--text-c<span class="token punctuation">)</span> r g b/ 0.75<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">      0 0 0 1em <span class="token function">rgba</span><span class="token punctuation">(</span>from <span class="token function">var</span><span class="token punctuation">(</span>--back-c<span class="token punctuation">)</span> r g b/ 0.25<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">pointer-events</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The first shadow is an<code>inset</code>one using the desired text RGB value and a<code>.75</code>alpha, which allows us to pass the RGB value to the SVG<code>filter</code>via the<code>.75</code>alpha point. The second shadow is an outer one using the desired background RGB value and a<code>.25</code>alpha, which allows us to pass the RGB value to the SVG<code>filter</code>via the<code>.25</code>alpha point.</p><p>The<code>border-color</code>uses the desired<code>span</code>background alpha value on the green channel (we’re using the green channel due to the same Chrome wide gamut bug mentioned earlier in this article) and has a<code>.5</code>alpha. This allows us to pass to the SVG<code>filter</code>the value of the desired<code>span</code>background alpha as the green channel value using the<code>.5</code>alpha point.</p><p>The negative<code>inset</code>(<code>-2em</code>) is set to compensate for both the<code>inset</code>shadow (with a<code>1em</code>spread) and for the<code>border</code>(with a<code>1em</code>width) because it’s very important that none of the visible parts of the pseudo (the<code>border</code>and the<code>box-shadow</code>using the<code>.25</code>,<code>.5</code>and<code>.75</code>alpha points) intersect the shape of the<code>span</code>background (using the<code>1</code>alpha point).</p><p>The<code>pointer-events: none</code>property is there in order to avoid any interference with the<code>span</code>text selection. We could have also used<code>z-index: -1</code>, since there is no intersection between the visible parts of the pseudo and the<code>span</code>background shape. Both of them do the job and in this case, it really doesn’t matter which we choose to use.</p><p>What we have so far definitely doesn’t look great, but… we’re getting there!</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420622735-172f79d1-5f49-4c70-9b01-c9cde68974c0.png?resize=800%2C400&amp;ssl=1" alt="before applying any filter" tabindex="0" loading="lazy"><figcaption>before applying any filter</figcaption></figure><p>Moving on to the<code>filter</code>, we start in a similar manner as before, by getting the<code>opaque</code>part. To do so, we preserve just just the fifth alpha point (<code>1</code>), while mapping all others to<code>0</code>. Everything that intially has an alpha of<code>0</code>(transparent part inside the frames around the<code>span</code>shape),<code>.25</code>(outermost dark blue frame),<code>.5</code>(middle green frame) or<code>.75</code>(innermost golden frame) becomes transparent.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0<span class="token punctuation">&#39;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0<span class="token punctuation">&#39;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>true<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>go<span class="token punctuation">&#39;</span></span> <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>sRGB<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>opaque<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>table<span class="token punctuation">&#39;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0 0 0 0 1<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We’ve saved this result as<code>opaque</code>for when we need to use it later.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420622938-0a6221ab-593a-4f45-93ca-1dc28820428e.png?resize=800%2C400&amp;ssl=1" alt="the opaque result" tabindex="0" loading="lazy"><figcaption>the opaque result</figcaption></figure><p>Next, from the initial<code>filter</code>input, we extract the background RGB area by mapping the second (<code>.25</code>) alpha point to<code>1</code>, while mapping all others to<code>0</code>. Note that we don’t want the input of the second primitive to be the<code>result</code>of the first one, but the<code>filter</code>input, so we explicitly specify <code>in</code>as<code>SourceGraphic</code>.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In theory, this second<code>feComponentTransfer</code>extracts second just the background RGB area (pseudo outer shadow area, using the second alpha point,<code>.25</code>). In practice, can you see what else it has picked up?</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420623150-858f198f-0791-40de-8dae-7a4af30623f7.png?resize=800%2C400&amp;ssl=1" alt="the outer frame using the background RGB" tabindex="0" loading="lazy"><figcaption>the outer frame using the background RGB</figcaption></figure><p>If you cannot pick it up (it’s not easy), let’s remove the image backdrop and circle the problem areas:</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420624040-f48d5f15-0298-4ea1-923a-3dfcbdd96b92.png?resize=800%2C400&amp;ssl=1" alt="highlighting the problem areas" tabindex="0" loading="lazy"><figcaption>highlighting the problem areas</figcaption></figure><p>Those black pixels it picks up are again due to anti-aliasing. At the rounded corners of the<code>span</code>background lines, we have semitransparent pixels in order for these corners to look smooth, not jagged. But then our second<code>feComponentTransfer</code> maps the pixels in the<code>[0, .25]</code>interval to<code>[0, 1]</code> and the pixels in the<code>[.25, .5]</code> interval to<code>[1, 0]</code>. And this doesn’t catch just the pixels of the pseudo’s outer shadow using the<code>.25</code>alpha point, but also the pixels in the<code>[0, .5]</code>interval at those rounded corners of those<code>span</code>background lines, which get a non-zero alpha too.</p><p>Now in our particular case where we have a black<code>span</code>background, we can safely just ignore those pixels when moving on to the next step. But if we were to have a red background there, things would be very different and those pixels could cause a lot of trouble.</p><p>That’s because at the next step we expand the background RGB frame we got to cover the entire<code>filter</code>area and we do that with a<code>feMorphology</code>primitive using the<code>dilate</code>operation. What this does is the following: for every channel of every pixel, it takes the<em>maximum</em>of all the values of that channel for the pixels lying within the specified<code>radius</code>(from the current pixel) along both the<em>x</em>and the<em>y</em>axes in both the negative and positive direction.</p><p>Below, you can see how this works for a channel whose values are either maxed out (<code>1</code>) or zeroed (<code>0</code>). For every pixel of the input (green outline around the current one), the corresponding output value for the same channel is the maximum of all the values for that channel in the vicinity of the current pixel (within the red square).</p><div></div><p>For our purpose, we first care about the alpha channel, since this turns opaque all transparent pixels that are within the specified<code>radius</code>from any opaque one along both axes in both directions, effectively dilating our frame to fill the area inside it.</p><p>But the maximum computation happens for the RGB channels too. Black has zero for all RGB channels, so those stray pixels don’t affect the result of the maximum computation since every single one of the RGB channels of the frame is above zero, which makes them be the result of the maximum for every single one of the RGB channels.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that the<code>filter</code>now has<code>primitiveUnits</code>set to<code>objectBoundingBox</code>so values for attributes such as the<code>radius</code>attribute of<code>feMorphology</code>are not pixel values anymore, but relative to the<code>filter</code>input box size. This is because the size of our<code>filter</code>area is given by its input, whose exact pixel size is determined by the text content which we have no way of knowing. So we switch to relative units.</p><div></div><p>There are two things to keep in mind here.</p><p>One, I’m not exactly happy to have to use such a relatively large dilation value, as it can negatively impact performance (at least from the tests on my laptop, the performance hit is obvious in both Firefox and Epiphany for the final demo). But unfortunately, my initial idea of extracting small squares in the top left corner and then tiling them ran into at least one different bug in every browser on at least one OS, so I guess this dilation was the only option left.</p><p>Two, if we had a red (<code>rgb(100% 0% 0%)</code>) instead of a black (<code>rgb(0% 0% 0%)</code>) background, then the maxed up red channel would cause trouble since<code>100%</code>is a bigger value than the<code>9.8%</code>of the frame (desired RGB being<code>rgb(9.8% 9.8% 43.9%)</code>), so then we’d end up with those pesky corner pixels bloating up and turning the intersection with the dilated frame purple, a mix (<code>rgb(max(100%, 9.8%) max(0%, 9.8%) max(0%, 43.9%))</code>) between the red channel of the initial red<code>span</code>background and the green and blue channels of the frame (which has the desired RGB value for the background and whose red channel we’d lose this way).</p><div></div><p>In such a case where a red input area would “contaminate” our desired background RGB, we’d first need to apply a small erosion to get rid of those pesky corner pixels<em>before</em>we apply the dilation. Erosion works in a similar manner to dilation, except we take the<em>minimum</em>channel value of all pixels within the set<code>radius</code>along both axes in both directions.</p><div></div><p>In our case, we care about the alpha channel erosions, all the transparent pixels around zeroing the alpha of those few ones we didn’t really mean to pick up.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>.01<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Note that<code>erode</code>is the default<code>operator</code>, so we don’t need to explicitly set it.</p><p>Back to our case, after dilating the frame to fill the entire<code>filter</code>area with the desired background RGB and saving this result as<code>back-rgb</code>, we extract (again, out of the initial<code>filter</code>input) the desired alpha as the green channel value of the pseudo border with a<code>.5</code>alpha. This means another<code>feComponentTransfer</code>, this time one mapping all alpha points to<code>0</code>, except for the third one (<code>.5</code>), which gets mapped to<code>1</code>(though in this one case the exact alpha it gets mapped to doesn’t really matter as long as its non-zero).</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This gives us a green frame (red and blue channels zeroed, green channel set to the value of the desired alpha for the background of the<code>span</code>lines):</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421526552-d7aa5011-b420-42ad-86e9-7c218867d0f0.png?resize=800%2C416&amp;ssl=1" alt="the middle frame using the desired alpha on the green channel" tabindex="0" loading="lazy"><figcaption>the middle frame using the desired alpha on the green channel</figcaption></figure><p>Now you can probably guess what follows: we<code>dilate</code>this green frame to cover the entire<code>filter</code>area. Again, we have those stray black pixels, but since they’re black, their channel values just get discarded when we perform the dilation, so we don’t need that erosion step in between.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We don’t save the<code>result</code>of this primitive this time, but we’ll get to that in a moment. This is what we have now - not too exciting yet, though things are about to change.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421563823-bef2a12e-63c3-48ae-8c03-ab698869dae1-1.png?resize=800%2C512&amp;ssl=1" alt="middle frame dilated to fill entire filter area" tabindex="0" loading="lazy"><figcaption>middle frame dilated to fill entire filter area</figcaption></figure><p>Next, we use<code>feColorMatrix</code>to give this layer covering the entire<code>filter</code>area an alpha equal to that of its green channel. This is why we don’t save the result of the second<code>feMorphology</code>- because we only feed it into the input of the very next primitive,<code>feColorMatrix</code>and then we don’t need it anywhere after that. We don’t care about the RGB values of the<code>result</code>, only about the alpha, so we just zero them all.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span> </span>
<span class="line highlighted">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line highlighted">              0 0 0 0 0</span>
<span class="line highlighted">              0 0 0 0 0</span>
<span class="line highlighted">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line highlighted">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Basically, what this<code>feColorMatrix</code>does is set the output alpha channel to be equal to the input green channel (well, to<code>1</code>multiplied with the input green channel), regardless of the values of the other input channels (red, blue, alpha). This way, we recover the alpha channel from the green one.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421564769-35c90577-cc28-417d-8f11-fd28e1baaf26.png?resize=800%2C512&amp;ssl=1" alt="alpha value finally on the alpha channel" tabindex="0" loading="lazy"><figcaption>alpha value finally on the alpha channel</figcaption></figure><p>Next step is to intersect the previously saved<code>back-rgb</code>result with this one, so we keep the RGB channels of that layer and the alpha channel of this one.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>What happens here is the alphas of the two input layers (<code>1</code>for<code>back-rgb</code>and the desired<code>span</code>background alpha for the other) are multiplied to give us the output alpha. At the same time, we only keep the RGB values of the top one (<code>back-rgb</code>) for the output.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421566248-cb88abc1-50fa-407c-9820-6484b5272908.png?resize=800%2C512&amp;ssl=1" alt="the desired semi-transparent background, filling the filter area" tabindex="0" loading="lazy"><figcaption>the desired semi-transparent background, filling the filter area</figcaption></figure><p>We now have the entire filter area covered by a layer with the desired RGBA for the<code>span</code>background lines, so the next step is to restrict it to the area of those<code>span</code>lines,<code>opaque</code>. That is, only keep it at the intersection with that area and save the<code>result</code>as<code>back</code>.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It finally looks like we’re getting somewhere!</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421567092-20782bfb-8bd8-47a4-955d-1f7e8f7638b2.png?resize=800%2C416&amp;ssl=1" alt="the semi-transparent dark blue background of the" tabindex="0" loading="lazy"><figcaption>the semi-transparent dark blue background of the<code>span</code></figcaption></figure><p>Next, we can move on to the text!</p><p>We start by extracting the text RGB area by mapping the fourth (<code>.75</code>) alpha point to<code>1</code>, while mapping all others to<code>0</code>. Again, we explicitly specify <code>in</code> as <code>SourceGraphic</code>.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line highlighted">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 1 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This gives us yet another frame, this time one in the gold we want for the text.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421568337-289ed7d9-92db-4c73-b5e0-9fcd041b98b3.png?resize=800%2C416&amp;ssl=1" alt="the inner frame using the text RGB" tabindex="0" loading="lazy"><figcaption>the inner frame using the text RGB</figcaption></figure><p>Just like we did for the other frames, we<code>dilate</code>this one too in order to make it fill the entire<code>filter</code>area and save this result as<code>text-rgb</code>.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span> </span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 1 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421569320-65eb1151-e0fa-4d6e-a024-25b6ccadde1c.png?resize=800%2C512&amp;ssl=1" alt="inner frame dilated to fill entire filter area" tabindex="0" loading="lazy"><figcaption>inner frame dilated to fill entire filter area</figcaption></figure><p>Then we extract the text shape from the<code>opaque</code>layer, just like we did before, using the green channel like an alpha mask.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span> </span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 1 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line highlighted">      <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span></span>
<span class="line highlighted">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line highlighted">              0 0 0 0 0</span>
<span class="line highlighted">              0 0 0 0 0</span>
<span class="line highlighted">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line highlighted">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="v-0" aria-selected="true"><i class="vp-icon fa-brands fa-chrome" sizing="height"></i></button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-1" aria-selected="false"><i class="vp-icon fa-brands fa-firefox" sizing="height"></i></button></div><!--[--><div class="vp-tab active" id="v-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title"><i class="vp-icon fa-brands fa-chrome" sizing="height"></i></div><!--[--><p>My expectation was that this would give us just the text shape like below, which is what happens in Chrome.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421569898-090dbf24-dc65-4dff-830b-b538d97c6128.png?resize=800%2C416&amp;ssl=1" alt="the text shape extracted using the green channel (Chrome)" tabindex="0" loading="lazy"><figcaption>the text shape extracted using the green channel (Chrome)</figcaption></figure><!--]--></div><div class="vp-tab" id="v-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title"><i class="vp-icon fa-brands fa-firefox" sizing="height"></i></div><!--[--><p>However, Firefox does something interesting here and thinking it through, I’m not entirely sure it’s wrong.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421581023-73fac2b0-fa13-4029-b449-71036fdc48b7.png?resize=800%2C416&amp;ssl=1" alt="Firefox extracting more than just the text shapes" tabindex="0" loading="lazy"><figcaption>Firefox extracting more than just the text shapes</figcaption></figure><!--]--></div><!--]--></div><p>What seems to happen is that Chrome forgets all about the RGB values of the semi-transparent areas of the pseudo and just zeroes them when zeroing their alphas in the first <code>feComponentTransfer</code> primitive to extract the<code>opaque</code>part (the<code>span</code>with white text on solid black background). Then when using the green channel as an alpha mask on the opaque part, all that’s not transparent is the white text, where the green channel is maxed out.</p><p>However, Firefox doesn’t seem to throw away the RGB values of those semi-transparent frames created by the<code>border</code>and<code>box-shadow</code>on the pseudo, even if it also zeroes their alphas via the first primitive as well. So even though the<code>opaque</code>result looks the same in both browsers, it’s not really the same. Then when we get to this latest<code>feColorMatrix</code>step, Firefox finds green in those now fully transparent frames because even though their alpha got zeroed to get the<code>opaque</code>result, their RGB values got preserved.</p><p>Whichever browser is right, there’s a very simple way to get the result we want cross-browser: intersect what we have now with the<code>opaque</code>result. It doesn’t even matter the RGB values of which layer we choose to preserve as a result of this intersection because we won’t be using them anyway.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span> </span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 1 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The next step is to keep the<code>text-rgb</code>layer only at the intersection with the text we just got.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">      </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span> </span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">      </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 1 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421573835-3385e69e-5c01-4d25-9863-281e7d5e4a23.png?resize=800%2C416&amp;ssl=1" alt="the golden text of the" tabindex="0" loading="lazy"><figcaption>the golden text of the<code>span</code></figcaption></figure><p>Finally, we place this on top of the<code>back</code>layer with a<code>feBlend</code>, just like we did before.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">          </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">      </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span> </span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">        </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 1 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feBlend</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This is our final result!</p><div class="codepen-wrapper codepen-XJWaMMb"><!----><span>See <a>inline semitransparent text background with no overlap #8b</a> by <a href="https://codepen.io/thebabydino">thebabydino</a> on <a href="https://codepen.io">CodePen</a>.</span></div><p>This allows us to have full control from the CSS over the text and background RGB, as well as over the background alpha, without needing to hardcode any of them in the SVG<code>filter</code>, which means we don’t need a different SVG<code>filter</code>if we want to set a different value for any of them on one o the elements the filter is applied to.</p><p>Now you may be thinking… well, this looks ugly with those semi-transparent frames before the filter is<code>applied</code>, so what if the filter fails? Well, the fix is really simple.<code>clip-path</code>gets applied after <code>filter</code>, so we can clip out those frames. They still get used for the<code>filter</code>if the<code>filter</code>is applied, but if it fails, we are still left with the very reasonable choice of white text on black background.</p><p>The following demo has different text and background combinations for each paragraph. All paragraphs use the exact same<code>filter</code>(the one above), they just have different values for<code>--text-c</code>,<code>--back-c</code>and<code>--a</code>.</p><div class="codepen-wrapper codepen-EaxmJag"><!----><span>See <a>inline semitransparent text background with no overlap #8c</a> by <a href="https://codepen.io/thebabydino">thebabydino</a> on <a href="https://codepen.io">CodePen</a>.</span></div><!-- TODO: add ARTICLE CARD --><a class="vp-card" href="https://chanhi2000.github.io/bookshelf/frontendmasters.com/overlapping-inline-backgrounds.html" target="_blank" style="background:rgba(188,75,52,0.2);"><img class="vp-card-logo" src="https://frontendmasters.com/favicon.ico" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">A Deep Dive into the Inline Background Overlap Problem</div><hr><div class="vp-card-desc">`box-decoration-break: clone;` in CSS can help us make for interesting backgrounds across lines of text that break, but when opacity gets involved, things can get complicated.</div></div></a></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/chanhi2000/articles/edit/main/src/frontendmasters.com/overlapping-inline-backgrounds.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/bookshelf/programming/css/articles/" aria-label="/programming/css/articles/"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->/programming/css/articles/</div></a><a class="route-link auto-link next" href="/bookshelf/frontendmasters.com/chilled-out-text-underlines.html" aria-label="Chilled Out Text Underlines"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Chilled Out Text Underlines<i class="vp-icon fa-brands fa-css3-alt" sizing="height"></i></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">MIT Licensed | Copyright © 2022-present <a href="https://github.com/chanhi2000">Chan Hee Lee</a></div><div class="vp-copyright">Copyright © 2025 Ana Tudor </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/bookshelf/assets/app-BVguHYKu.js" defer></script>
  </body>
</html>
