<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.24" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.94" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Combining React Server Components with react-query for Easy Data Management","image":["https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/05/web-page.jpg?resize=1024%2C458&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/05/loading-logs.jpg?resize=566%2C356&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/05/update-data.jpg?resize=1024%2C111&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/05/server-action.jpg?resize=564%2C466&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/05/serial-execution-1024x94.jpg?resize=1024%2C94&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/05/react-query-param-change-waterfall.jpg?resize=1024%2C103&ssl=1","https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/05/react-query-param-change-waterfall-fixed-1.jpg?resize=1024%2C97&ssl=1"],"datePublished":"2024-05-24T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"Adam Rackis"}]}</script><meta property="og:url" content="https://chanhi2000.github.io/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html"><meta property="og:site_name" content="📚Bookshelf"><meta property="og:title" content="Combining React Server Components with react-query for Easy Data Management"><meta property="og:description" content="Article(s) > Combining React Server Components with react-query for Easy Data Management"><meta property="og:type" content="article"><meta property="og:image" content="https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/2378"><meta property="og:locale" content="en-US"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:src" content="https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/2378"><meta name="twitter:image:alt" content="Combining React Server Components with react-query for Easy Data Management"><meta property="article:author" content="Adam Rackis"><meta property="article:tag" content="react-js"><meta property="article:tag" content="reactjs"><meta property="article:tag" content="react"><meta property="article:tag" content="node-js"><meta property="article:tag" content="nodejs"><meta property="article:tag" content="node"><meta property="article:tag" content="frontendmasters.com"><meta property="article:tag" content="blog"><meta property="article:published_time" content="2024-05-24T00:00:00.000Z"><link rel="icon" href="/bookshelf/assets/icon/favicon.svg"><title>Combining React Server Components with react-query for Easy Data Management | 📚Bookshelf</title><meta name="description" content="Article(s) > Combining React Server Components with react-query for Easy Data Management">
    <link rel="preload" href="/bookshelf/assets/style-DmRYlEXZ.css" as="style"><link rel="stylesheet" href="/bookshelf/assets/style-DmRYlEXZ.css">
    
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/bookshelf/" aria-label="Take me home"><img class="vp-nav-logo" src="/bookshelf/assets/icon/favicon.svg" alt><!----><span class="vp-site-name hide-in-pad">📚Bookshelf</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/bookshelf/news.html" aria-label><!--[--><i class="vp-icon fas fa-rss" sizing="height"></i><!--]--><!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-keyboard" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/hackingwithswift.com/" aria-label="hackingwithswift.com"><!--[--><img class="vp-icon" src="https://hackingwithswift.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->hackingwithswift.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fcc/" aria-label="freecodecamp.org"><!--[--><img class="vp-icon" src="https://cdn.freecodecamp.org/universal/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->freecodecamp.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kodeco.com/" aria-label="kodeco.com"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->kodeco.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.kotzilla.io/" aria-label="blog.kotzilla.io"><!--[--><img class="vp-icon" src="https://blog.kotzilla.io/hubfs/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.kotzilla.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kt.academy/" aria-label="kt.academy"><!--[--><img class="vp-icon" src="https://kt.academy/logo.png" alt aria-hidden no-view sizing="both"><!--]-->kt.academy<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/droidcon.com/" aria-label="droidcon.com"><!--[--><img class="vp-icon" src="https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png" alt aria-hidden no-view sizing="both"><!--]-->droidcon.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/outcomeschool.com/" aria-label="outcomeschool.com"><!--[--><img class="vp-icon" src="https://outcomeschool.com/static/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->outcomeschool.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/bookshelf/frontendmasters.com/" aria-label="frontendmasters.com"><!--[--><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->frontendmasters.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tricks.com/" aria-label="css-tricks.com"><!--[--><img class="vp-icon" src="https://css-tricks.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->css-tricks.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="smashingmagazine.com"><!--[--><img class="vp-icon" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->smashingmagazine.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.logrocket.com/" aria-label="blog.logrocket.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.logrocket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/realpython.com/" aria-label="realpython.com"><!--[--><img class="vp-icon" src="https://realpython.com/static/favicon.68cbf4197b0c.png" alt aria-hidden no-view sizing="both"><!--]-->realpython.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/digitalocean.com/" aria-label="digitalocean.com"><!--[--><img class="vp-icon" src="https://digitalocean.com/_next/static/media/favicon.594d6067.ico" alt aria-hidden no-view sizing="both"><!--]-->digitalocean.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/antonioleiva.com/" aria-label="antonioleiva.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/antonioleiva.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->antonioleiva.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/johnnyreilly.com/" aria-label="johnnyreilly.com"><!--[--><img class="vp-icon" src="https://johnnyreilly.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->johnnyreilly.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/code-maze.com/" aria-label="code-maze.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/code-maze.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->code-maze.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/milanjovanovic.tech/" aria-label="milanjovanovic.tech"><!--[--><img class="vp-icon" src="https://milanjovanovic.tech/profile_favicon.png" alt aria-hidden no-view sizing="both"><!--]-->milanjovanovic.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/shopify.engineering/" aria-label="shopify.engineering"><!--[--><img class="vp-icon" src="https://cdn.shopify.com/static/shopify-favicon.png" alt aria-hidden no-view sizing="both"><!--]-->shopify.engineering<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devtoolstips.org/" aria-label="devtoolstips.org"><!--[--><img class="vp-icon" src="https://devtoolstips.org/assets/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devtoolstips.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/piccalil.li/" aria-label="piccalil.li"><!--[--><img class="vp-icon" src="https://piccalil.li/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->piccalil.li<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/sitepoint.com/" aria-label="sitepoint.com"><!--[--><img class="vp-icon" src="https://sitepoint.com/favicons/512x512.png" alt aria-hidden no-view sizing="both"><!--]-->sitepoint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/event-driven.io/" aria-label="event-driven.io"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/event-driven.io/favicon.jfif" alt aria-hidden no-view sizing="both"><!--]-->event-driven.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/packagemain.tech/" aria-label="packagemain.tech"><!--[--><img class="vp-icon" src="https://substack-post-media.s3.amazonaws.com/public/images/2ea54e25-eaa6-4630-bfc0-10b8cfdce894/apple-touch-icon-1024x1024.png" alt aria-hidden no-view sizing="both"><!--]-->packagemain.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/gosolve.io/" aria-label="gosolve.io"><!--[--><img class="vp-icon" src="https://gosolve.io/wp-content/uploads/2022/03/cropped-ikona1-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->gosolve.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/towardsdatascience.com/" aria-label="towardsdatascience.com"><!--[--><img class="vp-icon" src="https://cdn-images-1.medium.com/v2/resize:fill:128:128/1*VzTUkfeGymHP4Bvav-T-lA.png" alt aria-hidden no-view sizing="both"><!--]-->towardsdatascience.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/douggregor.net/" aria-label="douggregor.net"><!--[--><i class="vp-icon fas fa-globe" sizing="both"></i><!--]-->douggregor.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/d2.naver.com/" aria-label="d2.naver.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/d2.naver.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->d2.naver.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakao.com/" aria-label="tech.kakao.com"><!--[--><img class="vp-icon" src="https://www.kakaocorp.com/page/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakao.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakaopay.com/" aria-label="tech.kakaopay.com"><!--[--><img class="vp-icon" src="https://tech.kakaopay.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakaopay.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fe-developers.kakaoent.com/" aria-label="fe-developers.kakaoent.com"><!--[--><img class="vp-icon" src="https://fe-developers.kakaoent.com/favicon-32x32.png?v=44803cb16c1e2debd3984cf2e8cb2ded" alt aria-hidden no-view sizing="both"><!--]-->fe-developers.kakaoent.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/yozm.wishket.com/" aria-label="yozm.wishket.com"><!--[--><img class="vp-icon" src="https://yozm.wishket.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->yozm.wishket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/popit.kr/" aria-label="popit.kr"><!--[--><img class="vp-icon" src="https://popit.kr/wp-content/uploads/2016/08/favicon_32x32.png" alt aria-hidden no-view sizing="both"><!--]-->popit.kr<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devkuma.com/" aria-label="devkuma.com"><!--[--><img class="vp-icon" src="https://devkuma.com/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devkuma.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.gangnamunni.com/" aria-label="blog.gangnamunni.com"><!--[--><img class="vp-icon" src="https://blog.gangnamunni.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->blog.gangnamunni.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/codingeverybody.kr/" aria-label="codingeverybody.kr"><!--[--><img class="vp-icon" src="https://codingeverybody.kr/wp-content/uploads/cropped-favicon-origin-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->codingeverybody.kr<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-network-wired" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tecmint.com/" aria-label="tecmint.com"><!--[--><img class="vp-icon" src="https://tecmint.com/wp-content/uploads/2020/07/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tecmint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/docker.com/" aria-label="docker.com"><!--[--><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->docker.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/learnk8s.io/" aria-label="learnk8s.io"><!--[--><img class="vp-icon" src="https://static.learnk8s.io/f7e5160d4744cf05c46161170b5c11c9.svg" alt aria-hidden no-view sizing="both"><!--]-->learnk8s.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/itsfoss.com/" aria-label="itsfoss.com"><!--[--><img class="vp-icon" src="https://itsfoss.com/content/images/size/w256h256/2022/12/android-chrome-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->itsfoss.com<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/chanhi2000/articles" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-appearance-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-appearance-dropdown"><!----></div></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><span class="vp-sidebar-title">frontendmasters.com</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2025</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">2024</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/typescript-without-build-tools.html" aria-label="TypeScript without Build Tools"><!--[--><i class="vp-icon iconfont icon-typescript" sizing="both"></i><!--]-->TypeScript without Build Tools<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/baseline-data-choices.html" aria-label="Baseline Data Choices"><!--[--><i class="vp-icon fa-brands fa-node" sizing="both"></i><!--]-->Baseline Data Choices<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/scroll-driven-fixed.html" aria-label="Scroll-Driven &amp; Fixed"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Scroll-Driven &amp; Fixed<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/introducing-tanstack-start.html" aria-label="Introducing TanStack Start"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Introducing TanStack Start<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/react-19-and-web-component-examples.html" aria-label="React 19 and Web Component Examples"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->React 19 and Web Component Examples<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/introducing-fly-io.html" aria-label="Introducing Fly.io"><!--[--><i class="vp-icon fa-brands fa-fly" sizing="both"></i><!--]-->Introducing Fly.io<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/responsive-tables-readable-paragraphs.html" aria-label="Responsive Tables &amp; Readable Paragraphs"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Responsive Tables &amp; Readable Paragraphs<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/drizzle-database-migrations.html" aria-label="Drizzle Database Migrations"><!--[--><i class="vp-icon fa-brands fa-node" sizing="both"></i><!--]-->Drizzle Database Migrations<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/cant-seem-to-remove-the-formatting-from-a-string-of-text.html" aria-label="Can’t seem to remove the formatting from a string of text?"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Can’t seem to remove the formatting from a string of text?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/multi-state-buttons.html" aria-label="Multi-State Buttons"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Multi-State Buttons<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/pure-css-halftone-effect-in-3-declarations.html" aria-label="Pure CSS Halftone Effect in 3 Declarations"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Pure CSS Halftone Effect in 3 Declarations<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/the-logical-border-radius-equivalents.html" aria-label="The Logical Border Radius Equivalents"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->The Logical Border Radius Equivalents<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/tweaking-one-set-of-colors-for-light-dark-modes.html" aria-label="Tweaking One Set of Colors for Light/Dark Modes"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Tweaking One Set of Colors for Light/Dark Modes<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/tanstack-router-data-loading-2.html" aria-label="Loading Data with TanStack Router: react-query"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Loading Data with TanStack Router: react-query<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/tanstack-router-data-loading-1.html" aria-label="Loading Data with TanStack Router: Getting Going"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Loading Data with TanStack Router: Getting Going<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/no-fuss-light-dark-modes.html" aria-label="No Fuss Light/Dark Modes"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->No Fuss Light/Dark Modes<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/showing-browser-support-for-web-platform-features-on-your-own-blog.html" aria-label="Showing Browser Support for Web Platform Features on Your Own Blog"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Showing Browser Support for Web Platform Features on Your Own Blog<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/custom-progress-element-using-anchor-positioning-scroll-driven-animations.html" aria-label="Custom Progress Element Using Anchor Positioning &amp; Scroll-Driven Animations"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Custom Progress Element Using Anchor Positioning &amp; Scroll-Driven Animations<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/scoped-scroll-timelines.html" aria-label="(Up-) Scoped Scroll Timelines"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->(Up-) Scoped Scroll Timelines<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/why-alpine-is-the-new-jquery-and-why-that-is-an-awesome-thing.html" aria-label="Why Alpine is the new jQuery and Why that is an Awesome Thing"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->Why Alpine is the new jQuery and Why that is an Awesome Thing<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/mastering-interaction-to-next-paint-inp.html" aria-label="Mastering Interaction to Next Paint (INP)"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Mastering Interaction to Next Paint (INP)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/named-scroll-view-timelines.html" aria-label="Named Scroll &amp; View Timelines"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Named Scroll &amp; View Timelines<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/edge-to-edge-text.html" aria-label="Edge to Edge Text"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Edge to Edge Text<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/scroll-driven-sections.html" aria-label="Scroll-Driven… Sections"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Scroll-Driven… Sections<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/9-16.html" aria-label="9 / 16"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->9 / 16<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/view-transitions-staggering.html" aria-label="View Transitions Staggering"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->View Transitions Staggering<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/simple-typographic-email-template.html" aria-label="An HTML Email Template with Basic Typography and Dark/Light Modes"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->An HTML Email Template with Basic Typography and Dark/Light Modes<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/fanout-with-grid-and-view-transitions.html" aria-label="Fanout with Grid and View Transitions"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Fanout with Grid and View Transitions<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/handling-paste-events-in-javascript.html" aria-label="Handling Paste Events in JavaScript"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->Handling Paste Events in JavaScript<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/css-fan-out-with-grid-and-property.html" aria-label="CSS Fan Out with Grid and @property"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->CSS Fan Out with Grid and @property<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/reminder-that-scope-and-html-style-blocks-are-a-potent-combo.html" aria-label="Reminder that @scope and HTML style blocks are a potent combo"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Reminder that @scope and HTML style blocks are a potent combo<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/whats-the-difference-between-htmls-dialog-element-and-popovers.html" aria-label="What’s the Difference Between HTML’s Dialog Element and Popovers?"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->What’s the Difference Between HTML’s Dialog Element and Popovers?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/you-might-not-need-that-framework.html" aria-label="You Might Not Need that Framework"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->You Might Not Need that Framework<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/what-software-developer-skills-should-you-focus-on-leading-into-2025.html" aria-label="What Software Developer Skills Should You Focus on Leading Into 2025?"><!--[--><i class="vp-icon fas fa-user-tie" sizing="both"></i><!--]-->What Software Developer Skills Should You Focus on Leading Into 2025?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/keeping-pixely-images-pixely-and-performant.html" aria-label="Keeping Pixely Images Pixely (and Performant!)"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Keeping Pixely Images Pixely (and Performant!)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/gradient-text-with-a-drop-shadow.html" aria-label="Gradient Text with a Drop Shadow"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Gradient Text with a Drop Shadow<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/introducing-tanstack-router.html" aria-label="Introducing TanStack Router"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Introducing TanStack Router<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/split-effects-with-no-content-duplication.html" aria-label="Split Effects with no Content Duplication"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Split Effects with no Content Duplication<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/what-does-hydration-mean.html" aria-label="What Does Hydration Mean?"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->What Does Hydration Mean?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/a-complete-guide-to-beginning-with-typescript.html" aria-label="A Complete Guide to Beginning with TypeScript"><!--[--><i class="vp-icon iconfont icon-typescript" sizing="both"></i><!--]-->A Complete Guide to Beginning with TypeScript<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/a-complete-guide-to-beginning-with-javascript.html" aria-label="A Complete Guide to Beginning with JavaScript"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->A Complete Guide to Beginning with JavaScript<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/backgrounds-for-the-box-model-and-why-it-can-be-useful.html" aria-label="Backgrounds for the Box Model (and why it can be useful)"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Backgrounds for the Box Model (and why it can be useful)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/java-optionals.html" aria-label="Java Optionals"><!--[--><i class="vp-icon fa-brands fa-java" sizing="both"></i><!--]-->Java Optionals<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/the-dialog-element-with-entry-and-exit-animations.html" aria-label="The Dialog Element with Entry *and* Exit Animations"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->The Dialog Element with Entry *and* Exit Animations<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/what-skills-should-you-focus-on-as-junior-web-developer-in-2024.html" aria-label="What Skills Should You Focus on as Junior Web Developer in 2024?"><!--[--><i class="vp-icon fas fa-user-tie" sizing="both"></i><!--]-->What Skills Should You Focus on as Junior Web Developer in 2024?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/writing-to-the-clipboard-in-javascript.html" aria-label="Writing to the Clipboard in JavaScript"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->Writing to the Clipboard in JavaScript<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/custom-range-slider-using-anchor-positioning-scroll-driven-animations.html" aria-label="Custom Range Slider Using Anchor Positioning &amp; Scroll-Driven Animations"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Custom Range Slider Using Anchor Positioning &amp; Scroll-Driven Animations<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/the-css-contain-property.html" aria-label="The CSS contain property"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->The CSS contain property<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/letting-ios-text-size-setting-affect-font-size-on-the-web.html" aria-label="Letting iOS “Text Size” Setting Affect Font Size on the Web"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Letting iOS “Text Size” Setting Affect Font Size on the Web<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/fine-grained-reactivity-in-svelte-5.html" aria-label="Fine-Grained Reactivity in Svelte 5"><!--[--><i class="vp-icon iconfont icon-svelte" sizing="both"></i><!--]-->Fine-Grained Reactivity in Svelte 5<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/relative-color-syntax-basic-use-cases.html" aria-label="Relative Color Syntax — Basic Use Cases"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Relative Color Syntax — Basic Use Cases<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/exploring-the-possibilities-of-native-javascript-decorators.html" aria-label="Exploring the Possibilities of Native JavaScript Decorators"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->Exploring the Possibilities of Native JavaScript Decorators<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/snippets-in-svelte-5.html" aria-label="Snippets in Svelte 5"><!--[--><i class="vp-icon iconfont icon-svelte" sizing="both"></i><!--]-->Snippets in Svelte 5<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/figma-typography-variables.html" aria-label="Figma Typography Variables"><!--[--><i class="vp-icon fa-brands fa-figma" sizing="both"></i><!--]-->Figma Typography Variables<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/what-if-you-used-container-units-for-everything.html" aria-label="What if you used Container Units for… everything?"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->What if you used Container Units for… everything?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/reading-from-the-clipboard-in-javascript.html" aria-label="Reading from the Clipboard in JavaScript"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->Reading from the Clipboard in JavaScript<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/patterns-for-memory-efficient-dom-manipulation.html" aria-label="Patterns for Memory Efficient DOM Manipulation with Modern Vanilla JavaScript"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->Patterns for Memory Efficient DOM Manipulation with Modern Vanilla JavaScript<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/how-to-get-the-width-height-of-any-element-in-only-css.html" aria-label="How to Get the Width/Height of Any Element in Only CSS"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->How to Get the Width/Height of Any Element in Only CSS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/clip-pathing-color-changes.html" aria-label="Clip Pathing Color Changes"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->Clip Pathing Color Changes<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/introducing-svelte-5.html" aria-label="Introducing Svelte 5"><!--[--><i class="vp-icon iconfont icon-svelte" sizing="both"></i><!--]-->Introducing Svelte 5<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/the-pitfalls-of-in-app-browsers.html" aria-label="The Pitfalls of In-App Browsers"><!--[--><i class="vp-icon fa-brands fa-node" sizing="both"></i><!--]-->The Pitfalls of In-App Browsers<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/css-does-need-mixins.html" aria-label="Style Queries are Almost Like Mixins (But Mixins Would Be Better)"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Style Queries are Almost Like Mixins (But Mixins Would Be Better)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/single-directionally-allowed-overflow.html" aria-label="Single-Directionally Allowed Overflow"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Single-Directionally Allowed Overflow<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/how-keyboard-navigation-works-in-a-css-game.html" aria-label="How Keyboard Navigation Works in a CSS Game"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->How Keyboard Navigation Works in a CSS Game<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/script-integrity.html" aria-label="Script Integrity"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->Script Integrity<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/why-is-this-thing-in-dark-mode.html" aria-label="Why is this thing in Dark Mode?"><!--[--><i class="vp-icon fa-brands fa-chrome" sizing="both"></i><!--]-->Why is this thing in Dark Mode?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/youtube-embeds-are-bananas-heavy-and-its-fixable.html" aria-label="YouTube Embeds are Bananas Heavy and it’s Fixable"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->YouTube Embeds are Bananas Heavy and it’s Fixable<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/browser-support-tests-in-javascript-for-modern-web-features.html" aria-label="Browser Support Tests in JavaScript for Modern Web Features"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->Browser Support Tests in JavaScript for Modern Web Features<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/text-reveal-with-conic-gradient.html" aria-label="A Text-Reveal Effect Using conic-gradient() in CSS"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->A Text-Reveal Effect Using conic-gradient() in CSS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/popovers-work-pretty-nicely-as-slide-out-drawers.html" aria-label="Popovers Work Pretty Nicely as Slide-Out Drawers"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Popovers Work Pretty Nicely as Slide-Out Drawers<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/pure-css-circular-text-without-requiring-a-monospace-font.html" aria-label="Pure CSS Circular Text (without Requiring a Monospace Font)"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Pure CSS Circular Text (without Requiring a Monospace Font)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/footnotes-progressively-enhanced-to-popovers.html" aria-label="Footnotes Progressively Enhanced to Popovers"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Footnotes Progressively Enhanced to Popovers<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/introducing-drizzle.html" aria-label="Introducing Drizzle"><!--[--><i class="vp-icon fa-brands fa-node" sizing="both"></i><!--]-->Introducing Drizzle<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/one-of-the-boss-battles-of-css-is-almost-won-transitioning-to-auto.html" aria-label="One of the Boss Battles of CSS is Almost Won! Transitioning to Auto"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->One of the Boss Battles of CSS is Almost Won! Transitioning to Auto<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/masonry-and-reading-order.html" aria-label="Masonry and reading order"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Masonry and reading order<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/playing-with-the-speculation-rules-api-in-the-console.html" aria-label="Playing with the Speculation Rules API in the Console"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->Playing with the Speculation Rules API in the Console<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/live-demos-of-stand-alone-web-components.html" aria-label="Live Demos of Stand Alone Web Components"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Live Demos of Stand Alone Web Components<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/control-javascript-promises-from-anywhere-using-promise-withresolvers.html" aria-label="Control JavaScript Promises from Anywhere Using Promise.withResolvers()"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->Control JavaScript Promises from Anywhere Using Promise.withResolvers()<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/fast-and-budget-friendly-user-research-and-testing.html" aria-label="Fast and Budget-Friendly User Research and Testing"><!--[--><i class="vp-icon fas fa-user-tie" sizing="both"></i><!--]-->Fast and Budget-Friendly User Research and Testing<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/testing-types-in-typescript.html" aria-label="Testing Types in TypeScript"><!--[--><i class="vp-icon iconfont icon-typescript" sizing="both"></i><!--]-->Testing Types in TypeScript<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/how-to-make-a-css-timer.html" aria-label="How to Make a CSS Timer"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->How to Make a CSS Timer<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html" aria-label="Combining React Server Components with react-query for Easy Data Management"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Combining React Server Components with react-query for Easy Data Management<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/animating-dialog.html" aria-label="Animating the Dialog Element"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Animating the Dialog Element<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/danger-preventing-zoom-from-changing-text-size.html" aria-label="(Danger!) Preventing Zoom from Changing Text Size"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->(Danger!) Preventing Zoom from Changing Text Size<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/weve-got-container-queries-now-but-are-we-actually-using-them.html" aria-label="We’ve Got Container Queries Now, But Are We Actually Using Them?"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->We’ve Got Container Queries Now, But Are We Actually Using Them?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/exactly-how-to-deploy-local-files-to-make-a-live-website.html" aria-label="Exactly How to Deploy Local Files to Make a Live Website"><!--[--><i class="vp-icon fas fa-network-wired" sizing="both"></i><!--]-->Exactly How to Deploy Local Files to Make a Live Website<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/prefetching-when-server-loading-wont-do.html" aria-label="Prefetching When Server Loading Won’t Do"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Prefetching When Server Loading Won’t Do<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/the-classic-border-radius-advice-plus-an-unusual-trick.html" aria-label="The Classic Border Radius Advice, Plus an Unusual Trick"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->The Classic Border Radius Advice, Plus an Unusual Trick<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/using-css-scroll-driven-animations-for-section-based-scroll-progress-indicators.html" aria-label="Using CSS Scroll-Driven Animations for Section-Based Scroll Progress Indicators"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Using CSS Scroll-Driven Animations for Section-Based Scroll Progress Indicators<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/5-things-designers-can-do-with-javascript.html" aria-label="Five Basic Things About JavaScript That Will Help Non JavaScript-Focused Web Designers"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->Five Basic Things About JavaScript That Will Help Non JavaScript-Focused Web Designers<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/using-the-popover-api-for-html-tooltips.html" aria-label="Using the Popover API for HTML Tooltips"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Using the Popover API for HTML Tooltips<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/multiplexed-fonts-have-a-cool-superpower.html" aria-label="“Multiplexed” Fonts Have a Cool Superpower"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->“Multiplexed” Fonts Have a Cool Superpower<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/popover-api-is-here.html" aria-label="Popover API is Here"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Popover API is Here<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/using-nextauth-now-auth-js-with-sveltekit.html" aria-label="Using Auth.js with SvelteKit"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Using Auth.js with SvelteKit<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/the-html-css-and-svg-for-a-classic-search-form.html" aria-label="The HTML, CSS, and SVG for a Classic Search Form"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->The HTML, CSS, and SVG for a Classic Search Form<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/feedback-on-masonry-layout.html" aria-label="Feedback on Masonry Layout"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Feedback on Masonry Layout<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/dark-and-light.html" aria-label="What’s Going On in Dark Theme / Light Theme Land"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->What’s Going On in Dark Theme / Light Theme Land<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/things-that-can-break-aspect-ratio-in-css.html" aria-label="Things That Can Break aspect-ratio in CSS"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Things That Can Break aspect-ratio in CSS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/a-css-powered-add-remove-tags-ui.html" aria-label="A CSS-Powered Add/Remove Tags UI"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->A CSS-Powered Add/Remove Tags UI<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/drawing-a-line-to-connect-elements-with-css-anchor-positioning.html" aria-label="Drawing a Line to Connect Elements with CSS Anchor Positioning"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Drawing a Line to Connect Elements with CSS Anchor Positioning<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/creating-flower-shapes-using-css-mask-trigonometric-functions.html" aria-label="Creating Flower Shapes using CSS Mask &amp; Trigonometric Functions"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Creating Flower Shapes using CSS Mask &amp; Trigonometric Functions<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/the-color-input-the-color-picker.html" aria-label="The Color Input &amp; The Color Picker"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->The Color Input &amp; The Color Picker<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/frontendmasters.com/we-can-has-it-all.html" aria-label="We can :has it all"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->We can :has it all<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2023</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><div class="page-cover"><img src="https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/2378" alt no-view></div><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon fa-brands fa-react" sizing="height"></i>Combining React Server Components with react-query for Easy Data Management</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Adam Rackis</span></span><span property="author" content="Adam Rackis"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">5/24/24</span><meta property="datePublished" content="2024-05-24T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 21 min</span><meta property="timeRequired" content="PT21M"></span><span class="page-category-info" aria-label="Category🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color1" role>Node.js</span><span class="page-category-item color6" role>React.js</span><span class="page-category-item color8" role>Article(s)</span><!--]--><meta property="articleSection" content="Node.js,React.js,Article(s)"></span><span class="page-tag-info" aria-label="Tag🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8" role>blog</span><span class="page-tag-item color8" role>frontendmasters.com</span><span class="page-tag-item color2" role>node</span><span class="page-tag-item color6" role>nodejs</span><span class="page-tag-item color3" role>node-js</span><span class="page-tag-item color5" role>react</span><span class="page-tag-item color6" role>reactjs</span><span class="page-tag-item color6" role>react-js</span><!--]--><meta property="keywords" content="blog,frontendmasters.com,node,nodejs,node-js,react,reactjs,react-js"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="frontmatter-title-관련" tabindex="-1"><a class="header-anchor" href="#frontmatter-title-관련"><span>Combining React Server Components with react-query for Easy Data Management 관련</span></a></h1><a class="route-link vp-card" href="/bookshelf/programming/js-react/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="https://chanhi2000.github.io/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">React.js > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><nav class="table-of-contents"><ul><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#why-rsc" class="router-link-active router-link-exact-active">Why RSC?</a></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#how-do-i-use-them" class="router-link-active router-link-exact-active">How do I use them?</a><ul><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#how-do-react-server-components-work" class="router-link-active router-link-exact-active">How do React Server Components work?</a></li></ul></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#the-demo-app" class="router-link-active router-link-exact-active">The demo app</a></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#a-note-on-caching" class="router-link-active router-link-exact-active">A note on caching</a></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#loading-the-data" class="router-link-active router-link-exact-active">Loading the data</a></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#rsc-version" class="router-link-active router-link-exact-active">RSC Version</a><ul><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#loading-data" class="router-link-active router-link-exact-active">Loading data</a></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#so-you-ve-loaded-data-now-what" class="router-link-active router-link-exact-active">So you’ve loaded data, now what?</a></li></ul></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#updating-your-data-with-server-actions" class="router-link-active router-link-exact-active">Updating your data with Server Actions</a><ul><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#what-s-the-catch" class="router-link-active router-link-exact-active">What’s the catch?</a></li></ul></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#react-query" class="router-link-active router-link-exact-active">react-query</a><ul><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#loading-data-with-react-query" class="router-link-active router-link-exact-active">Loading data with react-query</a></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#updating-data-with-react-query" class="router-link-active router-link-exact-active">Updating data with react-query</a></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#what-s-the-catch-1" class="router-link-active router-link-exact-active">What’s the catch?</a></li></ul></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#playing-on-hard-mode" class="router-link-active router-link-exact-active">Playing on hard mode</a><ul><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#fixing-routing-when-using-react-query" class="router-link-active router-link-exact-active">Fixing routing when using react-query</a></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#removing-the-duplication" class="router-link-active router-link-exact-active">Removing the duplication</a></li></ul></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#what-about-bundle-size" class="router-link-active router-link-exact-active">What about bundle size?</a></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#wrapping-up" class="router-link-active router-link-exact-active">Wrapping up</a></li><li><a aria-current="page" href="/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html#🆕-update" class="router-link-active router-link-exact-active">🆕 Update</a></li></ul></nav><hr><div class="vp-site-info" data-name="Combining React Server Components with react-query for Easy Data Management"><a class="vp-site-info-navigator no-external-link-icon" title="Combining React Server Components with react-query for Easy Data Management" href="https://frontendmasters.com/blog/combining-react-server-components-with-react-query-for-easy-data-management" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/2378) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://frontendmasters.com/favicon.ico" alt loading="lazy" no-view><div class="vp-site-info-name">Combining React Server Components with react-query for Easy Data Management</div><div class="vp-site-info-desc">Server-side component rendering can improve data loading efficiency over client-rendered SPAs. Despite their benefits, such as out-of-order streaming, they have limitations, including slow server action updates and lack of support for client-side interactivity. React Query complements RSC by managing client-side data updates, addressing some of RSC&#39;s drawbacks.</div></div><!----></div><p><a href="https://react.dev/reference/rsc/server-components" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-react" sizing="height"></i>React Server Components</a>(RSC) are an exciting innovation in web development. In this post we’ll briefly introduce them, show what their purpose and benefits are, as well as their limitations. We’ll wrap up by showing how to pair them with<a href="https://tanstack.com/query/latest/docs/framework/react/overview" target="_blank" rel="noopener noreferrer"><code>react-query</code></a>to help solve those limitations. Let’s get started!</p><hr><h2 id="why-rsc" tabindex="-1"><a class="header-anchor" href="#why-rsc"><span>Why RSC?</span></a></h2><p>React Server Components, as the name implies, execute<strong>on the server</strong>—and the server<strong>alone</strong>. To see why this is significant, let’s take a whirlwind tour of how web development evolved over the last 10 or so years.</p><p>Prior to RSC, JavaScript frameworks (React, Svelte, Vue, Solid, etc) provided you with a component model for building your application. These components were capable of running on the server, but only as a synchronous operation for stringifying your components’ HTML to send down to the browser so it could server render your app. Your app would then render in the browser, again, at which point it would become interactive. With this model, the only way to load data was as a side-effect on the client. Waiting until your app reached your user’s browser before beginning to load data was<strong>slow and inefficient</strong>.</p><p>To solve this inefficiency, meta-frameworks like Next, SvelteKit, Remix, Nuxt, SolidStart, etc were created. These meta-frameworks provided various ways to load data, server-side, with that data being injected by the meta-framework into your component tree. This code was non-portable, and usually a little awkward. You’d have to define some sort of loader function that was associated with a given route, load data, and then expect it to show up in your component tree based on the rules of whatever meta-framework you were using.</p><p>This worked, but it wasn’t without issue. In addition to being framework-specific, composition also suffered; where typically components are explicitly passed props by whichever component renders them, now there are<em>implicit</em>props passed by the meta-framework, based on what you return from your loader. Nor was this setup the most flexible. A given page needs to know what data it needs up front, and request it all from the loader. With client-rendered SPAs we could just render whatever components we need, and let them fetch whatever data they need. This was awful for performance, but amazing for convenience.</p><p>RSC bridges that gap and gives us the best of both worlds. We get to<em>ad hoc</em>request whatever data we need from whichever component we’re rendering, but have that code execute on the server, without needing to wait for a round trip to the browser. Best of all, RSC also supports<em>streaming</em>, or more precisely,<em>out-of-order</em>streaming. If some of our data are slow to load, we can send the rest of the page, and<em>push</em>those data down to the browser, from the server, whenever they happen to be ready.</p><hr><h2 id="how-do-i-use-them" tabindex="-1"><a class="header-anchor" href="#how-do-i-use-them"><span>How do I use them?</span></a></h2><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#how-do-i-use-them" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><p>At time of writing RSC are mostly only supported in Next.js, although the minimal framework<a href="https://waku.gg/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Waku</a>also supports it. Remix and TanStack Router are currently working on implementations, so stay tuned. I’ll show a very brief overview of what they look like in Next; consult those other frameworks when they ship. The ideas will be the same, even if the implementations differ slightly.</p><p>In Next, when using the new “app directory” (it’s literally a folder called “app” that you define your various routes in), pages are RSC by default. Any components imported by these pages are also RSC, as well as components imported by those components, and so on. When you’re ready to exit server components and switch to “client components,” you put the<code>&quot;use client&quot;</code>pragma at the top of a component. Now that component, and everything that component imports are client components. Check the<a href="https://nextjs.org/docs/app" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-nextjs" sizing="height"></i>Next docs</a>for more info.</p><h3 id="how-do-react-server-components-work" tabindex="-1"><a class="header-anchor" href="#how-do-react-server-components-work"><span>How do React Server Components work?</span></a></h3><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#how-do-react-server-components-work" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><p>React Server Components are just like regular React Components, but with a few differences. For starters, they can be async functions. The fact that you can await asynchronous operations right in the component makes them well suited for requesting data. Note that asynchronous client components are a thing coming soon to React, so this differentiation won’t exist for too long. The other big difference is that these components run<em>only on</em>the server. Client components (i.e. regular components) run on the server, and then re-run on the client in order to “hydrate.” That’s how frameworks like Next and Remix have always worked. But server components run only on the server.</p><p>Server components have no hydration, since, again, they only execute on the server. That means you can do things like connect directly to a database, or use Server-only api’s. But it also means there are many things you can’t do in RSCs: you cannot use effects or state, you cannot set up event handlers, or use browser-specific APIs like <code>localStorage</code>. If you violate any of those rules you’ll get errors.</p><p>For a more thorough introduction to RSC, check the<a href="https://nextjs.org/docs/app" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-nextjs" sizing="height"></i>Next docs</a>for the app directory, or depending on when you read this, the Remix or TanStack Router docs. But to keep this post a reasonable length, let’s keep the details in the docs, and see how we<em>use them</em>.</p><p>Let’s put together a very basic proof of concept demo app with RSC, see how data mutations work, and some of their limitations. We’ll then take that same app (still using RSC) and see how it looks with react-query.</p><hr><h2 id="the-demo-app" tabindex="-1"><a class="header-anchor" href="#the-demo-app"><span>The demo app</span></a></h2><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#the-demo-app" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><p>As I’ve done before, let’s put together a very basic, very ugly web page for searching some books, and also updating the titles of them. We’ll also show some other data on this page: the various subjects, and tags we have, which in theory we could apply to our books (if this were a real web app, instead of a demo).</p><p>The point is to show how RSC and react-query work, not make anything useful or beautiful, so temper your expectations 🙂 Here’s what it looks like:</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/05/web-page.jpg?resize=1024%2C458&amp;ssl=1" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>The page has a search input which puts our search term into the url to filter the books shown. Each book also has an input attached to it for us to update that book’s title. Note the nav links at the top, for the RSC and RSC + react-query versions. While the pages look and behave identically as far as the user can see, the implementations are different, which we’ll get into.</p><div class="vp-site-info" data-name="arackaf/react-query-rsc-blog-post"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/react-query-rsc-blog-post" href="https://github.com/arackaf/react-query-rsc-blog-post/" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/330fb07ca1c5db47250a8d30d89e171995359c6d608ff0393f3f95c6dbd49619/arackaf/react-query-rsc-blog-post) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/react-query-rsc-blog-post</div><div class="vp-site-info-desc">Contribute to arackaf/react-query-rsc-blog-post development by creating an account on GitHub.</div></div><!----></div><p>The data is all static, but the books are put into a SQLite database, so we can update the data. The binary for the SQLite db should be in that repo, but you can always re-create it (and reset any updates you’ve made) by running<code>npm run create-db</code>.</p><p>Let’s dive in.</p><hr><h2 id="a-note-on-caching" tabindex="-1"><a class="header-anchor" href="#a-note-on-caching"><span>A note on caching</span></a></h2><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#a-note-on-caching" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><p>At time of writing, Next is about to release a new version with radically different caching APIs and defaults. We won’t cover any of that for this post. For the demo, I’ve disabled all caching. Each call to a page, or API endpoint will always run fresh from the server. The client cache will still work, so if you click between the two pages, Next will cache and display what you just saw, client-side. But refreshing the page will always recreate everything from the server.</p><hr><h2 id="loading-the-data" tabindex="-1"><a class="header-anchor" href="#loading-the-data"><span>Loading the data</span></a></h2><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#loading-the-data" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><p>There are API endpoints inside of the<code>api</code>folder for loading data and for updating the books. I’ve added artificial delays of a few hundred<code>ms</code>for each of these endpoints, since they’re either loading static data, or running simple queries from SQLite. There’s also console logging for these data, so you can see what’s loading when. This will be useful in a bit.</p><p>Here’s what the terminal console shows for a typical page load in either the RSC or RSC + react-query version.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/05/loading-logs.jpg?resize=566%2C356&amp;ssl=1" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Let’s look at the RSC version</p><hr><h2 id="rsc-version" tabindex="-1"><a class="header-anchor" href="#rsc-version"><span>RSC Version</span></a></h2><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#rsc-version" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token constant">RSC</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">searchParams</span><span class="token operator">:</span> any <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> search <span class="token operator">=</span> props<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span>search <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p-5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-lg leading-none font-bold<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Books page in RSC</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Suspense</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Loading...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex flex-col gap-2 p-5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">BookSearchForm</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex-[2] min-w-0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Books</span></span> <span class="token attr-name">search</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>search<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex-1 flex flex-col gap-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Subjects</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tags</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Suspense</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We have a simple page header. Then we see a Suspense boundary. This is how out-of-order streaming works with Next and RSC. Everything above the Suspense boundary will render immediately, and the<code>Loading...</code>message will show until all the various data in the various components below have finished loading. React knows what’s pending based on what you’ve awaited. The<code>Books</code>,<code>Subjects</code>and<code>Tags</code>components all have fetches inside of them, which are awaited. We’ll look at one of them momentarily, but first note that, even though three different components are all requesting data, React will run them in parallel. Sibling nodes in the component tree can, and do load data in parallel.</p><p>But if you ever have a parent / child component which both load data, then the child component will not (cannot) even<em>start</em>util the parent is finished loading. If the child data fetch depends on the parent’s loaded data, then this is unavoidable (you’d have to modify your backend to fix it), but if the data do not depend on each other, then you would solve this waterfall by just loading the data higher up in the component tree, and passing the various pieces down.</p><h3 id="loading-data" tabindex="-1"><a class="header-anchor" href="#loading-data"><span>Loading data</span></a></h3><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#loading-data" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><p>Let’s see the Books component”</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FC</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> BooksList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../components/BooksList&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> BookEdit <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../components/BookEditRSC&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token literal-property property">Books</span><span class="token operator">:</span> <span class="token constant">FC</span><span class="token operator">&lt;</span><span class="token punctuation">{</span> <span class="token literal-property property">search</span><span class="token operator">:</span> string <span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> search <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> booksResp <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://localhost:3000/api/books?search=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>search<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">next</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">tags</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;books-query&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> books <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> booksResp<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">BooksList</span></span> <span class="token attr-name">books</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>books<span class="token punctuation">}</span></span> <span class="token attr-name">BookEdit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>BookEdit<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We fetch and await our data right in the component! This was completely impossible before RSC. We then then pass it down into the<code>BooksList</code>component. I separated this out so I could re-use the main BookList component with both versions. The<code>BookEdit</code>prop I’m passing in is a React component that renders the textbox to update the title, and performs the update. This will differ between the RSC, and react-query version. More on that in a bit.</p><p>The<code>next</code>property in the fetch is Next-specific, and will be used to invalidate our data in just a moment. The experienced Next devs might spot a problem here, which we’ll get into very soon.</p><h3 id="so-you-ve-loaded-data-now-what" tabindex="-1"><a class="header-anchor" href="#so-you-ve-loaded-data-now-what"><span>So you’ve loaded data, now what?</span></a></h3><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#so-youve-loaded-data-now-what" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><p>We have a page with three different RSCs which load and render data. Now what? If our page was just static content we’d be done. We loaded data, and displayed it. If that’s your use case, you’re done. RSCs are perfect for you, and you won’t need the rest of this post.</p><p>But what if you want to let your user interact with, and update your data?</p><hr><h2 id="updating-your-data-with-server-actions" tabindex="-1"><a class="header-anchor" href="#updating-your-data-with-server-actions"><span>Updating your data with Server Actions</span></a></h2><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#updating-your-data-with-server-actions" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><p>To mutate data with RSC you use something called<a href="https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-nextjs" sizing="height"></i>Server Actions</a>. Check the docs for specifics, but here’s what our server action looks like</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token string">&quot;use server&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> revalidateTag <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;next/cache&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">saveBook</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">id</span><span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:3000/api/books/update&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      id<span class="token punctuation">,</span></span>
<span class="line">      title<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">revalidateTag</span><span class="token punctuation">(</span><span class="token string">&quot;books-query&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note the<code>&quot;use server&quot;</code>pragma at the top. That means the function we export is now a server action.<code>saveBook</code>takes an id, and a title; it posts to an endpoint to update our book in SQLite, and then calls<code>revalidateTag</code>with the same tag we passed to our fetch, before.</p><p>In real life, we wouldn’t even need the books/update endpoint. We’d just do the work right in the server action. But we’ll be re-using that endpoint in a bit, when we update data <em>without</em> server actions, and it’s nice to keep these code samples clean. The <code>books/update</code> endpoint opens up SQLite, and executes an UPDATE.</p><p>Let’s see the BookEdit component we use with RSC:</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token string">&quot;use client&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FC</span><span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> saveBook <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../serverActions&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> BookEditProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../types&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token literal-property property">BookEdit</span><span class="token operator">:</span> <span class="token constant">FC</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">BookEditProps</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> = (props) =&gt; </span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> book <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> titleRef <span class="token operator">=</span> useRef<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HTMLInputElement</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">(null);</span>
<span class="line">  const [saving, startSaving] = useTransition();</span>
<span class="line"></span>
<span class="line">  function doSave() </span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">startSaving</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">await</span> <span class="token function">saveBook</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>id<span class="token punctuation">,</span> titleRef<span class="token punctuation">.</span>current<span class="token operator">!</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line"></span>
<span class="line">  return (</span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex gap-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>border rounded border-gray-600 p-1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>titleRef<span class="token punctuation">}</span></span> <span class="token attr-name">defaultValue</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>book<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rounded border border-gray-600 p-1 bg-blue-300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>saving<span class="token punctuation">}</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>doSave<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token punctuation">{</span>saving <span class="token operator">?</span> <span class="token string">&quot;Saving...&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Save&quot;</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">  );</span>
<span class="line">};</span>
<span class="line"></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It’s a <em>client</em> component. We import the server action, and then just call it in a button’s event handler, wrapped in a transition so we can have saving state.</p><p>Stop and consider just how radical this is, and what React and Next are doing under the covers. All we did was create a vanilla function. We then imported that function, and called it from a button’s event handler. But under the covers a network request is made to an endpoint that’s synthesized for us. And then the<code>revalidateTag</code>tells Next what’s changed, so our RSC can re-run, re-request data, and send down updated markup.</p><p>Not only that, but all this happens in<strong>one round trip</strong>with the server.</p><p>This is an incredible engineering achievement, and it works! If you update one of the titles, and click save, you’ll see updated data show up in a moment (the update has an artificial delay since we’re only updating in a local SQLite instance)</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/05/update-data.jpg?resize=1024%2C111&amp;ssl=1" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="what-s-the-catch" tabindex="-1"><a class="header-anchor" href="#what-s-the-catch"><span>What’s the catch?</span></a></h3><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#whats-the-catch" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><p>This seems too good to be true. What’s the catch? Well, let’s see what the terminal shows when we update a book:</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/05/server-action.jpg?resize=564%2C466&amp;ssl=1" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Ummmm, why is<em>all</em>of our data re-loading? We only called<code>revalidateTag</code>on our books, not our subjects or tags. The problem is that<code>revalidateTag</code>doesn’t tell Next what to reload, it tells it what to eject from its cache. The fact is, Next needs to reload everything for the current page when we call<code>revalidateTag</code>. This makes sense when you think about what’s really happening. These server components are not stateful; they run on the server, but they don’t<em>live</em>on the server. The request executes on our server, those RSCs render, and send down the markup, and that’s that. The component tree does not live on indefinitely on the server; our servers wouldn’t scale very well if they did!</p><p>So how do we solve this? For a use case like this, the solution would be to<em>not</em>turn off caching. We’d lean on Next’s caching mechanisms, whatever they look like when you happen to read this. We’d cache each of these data with different tags, and invalidate the tag related to the data we just updated.</p><p>The whole RSC tree will still re-render when we do that, but the requests for cached data would run quickly. Personally, I’m of the view that caching should be a performance tweak you add, as needed; it should not be a<em>sine qua non</em>for avoiding slow updates.</p><p>Unfortunately, there’s yet another problem with server actions: they run serially. Only one server action can be in flight at a time; they’ll queue if you try to violate this constraint.</p><p>This sounds genuinely unbelievable; but it’s true. If we artificially slow down our update a LOT, and then quickly click 5 different save buttons, we’ll see horrifying things in our network tab. If the extreme slowdown on the update endpoint seems unfair on my part, remember: you should never,<em>ever</em>assume your network will be fast, or even reliable. Occasional, slow network requests are inevitable, and server actions will do the worst possible thing under those circumstances.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/05/serial-execution-1024x94.jpg?resize=1024%2C94&amp;ssl=1" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>This is a known issue, and will presumably be fixed at some point. But the re-loading without caching issue is unavoidable with how Next app directory is designed.</p><p>Just to be clear, server actions are still, even with these limitations, outstanding (for some use cases). If you have a web page with a form, and a submit button, server actions are<strong>outstanding</strong>. None of these limitations will matter (assuming your form doesn’t depend on a bunch of different data sources). In fact, server actions go especially well with forms. You can even set the “action” of a form (in Next) directly to a server action. See<a href="https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-nextjs" sizing="height"></i>the docs</a>for more info, as well as on related hooks, like<a href="https://react.dev/reference/react-dom/hooks/useFormStatus" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-react" sizing="height"></i><code>useFormStatus</code> hook</a>.</p><p>But back to our app. We don’t have a page with a single form and no data sources. We have lots of little forms, on a page with lots of data sources. Server actions won’t work well here, so let’s see an alternative.</p><hr><h2 id="react-query" tabindex="-1"><a class="header-anchor" href="#react-query"><span><code>react-query</code></span></a></h2><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#react-query" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><p><a href="https://tanstack.com/query/latest/docs/framework/react/overview" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>React Query</a>is probably the most mature, well-maintained data management library in the React ecosystem. Unsurprisngly, it also works well with RSC.</p><p>To use react-query we’ll need to install two packages:<code>npm i @tanstack/react-query @tanstack/react-query-next-experimental</code>. Don’t let the experimental in the name scare you; it’s been out for awhile, and works well.</p><p>Next we’ll make a<code>Providers</code>component, and render it from our root layout</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token string">&quot;use client&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> QueryClient<span class="token punctuation">,</span> QueryClientProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-query&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ReactQueryStreamedHydration <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-query-next-experimental&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FC</span><span class="token punctuation">,</span> PropsWithChildren<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token literal-property property">Providers</span><span class="token operator">:</span> <span class="token constant">FC</span><span class="token operator">&lt;</span>PropsWithChildren<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">&gt;&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>queryClient<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">QueryClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">QueryClientProvider</span></span> <span class="token attr-name">client</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>queryClient<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ReactQueryStreamedHydration</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ReactQueryStreamedHydration</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">QueryClientProvider</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now we’re ready to go.</p><h3 id="loading-data-with-react-query" tabindex="-1"><a class="header-anchor" href="#loading-data-with-react-query"><span>Loading data with <code>react-query</code></span></a></h3><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#loading-data-with-react-query" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><p>The long and short of it is that we use the<code>useSuspenseQuery</code>hook from inside client components. Let’s see some code. Here’s the Books component from the react-query version of our app.</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token string">&quot;use client&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FC</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useSuspenseQuery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-query&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> BooksList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../components/BooksList&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> BookEdit <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../components/BookEditReactQuery&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useSearchParams <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;next/navigation&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token literal-property property">Books</span><span class="token operator">:</span> <span class="token constant">FC</span><span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token function">useSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> search <span class="token operator">=</span> params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;search&quot;</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useSuspenseQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">queryKey</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;books-query&quot;</span><span class="token punctuation">,</span> search<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function-variable function">queryFn</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">const</span> booksResp <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://localhost:3000/api/books?search=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>search<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">const</span> <span class="token punctuation">{</span> books <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> booksResp<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">return</span> <span class="token punctuation">{</span> books <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> books <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">BooksList</span></span> <span class="token attr-name">books</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>books<span class="token punctuation">}</span></span> <span class="token attr-name">BookEdit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>BookEdit<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Don’t let the<code>&quot;use client&quot;</code>pragma fool you. This component still renders on the server,<strong>and that fetch also happens on the server</strong>during the initial load of the page.</p><p>As the url changes, the<code>useSearchParams</code>result changes, and a new query is fired off by our<code>useSuspenseQuery</code>hook,<em>from the browser</em>. This would normally suspend the page, but I wrap the call to<code>router.push</code>in<code>startTransition</code>, so the existing content stays on the screen. Check the repo for details.</p><h3 id="updating-data-with-react-query" tabindex="-1"><a class="header-anchor" href="#updating-data-with-react-query"><span>Updating data with <code>react-query</code></span></a></h3><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#updating-data-with-react-query" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><p>We already have the<code>/books/update</code>endpoint for updating a book. How do we tell react-query to re-run whichever queries were attached to that data? The answer is the<code>queryClient.invalidateQueries</code>API. Let’s take a look at the<code>BookEdit</code>component for react-query</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token string">&quot;use client&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FC</span><span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> BookEditProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../types&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useQueryClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-query&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token literal-property property">BookEdit</span><span class="token operator">:</span> <span class="token constant">FC</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">BookEditProps</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> = (props) =&gt; </span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> book <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> titleRef <span class="token operator">=</span> useRef<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HTMLInputElement</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">(null);</span>
<span class="line">  const queryClient = useQueryClient();</span>
<span class="line">  const [saving, startSaving] = useTransition();</span>
<span class="line"></span>
<span class="line">  const saveBook = async (id: number, newTitle: string) =&gt; </span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">startSaving</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;/api/books/update&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">          id<span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">title</span><span class="token operator">:</span> newTitle<span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">await</span> queryClient<span class="token punctuation">.</span><span class="token function">invalidateQueries</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">queryKey</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;books-query&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token plain-text">;</span>
<span class="line"></span>
<span class="line">  return (</span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex gap-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>border rounded border-gray-600 p-1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>titleRef<span class="token punctuation">}</span></span> <span class="token attr-name">defaultValue</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>book<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rounded border border-gray-600 p-1 bg-blue-300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>saving<span class="token punctuation">}</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">saveBook</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>id<span class="token punctuation">,</span> titleRef<span class="token punctuation">.</span>current<span class="token operator">!</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token punctuation">{</span>saving <span class="token operator">?</span> <span class="token string">&quot;Saving...&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Save&quot;</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">  );</span>
<span class="line">};</span>
<span class="line"></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>saveBook</code> function calls out to the same book updating endpoint as before. We then call<code>invalidateQueries</code>with the first part of the query key,<code>books-query</code>. Remember, the actual <code>queryKey</code> we used in our query hook was<code>queryKey: [&quot;books-query&quot;, search]</code>. Calling invalidate queries with the first piece of that key will invalidate everything that’s<em>starts with</em>that key, and will immediately re-fire any of those queries which are still on the page. So if you started out with an empty search, then searched for X, then Y, then Z, and updated a book, this code will clear the cache of all those entries, and then immediately re-run the Z query, and update our UI.</p><p>And it works.</p><h3 id="what-s-the-catch-1" tabindex="-1"><a class="header-anchor" href="#what-s-the-catch-1"><span>What’s the catch?</span></a></h3><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#whats-the-catch-1" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><p>The downside here is that we need two roundtrips from the browser to the server. The first roundtrip updates our book, and when that finishes, we then, from the browser, call<code>invalidateQueries</code>, which causes react-query to send a new network request for the updated data.</p><p>This is a surprisingly small price to pay. Remember, with server actions, calling<code>revalidateTag</code>will cause your entire component tree to re-render, which by extension will re-request all their various data. If you don’t have everything cached (on the server) properly, it’s very easy for this single round trip to take longer than the two round trips react-query needs. I say this from experience. I recently helped a friend / founder build a financial dashboard app. I had react-query set up just like this, and also implemented a server action to update a piece of data. And I had the same data rendered, and updated twice: once in an RSC, and again adjacently in a client component from a<code>useSuspenseQuery</code>hook. I basically fired off a race to see which would update first, certain the server action would, but was<em>shocked</em>to see react-query win. I initially thought I’d done something wrong until I realized what was happening (and hastened to roll back my server action work).</p><hr><h2 id="playing-on-hard-mode" tabindex="-1"><a class="header-anchor" href="#playing-on-hard-mode"><span>Playing on hard mode</span></a></h2><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#playing-on-hard-mode" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><p>There’s one obnoxious imperfection hiding. Let’s find it, and fix it.</p><h3 id="fixing-routing-when-using-react-query" tabindex="-1"><a class="header-anchor" href="#fixing-routing-when-using-react-query"><span>Fixing routing when using <code>react-query</code></span></a></h3><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#fixing-routing-when-using-react-query" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><p>Remember, when we search our books, I’m calling<code>router.push</code>which adds a querystring to the url, which causes<code>useSearchParams()</code>to update, which causes react-query to query new data. Let’s look at the network tab when this happens.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/05/react-query-param-change-waterfall.jpg?resize=1024%2C103&amp;ssl=1" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>before our books endpoint can be called, it looks like we have other things happening. This is the navigation we caused when we called<code>router.push</code>. Next is basically rendering to a new page. The page we’re already on, except with a new querystring. Next is right to assume it needs to do this, but in practice react-query is handling our data. We don’t actually need, or want Next to render this new page; we just want the url to update, so react-query can request new data. If you’re wondering why it navigates to our new, changed page<strong>twice</strong>, well, so am I. Apparently, the RSC identifier is being changed, but I have no idea why. If anyone does, please reach out to me.</p><p>Next has no solutions for this.</p><p>The closest Next can come is to let you use<a href="https://nextjs.org/docs/app/building-your-application/routing/linking-and-navigating#windowhistorypushstate" target="_blank" rel="noopener noreferrer"><code>window.history.pushState</code></a>. That will trigger a client-side url update, similar to what used to be called shallow routing in prior versions of Next. This does in fact work; however, it’s not integrated with transitions for some reason. So when this calls, and our <code>useSuspenseQuery</code> hook updates, our current UI will suspend, and our nearest Suspense boundary will show the fallback. This is awful UI. I’ve reported this bug<a href="https://github.com/vercel/next.js/issues/66016" target="_blank" rel="noopener noreferrer">here (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>vercel/next.js</code>)</a>; hopefully it gets a fix soon.</p><p>Next may not have a solution, but react-query does. If you think about it, we already know what query we need to run, we’re just stuck waiting on Next to finish navigating to an unchanging RSC page. What if we could pre-fetch this new endpoint request, so it’s already running for when Next finally finishes rendering our new (unchanged) page. We can, since react-query has an API just for this. Let’s see how.</p><p>Let’s look at the react-query search form component. In particular, the part which triggers a new navigation:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token function">startTransition</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> search <span class="token operator">=</span> searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;search&quot;</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>
<span class="line">  queryClient<span class="token punctuation">.</span><span class="token function">prefetchQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">queryKey</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;books-query&quot;</span><span class="token punctuation">,</span> search<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function-variable function">queryFn</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">const</span> booksResp <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://localhost:3000/api/books?search=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>search<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">const</span> <span class="token punctuation">{</span> books <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> booksResp<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">return</span> <span class="token punctuation">{</span> books <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>currentPath <span class="token operator">+</span> <span class="token punctuation">(</span>queryString <span class="token operator">?</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> queryString<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The call to<code>queryClient.prefetchQuery</code>.<code>prefetchQuery</code>takes the same options as<code>useSuspenseQuery</code>, and runs that query, now. Later, when Next is finished, and react-query attempts to run the same query, it’s smart enough to see that the request is already in flight, and so just latches onto that active promise, and uses the result.</p><p>Here’s our network chart now:</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/05/react-query-param-change-waterfall-fixed-1.jpg?resize=1024%2C97&amp;ssl=1" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Now nothing is delaying our endpoint request from firing. And since all data loading is happening in react-query, that navigation to our RSC page (or even two navigations) should be very, very fast.</p><h3 id="removing-the-duplication" tabindex="-1"><a class="header-anchor" href="#removing-the-duplication"><span>Removing the duplication</span></a></h3><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#removing-the-duplication" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><p>If you’re thinking the duplication between the prefetch and the query itself is gross and fragile, you’re right. So just move it to a helper function. In a real app you’d probably move this boilerplate to something like this:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">makeBooksSearchQuery</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">search</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">queryKey</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;books-query&quot;</span><span class="token punctuation">,</span> search <span class="token operator">??</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function-variable function">queryFn</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">const</span> booksResp <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://localhost:3000/api/books?search=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>search<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">const</span> <span class="token punctuation">{</span> books <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> booksResp<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">return</span> <span class="token punctuation">{</span> books <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>and then use it:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useSuspenseQuery</span><span class="token punctuation">(</span><span class="token function">makeBooksSearchQuery</span><span class="token punctuation">(</span>search<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>as needed:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">queryClient<span class="token punctuation">.</span><span class="token function">prefetchQuery</span><span class="token punctuation">(</span><span class="token function">makeBooksSearchQuery</span><span class="token punctuation">(</span>search<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>But for this demo I opted for duplication and simplicity.</p><p>Before moving on, let’s take a moment and point out that all of this was only necessary because we had data loading tied to the URL. If we just click a button to set client-side state, and trigger a new data request, none of this would ever be an issue. Next would not route anywhere, and our client-side state update would trigger a new react-query.</p><hr><h2 id="what-about-bundle-size" tabindex="-1"><a class="header-anchor" href="#what-about-bundle-size"><span>What about bundle size?</span></a></h2><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#what-about-bundle-size" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><p>When we did our react-query implementation, we changed our Books component to be a client component by adding the<code>&quot;use client&quot;</code>pragma. If you’re wondering whether that will cause an increase in our bundle size, you’re right. In the RSC version, that component only ever ran on the server. As a client component, it now has to run in both places, which will increase our bundle size a bit.</p><p>Honestly, I wouldn’t worry about it, especially for apps like this, with lots of different data sources that are interactive, and updating. This demo only had a single mutation, but it was just that; a demo. If we were to build this app for real, there’d be many mutation points, each with potentially multiple queries in need of invalidation.</p><p>If you’re curious, it’s technically possible to get the best of both worlds. You<em>could</em>load data in an RSC, and then pass that data to the regular<code>useQuery</code>hook via the<code>initialData</code>prop. You can check<a href="https://tanstack.com/query/v5/docs/framework/react/reference/useQuery" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>the docs</a>for more info, but I honestly don’t think it’s worth it. You’d now need to define your data loading (the fetch call) in two places, or manually build an isomorphic fetch helper function to share between them. And then with actual data loading happening in RSCs, any navigations back to the same page (ie for querystrings) would re-fire those queries, when in reality react-query is already running those query udates client side. To fix<em>that</em>so you’d have to be certain to only ever use<code>window.history.pushState</code>like we talked about. The<code>useQuery</code>hook doesn’t suspend, so you wouldn’t need transitions for those URL changes. That’s good since<code>pushState</code>won’t suspend your content, but now you have to manually track<em>all</em>your loading states; if you have three pieces of data you want loaded before revealing a UI (like we did above) you’d have to manually track and aggregate those three loading states. It would work, but I highly doubt the complexity would be worth it. Just live with the very marginal bundle size increase.</p><p>Just use client components and let react-query remove the complexity with<code>useSuspenseHook</code>.</p><hr><h2 id="wrapping-up" tabindex="-1"><a class="header-anchor" href="#wrapping-up"><span>Wrapping up</span></a></h2><div class="vp-site-info" data-name="arackaf/my-blog"><a class="vp-site-info-navigator no-external-link-icon" title="arackaf/my-blog" href="https://github.com/arackaf/my-blog/blob/feature/rsc-react-query/blog/rsc-and-react-query/index.md#wrapping-up" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://opengraph.githubassets.com/0eb5cb848c13ec632de5a627b2ae42efc22417b6f98d0a03f162f89bc240433f/arackaf/my-blog) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://github.githubassets.com/favicons/favicon-dark.svg" alt loading="lazy" no-view><div class="vp-site-info-name">arackaf/my-blog</div><div class="vp-site-info-desc">my-blog-arackaf.vercel.app</div></div><!----></div><p>This was a<em>long</em>post, but I hope it was a valuable. Next’s app directory is an incredible piece of infrastructure that let’s us request data on the server, render, and even stream component content from that data, all using the single React component model we’re all used to.</p><p>There’s some things to get right, but depending on the type of app you’re building, react-query can simplify things a great deal.</p><hr><h2 id="🆕-update" tabindex="-1"><a class="header-anchor" href="#🆕-update"><span>🆕 Update</span></a></h2><p>Since publishing this post it was brought to my attention that these fetch calls from the server will not include cookie info. This is by design in Next, unfortunately. <a href="https://github.com/vercel/next.js/discussions/60640" target="_blank" rel="noopener noreferrer">Track this issue for updates. (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>vercel/next.js</code>)</a></p><p>Unfortunately those cookies are needed in practice, for your auth info to be passed to your data requests on the backend.</p><p>The best workaround here would be to read your cookies in the root RSC, and then pass them to the Providers component we already have, for setting up our react-query provider,to be placed onto context. This, by itself, would expose our secure, likely httpOnly cookies into our client bundle, which is bad. <a href="https://npmjs.com/package/ssr-only-secrets" target="_blank" rel="noopener noreferrer">Fortunately there’s a library (<i class="vp-icon fa-brands fa-npm" sizing="height"></i><code>ssr-only-secrets</code>)</a> that allows you to encrypt them in a way that they only ever show up on the server.</p><p>You’d read these cookie values in all your client components that use <code>useSuspenseQuery</code>, and pass them along in your fetch calls on the server, and on the client, where those values would be empty, do nothing (and rely on your browser’s fetch to send the cookies along)</p><!-- TODO: add ARTICLE CARD --><a class="vp-card" href="https://chanhi2000.github.io/bookshelf/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.html" target="_blank" style="background:rgba(188,75,52,0.2);"><img class="vp-card-logo" src="https://frontendmasters.com/favicon.ico" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Combining React Server Components with react-query for Easy Data Management</div><hr><div class="vp-card-desc">Server-side component rendering can improve data loading efficiency over client-rendered SPAs. Despite their benefits, such as out-of-order streaming, they have limitations, including slow server action updates and lack of support for client-side interactivity. React Query complements RSC by managing client-side data updates, addressing some of RSC's drawbacks.</div></div></a></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/chanhi2000/articles/edit/main/src/frontendmasters.com/combining-react-server-components-with-react-query-for-easy-data-management.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/bookshelf/programming/js-react/articles/" aria-label="/programming/js-react/articles/"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->/programming/js-react/articles/</div></a><a class="route-link auto-link next" href="/bookshelf/frontendmasters.com/animating-dialog.html" aria-label="Animating the Dialog Element"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Animating the Dialog Element<i class="vp-icon fa-brands fa-css3-alt" sizing="height"></i></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">MIT Licensed | Copyright © 2022-present <a href="https://github.com/chanhi2000">Chan Hee Lee</a></div><div class="vp-copyright">Copyright © 2025 Adam Rackis </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/bookshelf/assets/app-BVguHYKu.js" defer></script>
  </body>
</html>
