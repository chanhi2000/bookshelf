<!doctype html>
<html lang="ko-KR" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.24" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.94" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Apache Cassandra 톺아보기 - 2편","image":["https://en.wikipedia.org/wiki/Apache_Cassandra","https://chanhi2000.github.io/bookshelf/assets/image/meetup.nhncloud.com/60/1.png","https://chanhi2000.github.io/bookshelf/assets/image/meetup.nhncloud.com/60/2.png","https://docs.datastax.com/en/cassandra/2.0/cassandra/dml/dml_write_path_c.html","https://chanhi2000.github.io/bookshelf/assets/image/meetup.nhncloud.com/60/4.png","https://docs.datastax.com/cassandra/2.0/cassandra/dml/dml_about_reads_c.html"],"datePublished":"2015-12-25T00:00:00.000Z","dateModified":null,"author":[]}</script><meta property="og:url" content="https://chanhi2000.github.io/bookshelf/meetup.nhncloud.com/60.html"><meta property="og:site_name" content="📚Bookshelf"><meta property="og:title" content="Apache Cassandra 톺아보기 - 2편"><meta property="og:description" content="Article(s) > Apache Cassandra 톺아보기 - 2편"><meta property="og:type" content="article"><meta property="og:image" content="https://chanhi2000.github.io/bookshelf/assets/image/meetup.nhncloud.com/cassandralogo.png"><meta property="og:locale" content="ko-KR"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:src" content="https://chanhi2000.github.io/bookshelf/assets/image/meetup.nhncloud.com/cassandralogo.png"><meta name="twitter:image:alt" content="Apache Cassandra 톺아보기 - 2편"><meta property="article:tag" content="cql"><meta property="article:tag" content="db"><meta property="article:tag" content="cassandra"><meta property="article:tag" content="meetup.nhncloud.com"><meta property="article:tag" content="blog"><meta property="article:published_time" content="2015-12-25T00:00:00.000Z"><link rel="icon" href="/bookshelf/assets/icon/favicon.svg"><title>Apache Cassandra 톺아보기 - 2편 | 📚Bookshelf</title><meta name="description" content="Article(s) > Apache Cassandra 톺아보기 - 2편">
    <link rel="preload" href="/bookshelf/assets/style-DmRYlEXZ.css" as="style"><link rel="stylesheet" href="/bookshelf/assets/style-DmRYlEXZ.css">
    
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/bookshelf/" aria-label="Take me home"><img class="vp-nav-logo" src="/bookshelf/assets/icon/favicon.svg" alt><!----><span class="vp-site-name hide-in-pad">📚Bookshelf</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/bookshelf/news.html" aria-label><!--[--><i class="vp-icon fas fa-rss" sizing="height"></i><!--]--><!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-keyboard" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/hackingwithswift.com/" aria-label="hackingwithswift.com"><!--[--><img class="vp-icon" src="https://hackingwithswift.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->hackingwithswift.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fcc/" aria-label="freecodecamp.org"><!--[--><img class="vp-icon" src="https://cdn.freecodecamp.org/universal/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->freecodecamp.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kodeco.com/" aria-label="kodeco.com"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->kodeco.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.kotzilla.io/" aria-label="blog.kotzilla.io"><!--[--><img class="vp-icon" src="https://blog.kotzilla.io/hubfs/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.kotzilla.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kt.academy/" aria-label="kt.academy"><!--[--><img class="vp-icon" src="https://kt.academy/logo.png" alt aria-hidden no-view sizing="both"><!--]-->kt.academy<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/droidcon.com/" aria-label="droidcon.com"><!--[--><img class="vp-icon" src="https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png" alt aria-hidden no-view sizing="both"><!--]-->droidcon.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/outcomeschool.com/" aria-label="outcomeschool.com"><!--[--><img class="vp-icon" src="https://outcomeschool.com/static/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->outcomeschool.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/frontendmasters.com/" aria-label="frontendmasters.com"><!--[--><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->frontendmasters.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tricks.com/" aria-label="css-tricks.com"><!--[--><img class="vp-icon" src="https://css-tricks.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->css-tricks.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="smashingmagazine.com"><!--[--><img class="vp-icon" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->smashingmagazine.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.logrocket.com/" aria-label="blog.logrocket.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.logrocket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/realpython.com/" aria-label="realpython.com"><!--[--><img class="vp-icon" src="https://realpython.com/static/favicon.68cbf4197b0c.png" alt aria-hidden no-view sizing="both"><!--]-->realpython.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/digitalocean.com/" aria-label="digitalocean.com"><!--[--><img class="vp-icon" src="https://digitalocean.com/_next/static/media/favicon.594d6067.ico" alt aria-hidden no-view sizing="both"><!--]-->digitalocean.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/antonioleiva.com/" aria-label="antonioleiva.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/antonioleiva.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->antonioleiva.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/johnnyreilly.com/" aria-label="johnnyreilly.com"><!--[--><img class="vp-icon" src="https://johnnyreilly.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->johnnyreilly.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/code-maze.com/" aria-label="code-maze.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/code-maze.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->code-maze.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/milanjovanovic.tech/" aria-label="milanjovanovic.tech"><!--[--><img class="vp-icon" src="https://milanjovanovic.tech/profile_favicon.png" alt aria-hidden no-view sizing="both"><!--]-->milanjovanovic.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/shopify.engineering/" aria-label="shopify.engineering"><!--[--><img class="vp-icon" src="https://cdn.shopify.com/static/shopify-favicon.png" alt aria-hidden no-view sizing="both"><!--]-->shopify.engineering<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devtoolstips.org/" aria-label="devtoolstips.org"><!--[--><img class="vp-icon" src="https://devtoolstips.org/assets/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devtoolstips.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/piccalil.li/" aria-label="piccalil.li"><!--[--><img class="vp-icon" src="https://piccalil.li/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->piccalil.li<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/sitepoint.com/" aria-label="sitepoint.com"><!--[--><img class="vp-icon" src="https://sitepoint.com/favicons/512x512.png" alt aria-hidden no-view sizing="both"><!--]-->sitepoint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/event-driven.io/" aria-label="event-driven.io"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/event-driven.io/favicon.jfif" alt aria-hidden no-view sizing="both"><!--]-->event-driven.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/packagemain.tech/" aria-label="packagemain.tech"><!--[--><img class="vp-icon" src="https://substack-post-media.s3.amazonaws.com/public/images/2ea54e25-eaa6-4630-bfc0-10b8cfdce894/apple-touch-icon-1024x1024.png" alt aria-hidden no-view sizing="both"><!--]-->packagemain.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/gosolve.io/" aria-label="gosolve.io"><!--[--><img class="vp-icon" src="https://gosolve.io/wp-content/uploads/2022/03/cropped-ikona1-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->gosolve.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/towardsdatascience.com/" aria-label="towardsdatascience.com"><!--[--><img class="vp-icon" src="https://cdn-images-1.medium.com/v2/resize:fill:128:128/1*VzTUkfeGymHP4Bvav-T-lA.png" alt aria-hidden no-view sizing="both"><!--]-->towardsdatascience.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/douggregor.net/" aria-label="douggregor.net"><!--[--><i class="vp-icon fas fa-globe" sizing="both"></i><!--]-->douggregor.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/d2.naver.com/" aria-label="d2.naver.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/d2.naver.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->d2.naver.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakao.com/" aria-label="tech.kakao.com"><!--[--><img class="vp-icon" src="https://www.kakaocorp.com/page/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakao.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakaopay.com/" aria-label="tech.kakaopay.com"><!--[--><img class="vp-icon" src="https://tech.kakaopay.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakaopay.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fe-developers.kakaoent.com/" aria-label="fe-developers.kakaoent.com"><!--[--><img class="vp-icon" src="https://fe-developers.kakaoent.com/favicon-32x32.png?v=44803cb16c1e2debd3984cf2e8cb2ded" alt aria-hidden no-view sizing="both"><!--]-->fe-developers.kakaoent.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/yozm.wishket.com/" aria-label="yozm.wishket.com"><!--[--><img class="vp-icon" src="https://yozm.wishket.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->yozm.wishket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/popit.kr/" aria-label="popit.kr"><!--[--><img class="vp-icon" src="https://popit.kr/wp-content/uploads/2016/08/favicon_32x32.png" alt aria-hidden no-view sizing="both"><!--]-->popit.kr<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devkuma.com/" aria-label="devkuma.com"><!--[--><img class="vp-icon" src="https://devkuma.com/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devkuma.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.gangnamunni.com/" aria-label="blog.gangnamunni.com"><!--[--><img class="vp-icon" src="https://blog.gangnamunni.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->blog.gangnamunni.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/codingeverybody.kr/" aria-label="codingeverybody.kr"><!--[--><img class="vp-icon" src="https://codingeverybody.kr/wp-content/uploads/cropped-favicon-origin-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->codingeverybody.kr<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-network-wired" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tecmint.com/" aria-label="tecmint.com"><!--[--><img class="vp-icon" src="https://tecmint.com/wp-content/uploads/2020/07/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tecmint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/docker.com/" aria-label="docker.com"><!--[--><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->docker.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/learnk8s.io/" aria-label="learnk8s.io"><!--[--><img class="vp-icon" src="https://static.learnk8s.io/f7e5160d4744cf05c46161170b5c11c9.svg" alt aria-hidden no-view sizing="both"><!--]-->learnk8s.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/itsfoss.com/" aria-label="itsfoss.com"><!--[--><img class="vp-icon" src="https://itsfoss.com/content/images/size/w256h256/2022/12/android-chrome-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->itsfoss.com<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/chanhi2000/articles" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-appearance-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-appearance-dropdown"><!----></div></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="vp-icon" src="https://meetup.nhncloud.com/resources/img/favicon.ico" alt aria-hidden no-view sizing="both"><span class="vp-sidebar-title">meetup.nhncloud.com</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/38.html" aria-label="em1, p2p1 같은 이더넷 이름을 변경하기"><!--[--><i class="vp-icon fa-brands fa-ubuntu" sizing="both"></i><!--]-->em1, p2p1 같은 이더넷 이름을 변경하기<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/39.html" aria-label="git squash - 여러개의 커밋로그를 하나로 묶기"><!--[--><i class="vp-icon iconfont icon-git" sizing="both"></i><!--]-->git squash - 여러개의 커밋로그를 하나로 묶기<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/43.html" aria-label="Objective-C Generics"><!--[--><i class="vp-icon iconfont icon-objective-c" sizing="both"></i><!--]-->Objective-C Generics<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/44.html" aria-label="Spring Interceptor(혹은 Servlet Filter)에서 POST 방식으로 전달된 JSON 데이터 처리하기"><!--[--><i class="vp-icon iconfont icon-spring" sizing="both"></i><!--]-->Spring Interceptor(혹은 Servlet Filter)에서 POST 방식으로 전달된 JSON 데이터 처리하기<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/45.html" aria-label="git cherry-pick: 다른 브랜치의 일부 커밋만 반영하고 싶을 때"><!--[--><i class="vp-icon iconfont icon-git" sizing="both"></i><!--]-->git cherry-pick: 다른 브랜치의 일부 커밋만 반영하고 싶을 때<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/46.html" aria-label="Spring 3.2.3에서 3.2.14로 업그레이드 정리(스프링 XML 입력에 의한 서비스 거부 취약점 대응)"><!--[--><i class="vp-icon iconfont icon-spring" sizing="both"></i><!--]-->Spring 3.2.3에서 3.2.14로 업그레이드 정리(스프링 XML 입력에 의한 서비스 거부 취약점 대응)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/47.html" aria-label="Java Exception 생성 비용은 비싸다."><!--[--><i class="vp-icon iconfont icon-spring" sizing="both"></i><!--]-->Java Exception 생성 비용은 비싸다.<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/53.html" aria-label="리눅스 서버의 TCP 네트워크 성능을 결정짓는 커널 파라미터 이야기 - 1편"><!--[--><i class="vp-icon iconfont icon-shell" sizing="both"></i><!--]-->리눅스 서버의 TCP 네트워크 성능을 결정짓는 커널 파라미터 이야기 - 1편<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/54.html" aria-label="리눅스 서버의 TCP 네트워크 성능을 결정짓는 커널 파라미터 이야기 - 2편"><!--[--><i class="vp-icon iconfont icon-shell" sizing="both"></i><!--]-->리눅스 서버의 TCP 네트워크 성능을 결정짓는 커널 파라미터 이야기 - 2편<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/55.html" aria-label="리눅스 서버의 TCP 네트워크 성능을 결정짓는 커널 파라미터 이야기 - 3편"><!--[--><i class="vp-icon iconfont icon-shell" sizing="both"></i><!--]-->리눅스 서버의 TCP 네트워크 성능을 결정짓는 커널 파라미터 이야기 - 3편<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/58.html" aria-label="Apache Cassandra 톺아보기 - 1편"><!--[--><i class="vp-icon iconfont icon-apachecassandra" sizing="both"></i><!--]-->Apache Cassandra 톺아보기 - 1편<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/bookshelf/meetup.nhncloud.com/60.html" aria-label="Apache Cassandra 톺아보기 - 2편"><!--[--><i class="vp-icon iconfont icon-apachecassandra" sizing="both"></i><!--]-->Apache Cassandra 톺아보기 - 2편<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/65.html" aria-label="Apache Cassandra 톺아보기 - 3편"><!--[--><i class="vp-icon iconfont icon-apachecassandra" sizing="both"></i><!--]-->Apache Cassandra 톺아보기 - 3편<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/73.html" aria-label="ES6의 제너레이터를 사용한 비동기 프로그래밍"><!--[--><i class="vp-icon fa-brands fa-node" sizing="both"></i><!--]-->ES6의 제너레이터를 사용한 비동기 프로그래밍<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/80.html" aria-label="CodeSnippet과 함께하는 JavaScript 프로그래밍"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->CodeSnippet과 함께하는 JavaScript 프로그래밍<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/85.html" aria-label="지금 바로 시작하는 ES6"><!--[--><i class="vp-icon fa-brands fa-node" sizing="both"></i><!--]-->지금 바로 시작하는 ES6<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/251.html" aria-label="캐시 성능 향상기 (Improving Cache Speed at Scale)"><!--[--><i class="vp-icon fa-brands fa-js" sizing="both"></i><!--]-->캐시 성능 향상기 (Improving Cache Speed at Scale)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/283.html" aria-label="VSCode의 Jupyter Extension을 사용하여 간단하게 Python으로 데이터 시각화하기"><!--[--><i class="vp-icon iconfont icon-vscode" sizing="both"></i><!--]-->VSCode의 Jupyter Extension을 사용하여 간단하게 Python으로 데이터 시각화하기<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/293.html" aria-label="Chromium이 발표한 RenderingNG가 무엇인가?"><!--[--><i class="vp-icon fa-brands fa-chrome" sizing="both"></i><!--]-->Chromium이 발표한 RenderingNG가 무엇인가?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/311.html" aria-label="가볍게 살펴보는 새로운 한/글 파일 포맷 HWPX"><!--[--><i class="vp-icon fa-brands fa-html5" sizing="both"></i><!--]-->가볍게 살펴보는 새로운 한/글 파일 포맷 HWPX<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/371.html" aria-label="PLT Hook 체크를 위한 Android so 파일 파싱"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->PLT Hook 체크를 위한 Android so 파일 파싱<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/374.html" aria-label="Java Reactor onErrorContinue 이모저모"><!--[--><i class="vp-icon iconfont icon-springboot" sizing="both"></i><!--]-->Java Reactor onErrorContinue 이모저모<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/375.html" aria-label="이상 탐지 4부-딥 러닝으로 이상 탐지하기"><!--[--><i class="vp-icon fas fa-brain" sizing="both"></i><!--]-->이상 탐지 4부-딥 러닝으로 이상 탐지하기<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/376.html" aria-label="Firmware Command Injection을 알아보자!"><!--[--><i class="vp-icon iconfont icon-c" sizing="both"></i><!--]-->Firmware Command Injection을 알아보자!<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/377.html" aria-label="메시징플랫폼개발팀의 브랜칭 전략은? Release Flow!"><!--[--><i class="vp-icon iconfont icon-git" sizing="both"></i><!--]-->메시징플랫폼개발팀의 브랜칭 전략은? Release Flow!<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/378.html" aria-label="디스어셈블 프레임워크 Capstone-engine 활용하기"><!--[--><i class="vp-icon fa-brands fa-python" sizing="both"></i><!--]-->디스어셈블 프레임워크 Capstone-engine 활용하기<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/379.html" aria-label="Redis Cluster를 사용할 때 Spring Boot와 Lettuce client를 설정해 드립니다"><!--[--><i class="vp-icon iconfont icon-springboot" sizing="both"></i><!--]-->Redis Cluster를 사용할 때 Spring Boot와 Lettuce client를 설정해 드립니다<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/meetup.nhncloud.com/381.html" aria-label="보이스피싱 애플리케이션 분석 1부"><!--[--><i class="vp-icon fas fa-shield-halved" sizing="both"></i><!--]-->보이스피싱 애플리케이션 분석 1부<!----></a></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><div class="page-cover"><img src="/bookshelf/assets/image/meetup.nhncloud.com/cassandralogo.png" alt no-view></div><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon iconfont icon-apachecassandra" sizing="height"></i>Apache Cassandra 톺아보기 - 2편</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">15. 12. 25.</span><meta property="datePublished" content="2015-12-25T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 2 min</span><meta property="timeRequired" content="PT2M"></span><span class="page-category-info" aria-label="Category🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color1" role>Cassandra</span><span class="page-category-item color8" role>Article(s)</span><!--]--><meta property="articleSection" content="Cassandra,Article(s)"></span><span class="page-tag-info" aria-label="Tag🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8" role>blog</span><span class="page-tag-item color5" role>meetup.nhncloud.com</span><span class="page-tag-item color0" role>cassandra</span><span class="page-tag-item color5" role>db</span><span class="page-tag-item color5" role>cql</span><!--]--><meta property="keywords" content="blog,meetup.nhncloud.com,cassandra,db,cql"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="frontmatter-title-관련" tabindex="-1"><a class="header-anchor" href="#frontmatter-title-관련"><span>Apache Cassandra 톺아보기 - 2편 관련</span></a></h1><a class="route-link vp-card" href="/bookshelf/data-science/cassandra/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="https://chanhi2000.github.io/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Cassandra > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><nav class="table-of-contents"><ul><li><a aria-current="page" href="/bookshelf/meetup.nhncloud.com/60.html#_1-들어가기에-앞서" class="router-link-active router-link-exact-active">1. 들어가기에 앞서.</a></li><li><a aria-current="page" href="/bookshelf/meetup.nhncloud.com/60.html#_2-cassandra의-데이터-분산" class="router-link-active router-link-exact-active">2. Cassandra의 데이터 분산</a></li><li><a aria-current="page" href="/bookshelf/meetup.nhncloud.com/60.html#_3-cassandra와-read-write" class="router-link-active router-link-exact-active">3. Cassandra와 Read/Write.</a></li><li><a aria-current="page" href="/bookshelf/meetup.nhncloud.com/60.html#_4-2편을-마치며" class="router-link-active router-link-exact-active">4. 2편을 마치며.</a></li></ul></nav><hr><div class="vp-site-info" data-name="Apache Cassandra 톺아보기 - 2편 | NHN Cloud Meetup"><a class="vp-site-info-navigator no-external-link-icon" title="Apache Cassandra 톺아보기 - 2편 | NHN Cloud Meetup" href="https://meetup.nhncloud.com/posts/60" target="_blank"></a><div class="vp-site-info-preview" style="background:url(/bookshelf/assets/image/meetup.nhncloud.com/cassandralogo.png) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://meetup.nhncloud.com/resources/img/favicon.ico" alt loading="lazy" no-view><div class="vp-site-info-name">Apache Cassandra 톺아보기 - 2편 | NHN Cloud Meetup</div><div class="vp-site-info-desc">Apache Cassandra 톺아보기 - 2편</div></div><!----></div><figure><img src="/bookshelf/assets/image/meetup.nhncloud.com/cassandralogo.png" alt="출저 : &lt;VPIcon icon=&quot;fa-brands fa-wikipedia-w&quot;/&gt;Wikipedia" tabindex="0" loading="lazy"><figcaption>출저 : <a href="https://en.wikipedia.org/wiki/Apache_Cassandra" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-wikipedia-w" sizing="height"></i>Wikipedia</a></figcaption></figure><h2 id="_1-들어가기에-앞서" tabindex="-1"><a class="header-anchor" href="#_1-들어가기에-앞서"><span>1. 들어가기에 앞서.</span></a></h2><p>안녕하세요. NHN엔터테인먼트 엄세진입니다.</p><p>지난번 Cassandra 톺아보기 1편을 올린 뒤로 생각보다 많은 분들의 좋은 반응에 힘을 내어 2편을 작성하게 되었습니다. 사실 1편에서는 처음 Cassandra를 접하면서 저를 혼란스럽게 했던 정보들을 중심적으로 정리한 글에 가까워서, 인터넷을 통하여 검색하면 쉽게 찾아볼 수 있는 내용이라거나 이해를 돕기 위한 자세한 예제들은 분량상 생략한 부분이 있었습니다. 방대한 Cassandra의 내용을 모두 담을 수는 없기 때문에 이번 문서에서도 최대한 중요하거나 혹은 찾기 힘든 내용들로 간추렸다는 점을 유념해주시고, Cassandra를 자세히 알고 싶으신 분들은 Datastax의 공식 문서나 외국 도서를 읽으시는 편을 거듭 추천해 드립니다.</p><hr><h2 id="_2-cassandra의-데이터-분산" tabindex="-1"><a class="header-anchor" href="#_2-cassandra의-데이터-분산"><span>2. Cassandra의 데이터 분산</span></a></h2><p>지난 1편을 통하여 우리는 Cassandra가 여러 개의 노드로 구성된 Ring 형태를 띄고 있다는 것과 각 노드는 각각의 hash token 범위를 담당하고 있으며, partition key로 지정한 column의 value들로 Row key를 결정하고, 이를 hashing한 token을 기준으로 데이터를 노드별로 분산하여 저장한다는 사실을 정리한 바 있습니다. 게다가 Virtual Node가 무슨 용어인지도 대충 알았으니, 이제는 얼추 어떠한 원리로 데이터를 분산하는지 대략은 알 것 같다는 생각이 듭니다. 그렇다면 이제 자연스럽게 Read/Write에 따른 Cassandra의 동작 과정을 확인해야겠지만, 그 전에 Cassandra의 데이터 분산 방식에 대해 아주 살짝쿵 좀 더 자세히 알아보겠습니다.</p><p>왜냐구요? 그냥 넘어가기엔 생각보다 중요하기 때문입니다.</p><p>사실 지금까지 Cassandra에 대해 정리한 내용에는 나름 중요한 몇 가지 사실들이 빠져있습니다. 그중에서도 가장 중요한 것은 바로 Row key를 token으로 어떻게 변환하느냐는 점입니다. Cassandra에서는 이렇듯 Row key를 token으로 변환해주는 모듈을 Partitioner라고 부릅니다. conf/cassandra.yaml의 partitioner 항목을 보면 해당 Cassandra가 어떤 Partitioner를 사용하는지 확인 할 수 있으며, Cassandra는 기본적으로 RandomPartitioner, Murmur3Partitioner, ByteOrderedPartitioner라는 이름의 세 가지 Partitioner를 제공합니다. (물론 사용자가 org.apache.cassandra.dht.IPartitioner 를 상속하여 원하는 Partitioner를 구현 할 수도 있지만 이를 추천하지는 않습니다. 어렵기도 하고 성능을 보장하기도 힘들기 때문입니다. 물론, 운영상의 문제도 같이 발생 할 수 있겠죠.)</p><p>RandomPartitioner는 Row key를 MD5로 hashing하여 token을 생성합니다. Murmur3Partitioner는 Murmur5로 Hashing하여 token을 생성하죠. 하지만 ByteOrderedPartitioner(이하 BOP)는 조금 다릅니다. BOP는 Row key를 16진수 형태로 변환하여 이 값을 token으로 사용합니다. 즉, BOP 변환된 token은 문자 순서로 정렬되어 각 노드에 분산된다는 이야기가 됩니다. 만약 BOP를 쓰게 된다면, Row key들이 항상 문자 순서대로 정렬되어있으니 대용량 데이터를 특별한 가공 없이 그대로 range query를 할 수 있는 등, 여러 가지로 편리하게 사용 할 수 있겠죠. 하지만 BOP는 대표적인 Cassandra의 Anti-Pattern 중에 하나입니다. 왜일까요? 이유는 BOP를 사용할 경우 Hotspot이 발생할 확률이 매우 높기 때문입니다.</p><figure><img src="/bookshelf/assets/image/meetup.nhncloud.com/60/1.png" alt="ByteOrderedPartitioner를 사용 시 Hotspot 발생의 예. A~G로 시작하는 Row key가 과도하게 많을 경우 노드 하나에 비대한 데이터가 쌓이게 된다." tabindex="0" loading="lazy"><figcaption>ByteOrderedPartitioner를 사용 시 Hotspot 발생의 예. A~G로 시작하는 Row key가 과도하게 많을 경우 노드 하나에 비대한 데이터가 쌓이게 된다.</figcaption></figure><p>BOP를 사용하여 Row key 문자 순서대로 각 노드별로 데이터를 분산하게 된다면, 모든 노드에 데이터를 균일하게 분산하기 위해서는 데이터의 분산 기준을 담당하는 Row key 자체가 모든 문자열에 대해서 균일하게 분포해야 합니다. 하지만 현실은 그렇지 않죠. BOP를 사용 할 경우, 특정 문자로 밀집되어있는 Row key들을 저장하는 노드가 자연스럽게 Hotspot이 되어버립니다. 더구나 이는 단순히 노드를 늘리거나 줄인다고 해서 해결되는 일이 아닙니다. 노드를 늘렸더니 오히려 전혀 사용하지 않는 노드가 다수 생길 수도 있고, 노드를 줄였더니 더 심각한 Hotspot이 생겨버릴 수도 있기 때문이죠. 이는 BOP의 경우 분산의 정도가 전적으로 Row key의 분포에 달려있기 때문입니다.</p><p>이러한 이유로 Cassandra는 Murmur3Partitioner를 default Partitioner로 사용하고 있습니다. MurMur3 hash function을 이용함으로 인해서 모든 데이터를 비교적 균일하게 모든 노드에 분산 할 수 있는 것이죠. 물론 이 역시 단점은 존재합니다. 문자열이 아닌 Hash 값을 기준으로 정렬하여 각 노드에 저장되므로, Row key의 문자열로 정렬된 데이터가 필요 할 경우엔 사용자는 모든 데이터를 가져온 다음 Application Layer에서 직접 데이터를 가공하여 정렬하여야 합니다. 가령 엄청난 양의 데이터가 분산되어 저장되어있는데, Row key를 기준으로 데이터를 paging하는 등의 작업은 불가능한 일인 셈이죠. 그 많은 데이터를 모두 가져와서 직접 정렬해야 최종적으로 사용자가 원하는 위치의 데이터 집합을 뽑아낼 수 있을 테니까요. 따라서 사용자는 자신의 서비스가 사용 할 데이터의 스키마를 작성 할 때, 처음부터 이를 고려하여 신중히 결정하여야 합니다.</p><p>지금까지 Partitioner에 대해 대략적으로 짚어 보았으니 이번엔 Cassandra의 Data Consistency와 Replication에 대해 간단히 알아볼 차례입니다.</p><p>Cassandra는 기본적으로 CQL을 통해 쿼리 시점에 Read와 Wirte에 따른 다양한 Consistency Level을 통해서 몇 개의 Replication을 통해 어느 정도 수준의 데이터 일관성을 확보 할 것인지 선택 할 수 있습니다. 또한, 처음 Keyspace 생성 할 때 Replication의 배치 전략과 그 전략에 맞는 Replication 복제 개수, 위치 위치를 결정 할 수 있죠. 그리고 이러한 기능을 지원하기 위해서 conf/cassandra.yaml의 endpoin_snitch 항목에 snitch의 종류를 세팅하게 됩니다. 그러면 snitch란 뭘까요? 쉽게 말하자면, 데이터센터가 어떻게 구성되어있는지, 장비가 설치된 렉이 어떻게 나뉘어져 있는지에 대한 topology를 Cassandra에게 알려주기 위한 옵션입니다.</p><p>Cassandra에서 제공하는 snitch의 종류는 매우 다양합니다. snitch는 단순히 1개의 Data Center를 가정한 것도 있고, 다수의 Data Center에 다양한 Rack 배치까지 고려한 것도 있으며, 심지어 Cloud Stack이나 Google Cloud와 같은 Cloud 서비스에 특화된 snitch도 존재합니다. 이러한 snitch를 바탕으로 Cassandra는 사용자가 정의한 스키마에 따라서 어느 Data Center의 어느 Rack에다가 각각 몇 개의 Replication Data를 나누어 저장 할 것인지 등을 결정하는 것이죠. 그리고 이렇게 구성된 Cassandra에 사용자가 데이터를 CRUD하고자 한다면, 사용자가 해당 쿼리와 함께 지정한 Consistency Level을 통하여 데이터를 처리하게 됩니다.</p><p>Read/Write에 따른 Consistency Level의 종류와 특징, 다양한 snitch들 각각의 자세한 설명들은 분량상 이 글에서 모두 다루기 힘들기 때문에 Datastax의 공식문서를 참조하시길 부탁드립니다.</p><a class="vp-card" href="https://docs.datastax.com/en/cassandra/3.0/cassandra/operations/opsSwitchSnitch.html" target="_blank" style="background:rgba(6,122,151,0.2);"><img class="vp-card-logo" src="https://docs.datastax.com/en/archived/cassandra/3.0/oxygen-webhelp/assets/images/favicon.ico" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Switching snitches</div><hr><div class="vp-card-desc">Steps for switching snitches.</div></div></a><a class="vp-card" href="https://docs.datastax.com/en/cassandra/3.0/cassandra/dml/dmlDataConsistencyTOC.html" target="_blank" style="background:rgba(6,122,151,0.2);"><img class="vp-card-logo" src="https://docs.datastax.com/en/archived/cassandra/3.0/oxygen-webhelp/assets/images/favicon.ico" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Data consistency</div><hr><div class="vp-card-desc">Topics about how up-to-date and synchronized a row of data is on all replicas.</div></div></a><hr><h2 id="_3-cassandra와-read-write" tabindex="-1"><a class="header-anchor" href="#_3-cassandra와-read-write"><span>3. Cassandra와 Read/Write.</span></a></h2><p>이제는 데이터의 분산이라는 관점에서 Cassandra를 어느 정도 살펴보았으니 이제 실제로 Cassandra가 데이터를 읽고 쓸 때 일어나는 동작에 대해서 살펴볼 차례입니다. 먼저 Cassandra에 데이터를 Write하는 상황을 가정해봅시다.</p><figure><img src="/bookshelf/assets/image/meetup.nhncloud.com/60/2.png" alt="Cassandra Data Write" tabindex="0" loading="lazy"><figcaption>Cassandra Data Write</figcaption></figure><p>사용자는 Cassandra의 어느 노드들 중 하나에 Write 요청을 합니다. Cassandra에서는 요청을 받게 되는 최초의 노드를 Coordinator 노드라고 부릅니다. 그러면, 이 Coordinator는 해당 데이터의 Row key를 hashing하여 어느 노드들에 데이터를 Write해야 하는지 확인합니다. 그런 뒤에 해당 쿼리에 지정된 Consistency Level에 따라 몇 개의 노드에 Write해야하는지 참고하여 현재의 데이터를 Write해야 할 노드들의 status가 정상인지를 확인합니다. 이때, 특정 노드의 status가 정상이 아니라면 Consistency Level에 따라 &quot;hint hand off&quot;라는 로컬 임시 저장공간에 Write 할 데이터를 저장합니다. 만약 나중에 비정상 상태의 노드가 정상으로 돌아오면 Coordinator 노드가 data를 Write해주기 위해서이죠. 이때 주의 할 점은 hint hand off가 항상 모든 데이터를 Consistency를 보장해주는 것은 아니라는 점입니다. 비록 데이터의 복원에 큰 도움이 되는 기능일지라도 기본적으로 hint hand off는 데이터를 임시로 저장하는 공간이기 입니다.(만약 hint hand off에 데이터가 저장한 뒤 해당 Coordinator 노드가 죽어버리는 경우를 상상해보시길 바랍니다.)</p><p>어쨌거나 hint hand off에 데이터를 백업했다면, Coordinator 노드는 Cassandra의 topology를 확인하여 어느 데이터 센터의 어느 렉에 있는 노드에 먼저 접근 할 것인지 결정하여 데이터와 함께 Write를 요청합니다.</p><figure><img src="/bookshelf/assets/image/meetup.nhncloud.com/60/3.png" alt="Write Data Storage Layer. &lt;br/&gt;출처 : &lt;VPIcon icon=&quot;fas fa-globe&quot;/&gt;Datastax" tabindex="0" loading="lazy"><figcaption>Write Data Storage Layer. <br>출처 : <a href="https://docs.datastax.com/en/cassandra/2.0/cassandra/dml/dml_write_path_c.html" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Datastax</a></figcaption></figure><p>실제로 데이터 저장하게 될 노드는 Write 요청이 오면 혹시 모를 장애에 대비하여, &quot;CommitLog&quot;라고 불리는 로컬 디스크의 파일에 기록을 남깁니다. 그런 뒤에 &quot;MemTable&quot;이라는 이름의 메모리 저장공간에 데이터를 Write한 뒤, 성공 메시지를 돌려줌으로써 Write 요청에 대한 동작은 마무리됩니다. 그리고 해당 노드는 MemTable에 데이터가 충분히 쌓이면 디스크 버전의 MemTable인 &quot;SSTable&quot;에 데이터를 Flush합니다. 이때, SSTable은 immutable하며, sequential하다는 특징을 가지고 있으며 Cassandra는 이러한 다수의 SSTable을 Compaction하여 데이터를 관리합니다.</p><p>그러면 Read의 처리과정은 어떨까요? 알아봅시다.</p><figure><img src="/bookshelf/assets/image/meetup.nhncloud.com/60/4.png" alt="Cassandra Data Read" tabindex="0" loading="lazy"><figcaption>Cassandra Data Read</figcaption></figure><p>사용자는 Cassandra의 어느 노드들 중 하나에 Read 요청을 합니다. Coordinator 노드는 해당 요청의 Row key를 hashing하여 접근해야 할 노드의 위치를 파악한 뒤, Consistency Level을 체크하여 몇 개의 Replication을 확인해야 할지 결정합니다. 그런 뒤에 Coordinator 노드는 데이터가 있는 가장 가까운 노드에는 Data Request를 요청하고, 그다음 가까운 노드들에는 Data Digest Request를 요청합니다. Coordinator 노드는 이렇게 가져온 Data와 Data Digest를 확인하여 데이터 정보가 일치하지 않으면 일치하지 않는 데이터들의 노드들로부터 Full Data를 가져와서 그중 가장 최신 데이터를 사용자에게 돌려줍니다. 그리고 뒤엔 돌려준 최신 데이터를 기준으로 나머지 노드들의 데이터들을 수리합니다.</p><p>그렇다면 실제 데이터가 저장된 노드 안에서는 어떤 과정으로 동작할까요?</p><figure><img src="/bookshelf/assets/image/meetup.nhncloud.com/60/5.png" alt="Read Data Storage Layer. 그림의 Partition summary란 Cassandra 구동 시 메모리에 올려놓은 index의 요약본을 의미한다. &lt;br/&gt;출처 : &lt;VPIcon icon=&quot;fas fa-globe&quot;/&gt;Datastax" tabindex="0" loading="lazy"><figcaption>Read Data Storage Layer. 그림의 Partition summary란 Cassandra 구동 시 메모리에 올려놓은 index의 요약본을 의미한다. <br>출처 : <a href="https://docs.datastax.com/cassandra/2.0/cassandra/dml/dml_about_reads_c.html" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Datastax</a></figcaption></figure><p>실제 데이터가 저장되어있는 노드에 데이터 요청이 오게 되면, 먼저 MemTable에 저장된 데이터들을 확인합니다. 이때, 데이터가 있으면 좋지만 없다면 이미 Flushing된 데이터들이 저장되어있는 SSTable들을 확인해야겠죠. 그렇다고 당장 SSTable에 접근하는 것은 아닙니다. 각각의 SSTable을 확인 할 때, 성능 향상을 위해서 해당 SSTable과 짝지어서 구성되어 있는 Bloom Fileter와 Index라는 것을 먼저 확인하는 것이죠. (여기서 Index란 추후 소개 할 Secondery Index와는 다른 용어입니다.)</p><p>Bloom Filter란 긍정오류는 발생 할 수 있지만, 부정오류는 발생하지 않는 확률적인 자료구조입니다. 쉽게 말해서, 없는 걸 있다고 거짓말 할 수는 있지만, 있는 걸 없다고 거짓말 하지는 않는다는 것이죠. I/O가 일어나기 전에 일차적으로 메모리에 저장되어있는 Bloom Filter를 통하여 짝꿍 SSTable에 데이터가 존재하는지를 확인했다면, 그 다음엔 역시 메모리에 저장되어있는 Summery Index를 통해 디스크에 저장되어있는 원본 Index를 확인하여 SSTable 내 Data 위치에 대한 offset을 알게됩니다. 이 과정을 모두 거친 뒤에야 비로소 해당 SSTable에서 원하는 데이터를 가져와 돌려줄 수 있는 것이죠. 이러한 데이터의 검색 과정은 가장 최근에 생성된 SSTable부터 차례대로 이루어지게 됩니다.</p><p>글이 길어졌지만 아직 짚고 넘어가야 할 점이 남아 있습니다. Delete에 대한 이야기입니다.</p><p>Cassandra는 Delete를 바로 수행하지 않습니다. 모든 데이터에는 Tombstone이라는 marker가 존재하며, 특정 데이터의 Delete 요청이 일어날 경우 이 Tombstone에 마킹을 한 뒤에 주기적인 Garbage Collection이나 SSTable의 Compaction 등의 이벤트가 발생 할 때 비로소 데이터를 정말로 삭제하는 것이죠. 이러한 Tombstone은 꽤나 중요한 개념이기 때문에 어떠한 문제를 일으킬 수 있는지에 대해서 Cassandra의 안티패턴과 관련하여 나중에 한 번 더 다루겠습니다.</p><p>이렇게 Cassandra의 데이터의 처리 과정을 정리하고 보니 한가지 빠진 부분이 있는 것 같습니다. 바로 Update입니다. 하지만 앞서 많은 내용들을 이미 설명하였기 때문에 Update는 몇 가지 중요한 부분만 살짝 짚고 넘어가면 될 것 같습니다. Cassandra의 Update는 내부적으로 Delete/Write로 구현되어있기 때문입니다. 앞서 말했듯이 데이터가 저장되어 있는 SSTable은 immutable하므로 Delete를 통해 Tombstone에 마킹을 하게 되고, Update 해야 할 새로운 데이터는 다른 곳에 쓰여지게 됩니다.</p><hr><h2 id="_4-2편을-마치며" tabindex="-1"><a class="header-anchor" href="#_4-2편을-마치며"><span>4. 2편을 마치며.</span></a></h2><p>어쩌다 보니 2편도 마찬가지로 내용이 많이 길어지게 되어 죄송한 마음입니다. 최대한 간추린다고 간추렸는데 쉽지가 않았습니다. 이번 편에서 미처 다루지 못한 Cassandra가 제공하는 기능들, 자주 쓰이거나 써서는 안 되는 패턴 등의 내용은 마지막 <a class="route-link" href="/bookshelf/meetup.nhncloud.com/65.html">3편</a>에서 마무리하겠습니다.</p><p>감사합니다.</p></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/chanhi2000/articles/edit/main/src/meetup.nhncloud.com/60.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/bookshelf/data-science/cassandra/articles/" aria-label="/data-science/cassandra/articles/"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->/data-science/cassandra/articles/</div></a><a class="route-link auto-link next" href="/bookshelf/meetup.nhncloud.com/65.html" aria-label="Apache Cassandra 톺아보기 - 3편"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Apache Cassandra 톺아보기 - 3편<i class="vp-icon iconfont icon-apachecassandra" sizing="height"></i></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">MIT Licensed | Copyright © 2022-present <a href="https://github.com/chanhi2000">Chan Hee Lee</a></div><!----></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/bookshelf/assets/app-BVguHYKu.js" defer></script>
  </body>
</html>
