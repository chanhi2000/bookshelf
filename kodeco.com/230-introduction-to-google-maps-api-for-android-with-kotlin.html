<!doctype html>
<html lang="ko-KR" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.99" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Introduction to Google Maps API for Android with Kotlin","image":["https://koenig-media.raywenderlich.com/uploads/2018/01/welcome.png","https://koenig-media.raywenderlich.com/uploads/2018/01/new_project.png","https://koenig-media.raywenderlich.com/uploads/2018/01/target.png","https://koenig-media.raywenderlich.com/uploads/2018/01/add_activity.png","https://koenig-media.raywenderlich.com/uploads/2018/01/configure_activity.png","https://koenig-media.raywenderlich.com/uploads/2016/09/mapping_start_project_6_run_1.png =240x","https://koenig-media.raywenderlich.com/uploads/2018/01/api_key.png","https://koenig-media.raywenderlich.com/uploads/2016/09/mapping_start_project_8_create_api_2.png","https://koenig-media.raywenderlich.com/uploads/2016/09/mapping_start_project_9_create_api_3.png","https://koenig-media.raywenderlich.com/uploads/2018/01/api_key2.png","https://koenig-media.raywenderlich.com/uploads/2018/01/first_map.png =240x","https://koenig-media.raywenderlich.com/uploads/2018/01/enable_google_places.png","https://koenig-media.raywenderlich.com/uploads/2018/01/imports.png","https://koenig-media.raywenderlich.com/uploads/2018/01/implement_members.png","https://koenig-media.raywenderlich.com/uploads/2018/01/implement_members.png","https://koenig-media.raywenderlich.com/uploads/2018/01/sydney.png =240x","https://koenig-media.raywenderlich.com/uploads/2018/01/nyc1.png =240x","https://koenig-media.raywenderlich.com/uploads/2018/01/nyc2.png =240x","https://koenig-media.raywenderlich.com/uploads/2018/01/allow.png =240x","https://koenig-media.raywenderlich.com/uploads/2018/01/boston.png =240x","https://koenig-media.raywenderlich.com/uploads/2016/11/Screen-Shot-2016-11-24-at-9.09.43-AM.png =240x","https://koenig-media.raywenderlich.com/uploads/2016/09/Screen-Shot-2016-09-20-at-10.40.22-AM.png","https://koenig-media.raywenderlich.com/uploads/2018/01/boston_marker.png =240x","https://koenig-media.raywenderlich.com/uploads/2018/01/mipmap.png","https://koenig-media.raywenderlich.com/uploads/2018/01/custom_marker.png","https://koenig-media.raywenderlich.com/uploads/2018/01/green_marker.png","https://koenig-media.raywenderlich.com/uploads/2018/01/terrain.png =240x","https://koenig-media.raywenderlich.com/uploads/2018/01/satellite.png =240x","https://koenig-media.raywenderlich.com/uploads/2018/01/hybrid.png =240x","https://koenig-media.raywenderlich.com/uploads/2018/01/address.png =240x","https://koenig-media.raywenderlich.com/uploads/2018/01/location.png =240x","https://koenig-media.raywenderlich.com/uploads/2018/01/moving.png =240x","https://koenig-media.raywenderlich.com/uploads/2018/01/harvard.gif =240x","https://koenig-media.raywenderlich.com/uploads/2018/01/location.png =240x","https://koenig-media.raywenderlich.com/uploads/2018/01/moving.png =240x","https://koenig-media.raywenderlich.com/uploads/2018/01/harvard.gif =240x"],"datePublished":"2018-01-17T00:00:00.000Z","dateModified":null,"author":[]}</script><meta property="og:url" content="https://chanhi2000.github.io/bookshelf/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html"><meta property="og:site_name" content="ðŸ“šBookshelf"><meta property="og:title" content="Introduction to Google Maps API for Android with Kotlin"><meta property="og:description" content="Article(s) > Introduction to Google Maps API for Android with Kotlin"><meta property="og:type" content="article"><meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2018/01/Mapping-kotlin-twitter.png"><meta property="og:locale" content="ko-KR"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:src" content="https://koenig-media.raywenderlich.com/uploads/2018/01/Mapping-kotlin-twitter.png"><meta name="twitter:image:alt" content="Introduction to Google Maps API for Android with Kotlin"><meta property="article:tag" content="gradle"><meta property="article:tag" content="android"><meta property="article:tag" content="kotiln"><meta property="article:tag" content="java"><meta property="article:tag" content="kodeco.com"><meta property="article:tag" content="blog"><meta property="article:published_time" content="2018-01-17T00:00:00.000Z"><link rel="icon" href="/bookshelf/assets/icon/favicon.svg"><title>Introduction to Google Maps API for Android with Kotlin | ðŸ“šBookshelf</title><meta name="description" content="Article(s) > Introduction to Google Maps API for Android with Kotlin">
    <link rel="preload" href="/bookshelf/assets/style-Bhb-QcDa.css" as="style"><link rel="stylesheet" href="/bookshelf/assets/style-Bhb-QcDa.css">
    
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/bookshelf/" aria-label="Take me home"><img class="vp-nav-logo" src="/bookshelf/assets/icon/favicon.svg" alt><!----><span class="vp-site-name hide-in-pad">ðŸ“šBookshelf</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/bookshelf/news.html" aria-label><!--[--><i class="vp-icon fas fa-rss" sizing="height"></i><!--]--><!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-keyboard" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/hackingwithswift.com/" aria-label="hackingwithswift.com"><!--[--><img class="vp-icon" src="https://hackingwithswift.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->hackingwithswift.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fcc/" aria-label="freecodecamp.org"><!--[--><img class="vp-icon" src="https://cdn.freecodecamp.org/universal/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->freecodecamp.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/bookshelf/kodeco.com/" aria-label="kodeco.com"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->kodeco.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.kotzilla.io/" aria-label="blog.kotzilla.io"><!--[--><img class="vp-icon" src="https://blog.kotzilla.io/hubfs/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.kotzilla.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kt.academy/" aria-label="kt.academy"><!--[--><img class="vp-icon" src="https://kt.academy/logo.png" alt aria-hidden no-view sizing="both"><!--]-->kt.academy<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/droidcon.com/" aria-label="droidcon.com"><!--[--><img class="vp-icon" src="https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png" alt aria-hidden no-view sizing="both"><!--]-->droidcon.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/outcomeschool.com/" aria-label="outcomeschool.com"><!--[--><img class="vp-icon" src="https://outcomeschool.com/static/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->outcomeschool.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/frontendmasters.com/" aria-label="frontendmasters.com"><!--[--><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->frontendmasters.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tricks.com/" aria-label="css-tricks.com"><!--[--><img class="vp-icon" src="https://css-tricks.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->css-tricks.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="smashingmagazine.com"><!--[--><img class="vp-icon" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->smashingmagazine.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="oddbird.net"><!--[--><img class="vp-icon" src="https://oddbird.net/safari-pinned-tab.svg" alt aria-hidden no-view sizing="both"><!--]-->oddbird.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/zeroheight.com/" aria-label="zeroheight.com"><!--[--><img class="vp-icon" src="https://zeroheight.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->zeroheight.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/typescript.tv/" aria-label="typescript.tv"><!--[--><img class="vp-icon" src="https://typescript.tv/_astro/android-chrome-192x192.BhQ8hcWh.png" alt aria-hidden no-view sizing="both"><!--]-->typescript.tv<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.logrocket.com/" aria-label="blog.logrocket.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.logrocket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/realpython.com/" aria-label="realpython.com"><!--[--><img class="vp-icon" src="https://realpython.com/static/favicon.68cbf4197b0c.png" alt aria-hidden no-view sizing="both"><!--]-->realpython.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/digitalocean.com/" aria-label="digitalocean.com"><!--[--><img class="vp-icon" src="https://digitalocean.com/_next/static/media/favicon.594d6067.ico" alt aria-hidden no-view sizing="both"><!--]-->digitalocean.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/antonioleiva.com/" aria-label="antonioleiva.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/antonioleiva.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->antonioleiva.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/johnnyreilly.com/" aria-label="johnnyreilly.com"><!--[--><img class="vp-icon" src="https://johnnyreilly.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->johnnyreilly.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/code-maze.com/" aria-label="code-maze.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/code-maze.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->code-maze.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/milanjovanovic.tech/" aria-label="milanjovanovic.tech"><!--[--><img class="vp-icon" src="https://milanjovanovic.tech/profile_favicon.png" alt aria-hidden no-view sizing="both"><!--]-->milanjovanovic.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/shopify.engineering/" aria-label="shopify.engineering"><!--[--><img class="vp-icon" src="https://cdn.shopify.com/static/shopify-favicon.png" alt aria-hidden no-view sizing="both"><!--]-->shopify.engineering<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devtoolstips.org/" aria-label="devtoolstips.org"><!--[--><img class="vp-icon" src="https://devtoolstips.org/assets/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devtoolstips.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/piccalil.li/" aria-label="piccalil.li"><!--[--><img class="vp-icon" src="https://piccalil.li/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->piccalil.li<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/sitepoint.com/" aria-label="sitepoint.com"><!--[--><img class="vp-icon" src="https://sitepoint.com/favicons/512x512.png" alt aria-hidden no-view sizing="both"><!--]-->sitepoint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/event-driven.io/" aria-label="event-driven.io"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/event-driven.io/favicon.jfif" alt aria-hidden no-view sizing="both"><!--]-->event-driven.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/packagemain.tech/" aria-label="packagemain.tech"><!--[--><img class="vp-icon" src="https://substack-post-media.s3.amazonaws.com/public/images/2ea54e25-eaa6-4630-bfc0-10b8cfdce894/apple-touch-icon-1024x1024.png" alt aria-hidden no-view sizing="both"><!--]-->packagemain.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/gosolve.io/" aria-label="gosolve.io"><!--[--><img class="vp-icon" src="https://gosolve.io/wp-content/uploads/2022/03/cropped-ikona1-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->gosolve.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/bram.us/" aria-label="bram.us"><!--[--><img class="vp-icon" src="https://bram.us/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->bram.us<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/una.im/" aria-label="una.im"><!--[--><img class="vp-icon" src="https://una.im/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->una.im<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/joshwcomeau.com/" aria-label="joshwcomeau.com"><!--[--><img class="vp-icon" src="https://joshwcomeau.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->joshwcomeau.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tip.com/" aria-label="css-tip.com"><!--[--><img class="vp-icon" src="https://css-tip.com/img/fav.png" alt aria-hidden no-view sizing="both"><!--]-->css-tip.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/nerdy.dev/" aria-label="nerdy.dev"><!--[--><img class="vp-icon" src="https://nerdy.dev/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->nerdy.dev<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/towardsdatascience.com/" aria-label="towardsdatascience.com"><!--[--><img class="vp-icon" src="https://cdn-images-1.medium.com/v2/resize:fill:128:128/1*VzTUkfeGymHP4Bvav-T-lA.png" alt aria-hidden no-view sizing="both"><!--]-->towardsdatascience.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/douggregor.net/" aria-label="douggregor.net"><!--[--><i class="vp-icon fas fa-globe" sizing="both"></i><!--]-->douggregor.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/d2.naver.com/" aria-label="d2.naver.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/d2.naver.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->d2.naver.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakao.com/" aria-label="tech.kakao.com"><!--[--><img class="vp-icon" src="https://www.kakaocorp.com/page/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakao.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakaopay.com/" aria-label="tech.kakaopay.com"><!--[--><img class="vp-icon" src="https://tech.kakaopay.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakaopay.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fe-developers.kakaoent.com/" aria-label="fe-developers.kakaoent.com"><!--[--><img class="vp-icon" src="https://fe-developers.kakaoent.com/favicon-32x32.png?v=44803cb16c1e2debd3984cf2e8cb2ded" alt aria-hidden no-view sizing="both"><!--]-->fe-developers.kakaoent.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/yozm.wishket.com/" aria-label="yozm.wishket.com"><!--[--><img class="vp-icon" src="https://yozm.wishket.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->yozm.wishket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/popit.kr/" aria-label="popit.kr"><!--[--><img class="vp-icon" src="https://popit.kr/wp-content/uploads/2016/08/favicon_32x32.png" alt aria-hidden no-view sizing="both"><!--]-->popit.kr<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devkuma.com/" aria-label="devkuma.com"><!--[--><img class="vp-icon" src="https://devkuma.com/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devkuma.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.gangnamunni.com/" aria-label="blog.gangnamunni.com"><!--[--><img class="vp-icon" src="https://blog.gangnamunni.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->blog.gangnamunni.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/codingeverybody.kr/" aria-label="codingeverybody.kr"><!--[--><img class="vp-icon" src="https://codingeverybody.kr/wp-content/uploads/cropped-favicon-origin-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->codingeverybody.kr<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-network-wired" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tecmint.com/" aria-label="tecmint.com"><!--[--><img class="vp-icon" src="https://tecmint.com/wp-content/uploads/2020/07/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tecmint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/docker.com/" aria-label="docker.com"><!--[--><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->docker.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/learnkube.com/" aria-label="learnkube.com"><!--[--><img class="vp-icon" src="https://static.learnkube.com/f7e5160d4744cf05c46161170b5c11c9.svg" alt aria-hidden no-view sizing="both"><!--]-->learnkube.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/itsfoss.com/" aria-label="itsfoss.com"><!--[--><img class="vp-icon" src="https://itsfoss.com/content/images/size/w256h256/2022/12/android-chrome-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->itsfoss.com<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/chanhi2000/bookshelf" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><!----></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><span class="vp-sidebar-title">kodeco.com</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/" aria-label="Kodeco (kodeco.com)"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->Kodeco (kodeco.com)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/523-augmented-reality-in-android-with-google-s-face-api.html" aria-label="Augmented Reality in Android with Googleâ€™s Face API"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Augmented Reality in Android with Googleâ€™s Face API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/324-viewpager-tutorial-getting-started-in-kotlin.html" aria-label="ViewPager Tutorial - Getting Started in Kotlin"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->ViewPager Tutorial - Getting Started in Kotlin<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html" aria-label="Couchbase Tutorial for Android - Getting Started"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Couchbase Tutorial for Android - Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/272-intermediate-recyclerview-tutorial-with-kotlin.html" aria-label="Intermediate RecyclerView Tutorial with Kotlin"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Intermediate RecyclerView Tutorial with Kotlin<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/262-dependency-injection-in-android-with-dagger-2-and-kotlin.html" aria-label="Dependency Injection in Android with Dagger 2 and Kotlin"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Dependency Injection in Android with Dagger 2 and Kotlin<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/254-getting-started-with-android-wear-with-kotlin.html" aria-label="Getting Started with Android Wear with Kotlin"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Getting Started with Android Wear with Kotlin<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/249-gradle-tutorial-for-android-getting-started.html" aria-label="Gradle Tutorial for Android - Getting Started"><!--[--><i class="vp-icon iconfont icon-gradle" sizing="both"></i><!--]-->Gradle Tutorial for Android - Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/247-react-native-tutorial-building-android-apps-with-javascript.html" aria-label="React Native Tutorial - Building Android Apps with JavaScript"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->React Native Tutorial - Building Android Apps with JavaScript<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/240-android-accessibility-tutorial-getting-started.html" aria-label="Android Accessibility Tutorial: Getting Started"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Android Accessibility Tutorial: Getting Started<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/bookshelf/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html" aria-label="Introduction to Google Maps API for Android with Kotlin"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Introduction to Google Maps API for Android with Kotlin<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/1144981-kotlin-for-android-an-introduction.html" aria-label="Kotlin For Android: An Introduction"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Kotlin For Android: An Introduction<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6398124-swiftui-tutorial-for-ios-creating-charts.html" aria-label="SwiftUI Tutorial for iOS - Creating Charts"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->SwiftUI Tutorial for iOS - Creating Charts<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6334294-my-app-crashed-now-what.html" aria-label="My App Crashed, Now What?"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->My App Crashed, Now What?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html" aria-label="SQLite With Swift Tutorial: Getting Started"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->SQLite With Swift Tutorial: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6747815-uigesturerecognizer-tutorial-getting-started.html" aria-label="UIGestureRecognizer Tutorial: Getting Started"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->UIGestureRecognizer Tutorial: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6742901-protocol-oriented-programming-tutorial-in-swift-5-1-getting-started.html" aria-label="Protocol-Oriented Programming Tutorial in Swift 5.1: Getting Started"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->Protocol-Oriented Programming Tutorial in Swift 5.1: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/7076593-cocoapods-tutorial-for-swift-getting-started.html" aria-label="CocoaPods Tutorial for Swift: Getting Started"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->CocoaPods Tutorial for Swift: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/7181017-unsafe-swift-using-pointers-and-interacting-with-c.html" aria-label="Unsafe Swift: Using Pointers and Interacting With C"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->Unsafe Swift: Using Pointers and Interacting With C<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6827616-ios-accessibility-getting-started.html" aria-label="iOS Accessibility: Getting Started"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->iOS Accessibility: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6587213-alamofire-5-tutorial-for-ios-getting-started.html" aria-label="Alamofire 5 Tutorial for iOS: Getting Started"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->Alamofire 5 Tutorial for iOS: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/30067669-documenting-kotlin-code-for-android-using-kdoc-and-dokka.html" aria-label="Documenting Kotlin Code for Android Using KDoc and Dokka"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Documenting Kotlin Code for Android Using KDoc and Dokka<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/31290959-kotlin-sequences-getting-started.html" aria-label="Kotlin Sequences - Getting Started"><!--[--><i class="vp-icon iconfont icon-kotlin" sizing="both"></i><!--]-->Kotlin Sequences - Getting Started<!----></a></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><div class="page-cover"><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/Mapping-kotlin-twitter.png" alt no-view></div><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon fa-brands fa-android" sizing="height"></i>Introduction to Google Maps API for Android with Kotlin</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="Writing DateðŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">18. 1. 17.</span><meta property="datePublished" content="2018-01-17T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading TimeâŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 19 min</span><meta property="timeRequired" content="PT19M"></span><span class="page-category-info" aria-label="CategoryðŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color8" role>Java</span><span class="page-category-item color2" role>Kotlin</span><span class="page-category-item color0" role>Android</span><span class="page-category-item color2" role>Gradle</span><span class="page-category-item color8" role>Article(s)</span><!--]--><meta property="articleSection" content="Java,Kotlin,Android,Gradle,Article(s)"></span><span class="page-tag-info" aria-label="TagðŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8" role>blog</span><span class="page-tag-item color1" role>kodeco.com</span><span class="page-tag-item color8" role>java</span><span class="page-tag-item color4" role>kotiln</span><span class="page-tag-item color3" role>android</span><span class="page-tag-item color4" role>gradle</span><!--]--><meta property="keywords" content="blog,kodeco.com,java,kotiln,android,gradle"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="frontmatter-title-á„€á…ªá†«á„…á…§á†«" tabindex="-1"><a class="header-anchor" href="#frontmatter-title-á„€á…ªá†«á„…á…§á†«"><span>Introduction to Google Maps API for Android with Kotlin ê´€ë ¨</span></a></h1><a class="route-link vp-card" href="/bookshelf/programming/java-android/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="https://chanhi2000.github.io/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Android > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><nav class="table-of-contents"><ul><li><a aria-current="page" href="/bookshelf/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html#getting-started" class="router-link-active router-link-exact-active">Getting Started</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html#using-the-google-maps-apis" class="router-link-active router-link-exact-active">Using the Google Maps APIs</a><ul><li><a aria-current="page" href="/bookshelf/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html#creating-api-keys" class="router-link-active router-link-exact-active">Creating API Keys</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html#setting-up-a-fused-location-client" class="router-link-active router-link-exact-active">Setting up a Fused Location Client</a></li></ul></li><li><a aria-current="page" href="/bookshelf/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html#user-permissions" class="router-link-active router-link-exact-active">User Permissions</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html#getting-current-location" class="router-link-active router-link-exact-active">Getting Current Location</a><ul><li><a aria-current="page" href="/bookshelf/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html#emulator-testing" class="router-link-active router-link-exact-active">Emulator Testing</a></li></ul></li><li><a aria-current="page" href="/bookshelf/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html#markers" class="router-link-active router-link-exact-active">Markers</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html#changing-the-map-type" class="router-link-active router-link-exact-active">Changing the Map Type</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html#implementing-geocoding" class="router-link-active router-link-exact-active">Implementing Geocoding</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html#receiving-location-updates" class="router-link-active router-link-exact-active">Receiving Location Updates</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html#place-search" class="router-link-active router-link-exact-active">Place Search</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html#where-to-go-from-here" class="router-link-active router-link-exact-active">Where to Go From Here?</a></li></ul></nav><hr><div class="vp-site-info" data-name="Introduction to Google Maps API for Android with Kotlin"><a class="vp-site-info-navigator no-external-link-icon" title="Introduction to Google Maps API for Android with Kotlin" href="https://kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://koenig-media.raywenderlich.com/uploads/2018/01/Mapping-kotlin-twitter.png) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://assets.carolus.kodeco.com/assets/murakami/category-icons/category-other-core-apis-android-e2f05defab3a37db4e2d49c3eaea0750a2c1f9419af4ef95d2fd58af01dcfce4.svg" alt loading="lazy" no-view><div class="vp-site-info-name">Introduction to Google Maps API for Android with Kotlin</div><div class="vp-site-info-desc">In this Google Maps API Tutorial for Android you will learn how to retrieve the userâ€™s current location, get location updates and search for places.</div></div><!----></div><div class="hint-container note"><p class="hint-container-title">Update Note</p><p>This tutorial is now up to date with the latest version of the Google Maps API, the latest version of Android Studio version 3.0.1, and uses Kotlin for app development. Update by Joe Howard. Original tutorial by Eunice Obugyei.</p></div><p>From fitness apps such as Runkeeper to games such as Pokemon Go, location services are an increasingly important part of modern apps.</p><p>In this Google Maps API tutorial, you will create an app named <strong>City Guide</strong>. The app allows a user to search for a location, use Google Maps to show the address of the location and listen for the userâ€™s location changes.</p><p>You will learn how to use the Google Maps Android API, the Google Location Services API and the Google Places API for Android to do the following:</p><ul><li>Show a userâ€™s current location</li><li>Display and customize markers on a map</li><li>Retrieve the address of a location given the coordinates</li><li>Listen for location updates</li><li>Search for places</li></ul><div class="hint-container note"><p class="hint-container-title">Note</p><p>This Google Maps API tutorial assumes you are already familiar with the basics of Android development with Kotlin. If you are completely new to Android development, read through our <a href="https://kodeco.com/478209-beginning-android-development-with-kotlin-part-one-installing-android-studio" target="_blank" rel="noopener noreferrer">Beginning Android Development with Kotlin</a> tutorial to familiarize yourself with the basics. <!-- TODO: ìž‘ì„± (/kodeco.com/478209-beginning-android-development-with-kotlin-part-one-installing-android-studio.md) --></p></div><hr><h2 id="getting-started" tabindex="-1"><a class="header-anchor" href="#getting-started"><span>Getting Started</span></a></h2><p>Open <strong>Android Studio 3.0.1</strong> or later and select <strong>Start a new Android Studio project</strong> from the <strong>Quick Start</strong> menu, or choose <strong>File/New Projectâ€¦</strong>:</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/welcome.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>In the <strong>Create New Project</strong> dialog, on the <strong>Create Android Project</strong> view, enter the name of the app as <strong>City Guide</strong>, company domain of <strong>android.raywenderlich.com</strong>, select your preferred folder location for the project files, make sure that <strong>Include Kotlin support</strong>, and click <strong>Next</strong>:</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/new_project.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>On the <strong>Target Android Devices</strong> view, check the <strong>Phone and Tablet</strong> box and select the minimum SDK you want the app to support. Specify <strong>API 16</strong> from the <strong>Minimum SDK</strong> drop down and click <strong>Next</strong>.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/target.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>On the <strong>Add an Activity to Mobile</strong> view, select the <strong>Google Maps Activity</strong> and click <strong>Next</strong>.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/add_activity.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>On the <strong>Configure Activity</strong> view, click <strong>Finish</strong> to complete the project creation process.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/configure_activity.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Android Studio will use Gradle to build your project. This may take a few seconds.</p><p>Open <i class="vp-icon iconfont icon-kotlin" sizing="height"></i><code>MapsActivity.kt</code>. It should look like this:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">package</span> com<span class="token punctuation">.</span>raywenderlich<span class="token punctuation">.</span>android<span class="token punctuation">.</span>cityguide</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span>AppCompatActivity</span>
<span class="line"><span class="token keyword">import</span> android<span class="token punctuation">.</span>os<span class="token punctuation">.</span>Bundle</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>gms<span class="token punctuation">.</span>maps<span class="token punctuation">.</span>CameraUpdateFactory</span>
<span class="line"><span class="token keyword">import</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>gms<span class="token punctuation">.</span>maps<span class="token punctuation">.</span>GoogleMap</span>
<span class="line"><span class="token keyword">import</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>gms<span class="token punctuation">.</span>maps<span class="token punctuation">.</span>OnMapReadyCallback</span>
<span class="line"><span class="token keyword">import</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>gms<span class="token punctuation">.</span>maps<span class="token punctuation">.</span>SupportMapFragment</span>
<span class="line"><span class="token keyword">import</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>gms<span class="token punctuation">.</span>maps<span class="token punctuation">.</span>model<span class="token punctuation">.</span>LatLng</span>
<span class="line"><span class="token keyword">import</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>gms<span class="token punctuation">.</span>maps<span class="token punctuation">.</span>model<span class="token punctuation">.</span>MarkerOptions</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> MapsActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> OnMapReadyCallback <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> mMap<span class="token operator">:</span> GoogleMap</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_maps<span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// Obtain the SupportMapFragment and get notified when the map is ready to be used.</span></span>
<span class="line">    <span class="token keyword">val</span> mapFragment <span class="token operator">=</span> supportFragmentManager</span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">findFragmentById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>map<span class="token punctuation">)</span> <span class="token keyword">as</span> SupportMapFragment</span>
<span class="line">    mapFragment<span class="token punctuation">.</span><span class="token function">getMapAsync</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">/**</span>
<span class="line">   * Manipulates the map once available.</span>
<span class="line">   * This callback is triggered when the map is ready to be used.</span>
<span class="line">   * This is where we can add markers or lines, add listeners or move the camera. In this case,</span>
<span class="line">   * we just add a marker near Sydney, Australia.</span>
<span class="line">   * If Google Play services is not installed on the device, the user will be prompted to install</span>
<span class="line">   * it inside the SupportMapFragment. This method will only be triggered once the user has</span>
<span class="line">   * installed Google Play services and returned to the app.</span>
<span class="line">   */</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onMapReady</span><span class="token punctuation">(</span>googleMap<span class="token operator">:</span> GoogleMap<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    mMap <span class="token operator">=</span> googleMap</span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Add a marker in Sydney and move the camera</span></span>
<span class="line">    <span class="token keyword">val</span> sydney <span class="token operator">=</span> <span class="token function">LatLng</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">34.0</span><span class="token punctuation">,</span> <span class="token number">151.0</span><span class="token punctuation">)</span></span>
<span class="line">    mMap<span class="token punctuation">.</span><span class="token function">addMarker</span><span class="token punctuation">(</span><span class="token function">MarkerOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span>sydney<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;Marker in Sydney&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    mMap<span class="token punctuation">.</span><span class="token function">moveCamera</span><span class="token punctuation">(</span>CameraUpdateFactory<span class="token punctuation">.</span><span class="token function">newLatLng</span><span class="token punctuation">(</span>sydney<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><code>MapsActivity</code> currently implements the <strong>OnMapReadyCallback</strong> interface and extends <strong>AppCompatActivity</strong>.</li><li>The class overrides <strong>AppCompatActivity</strong>â€™s <code>onCreate()</code> method</li><li>You also override <strong>OnMapReadyCallback</strong>â€™s <strong>onMapReady()</strong> method. This method is called when the map is ready to be used. The code declared in this method creates a marker with coordinates near Sydney, Australia and adds the marker to the map.</li></ol><p>The template adds the following in the <strong>manifests/AndroidManifest.xml</strong>:</p><ol><li>A declaration of the <code>ACCESS_FINE_LOCATION</code> permission. This is required to access the userâ€™s precise location.</li><li>The <code>com.google.android.geo.API_KEY</code> meta-data. This is used to specify the API key.</li></ol><p>The template also adds a <strong>Google Play Services</strong> dependency to <i class="vp-icon iconfont icon-gradle" sizing="height"></i><code>build.gradle</code>. This dependency exposes the Google Maps and Location Services APIs to the application.</p><div class="language-groovy line-numbers-mode" data-highlighter="prismjs" data-ext="groovy"><pre><code class="language-groovy"><span class="line">implementation <span class="token string">&#39;com.google.android.gms:play-services-maps:11.8.0&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>![When the build is complete, run the app to see what you have](https://koenig-media.raywenderlich.com/uploads/2016/09/mapping_start_project_6_run_1.png =240x)</p><p>All you have is a blank screen with no map; you havenâ€™t yet set up the API key for the Google Map. Youâ€™ll do that next.</p><div class="hint-container note"><p class="hint-container-title">Note</p><p>If youâ€™re using an emulator, the emulatorâ€™s installed version will have to satisfy the version of Google Play Services required in your <i class="vp-icon iconfont icon-gradle" sizing="height"></i><code>build.gradle</code> file. If you see a message that you need to update the emulatorâ€™s Google Play Services version, you can either download the latest Google APIs using your Android Studio SDK Manager and install on your Virtual Device, or lower the version in your gradle dependency.</p></div><hr><h2 id="using-the-google-maps-apis" tabindex="-1"><a class="header-anchor" href="#using-the-google-maps-apis"><span>Using the Google Maps APIs</span></a></h2><p>To use any of the <a href="https://developers.google.com/maps/android/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i>Google Maps APIs</a>, you need to create an API key and enable any required APIs from the <a href="https://console.developers.google.com" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-google" sizing="height"></i>developer console</a>. If you donâ€™t already have a Google account, <a href="https://accounts.google.com/SignUpWithoutGmail" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-google" sizing="height"></i>create one</a> now â€” itâ€™s free!</p><h3 id="creating-api-keys" tabindex="-1"><a class="header-anchor" href="#creating-api-keys"><span>Creating API Keys</span></a></h3><p>Open <i class="vp-icon fas fa-folder-open" sizing="height"></i><code>res/values/</code><i class="vp-icon iconfont icon-code" sizing="height"></i><code>google_maps_api.xml</code>. You will see the following:</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/api_key.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Now copy and paste the link shown above into your browser.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/09/mapping_start_project_8_create_api_2.png" alt="On the Enable an API page, select Create a project and click &lt;VPIcon icon=&quot;iconfont icon-select&quot;/&gt;." tabindex="0" loading="lazy"><figcaption>On the <strong>Enable an API</strong> page, select <strong>Create a project</strong> and click <i class="vp-icon iconfont icon-select" sizing="height"></i><code>[Continue]</code>.</figcaption></figure><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/09/mapping_start_project_9_create_api_3.png" alt="On the next screen, click the &lt;VPIcon icon=&quot;iconfont icon-select&quot;/&gt; button to continue." tabindex="0" loading="lazy"><figcaption>On the next screen, click the <i class="vp-icon iconfont icon-select" sizing="height"></i><code>[Create API key]</code> button to continue.</figcaption></figure><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/api_key2.png" alt="When thatâ€™s done, copy the API key shown in the API key created dialog and click &lt;VPIcon icon=&quot;iconfont icon-select&quot;/&gt;." tabindex="0" loading="lazy"><figcaption>When thatâ€™s done, copy the API key shown in the <strong>API key created</strong> dialog and click <i class="vp-icon iconfont icon-select" sizing="height"></i><code>[Close]</code>.</figcaption></figure><p>Head back to <i class="vp-icon iconfont icon-code" sizing="height"></i><code>google_maps_api.xml</code>, replace the value of <code>google_maps_key</code> key with the copied API key.</p><p>![Build and run again. You should see a map with a red marker on the screen.](https://koenig-media.raywenderlich.com/uploads/2018/01/first_map.png =240x)</p><p>Go back to the <a href="https://console.developers.google.com/apis/library" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-google" sizing="height"></i>developer console</a> and enable the <strong>Google Places API for Android</strong>. You will be using this later on to search for a place:</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/enable_google_places.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="setting-up-a-fused-location-client" tabindex="-1"><a class="header-anchor" href="#setting-up-a-fused-location-client"><span>Setting up a Fused Location Client</span></a></h3><p>Before adding any Kotlin code, youâ€™ll need to configure Android Studio to automatically insert <code>import</code> statements to save you from having to add each one manually.</p><p>Go to your Android Studio Preferences (or Settings on PC) and go to <strong>Editor &gt; General &gt; Auto Import</strong>, select the <strong>Add unambiguous imports on the fly</strong> and the <strong>Show import popup</strong> checkboxes, and click <strong>OK</strong>.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/imports.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Open <i class="vp-icon iconfont icon-kotlin" sizing="height"></i><code>MapsActivity.kt</code> and first rename the <code>GoogleMap</code> property to <code>map</code> by setting the cursor on it and hitting <kbd>Shift</kbd>+<kbd>F6</kbd>:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> map<span class="token operator">:</span> GoogleMap</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Open your app <i class="vp-icon iconfont icon-gradle" sizing="height"></i><code>build.gradle</code> file and add the Google Maps location dependency:</p><div class="language-groovy line-numbers-mode" data-highlighter="prismjs" data-ext="groovy"><pre><code class="language-groovy"><span class="line">implementation <span class="token string">&#39;com.google.android.gms:play-services-location:11.8.0&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Next, add a <code>FusedLocationProviderClient</code> to <code>MapActivity</code></p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> fusedLocationClient<span class="token operator">:</span> FusedLocationProviderClient</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Add the following line of code to the end of <code>onCreate()</code>,</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line">fusedLocationClient <span class="token operator">=</span> LocationServices<span class="token punctuation">.</span><span class="token function">getFusedLocationProviderClient</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Have <code>MapActivity</code> implement the <code>GoogleMap.OnMarkerClickListener</code> interface, which defines the <code>onMarkerClick()</code>, called when a marker is clicked or tapped:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">class</span> MapsActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> OnMapReadyCallback<span class="token punctuation">,</span></span>
<span class="line">    GoogleMap<span class="token punctuation">.</span><span class="token function">OnMarkerClickListener</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">/* ... ìƒëžµ ... */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now you need to implement all methods declared in each of the interfaces added above. To do this, follow the steps below:</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/implement_members.png" alt="Place the cursor anywhere on the class declaration and click on the red light bulb icon that appears above the class declaration.&lt;br/&gt;Select Implement members from the options that appear." tabindex="0" loading="lazy"><figcaption>Place the cursor anywhere on the class declaration and click on the red light bulb icon that appears above the class declaration.<br>Select <strong>Implement members</strong> from the options that appear.</figcaption></figure><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/implement_members.png" alt="On the Implement members dialog, click &lt;VPIcon icon=&quot;iconfont icon-select&quot;/&gt;." tabindex="0" loading="lazy"><figcaption>On the <strong>Implement members</strong> dialog, click <i class="vp-icon iconfont icon-select" sizing="height"></i><code>[OK]</code>.</figcaption></figure><p>Update <strong>onMarkerClick()</strong> to be</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onMarkerClick</span><span class="token punctuation">(</span>p0<span class="token operator">:</span> Marker<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Add the following code to <strong>onMapReady()</strong>:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line">map<span class="token punctuation">.</span><span class="token function">getUiSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setZoomControlsEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">setOnMarkerClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Here you enable the zoom controls on the map and declare <code>MapsActivity</code> as the callback triggered when the user clicks a marker on this map.</p><p>![Now build and run the app and click the marker on the map near Sydney, and youâ€™ll see the title text appear](https://koenig-media.raywenderlich.com/uploads/2018/01/sydney.png =240x)</p><p>Enter a different set of latitude and longitude values and youâ€™ll see the marker move to your chosen location.</p><p>Replace the Sydney code with the following code to set a marker at New York City with the title â€œMy Favorite Cityâ€:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">val</span> myPlace <span class="token operator">=</span> <span class="token function">LatLng</span><span class="token punctuation">(</span><span class="token number">40.73</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">73.99</span><span class="token punctuation">)</span>  <span class="token comment">// this is New York </span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">addMarker</span><span class="token punctuation">(</span><span class="token function">MarkerOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span>myPlace<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;My Favorite City&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">moveCamera</span><span class="token punctuation">(</span>CameraUpdateFactory<span class="token punctuation">.</span><span class="token function">newLatLng</span><span class="token punctuation">(</span>myPlace<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>![Build and run.](https://koenig-media.raywenderlich.com/uploads/2018/01/nyc1.png =240x)</p><p>Notice the map automatically centered the marker on the screen; <code>moveCamera()</code> does this for you. However, the zoom level of the map isnâ€™t right, as itâ€™s fully zoomed out.</p><p>Modify <code>moveCamera()</code> as shown below:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line">map<span class="token punctuation">.</span><span class="token function">moveCamera</span><span class="token punctuation">(</span>CameraUpdateFactory<span class="token punctuation">.</span><span class="token function">newLatLngZoom</span><span class="token punctuation">(</span>myPlace<span class="token punctuation">,</span> <span class="token number">12.0f</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Zoom level 0 corresponds to the fully zoomed-out world view. Most areas support zoom levels up to 20, while more remote areas only support zoom levels up to 13. A zoom level of 12 is a nice in-between value that shows enough detail without getting crazy-close.</p><p>![Build and run to view your progress so far.](https://koenig-media.raywenderlich.com/uploads/2018/01/nyc2.png =240x)</p><hr><h2 id="user-permissions" tabindex="-1"><a class="header-anchor" href="#user-permissions"><span>User Permissions</span></a></h2><p>Your app needs the <code>ACCESS_FINE_LOCATION</code> permission for getting the userâ€™s location details; youâ€™ve already included this in <strong>AndroidManifest.xml</strong>.</p><p>Starting with Android 6.0, user permissions are handled a little differently than before. You donâ€™t request permission during the installation of your app; rather, you request them at run time when the permission is actually required.</p><p>Permissions are classified into two categories: <strong><a href="https://developer.android.com/guide/topics/security/normal-permissions.html" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i>normal</a></strong> and <strong><a href="https://developer.android.com/guide/topics/security/permissions.html#perm-groups" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i>dangerous</a></strong> categories. Permissions that belong to the dangerous category require run time permission from the user. Permissions that request access to the userâ€™s private information such as the userâ€™s <a href="https://developer.android.com/reference/android/Manifest.permission_group.html#CONTACTS" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i>CONTACTS</a>, <a href="https://developer.android.com/reference/android/Manifest.permission_group.html#CALENDAR" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i>CALENDAR</a>, <a href="https://developer.android.com/reference/android/Manifest.permission_group.html#LOCATION" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i>LOCATION</a> etc. are categorised as dangerous permissions.</p><p>Open <i class="vp-icon iconfont icon-kotlin" sizing="height"></i><code>MapsActivity.kt</code> and add a <code>companion object</code> with the code to request location permission:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">companion</span> <span class="token keyword">object</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token keyword">val</span> LOCATION_PERMISSION_REQUEST_CODE <span class="token operator">=</span> <span class="token number">1</span>  </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Create a new method called <code>setUpMap()</code> as follows.</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">setUpMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>ActivityCompat<span class="token punctuation">.</span><span class="token function">checkSelfPermission</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span></span>
<span class="line">      android<span class="token punctuation">.</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>ACCESS_FINE_LOCATION<span class="token punctuation">)</span> <span class="token operator">!=</span> PackageManager<span class="token punctuation">.</span>PERMISSION_GRANTED<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    ActivityCompat<span class="token punctuation">.</span><span class="token function">requestPermissions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token function">arrayOf</span><span class="token punctuation">(</span>android<span class="token punctuation">.</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>ACCESS_FINE_LOCATION<span class="token punctuation">)</span><span class="token punctuation">,</span> LOCATION_PERMISSION_REQUEST_CODE<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The code above checks if the app has been granted the <code>ACCESS_FINE_LOCATION</code> permission. If it hasnâ€™t, then request it from the user.</p><p>Add a call to <code>setUpMap()</code> at the end of <code>onMapReady()</code>.</p><p>![Build and run; click <i class="vp-icon iconfont icon-select" sizing="height"></i><code>[Allow]</code> to grant permission.](https://koenig-media.raywenderlich.com/uploads/2018/01/allow.png =240x)</p><div class="hint-container note"><p class="hint-container-title">Note</p><p>A thorough discussion of user permissions is beyond the scope of this tutorial, but check out <a href="https://developer.android.com/training/permissions/requesting.html" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i>this</a> document on requesting permissions at run time.</p></div><hr><h2 id="getting-current-location" tabindex="-1"><a class="header-anchor" href="#getting-current-location"><span>Getting Current Location</span></a></h2><p>One of the most common uses for location services is finding the userâ€™s current location. You do this by requesting the last known location of the userâ€™s device from the Google Play services location APIs.</p><p>In <i class="vp-icon iconfont icon-kotlin" sizing="height"></i><code>MapsActivity.kt</code>, add the following new property:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> lastLocation<span class="token operator">:</span> Location</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Next, remove the code in <code>onMapReady()</code> that put a marker in New York:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onMapReady</span><span class="token punctuation">(</span>googleMap<span class="token operator">:</span> GoogleMap<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  map <span class="token operator">=</span> googleMap</span>
<span class="line">  </span>
<span class="line">  map<span class="token punctuation">.</span>uiSettings<span class="token punctuation">.</span>isZoomControlsEnabled <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">  map<span class="token punctuation">.</span><span class="token function">setOnMarkerClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">setUpMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Add the code below to the bottom of <strong>setUpMap()</strong>:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token comment">// 1</span></span>
<span class="line">map<span class="token punctuation">.</span>isMyLocationEnabled <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2</span></span>
<span class="line">fusedLocationClient<span class="token punctuation">.</span>lastLocation<span class="token punctuation">.</span><span class="token function">addOnSuccessListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> location <span class="token operator">-&gt;</span></span>
<span class="line">  <span class="token comment">// Got last known location. In some rare situations this can be null.</span></span>
<span class="line">  <span class="token comment">// 3</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>location <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    lastLocation <span class="token operator">=</span> location</span>
<span class="line">    <span class="token keyword">val</span> currentLatLng <span class="token operator">=</span> <span class="token function">LatLng</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>latitude<span class="token punctuation">,</span> location<span class="token punctuation">.</span>longitude<span class="token punctuation">)</span></span>
<span class="line">    map<span class="token punctuation">.</span><span class="token function">animateCamera</span><span class="token punctuation">(</span>CameraUpdateFactory<span class="token punctuation">.</span><span class="token function">newLatLngZoom</span><span class="token punctuation">(</span>currentLatLng<span class="token punctuation">,</span> <span class="token number">12f</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Taking each commented section in turn:</p><ol><li><strong>isMyLocationEnabled = true</strong> enables the <code>my-location</code> layer which draws a light blue dot on the userâ€™s location. It also adds a button to the map that, when tapped, centers the map on the userâ€™s location.</li><li><strong>fusedLocationClient.getLastLocation()</strong> gives you the most recent location currently available.</li><li>If you were able to retrieve the the most recent location, then move the camera to the userâ€™s current location.</li></ol><p>![Build and run to view your progress so far. Youâ€™ll see a light blue dot on the userâ€™s location:](https://koenig-media.raywenderlich.com/uploads/2018/01/boston.png =240x)</p><h3 id="emulator-testing" tabindex="-1"><a class="header-anchor" href="#emulator-testing"><span>Emulator Testing</span></a></h3><p>Itâ€™s best to use a real Android device to test a map application. If for some reason, you need to test from an emulator, you can do so by mocking location data in the emulator.</p><p>One way to do this is by using the emulatorâ€™s extended controls. Hereâ€™s how youâ€™d do that:</p><p>![1. Start the emulator. On the right hand panel, click the more icon (<strong>â€¦</strong>) to access the <strong>Extended Controls</strong>](https://koenig-media.raywenderlich.com/uploads/2016/11/Screen-Shot-2016-11-24-at-9.09.43-AM.png =240x)</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/09/Screen-Shot-2016-09-20-at-10.40.22-AM.png" alt="2. Select the Location item on the left hand side of the Extended Controls dialog." tabindex="0" loading="lazy"><figcaption>2. Select the <strong>Location</strong> item on the left hand side of the <strong>Extended Controls</strong> dialog.</figcaption></figure><p>Enter the latitude and longitude values in the specified fields and click <i class="vp-icon iconfont icon-select" sizing="height"></i><code>[Send]</code>.</p><hr><h2 id="markers" tabindex="-1"><a class="header-anchor" href="#markers"><span>Markers</span></a></h2><p>As you may have noticed from the last run, the blue dot on the userâ€™s location is not very prominent. The Android Maps API lets you use a marker object, which is an icon that can be placed at a particular point on the mapâ€™s surface.</p><p>In <i class="vp-icon iconfont icon-kotlin" sizing="height"></i><code>MapsActivity.kt</code> add the following code.</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">placeMarkerOnMap</span><span class="token punctuation">(</span>location<span class="token operator">:</span> LatLng<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 1</span></span>
<span class="line">  <span class="token keyword">val</span> markerOptions <span class="token operator">=</span> <span class="token function">MarkerOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span></span>
<span class="line">  <span class="token comment">// 2</span></span>
<span class="line">  map<span class="token punctuation">.</span><span class="token function">addMarker</span><span class="token punctuation">(</span>markerOptions<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>Create a <code>MarkerOptions</code> object and sets the userâ€™s current location as the position for the marker</li><li>Add the marker to the map</li></ol><p>Now replace the <code>setUpMap()</code> with the following:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">setUpMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>ActivityCompat<span class="token punctuation">.</span><span class="token function">checkSelfPermission</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> android<span class="token punctuation">.</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>ACCESS_FINE_LOCATION<span class="token punctuation">)</span> <span class="token operator">!=</span> PackageManager<span class="token punctuation">.</span>PERMISSION_GRANTED<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    ActivityCompat<span class="token punctuation">.</span><span class="token function">requestPermissions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span>android<span class="token punctuation">.</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>ACCESS_FINE_LOCATION<span class="token punctuation">)</span><span class="token punctuation">,</span> LOCATION_PERMISSION_REQUEST_CODE<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  map<span class="token punctuation">.</span>isMyLocationEnabled <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line">  fusedLocationClient<span class="token punctuation">.</span>lastLocation<span class="token punctuation">.</span><span class="token function">addOnSuccessListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> location <span class="token operator">-&gt;</span></span>
<span class="line">    <span class="token comment">// Got last known location. In some rare situations this can be null.</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>location <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      lastLocation <span class="token operator">=</span> location</span>
<span class="line">      <span class="token keyword">val</span> currentLatLng <span class="token operator">=</span> <span class="token function">LatLng</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>latitude<span class="token punctuation">,</span> location<span class="token punctuation">.</span>longitude<span class="token punctuation">)</span></span>
<span class="line">      <span class="token function">placeMarkerOnMap</span><span class="token punctuation">(</span>currentLatLng<span class="token punctuation">)</span></span>
<span class="line">      map<span class="token punctuation">.</span><span class="token function">animateCamera</span><span class="token punctuation">(</span>CameraUpdateFactory<span class="token punctuation">.</span><span class="token function">newLatLngZoom</span><span class="token punctuation">(</span>currentLatLng<span class="token punctuation">,</span> <span class="token number">12f</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The only change you made to <code>setUpMap()</code> here is adding a call to <code>placeMarkerOnMap()</code> to show the marker.</p><p>Build and run to view your progress so far.</p><p>![You should see a pin on the userâ€™s location](https://koenig-media.raywenderlich.com/uploads/2018/01/boston_marker.png =240x)</p><p>Donâ€™t like the default Android pins? You can also create a marker with a custom icon as the pin. Go back to <code>placeMarkerOnMap()</code> and add the following line of code after the <code>MarkerOptions</code> instantiation:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line">markerOptions<span class="token punctuation">.</span><span class="token function">icon</span><span class="token punctuation">(</span></span>
<span class="line">  BitmapDescriptorFactory<span class="token punctuation">.</span><span class="token function">fromBitmap</span><span class="token punctuation">(</span></span>
<span class="line">    BitmapFactory<span class="token punctuation">.</span><span class="token function">decodeResource</span><span class="token punctuation">(</span>resources<span class="token punctuation">,</span> R<span class="token punctuation">.</span>mipmap<span class="token punctuation">.</span>ic_user_location<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Download custom pins named <code>ic_user_location</code> <a href="https://koenig-media.raywenderlich.com/uploads/2016/09/ic_user_location.zip" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-file-zipper" sizing="height"></i>from this link</a> and unzip it.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/mipmap.png" alt="Switch to the Project view in the Project pane and copy all the files to the corresponding &lt;VPIcon icon=&quot;fas fa-folder-open&quot;/&gt; folders of the project" tabindex="0" loading="lazy"><figcaption>Switch to the <strong>Project</strong> view in the Project pane and copy all the files to the corresponding <i class="vp-icon fas fa-folder-open" sizing="height"></i><code>mipmap</code> folders of the project</figcaption></figure><p>Build and run to view your progress so far.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/custom_marker.png" alt="The marker on your location should now be using the  icon in the project" tabindex="0" loading="lazy"><figcaption>The marker on your location should now be using the <code>ic_user_location</code> icon in the project</figcaption></figure><p>What if all you want is the default pin but in a different color? Try to figure this out by yourself, and then check the spoiler below if you need more help:</p><details class="hint-container details"><summary>Answer</summary><p>Add this line of code to <code>placeMarkerOnMap()</code> instead:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line">markerOptions<span class="token punctuation">.</span><span class="token function">icon</span><span class="token punctuation">(</span>BitmapDescriptorFactory<span class="token punctuation">.</span><span class="token function">defaultMarker</span><span class="token punctuation">(</span>BitmapDescriptorFactory<span class="token punctuation">.</span>HUE_GREEN<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/green_marker.png" alt="This uses the default marker but in a green color instead of the default red." tabindex="0" loading="lazy"><figcaption>This uses the default marker but in a green color instead of the default red.</figcaption></figure></details><hr><h2 id="changing-the-map-type" tabindex="-1"><a class="header-anchor" href="#changing-the-map-type"><span>Changing the Map Type</span></a></h2><p>Depending on the functionality of your app, the normal map view might not be detailed enough for you.</p><p>The Android Maps API provides different map types to help you out: <code>MAP_TYPE_NORMAL</code>, <code>MAP_TYPE_SATELLITE</code>, <code>MAP_TYPE_TERRAIN</code>, <code>MAP_TYPE_HYBRID</code></p><p>Add the following inside <code>setUpMap()</code> just below the <code>setMyLocationEnabled()</code> call:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line">map<span class="token punctuation">.</span>mapType <span class="token operator">=</span> GoogleMap<span class="token punctuation">.</span>MAP_TYPE_TERRAIN</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>GoogleMap.MAP_TYPE_TERRAIN</code> displays a more detailed view of the area, showing changes in elevation</p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="v-0" aria-selected="true">MAP_TYPE_NORMAL</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-1" aria-selected="false">MAP_TYPE_SATELLITE</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-2" aria-selected="false">MAP_TYPE_HYBRID</button></div><!--[--><div class="vp-tab active" id="v-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">MAP_TYPE_NORMAL</div><!--[--><p>![<code>GoogleMap.MAP_TYPE_NORMAL</code> displays a typical road map with labels. This is default type.](https://koenig-media.raywenderlich.com/uploads/2018/01/terrain.png =240x)</p><!--]--></div><div class="vp-tab" id="v-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">MAP_TYPE_SATELLITE</div><!--[--><p>![<code>GoogleMap.MAP_TYPE_SATELLITE</code> displays a satellite view of an area with no labels](https://koenig-media.raywenderlich.com/uploads/2018/01/satellite.png =240x)</p><!--]--></div><div class="vp-tab" id="v-2" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">MAP_TYPE_HYBRID</div><!--[--><p>![<code>GoogleMap.MAP_TYPE_HYBRID</code> displays a combination of the satellite and normal mode](https://koenig-media.raywenderlich.com/uploads/2018/01/hybrid.png =240x)</p><!--]--></div><!--]--></div><hr><h2 id="implementing-geocoding" tabindex="-1"><a class="header-anchor" href="#implementing-geocoding"><span>Implementing Geocoding</span></a></h2><p>Now that you have the userâ€™s location, it would be nice if you could show the address of that location when the user clicks on the marker. Google has a class that does exactly that: <code>Geocoder</code>. This takes the coordinates of a location and returns a readable address and vice versa.</p><p>Open <code>MapsActivity</code>. Add the following method:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">getAddress</span><span class="token punctuation">(</span>latLng<span class="token operator">:</span> LatLng<span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 1</span></span>
<span class="line">  <span class="token keyword">val</span> geocoder <span class="token operator">=</span> <span class="token function">Geocoder</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">val</span> addresses<span class="token operator">:</span> List<span class="token operator">&lt;</span>Address<span class="token operator">&gt;</span><span class="token operator">?</span></span>
<span class="line">  <span class="token keyword">val</span> address<span class="token operator">:</span> Address<span class="token operator">?</span></span>
<span class="line">  <span class="token keyword">var</span> addressText <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;&quot;</span></span></span>
<span class="line">    </span>
<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 2</span></span>
<span class="line">    addresses <span class="token operator">=</span> geocoder<span class="token punctuation">.</span><span class="token function">getFromLocation</span><span class="token punctuation">(</span>latLng<span class="token punctuation">.</span>latitude<span class="token punctuation">,</span> latLng<span class="token punctuation">.</span>longitude<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// 3</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> addresses &amp;amp<span class="token punctuation">;</span>&amp;amp<span class="token punctuation">;</span> <span class="token operator">!</span>addresses<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      address <span class="token operator">=</span> addresses<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></span>
<span class="line">      <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">0</span> until address<span class="token punctuation">.</span>maxAddressLineIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        addressText <span class="token operator">+=</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> address<span class="token punctuation">.</span><span class="token function">getAddressLine</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token string-literal singleline"><span class="token string">&quot;\n&quot;</span></span> <span class="token operator">+</span> address<span class="token punctuation">.</span><span class="token function">getAddressLine</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> IOException<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;MapsActivity&quot;</span></span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>localizedMessage<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> addressText</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The import for <code>Address</code> is ambiguous, so specify the following import to resolve the issue:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">import</span> android<span class="token punctuation">.</span>location<span class="token punctuation">.</span>Address</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Briefly, hereâ€™s whatâ€™s going on:</p><ol><li>Creates a Geocoder object to turn a latitude and longitude coordinate into an address and vice versa.</li><li>Asks the geocoder to get the address from the location passed to the method.</li><li>If the response contains any address, then append it to a string and return.</li></ol><p>Replace <code>placeMarkerOnMap()</code> with the following.</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">placeMarkerOnMap</span><span class="token punctuation">(</span>location<span class="token operator">:</span> LatLng<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">val</span> markerOptions <span class="token operator">=</span> <span class="token function">MarkerOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">val</span> titleStr <span class="token operator">=</span> <span class="token function">getAddress</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span>  <span class="token comment">// add these two lines</span></span>
<span class="line">  markerOptions<span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span>titleStr<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  map<span class="token punctuation">.</span><span class="token function">addMarker</span><span class="token punctuation">(</span>markerOptions<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here you added a call to <code>getAddress()</code> and added this address as the marker title.</p><p>Build and run to view your progress so far</p><p>![Click on the marker to see the address](https://koenig-media.raywenderlich.com/uploads/2018/01/address.png =240x)</p><p>Click anywhere on the map to dismiss the address.</p><p>Notice that when you move locations, the blue dot moves with you, but the marker remains at itâ€™s first location. If youâ€™re using a physical device, try moving around to see this. If you are on emulator, change your coordinates to another location in your emulator control.</p><p>The marker doesnâ€™t move because your code does not know that the location has changed. The blue dot is controlled by the Google API, not your code. If you want the marker to follow the blue dot always, you need to receive location updates as a call-back in your code.</p><hr><h2 id="receiving-location-updates" tabindex="-1"><a class="header-anchor" href="#receiving-location-updates"><span>Receiving Location Updates</span></a></h2><p>Knowing your userâ€™s location at all times can help you provide a better experience. This section of the tutorial shows you how to continuously receive updates of your userâ€™s location.</p><p>To do this, you first have to create a location request.</p><p>Open <code>MapsActivity</code>. Now add the following properties:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token comment">// 1</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> locationCallback<span class="token operator">:</span> LocationCallback</span>
<span class="line"><span class="token comment">// 2</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> locationRequest<span class="token operator">:</span> LocationRequest</span>
<span class="line"><span class="token keyword">private</span> <span class="token keyword">var</span> locationUpdateState <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">companion</span> <span class="token keyword">object</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token keyword">val</span> LOCATION_PERMISSION_REQUEST_CODE <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">  <span class="token comment">// 3</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token keyword">val</span> REQUEST_CHECK_SETTINGS <span class="token operator">=</span> <span class="token number">2</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>Declare a <a href="https://developers.google.com/android/reference/com/google/android/gms/location/LocationCallback" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i><code>LocationCallback</code></a> property.</li><li>Declare a <a href="https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i><code>LocationRequest</code></a> property and a location updated state property.</li><li><code>REQUEST_CHECK_SETTINGS</code> is used as the request code passed to <code>onActivityResult</code>.</li></ol><p>Next add the following:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">startLocationUpdates</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">//1</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>ActivityCompat<span class="token punctuation">.</span><span class="token function">checkSelfPermission</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span></span>
<span class="line">      android<span class="token punctuation">.</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>ACCESS_FINE_LOCATION<span class="token punctuation">)</span> <span class="token operator">!=</span> PackageManager<span class="token punctuation">.</span>PERMISSION_GRANTED<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    ActivityCompat<span class="token punctuation">.</span><span class="token function">requestPermissions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token function">arrayOf</span><span class="token punctuation">(</span>android<span class="token punctuation">.</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>ACCESS_FINE_LOCATION<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        LOCATION_PERMISSION_REQUEST_CODE<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">//2</span></span>
<span class="line">  fusedLocationClient<span class="token punctuation">.</span><span class="token function">requestLocationUpdates</span><span class="token punctuation">(</span>locationRequest<span class="token punctuation">,</span> locationCallback<span class="token punctuation">,</span> <span class="token keyword">null</span> <span class="token comment">/* Looper */</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>In <code>startLocationUpdates()</code>, if the <code>ACCESS_FINE_LOCATION</code> permission has not been granted, request it now and return.</li><li>If there is permission, request for location updates.</li></ol><p>Now add the following method:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">createLocationRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 1</span></span>
<span class="line">  locationRequest <span class="token operator">=</span> <span class="token function">LocationRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token comment">// 2</span></span>
<span class="line">  locationRequest<span class="token punctuation">.</span>interval <span class="token operator">=</span> <span class="token number">10000</span></span>
<span class="line">  <span class="token comment">// 3</span></span>
<span class="line">  locationRequest<span class="token punctuation">.</span>fastestInterval <span class="token operator">=</span> <span class="token number">5000</span></span>
<span class="line">  locationRequest<span class="token punctuation">.</span>priority <span class="token operator">=</span> LocationRequest<span class="token punctuation">.</span>PRIORITY_HIGH_ACCURACY</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">val</span> builder <span class="token operator">=</span> LocationSettingsRequest<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">addLocationRequest</span><span class="token punctuation">(</span>locationRequest<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// 4</span></span>
<span class="line">  <span class="token keyword">val</span> client <span class="token operator">=</span> LocationServices<span class="token punctuation">.</span><span class="token function">getSettingsClient</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">val</span> task <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">checkLocationSettings</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// 5</span></span>
<span class="line">  task<span class="token punctuation">.</span><span class="token function">addOnSuccessListener</span> <span class="token punctuation">{</span></span>
<span class="line">    locationUpdateState <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">    <span class="token function">startLocationUpdates</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  task<span class="token punctuation">.</span><span class="token function">addOnFailureListener</span> <span class="token punctuation">{</span> e <span class="token operator">-&gt;</span></span>
<span class="line">    <span class="token comment">// 6</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">is</span> ResolvableApiException<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// Location settings are not satisfied, but this can be fixed</span></span>
<span class="line">      <span class="token comment">// by showing the user a dialog.</span></span>
<span class="line">      <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// Show the dialog by calling startResolutionForResult(),</span></span>
<span class="line">        <span class="token comment">// and check the result in onActivityResult().</span></span>
<span class="line">        e<span class="token punctuation">.</span><span class="token function">startResolutionForResult</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token label symbol">@MapsActivity</span><span class="token punctuation">,</span></span>
<span class="line">            REQUEST_CHECK_SETTINGS<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>sendEx<span class="token operator">:</span> IntentSender<span class="token punctuation">.</span>SendIntentException<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// Ignore the error.</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Hereâ€™s whatâ€™s going on in <code>createLocationRequest()</code>:</p><p>![Before you start requesting for location updates, you need to check the state of the userâ€™s location settings.](https://koenig-media.raywenderlich.com/uploads/2018/01/location.png =240x)</p><p>Now add the following three methods:</p><p>Hereâ€™s whatâ€™s going on:</p><p>Setup the <code>LocationCallback()</code> in <code>onCreate()</code> to be:</p><p>Here you update <code>lastLocation</code> with the new location and update the map with the new location coordinates.</p><p>Next, add a call to <code>createLocationRequest()</code> to the bottom of <code>onCreate()</code>:</p><p>Your app is now set to receive location updates. When you change your location, the map will update with a new marker showing your new location. Note that the markers are still clickable to get the address as before.</p><p>Build and run.</p><p>![Play around with the app to view the changes](https://koenig-media.raywenderlich.com/uploads/2018/01/moving.png =240x)</p><p>Since this app is supposed to be a guide, a user should be able to search for places of interest to them, right?</p><p>Thatâ€™s where the Google Places API comes in; it provides your app the functionality to search for millions of institutions and places of interest. Itâ€™s Android Library provides a number of cool functionalities, one of them being the <strong>Place Picker</strong>, which is a UI widget that lets you provide a place search functionality with very few lines of code. Too good to be true? Try it!</p><p>Add the places API to your app <i class="vp-icon iconfont icon-gradle" sizing="height"></i><code>build.gradle</code>:</p><p>Once again, open <code>MapsActivity</code>.</p><p>Add this constant to the <code>companion object</code>:</p><p>Now add the following method:</p><p>This method creates a new builder for an intent to start the Place Picker UI and then starts the <code>PlacePicker</code> intent.</p><p>Now add the following lines of code to <code>onActivityResult()</code>:</p><p>Here you retrieve details about the selected place if it has a <code>RESULT_OK</code> result for a <code>PLACE_PICKER_REQUEST</code> request, and then place a marker on that position on the map.</p><p>You are almost ready to try out the place search â€” you just need to call <strong>loadPlacePicker()</strong> inside the code.</p><p>Youâ€™ll create a floating action button (FAB) at the bottom-right of the map to trigger this method. FAB requires <code>CoordinatorLayout</code> which is part of the design support library.</p><p>Go back to <i class="vp-icon iconfont icon-gradle" sizing="height"></i><code>build.gradle</code> for the app and add the <strong>Android support design library</strong> as a dependency:</p><p>Then replace the contents of <strong>res &gt; layout &gt; activity_maps.xml</strong> with the following lines of code:</p><p>You were using a fragment element for map earlier; youâ€™ve kept that and added a floating action button.</p><p>In <code>MapsActivity</code>, add the following lines of code to <code>onCreate()</code>:</p><p>Build and run.</p><p>![Now when you click the search button at the bottom of the map the place picker will load](https://koenig-media.raywenderlich.com/uploads/2018/01/harvard.gif =240x)</p><p>You can download the final project from this tutorial <a href="https://koenig-media.raywenderlich.com/uploads/2018/01/cityguide-final-1.zip" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-file-zipper" sizing="height"></i>here</a>. Remember to put a valid Google Maps API key in <i class="vp-icon iconfont icon-code" sizing="height"></i><code>google_maps_api.xml</code> when running the final project.</p><p>This Google Maps API tutorial only brushed the surface of what you can do with the Google Maps APIs. The official Google documentation has much more about <a href="https://developers.google.com/maps/web-services/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-google" sizing="height"></i>web services</a> and <a href="https://developers.google.com/maps/documentation/android-api/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i>and the Android API here</a>.</p><p>You can also check out the developer page on other ways to <a href="https://developers.google.com/maps/documentation/android-api/marker#customize_a_marker" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i>customize the marker</a>. User permission checks for run-time permissions need a better implementation than what youâ€™ve done in this Google Maps API tutorial; the docs also have some great information <a href="https://developer.android.com/training/permissions/requesting.html" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i>about more advanced permission granting here</a>.</p><p>Check out the developer pages for extensive reading on the <a href="https://developers.google.com/places/android-api/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i>Google Places API for Android</a>, <a href="https://developer.android.com/training/location/change-location-settings.html#location-request" target="_blank" rel="noopener noreferrer">receiving location updates</a> and mocking location data via the <a href="https://developer.android.com/studio/run/emulator.html#extended" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i>emulatorâ€™s extended controls</a>.</p><p>If you have any questions or comments, please feel free to join the forum discussion below!</p><ol><li>You create an instance of LocationRequest, add it to an instance of <code>LocationSettingsRequest.Builder</code> and retrieve and handle any changes to be made based on the current state of the userâ€™s location settings.</li><li><code>interval</code> specifies the rate at which your app will like to receive updates.</li><li><code>fastestInterval</code> specifies the fastest rate at which the app can handle updates. Setting the <code>fastestInterval</code> rate places a limit on how fast updates will be sent to your app.</li><li>re you start requesting for location updates, you need to check the state of the userâ€™s location settings.</li><li>You create a settings client and a task to check location settings.</li><li>A task <code>success</code> means all is well and you can go ahead and initiate a location request.</li><li>A task <code>failure</code> means the location settings have some issues which can be fixed. This could be as a result of the userâ€™s location settings turned off</li></ol><p>![You fix this by showing the user a dialog](https://koenig-media.raywenderlich.com/uploads/2018/01/location.png =240x)</p><p>Now add the following three methods:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token comment">// 1</span></span>
<span class="line"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onActivityResult</span><span class="token punctuation">(</span>requestCode<span class="token operator">:</span> Int<span class="token punctuation">,</span> resultCode<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token operator">:</span> Intent<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onActivityResult</span><span class="token punctuation">(</span>requestCode<span class="token punctuation">,</span> resultCode<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>requestCode <span class="token operator">==</span> REQUEST_CHECK_SETTINGS<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>resultCode <span class="token operator">==</span> Activity<span class="token punctuation">.</span>RESULT_OK<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      locationUpdateState <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">      <span class="token function">startLocationUpdates</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2</span></span>
<span class="line"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  fusedLocationClient<span class="token punctuation">.</span><span class="token function">removeLocationUpdates</span><span class="token punctuation">(</span>locationCallback<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>locationUpdateState<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">startLocationUpdates</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Hereâ€™s whatâ€™s going on:</p><ol><li>Override <code>AppCompatActivity</code>â€™s <code>onActivityResult()</code> method and start the update request if it has a <code>RESULT_OK</code> result for a <code>REQUEST_CHECK_SETTINGS</code> request.</li><li>Override <code>onPause()</code> to stop location update request</li><li>Override <code>onResume()</code> to restart the location update request.</li></ol><p>Setup the <code>LocationCallback()</code> in <code>onCreate()</code> to be:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line">locationCallback <span class="token operator">=</span> <span class="token keyword">object</span> <span class="token operator">:</span> <span class="token function">LocationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onLocationResult</span><span class="token punctuation">(</span>p0<span class="token operator">:</span> LocationResult<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onLocationResult</span><span class="token punctuation">(</span>p0<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    lastLocation <span class="token operator">=</span> p0<span class="token punctuation">.</span>lastLocation</span>
<span class="line">    <span class="token function">placeMarkerOnMap</span><span class="token punctuation">(</span><span class="token function">LatLng</span><span class="token punctuation">(</span>lastLocation<span class="token punctuation">.</span>latitude<span class="token punctuation">,</span> lastLocation<span class="token punctuation">.</span>longitude<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here you update <code>lastLocation</code> with the new location and update the map with the new location coordinates.</p><p>Next, add a call to <code>createLocationRequest()</code> to the bottom of <code>onCreate()</code>:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token function">createLocationRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Your app is now set to receive location updates. When you change your location, the map will update with a new marker showing your new location. Note that the markers are still clickable to get the address as before.</p><p>Build and run.</p><p>![Play around with the app to view the changes](https://koenig-media.raywenderlich.com/uploads/2018/01/moving.png =240x)</p><hr><h2 id="place-search" tabindex="-1"><a class="header-anchor" href="#place-search"><span>Place Search</span></a></h2><p>Since this app is supposed to be a guide, a user should be able to search for places of interest to them, right?</p><p>Thatâ€™s where the Google Places API comes in; it provides your app the functionality to search for millions of institutions and places of interest. Itâ€™s Android Library provides a number of cool functionalities, one of them being the <strong>Place Picker</strong>, which is a UI widget that lets you provide a place search functionality with very few lines of code. Too good to be true? Try it!</p><p>Add the places API to your app <i class="vp-icon iconfont icon-gradle" sizing="height"></i><code>build.gradle</code>:</p><div class="language-groovy line-numbers-mode" data-highlighter="prismjs" data-ext="groovy"><pre><code class="language-groovy"><span class="line">implementation <span class="token string">&#39;com.google.android.gms:play-services-places:11.8.0&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Once again, open <code>MapsActivity</code>.</p><p>Add this constant to the <code>companion object</code>:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token keyword">val</span> PLACE_PICKER_REQUEST <span class="token operator">=</span> <span class="token number">3</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now add the following method:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">loadPlacePicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">val</span> builder <span class="token operator">=</span> PlacePicker<span class="token punctuation">.</span><span class="token function">IntentBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">startActivityForResult</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> PLACE_PICKER_REQUEST<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> GooglePlayServicesRepairableException<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> GooglePlayServicesNotAvailableException<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This method creates a new builder for an intent to start the Place Picker UI and then starts the <code>PlacePicker</code> intent.</p><p>Now add the following lines of code to <code>onActivityResult()</code>:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>requestCode <span class="token operator">==</span> PLACE_PICKER_REQUEST<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>resultCode <span class="token operator">==</span> RESULT_OK<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">val</span> place <span class="token operator">=</span> PlacePicker<span class="token punctuation">.</span><span class="token function">getPlace</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">var</span> addressText <span class="token operator">=</span> place<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    addressText <span class="token operator">+=</span> <span class="token string-literal singleline"><span class="token string">&quot;\n&quot;</span></span> <span class="token operator">+</span> place<span class="token punctuation">.</span>address<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">placeMarkerOnMap</span><span class="token punctuation">(</span>place<span class="token punctuation">.</span>latLng<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here you retrieve details about the selected place if it has a <code>RESULT_OK</code> result for a <code>PLACE_PICKER_REQUEST</code> request, and then place a marker on that position on the map.</p><p>You are almost ready to try out the place search â€” you just need to call <code>loadPlacePicker()</code> inside the code.</p><p>Youâ€™ll create a floating action button (FAB) at the bottom-right of the map to trigger this method. FAB requires <code>CoordinatorLayout</code> which is part of the design support library.</p><p>Go back to <i class="vp-icon iconfont icon-gradle" sizing="height"></i><code>build.gradle</code> for the app and add the <strong>Android support design library</strong> as a dependency:</p><div class="language-groovy line-numbers-mode" data-highlighter="prismjs" data-ext="groovy"><pre><code class="language-groovy"><span class="line">implementation <span class="token string">&#39;com.android.support:design:26.1.0&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container note"><p class="hint-container-title">Note</p><p>As usual, if you are using a newer Android SDK version, you may need to update the version of this dependency as well so they match.</p></div><p>Then replace the contents of <strong>res &gt; layout &gt; activity_maps.xml</strong> with the following lines of code:</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>android.support.design.widget.CoordinatorLayout</span></span>
<span class="line">  <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name"><span class="token namespace">android:</span>fitsSystemWindows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fragment</span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/map<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.google.android.gms.maps.SupportMapFragment<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>android.support.design.widget.FloatingActionButton</span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/fab<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottom|end<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_marginRight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>8dp<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_marginBottom</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>112dp<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@android:drawable/ic_menu_search<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>android.support.design.widget.CoordinatorLayout</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You were using a fragment element for map earlier; youâ€™ve kept that and added a floating action button.</p><p>In <code>MapsActivity</code>, add the following lines of code to <code>onCreate()</code>:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">val</span> fab <span class="token operator">=</span> findViewById<span class="token operator">&lt;</span>FloatingActionButton<span class="token operator">&gt;</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>fab<span class="token punctuation">)</span></span>
<span class="line">fab<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">loadPlacePicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Build and run.</p><p>![Now when you click the search button at the bottom of the map the place picker will load](https://koenig-media.raywenderlich.com/uploads/2018/01/harvard.gif =240x)</p><hr><h2 id="where-to-go-from-here" tabindex="-1"><a class="header-anchor" href="#where-to-go-from-here"><span>Where to Go From Here?</span></a></h2><p>You can download the final project from this tutorial <a href="https://koenig-media.raywenderlich.com/uploads/2018/01/cityguide-final-1.zip" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-file-zipper" sizing="height"></i>here</a>. Remember to put a valid Google Maps API key in <strong>google_maps_api.xml</strong> when running the final project.</p><p>This Google Maps API tutorial only brushed the surface of what you can do with the Google Maps APIs. The official Google documentation has much more about <a href="https://developers.google.com/maps/web-services/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-google" sizing="height"></i>web services</a> and <a href="https://developers.google.com/maps/documentation/android-api/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i>and the Android API here</a>.</p><p>You can also check out the developer page on other ways to <a href="https://developers.google.com/maps/documentation/android-api/marker#customize_a_marker" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i>customize the marker</a>. User permission checks for run-time permissions need a better implementation than what youâ€™ve done in this Google Maps API tutorial; the docs also have some great information <a href="https://developer.android.com/training/permissions/requesting.html" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i>about more advanced permission granting here</a>.</p><p>Check out the developer pages for extensive reading on the <a href="https://developers.google.com/places/android-api/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i>Google Places API for Android</a>, <a href="https://developer.android.com/training/location/change-location-settings.html#location-request" target="_blank" rel="noopener noreferrer">receiving location updates</a> and mocking location data via the <a href="https://developer.android.com/studio/run/emulator.html#extended" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-android" sizing="height"></i>emulatorâ€™s extended controls</a>.</p><p>If you have any questions or comments, please feel free to join the forum discussion below!</p><ol><li>Override <code>AppCompatActivity</code>â€™s <code>onActivityResult()</code> method and start the update request if it has a <code>RESULT_OK</code> result for a <code>REQUEST_CHECK_SETTINGS</code> request.</li><li>Override <code>onPause()</code> to stop location update request</li><li>Override <code>onResume()</code> to restart the location update request.</li></ol><div class="hint-container note"><p class="hint-container-title">Note</p><p>As usual, if you are using a newer Android SDK version, you may need to update the version of this dependency as well so they match.</p></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token comment">// 1</span></span>
<span class="line"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onActivityResult</span><span class="token punctuation">(</span>requestCode<span class="token operator">:</span> Int<span class="token punctuation">,</span> resultCode<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token operator">:</span> Intent<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onActivityResult</span><span class="token punctuation">(</span>requestCode<span class="token punctuation">,</span> resultCode<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>requestCode <span class="token operator">==</span> REQUEST_CHECK_SETTINGS<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>resultCode <span class="token operator">==</span> Activity<span class="token punctuation">.</span>RESULT_OK<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      locationUpdateState <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">      <span class="token function">startLocationUpdates</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2</span></span>
<span class="line"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  fusedLocationClient<span class="token punctuation">.</span><span class="token function">removeLocationUpdates</span><span class="token punctuation">(</span>locationCallback<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>locationUpdateState<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">startLocationUpdates</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line">locationCallback <span class="token operator">=</span> <span class="token keyword">object</span> <span class="token operator">:</span> <span class="token function">LocationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onLocationResult</span><span class="token punctuation">(</span>p0<span class="token operator">:</span> LocationResult<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onLocationResult</span><span class="token punctuation">(</span>p0<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    lastLocation <span class="token operator">=</span> p0<span class="token punctuation">.</span>lastLocation</span>
<span class="line">    <span class="token function">placeMarkerOnMap</span><span class="token punctuation">(</span><span class="token function">LatLng</span><span class="token punctuation">(</span>lastLocation<span class="token punctuation">.</span>latitude<span class="token punctuation">,</span> lastLocation<span class="token punctuation">.</span>longitude<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token function">createLocationRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-groovy line-numbers-mode" data-highlighter="prismjs" data-ext="groovy"><pre><code class="language-groovy"><span class="line">implementation <span class="token string">&#39;com.google.android.gms:play-services-places:11.8.0&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token keyword">val</span> PLACE_PICKER_REQUEST <span class="token operator">=</span> <span class="token number">3</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">loadPlacePicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">val</span> builder <span class="token operator">=</span> PlacePicker<span class="token punctuation">.</span><span class="token function">IntentBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">startActivityForResult</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> PLACE_PICKER_REQUEST<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> GooglePlayServicesRepairableException<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> GooglePlayServicesNotAvailableException<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>requestCode <span class="token operator">==</span> PLACE_PICKER_REQUEST<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>resultCode <span class="token operator">==</span> RESULT_OK<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">val</span> place <span class="token operator">=</span> PlacePicker<span class="token punctuation">.</span><span class="token function">getPlace</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">var</span> addressText <span class="token operator">=</span> place<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    addressText <span class="token operator">+=</span> <span class="token string-literal singleline"><span class="token string">&quot;\n&quot;</span></span> <span class="token operator">+</span> place<span class="token punctuation">.</span>address<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">placeMarkerOnMap</span><span class="token punctuation">(</span>place<span class="token punctuation">.</span>latLng<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-groovy line-numbers-mode" data-highlighter="prismjs" data-ext="groovy"><pre><code class="language-groovy"><span class="line">implementation <span class="token string">&#39;com.android.support:design:26.1.0&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>android.support.design.widget.CoordinatorLayout</span></span>
<span class="line">  <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name"><span class="token namespace">android:</span>fitsSystemWindows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fragment</span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/map<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.google.android.gms.maps.SupportMapFragment<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>android.support.design.widget.FloatingActionButton</span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/fab<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottom|end<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_marginRight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>8dp<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_marginBottom</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>112dp<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@android:drawable/ic_menu_search<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>android.support.design.widget.CoordinatorLayout</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">val</span> fab <span class="token operator">=</span> findViewById<span class="token operator">&lt;</span>FloatingActionButton<span class="token operator">&gt;</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>fab<span class="token punctuation">)</span></span>
<span class="line">fab<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">loadPlacePicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/chanhi2000/bookshelf/edit/main/src/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/bookshelf/programming/java-android/articles/" aria-label="/programming/java-android/articles/"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->/programming/java-android/articles/</div></a><a class="route-link auto-link next" href="/bookshelf/kodeco.com/1144981-kotlin-for-android-an-introduction.html" aria-label="Kotlin For Android: An Introduction"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Kotlin For Android: An Introduction<i class="vp-icon fa-brands fa-android" sizing="height"></i></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">MIT Licensed | Copyright Â© 2022-present <a href="https://github.com/chanhi2000">Chan Hee Lee</a></div><!----></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/bookshelf/assets/app-BItykJLQ.js" defer></script>
  </body>
</html>
