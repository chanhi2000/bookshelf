<!doctype html>
<html lang="ko-KR" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.99" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"SQLite With Swift Tutorial: Getting Started","image":["https://koenig-media.raywenderlich.com/uploads/2019/11/sqliteswift_manually_run_playground_highlighted.png","https://koenig-media.raywenderlich.com/uploads/2019/11/sqliteswift_show_debug_area-2.png","https://koenig-media.raywenderlich.com/uploads/2019/12/SQLite-table.png","https://koenig-media.raywenderlich.com/uploads/2019/11/sqliteswift_close_connection.png","https://koenig-media.raywenderlich.com/uploads/2017/09/swift-weights-320x320.png","https://koenig-media.raywenderlich.com/uploads/2019/11/sqliteswift_making_it_to_swift_highlighted.png"],"datePublished":"2020-01-13T00:00:00.000Z","dateModified":null,"author":[]}</script><meta property="og:url" content="https://chanhi2000.github.io/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html"><meta property="og:site_name" content="ðŸ“šBookshelf"><meta property="og:title" content="SQLite With Swift Tutorial: Getting Started"><meta property="og:description" content="Article(s) > SQLite With Swift Tutorial: Getting Started"><meta property="og:type" content="article"><meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2019/12/SQLite-twitter.png"><meta property="og:locale" content="ko-KR"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:src" content="https://koenig-media.raywenderlich.com/uploads/2019/12/SQLite-twitter.png"><meta name="twitter:image:alt" content="SQLite With Swift Tutorial: Getting Started"><meta property="article:tag" content="sqlite"><meta property="article:tag" content="xcode"><meta property="article:tag" content="ios"><meta property="article:tag" content="swift"><meta property="article:tag" content="kodeco.com"><meta property="article:tag" content="blog"><meta property="article:published_time" content="2020-01-13T00:00:00.000Z"><link rel="icon" href="/bookshelf/assets/icon/favicon.svg"><title>SQLite With Swift Tutorial: Getting Started | ðŸ“šBookshelf</title><meta name="description" content="Article(s) > SQLite With Swift Tutorial: Getting Started">
    <link rel="preload" href="/bookshelf/assets/style-Bhb-QcDa.css" as="style"><link rel="stylesheet" href="/bookshelf/assets/style-Bhb-QcDa.css">
    
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/bookshelf/" aria-label="Take me home"><img class="vp-nav-logo" src="/bookshelf/assets/icon/favicon.svg" alt><!----><span class="vp-site-name hide-in-pad">ðŸ“šBookshelf</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/bookshelf/news.html" aria-label><!--[--><i class="vp-icon fas fa-rss" sizing="height"></i><!--]--><!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-keyboard" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/hackingwithswift.com/" aria-label="hackingwithswift.com"><!--[--><img class="vp-icon" src="https://hackingwithswift.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->hackingwithswift.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fcc/" aria-label="freecodecamp.org"><!--[--><img class="vp-icon" src="https://cdn.freecodecamp.org/universal/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->freecodecamp.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/bookshelf/kodeco.com/" aria-label="kodeco.com"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->kodeco.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.kotzilla.io/" aria-label="blog.kotzilla.io"><!--[--><img class="vp-icon" src="https://blog.kotzilla.io/hubfs/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.kotzilla.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kt.academy/" aria-label="kt.academy"><!--[--><img class="vp-icon" src="https://kt.academy/logo.png" alt aria-hidden no-view sizing="both"><!--]-->kt.academy<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/droidcon.com/" aria-label="droidcon.com"><!--[--><img class="vp-icon" src="https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png" alt aria-hidden no-view sizing="both"><!--]-->droidcon.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/outcomeschool.com/" aria-label="outcomeschool.com"><!--[--><img class="vp-icon" src="https://outcomeschool.com/static/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->outcomeschool.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/frontendmasters.com/" aria-label="frontendmasters.com"><!--[--><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->frontendmasters.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tricks.com/" aria-label="css-tricks.com"><!--[--><img class="vp-icon" src="https://css-tricks.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->css-tricks.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="smashingmagazine.com"><!--[--><img class="vp-icon" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->smashingmagazine.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="oddbird.net"><!--[--><img class="vp-icon" src="https://oddbird.net/safari-pinned-tab.svg" alt aria-hidden no-view sizing="both"><!--]-->oddbird.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/zeroheight.com/" aria-label="zeroheight.com"><!--[--><img class="vp-icon" src="https://zeroheight.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->zeroheight.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/typescript.tv/" aria-label="typescript.tv"><!--[--><img class="vp-icon" src="https://typescript.tv/_astro/android-chrome-192x192.BhQ8hcWh.png" alt aria-hidden no-view sizing="both"><!--]-->typescript.tv<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.logrocket.com/" aria-label="blog.logrocket.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.logrocket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/realpython.com/" aria-label="realpython.com"><!--[--><img class="vp-icon" src="https://realpython.com/static/favicon.68cbf4197b0c.png" alt aria-hidden no-view sizing="both"><!--]-->realpython.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/digitalocean.com/" aria-label="digitalocean.com"><!--[--><img class="vp-icon" src="https://digitalocean.com/_next/static/media/favicon.594d6067.ico" alt aria-hidden no-view sizing="both"><!--]-->digitalocean.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/antonioleiva.com/" aria-label="antonioleiva.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/antonioleiva.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->antonioleiva.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/johnnyreilly.com/" aria-label="johnnyreilly.com"><!--[--><img class="vp-icon" src="https://johnnyreilly.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->johnnyreilly.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/code-maze.com/" aria-label="code-maze.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/code-maze.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->code-maze.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/milanjovanovic.tech/" aria-label="milanjovanovic.tech"><!--[--><img class="vp-icon" src="https://milanjovanovic.tech/profile_favicon.png" alt aria-hidden no-view sizing="both"><!--]-->milanjovanovic.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/shopify.engineering/" aria-label="shopify.engineering"><!--[--><img class="vp-icon" src="https://cdn.shopify.com/static/shopify-favicon.png" alt aria-hidden no-view sizing="both"><!--]-->shopify.engineering<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devtoolstips.org/" aria-label="devtoolstips.org"><!--[--><img class="vp-icon" src="https://devtoolstips.org/assets/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devtoolstips.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/piccalil.li/" aria-label="piccalil.li"><!--[--><img class="vp-icon" src="https://piccalil.li/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->piccalil.li<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/sitepoint.com/" aria-label="sitepoint.com"><!--[--><img class="vp-icon" src="https://sitepoint.com/favicons/512x512.png" alt aria-hidden no-view sizing="both"><!--]-->sitepoint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/event-driven.io/" aria-label="event-driven.io"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/event-driven.io/favicon.jfif" alt aria-hidden no-view sizing="both"><!--]-->event-driven.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/packagemain.tech/" aria-label="packagemain.tech"><!--[--><img class="vp-icon" src="https://substack-post-media.s3.amazonaws.com/public/images/2ea54e25-eaa6-4630-bfc0-10b8cfdce894/apple-touch-icon-1024x1024.png" alt aria-hidden no-view sizing="both"><!--]-->packagemain.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/gosolve.io/" aria-label="gosolve.io"><!--[--><img class="vp-icon" src="https://gosolve.io/wp-content/uploads/2022/03/cropped-ikona1-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->gosolve.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/bram.us/" aria-label="bram.us"><!--[--><img class="vp-icon" src="https://bram.us/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->bram.us<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/una.im/" aria-label="una.im"><!--[--><img class="vp-icon" src="https://una.im/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->una.im<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/joshwcomeau.com/" aria-label="joshwcomeau.com"><!--[--><img class="vp-icon" src="https://joshwcomeau.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->joshwcomeau.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tip.com/" aria-label="css-tip.com"><!--[--><img class="vp-icon" src="https://css-tip.com/img/fav.png" alt aria-hidden no-view sizing="both"><!--]-->css-tip.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/nerdy.dev/" aria-label="nerdy.dev"><!--[--><img class="vp-icon" src="https://nerdy.dev/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->nerdy.dev<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/towardsdatascience.com/" aria-label="towardsdatascience.com"><!--[--><img class="vp-icon" src="https://cdn-images-1.medium.com/v2/resize:fill:128:128/1*VzTUkfeGymHP4Bvav-T-lA.png" alt aria-hidden no-view sizing="both"><!--]-->towardsdatascience.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/douggregor.net/" aria-label="douggregor.net"><!--[--><i class="vp-icon fas fa-globe" sizing="both"></i><!--]-->douggregor.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/d2.naver.com/" aria-label="d2.naver.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/d2.naver.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->d2.naver.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakao.com/" aria-label="tech.kakao.com"><!--[--><img class="vp-icon" src="https://www.kakaocorp.com/page/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakao.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakaopay.com/" aria-label="tech.kakaopay.com"><!--[--><img class="vp-icon" src="https://tech.kakaopay.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakaopay.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fe-developers.kakaoent.com/" aria-label="fe-developers.kakaoent.com"><!--[--><img class="vp-icon" src="https://fe-developers.kakaoent.com/favicon-32x32.png?v=44803cb16c1e2debd3984cf2e8cb2ded" alt aria-hidden no-view sizing="both"><!--]-->fe-developers.kakaoent.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/yozm.wishket.com/" aria-label="yozm.wishket.com"><!--[--><img class="vp-icon" src="https://yozm.wishket.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->yozm.wishket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/popit.kr/" aria-label="popit.kr"><!--[--><img class="vp-icon" src="https://popit.kr/wp-content/uploads/2016/08/favicon_32x32.png" alt aria-hidden no-view sizing="both"><!--]-->popit.kr<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devkuma.com/" aria-label="devkuma.com"><!--[--><img class="vp-icon" src="https://devkuma.com/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devkuma.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.gangnamunni.com/" aria-label="blog.gangnamunni.com"><!--[--><img class="vp-icon" src="https://blog.gangnamunni.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->blog.gangnamunni.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/codingeverybody.kr/" aria-label="codingeverybody.kr"><!--[--><img class="vp-icon" src="https://codingeverybody.kr/wp-content/uploads/cropped-favicon-origin-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->codingeverybody.kr<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-network-wired" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tecmint.com/" aria-label="tecmint.com"><!--[--><img class="vp-icon" src="https://tecmint.com/wp-content/uploads/2020/07/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tecmint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/docker.com/" aria-label="docker.com"><!--[--><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->docker.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/learnkube.com/" aria-label="learnkube.com"><!--[--><img class="vp-icon" src="https://static.learnkube.com/f7e5160d4744cf05c46161170b5c11c9.svg" alt aria-hidden no-view sizing="both"><!--]-->learnkube.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/itsfoss.com/" aria-label="itsfoss.com"><!--[--><img class="vp-icon" src="https://itsfoss.com/content/images/size/w256h256/2022/12/android-chrome-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->itsfoss.com<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/chanhi2000/bookshelf" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><!----></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><span class="vp-sidebar-title">kodeco.com</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/" aria-label="Kodeco (kodeco.com)"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->Kodeco (kodeco.com)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/523-augmented-reality-in-android-with-google-s-face-api.html" aria-label="Augmented Reality in Android with Googleâ€™s Face API"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Augmented Reality in Android with Googleâ€™s Face API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/324-viewpager-tutorial-getting-started-in-kotlin.html" aria-label="ViewPager Tutorial - Getting Started in Kotlin"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->ViewPager Tutorial - Getting Started in Kotlin<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html" aria-label="Couchbase Tutorial for Android - Getting Started"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Couchbase Tutorial for Android - Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/272-intermediate-recyclerview-tutorial-with-kotlin.html" aria-label="Intermediate RecyclerView Tutorial with Kotlin"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Intermediate RecyclerView Tutorial with Kotlin<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/262-dependency-injection-in-android-with-dagger-2-and-kotlin.html" aria-label="Dependency Injection in Android with Dagger 2 and Kotlin"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Dependency Injection in Android with Dagger 2 and Kotlin<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/254-getting-started-with-android-wear-with-kotlin.html" aria-label="Getting Started with Android Wear with Kotlin"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Getting Started with Android Wear with Kotlin<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/249-gradle-tutorial-for-android-getting-started.html" aria-label="Gradle Tutorial for Android - Getting Started"><!--[--><i class="vp-icon iconfont icon-gradle" sizing="both"></i><!--]-->Gradle Tutorial for Android - Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/247-react-native-tutorial-building-android-apps-with-javascript.html" aria-label="React Native Tutorial - Building Android Apps with JavaScript"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->React Native Tutorial - Building Android Apps with JavaScript<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/240-android-accessibility-tutorial-getting-started.html" aria-label="Android Accessibility Tutorial: Getting Started"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Android Accessibility Tutorial: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html" aria-label="Introduction to Google Maps API for Android with Kotlin"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Introduction to Google Maps API for Android with Kotlin<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/1144981-kotlin-for-android-an-introduction.html" aria-label="Kotlin For Android: An Introduction"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Kotlin For Android: An Introduction<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6398124-swiftui-tutorial-for-ios-creating-charts.html" aria-label="SwiftUI Tutorial for iOS - Creating Charts"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->SwiftUI Tutorial for iOS - Creating Charts<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6334294-my-app-crashed-now-what.html" aria-label="My App Crashed, Now What?"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->My App Crashed, Now What?<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html" aria-label="SQLite With Swift Tutorial: Getting Started"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->SQLite With Swift Tutorial: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6747815-uigesturerecognizer-tutorial-getting-started.html" aria-label="UIGestureRecognizer Tutorial: Getting Started"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->UIGestureRecognizer Tutorial: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6742901-protocol-oriented-programming-tutorial-in-swift-5-1-getting-started.html" aria-label="Protocol-Oriented Programming Tutorial in Swift 5.1: Getting Started"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->Protocol-Oriented Programming Tutorial in Swift 5.1: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/7076593-cocoapods-tutorial-for-swift-getting-started.html" aria-label="CocoaPods Tutorial for Swift: Getting Started"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->CocoaPods Tutorial for Swift: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/7181017-unsafe-swift-using-pointers-and-interacting-with-c.html" aria-label="Unsafe Swift: Using Pointers and Interacting With C"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->Unsafe Swift: Using Pointers and Interacting With C<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6827616-ios-accessibility-getting-started.html" aria-label="iOS Accessibility: Getting Started"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->iOS Accessibility: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6587213-alamofire-5-tutorial-for-ios-getting-started.html" aria-label="Alamofire 5 Tutorial for iOS: Getting Started"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->Alamofire 5 Tutorial for iOS: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/30067669-documenting-kotlin-code-for-android-using-kdoc-and-dokka.html" aria-label="Documenting Kotlin Code for Android Using KDoc and Dokka"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Documenting Kotlin Code for Android Using KDoc and Dokka<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/31290959-kotlin-sequences-getting-started.html" aria-label="Kotlin Sequences - Getting Started"><!--[--><i class="vp-icon iconfont icon-kotlin" sizing="both"></i><!--]-->Kotlin Sequences - Getting Started<!----></a></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><div class="page-cover"><img src="https://koenig-media.raywenderlich.com/uploads/2019/12/SQLite-twitter.png" alt no-view></div><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon fa-brands fa-swift" sizing="height"></i>SQLite With Swift Tutorial: Getting Started</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="Writing DateðŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">20. 1. 13.</span><meta property="datePublished" content="2020-01-13T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading TimeâŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 18 min</span><meta property="timeRequired" content="PT18M"></span><span class="page-category-info" aria-label="CategoryðŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color3" role>Swift</span><span class="page-category-item color4" role>SQLite</span><span class="page-category-item color8" role>Article(s)</span><!--]--><meta property="articleSection" content="Swift,SQLite,Article(s)"></span><span class="page-tag-info" aria-label="TagðŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8" role>blog</span><span class="page-tag-item color1" role>kodeco.com</span><span class="page-tag-item color6" role>swift</span><span class="page-tag-item color8" role>ios</span><span class="page-tag-item color6" role>xcode</span><span class="page-tag-item color6" role>sqlite</span><!--]--><meta property="keywords" content="blog,kodeco.com,swift,ios,xcode,sqlite"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="frontmatter-title-á„€á…ªá†«á„…á…§á†«" tabindex="-1"><a class="header-anchor" href="#frontmatter-title-á„€á…ªá†«á„…á…§á†«"><span>SQLite With Swift Tutorial: Getting Started ê´€ë ¨</span></a></h1><a class="route-link vp-card" href="/bookshelf/programming/swift/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="https://chanhi2000.github.io/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Swift > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><a class="route-link vp-card" href="/bookshelf/data-science/sqlite/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="https://chanhi2000.github.io/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">SQLite > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><nav class="table-of-contents"><ul><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#getting-started" class="router-link-active router-link-exact-active">Getting Started</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#why-should-you-choose-sqlite" class="router-link-active router-link-exact-active">Why Should You Choose SQLite?</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#the-c-api" class="router-link-active router-link-exact-active">The C API</a><ul><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#opening-a-connection" class="router-link-active router-link-exact-active">Opening a Connection</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#creating-a-table" class="router-link-active router-link-exact-active">Creating a Table</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#inserting-data" class="router-link-active router-link-exact-active">Inserting Data</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#challenge-multiple-inserts" class="router-link-active router-link-exact-active">Challenge: Multiple Inserts</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#querying-contacts" class="router-link-active router-link-exact-active">Querying Contacts</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#challenge-printing-every-row" class="router-link-active router-link-exact-active">Challenge: Printing Every Row</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#updating-contacts" class="router-link-active router-link-exact-active">Updating Contacts</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#deleting-contacts" class="router-link-active router-link-exact-active">Deleting Contacts</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#handling-errors" class="router-link-active router-link-exact-active">Handling Errors</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#closing-the-database-connection" class="router-link-active router-link-exact-active">Closing the Database Connection</a></li></ul></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#sqlite-with-swift" class="router-link-active router-link-exact-active">SQLite With Swift</a><ul><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#wrapping-errors" class="router-link-active router-link-exact-active">Wrapping Errors</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#wrapping-the-database-connection" class="router-link-active router-link-exact-active">Wrapping the Database Connection</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#wrapping-the-prepare-call" class="router-link-active router-link-exact-active">Wrapping the Prepare Call</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#creating-a-contact-struct" class="router-link-active router-link-exact-active">Creating a Contact Struct</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#wrapping-the-table-creation" class="router-link-active router-link-exact-active">Wrapping the Table Creation</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#wrapping-insertions" class="router-link-active router-link-exact-active">Wrapping Insertions</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#wrapping-reads" class="router-link-active router-link-exact-active">Wrapping Reads</a></li></ul></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#introducing-sqlite-swift" class="router-link-active router-link-exact-active">Introducing <i class="vp-icon fa-brands fa-swift" sizing="height"></i>SQLite.swift</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html#where-to-go-from-here" class="router-link-active router-link-exact-active">Where to Go From Here?</a></li></ul></nav><hr><div class="vp-site-info" data-name="SQLite With Swift Tutorial: Getting Started"><a class="vp-site-info-navigator no-external-link-icon" title="SQLite With Swift Tutorial: Getting Started" href="https://kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://koenig-media.raywenderlich.com/uploads/2019/12/SQLite-twitter.png) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://assets.carolus.kodeco.com/assets/murakami/category-icons/category-saving-data-persistence-ios-09771a6a821ae79fa6653f51395c14d66cb117d87648bb17bd04f20f9ff48576.svg" alt loading="lazy" no-view><div class="vp-site-info-name">SQLite With Swift Tutorial: Getting Started</div><div class="vp-site-info-desc">In this SQLite with Swift tutorial, youâ€™ll learn to use a SQLite database with Swift projects by creating tables and inserting, updating and deleting rows.</div></div><!----></div><p>In software development, it doesnâ€™t take long before you need to persist app data. Often, this comes in the form of data structures. But how do you store those structures efficiently?</p><p>Fortunately, some great minds have developed solutions for storing structured data in databases and writing language features to access that data. <strong>SQLite</strong> is available by default on iOS.</p><p>In fact, if youâ€™ve used <a href="https://www.raywenderlich.com/145809/getting-started-core-data-tutorial" target="_blank" rel="noopener noreferrer">Core Data</a> before, youâ€™ve already used SQLite. Core Data is just a layer on top of SQLite that provides a more convenient API.</p><p>In this SQLite with Swift tutorial, youâ€™ll learn how to perform the following database operations:</p><ul><li>Create and connect to a database.</li><li>Create a table.</li><li>Insert, update, and delete rows.</li><li>Query the database.</li><li>Handle SQLite errors.</li></ul><p>After learning how to perform these fundamental operations, youâ€™ll see how to wrap them in a Swift-like manner. This will let you write abstraction APIs for your apps and avoid working with the more complicated SQLite C APIs.</p><p>Finally, youâ€™ll briefly learn about the popular open-source Swift wrapper <a href="https://github.com/stephencelis/SQLite.swift" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-github" sizing="height"></i>stephencelis/SQLite</a>. This will give you a basic understanding of how underlying frameworks work within a wrapper.</p><div class="hint-container tip"><p class="hint-container-title">Note</p><p>Databases like SQLite are massive topics to cover, and covering how to use them is out of scope for this tutorial. This tutorial assumes that you have a basic understanding of relational databases and that youâ€™re primarily here to learn to use SQLite with Swift.</p></div><hr><h2 id="getting-started" tabindex="-1"><a class="header-anchor" href="#getting-started"><span>Getting Started</span></a></h2><p>Start by using the <a href="https://koenig-media.raywenderlich.com/uploads/2020/01/SQLite-With-Swift-Getting-Started.zip" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-download" sizing="height"></i><code>[Download Materials]</code></a> button at the top or bottom of this tutorial, then open <i class="vp-icon fas fa-file-lines" sizing="height"></i><code>SQLiteTutorial.xcworkspace</code> from the starter folder. Next, open the <i class="vp-icon iconfont icon-select" sizing="height"></i><code>[Tutorial]</code> playground from the <i class="vp-icon iconfont icon-select" sizing="height"></i><code>[Project navigator]</code>.</p><div class="hint-container tip"><p class="hint-container-title">Note</p><p>The project is in an Xcode workspace because it uses the <strong>SQLite3</strong> dependency as an embedded binary. This binary contains all the functionality for the SQLite code youâ€™ll write in this tutorial.</p></div><p>Long-click the Play button at the bottom and notice that your playground runs manually instead of automatically:</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2019/11/sqliteswift_manually_run_playground_highlighted.png" alt="Manual Run drop-down menu" tabindex="0" loading="lazy"><figcaption>Manual Run drop-down menu</figcaption></figure><p>This means it will only execute when you explicitly invoke the execution by clicking the Play button.</p><p>You might also see a <code>destroyPart1Database()</code> call at the top of the page. You can safely ignore this since the database file self-destructs each time the playground runs. This ensures all statements execute successfully as you move through this SQLite with Swift tutorial.</p><hr><h2 id="why-should-you-choose-sqlite" tabindex="-1"><a class="header-anchor" href="#why-should-you-choose-sqlite"><span>Why Should You Choose SQLite?</span></a></h2><p>SQLite isnâ€™t the only way to persist data on iOS. Besides <a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/index.html" target="_blank" rel="noopener noreferrer">Core Data</a>, there are many other alternatives for data persistence including <a href="https://realm.io" target="_blank" rel="noopener noreferrer">Realm</a>, <a href="http://developer.couchbase.com/mobile/#couchbase-lite" target="_blank" rel="noopener noreferrer">Couchbase Lite</a>, <a href="https://firebase.google.com/docs" target="_blank" rel="noopener noreferrer">Firebase</a> and <a href="http://nshipster.com/nscoding" target="_blank" rel="noopener noreferrer">NSCoding</a>.</p><p>Each of these has its own pros and cons â€” including SQLite itself. Thereâ€™s no silver bullet for data persistence. As the developer, itâ€™s up to you to determine which option surpasses the others based on your appâ€™s requirements.</p><p>SQLite has some advantages:</p><ul><li>Shipped with iOS, it adds no overhead to your appâ€™s bundle.</li><li>SQLite released version 1.0 in August 2000, so itâ€™s tried and tested.</li><li>Itâ€™s well-maintained with frequent releases.</li><li>Open-source.</li><li>It uses a query language thatâ€™s familiar to database developers and administrators.</li><li>Cross-platform.</li></ul><p>The cons of SQLite are subjective and opinionated, so that research is up to you!</p><p>Now that youâ€™ve committed to finding out how SQLite works with Swift, itâ€™s time to get to know some of the most basic SQLite APIs.</p><hr><h2 id="the-c-api" tabindex="-1"><a class="header-anchor" href="#the-c-api"><span>The C API</span></a></h2><p>This part of the SQLite with Swift tutorial walks you through the most common SQLite APIs. Wrapping the <strong>C API</strong> in Swift methods is ideal, but work through the <strong>C code</strong> first. Youâ€™ll wrap your C code in the second part of this tutorial.</p><h3 id="opening-a-connection" tabindex="-1"><a class="header-anchor" href="#opening-a-connection"><span>Opening a Connection</span></a></h3><p>Before doing anything, create a <strong>database connection</strong>.</p><p>Add the following function in your playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">openDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">OpaquePointer</span><span class="token operator">?</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> db<span class="token punctuation">:</span> <span class="token class-name">OpaquePointer</span><span class="token operator">?</span></span>
<span class="line">  <span class="token keyword">guard</span> <span class="token keyword">let</span> part1DbPath <span class="token operator">=</span> part1DbPath <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;part1DbPath is nil.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token nil constant">nil</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token function">sqlite3_open</span><span class="token punctuation">(</span>part1DbPath<span class="token punctuation">,</span> <span class="token operator">&amp;</span>db<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_OK</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Successfully opened connection to database at </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">part1DbPath</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> db</span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Unable to open database.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token class-name">PlaygroundPage</span><span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">finishExecution</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This function calls <code>sqlite3_open()</code>, which opens or creates a new database file. If itâ€™s successful, it returns an <code>OpaquePointer</code>, which is a <strong>Swift type</strong> for <strong>C pointers</strong>. When you call this function, youâ€™ll have to capture the returned pointer to interact with the database.</p><p>Many of the SQLite functions return an <code>Int32</code> result code, which is usually a constant in the SQLite library. For example, <code>SQLITE_OK</code> represents the result code <code>0</code>. Find a list of result codes on the <a href="https://www.sqlite.org/rescode.html" target="_blank" rel="noopener noreferrer">official SQLite site</a>.</p><p>Add the following to open the database:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">let</span> db <span class="token operator">=</span> <span class="token function">openDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Click the Play button to run the playground and watch the console output. If the console isnâ€™t open, click the <i class="vp-icon iconfont icon-select" sizing="height"></i><code>[Show the Debug area]</code> button to the left of the Play button:</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2019/11/sqliteswift_show_debug_area-2.png" alt="Showing the Debug area" tabindex="0" loading="lazy"><figcaption>Showing the Debug area</figcaption></figure><p>If <code>openDatabase()</code> succeeds, youâ€™ll see some output similar to that below:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">Successfully opened connection to database at /Users/username/Library/Developer/XCPGDevices/A1EF655D-E318-4CDC-A35A-54349AFE1E62/data/Containers/Data/Application/43A00877-DF24-4E86-8682-22876DEEAFE4/Documents/Part1.sqlite</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="creating-a-table" tabindex="-1"><a class="header-anchor" href="#creating-a-table"><span>Creating a Table</span></a></h3><p>Now that you have a connection to a database file, you can create a table. Youâ€™ll work with a very simple table to store contacts.</p><p>The table consists of two columns: <code>Id</code>, which is an <code>INT</code> and a <code>PRIMARY KEY</code>, and <code>Name</code>, which is a <code>CHAR(255)</code>.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2019/12/SQLite-table.png" alt="The table with ID and Name headers and filled-out rows" tabindex="0" loading="lazy"><figcaption>The table with ID and Name headers and filled-out rows</figcaption></figure><p>Add the following statement, which contains an SQL statement to create the table. Note youâ€™re using Swiftâ€™s multi-line syntax:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">let</span> createTableString <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;&quot;&quot;</span>
<span class="line">CREATE TABLE Contact(</span>
<span class="line">Id INT PRIMARY KEY NOT NULL,</span>
<span class="line">Name CHAR(255));</span>
<span class="line">&quot;&quot;&quot;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Next, add this function:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">createTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 1</span></span>
<span class="line">  <span class="token keyword">var</span> createTableStatement<span class="token punctuation">:</span> <span class="token class-name">OpaquePointer</span><span class="token operator">?</span></span>
<span class="line">  <span class="token comment">// 2</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token function">sqlite3_prepare_v2</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> createTableString<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>createTableStatement<span class="token punctuation">,</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span> <span class="token operator">==</span> </span>
<span class="line">      <span class="token constant">SQLITE_OK</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 3</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token function">sqlite3_step</span><span class="token punctuation">(</span>createTableStatement<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_DONE</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nContact table created.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nContact table is not created.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nCREATE TABLE statement is not prepared.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// 4</span></span>
<span class="line">  <span class="token function">sqlite3_finalize</span><span class="token punctuation">(</span>createTableStatement<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Going over this, step-by-step:</p><p>Next, you check the returned status code to ensure the statement compiled successfully. If so, the process moves to step 3. Otherwise, you print a message noting the statement didnâ€™t compile.</p><ol><li>First, you create a pointer to reference in the next step.</li><li><code>sqlite3_prepare_v2()</code> compiles the SQL statement into byte code and returns a status code â€” an important step before executing arbitrary statements against your database.</li><li><code>sqlite3_step()</code> runs the compiled statement. In this case, you only step once because this statement has a single result. Later in this tutorial, youâ€™ll see when itâ€™s necessary to step multiple times for a single statement.</li><li>You must always call <code>sqlite3_finalize()</code> on your compiled statement to delete it and avoid resource leaks. Once a statement finalizes, you should never use it again.</li></ol><div class="hint-container tip"><p class="hint-container-title">Note</p><p>If you want to learn more about what happened in step 2, check out the SQLite documentation about <a href="https://www.sqlite.org/c3ref/prepare.html" target="_blank" rel="noopener noreferrer">compiling an SQL statement</a>.</p></div><p>Now, add the following function call:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token function">createTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Run your playground. Youâ€™ll see the following in your console output:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">Contact table created.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now that you have a table, itâ€™s time to add some data to it. Youâ€™re going to add a single row with an <code>Id</code> of <code>1</code> and <code>Name</code> of <code>Ray</code>.</p><h3 id="inserting-data" tabindex="-1"><a class="header-anchor" href="#inserting-data"><span>Inserting Data</span></a></h3><p>Add the following SQL statement:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">let</span> insertStatementString <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;INSERT INTO Contact (Id, Name) VALUES (?, ?);&quot;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This might look strange if you havenâ€™t had much SQL experience. Why are the values represented by question marks?</p><p>Earlier, you used <code>sqlite3_prepare_v2()</code> to compile your statement. The <code>?</code> syntax tells the compiler that youâ€™ll provide real values when you actually execute the statement.</p><p>This lets you compile statements ahead of time, which improves performance since compilation is a costly operation. You can then reuse the compiled statements with different values.</p><p>Next, create the following function:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">insert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> insertStatement<span class="token punctuation">:</span> <span class="token class-name">OpaquePointer</span><span class="token operator">?</span></span>
<span class="line">  <span class="token comment">// 1</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token function">sqlite3_prepare_v2</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> insertStatementString<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>insertStatement<span class="token punctuation">,</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span> <span class="token operator">==</span> </span>
<span class="line">      <span class="token constant">SQLITE_OK</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> id<span class="token punctuation">:</span> <span class="token class-name">Int32</span> <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">    <span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token class-name">NSString</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;Ray&quot;</span></span></span>
<span class="line">    <span class="token comment">// 2</span></span>
<span class="line">    <span class="token function">sqlite3_bind_int</span><span class="token punctuation">(</span>insertStatement<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// 3</span></span>
<span class="line">    <span class="token function">sqlite3_bind_text</span><span class="token punctuation">(</span>insertStatement<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">.</span>utf8String<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// 4</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token function">sqlite3_step</span><span class="token punctuation">(</span>insertStatement<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_DONE</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nSuccessfully inserted row.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nCould not insert row.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nINSERT statement is not prepared.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// 5</span></span>
<span class="line">  <span class="token function">sqlite3_finalize</span><span class="token punctuation">(</span>insertStatement<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Hereâ€™s how the function above works:</p><p>The first parameter of the function is the statement to bind to, while the second is a non-zero-based index for the position of the <code>?</code> youâ€™re binding to. The third and final parameter is the value itself. This binding call returns a status code, but for now, you assume that it succeeds.</p><ol><li>First, compile the statement and verify that all is well.</li><li>Here, you define a value for the <code>?</code> placeholder. The functionâ€™s name â€” <code>sqlite3_bind_int()</code> â€” implies youâ€™re binding an <code>Int</code> to the statement.</li><li>Perform the same binding process, but this time for a text value. There are two additional parameters on this call. For the purposes of this tutorial, simply pass <code>-1</code> and <code>nil</code> for them.</li><li>Use <code>sqlite3_step()</code> to execute the statement and verify that it finished.</li><li>Finalize the statement. If you were going to insert multiple contacts, youâ€™d retain the statement and reuse it with different values.</li></ol><div class="hint-container tip"><p class="hint-container-title">Note</p><p>If youâ€™d like, you can read more about <a href="https://www.sqlite.org/c3ref/bind_blob.html" target="_blank" rel="noopener noreferrer">binding parameters</a> on the SQLite website.</p></div><p>Next, call your new function:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Run your playground and verify that you see the following in your console output:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">Successfully inserted row.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="challenge-multiple-inserts" tabindex="-1"><a class="header-anchor" href="#challenge-multiple-inserts"><span>Challenge: Multiple Inserts</span></a></h3><p>Challenge time! Your task is to update <code>insert()</code> to insert an array of contacts.</p><p>As a hint, youâ€™ll need to reset your compiled statement to its initial state by calling <code>sqlite3_reset()</code> before you execute it again.</p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="v-0" aria-selected="true">Before</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-1" aria-selected="false">After</button></div><!--[--><div class="vp-tab active" id="v-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Before</div><!--[--><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">insert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> insertStatement<span class="token punctuation">:</span> <span class="token class-name">OpaquePointer</span><span class="token operator">?</span></span>
<span class="line">  <span class="token comment">// 1</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token function">sqlite3_prepare_v2</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> insertStatementString<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>insertStatement<span class="token punctuation">,</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_OK</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> id<span class="token punctuation">:</span> <span class="token class-name">Int32</span> <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">    <span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token class-name">NSString</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;Ray&quot;</span></span></span>
<span class="line">    <span class="token comment">// 2</span></span>
<span class="line">    <span class="token function">sqlite3_bind_int</span><span class="token punctuation">(</span>insertStatement<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// 3</span></span>
<span class="line">    <span class="token function">sqlite3_bind_text</span><span class="token punctuation">(</span>insertStatement<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">.</span>utf8String<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// 4</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token function">sqlite3_step</span><span class="token punctuation">(</span>insertStatement<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_DONE</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nSuccessfully inserted row.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nCould not insert row.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nINSERT statement is not prepared.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// 5</span></span>
<span class="line">  <span class="token function">sqlite3_finalize</span><span class="token punctuation">(</span>insertStatement<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="v-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">After</div><!--[--><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">insert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> insertStatement<span class="token punctuation">:</span> <span class="token class-name">OpaquePointer</span><span class="token operator">?</span></span>
<span class="line">  <span class="token comment">// 1</span></span>
<span class="line">  <span class="token keyword">let</span> names<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">NSString</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;Ray&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Chris&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Martha&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Danielle&quot;</span></span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token function">sqlite3_prepare_v2</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> insertStatementString<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>insertStatement<span class="token punctuation">,</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_OK</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\n&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// 2</span></span>
<span class="line">    <span class="token keyword">for</span> <span class="token punctuation">(</span>index<span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token keyword">in</span> names<span class="token punctuation">.</span><span class="token function">enumerated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 3</span></span>
<span class="line">      <span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token class-name">Int32</span><span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token function">sqlite3_bind_int</span><span class="token punctuation">(</span>insertStatement<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span></span>
<span class="line">      <span class="token function">sqlite3_bind_text</span><span class="token punctuation">(</span>insertStatement<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">.</span>utf8String<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token function">sqlite3_step</span><span class="token punctuation">(</span>insertStatement<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_DONE</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Successfully inserted row.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Could not insert row.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token comment">// 4</span></span>
<span class="line">      <span class="token function">sqlite3_reset</span><span class="token punctuation">(</span>insertStatement<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">sqlite3_finalize</span><span class="token punctuation">(</span>insertStatement<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nINSERT statement is not prepared.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>As you can see, this is similar to the code you already had, with these notable differences:</p><ol><li>You have an array of contacts now, rather than a single constant.</li><li>The array enumerates once for each contact.</li><li>You now generate the index from the index of the enumeration, which corresponds to the placement of the contactâ€™s name in the array.</li><li>The SQL statement resets at the end of each enumeration so that next one can use it.</li></ol><!--]--></div><!--]--></div><p>Great, youâ€™ve now mastered adding data to your database. In the next section of this tutorial, youâ€™ll learn how to access that data when you need it.</p><h3 id="querying-contacts" tabindex="-1"><a class="header-anchor" href="#querying-contacts"><span>Querying Contacts</span></a></h3><p>Now that youâ€™ve inserted some rows, itâ€™d be nice to verify theyâ€™re really there.</p><p>Add the following to the playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">let</span> queryStatementString <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;SELECT * FROM Contact;&quot;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This query retrieves all records from the contact table. Using a <code>*</code> returns all columns.</p><p>Now, add the following function to the query:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> queryStatement<span class="token punctuation">:</span> <span class="token class-name">OpaquePointer</span><span class="token operator">?</span></span>
<span class="line">  <span class="token comment">// 1</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token function">sqlite3_prepare_v2</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> queryStatementString<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>queryStatement<span class="token punctuation">,</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_OK</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 2</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token function">sqlite3_step</span><span class="token punctuation">(</span>queryStatement<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_ROW</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 3</span></span>
<span class="line">      <span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">sqlite3_column_int</span><span class="token punctuation">(</span>queryStatement<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token comment">// 4</span></span>
<span class="line">      <span class="token keyword">guard</span> <span class="token keyword">let</span> queryResultCol1 <span class="token operator">=</span> <span class="token function">sqlite3_column_text</span><span class="token punctuation">(</span>queryStatement<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Query result is nil&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">(</span>cString<span class="token punctuation">:</span> queryResultCol1<span class="token punctuation">)</span></span>
<span class="line">      <span class="token comment">// 5</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nQuery Result:&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">id</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> | </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nQuery returned no results.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 6</span></span>
<span class="line">    <span class="token keyword">let</span> errorMessage <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">(</span>cString<span class="token punctuation">:</span> <span class="token function">sqlite3_errmsg</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nQuery is not prepared </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">errorMessage</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// 7</span></span>
<span class="line">  <span class="token function">sqlite3_finalize</span><span class="token punctuation">(</span>queryStatement<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Taking each numbered comment in turn:</p><ol><li>You prepare the statement.</li><li>Next, you execute the statement. Note that youâ€™re now checking for the status code <code>SQLITE_ROW</code>, which means that you retrieved a row when you stepped through the result.</li><li>Now, you read the values from the returned row. Given what you know about the tableâ€™s structure and your query, you can access the rowâ€™s values column-by-column. The first column is an <code>Int</code>, so you use <code>sqlite3_column_int()</code> and pass in the statement and a zero-based column index. You assign the returned value to the locally-scoped <code>id</code> constant.</li><li>Here, you fetch the text value from the <code>Name</code> column. This is a bit messy due to the C API. First, you capture the value as <code>queryResultCol1</code> so you can convert it to a proper Swift string on the next line.</li><li>Print the results.</li><li>Print an error, if any. Want to get adventurous? Change the table name in <code>queryStatementString</code> and see what happens.</li><li>You finalize the statement. Now, call your new function:</li></ol><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Run your playground. Youâ€™ll see the following output in your console:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">Query Result:</span>
<span class="line">1 | Ray</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>WOOt! It looks like your data made it to the database after all, unless you got adventurous.</p><h3 id="challenge-printing-every-row" tabindex="-1"><a class="header-anchor" href="#challenge-printing-every-row"><span>Challenge: Printing Every Row</span></a></h3><p>Your task is to update <code>query()</code> to print out every contact in the table.</p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="v-2" aria-selected="true">Before</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="v-3" aria-selected="false">After</button></div><!--[--><div class="vp-tab active" id="v-2" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Before</div><!--[--><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> queryStatement<span class="token punctuation">:</span> <span class="token class-name">OpaquePointer</span><span class="token operator">?</span></span>
<span class="line">  <span class="token comment">// 1</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token function">sqlite3_prepare_v2</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> queryStatementString<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>queryStatement<span class="token punctuation">,</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span> <span class="token operator">==</span> </span>
<span class="line">      <span class="token constant">SQLITE_OK</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 2</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token function">sqlite3_step</span><span class="token punctuation">(</span>queryStatement<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_ROW</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 3</span></span>
<span class="line">      <span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">sqlite3_column_int</span><span class="token punctuation">(</span>queryStatement<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token comment">// 4</span></span>
<span class="line">      <span class="token keyword">guard</span> <span class="token keyword">let</span> queryResultCol1 <span class="token operator">=</span> <span class="token function">sqlite3_column_text</span><span class="token punctuation">(</span>queryStatement<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Query result is nil&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">(</span>cString<span class="token punctuation">:</span> queryResultCol1<span class="token punctuation">)</span></span>
<span class="line">      <span class="token comment">// 5</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nQuery Result:&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">id</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> | </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nQuery returned no results.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 6</span></span>
<span class="line">    <span class="token keyword">let</span> errorMessage <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">(</span>cString<span class="token punctuation">:</span> <span class="token function">sqlite3_errmsg</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nQuery is not prepared </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">errorMessage</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// 7</span></span>
<span class="line">  <span class="token function">sqlite3_finalize</span><span class="token punctuation">(</span>queryStatement<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="v-3" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">After</div><!--[--><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> queryStatement<span class="token punctuation">:</span> <span class="token class-name">OpaquePointer</span><span class="token operator">?</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token function">sqlite3_prepare_v2</span><span class="token punctuation">(</span></span>
<span class="line">    db<span class="token punctuation">,</span> </span>
<span class="line">    queryStatementString<span class="token punctuation">,</span> </span>
<span class="line">    <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> </span>
<span class="line">    <span class="token operator">&amp;</span>queryStatement<span class="token punctuation">,</span> </span>
<span class="line">    <span class="token nil constant">nil</span></span>
<span class="line">  <span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_OK</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\n&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">sqlite3_step</span><span class="token punctuation">(</span>queryStatement<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_ROW</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">sqlite3_column_int</span><span class="token punctuation">(</span>queryStatement<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">guard</span> <span class="token keyword">let</span> queryResultCol1 <span class="token operator">=</span> <span class="token function">sqlite3_column_text</span><span class="token punctuation">(</span>queryStatement<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Query result is nil.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">(</span>cString<span class="token punctuation">:</span> queryResultCol1<span class="token punctuation">)</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Query Result:&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">id</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> | </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">let</span> errorMessage <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">(</span>cString<span class="token punctuation">:</span> <span class="token function">sqlite3_errmsg</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nQuery is not prepared </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">errorMessage</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">sqlite3_finalize</span><span class="token punctuation">(</span>queryStatement<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that instead of using a single step to retrieve the first row as you did before, you use a <code>while</code> loop to execute the step, which will happen as long as the return code is <code>SQLITE_ROW</code>. When you reach the last row, the return code will be <code>SQLITE_DONE</code>, breaking the loop.</p><!--]--></div><!--]--></div><p>So now, you have created a database and can add contacts to it. But what if you need to make changes to any of those contacts? Youâ€™ll tackle that issue in the next section.</p><h3 id="updating-contacts" tabindex="-1"><a class="header-anchor" href="#updating-contacts"><span>Updating Contacts</span></a></h3><p>Your next step is to update an existing row. Get started by creating the <code>UPDATE</code> statement:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">let</span> updateStatementString <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;UPDATE Contact SET Name = &#39;Adam&#39; WHERE Id = 1;&quot;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Here, youâ€™re using real values instead of <code>?</code> placeholders. Youâ€™d usually use the placeholders and bind the statements properly, but this tutorial will skip those steps for brevity.</p><p>Next, add the following function to the playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> updateStatement<span class="token punctuation">:</span> <span class="token class-name">OpaquePointer</span><span class="token operator">?</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token function">sqlite3_prepare_v2</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> updateStatementString<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>updateStatement<span class="token punctuation">,</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span> <span class="token operator">==</span> </span>
<span class="line">      <span class="token constant">SQLITE_OK</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token function">sqlite3_step</span><span class="token punctuation">(</span>updateStatement<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_DONE</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nSuccessfully updated row.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nCould not update row.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nUPDATE statement is not prepared&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">sqlite3_finalize</span><span class="token punctuation">(</span>updateStatement<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This is a similar flow to what youâ€™ve seen before: prepare, step and finalize.</p><p>Next, add the following to your playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>This executes your new function, then calls your previously-defined <code>query()</code> function so that you can see the results:</p><p>Successfully updated row.</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">Query Result:</span>
<span class="line">1 | Adam</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Congratulations on updating your first row! How easy was that?</p><p>Youâ€™re doing great! You can now create a table, add contacts to it and update those contacts. In the next step, youâ€™ll learn how to delete those contacts.</p><h3 id="deleting-contacts" tabindex="-1"><a class="header-anchor" href="#deleting-contacts"><span>Deleting Contacts</span></a></h3><p>The final step on the path to becoming an SQLite ninja is to delete the row you created. Again, youâ€™ll use the familiar pattern of prepare, step and finalize.</p><p>Add the following to the playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">let</span> deleteStatementString <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;DELETE FROM Contact WHERE Id = 1;&quot;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now, add the following function to execute the statement:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> deleteStatement<span class="token punctuation">:</span> <span class="token class-name">OpaquePointer</span><span class="token operator">?</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token function">sqlite3_prepare_v2</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> deleteStatementString<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>deleteStatement<span class="token punctuation">,</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span> <span class="token operator">==</span> </span>
<span class="line">      <span class="token constant">SQLITE_OK</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token function">sqlite3_step</span><span class="token punctuation">(</span>deleteStatement<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_DONE</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nSuccessfully deleted row.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nCould not delete row.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nDELETE statement could not be prepared&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">sqlite3_finalize</span><span class="token punctuation">(</span>deleteStatement<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Are you feeling it now? Prepare, step and finalize.</p><p>Execute this new function as below:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Run your playground and you should see the following output in your console:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">Successfully deleted row.</span>
<span class="line">Query returned no results.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">Note</p><p>If you completed the <strong>Multiple Inserts</strong> challenge above, your output will look different from that above due to rows still being present in the table.</p></div><p>So youâ€™ve now mastered working with your table, but what about when things inevitably go wrong? In the next section, youâ€™ll learn how to deal with errors.</p><h3 id="handling-errors" tabindex="-1"><a class="header-anchor" href="#handling-errors"><span>Handling Errors</span></a></h3><p>Hopefully, youâ€™ve managed to avoid SQLite errors up to this point. But the time will come when you make a call that doesnâ€™t make sense or simply wonâ€™t compile.</p><p>Handling error message when these things happen saves a lot of development time. It also gives you the opportunity to present meaningful error messages to your users.</p><p>To start, you need an error to handle. Add the following statement, which is intentionally malformed:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">let</span> malformedQueryString <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;SELECT Stuff from Things WHERE Whatever;&quot;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now, add a function to execute this malformed statement:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">prepareMalformedQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> malformedStatement<span class="token punctuation">:</span> <span class="token class-name">OpaquePointer</span><span class="token operator">?</span></span>
<span class="line">  <span class="token comment">// 1</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token function">sqlite3_prepare_v2</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> malformedQueryString<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>malformedStatement<span class="token punctuation">,</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span> </span>
<span class="line">      <span class="token operator">==</span> <span class="token constant">SQLITE_OK</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nThis should not have happened.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 2</span></span>
<span class="line">    <span class="token keyword">let</span> errorMessage <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">(</span>cString<span class="token punctuation">:</span> <span class="token function">sqlite3_errmsg</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\nQuery is not prepared! </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">errorMessage</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment">// 3</span></span>
<span class="line">  <span class="token function">sqlite3_finalize</span><span class="token punctuation">(</span>malformedStatement<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Hereâ€™s how youâ€™re going to force an error:</p><ol><li>Prepare the statement, which will fail and will NOT return <code>SQLITE_OK</code>.</li><li>Get the error message from the database using <code>sqlite3_errmsg()</code>. This returns a textual description of the most recent error. You then print the error to the console.</li><li>Finalize the statement.</li></ol><p>Call the function to see the error message:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token function">prepareMalformedQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Run your playground. Youâ€™ll see the following output in your console:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">Query is not prepared! no such table: Things</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Well, thatâ€™s actually helpful â€” you obviously cannot run a <code>SELECT</code> statement on a table that doesnâ€™t exist! Despite the intentional error that you created, you should use this example as a pattern for handling other errors from SQLite. Nice job!</p><h3 id="closing-the-database-connection" tabindex="-1"><a class="header-anchor" href="#closing-the-database-connection"><span>Closing the Database Connection</span></a></h3><p>When youâ€™re done with a database connection, youâ€™re responsible for closing it. But beware â€” there are a number of things you must do before you can successfully close your database, as described in the <a href="https://www.sqlite.org/c3ref/close.html" target="_blank" rel="noopener noreferrer">SQLite documentation</a>.</p><p>Call the close function:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token function">sqlite3_close</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Run your playground. Youâ€™ll see a status code of 0 on the results sidebar, which represents <code>SQLITE_OK</code>.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2019/11/sqliteswift_close_connection.png" alt="Successful close call" tabindex="0" loading="lazy"><figcaption>Successful close call</figcaption></figure><p>Great, your close call succeeded!</p><p>Youâ€™ve successfully created a database, added a table, added rows to the table, queried rows, updated rows and even deleted a row, all using the SQLite C APIs from Swift. Great job!</p><p>In the next section, youâ€™ll see how to wrap some of these calls in Swift.</p><hr><h2 id="sqlite-with-swift" tabindex="-1"><a class="header-anchor" href="#sqlite-with-swift"><span>SQLite With Swift</span></a></h2><p>As a Swift developer, you might feel a little uneasy about the first part of this tutorial. The good news is you can take the power of Swift and wrap those C routines to make things easier for yourself.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2017/09/swift-weights-320x320.png" alt="swift-weights" tabindex="0" loading="lazy"><figcaption>swift-weights</figcaption></figure><p>For this part of the SQLite with Swift tutorial, click the <strong>Making It Swift</strong> link at the bottom of the playground:</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2019/11/sqliteswift_making_it_to_swift_highlighted.png" alt="Where to find the Making It Swift link" tabindex="0" loading="lazy"><figcaption>Where to find the Making It Swift link</figcaption></figure><h3 id="wrapping-errors" tabindex="-1"><a class="header-anchor" href="#wrapping-errors"><span>Wrapping Errors</span></a></h3><p>Getting errors from the C API is a bit awkward as a Swift developer. Checking a result code and then calling another function doesnâ€™t make sense in this new world. It would make more sense if functions that fail threw an error. Your next step will be to make that happen in your code.</p><p>Add the following:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">enum</span> <span class="token class-name">SQLiteError</span><span class="token punctuation">:</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token class-name">OpenDatabase</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token class-name">Prepare</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token class-name">Step</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token class-name">Bind</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This is a custom <code>Error</code> enum that covers four of the main operations youâ€™re using that can fail. Note how each case has an associated value to hold the error message.</p><h3 id="wrapping-the-database-connection" tabindex="-1"><a class="header-anchor" href="#wrapping-the-database-connection"><span>Wrapping the Database Connection</span></a></h3><p>Another not-so-Swifty aspect of the work youâ€™ve done so far is those blasted <code>OpaquePointer</code> types. Your next step will be to take care of those.</p><p>Wrap up the database connection pointer in its own class, as shown below:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">class</span> <span class="token class-name">SQLiteDatabase</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">let</span> dbPointer<span class="token punctuation">:</span> <span class="token class-name">OpaquePointer</span><span class="token operator">?</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">init</span><span class="token punctuation">(</span>dbPointer<span class="token punctuation">:</span> <span class="token class-name">OpaquePointer</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">self</span><span class="token punctuation">.</span>dbPointer <span class="token operator">=</span> dbPointer</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">deinit</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">sqlite3_close</span><span class="token punctuation">(</span>dbPointer<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This looks much better. When you need a database connection, you create a reference to a more meaningful type of <code>SQLiteDatabase</code> rather than using an <code>OpaquePointer</code>.</p><p>Youâ€™ll notice the initializer is <code>private</code>. Thatâ€™s because you donâ€™t want your Swift developers passing in that <code>OpaquePointer</code>. Instead, you let them instantiate this class with a path to the database file.</p><p>Add the following static method to <code>SQLiteDatabase</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">open</span><span class="token punctuation">(</span>path<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token operator">-&gt;</span> <span class="token class-name">SQLiteDatabase</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> db<span class="token punctuation">:</span> <span class="token class-name">OpaquePointer</span><span class="token operator">?</span></span>
<span class="line">  <span class="token comment">// 1</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token function">sqlite3_open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token operator">&amp;</span>db<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_OK</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 2</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token class-name">SQLiteDatabase</span><span class="token punctuation">(</span>dbPointer<span class="token punctuation">:</span> db<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 3</span></span>
<span class="line">    <span class="token keyword">defer</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">if</span> db <span class="token operator">!=</span> <span class="token nil constant">nil</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">sqlite3_close</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token keyword">let</span> errorPointer <span class="token operator">=</span> <span class="token function">sqlite3_errmsg</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">(</span>cString<span class="token punctuation">:</span> errorPointer<span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">throw</span> <span class="token class-name">SQLiteError</span><span class="token punctuation">.</span><span class="token class-name">OpenDatabase</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> message<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">throw</span> <span class="token class-name">SQLiteError</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token class-name">OpenDatabase</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;No error message provided from sqlite.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Hereâ€™s whatâ€™s happening:</p><ol><li>You attempt to open the database at the provided path.</li><li>If successful, you return a new instance of <code>SQLiteDatabase</code>.</li><li>Otherwise, you defer closing the database if the status code is anything but <code>SQLITE_OK</code> and throw an error.</li></ol><p>Now you can create and open a database connection using much cleaner syntax.</p><p>Add the following outside the <code>SQLiteDatabase</code> class:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">let</span> db<span class="token punctuation">:</span> <span class="token class-name">SQLiteDatabase</span></span>
<span class="line"><span class="token keyword">do</span> <span class="token punctuation">{</span></span>
<span class="line">    db <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token class-name">SQLiteDatabase</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span>path<span class="token punctuation">:</span> part2DbPath <span class="token operator">??</span> <span class="token string-literal"><span class="token string">&quot;&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Successfully opened connection to database.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token class-name">SQLiteError</span><span class="token punctuation">.</span><span class="token class-name">OpenDatabase</span><span class="token punctuation">(</span><span class="token omit keyword">_</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Unable to open database.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token class-name">PlaygroundPage</span><span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">finishExecution</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ah, much more Swift-like. Here, you wrap the attempt to open the database in a <code>do-try-catch</code> block and pass the error message from SQLite to the catch block, thanks to that custom enum you added earlier.</p><p>Run your playground and watch the console output. Youâ€™ll see the following:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">Successfully opened connection to database.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now, you can use and inspect the <code>db</code> instance as a proper and meaningful type.</p><p>Before moving on to writing methods that execute statements, it would be nice if <code>SQLiteDatabase</code> let you easily access SQLite error messages.</p><p>Add the following computed property to the <code>SQLiteDatabase</code> class:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">fileprivate</span> <span class="token keyword">var</span> errorMessage<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token keyword">let</span> errorPointer <span class="token operator">=</span> <span class="token function">sqlite3_errmsg</span><span class="token punctuation">(</span>dbPointer<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> errorMessage <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">(</span>cString<span class="token punctuation">:</span> errorPointer<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> errorMessage</span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">&quot;No error message provided from sqlite.&quot;</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here, youâ€™ve added a computed property, which simply returns the most recent error SQLite knows about. If there is no error, it returns a generic message stating as much.</p><h3 id="wrapping-the-prepare-call" tabindex="-1"><a class="header-anchor" href="#wrapping-the-prepare-call"><span>Wrapping the Prepare Call</span></a></h3><p>Since you make prepare calls so often, it makes sense to wrap them like the other methods. As you move forward and add functionality to the <code>SQLiteDatabase</code> class, youâ€™ll use class extensions.</p><p>Add the following extension. This will be useful in your future methods to invoke <code>sqlite3_prepare_v2()</code> on SQL statements:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">extension</span> <span class="token class-name">SQLiteDatabase</span> <span class="token punctuation">{</span></span>
<span class="line"> <span class="token keyword">func</span> <span class="token function-definition function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token operator">-&gt;</span> <span class="token class-name">OpaquePointer</span><span class="token operator">?</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> statement<span class="token punctuation">:</span> <span class="token class-name">OpaquePointer</span><span class="token operator">?</span></span>
<span class="line">  <span class="token keyword">guard</span> <span class="token function">sqlite3_prepare_v2</span><span class="token punctuation">(</span>dbPointer<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>statement<span class="token punctuation">,</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span> </span>
<span class="line">      <span class="token operator">==</span> <span class="token constant">SQLITE_OK</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">throw</span> <span class="token class-name">SQLiteError</span><span class="token punctuation">.</span><span class="token class-name">Prepare</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> errorMessage<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">return</span> statement</span>
<span class="line"> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here, you declare that <code>prepareStatement(_:)</code> can throw an error and then use <code>guard</code> to throw that error should <code>sqlite3_prepare_v2()</code> fail. Just like before, you pass the error message from SQLite to the relevant case of your custom enum.</p><h3 id="creating-a-contact-struct" tabindex="-1"><a class="header-anchor" href="#creating-a-contact-struct"><span>Creating a Contact Struct</span></a></h3><p>Add the following:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">struct</span> <span class="token class-name">Contact</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> id<span class="token punctuation">:</span> <span class="token class-name">Int32</span></span>
<span class="line">  <span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token class-name">NSString</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In these examples, youâ€™ll use the same <code>Contact</code> table as before, so it makes sense to define a proper <code>struct</code> to represent a contact. Next, youâ€™ll learn to actually create the table for a <code>Contact</code></p><h3 id="wrapping-the-table-creation" tabindex="-1"><a class="header-anchor" href="#wrapping-the-table-creation"><span>Wrapping the Table Creation</span></a></h3><p>Youâ€™ll knock out the same database tasks as before, but this time youâ€™ll use a â€œSwift-ierâ€ approach.</p><p>To create a table, first, create the following <code>protocol</code> for that purpose in your playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">protocol</span> <span class="token class-name">SQLTable</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">static</span> <span class="token keyword">var</span> createStatement<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now, extend <code>Contact</code> to conform to this new protocol:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">extension</span> <span class="token class-name">Contact</span><span class="token punctuation">:</span> <span class="token class-name">SQLTable</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">static</span> <span class="token keyword">var</span> createStatement<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">&quot;&quot;&quot;</span>
<span class="line">    CREATE TABLE Contact(</span>
<span class="line">      Id INT PRIMARY KEY NOT NULL,</span>
<span class="line">      Name CHAR(255)</span>
<span class="line">    );</span>
<span class="line">    &quot;&quot;&quot;</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This code defines <code>createStatement</code> and adds a <code>CREATE TABLE</code> statement on <code>Contact</code> which is useful for keeping the code grouped together.</p><p>Now, youâ€™re able to write the following method that accepts types that conform to <code>SQLTable</code> to create a table:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">extension</span> <span class="token class-name">SQLiteDatabase</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">func</span> <span class="token function-definition function">createTable</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> <span class="token class-name">SQLTable</span><span class="token punctuation">.</span><span class="token keyword">Type</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 1</span></span>
<span class="line">    <span class="token keyword">let</span> createTableStatement <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">:</span> table<span class="token punctuation">.</span>createStatement<span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// 2</span></span>
<span class="line">    <span class="token keyword">defer</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">sqlite3_finalize</span><span class="token punctuation">(</span>createTableStatement<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token comment">// 3</span></span>
<span class="line">    <span class="token keyword">guard</span> <span class="token function">sqlite3_step</span><span class="token punctuation">(</span>createTableStatement<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_DONE</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">throw</span> <span class="token class-name">SQLiteError</span><span class="token punctuation">.</span><span class="token class-name">Step</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> errorMessage<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">table</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> table created.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Hereâ€™s a breakdown of whatâ€™s happening:</p><ol><li><code>prepareStatement()</code> throws, so you must use <code>try</code>. You donâ€™t use a <code>do-try-catch</code> block because this method itself throws, so any error from <code>prepareStatement()</code> simply passes to the caller of <code>createTable()</code>.</li><li>With the power of <code>defer</code>, you ensure that your statements are always finalized, regardless of how this method exits its scope.</li><li><code>guard</code> lets you write a more expressive check for the SQLite status codes.</li></ol><p>Give your new method a try by adding the following:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">do</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">try</span> db<span class="token punctuation">.</span><span class="token function">createTable</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> <span class="token class-name">Contact</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">print</span><span class="token punctuation">(</span>db<span class="token punctuation">.</span>errorMessage<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here, you simply attempt to create the <code>Contact</code> and catch an error, if there is one.</p><p>Run your playground. The following will appear in your console:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">Contact table created.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Fantastic! Isnâ€™t that a much cleaner API to work with?</p><h3 id="wrapping-insertions" tabindex="-1"><a class="header-anchor" href="#wrapping-insertions"><span>Wrapping Insertions</span></a></h3><p>Moving along, itâ€™s time to insert a row into the <code>Contact</code> table. Add the following method in your playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">extension</span> <span class="token class-name">SQLiteDatabase</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">func</span> <span class="token function-definition function">insertContact</span><span class="token punctuation">(</span>contact<span class="token punctuation">:</span> <span class="token class-name">Contact</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> insertSql <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;INSERT INTO Contact (Id, Name) VALUES (?, ?);&quot;</span></span></span>
<span class="line">    <span class="token keyword">let</span> insertStatement <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">:</span> insertSql<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">defer</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">sqlite3_finalize</span><span class="token punctuation">(</span>insertStatement<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token class-name">NSString</span> <span class="token operator">=</span> contact<span class="token punctuation">.</span>name</span>
<span class="line">    <span class="token keyword">guard</span> </span>
<span class="line">      <span class="token function">sqlite3_bind_int</span><span class="token punctuation">(</span>insertStatement<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> contact<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_OK</span>  <span class="token operator">&amp;&amp;</span></span>
<span class="line">      <span class="token function">sqlite3_bind_text</span><span class="token punctuation">(</span>insertStatement<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">.</span>utf8String<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span> </span>
<span class="line">        <span class="token operator">==</span> <span class="token constant">SQLITE_OK</span> </span>
<span class="line">      <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">throw</span> <span class="token class-name">SQLiteError</span><span class="token punctuation">.</span><span class="token class-name">Bind</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> errorMessage<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">guard</span> <span class="token function">sqlite3_step</span><span class="token punctuation">(</span>insertStatement<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_DONE</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">throw</span> <span class="token class-name">SQLiteError</span><span class="token punctuation">.</span><span class="token class-name">Step</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> errorMessage<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Successfully inserted row.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now that youâ€™ve got your SQLegs - see what I did there? - this code shouldnâ€™t be too surprising. Given a <code>Contact</code> instance, you prepare a statement, bind the values, execute and finalize.</p><p>Again, using a potent mix of <code>defer</code>, <code>guard</code> and <code>throw</code> allows you to take advantage of modern Swift language features.</p><p>Call this new method:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">do</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">try</span> db<span class="token punctuation">.</span><span class="token function">insertContact</span><span class="token punctuation">(</span>contact<span class="token punctuation">:</span> <span class="token class-name">Contact</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Ray&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">print</span><span class="token punctuation">(</span>db<span class="token punctuation">.</span>errorMessage<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Run your playground. Youâ€™ll see the following in your console:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">Successfully inserted row.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="wrapping-reads" tabindex="-1"><a class="header-anchor" href="#wrapping-reads"><span>Wrapping Reads</span></a></h3><p>To wrap up the last section on creating the Swift wrapper, youâ€™ll handle querying the database.</p><p>Add the following method, which will query the database:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">extension</span> <span class="token class-name">SQLiteDatabase</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">func</span> <span class="token function-definition function">contact</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token class-name">Int32</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Contact</span><span class="token operator">?</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> querySql <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;SELECT * FROM Contact WHERE Id = ?;&quot;</span></span></span>
<span class="line">    <span class="token keyword">guard</span> <span class="token keyword">let</span> queryStatement <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">?</span> <span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">:</span> querySql<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token nil constant">nil</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">defer</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">sqlite3_finalize</span><span class="token punctuation">(</span>queryStatement<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">guard</span> <span class="token function">sqlite3_bind_int</span><span class="token punctuation">(</span>queryStatement<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_OK</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token nil constant">nil</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">guard</span> <span class="token function">sqlite3_step</span><span class="token punctuation">(</span>queryStatement<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">SQLITE_ROW</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token nil constant">nil</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">sqlite3_column_int</span><span class="token punctuation">(</span>queryStatement<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">guard</span> <span class="token keyword">let</span> queryResultCol1 <span class="token operator">=</span> <span class="token function">sqlite3_column_text</span><span class="token punctuation">(</span>queryStatement<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Query result is nil.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token nil constant">nil</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">(</span>cString<span class="token punctuation">:</span> queryResultCol1<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">NSString</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token class-name">Contact</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> id<span class="token punctuation">,</span> name<span class="token punctuation">:</span> name<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This method simply takes the ID of a contact and either returns that contact or <code>nil</code>, if there isnâ€™t a contact with that ID. Again, these statements should feel somewhat familiar by now.</p><p>Write the code to query the first contact:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">if</span> <span class="token keyword">let</span> first <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">contact</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">first<span class="token punctuation">.</span>id</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">first<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Run your playground. Youâ€™ll see the following output in the console:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">1 Ray</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>By now, youâ€™ve probably identified some calls you could create in a generic fashion and apply to entirely different tables. The point of the above exercise is to show how you can use Swift to wrap low-level C APIs. This is no simple task for SQLite; there are a ton of intricacies to SQLite that this tutorial didnâ€™t cover.</p><p>You might be thinking, â€œHasnâ€™t someone already created a wrapper for this?â€ Thatâ€™s what the final section is all about.</p><hr><h2 id="introducing-sqlite-swift" tabindex="-1"><a class="header-anchor" href="#introducing-sqlite-swift"><span>Introducing <i class="vp-icon fa-brands fa-swift" sizing="height"></i><code>SQLite.swift</code></span></a></h2><p><a href="https://twitter.com/stephencelis" target="_blank" rel="noopener noreferrer">Stephen Celis</a> has graciously written a fully-featured Swift wrapper for SQLite named <a href="https://github.com/stephencelis/SQLite.swift" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-swift" sizing="height"></i><code>SQLite.swift</code></a>. Check it out if you decide that SQLite fits the bill for data storage in your app.</p><p>SQLite.swift provides an expressive way to represent tables. This lets you get started with SQLite without worrying about its underlying details and idiosyncrasies.</p><p>You may even consider wrapping SQLite.swift itself to create a high-level API for your appâ€™s domain model.</p><p>Check out the [README.md for <a href="https://github.com/stephencelis/SQLite.swift/blob/master/README.md" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-swift" sizing="height"></i><code>SQLite.swift</code></a> and decide for yourself if it has a place in your personal code toolbox.</p><hr><h2 id="where-to-go-from-here" tabindex="-1"><a class="header-anchor" href="#where-to-go-from-here"><span>Where to Go From Here?</span></a></h2><p>Download the completed project by using the <a href="https://koenig-media.raywenderlich.com/uploads/2020/01/SQLite-With-Swift-Getting-Started.zip" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-download" sizing="height"></i><code>[Download Materials]</code></a> button at the top or bottom of this tutorial. There, you can see other common tasks that this tutorial didnâ€™t have time to cover, including the implemented updates, deletes and multiple row handling.</p><p>Debugging is another important part of using SQLite with Swift. In many cases, youâ€™ll need some kind of database browser to see whatâ€™s going on under the hood. There are many different apps that can help with this. A quick internet search will show which ones are best for you.</p><p>You can also access your SQLite databases directly from your Terminal by typing <i class="vp-icon fas fa-database" sizing="height"></i><code>sqlite3 file.db</code>. From there, use the <code>.help</code> command to see a list of commands, or simply start executing SQL statements directly at the prompt. Find more information on the command-line SQLite client on the <a href="https://www.sqlite.org/cli.html" target="_blank" rel="noopener noreferrer">main SQLite site</a>.</p><p>I hope you enjoyed this whirlwind introduction to working with SQLite and Swift! If you have any questions or comments, please join the discussion below.</p></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/chanhi2000/bookshelf/edit/main/src/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/bookshelf/programming/swift/articles/" aria-label="/programming/swift/articles/"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->/programming/swift/articles/</div></a><a class="route-link auto-link next" href="/bookshelf/kodeco.com/6747815-uigesturerecognizer-tutorial-getting-started.html" aria-label="UIGestureRecognizer Tutorial: Getting Started"><div class="hint">Next<span class="arrow end"></span></div><div class="link">UIGestureRecognizer Tutorial: Getting Started<i class="vp-icon fa-brands fa-swift" sizing="height"></i></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">MIT Licensed | Copyright Â© 2022-present <a href="https://github.com/chanhi2000">Chan Hee Lee</a></div><!----></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/bookshelf/assets/app-BItykJLQ.js" defer></script>
  </body>
</html>
