<!doctype html>
<html lang="ko-KR" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.99" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Couchbase Tutorial for Android - Getting Started","image":["https://koenig-media.raywenderlich.com/uploads/2016/07/demo.gif =240x","https://koenig-media.raywenderlich.com/uploads/2016/07/image01.png =240x","https://koenig-media.raywenderlich.com/uploads/2016/07/drag-db-finder-1.png","https://koenig-media.raywenderlich.com/uploads/2016/07/diagrams.002.png","https://koenig-media.raywenderlich.com/uploads/2016/07/image02.png","https://koenig-media.raywenderlich.com/uploads/2016/07/diagrams.003.png","https://koenig-media.raywenderlich.com/uploads/2016/07/getter-setters-1.gif","https://koenig-media.raywenderlich.com/uploads/2016/07/diagrams.005.png","https://koenig-media.raywenderlich.com/uploads/2016/07/image03.png =240x","https://koenig-media.raywenderlich.com/uploads/2016/07/image04.gif =240x","https://koenig-media.raywenderlich.com/uploads/2016/07/image05.png =240x","https://koenig-media.raywenderlich.com/uploads/2016/07/image06.png =240x","https://koenig-media.raywenderlich.com/uploads/2016/07/image06-1.gif","https://koenig-media.raywenderlich.com/uploads/2016/07/onclick.gif","https://koenig-media.raywenderlich.com/uploads/2016/07/image07.png =240x","https://koenig-media.raywenderlich.com/uploads/2016/07/image08.png","https://koenig-media.raywenderlich.com/uploads/2016/07/image09.png =240x","https://koenig-media.raywenderlich.com/uploads/2016/05/browser.png","https://koenig-media.raywenderlich.com/uploads/2016/07/Sync-Gateway-UI-480x230.png","https://koenig-media.raywenderlich.com/uploads/2016/07/image10.png =240x","https://koenig-media.raywenderlich.com/uploads/2016/07/deploy-multiple-devices.png","https://koenig-media.raywenderlich.com/uploads/2016/07/image11-3.gif"],"datePublished":"2017-11-16T00:00:00.000Z","dateModified":null,"author":[]}</script><meta property="og:url" content="https://chanhi2000.github.io/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html"><meta property="og:site_name" content="ðŸ“šBookshelf"><meta property="og:title" content="Couchbase Tutorial for Android - Getting Started"><meta property="og:description" content="Article(s) > Couchbase Tutorial for Android - Getting Started"><meta property="og:type" content="article"><meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/08/CouchbaseAndroid-twitter.png"><meta property="og:locale" content="ko-KR"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:src" content="https://koenig-media.raywenderlich.com/uploads/2016/08/CouchbaseAndroid-twitter.png"><meta name="twitter:image:alt" content="Couchbase Tutorial for Android - Getting Started"><meta property="article:tag" content="couchbase"><meta property="article:tag" content="gradle"><meta property="article:tag" content="android"><meta property="article:tag" content="java"><meta property="article:tag" content="kodeco.com"><meta property="article:tag" content="blog"><meta property="article:published_time" content="2017-11-16T00:00:00.000Z"><link rel="icon" href="/bookshelf/assets/icon/favicon.svg"><title>Couchbase Tutorial for Android - Getting Started | ðŸ“šBookshelf</title><meta name="description" content="Article(s) > Couchbase Tutorial for Android - Getting Started">
    <link rel="preload" href="/bookshelf/assets/style-Bhb-QcDa.css" as="style"><link rel="stylesheet" href="/bookshelf/assets/style-Bhb-QcDa.css">
    
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/bookshelf/" aria-label="Take me home"><img class="vp-nav-logo" src="/bookshelf/assets/icon/favicon.svg" alt><!----><span class="vp-site-name hide-in-pad">ðŸ“šBookshelf</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/bookshelf/news.html" aria-label><!--[--><i class="vp-icon fas fa-rss" sizing="height"></i><!--]--><!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-keyboard" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/hackingwithswift.com/" aria-label="hackingwithswift.com"><!--[--><img class="vp-icon" src="https://hackingwithswift.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->hackingwithswift.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fcc/" aria-label="freecodecamp.org"><!--[--><img class="vp-icon" src="https://cdn.freecodecamp.org/universal/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->freecodecamp.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/bookshelf/kodeco.com/" aria-label="kodeco.com"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->kodeco.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.kotzilla.io/" aria-label="blog.kotzilla.io"><!--[--><img class="vp-icon" src="https://blog.kotzilla.io/hubfs/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.kotzilla.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kt.academy/" aria-label="kt.academy"><!--[--><img class="vp-icon" src="https://kt.academy/logo.png" alt aria-hidden no-view sizing="both"><!--]-->kt.academy<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/droidcon.com/" aria-label="droidcon.com"><!--[--><img class="vp-icon" src="https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png" alt aria-hidden no-view sizing="both"><!--]-->droidcon.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/outcomeschool.com/" aria-label="outcomeschool.com"><!--[--><img class="vp-icon" src="https://outcomeschool.com/static/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->outcomeschool.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/frontendmasters.com/" aria-label="frontendmasters.com"><!--[--><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->frontendmasters.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tricks.com/" aria-label="css-tricks.com"><!--[--><img class="vp-icon" src="https://css-tricks.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->css-tricks.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="smashingmagazine.com"><!--[--><img class="vp-icon" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->smashingmagazine.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="oddbird.net"><!--[--><img class="vp-icon" src="https://oddbird.net/safari-pinned-tab.svg" alt aria-hidden no-view sizing="both"><!--]-->oddbird.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/zeroheight.com/" aria-label="zeroheight.com"><!--[--><img class="vp-icon" src="https://zeroheight.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->zeroheight.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/typescript.tv/" aria-label="typescript.tv"><!--[--><img class="vp-icon" src="https://typescript.tv/_astro/android-chrome-192x192.BhQ8hcWh.png" alt aria-hidden no-view sizing="both"><!--]-->typescript.tv<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.logrocket.com/" aria-label="blog.logrocket.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.logrocket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/realpython.com/" aria-label="realpython.com"><!--[--><img class="vp-icon" src="https://realpython.com/static/favicon.68cbf4197b0c.png" alt aria-hidden no-view sizing="both"><!--]-->realpython.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/digitalocean.com/" aria-label="digitalocean.com"><!--[--><img class="vp-icon" src="https://digitalocean.com/_next/static/media/favicon.594d6067.ico" alt aria-hidden no-view sizing="both"><!--]-->digitalocean.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/antonioleiva.com/" aria-label="antonioleiva.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/antonioleiva.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->antonioleiva.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/johnnyreilly.com/" aria-label="johnnyreilly.com"><!--[--><img class="vp-icon" src="https://johnnyreilly.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->johnnyreilly.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/code-maze.com/" aria-label="code-maze.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/code-maze.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->code-maze.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/milanjovanovic.tech/" aria-label="milanjovanovic.tech"><!--[--><img class="vp-icon" src="https://milanjovanovic.tech/profile_favicon.png" alt aria-hidden no-view sizing="both"><!--]-->milanjovanovic.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/shopify.engineering/" aria-label="shopify.engineering"><!--[--><img class="vp-icon" src="https://cdn.shopify.com/static/shopify-favicon.png" alt aria-hidden no-view sizing="both"><!--]-->shopify.engineering<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devtoolstips.org/" aria-label="devtoolstips.org"><!--[--><img class="vp-icon" src="https://devtoolstips.org/assets/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devtoolstips.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/piccalil.li/" aria-label="piccalil.li"><!--[--><img class="vp-icon" src="https://piccalil.li/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->piccalil.li<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/sitepoint.com/" aria-label="sitepoint.com"><!--[--><img class="vp-icon" src="https://sitepoint.com/favicons/512x512.png" alt aria-hidden no-view sizing="both"><!--]-->sitepoint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/event-driven.io/" aria-label="event-driven.io"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/event-driven.io/favicon.jfif" alt aria-hidden no-view sizing="both"><!--]-->event-driven.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/packagemain.tech/" aria-label="packagemain.tech"><!--[--><img class="vp-icon" src="https://substack-post-media.s3.amazonaws.com/public/images/2ea54e25-eaa6-4630-bfc0-10b8cfdce894/apple-touch-icon-1024x1024.png" alt aria-hidden no-view sizing="both"><!--]-->packagemain.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/gosolve.io/" aria-label="gosolve.io"><!--[--><img class="vp-icon" src="https://gosolve.io/wp-content/uploads/2022/03/cropped-ikona1-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->gosolve.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/bram.us/" aria-label="bram.us"><!--[--><img class="vp-icon" src="https://bram.us/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->bram.us<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/una.im/" aria-label="una.im"><!--[--><img class="vp-icon" src="https://una.im/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->una.im<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/joshwcomeau.com/" aria-label="joshwcomeau.com"><!--[--><img class="vp-icon" src="https://joshwcomeau.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->joshwcomeau.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tip.com/" aria-label="css-tip.com"><!--[--><img class="vp-icon" src="https://css-tip.com/img/fav.png" alt aria-hidden no-view sizing="both"><!--]-->css-tip.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/nerdy.dev/" aria-label="nerdy.dev"><!--[--><img class="vp-icon" src="https://nerdy.dev/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->nerdy.dev<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/towardsdatascience.com/" aria-label="towardsdatascience.com"><!--[--><img class="vp-icon" src="https://cdn-images-1.medium.com/v2/resize:fill:128:128/1*VzTUkfeGymHP4Bvav-T-lA.png" alt aria-hidden no-view sizing="both"><!--]-->towardsdatascience.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/douggregor.net/" aria-label="douggregor.net"><!--[--><i class="vp-icon fas fa-globe" sizing="both"></i><!--]-->douggregor.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/d2.naver.com/" aria-label="d2.naver.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/d2.naver.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->d2.naver.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakao.com/" aria-label="tech.kakao.com"><!--[--><img class="vp-icon" src="https://www.kakaocorp.com/page/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakao.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakaopay.com/" aria-label="tech.kakaopay.com"><!--[--><img class="vp-icon" src="https://tech.kakaopay.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakaopay.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fe-developers.kakaoent.com/" aria-label="fe-developers.kakaoent.com"><!--[--><img class="vp-icon" src="https://fe-developers.kakaoent.com/favicon-32x32.png?v=44803cb16c1e2debd3984cf2e8cb2ded" alt aria-hidden no-view sizing="both"><!--]-->fe-developers.kakaoent.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/yozm.wishket.com/" aria-label="yozm.wishket.com"><!--[--><img class="vp-icon" src="https://yozm.wishket.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->yozm.wishket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/popit.kr/" aria-label="popit.kr"><!--[--><img class="vp-icon" src="https://popit.kr/wp-content/uploads/2016/08/favicon_32x32.png" alt aria-hidden no-view sizing="both"><!--]-->popit.kr<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devkuma.com/" aria-label="devkuma.com"><!--[--><img class="vp-icon" src="https://devkuma.com/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devkuma.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.gangnamunni.com/" aria-label="blog.gangnamunni.com"><!--[--><img class="vp-icon" src="https://blog.gangnamunni.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->blog.gangnamunni.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/codingeverybody.kr/" aria-label="codingeverybody.kr"><!--[--><img class="vp-icon" src="https://codingeverybody.kr/wp-content/uploads/cropped-favicon-origin-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->codingeverybody.kr<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-network-wired" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tecmint.com/" aria-label="tecmint.com"><!--[--><img class="vp-icon" src="https://tecmint.com/wp-content/uploads/2020/07/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tecmint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/docker.com/" aria-label="docker.com"><!--[--><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->docker.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/learnkube.com/" aria-label="learnkube.com"><!--[--><img class="vp-icon" src="https://static.learnkube.com/f7e5160d4744cf05c46161170b5c11c9.svg" alt aria-hidden no-view sizing="both"><!--]-->learnkube.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/itsfoss.com/" aria-label="itsfoss.com"><!--[--><img class="vp-icon" src="https://itsfoss.com/content/images/size/w256h256/2022/12/android-chrome-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->itsfoss.com<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/chanhi2000/bookshelf" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><!----></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><span class="vp-sidebar-title">kodeco.com</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/" aria-label="Kodeco (kodeco.com)"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->Kodeco (kodeco.com)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/523-augmented-reality-in-android-with-google-s-face-api.html" aria-label="Augmented Reality in Android with Googleâ€™s Face API"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Augmented Reality in Android with Googleâ€™s Face API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/324-viewpager-tutorial-getting-started-in-kotlin.html" aria-label="ViewPager Tutorial - Getting Started in Kotlin"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->ViewPager Tutorial - Getting Started in Kotlin<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html" aria-label="Couchbase Tutorial for Android - Getting Started"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Couchbase Tutorial for Android - Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/272-intermediate-recyclerview-tutorial-with-kotlin.html" aria-label="Intermediate RecyclerView Tutorial with Kotlin"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Intermediate RecyclerView Tutorial with Kotlin<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/262-dependency-injection-in-android-with-dagger-2-and-kotlin.html" aria-label="Dependency Injection in Android with Dagger 2 and Kotlin"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Dependency Injection in Android with Dagger 2 and Kotlin<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/254-getting-started-with-android-wear-with-kotlin.html" aria-label="Getting Started with Android Wear with Kotlin"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Getting Started with Android Wear with Kotlin<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/249-gradle-tutorial-for-android-getting-started.html" aria-label="Gradle Tutorial for Android - Getting Started"><!--[--><i class="vp-icon iconfont icon-gradle" sizing="both"></i><!--]-->Gradle Tutorial for Android - Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/247-react-native-tutorial-building-android-apps-with-javascript.html" aria-label="React Native Tutorial - Building Android Apps with JavaScript"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->React Native Tutorial - Building Android Apps with JavaScript<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/240-android-accessibility-tutorial-getting-started.html" aria-label="Android Accessibility Tutorial: Getting Started"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Android Accessibility Tutorial: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html" aria-label="Introduction to Google Maps API for Android with Kotlin"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Introduction to Google Maps API for Android with Kotlin<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/1144981-kotlin-for-android-an-introduction.html" aria-label="Kotlin For Android: An Introduction"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Kotlin For Android: An Introduction<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6398124-swiftui-tutorial-for-ios-creating-charts.html" aria-label="SwiftUI Tutorial for iOS - Creating Charts"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->SwiftUI Tutorial for iOS - Creating Charts<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6334294-my-app-crashed-now-what.html" aria-label="My App Crashed, Now What?"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->My App Crashed, Now What?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6620276-sqlite-with-swift-tutorial-getting-started.html" aria-label="SQLite With Swift Tutorial: Getting Started"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->SQLite With Swift Tutorial: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6747815-uigesturerecognizer-tutorial-getting-started.html" aria-label="UIGestureRecognizer Tutorial: Getting Started"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->UIGestureRecognizer Tutorial: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6742901-protocol-oriented-programming-tutorial-in-swift-5-1-getting-started.html" aria-label="Protocol-Oriented Programming Tutorial in Swift 5.1: Getting Started"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->Protocol-Oriented Programming Tutorial in Swift 5.1: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/7076593-cocoapods-tutorial-for-swift-getting-started.html" aria-label="CocoaPods Tutorial for Swift: Getting Started"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->CocoaPods Tutorial for Swift: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/7181017-unsafe-swift-using-pointers-and-interacting-with-c.html" aria-label="Unsafe Swift: Using Pointers and Interacting With C"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->Unsafe Swift: Using Pointers and Interacting With C<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6827616-ios-accessibility-getting-started.html" aria-label="iOS Accessibility: Getting Started"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->iOS Accessibility: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/6587213-alamofire-5-tutorial-for-ios-getting-started.html" aria-label="Alamofire 5 Tutorial for iOS: Getting Started"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->Alamofire 5 Tutorial for iOS: Getting Started<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/30067669-documenting-kotlin-code-for-android-using-kdoc-and-dokka.html" aria-label="Documenting Kotlin Code for Android Using KDoc and Dokka"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->Documenting Kotlin Code for Android Using KDoc and Dokka<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kodeco.com/31290959-kotlin-sequences-getting-started.html" aria-label="Kotlin Sequences - Getting Started"><!--[--><i class="vp-icon iconfont icon-kotlin" sizing="both"></i><!--]-->Kotlin Sequences - Getting Started<!----></a></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><div class="page-cover"><img src="https://koenig-media.raywenderlich.com/uploads/2016/08/CouchbaseAndroid-twitter.png" alt no-view></div><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon fa-brands fa-android" sizing="height"></i>Couchbase Tutorial for Android - Getting Started</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="Writing DateðŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">17. 11. 16.</span><meta property="datePublished" content="2017-11-16T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading TimeâŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 17 min</span><meta property="timeRequired" content="PT17M"></span><span class="page-category-info" aria-label="CategoryðŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color8" role>Java</span><span class="page-category-item color0" role>Android</span><span class="page-category-item color2" role>Gradle</span><span class="page-category-item color8" role>Article(s)</span><!--]--><meta property="articleSection" content="Java,Android,Gradle,Article(s)"></span><span class="page-tag-info" aria-label="TagðŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8" role>blog</span><span class="page-tag-item color1" role>kodeco.com</span><span class="page-tag-item color8" role>java</span><span class="page-tag-item color3" role>android</span><span class="page-tag-item color4" role>gradle</span><span class="page-tag-item color2" role>couchbase</span><!--]--><meta property="keywords" content="blog,kodeco.com,java,android,gradle,couchbase"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="frontmatter-title-á„€á…ªá†«á„…á…§á†«" tabindex="-1"><a class="header-anchor" href="#frontmatter-title-á„€á…ªá†«á„…á…§á†«"><span>Couchbase Tutorial for Android - Getting Started ê´€ë ¨</span></a></h1><a class="route-link vp-card" href="/bookshelf/programming/java-android/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="https://chanhi2000.github.io/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Android > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><nav class="table-of-contents"><ul><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#getting-started" class="router-link-active router-link-exact-active">Getting Started</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#using-the-prebuilt-database" class="router-link-active router-link-exact-active">Using the Prebuilt Database</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#initializing-the-database" class="router-link-active router-link-exact-active">Initializing the Database</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#database-listener" class="router-link-active router-link-exact-active">Database Listener</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#the-home-screen" class="router-link-active router-link-exact-active">The Home Screen</a><ul><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#data-modeling" class="router-link-active router-link-exact-active">Data Modeling</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#pojo-classes" class="router-link-active router-link-exact-active">POJO Classes</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#indexing-data" class="router-link-active router-link-exact-active">Indexing Data</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#querying-and-displaying-data" class="router-link-active router-link-exact-active">Querying and Displaying Data</a></li></ul></li><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#home-activity-â†’-question-activity" class="router-link-active router-link-exact-active">Home Activity â†’ Question Activity</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#the-question-screen" class="router-link-active router-link-exact-active">The Question Screen</a><ul><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#loading-the-question-data" class="router-link-active router-link-exact-active">Loading the Question Data</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#multiple-choice-in-a-gridview" class="router-link-active router-link-exact-active">Multiple Choice in a GridView</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#writing-data" class="router-link-active router-link-exact-active">Writing Data</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#using-attachments" class="router-link-active router-link-exact-active">Using Attachments</a></li></ul></li><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#adding-synchronization" class="router-link-active router-link-exact-active">Adding Synchronization</a><ul><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#installing-sync-gateway" class="router-link-active router-link-exact-active">Installing Sync Gateway</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#synchronization" class="router-link-active router-link-exact-active">Synchronization</a></li></ul></li><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#aggregating-data" class="router-link-active router-link-exact-active">Aggregating Data</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#run-the-query" class="router-link-active router-link-exact-active">Run the Query</a><ul><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#add-a-livequery" class="router-link-active router-link-exact-active">Add a LiveQuery</a></li></ul></li><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#simulating-multiple-users" class="router-link-active router-link-exact-active">Simulating Multiple Users</a></li><li><a aria-current="page" href="/bookshelf/kodeco.com/853-couchbase-tutorial-for-android-getting-started.html#where-to-go-from-here" class="router-link-active router-link-exact-active">Where to Go From Here?</a></li></ul></nav><hr><div class="vp-site-info" data-name="Couchbase Tutorial for Android - Getting Started"><a class="vp-site-info-navigator no-external-link-icon" title="Couchbase Tutorial for Android - Getting Started" href="https://kodeco.com/853-couchbase-tutorial-for-android-getting-started" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://koenig-media.raywenderlich.com/uploads/2016/08/CouchbaseAndroid-twitter.png) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://assets.carolus.kodeco.com/assets/murakami/category-icons/category-networking-android-56e153082b082a0e4dde87ceadfa482ce6812758e8d896a3f0b37732c718bd96.svg" alt loading="lazy" no-view><div class="vp-site-info-name">Couchbase Tutorial for Android - Getting Started</div><div class="vp-site-info-desc">In this couchbase tutorial, you will learn how to use prebuilt Couchbase Lite databases, model, query, upload and sync data including attachments.</div></div><!----></div><p><a href="http://developer.couchbase.com/mobile" target="_blank" rel="noopener noreferrer">Couchbase Mobile</a> is a distributed database that runs on mobile devices and on app servers. Having a mobile database under your app results in speedy interactions with your application â€” even without network connectivity. When connectivity is restored, the full master-master replication automatically synchronizes the data.</p><p>Why would you choose Couchbase over the built-in SQLite support or a cloud-based data service?</p><ul><li><strong>Easy migration</strong>: Since Couchbase is built on NoSQL, you can seamlessly change data as your application grows â€” without requiring elaborate upgrade scripts.</li><li><strong>Simple data mapping</strong>: Couchbase lets you store data in a format that closely resembles how your app uses the data.</li><li><strong>Built-in synchronization</strong>: If you have ever needed to build your own syncing solution, you know how complicated it can be. Couchbaseâ€™s Sync Gateway does all of the hard work for you.</li><li><strong>Offline support</strong>: Couchbase lets you develop your app without thinking about a network connection. You simply write to the local database and let Couchbase handle the rest.</li></ul><p>In this Couchbase tutorial, youâ€™ll develop a crowd-sourcing quiz application called <strong>QuizzDroid</strong>. Your answers will be shared (via Sync Gateway) with all other users. So there is no right or wrong answer â€” only what other users have answered.</p><p>![couchbase tutorial demo](https://koenig-media.raywenderlich.com/uploads/2016/07/demo.gif =240x)</p><p>When youâ€™re done, youâ€™ll have learned the following:</p><ul><li>How to use prebuilt Couchbase Lite databases.</li><li>How to model and query data including attachments.</li><li>How to craft data.</li><li>How to sync data and manage network availability.</li><li>How to deploy your app to multiple emulators.</li></ul><p>Are you excited? Letâ€™s go!</p><div class="hint-container tip"><p class="hint-container-title">Note</p><p>You should have a working knowledge of Android development before working through this Couchbase tutorial. If you need a refresher, take a look at some of our <a href="http://www.raywenderlich.com/category/android" target="_blank" rel="noopener noreferrer">introductory Android tutorials</a>!</p></div><hr><h2 id="getting-started" tabindex="-1"><a class="header-anchor" href="#getting-started"><span>Getting Started</span></a></h2><p>Download the <a href="https://koenig-media.raywenderlich.com/uploads/2016/09/quizzdroid-starter.zip" target="_blank" rel="noopener noreferrer">QuizzDroid starter project</a> and open it in Android Studio. It already contains the Couchbase Lite Android SDK as a dependency and has two activities:</p><ul><li><strong>HomeActivity</strong> will display the list of questions.</li><li><strong>QuestionActivity</strong> will contain the image, possible choices to select from and all answers from other users.</li></ul><p>Build and run your app (some configurations of Android Studio may report build errors on the first attempt; in this case, simply build and run again, and youâ€™ll be error-free). As you can see, the screen is empty:</p><p>![couchbase tutorial image01](https://koenig-media.raywenderlich.com/uploads/2016/07/image01.png =240x)</p><p>Youâ€™re now ready to start bringing the activities to life.</p><p>Couchbase Mobile is divided into three components:</p><ul><li><strong>Couchbase Lite</strong>: An embedded NoSQL database that runs on the device, within your application.</li><li><strong>Sync Gateway</strong>: An Internet-facing synchronization server that securely syncs data between device and cloud.</li><li><strong>Couchbase Server</strong>: A highly scalable cloud-based NoSQL server used as a storage engine by Sync Gateway.</li></ul><p>Youâ€™ll use the Couchbase Lite database and the Sync Gateway in this tutorial in a simulated multi-user environment and briefly touch on the Couchbase server component.</p><hr><h2 id="using-the-prebuilt-database" tabindex="-1"><a class="header-anchor" href="#using-the-prebuilt-database"><span>Using the Prebuilt Database</span></a></h2><p>Since Couchbase Lite runs right on the device, you can bundle a prebuilt database in your application. This is optional; most apps start with an empty database and add data entered by the user or synchronized through Sync Gateway.</p><p>In this Couchbase tutorial, you will use a database containing a list of questions. <a href="https://koenig-media.raywenderlich.com/uploads/2016/07/quizzdroid.cblite2.zip" target="_blank" rel="noopener noreferrer">Download the database</a> and move the zip file to <i class="vp-icon fas fa-folder-open" sizing="height"></i> <strong>app/src/main/assets/</strong> in the starter project:</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/07/drag-db-finder-1.png" alt="couchbase tutorial drag-db-finder" tabindex="0" loading="lazy"><figcaption>couchbase tutorial drag-db-finder</figcaption></figure><p>The database starts in the <i class="vp-icon fas fa-folder-open" sizing="height"></i> <strong>assets</strong> folder, but Couchbase Lite reads from and persists to the <i class="vp-icon fas fa-folder-open" sizing="height"></i> <code>data/data/com.raywenderlich.quizzdroid/files</code> folder. In the next section youâ€™ll add code to move the database to its final location.</p><hr><h2 id="initializing-the-database" tabindex="-1"><a class="header-anchor" href="#initializing-the-database"><span>Initializing the Database</span></a></h2><p>Open <i class="vp-icon fa-brands fa-java" sizing="height"></i><code>DataManager.java</code>. This is a singleton class providing access to the database instance throughout the application. Add the following to the constructor:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">Manager</span> manager <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 1</span></span>
<span class="line">  manager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AndroidContext</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Manager</span><span class="token punctuation">.</span><span class="token constant">DEFAULT_OPTIONS</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">// 2</span></span>
<span class="line">  database <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token function">getExistingDatabase</span><span class="token punctuation">(</span><span class="token string">&quot;quizzdroid&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">CouchbaseLiteException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>database <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">ZipUtils</span><span class="token punctuation">.</span><span class="token function">unzip</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getAssets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token string">&quot;quizzdroid.cblite2.zip&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> manager<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFilesDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">// 4</span></span>
<span class="line">    database <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token function">getDatabase</span><span class="token punctuation">(</span><span class="token string">&quot;quizzdroid&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">CouchbaseLiteException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Hereâ€™s what this code does:</p><ol><li>Instantiates the Couchbase Lite <code>Manager</code>. A Manager is the top-level object managing a collection of Couchbase Lite Database instances. You must create a Manager instance before working with Couchbase Lite objects. The <code>Manager.DEFAULT_OPTIONS</code> parameter indicates default options, including read/write support.</li><li>Checks for an existing <code>Database</code> named â€œquizzdroidâ€. This line returns <code>null</code> if the database doesnâ€™t exist, as would be the case on first launch.</li><li>If the database doesnâ€™t exist, the <code>ZipUtils.unzip</code> method unzips the zip database file into the <i class="vp-icon fas fa-folder-open" sizing="height"></i> <strong>files</strong> directory; otherwise, nothing further needs to be done.</li><li>The database is instantiated using the <code>getDatabase</code> method.</li></ol><hr><h2 id="database-listener" tabindex="-1"><a class="header-anchor" href="#database-listener"><span>Database Listener</span></a></h2><p>Now that the database is initialized, you should verify it is working properly. This is a perfect job for the <strong>Database Listener</strong>, which is a component that provides an HTTP entry point to the database. This component is optional and is often used for the following reasons:</p><ul><li><strong>Debugging</strong>: In development, itâ€™s much faster to use the HTTP API to inspect the database than to set breakpoints and examine query results.</li><li><strong>Peer-to-peer</strong>: Other databases (often running on different devices) can persist data to the listener directly without the need for a server to act as the intermediary. This aspect of Couchbase Mobile isnâ€™t covered in this Couchbase tutorial.</li><li><strong>Hybrid development</strong>: Used to access the database from JavaScript frameworks within a WebView. The image below illustrates the Couchbase system architecture. Notice that a database can communicate directly with another database with a listener, instead of having to use the server as a middle-man.</li></ul><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/07/diagrams.002.png" alt="diagrams.002" tabindex="0" loading="lazy"><figcaption>diagrams.002</figcaption></figure><p>Back in <i class="vp-icon fa-brands fa-java" sizing="height"></i><code>DataManager.java</code>, add the following below the existing code in the constructor method:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token function">setCompiler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JavaScriptViewCompiler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Database</span><span class="token punctuation">.</span><span class="token function">setFilterCompiler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JavaScriptReplicationFilterCompiler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">Credentials</span> credentials <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Credentials</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">LiteListener</span> liteListener <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LiteListener</span><span class="token punctuation">(</span>manager<span class="token punctuation">,</span> <span class="token number">5984</span><span class="token punctuation">,</span> credentials<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>liteListener<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Be sure to import the <code>Credentials</code> from the <code>com.couchbase.lite.listener</code> namespace.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/07/image02.png" alt="couchbase tutorial image02" tabindex="0" loading="lazy"><figcaption>couchbase tutorial image02</figcaption></figure><p>This code creates a database listener on port 5984 and starts it on a background thread.</p><p>Build and run your app; you should see the same blank screen as before.</p><p>To access the database from a browser or a command-line utility such as <code>curl</code>, you must enable port forwarding for that port using ADB. From the command line, run the following:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">adb forward tcp:5984 tcp:5984</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Your database is now accessible on <strong>http://localhost:5984/quizzdroid</strong>.</p><p>You can also access the database using the following <code>curl</code> command:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">curl</span> <span class="token parameter variable">-X</span> GET <span class="token string">&#39;http://localhost:5984/quizzdroid&#39;</span></span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># {</span></span>
<span class="line"><span class="token comment">#   &quot;disk_size&quot;:147960,</span></span>
<span class="line"><span class="token comment">#   &quot;db_uuid&quot;:&quot;53b66d23-8803-43f3-a4db-a49d51b09efe&quot;,</span></span>
<span class="line"><span class="token comment">#   &quot;db_name&quot;:&quot;quizzdroid&quot;,</span></span>
<span class="line"><span class="token comment">#   &quot;update_seq&quot;:6,</span></span>
<span class="line"><span class="token comment">#   &quot;instance_start_time&quot;:1468585759670000,</span></span>
<span class="line"><span class="token comment">#   &quot;doc_count&quot;:6</span></span>
<span class="line"><span class="token comment"># }</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Notice the <code>doc_count</code> is <code>6</code>, which confirms the prebuilt database was successfully loaded.</p><p>Your next task is to display the six questions on the Home Screen.</p><hr><h2 id="the-home-screen" tabindex="-1"><a class="header-anchor" href="#the-home-screen"><span>The Home Screen</span></a></h2><p>Couchbase Mobile is a schemaless database, which means there are no restrictions on the database schema. This lets you be quite flexible during development because you donâ€™t need to run database migrations every time the schema changes. Nonetheless, the application code must know about the data structures underneath.</p><h3 id="data-modeling" tabindex="-1"><a class="header-anchor" href="#data-modeling"><span>Data Modeling</span></a></h3><p>Below is the data model for this application:</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/07/diagrams.003.png" alt="diagrams.003" tabindex="0" loading="lazy"><figcaption>diagrams.003</figcaption></figure><p>Data records are called documents, and there are two document types: <code>question</code> and <code>answer</code>. The underlying data format is JSON. You can think of a document as a set of key-value pairs. There is a one-to-many relationship between the question and answer documents.</p><h3 id="pojo-classes" tabindex="-1"><a class="header-anchor" href="#pojo-classes"><span>POJO Classes</span></a></h3><p>In order to manage the Couchbase documents, you will create POJO (Plain Old Java Object) classes to map the Couchbase documents to Java objects.</p><p>Open <i class="vp-icon fas fa-folder-open" sizing="height"></i><code>model</code>/<i class="vp-icon fa-brands fa-java" sizing="height"></i><code>Question.java</code> and add the following instance variables:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">private</span> <span class="token class-name">String</span> _id<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token class-name">String</span> _rev<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token class-name">String</span> text<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token class-name">String</span> tag<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token class-name">String</span> type<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> options<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@JsonIgnore</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token class-name">String</span> _attachments<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Notice the instance variables are the same as the ones listed in the data model table. These variables represent the keys in the <code>question</code> document type. You will use the Jackson library to convert between POJOs and JSON.</p><p>All the properties reserved for Couchbase Lite are prepended with <code>_</code>, such as <code>_id</code>, <code>_rev</code>, and <code>_attachments</code>. The <code>_attachments</code> property is only present if the document contains attachments. You will load attachments through another API method, so itâ€™s marked with the <code>@JsonIgnore</code> annotation, telling Jackson to ignore the variable.</p><p>Use the Android Studio <kbd>CTRL</kbd>+<kbd>Enter</kbd> shortcut to add getter and setter methods for each instance variable.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/07/getter-setters-1.gif" alt="getter-setters" tabindex="0" loading="lazy"><figcaption>getter-setters</figcaption></figure><p>With the <strong>Question</strong> model in the application, you can now write a view to index question documents.</p><h3 id="indexing-data" tabindex="-1"><a class="header-anchor" href="#indexing-data"><span>Indexing Data</span></a></h3><p>The way to query data in Couchbase Lite is by registering a View and then running a <strong>Query</strong> on it with <strong>QueryOptions</strong>. The first thing to know about Couchbase Views is that they have nothing to do with the user interface views.</p><p>A View in Couchbase is a persistent index of documents in a database, which can be queried to find data. The main component of a View is its <code>map</code> function. It takes a documentâ€™s JSON as input, and emits any number of key-value pairs to be indexed.</p><p>First, you will define the view to index the documents of type <strong>question</strong>. The diagram below shows the result of that map function.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/07/diagrams.005.png" alt="diagrams.005" tabindex="0" loading="lazy"><figcaption>diagrams.005</figcaption></figure><p>Remember that a view index is a list of key-value pairs, sorted by key. The viewâ€™s logic is written in the native language of the platform youâ€™re developing on.</p><p>Add the following static method to <i class="vp-icon fas fa-folder-open" sizing="height"></i><code>model</code>/<i class="vp-icon fa-brands fa-java" sizing="height"></i><code>Question.java</code>:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Query</span> <span class="token function">getQuestions</span><span class="token punctuation">(</span><span class="token class-name">Database</span> database<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 1</span></span>
<span class="line">  <span class="token class-name">View</span> view <span class="token operator">=</span> database<span class="token punctuation">.</span><span class="token function">getView</span><span class="token punctuation">(</span><span class="token string">&quot;app/questions&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>view<span class="token punctuation">.</span><span class="token function">getMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 2</span></span>
<span class="line">    view<span class="token punctuation">.</span><span class="token function">setMap</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Mapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token annotation punctuation">@Override</span></span>
<span class="line">      <span class="token comment">// 3</span></span>
<span class="line">      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> document<span class="token punctuation">,</span> <span class="token class-name">Emitter</span> emitter<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 4</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;question&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          emitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token class-name">Query</span> query <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> query<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This method returns a query from a database View. Walking through the code:</p><ol><li>Request a database view named questions. This will create the view if it doesnâ€™t exist.</li><li>If the view does not already have a mapping, create one with a new <code>Mapper</code> object. The second parameter to <code>setMap</code> is a version number. If your code for the map changes in the future, the version number should be incremented as well.</li><li>The <code>Mapper</code> object calls <code>map</code> for each document in the database.</li><li>If the document type equals <code>question</code>, then emit the key-value pair for the view.</li></ol><h3 id="querying-and-displaying-data" tabindex="-1"><a class="header-anchor" href="#querying-and-displaying-data"><span>Querying and Displaying Data</span></a></h3><p>With the view now defined, you are ready to run a <code>Query</code> on it. The result of a query is an instance of <code>QueryEnumerator</code>, which provides a list of <code>QueryRow</code> objects, each one describing a single row from the viewâ€™s index.</p><p>Add the following code to the end of the <code>onCreate</code> method in <i class="vp-icon fa-brands fa-java" sizing="height"></i><code>HomeActivity.java</code>:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token comment">// 1</span></span>
<span class="line"><span class="token class-name">QueryEnumerator</span> questions <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">  questions <span class="token operator">=</span> <span class="token class-name">Question</span><span class="token punctuation">.</span><span class="token function">getQuestions</span><span class="token punctuation">(</span>manager<span class="token punctuation">.</span>database<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">CouchbaseLiteException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2</span></span>
<span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Question</span><span class="token punctuation">&gt;</span></span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">QueryRow</span> question <span class="token operator">:</span> questions<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token class-name">Document</span> document <span class="token operator">=</span> question<span class="token punctuation">.</span><span class="token function">getDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token class-name">Question</span> model <span class="token operator">=</span> <span class="token class-name">ModelHelper</span><span class="token punctuation">.</span><span class="token function">modelForDocument</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token class-name">Question</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  data<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3</span></span>
<span class="line"><span class="token keyword">final</span> <span class="token class-name">HomeAdapter</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HomeAdapter</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">mRecyclerView<span class="token punctuation">.</span><span class="token function">setAdapter</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This code does the following:</p><ol><li>Runs the query and saves the result in a <code>questions</code> variable.</li><li>Loops over the query rows and deserializes the <code>Question</code> model objects.</li><li>Connects the questions to the RecyclerView</li></ol><p>Notice the call to <code>ModelHelper.modelForDocument</code>. Open <i class="vp-icon fa-brands fa-java" sizing="height"></i><code>ModelHelper.java</code>, and take a look at <code>modelForDocument</code>. It uses the Jackson library to convert the properties in the question <code>QueryRow</code> object to the <code>Question</code> object.</p><p>If you run the app, the screen will still be blank because the Recycler View isnâ€™t drawing the rows. In <i class="vp-icon fas fa-folder-open" sizing="height"></i><code>adapter</code>/<i class="vp-icon fa-brands fa-java" sizing="height"></i><code>HomeAdapter.java</code>, add the following code to <code>onBindViewHolder</code>:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token comment">// 1</span></span>
<span class="line"><span class="token class-name">Question</span> question <span class="token operator">=</span> mQuestions<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2</span></span>
<span class="line"><span class="token keyword">switch</span> <span class="token punctuation">(</span>question<span class="token punctuation">.</span><span class="token function">getTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token string">&quot;science&quot;</span><span class="token operator">:</span></span>
<span class="line">    holder<span class="token punctuation">.</span>itemView<span class="token punctuation">.</span><span class="token function">setBackgroundColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token function">parseColor</span><span class="token punctuation">(</span><span class="token string">&quot;#EC5766&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token string">&quot;geography&quot;</span><span class="token operator">:</span></span>
<span class="line">    holder<span class="token punctuation">.</span>itemView<span class="token punctuation">.</span><span class="token function">setBackgroundColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token function">parseColor</span><span class="token punctuation">(</span><span class="token string">&quot;#FFC857&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token string">&quot;android&quot;</span><span class="token operator">:</span></span>
<span class="line">    holder<span class="token punctuation">.</span>itemView<span class="token punctuation">.</span><span class="token function">setBackgroundColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token function">parseColor</span><span class="token punctuation">(</span><span class="token string">&quot;#63ADF2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token string">&quot;logic&quot;</span><span class="token operator">:</span></span>
<span class="line">    holder<span class="token punctuation">.</span>itemView<span class="token punctuation">.</span><span class="token function">setBackgroundColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token function">parseColor</span><span class="token punctuation">(</span><span class="token string">&quot;#86CD82&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3</span></span>
<span class="line">holder<span class="token punctuation">.</span>mQuestion<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>question<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">holder<span class="token punctuation">.</span>mTag<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>question<span class="token punctuation">.</span><span class="token function">getTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 4</span></span>
<span class="line">holder<span class="token punctuation">.</span>itemView<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token annotation punctuation">@Override</span></span>
<span class="line">  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>mOnItemClickListener <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token class-name"><span class="token namespace">mOnItemClickListener<span class="token punctuation">.</span></span>OnClick</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This code does the following:</p><ol><li>Retrieves the <code>question</code> object for the requested row position.</li><li>Uses the category returned by <code>getTag</code> to set the background colors.</li><li>Sets the content to display in the TextViews for the question text and category.</li><li>Assigns an <code>onClick</code> listener to respond when the user taps a question.</li></ol><div class="hint-container tip"><p class="hint-container-title">Note</p><p>Check out the <a href="https://www.raywenderlich.com/126528/android-recyclerview-tutorial" target="_blank" rel="noopener noreferrer">Recycler View</a> tutorial if you need a refresher on using Recycler Views.</p></div><p>Build and run your app; you should now see six questions on the home screen.</p><p>![image03](https://koenig-media.raywenderlich.com/uploads/2016/07/image03.png =240x)</p><p>Well done! In the next section, youâ€™ll add a row click handler to open the Question activity.</p><div class="hint-container tip"><p class="hint-container-title">Note</p><p>Run the same query using the Listener. The result has the same questions you see in the app. This lets you examine the details of each question document. The query link is <strong>http://localhost:5984/quizzdroid/_design/app/_view/questions?include_docs=true</strong></p></div><hr><h2 id="home-activity-â†’-question-activity" tabindex="-1"><a class="header-anchor" href="#home-activity-â†’-question-activity"><span>Home Activity â†’ Question Activity</span></a></h2><p>Head back to <i class="vp-icon fa-brands fa-java" sizing="height"></i><code>HomeActivity.java</code> and add the following code to the end of <code>onCreate</code>:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line">adapter<span class="token punctuation">.</span><span class="token function">setOnItemClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HomeAdapter<span class="token punctuation">.</span>OnItemClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token annotation punctuation">@Override</span></span>
<span class="line">  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">OnClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> view<span class="token punctuation">,</span> <span class="token keyword">int</span> position<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">QuestionActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">Question</span> selected <span class="token operator">=</span> adapter<span class="token punctuation">.</span><span class="token function">getQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token constant">EXTRA_INTENT_ID</span><span class="token punctuation">,</span> selected<span class="token punctuation">.</span><span class="token function">get_id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This code assigns an item click listener to the adapter. When you click an item, an Android intent is created containing the document ID of the selected question as an extra, which is then passed along to start the <code>QuestionActivity</code>.</p><p>Build and run. Click on any row to open the question activity. The Question activity is blank, but the next section will take care of that.</p><p>![image04](https://koenig-media.raywenderlich.com/uploads/2016/07/image04.gif =240x)</p><hr><h2 id="the-question-screen" tabindex="-1"><a class="header-anchor" href="#the-question-screen"><span>The Question Screen</span></a></h2><p>Your first task is to load the full question document from the database and use it to populate the Question activity.</p><h3 id="loading-the-question-data" tabindex="-1"><a class="header-anchor" href="#loading-the-question-data"><span>Loading the Question Data</span></a></h3><p>Open <i class="vp-icon fa-brands fa-java" sizing="height"></i><code>QuestionActivity.java</code> and paste the following at the end of <code>onCreate</code>:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token comment">// 1 </span></span>
<span class="line"><span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token function">getIntent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">String</span> questionId <span class="token operator">=</span> intent<span class="token punctuation">.</span><span class="token function">getStringExtra</span><span class="token punctuation">(</span><span class="token class-name">HomeActivity</span><span class="token punctuation">.</span><span class="token constant">EXTRA_INTENT_ID</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2</span></span>
<span class="line"><span class="token class-name">DataManager</span> manager <span class="token operator">=</span> <span class="token class-name">DataManager</span><span class="token punctuation">.</span><span class="token function">getSharedInstance</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Document</span> document <span class="token operator">=</span> manager<span class="token punctuation">.</span>database<span class="token punctuation">.</span><span class="token function">getDocument</span><span class="token punctuation">(</span>questionId<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3</span></span>
<span class="line">mQuestion <span class="token operator">=</span> <span class="token class-name">ModelHelper</span><span class="token punctuation">.</span><span class="token function">modelForDocument</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token class-name">Question</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">mTextView<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>mQuestion<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Hereâ€™s what this code does:</p><ol><li>Retrieves the <code>questionId</code> of the selected question from the intent extra.</li><li>Uses the <code>manager</code> singleton database to load the document with the <code>questionId</code>.</li><li>Deserializes the document into <code>question</code> and sets the text property on the <code>textView</code></li></ol><p>Build and run your app, and click on a question to display each question detail:</p><p>![image05](https://koenig-media.raywenderlich.com/uploads/2016/07/image05.png =240x)</p><h3 id="multiple-choice-in-a-gridview" tabindex="-1"><a class="header-anchor" href="#multiple-choice-in-a-gridview"><span>Multiple Choice in a GridView</span></a></h3><p>The data modeling diagram lists the <code>options</code> property as an array of strings. Those are the possible choices shown to the user.</p><p>Add the following method to<i class="vp-icon fa-brands fa-java" sizing="height"></i><code>QuestionActivity.java:</code></p><p>To display the choices, add the following to the end of onCreate in <i class="vp-icon fa-brands fa-java" sizing="height"></i><code>QuestionActivity.java</code>:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line">mQuestionOptions <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">GridView</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>question_options<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">mQuestionOptions<span class="token punctuation">.</span><span class="token function">setChoiceMode</span><span class="token punctuation">(</span><span class="token class-name">AbsListView</span><span class="token punctuation">.</span><span class="token constant">CHOICE_MODE_SINGLE</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">mQuestionOptions<span class="token punctuation">.</span><span class="token function">setNumColumns</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">mQuestionOptions<span class="token punctuation">.</span><span class="token function">setSelector</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>selector_button<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">mQuestionOptions<span class="token punctuation">.</span><span class="token function">setAdapter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">QuestionOptionsAdapter</span><span class="token punctuation">(</span>mQuestion<span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">mQuestionOptions<span class="token punctuation">.</span><span class="token function">setOnItemClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AdapterView<span class="token punctuation">.</span>OnItemClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token annotation punctuation">@Override</span></span>
<span class="line">  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onItemClick</span><span class="token punctuation">(</span><span class="token class-name">AdapterView</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> parent<span class="token punctuation">,</span> <span class="token class-name">View</span> view<span class="token punctuation">,</span> <span class="token keyword">int</span> position<span class="token punctuation">,</span> <span class="token keyword">long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    mSelectedOption <span class="token operator">=</span> position<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Hereâ€™s whatâ€™s happening in this code segment:</p><p>In the above code segment, you create a GridView, assign it an adapter populated with <code>mQuestionOptions</code> and then set up a click listener to store the userâ€™s choice in <code>mSelectedOption</code>.</p><p>Build and run. Open any question and click on the possible options:</p><p>![image06](https://koenig-media.raywenderlich.com/uploads/2016/07/image06.png =240x)</p><p>In the next section youâ€™ll add a Submit button to save your answer to a new document.</p><h3 id="writing-data" tabindex="-1"><a class="header-anchor" href="#writing-data"><span>Writing Data</span></a></h3><p>User answers will be stored in the database as Answer documents. First, youâ€™ll create an Answer model class.</p><p>Create a new file <i class="vp-icon fas fa-folder-open" sizing="height"></i><code>model/</code><i class="vp-icon fa-brands fa-java" sizing="height"></i><code>Answer.java</code> and add to it the following instance variables:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">private</span> <span class="token class-name">String</span> _id<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token class-name">String</span> _rev<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token class-name">String</span> question_id<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token class-name">String</span> type<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token class-name">String</span> user_answer<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>These property names match the ones on the data modeling diagram. Next, add a getter and setter for each instance variable using the <kbd>CTRL</kbd>+<kbd>Enter</kbd> shortcut in Android Studio.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/07/image06-1.gif" alt="image06" tabindex="0" loading="lazy"><figcaption>image06</figcaption></figure><p>To create Answer instances, add the following constructor in <i class="vp-icon fas fa-folder-open" sizing="height"></i><code>mode/</code><i class="vp-icon fa-brands fa-java" sizing="height"></i><code>Answer.java</code>:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">public</span> <span class="token class-name">Answer</span><span class="token punctuation">(</span><span class="token class-name">String</span> question_id<span class="token punctuation">,</span> <span class="token class-name">String</span> type<span class="token punctuation">,</span> <span class="token class-name">String</span> user_answer<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>question_id <span class="token operator">=</span> question_id<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>user_answer <span class="token operator">=</span> user_answer<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To save an answer, youâ€™ll add a button with a click handler. Open <i class="vp-icon iconfont icon-code" sizing="height"></i><code>activity_question.xml</code> and add the following Button element below the GridView:</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/submit_button<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>onClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onButtonClicked<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Submit<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Within <i class="vp-icon iconfont icon-code" sizing="height"></i><code>activity_question.xml</code>, create a click handler with the <kbd>Alt</kbd>+<kbd>Enter</kbd> shortcut:</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/07/onclick.gif" alt="onclick" tabindex="0" loading="lazy"><figcaption>onclick</figcaption></figure><p>Add the following to the body of <code>onButtonClicked</code>.</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line">  <span class="token class-name">Answer</span> answer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Answer</span><span class="token punctuation">(</span>mQuestion<span class="token punctuation">.</span><span class="token function">get_id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;answer&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">      mQuestion<span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>mSelectedOption<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token class-name">ModelHelper</span><span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">DataManager</span><span class="token punctuation">.</span><span class="token function">getSharedInstance</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>database<span class="token punctuation">,</span> answer<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This instantiates a new answer object and saves it using <code>ModelHelper.save</code>.</p><p>Build and run, select an answer and tap Submit.</p><p>![image07](https://koenig-media.raywenderlich.com/uploads/2016/07/image07.png =240x)</p><p>Well done! You can now save answers to the database.</p><div class="hint-container tip"><p class="hint-container-title">Note</p><p>Thereâ€™s no visual cue to indicate the answer was saved, but you should see the <code>doc_count</code> value increase at http://localhost:5984/quizzdroid</p></div><p>One more feature to add before you dive into synchronization is to display the image. The generic term in Couchbase is Attachment.</p><h3 id="using-attachments" tabindex="-1"><a class="header-anchor" href="#using-attachments"><span>Using Attachments</span></a></h3><p>Add the following code to the end of <code>onCreate</code> in <i class="vp-icon fa-brands fa-java" sizing="height"></i><code>QuestionActivity.java</code>:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">Revision</span> revision <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getCurrentRevision</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Attachment</span> attachment <span class="token operator">=</span> revision<span class="token punctuation">.</span><span class="token function">getAttachment</span><span class="token punctuation">(</span><span class="token string">&quot;image&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>attachment <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    is <span class="token operator">=</span> attachment<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">CouchbaseLiteException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token class-name">Drawable</span> drawable <span class="token operator">=</span> <span class="token class-name">Drawable</span><span class="token punctuation">.</span><span class="token function">createFromStream</span><span class="token punctuation">(</span>is<span class="token punctuation">,</span> <span class="token string">&quot;image&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  mImageQuestion<span class="token punctuation">.</span><span class="token function">setImageDrawable</span><span class="token punctuation">(</span>drawable<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This uses the current document revision to load the attachment named image as an <code>InputStream</code>. It then converts the stream into a Drawable and assigns it to the <code>mImageQuestion</code> ImageView shown above the question.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/07/image08.png" alt="image08" tabindex="0" loading="lazy"><figcaption>image08</figcaption></figure><div class="hint-container tip"><p class="hint-container-title">Note</p><p>Make sure to import <code>java.io.InputStream</code> for the InputStream class, not the <code>com.couchbase</code> version.</p></div><p>Build and run your app; select a question and the image will appear:</p><p>![image09](https://koenig-media.raywenderlich.com/uploads/2016/07/image09.png =240x)</p><div class="hint-container tip"><p class="hint-container-title">Note</p><p>This Couchbase tutorial only covers how to read attachments. <a href="http://developer.couchbase.com/documentation/mobile/1.2/develop/guides/couchbase-lite/native-api/attachment/index.html" target="_blank" rel="noopener noreferrer">Refer to the Couchbase documentation</a> to learn how to save attachments with a write operation.</p></div><hr><h2 id="adding-synchronization" tabindex="-1"><a class="header-anchor" href="#adding-synchronization"><span>Adding Synchronization</span></a></h2><p>You will use Sync Gateway in whatâ€™s known as <em>walrus</em> mode, which is an in-memory, development-only mode. In production, you would install both Couchbase Server and Sync Gateway.</p><h3 id="installing-sync-gateway" tabindex="-1"><a class="header-anchor" href="#installing-sync-gateway"><span>Installing Sync Gateway</span></a></h3><p><a href="http://www.couchbase.com/nosql-databases/downloads#couchbase-mobile" target="_blank" rel="noopener noreferrer">Download Sync Gateway community edition</a> and unzip the file. The executable is located in the <i class="vp-icon fas fa-folder-open" sizing="height"></i> <code>bin</code> folder. If you unzipped the file to the Downloads folder, start it with this command:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">$ ~/Downloads/couchbase-sync-gateway/bin/sync_gateway <span class="token parameter variable">-dbname</span><span class="token operator">=</span><span class="token string">&quot;quizzdroid&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>You should see <code>Starting server on localhost:4984</code> ... in your terminal window.</p><p>You can now head to http://localhost:4984 to check that itâ€™s up and running:</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/browser.png" alt="browser" tabindex="0" loading="lazy"><figcaption>browser</figcaption></figure><p>Now that the Sync Gateway is running, youâ€™ll add some code to replicate the database to the server.</p><h3 id="synchronization" tabindex="-1"><a class="header-anchor" href="#synchronization"><span>Synchronization</span></a></h3><p>Set up the push and pull replications by adding the following code to the end of the constructor in <i class="vp-icon fa-brands fa-java" sizing="height"></i><code>DataManager.java</code>.</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token comment">// 1</span></span>
<span class="line"><span class="token class-name">URL</span> syncGatewayURL <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token class-name">String</span> <span class="token constant">SYNC_GATEWAY_URL</span> <span class="token operator">=</span> <span class="token string">&quot;http://localhost:4984/quizzdroid&quot;</span><span class="token punctuation">;</span></span>
<span class="line">  syncGatewayURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token constant">SYNC_GATEWAY_URL</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">MalformedURLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2</span></span>
<span class="line">mPush <span class="token operator">=</span> database<span class="token punctuation">.</span><span class="token function">createPushReplication</span><span class="token punctuation">(</span>syncGatewayURL<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">mPush<span class="token punctuation">.</span><span class="token function">setContinuous</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">mPush<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3</span></span>
<span class="line">mPull <span class="token operator">=</span> database<span class="token punctuation">.</span><span class="token function">createPullReplication</span><span class="token punctuation">(</span>syncGatewayURL<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">mPull<span class="token punctuation">.</span><span class="token function">setContinuous</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">mPull<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This code segment does the following:</p><ol><li>Instantiates a URL pointing to http://localhost:4984/quizzdroid, which is your local Sync Gateway instance.</li><li>Starts a <a href="https://github.com/couchbase/couchbase-lite-ios/wiki/Replication#replication" target="_blank" rel="noopener noreferrer">push replication</a> in continuous mode, which is the operation that will send data from the local database to the server.</li><li>Starts a <a href="https://github.com/couchbase/couchbase-lite-ios/wiki/Replication#replication" target="_blank" rel="noopener noreferrer">pull replication</a> in continuous mode, which is the operation that will retrieve data from the server and save it to the local database.</li></ol><p>Before you can build and run, youâ€™ll need to use an ADB command to ensure that QuizzDroid, running on a plugged-in device or emulator, can reach the server over localhost.</p><p>With the emulator running, run the following from the command line:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">adb reverse tcp:4984 tcp:4984</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">Note</p><p>This command only works on devices running Android 5.0+ (API 21). Instead of setting up the reverse proxy, you can replace localhost in the previous code block with 10.0.2.2 for Android stock emulators, 10.0.3.2 for Genymotion emulators or, if youâ€™re deploying to a device, the local IP address of your development machine.</p></div><p>Build and run your app; you should see a new document appear on the Sync Gateway admin UI (http://localhost:4985/_admin/db/quizzdroid, note the different port number) every time you answer a question.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/07/Sync-Gateway-UI-480x230.png" alt="Sync Gateway UI" tabindex="0" loading="lazy"><figcaption>Sync Gateway UI</figcaption></figure><div class="hint-container tip"><p class="hint-container-title">Note</p><p>Using Android Studioâ€™s Instant Run sometimes doesnâ€™t set up the sync correctly; if you donâ€™t see the documents in the Sync Gateway admin, try quitting the app and then build and run again.</p></div><p>So far so good, but what about displaying answers from other users? Youâ€™ll do exactly that in the next section.</p><hr><h2 id="aggregating-data" tabindex="-1"><a class="header-anchor" href="#aggregating-data"><span>Aggregating Data</span></a></h2><p>Data aggregation is a problem across many applications. Couchbase Lite lets you run those data queries using the full capabilities of map and reduce. To run aggregation queries on the rows emitted by the map function, you can use a reduce function to take several rows and aggregate them together in a single object.</p><p>Youâ€™ll write a view to query the number of answers for each possible choice. Youâ€™ll define a map function which returns the number of answers for each question, group them by their value and count the number of rows in each group.</p><p>The requirements for this query are:</p><ul><li>Get all answers that belong to a given question</li><li>Count the number of answers for each possible choice</li></ul><p>With that in mind, you can emit the <code>question_id</code> and <code>user_answer</code> fields as a compound key with a null value, while using a reduce function to count the number of emitted rows.</p><p>Add the following class method to <i class="vp-icon fa-brands fa-java" sizing="height"></i><code>Answer.java</code>:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Query</span> <span class="token function">getAnswersForQuestion</span><span class="token punctuation">(</span><span class="token class-name">Database</span> database<span class="token punctuation">,</span> <span class="token class-name">String</span> questionId<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token class-name">View</span> view <span class="token operator">=</span> database<span class="token punctuation">.</span><span class="token function">getView</span><span class="token punctuation">(</span><span class="token string">&quot;app/answers&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>view<span class="token punctuation">.</span><span class="token function">getMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    view<span class="token punctuation">.</span><span class="token function">setMapReduce</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Mapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token annotation punctuation">@Override</span></span>
<span class="line">      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> document<span class="token punctuation">,</span> <span class="token class-name">Emitter</span> emitter<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;answer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> keys <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          keys<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> document<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;question_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          keys<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> document<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;user_answer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          emitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Reducer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token annotation punctuation">@Override</span></span>
<span class="line">      <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">reduce</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> keys<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> values<span class="token punctuation">,</span> <span class="token keyword">boolean</span> rereduce<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> values<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token class-name">Query</span> query <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  query<span class="token punctuation">.</span><span class="token function">setGroupLevel</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  query<span class="token punctuation">.</span><span class="token function">setStartKey</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>questionId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  query<span class="token punctuation">.</span><span class="token function">setEndKey</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>questionId<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> query<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Grouping is a powerful feature of Couchbase. Itâ€™s available on a Query using the numeric <code>groupLevel</code> property, which defaults to 0. It takes the entire range of rows from the query and coalesces together adjacent rows with the same key.</p><p>Notice that <code>groupingLevel = 2</code> coalesces the rows by key. Keys that are arrays are called <strong>compound keys</strong>; a group level of 2 means the query will coalesce rows with the same <code>question_id</code> and <code>user_answer</code>.</p><p>You can read more about <code>setStartKey()</code> and <code>setEndKey()</code> in the Couchbase <a href="http://developer.couchbase.com/documentation/mobile/current/develop/guides/couchbase-lite/native-api/query/index.html" target="_blank" rel="noopener noreferrer">documentation for configuring queries</a>.</p><hr><h2 id="run-the-query" tabindex="-1"><a class="header-anchor" href="#run-the-query"><span>Run the Query</span></a></h2><p>Time to run the query and use the results. Add the following method to <i class="vp-icon fa-brands fa-java" sizing="height"></i><code>QuestionActivity.java</code>:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAnswerCounts</span><span class="token punctuation">(</span><span class="token class-name">QueryEnumerator</span> answers<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> answerCounts <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> option<span class="token operator">:</span> mQuestion<span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    answerCounts<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>option<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">QueryRow</span> row <span class="token operator">:</span> answers<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">LazyJsonArray</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> key <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">LazyJsonArray</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> row<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">String</span> answer <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> key<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    answerCounts<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>answer<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span>row<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> answerCounts<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The above method takes a <code>QueryEnumerator</code> returned from <code>getAnswersForQuestion()</code> and returns a <code>Map</code> that stores an answer count for each option. The map object makes it quick and easy to access answer counts for each option.</p><p>Add the following code to <code>onCreate()</code>, just before the line <code>mQuestionOptions = (GridView) findViewById(R.id.question_options)</code>:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">Query</span> answers <span class="token operator">=</span> <span class="token class-name">Answer</span><span class="token punctuation">.</span><span class="token function">getAnswersForQuestion</span><span class="token punctuation">(</span>manager<span class="token punctuation">.</span>database<span class="token punctuation">,</span> mQuestion<span class="token punctuation">.</span><span class="token function">get_id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">QueryEnumerator</span> answersQuery <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">  answersQuery <span class="token operator">=</span> answers<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">CouchbaseLiteException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This code stores a <code>QueryEnumerator</code> to be used when calling <code>getAnswerCounts()</code> below.</p><p>Next, find the call to <code>mQuestionOptions.setAdapter(new QuestionOptionsAdapter(mQuestion.getOptions(), null));</code> and replace it with this line:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line">mQuestionOptions<span class="token punctuation">.</span><span class="token function">setAdapter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">QuestionOptionsAdapter</span><span class="token punctuation">(</span>mQuestion<span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">getAnswerCounts</span><span class="token punctuation">(</span>answersQuery<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>This passes the <code>Map</code> returned from <code>getAnswerCounts()</code> into the GridView adapter, allowing it to display answer counts.</p><h3 id="add-a-livequery" tabindex="-1"><a class="header-anchor" href="#add-a-livequery"><span>Add a LiveQuery</span></a></h3><p>Next, youâ€™ll add the method to set up a LiveQuery to keep the answer counts updated. A LiveQuery is a great way to keep your interface updated with database changes. It automatically refreshes any time Database changes affect your query.</p><p>In <i class="vp-icon fa-brands fa-java" sizing="height"></i><code>QuestionActivity.java</code>, add the following method:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">showAnswers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token class-name">DataManager</span> manager <span class="token operator">=</span> <span class="token class-name">DataManager</span><span class="token punctuation">.</span><span class="token function">getSharedInstance</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token class-name">Query</span> answersQuery <span class="token operator">=</span> <span class="token class-name">Answer</span><span class="token punctuation">.</span><span class="token function">getAnswersForQuestion</span><span class="token punctuation">(</span>manager<span class="token punctuation">.</span>database<span class="token punctuation">,</span> mQuestion<span class="token punctuation">.</span><span class="token function">get_id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token class-name">LiveQuery</span> liveQuery <span class="token operator">=</span> answersQuery<span class="token punctuation">.</span><span class="token function">toLiveQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  liveQuery<span class="token punctuation">.</span><span class="token function">addChangeListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LiveQuery<span class="token punctuation">.</span>ChangeListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">changed</span><span class="token punctuation">(</span><span class="token class-name">LiveQuery<span class="token punctuation">.</span>ChangeEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token class-name">QueryEnumerator</span> result <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getRows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> counts <span class="token operator">=</span> <span class="token function">getAnswerCounts</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">final</span> <span class="token class-name">QuestionOptionsAdapter</span> adapter <span class="token operator">=</span></span>
<span class="line">          <span class="token punctuation">(</span><span class="token class-name">QuestionOptionsAdapter</span><span class="token punctuation">)</span>mQuestionOptions<span class="token punctuation">.</span><span class="token function">getAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      adapter<span class="token punctuation">.</span><span class="token function">setAnswerCounts</span><span class="token punctuation">(</span>counts<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token function">runOnUiThread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token annotation punctuation">@Override</span></span>
<span class="line">        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          adapter<span class="token punctuation">.</span><span class="token function">notifyDataSetChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  liveQuery<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This code starts by creating a <code>LiveQuery</code> from <code>Answer.getAnswersForQuestion</code>.</p><p>You then add a <code>ChangeListener</code> to the <code>liveQuery</code> object. The <code>liveQuery</code> object calls the <code>changed</code> method when required, and passes to it a <code>ChangeEvent</code> object.</p><p>Next, you use the previously created <code>getAnswerCounts</code> to return the map of answer counts, which is passed to the GridView adapter to refresh the counts in the UI.</p><p><code>Activity.runOnUiThread</code> updates the GridView on the UI thread.</p><p>Add the following line to the end of <code>onCreate</code> in <i class="vp-icon fa-brands fa-java" sizing="height"></i><code>QuestionActivity.java</code>.</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token function">showAnswers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Build and run your app; open a question and answer it (note that you can answer it more than once).</p><p>![image10](https://koenig-media.raywenderlich.com/uploads/2016/07/image10.png =240x)</p><p>Great job! You can now see your own answers, but what about those from other users?</p><p>By running two instances of the app at the same time, both accessing the same Sync Gateway, you will have real-time visibility into other userâ€™s answers!</p><hr><h2 id="simulating-multiple-users" tabindex="-1"><a class="header-anchor" href="#simulating-multiple-users"><span>Simulating Multiple Users</span></a></h2><p>In order to simulate other users answering the questions, you can run the app on a second emulator.</p><p>From Android Studio, you can deploy the app on multiple devices simultaneously using the <code>[Run]</code> button and <kbd>Shift</kbd> key :</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/07/deploy-multiple-devices.png" alt="deploy-multiple-devices" tabindex="0" loading="lazy"><figcaption>deploy-multiple-devices</figcaption></figure><div class="hint-container tip"><p class="hint-container-title">Note</p><p>The above wonâ€™t work in Debug mode, so if youâ€™re having difficulty, be sure to use the <code>[Run]</code> command in Android Studio, not <code>[Debug]</code>.</p></div><p>If your using the reverse proxy method, you will need to make sure it is enabled for both devices. List the running emulators with the following:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">adb devices</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># List of devices attached</span></span>
<span class="line"><span class="token comment"># emulator-5556	device</span></span>
<span class="line"><span class="token comment"># emulator-5554	device</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>With more than one emulator device, you must specify the device in ADB commands. Enable the reverse proxy for access to Sync Gateway on both devices:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">adb <span class="token parameter variable">-s</span> emulator-5554 reverse tcp:4984 tcp:4984</span>
<span class="line">adb <span class="token parameter variable">-s</span> emulator-5556 reverse tcp:4984 tcp:4984</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Now you can start answering questions on both devices. Notice the answers are updated automatically across emulators due to the live query.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/07/image11-3.gif" alt="image11" tabindex="0" loading="lazy"><figcaption>image11</figcaption></figure><p>Well done! Youâ€™ve built a shareable quiz application that works equally well when itâ€™s offline.</p><hr><h2 id="where-to-go-from-here" tabindex="-1"><a class="header-anchor" href="#where-to-go-from-here"><span>Where to Go From Here?</span></a></h2><p>You can get the full source code for this project as a <a href="https://koenig-media.raywenderlich.com/uploads/2016/09/quizzdroid-final.zip" target="_blank" rel="noopener noreferrer">downloadable zip</a> or as a <a href="https://github.com/jamiltz/quizzdroid" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-github" sizing="height"></i> repo</a> on GitHub.</p><p>The <a href="http://developer.couchbase.com/documentation/mobile/1.2/develop/guides/couchbase-lite/native-api/index.html" target="_blank" rel="noopener noreferrer">Couchbase Lite Guides</a> have detailed explanation for every concept covered in this Couchbase tutorial. Also check out <a href="https://github.com/couchbaselabs/photo-drop" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-github" sizing="height"></i> <code>couchbaselabs/photo-drop</code></a>, a peer-to-peer photo sharing application and <a href="https://github.com/couchbaselabs/todolite-android" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-github" sizing="height"></i> <code>couchbaselabs/todolite-android</code></a>, a multi-user todo list application, both built on Couchbase.</p><p>If you found this tutorial interesting, you might want to try adding peer-to-peer sync capabilities. Start by replacing the remote URL pointing to a Sync Gateway instance with one from another device on the same local network. The challenge in this case is discovering the IP addresses of peer devices. One solution that works well is to use <a href="https://developer.android.com/reference/android/net/nsd/NsdManager.html" target="_blank" rel="noopener noreferrer">NsdManager</a>, the Android implementation of mDNS.</p><p>Feel free to share your feedback, findings and ask any questions in the comments below or in the forums!</p><hr><!----></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/chanhi2000/bookshelf/edit/main/src/kodeco.com/853-couchbase-tutorial-for-android-getting-started.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/bookshelf/programming/java-android/articles/" aria-label="/programming/java-android/articles/"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->/programming/java-android/articles/</div></a><a class="route-link auto-link next" href="/bookshelf/kodeco.com/272-intermediate-recyclerview-tutorial-with-kotlin.html" aria-label="Intermediate RecyclerView Tutorial with Kotlin"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Intermediate RecyclerView Tutorial with Kotlin<i class="vp-icon fa-brands fa-android" sizing="height"></i></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">MIT Licensed | Copyright Â© 2022-present <a href="https://github.com/chanhi2000">Chan Hee Lee</a></div><!----></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/bookshelf/assets/app-BItykJLQ.js" defer></script>
  </body>
</html>
