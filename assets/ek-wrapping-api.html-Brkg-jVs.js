import{_ as u}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as m,d as a,f as e,b as g,a as h,t as k,n as i,g as r,w as f,e as t,r as s,o as w}from"./app-BItykJLQ.js";const b={},y={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},v={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},I={class:"table-of-contents"},A={class:"hint-container note"},P={href:"https://leanpub.com/effectivekotlin",target:"_blank",rel:"noopener noreferrer"},x={href:"https://amazon.com/Effective-Kotlin-Best-Practices-Developers-ebook/dp/B0CHBR5XPF/",target:"_blank",rel:"noopener noreferrer"};function j(l,n){const o=s("VPCard"),c=s("router-link"),d=s("SiteInfo"),p=s("VPIcon");return w(),m("div",null,[a("h1",y,[a("a",v,[a("span",null,k(l.$frontmatter.title)+" ê´€ë ¨",1)])]),e(o,i(r({title:"Android > Article(s)",desc:"Article(s)",link:"/programming/java-android/articles/README.md",logo:"https://chanhi2000.github.io/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),e(o,i(r({title:"Java > Article(s)",desc:"Article(s)",link:"/programming/java/articles/README.md",logo:"https://chanhi2000.github.io/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),a("nav",I,[a("ul",null,[a("li",null,[e(c,{to:"#summary"},{default:f(()=>[...n[0]||(n[0]=[t("Summary",-1)])]),_:1})])])]),n[9]||(n[9]=a("hr",null,null,-1)),e(d,{name:"Item 28: Consider wrapping external APIs",desc:"Why we should wrap external APIs and how to do it.",url:"https://kt.academy/article/ek-wrapping-api",logo:"https://kt.academy/logo.png",preview:"https://marcinmoskala.com/EffectiveKotlin-Book/promotion/wrapping_api.jpg"}),a("div",A,[n[8]||(n[8]=a("p",{class:"hint-container-title"},"Note",-1)),a("p",null,[n[3]||(n[3]=t("This is a chapter from the book ",-1)),n[4]||(n[4]=a("a",{href:"/book/effectivekotlin",target:"_blank",rel:"noopener noreferrer"},"Effective Kotlin",-1)),n[5]||(n[5]=t(". You can find it on ",-1)),a("a",P,[e(p,{icon:"fas fa-globe"}),n[1]||(n[1]=t("LeanPub",-1))]),n[6]||(n[6]=t(" or ",-1)),a("a",x,[e(p,{icon:"fa-brands fa-amazon"}),n[2]||(n[2]=t("Amazon",-1))]),n[7]||(n[7]=t(".",-1))])]),n[10]||(n[10]=g(`<p>It is risky to heavily use an API that might be unstable, both when its creators clarify that it is unstable, and when we do not trust these creators to keep it stable. We should remember that we need to adjust every use in case of inevitable API changes, and we should consider limiting uses and separate them from our logic as much as possible. This is why we often wrap potentially unstable external library APIs in our own project.</p><p>This is not the only reason to wrap external APIs. This gives us a lot of freedom and stability:</p><ul><li>We are not afraid of API changes because we only need to change a single usage inside the wrapper.</li><li>We can adjust the API to our projectâ€™s style and logic.</li><li>We can replace it with a different library if problems arise with this one.</li><li>We can change the behavior of these objects if we need to (of course, do this responsibly).</li></ul><p>There are also counterarguments to this approach:</p><ul><li>We need to define all these wrappers.</li><li>Our internal API is internal, and developers need to learn it just for this project.</li><li>There are no courses that teach how our internal API works. We also cannot expect answers on Stack Overflow.</li></ul><p>Let me show you an example from my practice. In an Android project I co-created, we used the Picasso library to load and display images from URLs. A simple load might look as follows:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line">Picasso<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span>imageView<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We needed to load images all around our application, probably in hundreds of places, so we decided to wrap this API in our own function. This is a simplified version of it.</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">fun</span> ImageView<span class="token punctuation">.</span><span class="token function">loadImage</span><span class="token punctuation">(</span>url<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  Picasso<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It&#39;s great we did that because it later turned out that we needed to load GIF images, which was not supported by Picasso, so we decided to replace this library entirely with a different one named Glide. Thanks to our wrapper, we only needed to change a single function.</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">fun</span> ImageView<span class="token punctuation">.</span><span class="token function">loadImage</span><span class="token punctuation">(</span>url<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  Glide<span class="token punctuation">.</span><span class="token function">with</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Wrapping can be much more complicated than this, but it can still be worth it. Wrappers protect us not only from the pain of changing to an entirely different library, but also from changes in the API of the library we are using and from changes in our own logic.</p><hr><h2 id="summary" tabindex="-1"><a class="header-anchor" href="#summary"><span>Summary</span></a></h2><p>Wrapping an external API is a great way to protect our project from changes in this API. It also gives us a lot of freedom in adjusting the API to our needs. It is a good idea to wrap external APIs that are unstable or when we don&#39;t trust their creators to keep them stable. It is also a good idea to wrap APIs that we use heavily because it gives us more freedom in adjusting them to our needs. On the other hand, wrapping requires defining a lot of functions, and it makes our internal API more complicated. So, we should always consider wrapping external APIs because itâ€™s often worth it.</p>`,15)),h(" TODO: add ARTICLE CARD "),e(o,i(r({title:"Item 28: Consider wrapping external APIs",desc:"Why we should wrap external APIs and how to do it.",link:"https://chanhi2000.github.io/bookshelf/kt.academy/ek-wrapping-api.html",logo:"https://kt.academy/logo.png",background:"rgba(243,139,49,0.2)"})),null,16)])}const E=u(b,[["render",j]]),T=JSON.parse('{"path":"/kt.academy/ek-wrapping-api.html","title":"Item 28: Consider wrapping external APIs","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Item 28: Consider wrapping external APIs","description":"Article(s) > Item 28: Consider wrapping external APIs","icon":"fa-brands fa-android","category":["Java","Kotlin","Android","Picasso","Article(s)"],"tag":["blog","kt.academy","java","kotlin","android"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Item 28: Consider wrapping external APIs\\",\\"image\\":[\\"https://marcinmoskala.com/EffectiveKotlin-Book/promotion/wrapping_api.jpg\\"],\\"datePublished\\":\\"2024-04-29T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Marcin MoskaÅ‚a\\",\\"url\\":\\"https://kt.academy/user/marcinmoskala\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/kt.academy/ek-wrapping-api.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Item 28: Consider wrapping external APIs"}],["meta",{"property":"og:description","content":"Article(s) > Item 28: Consider wrapping external APIs"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://marcinmoskala.com/EffectiveKotlin-Book/promotion/wrapping_api.jpg"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://marcinmoskala.com/EffectiveKotlin-Book/promotion/wrapping_api.jpg"}],["meta",{"name":"twitter:image:alt","content":"Item 28: Consider wrapping external APIs"}],["meta",{"property":"article:author","content":"Marcin MoskaÅ‚a"}],["meta",{"property":"article:tag","content":"android"}],["meta",{"property":"article:tag","content":"kotlin"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:tag","content":"kt.academy"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2024-04-29T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Item 28: Consider wrapping external APIs"},{"property":"og:description","content":"Item 28: Consider wrapping external APIs"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/kt.academy/ek-wrapping-api.html"}]],"prev":"/programming/java-android/articles/README.md","date":"2024-04-29T00:00:00.000Z","isOriginal":false,"author":[{"name":"Marcin MoskaÅ‚a","url":"https://kt.academy/user/marcinmoskala"}],"cover":"https://marcinmoskala.com/EffectiveKotlin-Book/promotion/wrapping_api.jpg"},"git":{},"readingTime":{"minutes":2.56,"words":768},"filePathRelative":"kt.academy/ek-wrapping-api.md","copyright":{"author":"Marcin MoskaÅ‚a"}}');export{E as comp,T as data};
