import{_ as k}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as g,d as a,f as t,b as i,a as h,t as v,n as l,g as r,w as p,e as s,r as e,o as b}from"./app-BItykJLQ.js";const f={},y={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},w={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},x={class:"table-of-contents"},j={href:"https://codesandbox.io/s/kind-wilbur-2zl0g",target:"_blank",rel:"noopener noreferrer"};function R(u,n){const c=e("VPCard"),o=e("router-link"),d=e("SiteInfo"),m=e("VPIcon");return b(),g("div",null,[a("h1",y,[a("a",w,[a("span",null,v(u.$frontmatter.title)+" ê´€ë ¨",1)])]),t(c,l(r({title:"React.js > Article(s)",desc:"Article(s)",link:"/programming/js-react/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),a("nav",x,[a("ul",null,[a("li",null,[t(o,{to:"#simple-counter-example"},{default:p(()=>[...n[0]||(n[0]=[s("Simple Counter Example",-1)])]),_:1})]),a("li",null,[t(o,{to:"#areequal"},{default:p(()=>[...n[1]||(n[1]=[s("areEqual",-1)])]),_:1})]),a("li",null,[t(o,{to:"#conclusion"},{default:p(()=>[...n[2]||(n[2]=[s("Conclusion",-1)])]),_:1})])])]),n[10]||(n[10]=a("hr",null,null,-1)),t(d,{name:"Getting to Grips with React.Memo",desc:"Learn how to use React.Memo to improve the performance of your React applications. ",url:"https://digitalocean.com/community/tutorials/react-learning-react-memo",logo:"https://digitalocean.com/_next/static/media/favicon.594d6067.ico",preview:"https://digitalocean.com/_next/static/media/intro-to-cloud.d49bc5f7.jpeg"}),n[11]||(n[11]=i('<p><code>React.memo</code> gives us the ability of pure components in React but for functional based components rather than class based ones.</p><p><code>memoization</code> is computer science jargon which means caching the result of expensive function calls and returning the cached version when the arguments are the same.</p><p>In React terms:</p><figure><img src="https://assets.digitalocean.com/articles/alligator/react/learning-react-memo/illustrated-memo.png" alt="Illustrated React.Memo" tabindex="0" loading="lazy"><figcaption>Illustrated React.Memo</figcaption></figure><p>We donâ€™t want <code>MyNewComponent</code> re-rendering when the <code>props</code> being passed are the same.</p><hr><h2 id="simple-counter-example" tabindex="-1"><a class="header-anchor" href="#simple-counter-example"><span>Simple Counter Example</span></a></h2>',7)),a("p",null,[n[8]||(n[8]=s("Iâ€™ve created the ",-1)),a("a",j,[t(m,{icon:"iconfont icon-codesandbox"}),n[3]||(n[3]=s("following example in ",-1)),n[4]||(n[4]=a("code",null,"Codesandbox",-1)),n[5]||(n[5]=s(" to help cement in your mind how ",-1)),n[6]||(n[6]=a("code",null,"React.memo",-1)),n[7]||(n[7]=s(" works",-1))]),n[9]||(n[9]=s(".",-1))]),n[12]||(n[12]=i(`<p>Itâ€™s a simple app that counts the number of times a button is clicked. You can see from the below screenshot we have a banner on top of the page.</p><figure><img src="https://assets.digitalocean.com/articles/alligator/react/learning-react-memo/picture-of-the-app.png" alt="Screenshot of the demo App" tabindex="0" loading="lazy"><figcaption>Screenshot of the demo App</figcaption></figure><p>Imagine the <code>Banner</code> is a UI component that can have different types, in this case you want to use the <code>info</code> type banner so you create your <code>Banner</code> as follows:</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Banner</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Our <code>CounterComponent</code> looks like this:</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">class</span> <span class="token class-name">CounterComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">  state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">buttonPressedCount</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token punctuation">{</span> buttonPressedCount <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>new-component<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Button Pressed Count: </span><span class="token punctuation">{</span>buttonPressedCount<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span></span>
<span class="line">          <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">buttonPressedCount</span><span class="token operator">:</span> buttonPressedCount <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">          <span class="token punctuation">}</span></span></span>
<span class="line">        <span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">          Increase Count</span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Banner</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>And our <code>Banner</code> component looks as follows:</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">const</span> <span class="token function-variable function">Banner</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> type <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;info&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info-banner<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">I am an info banner</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In our <code>CounterComponent</code>, every time we click the button we increase the <code>buttonPressedCount</code> variable which causes a re-render which is what you would expect. The problem with this is that the <code>Banner</code> component also re-renders even though the <code>props</code> being passed to it havenâ€™t changed.</p><p>To circumvent this, we use <code>memo</code> which acts like <code>PureComponent</code> in the fact that it will stop re-renders when the <code>props</code> havenâ€™t changed. Our code updated looks like:</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">const</span> Banner <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> type <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;info&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info-banner<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">I am an info banner</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now our <code>Banner</code> component will only re-render when the <code>props</code> to it have changed.</p><p>This is core fundamental idea of React memo.</p><hr><h2 id="areequal" tabindex="-1"><a class="header-anchor" href="#areequal"><span>areEqual</span></a></h2><p>Ok so letâ€™s get a little more advanced and talk about custom equality. By default, <code>memo</code> only does a <code>shallow</code> comparison of props and propâ€™s objects. You can pass a second argument to indicate a custom equality check:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>Component<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token function">areEqual</span><span class="token punctuation">(</span>prevProps<span class="token punctuation">,</span> nextProps<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This is similar to <code>shouldComponentUpdate</code> but the inverse i.e. returning <code>true</code> in <code>shouldComponentUpdate</code> causes another render whereas <code>areEqual</code> is the opposite.</p><p>Imagine we had a <code>Person</code> component that accepted a <code>prop</code> person which is an object, we could check if the <code>name</code> is the same.</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">const</span> <span class="token function-variable function">areEqual</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> nextProps</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>prevProps<span class="token punctuation">.</span>name <span class="token operator">===</span> nextProps<span class="token punctuation">.</span>name<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>Person<span class="token punctuation">,</span> areEqual<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h2><p>This is a really nice addition to React, allowing us to use functional components without having the worry about needless re-renders. As always, I hope you learned something good with this post!</p>`,23)),h(" TODO: add ARTICLE CARD "),t(c,l(r({title:"Getting to Grips with React.Memo",desc:"Learn how to use React.Memo to improve the performance of your React applications. ",link:"https://chanhi2000.github.io/bookshelf/digitalocean.com/react-learning-react-memo.html",logo:"https://digitalocean.com/_next/static/media/favicon.594d6067.ico",background:"rgba(44,103,246,0.2)"})),null,16)])}const P=k(f,[["render",R]]),G=JSON.parse('{"path":"/digitalocean.com/react-learning-react-memo.html","title":"Getting to Grips with React.Memo","lang":"en-US","frontmatter":{"lang":"en-US","title":"Getting to Grips with React.Memo","description":"Article(s) > Getting to Grips with React.Memo","icon":"fa-brands fa-react","category":["Node.js","React.js","Article(s)"],"tag":["blog","digitalocean.com","node","nodejs","node-js","react","reactjs","react-js"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Getting to Grips with React.Memo\\",\\"image\\":[\\"https://assets.digitalocean.com/articles/alligator/react/learning-react-memo/illustrated-memo.png\\",\\"https://assets.digitalocean.com/articles/alligator/react/learning-react-memo/picture-of-the-app.png\\"],\\"datePublished\\":\\"2019-08-15T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Paul Ryan\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/digitalocean.com/react-learning-react-memo.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Getting to Grips with React.Memo"}],["meta",{"property":"og:description","content":"Article(s) > Getting to Grips with React.Memo"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://digitalocean.com/_next/static/media/intro-to-cloud.d49bc5f7.jpeg"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://digitalocean.com/_next/static/media/intro-to-cloud.d49bc5f7.jpeg"}],["meta",{"name":"twitter:image:alt","content":"Getting to Grips with React.Memo"}],["meta",{"property":"article:author","content":"Paul Ryan"}],["meta",{"property":"article:tag","content":"react-js"}],["meta",{"property":"article:tag","content":"reactjs"}],["meta",{"property":"article:tag","content":"react"}],["meta",{"property":"article:tag","content":"node-js"}],["meta",{"property":"article:tag","content":"nodejs"}],["meta",{"property":"article:tag","content":"node"}],["meta",{"property":"article:tag","content":"digitalocean.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2019-08-15T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Getting to Grips with React.Memo"},{"property":"og:description","content":"Getting to Grips with React.Memo"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/digitalocean.com/react-learning-react-memo.html"}]],"prev":"/programming/js-react/articles/README.md","date":"2019-08-15T00:00:00.000Z","isOriginal":false,"author":"Paul Ryan","cover":"https://digitalocean.com/_next/static/media/intro-to-cloud.d49bc5f7.jpeg"},"git":{},"readingTime":{"minutes":2.32,"words":695},"filePathRelative":"digitalocean.com/react-learning-react-memo.md","copyright":{"author":"Paul Ryan"}}');export{P as comp,G as data};
