import{_ as v}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as w,d as e,f as s,b as c,a as b,t as k,n as h,g as m,w as o,e as n,r as a,o as f}from"./app-BItykJLQ.js";const y={},S={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},T={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},x={class:"table-of-contents"},C={href:"https://w3.org/TR/css-values-3/#viewport-relative-lengths",target:"_blank",rel:"noopener noreferrer"},j={href:"https://developers.google.com/web/updates/2016/12/url-bar-resizing",target:"_blank",rel:"noopener noreferrer"},z={class:"hint-container note"},A={href:"https://bugzilla.mozilla.org/show_bug.cgi?id=1007286",target:"_blank",rel:"noopener noreferrer"},P={class:"hint-container note"},V={href:"https://allthingssmitty.com/2020/05/11/css-fix-for-100vh-in-mobile-webkit/",target:"_blank",rel:"noopener noreferrer"},I={class:"hint-container info"},W={href:"https://github.com/w3c/csswg-drafts/issues/4329",target:"_blank",rel:"noopener noreferrer"};function E(r,t){const u=a("VPCard"),l=a("router-link"),g=a("SiteInfo"),p=a("RouteLink"),i=a("VPIcon"),d=a("CodePen");return f(),w("div",null,[e("h1",S,[e("a",T,[e("span",null,k(r.$frontmatter.title)+" ê´€ë ¨",1)])]),s(u,h(m({title:"CSS > Article(s)",desc:"Article(s)",link:"/programming/css/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),e("nav",x,[e("ul",null,[e("li",null,[s(l,{to:"#first-a-little-context"},{default:o(()=>[...t[0]||(t[0]=[n("First, a little context",-1)])]),_:1})]),e("li",null,[s(l,{to:"#css-custom-properties-the-trick-to-correct-sizing"},{default:o(()=>[...t[1]||(t[1]=[n("CSS Custom Properties: The trick to correct sizing",-1)])]),_:1})]),e("li",null,[s(l,{to:"#whoa-there-one-more-little-detail"},{default:o(()=>[...t[2]||(t[2]=[n("Whoa, there! One more little detail",-1)])]),_:1})])])]),t[46]||(t[46]=e("hr",null,null,-1)),s(g,{name:"The trick to viewport units on mobile",desc:"Viewport units have always been controversial and some of that is because of how mobile browsers have made things more complicated by having their own",url:"https://css-tricks.com/the-trick-to-viewport-units-on-mobile",logo:"https://css-tricks/favicon.svg",preview:"https://i0.wp.com/css-tricks.com/wp-content/uploads/2018/07/viewport-units-mobile-crop-featured.jpg"}),t[47]||(t[47]=e("p",null,"Viewport units have always been controversial and some of that is because of how mobile browsers have made things more complicated by having their own opinions about how to implement them.",-1)),e("p",null,[t[4]||(t[4]=n("Case in point: should the scrollbar be taken into account for the ",-1)),t[5]||(t[5]=e("code",null,"vw",-1)),t[6]||(t[6]=n(" unit? What about a siteâ€™s navigation or page controls â€” should those count in the calculation? Then there are physical attributes of the devices themselves (hello, ",-1)),s(p,{to:"/css-tricks.com/the-notch-and-css.html"},{default:o(()=>[...t[3]||(t[3]=[e("strong",null,"notch",-1)])]),_:1}),t[7]||(t[7]=n("!) that canâ€™t be overlooked.",-1))]),t[48]||(t[48]=e("hr",null,null,-1)),t[49]||(t[49]=e("h2",{id:"first-a-little-context",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#first-a-little-context"},[e("span",null,"First, a little context")])],-1)),e("p",null,[t[9]||(t[9]=n("The ",-1)),e("a",C,[s(i,{icon:"iconfont icon-w3c"}),t[8]||(t[8]=n("spec is pretty vague",-1))]),t[10]||(t[10]=n(" about how viewport units should be calculated. With mobile devices, weâ€™re often concerned with the vertical height, so letâ€™s look specifically at viewport height (",-1)),t[11]||(t[11]=e("code",null,"vh",-1)),t[12]||(t[12]=n("):",-1))]),t[50]||(t[50]=c('<div class="hint-container info"><p class="hint-container-title">vh unit</p><blockquote><p>Equal to 1% of the height of the initial containing block.</p></blockquote></div><p>So yeah, no clear guidance there when it comes to handling device and browser-specific differentiations.</p><p><code>vh</code> was initially calculated by the current viewport of your browser. If you opened your browser and started to load a website, <code>1vh</code> was equal to 1% of your screen height, minus the browser interface.</p><p>But! If you start scrolling, itâ€™s a different story. Once you get past a piece of the browser interface, like the address bar, the <code>vh</code> value would update and the result was an awkward jump in the content.</p>',4)),e("p",null,[t[14]||(t[14]=n("Safari for iOS was one of the first mobile browsers to update their implementation by choosing to define a fixed value for the ",-1)),t[15]||(t[15]=e("code",null,"vh",-1)),t[16]||(t[16]=n(" based on the maximum height of the screen. By doing so, the user would not experience jumps on the page once the address bar went out of view. Chromeâ€™s mobile browser ",-1)),e("a",j,[s(i,{icon:"fa-brands fa-google"}),t[13]||(t[13]=n("followed suit around a year ago",-1))]),t[17]||(t[17]=n(".",-1))]),e("div",z,[t[21]||(t[21]=e("p",{class:"hint-container-title"},"Note",-1)),e("p",null,[t[19]||(t[19]=n("As of this writing, there is a ",-1)),e("a",A,[s(i,{icon:"fa-brands fa-firefox"}),t[18]||(t[18]=n("ticket to address this in Firefox Android",-1))]),t[20]||(t[20]=n(".",-1))])]),t[51]||(t[51]=c(`<p>While using a fixed value is nice, it also means that you cannot have a full-height element if the address bar is in view. The bottom of your element will be cropped.</p><figure><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2018/07/viewport-units-mobile-crop.jpg?ssl=1" alt="An element gets cropped at the bottom when the address bar is in view (left) but what we want is the full thing (right)." tabindex="0" loading="lazy"><figcaption>An element gets cropped at the bottom when the address bar is in view (left) but what we want is the full thing (right).</figcaption></figure><hr><h2 id="css-custom-properties-the-trick-to-correct-sizing" tabindex="-1"><a class="header-anchor" href="#css-custom-properties-the-trick-to-correct-sizing"><span>CSS Custom Properties: The trick to correct sizing</span></a></h2><p>The idea struck me that CSS Custom Properties and a few lines of <code>JavaScript</code> might be the perfect way to get the consistent and correct sizing I needed.</p><p>In JavaScript, you can always get the value of the current viewport by using the global variable <code>window.innerHeight</code>. This value takes the browserâ€™s interface into account and is updated when its visibility changes. The trick is to store the viewport value in a CSS variable and apply that to the element <em>instead</em> of the <code>vh</code> unit.</p><p>Letâ€™s say our CSS custom variable is <code>--vh</code> for this example. That means we will want to apply it in our CSS like this:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">.my-element</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span> <span class="token comment">/* Fallback for browsers that do not support Custom Properties */</span></span>
<span class="line">  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--vh<span class="token punctuation">,</span> 1vh<span class="token punctuation">)</span> * 100<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>OK, that sets us up. Now letâ€™s get the inner height of the viewport in JavaScript:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// First we get the viewport height and we multiple it by 1% to get a value for a vh unit</span></span>
<span class="line"><span class="token keyword">let</span> vh <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">*</span> <span class="token number">0.01</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// Then we set the value in the --vh custom property to the root of the document</span></span>
<span class="line">document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&#39;--vh&#39;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>vh<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We told JavaScript to grab the height of the viewport and then drilled it down into 1/100th of that total so we have a value to assign as our viewport height unit value. Then we politely asked JS to create the CSS variable (<code>--vh</code>) at the <code>:root</code>.</p><p>As a result, we can now use <code>--vh</code> as our height value like we would any other <code>vh</code> unit, multiply it by 100 and we have the full height we want.</p>`,12)),s(d,{user:"anon","slug-hash":"vapjge",title:"Viewport Height on Mobile (no resize on update)","default-tab":["css","result"],theme:r.dark},null,8,["theme"]),e("div",P,[t[29]||(t[29]=e("p",{class:"hint-container-title"},"Note",-1)),e("p",null,[t[23]||(t[23]=n("There is another fix for this that has come along more recently. ",-1)),e("a",V,[s(i,{icon:"fas fa-globe"}),t[22]||(t[22]=n("Matt Smith documents it here",-1))]),t[24]||(t[24]=n(". The trick is ",-1)),t[25]||(t[25]=e("code",null,"min-height: -webkit-fill-available;",-1)),t[26]||(t[26]=n(" on the body as a progressive enhancement over ",-1)),t[27]||(t[27]=e("code",null,"100vh",-1)),t[28]||(t[28]=n(", which should work on iOS devices.",-1))])]),t[52]||(t[52]=c(`<hr><h2 id="whoa-there-one-more-little-detail" tabindex="-1"><a class="header-anchor" href="#whoa-there-one-more-little-detail"><span>Whoa, there! One more little detail</span></a></h2><p>While our work might look done at this point, those of you with an astute eye for detail may have caught that the JavaScript fires but never updates the size of our element when the viewportâ€™s height changes. Go ahead and try resizing the demo above.</p><p>We can update the value of <code>--vh</code> by listening to the window <code>resize</code> event. This is handy in case the user rotates the device screen, like from landscape to portrait, or the navigation moves out of view on scroll.</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// We listen to the resize event</span></span>
<span class="line">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;resize&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// We execute the same script as before</span></span>
<span class="line">  <span class="token keyword">let</span> vh <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">*</span> <span class="token number">0.01</span><span class="token punctuation">;</span></span>
<span class="line">  document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&#39;--vh&#39;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>vh<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">Warning</p><p>Updating the value of <code>--vh</code> will trigger a repaint of the page and the user may experience a jump as a result. Because of this, <em>Iâ€™m not advising that this trick should be used for every project or to replace all usage of the vh unit</em> but only when you may need your users to have an exact viewport unit value.</p></div>`,6)),e("p",null,[t[31]||(t[31]=n("Also, you may want to implement a debounce method for the resize event to avoid triggering to many events while the user is resizing their browserâ€™s window. You can learn more about it with this article: ",-1)),s(p,{to:"/css-tricks.com/debouncing-throttling-explained-examples.html"},{default:o(()=>[...t[30]||(t[30]=[e("strong",null,"Debouncing and Throttling Explained Through Examples",-1)])]),_:1})]),s(d,{user:"anon","slug-hash":"WKdJaB",title:"Correct Viewport Height on Mobile","default-tab":["css","result"],theme:r.dark},null,8,["theme"]),t[53]||(t[53]=e("p",null,"You can now resize the demo above and notice that the CSS variable is updated accordingly.",-1)),e("p",null,[t[33]||(t[33]=n("While I recently used this technique on a project and it really helped, you should always think twice when replacing the browserâ€™s default behaviors. (For example, ",-1)),s(p,{to:"/css-tricks.com/focusing-on-focus-styles.html"},{default:o(()=>[...t[32]||(t[32]=[e("strong",null,"this comes up a lot",-1)])]),_:1}),t[34]||(t[34]=n(" with ",-1)),t[35]||(t[35]=e("code",null,"::focus",-1)),t[36]||(t[36]=n(".) Also, browsers tend to update very fast these days, so beware that todayâ€™s solution may not work tomorrow.",-1))]),t[54]||(t[54]=e("p",null,"In the meantime, I hope this article helps! ðŸ‘‹",-1)),e("div",I,[t[45]||(t[45]=e("p",{class:"hint-container-title"},"Info",-1)),e("p",null,[e("a",W,[t[37]||(t[37]=n("Hereâ€™s a proposal (",-1)),s(i,{icon:"iconfont icon-github"}),t[38]||(t[38]=e("code",null,"w3c/csswg-drafts",-1)),t[39]||(t[39]=n(")",-1))]),t[40]||(t[40]=n(" for ",-1)),t[41]||(t[41]=e("code",null,"vhc",-1)),t[42]||(t[42]=n(" and ",-1)),t[43]||(t[43]=e("code",null,"vwc",-1)),t[44]||(t[44]=n(" units that may be a savior in all this.",-1))])]),b(" TODO: add ARTICLE CARD "),s(u,h(m({title:"The trick to viewport units on mobile",desc:"Viewport units have always been controversial and some of that is because of how mobile browsers have made things more complicated by having their own",link:"https://chanhi2000.github.io/bookshelf/css-tricks.com/the-trick-to-viewport-units-on-mobile.html",logo:"https://css-tricks/favicon.svg",background:"rgba(17,17,17,0.2)"})),null,16)])}const L=v(y,[["render",E]]),N=JSON.parse('{"path":"/css-tricks.com/the-trick-to-viewport-units-on-mobile.html","title":"The trick to viewport units on mobile","lang":"en-US","frontmatter":{"lang":"en-US","title":"The trick to viewport units on mobile","description":"Article(s) > The trick to viewport units on mobile","icon":"fa-brands fa-css3-alt","category":["CSS","Article(s)"],"tag":["blog","css-tricks.com","css"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"The trick to viewport units on mobile\\",\\"image\\":[\\"https://i0.wp.com/css-tricks.com/wp-content/uploads/2018/07/viewport-units-mobile-crop.jpg?ssl=1\\"],\\"datePublished\\":\\"2018-07-31T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Louis Hoebregts\\",\\"url\\":\\"https://css-tricks.com/author/louishoebregts/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/css-tricks.com/the-trick-to-viewport-units-on-mobile.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"The trick to viewport units on mobile"}],["meta",{"property":"og:description","content":"Article(s) > The trick to viewport units on mobile"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://i0.wp.com/css-tricks.com/wp-content/uploads/2018/07/viewport-units-mobile-crop-featured.jpg"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://i0.wp.com/css-tricks.com/wp-content/uploads/2018/07/viewport-units-mobile-crop-featured.jpg"}],["meta",{"name":"twitter:image:alt","content":"The trick to viewport units on mobile"}],["meta",{"property":"article:author","content":"Louis Hoebregts"}],["meta",{"property":"article:tag","content":"css"}],["meta",{"property":"article:tag","content":"css-tricks.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2018-07-31T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > The trick to viewport units on mobile"},{"property":"og:description","content":"The trick to viewport units on mobile"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/css-tricks.com/the-trick-to-viewport-units-on-mobile.html"}]],"prev":"/programming/css/articles/README.md","date":"2018-07-31T00:00:00.000Z","isOriginal":false,"author":[{"name":"Louis Hoebregts","url":"https://css-tricks.com/author/louishoebregts/"}],"cover":"https://i0.wp.com/css-tricks.com/wp-content/uploads/2018/07/viewport-units-mobile-crop-featured.jpg"},"git":{},"readingTime":{"minutes":4.55,"words":1365},"filePathRelative":"css-tricks.com/the-trick-to-viewport-units-on-mobile.md","copyright":{"author":"Louis Hoebregts"}}');export{L as comp,N as data};
