import{_ as g}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as k,d as n,f as r,b as l,a as w,t as v,n as p,g as m,w as i,e as o,r as t,o as b}from"./app-BItykJLQ.js";const h={},y={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},D={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},W={class:"table-of-contents"},S={href:"https://youtu.be/85nCF5S8Qok",target:"_blank",rel:"noopener noreferrer"},I={href:"https://github.com/nodejs/docker-node/pull/222",target:"_blank",rel:"noopener noreferrer"},x={href:"https://github.com/Microsoft/Virtualization-Documentation/tree/master/windows-container-samples/windowsservercore/apache-http",target:"_blank",rel:"noopener noreferrer"},T={href:"https://github.com/Microsoft/Virtualization-Documentation/tree/master/windows-container-samples/windowsservercore/iis",target:"_blank",rel:"noopener noreferrer"},A={href:"https://github.com/Microsoft/Virtualization-Documentation/tree/master/windows-container-samples/windowsservercore/dotnet35",target:"_blank",rel:"noopener noreferrer"},N={href:"https://docs.docker.com/engine/userguide/storagedriver/imagesandcontainers/",target:"_blank",rel:"noopener noreferrer"},E={href:"https://hub.docker.com/r/microsoft/dotnet/",target:"_blank",rel:"noopener noreferrer"},M={href:"https://github.com/StefanScherer/dockerfiles-windows/blob/master/node/6.5/nano/Dockerfile",target:"_blank",rel:"noopener noreferrer"},V={href:"https://github.com/Microsoft/Virtualization-Documentation/tree/master/windows-container-samples/nanoserver/golang",target:"_blank",rel:"noopener noreferrer"},C={href:"https://hub.docker.com/_/golang/",target:"_blank",rel:"noopener noreferrer"},P={href:"https://hub.docker.com/_/python/",target:"_blank",rel:"noopener noreferrer"},z={href:"https://hub.docker.com/_/mongo/",target:"_blank",rel:"noopener noreferrer"},L={href:"https://hub.docker.com/r/microsoft/",target:"_blank",rel:"noopener noreferrer"};function O(c,e){const d=t("VPCard"),a=t("router-link"),u=t("SiteInfo"),f=t("RouteLink"),s=t("VPIcon");return b(),k("div",null,[n("h1",y,[n("a",D,[n("span",null,v(c.$frontmatter.title)+" ê´€ë ¨",1)])]),r(d,p(m({title:"Docker > Article(s)",desc:"Article(s)",link:"/devops/docker/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),n("nav",W,[n("ul",null,[n("li",null,[r(a,{to:"#running-containers-on-windows-server"},{default:i(()=>[...e[0]||(e[0]=[o("Running Containers on Windows Server",-1)])]),_:1})]),n("li",null,[r(a,{to:"#building-windows-container-images"},{default:i(()=>[...e[1]||(e[1]=[o("Building Windows Container Images",-1)])]),_:1})]),n("li",null,[r(a,{to:"#summary"},{default:i(()=>[...e[2]||(e[2]=[o("Summary",-1)])]),_:1})])])]),e[77]||(e[77]=n("hr",null,null,-1)),r(u,{name:"Introducing Docker for Windows Server 2016",desc:"Learn from Docker experts to simplify and advance your app development and management with Docker. Stay up to date on Docker events and new version",url:"https://docker.com/blog/dockerforws2016",logo:"https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png",preview:"https://docker.com/app/uploads/2022/12/dockerforws2016-1.png"}),e[78]||(e[78]=n("p",null,"Today, Microsoft is announcing general availability of Windows Server 2016 at the Ignite conference in Atlanta. For Windows developers and IT-pros, the most exciting new Windows feature is containers, and containers on Windows Server 2016 are powered by Docker.",-1)),n("p",null,[e[4]||(e[4]=o("This blog post details the technical innovations that went into making Docker containers run natively on Windows and attempts to explain the significance of the achievement. See the companion blog posts on ",-1)),r(f,{to:"/docker.com/build-your-first-docker-windows-server-container.html"},{default:i(()=>[...e[3]||(e[3]=[n("strong",null,"how to build your first Windows container",-1)])]),_:1}),e[5]||(e[5]=o(" and the post detailing Docker Inc. and Microsoftâ€™s commercial partnership to support Docker on Windows.",-1))]),e[79]||(e[79]=l(`<p>The first version of Docker was released in 2013, and in the 3 years since launch, Docker has completely transformed how Linux developers and ops build, ship and run apps. With Docker Engine and containers now available natively on Windows, developers and IT-pros can begin the same transformation for Windows-based apps and infrastructure and start reaping the same benefits: better security, more agility, and improved portability and freedom to move on-prem apps to the cloud.</p><p>For developers and IT-pros that build and maintain heterogenous deployments with both Linux and Windows infrastructure, Docker on Windows holds even greater significance: The Docker platform now represents a single set of tools, APIs and image formats for managing both Linux and Windows apps. As Linux and Windows apps and servers are dockerized, developers and IT-pros can bridge the operating system divide with shared Docker terminology and interfaces for managing and evolving complex microservices deployments both on-prem and in the cloud.</p><figure><img src="https://docker.com/app/uploads/2022/12/dockerforws2016-1.png" alt="dockerforws2016 1" tabindex="0" loading="lazy"><figcaption>dockerforws2016 1</figcaption></figure><hr><h2 id="running-containers-on-windows-server" tabindex="-1"><a class="header-anchor" href="#running-containers-on-windows-server"><span>Running Containers on Windows Server</span></a></h2><p>Docker running containers on Windows is the result of a two-year collaboration between Microsoft that involved the Windows kernel growing containerization primitives, Docker and Microsoft collaborating on porting the Docker Engine and CLI to Windows to take advantage of those new primitives and Docker adding multi-arch image support to Docker Hub.</p><p>The result is that the awesome power of <code>docker run</code> to quickly start a fresh and fully isolated container is now available natively on Windows:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-ti</span> microsoft/windowsservercore powershell</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The kernel containerization features are available in all versions of Windows Server 2016, and are also on Windows 10 systems with the Anniversary Update, and the Windows-native Docker daemon runs on both Windows Server 2016 and Windows 10 (although only containers based on Windows Server build and run on Windows 10).</p><p><code>docker run</code> on Windows comes with the same semantics as on Linux: Full process isolation and sandboxed filesystem (and Windows Registry!) with support for layering changes. Each container sees a clean Windows system and cannot interfere with other processes (containerized or not) on the system.</p><p>For example, two dockerized apps using different Internet Information Services (IIS) versions and different .NET frameworks can co-exist merrily on the same system. They can even write to their respective filesystems and registries without affecting each other.</p><p>With containerization, Windows IT-pros get most of the isolation and release-artifact-stability benefits of VMs, without the resource overhead and lost agility inherent in hardware virtualization.</p><p>Similar to how containers on Linux can run with different security profiles, containers on Windows run in one of two isolation modes:</p><ol><li>Windows Server Containers use the same shared-kernel process-isolation paradigm known from Linux. Since containers run as normal (but isolated) processes, startup is fast and resource overhead is minimal.</li><li>With Hyper-V isolation, container processes run inside a very minimal hypervisor created during container start. This yields potentially better isolation at the cost of slower startup and some resource overhead.</li></ol><p>Isolation can be set with a simple switch passed to <code>docker run</code>:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">docker</span> run <span class="token parameter variable">--isolation</span><span class="token operator">=</span>hyperv microsoft/nanoserver</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>As long as the underlying host supports the requested isolation mode, any Windows container image can be run as either a hyper-v or server container and a container host can run both side by side. Container processes are oblivious to the isolation mode they run in, and the Docker control API is the same for both modes.</p><p>This makes isolation mode not generally a developer concern and developers should use the default or whatâ€™s convenient on their system. Isolation mode does give IT-pros options when choosing how to deploy containerized apps in production.</p><p>Also note that, while Hyper-V is the runtime technology powering hyper-v isolation, hyper-v isolated containers are not Hyper-V VMs and cannot be managed with classic Hyper-V tools.</p>`,19)),n("p",null,[e[7]||(e[7]=o("For readers interested in details of how containers are implemented on Windows, ",-1)),n("a",S,[r(s,{icon:"fa-brands fa-youtube"}),e[6]||(e[6]=o("John Starksâ€™ black belt session at DockerCon â€˜16",-1))]),e[8]||(e[8]=o(" is a great introduction.",-1))]),e[80]||(e[80]=n("figure",null,[n("img",{src:"https://docker.com/app/uploads/2022/12/dockerforws2016-2.png",alt:"dockerforws2016 2",tabindex:"0",loading:"lazy"}),n("figcaption",null,"dockerforws2016 2")],-1)),e[81]||(e[81]=n("hr",null,null,-1)),e[82]||(e[82]=n("h2",{id:"building-windows-container-images",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#building-windows-container-images"},[n("span",null,"Building Windows Container Images")])],-1)),n("p",null,[e[12]||(e[12]=o("Thanks to layering improvements to the Windows Registry and filesystem, ",-1)),e[13]||(e[13]=n("code",null,"docker build",-1)),e[14]||(e[14]=o(" and Dockerfiles are fully supported for creating Windows Docker images. Below is an example Windows Dockerfile that ",-1)),n("a",I,[e[9]||(e[9]=o("Stefan Scherer has proposed (",-1)),r(s,{icon:"fa-brands fa-node"}),e[10]||(e[10]=n("code",null,"nodejs/docker-node",-1)),e[11]||(e[11]=o(")",-1))]),e[15]||(e[15]=o(" for the Node.js official Docker library image. It can be built on Windows with ",-1)),e[16]||(e[16]=n("code",null,"docker build",-1)),e[17]||(e[17]=o(":",-1))]),e[83]||(e[83]=l(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="Dockerfile"><span>Dockerfile</span></div><div class="language-docker line-numbers-mode" data-highlighter="prismjs" data-ext="docker"><pre><code class="language-docker"><span class="line"><span class="token instruction"><span class="token keyword">FROM</span> microsoft/windowsservercore</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">ENV</span> NPM_CONFIG_LOGLEVEL info</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">ENV</span> NODE_VERSION 4.5.0</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">ENV</span> NODE_SHA256 16aab15b29e79746d1bae708f6a5dbed8ef3c87426a9408f7261163d0cda0f56</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">RUN</span> powershell -Command <span class="token operator">\\</span></span>
<span class="line">    <span class="token variable">$ErrorActionPreference</span> = <span class="token string">&#39;Stop&#39;</span> ; <span class="token operator">\\</span></span>
<span class="line">    (New-Object System.Net.WebClient).DownloadFile(<span class="token string">&#39;https://nodejs.org/dist/v%NODE_VERSION%/node-v%NODE_VERSION%-win-x64.zip&#39;</span>, <span class="token string">&#39;node.zip&#39;</span>) ; <span class="token operator">\\</span></span>
<span class="line">    if ((Get-FileHash node.zip -Algorithm sha256).Hash -ne <span class="token variable">$env</span>:NODE_SHA256) {exit 1} ; <span class="token operator">\\</span></span>
<span class="line">    Expand-Archive node.zip -DestinationPath C:\\ ; <span class="token operator">\\</span></span>
<span class="line">    Rename-Item <span class="token string">&#39;C:\\node-v%NODE_VERSION%-win-x64&#39;</span> <span class="token string">&#39;C:\\nodejs&#39;</span> ; <span class="token operator">\\</span></span>
<span class="line">    New-Item <span class="token string">&#39;%APPDATA%\\npm&#39;</span> ; <span class="token operator">\\</span></span>
<span class="line">    <span class="token variable">$env</span>:PATH = <span class="token string">&#39;C:\\nodejs;%APPDATA%\\npm;&#39;</span> + <span class="token variable">$env</span>:PATH ; <span class="token operator">\\</span></span>
<span class="line">    [Environment]::SetEnvironmentVariable(<span class="token string">&#39;PATH&#39;</span>, <span class="token variable">$env</span>:PATH, [EnvironmentVariableTarget]::Machine) ; <span class="token operator">\\</span></span>
<span class="line">    Remove-Item -Path node.zip</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">CMD</span> [ <span class="token string">&quot;node.exe&quot;</span> ]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Note how PowerShell is used to install and setup zip files and exes: Windows containers run Windows executables compiled for Windows APIs. To build and run a Windows container, a Windows system is required. While the Docker tools, control APIs and image formats are the same on Windows and Linux, a Docker Windows container wonâ€™t run on a Linux system and vice-versa.</p>`,2)),n("p",null,[e[18]||(e[18]=o("Also note that the starting layer is ",-1)),r(s,{icon:"fa-brands fa-docker"}),e[19]||(e[19]=n("code",null,"microsoft/windowsservercore",-1)),e[20]||(e[20]=o(". Starting ",-1)),e[21]||(e[21]=n("code",null,"FROM scratch",-1)),e[22]||(e[22]=o(" is not an option when creating Windows container images. Instead, images are based on either ",-1)),r(s,{icon:"fa-brands fa-docker"}),e[23]||(e[23]=n("code",null,"microsoft/windowsservercore",-1)),e[24]||(e[24]=o(" or ",-1)),r(s,{icon:"fa-brands fa-docker"}),e[25]||(e[25]=n("code",null,"microsoft/nanoserver",-1)),e[26]||(e[26]=o(".",-1))]),n("p",null,[e[36]||(e[36]=o("The Windows Server Core image comes with a mostly complete userland with the processes and DLLs found on a standard Windows Server Core install. With the exception of GUI apps and apps requiring Windows Remote Desktop, most apps that run on Windows Server can be dockerized to run in an image based on ",-1)),r(s,{icon:"fa-brands fa-docker"}),e[37]||(e[37]=n("code",null,"microsoft/windowsservercore",-1)),e[38]||(e[38]=o(" with minimal effort. Examples include Microsoft SQL Server, ",-1)),n("a",x,[e[27]||(e[27]=o("Apache (",-1)),r(s,{icon:"iconfont icon-github"}),e[28]||(e[28]=n("code",null,"Microsoft/Virtualization-Documentation",-1)),e[29]||(e[29]=o(")",-1))]),e[39]||(e[39]=o(", ",-1)),n("a",T,[e[30]||(e[30]=o("Internet Information Services (",-1)),r(s,{icon:"iconfont icon-github"}),e[31]||(e[31]=n("code",null,"Microsoft/Virtualization-Documentation",-1)),e[32]||(e[32]=o(")",-1))]),e[40]||(e[40]=o(" (IIS) and the ",-1)),n("a",A,[e[33]||(e[33]=o("full .NET framework (",-1)),r(s,{icon:"iconfont icon-github"}),e[34]||(e[34]=n("code",null,"Microsoft/Virtualization-Documentation",-1)),e[35]||(e[35]=o(")",-1))]),e[41]||(e[41]=o(".",-1))]),n("p",null,[e[43]||(e[43]=o("This flexibility comes at the cost of some bulk: The ",-1)),r(s,{icon:"fa-brands fa-docker"}),e[44]||(e[44]=n("code",null,"microsoft/windowsservercore",-1)),e[45]||(e[45]=o(" image takes up 10GB. Thanks to Dockerâ€™s ",-1)),n("a",N,[r(s,{icon:"fa-brands fa-docker"}),e[42]||(e[42]=o("highly efficient image layering",-1))]),e[46]||(e[46]=o(", this is not a big problem in practice. Any given Docker host only needs to pull the base layer once, and any images pulled or built on that system simply reuse the base layer.",-1))]),n("p",null,[e[56]||(e[56]=o("The other base layer option is Nano Server, a new and very minimal Windows version with a pared-down Windows API. Lots of software already runs on Nano Server, including IIS, the new ",-1)),n("a",E,[e[47]||(e[47]=o(".NET Core framework (",-1)),r(s,{icon:"fa-brands fa-docker"}),e[48]||(e[48]=n("code",null,"microsoft/dotnet",-1)),e[49]||(e[49]=o(")",-1))]),e[57]||(e[57]=o(", ",-1)),n("a",M,[e[50]||(e[50]=o("Node.js (",-1)),r(s,{icon:"iconfont icon-github"}),e[51]||(e[51]=n("code",null,"StefanScherer/dockerfiles-windows",-1)),e[52]||(e[52]=o(")",-1))]),e[58]||(e[58]=o(" and ",-1)),n("a",V,[e[53]||(e[53]=o("Go (",-1)),r(s,{icon:"iconfont icon-github"}),e[54]||(e[54]=n("code",null,"Microsoft/Virtualization-Documentation",-1)),e[55]||(e[55]=o(")",-1))]),e[59]||(e[59]=o(". And the Nano Server base image is an order of magnitude smaller than Windows Server Core, meaning it has less dependencies and surface area to keep updated. Nano Server is an exciting development, not only as a base for minimal containers that build and boot quickly, but also as a Minimalist Operating System that makes for a great container host OS running just the Docker daemon and containers, and nothing else.",-1))]),e[84]||(e[84]=n("p",null,"With the choice of Windows Server Core and Nano Server, developers and IT-pros can opt to lift-and-shift existing Windows-based apps into Server Core containers or adopt Nano Server for greenfield development or incrementally as part of breaking monolithic apps into microservices components.",-1)),n("p",null,[e[72]||(e[72]=o("Docker is working with Microsoft and the community to build container images based on both Windows Server Core and Nano Server. ",-1)),n("a",C,[e[60]||(e[60]=o("Golang (",-1)),r(s,{icon:"fa-brands fa-docker"}),e[61]||(e[61]=n("code",null,"golang",-1)),e[62]||(e[62]=o(")",-1))]),e[73]||(e[73]=o(", ",-1)),n("a",P,[e[63]||(e[63]=o("Python (",-1)),r(s,{icon:"fa-brands fa-docker"}),e[64]||(e[64]=n("code",null,"python",-1)),e[65]||(e[65]=o(")",-1))]),e[74]||(e[74]=o(" and ",-1)),n("a",z,[e[66]||(e[66]=o("Mongo (",-1)),r(s,{icon:"fa-brands fa-docker"}),e[67]||(e[67]=n("code",null,"mongo",-1)),e[68]||(e[68]=o(")",-1))]),e[75]||(e[75]=o(" are available as official Docker images (more are on their way), and Microsoft also maintains a set of very popular ",-1)),n("a",L,[e[69]||(e[69]=o("sample images (",-1)),r(s,{icon:"fa-brands fa-docker"}),e[70]||(e[70]=n("code",null,"microsoft",-1)),e[71]||(e[71]=o(")",-1))]),e[76]||(e[76]=o(".",-1))]),e[85]||(e[85]=n("hr",null,null,-1)),e[86]||(e[86]=n("h2",{id:"summary",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#summary"},[n("span",null,"Summary")])],-1)),e[87]||(e[87]=n("p",null,"Todayâ€™s announcement of Docker Engine building, running and managing containers on Windows is the fruit of years of labor by teams at both Microsoft and Docker and by the Docker community. Weâ€™re incredibly proud of the work weâ€™ve done with Microsoft to bring the benefits of containerization to Windows developers and IT-pros, and weâ€™re excited about the prospect of getting Windows and Linux technologists building, shipping and running apps together with a common set of tools and APIs.",-1)),w(" TODO: add ARTICLE CARD "),r(d,p(m({title:"Introducing Docker for Windows Server 2016",desc:"Learn from Docker experts to simplify and advance your app development and management with Docker. Stay up to date on Docker events and new version",link:"https://chanhi2000.github.io/bookshelf/docker.com/dockerforws2016.html",logo:"https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png",background:"rgba(29,99,237,0.2)"})),null,16)])}const j=g(h,[["render",O]]),H=JSON.parse('{"path":"/docker.com/dockerforws2016.html","title":"Introducing Docker for Windows Server 2016","lang":"en-US","frontmatter":{"lang":"en-US","title":"Introducing Docker for Windows Server 2016","description":"Article(s) > Introducing Docker for Windows Server 2016","icon":"fa-brands fa-docker","category":["DevOps","Docker","Article(s)"],"tag":["blog","docker.com","devops","docker"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Introducing Docker for Windows Server 2016\\",\\"image\\":[\\"https://docker.com/app/uploads/2022/12/dockerforws2016-1.png\\",\\"https://docker.com/app/uploads/2022/12/dockerforws2016-2.png\\"],\\"datePublished\\":\\"2016-09-26T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Michael Friis\\",\\"url\\":\\"https://docker.com/author/friism/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/docker.com/dockerforws2016.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Introducing Docker for Windows Server 2016"}],["meta",{"property":"og:description","content":"Article(s) > Introducing Docker for Windows Server 2016"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://docker.com/app/uploads/2022/12/dockerforws2016-1.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://docker.com/app/uploads/2022/12/dockerforws2016-1.png"}],["meta",{"name":"twitter:image:alt","content":"Introducing Docker for Windows Server 2016"}],["meta",{"property":"article:author","content":"Michael Friis"}],["meta",{"property":"article:tag","content":"docker"}],["meta",{"property":"article:tag","content":"devops"}],["meta",{"property":"article:tag","content":"docker.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2016-09-26T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Introducing Docker for Windows Server 2016"},{"property":"og:description","content":"Introducing Docker for Windows Server 2016"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/docker.com/dockerforws2016.html"}]],"prev":"/devops/docker/articles/README.md","date":"2016-09-26T00:00:00.000Z","isOriginal":false,"author":[{"name":"Michael Friis","url":"https://docker.com/author/friism/"}],"cover":"https://docker.com/app/uploads/2022/12/dockerforws2016-1.png"},"git":{},"readingTime":{"minutes":6.07,"words":1821},"filePathRelative":"docker.com/dockerforws2016.md","copyright":{"author":"Michael Friis"}}');export{j as comp,H as data};
