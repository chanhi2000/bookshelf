import{_ as g}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as f,d as t,f as o,b as l,a as k,t as b,n as d,g as u,w as i,e as n,r as s,o as y}from"./app-BItykJLQ.js";const w={},v={id:"frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´",tabindex:"-1"},D={class:"header-anchor",href:"#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"},x={class:"table-of-contents"},S={href:"https://raft.github.io/raft.pdf",target:"_blank",rel:"noopener noreferrer"},B={href:"http://linuxvirtualserver.org/software/ipvs.html",target:"_blank",rel:"noopener noreferrer"},C={href:"https://github.com/docker/docker/blob/master/experimental/docker-stacks-and-bundles.md",target:"_blank",rel:"noopener noreferrer"},O={href:"http://grpc.io/",target:"_blank",rel:"noopener noreferrer"},T={href:"https://developers.google.com/protocol-buffers/",target:"_blank",rel:"noopener noreferrer"};function A(h,e){const p=s("VPCard"),a=s("router-link"),c=s("SiteInfo"),r=s("VPIcon"),m=s("VidStack");return y(),f("div",null,[t("h1",v,[t("a",D,[t("span",null,b(h.$frontmatter.title)+" Í¥ÄÎ†®",1)])]),o(p,d(u({title:"Docker > Article(s)",desc:"Article(s)",link:"/devops/docker/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),t("nav",x,[t("ul",null,[t("li",null,[o(a,{to:"#creating-swarms-with-one-decentralized-building-block"},{default:i(()=>[...e[0]||(e[0]=[n("Creating Swarms with One Decentralized Building Block",-1)])]),_:1})]),t("li",null,[o(a,{to:"#creating-and-scaling-services"},{default:i(()=>[...e[1]||(e[1]=[n("Creating and Scaling Services",-1)])]),_:1})]),t("li",null,[o(a,{to:"#security"},{default:i(()=>[...e[2]||(e[2]=[n("Security",-1)])]),_:1})]),t("li",null,[o(a,{to:"#bundles"},{default:i(()=>[...e[3]||(e[3]=[n("Bundles",-1)])]),_:1})]),t("li",null,[o(a,{to:"#under-the-hood-of-docker-1-12"},{default:i(()=>[...e[4]||(e[4]=[n("Under the hood of Docker 1.12",-1)])]),_:1})])])]),e[21]||(e[21]=t("hr",null,null,-1)),o(c,{name:"Docker 1.12: Now with Built-in Orchestration!Docker",desc:"Learn from Docker experts to simplify and advance your app development and management with Docker. Stay up to date on Docker events and new version",url:"https://docker.com/blog/docker-1-12-built-in-orchestration",logo:"https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png",preview:"https://docker.com/app/uploads/2022/12/docker-1-12-built-in-orchestration-1.png"}),e[22]||(e[22]=l(`<p>Threeyears ago, Docker made an esoteric Linux kernel technology called containerization simple and accessible to everyone.Today, we are doing the same for container orchestration.</p><p>Container orchestration is what is needed to transition from deploying containers individually on a single host, to deploying complex multi-container apps on many machines. It requires a distributed platform, independent from infrastructure, that stays online through the entire lifetime of your application, surviving hardware failure and software updates. Orchestration is at the same stage today as containerization was 3 years ago.There are two options: either you need an army of technology experts to cobble together a complex ad hoc system, or you have to rely on a company with a lot of experts to take care of everything for you as long as you buy all hardware, services, support, software from them.There is a word for that, it‚Äôs called lock-in.</p><p>Docker users have been sharing with us that neither option is acceptable. Instead, you need a platform that makes orchestration usable by everyone, without locking you in. Container orchestration would be easier to implement, more portable, secure, resilient, and faster if it was built into the platform.</p><p>Starting with Docker 1.12, we have added features to the core Docker Engine to make multi-host and multi-container orchestration easy. We‚Äôve added new API objects, like Service and Node, that will let you use the Docker API to deploy and manage apps on a group of Docker Engines called a swarm. With Docker 1.12, the best way to orchestrate Docker is Docker!</p><figure><img src="https://docker.com/app/uploads/2022/12/docker-1-12-built-in-orchestration-1.png" alt="docker 1 12 built in orchestration 1" tabindex="0" loading="lazy"><figcaption>docker 1 12 built in orchestration 1</figcaption></figure><p>The Docker 1.12 design is based on four principles:</p><ul><li>Simple Yet Powerful- Orchestration is a central part of modern distributed applications; it‚Äôs so central that we have seamlessly built it into our core Docker Engine. Our approach to orchestration follows our philosophy about containers: no setup, only a small number of simple concepts to learn, and an ‚Äúit just works‚Äù user experience.</li><li>Resilient- Machines fail all the time. Modern systems should expect these failures to occur regularly and adapt without any application downtime that‚Äôs why a zero single-point-of-failure design is a must.</li><li>Secure- Security should be the default.Barriers to strong security ‚Äî certificate generation, having to understand PKI ‚Äî should be removed. But advanced users should still be able to control and audit every aspect of certificate signing and issuance.</li><li>Optional Features and Backward Compatibility- With millions of users, preserving backwards compatibility is a must for Docker Engine.All new features are optional, and you don‚Äôt incur any overhead (memory, cpu) if you don‚Äôt use them. Orchestration in Docker Engine aligns with our platform‚Äôs batteries included but swappable approach allowing users to continue using any third-party orchestrator that is built on Docker Engine.</li></ul><p>Let‚Äôs take a look at how the new features in Docker 1.12 work.</p><hr><h2 id="creating-swarms-with-one-decentralized-building-block" tabindex="-1"><a class="header-anchor" href="#creating-swarms-with-one-decentralized-building-block"><span>Creating Swarms with One Decentralized Building Block</span></a></h2><p>It all starts with creating a swarm-a self-healing group of engines-which for the bootstrap node is as simple as:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">docker</span> swarm init</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,12)),t("p",null,[e[6]||(e[6]=n("Under the hood this creates a ",-1)),t("a",S,[o(r,{icon:"fas fa-globe"}),e[5]||(e[5]=n("Raft",-1))]),e[7]||(e[7]=n("consensus group of one node. This first node has the role of manager, meaning it accepts commands and schedule tasks. As you join more nodes to the swarm, they will by default be workers, which simply execute containers dispatched by the manager. You can optionally add additional manager nodes.The manager nodes will be part of the Raft consensus group. We use an optimized Raft store in which reads are serviced directly from memorywhich makes scheduling performance fast.",-1))]),e[23]||(e[23]=l(`<hr><h2 id="creating-and-scaling-services" tabindex="-1"><a class="header-anchor" href="#creating-and-scaling-services"><span>Creating and Scaling Services</span></a></h2><p>Just as you run a single container with docker run, you can now start a replicated, distributed, load balanced process on a swarm of Engines with docker service:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">docker</span> <span class="token function">service</span> create <span class="token parameter variable">-name</span> frontend <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">-replicas</span> <span class="token number">5</span> <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">-p</span> <span class="token number">80</span>:80/tcp <span class="token punctuation">\\</span></span>
<span class="line">nginx:latest</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4)),t("p",null,[e[9]||(e[9]=n("This command declares a desired state on your swarmof 5 nginx containers, reachable as a single, internally load balanced service on port 80 of any node in your swarm. Internally, we make this work using ",-1)),t("a",B,[o(r,{icon:"fa-brands fa-linux"}),e[8]||(e[8]=n("Linux IPVS",-1))]),e[10]||(e[10]=n(",an in-kernel Layer 4 multi-protocol load balancer that‚Äôs been in the Linux kernel for more than 15 years. With IPVS routing packets inside the kernel, swarm‚Äôs routing mesh delivers high performance container-aware load-balancing.",-1))]),e[24]||(e[24]=l(`<p>When you create services, you can optionally create replicated or global services. Replicated services mean any number of containers that you define will be spread across the available hosts.Global services, by contrast, schedule one instance the same container on every host in the swarm.</p><p>Let‚Äôs turn to how Docker provides resiliency.Swarm mode enabled engines are self-healing, meaning that they are aware of the application you defined and will continuously check and reconcile the environment when things go awry.For example, if you unplug one of the machines running an nginx instance, a new container will come up on another node.Unplugthe network switch for half the machines in your swarm, and the other half will take over, redistributing the containers amongst themselves. For updates, you now have flexibility in how you re-deploy services once you make a change. You can set a rolling or parallel update of the containers on your swarm.</p><p>Want to scale up to 100 instances? It‚Äôs as simple as:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">docker</span> <span class="token function">service</span> scale <span class="token assign-left variable">frontend</span><span class="token operator">=</span><span class="token number">100</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>A typical two-tier (web+db) application would be created like this:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">docker</span> network create <span class="token parameter variable">-d</span> overlay mynet  </span>
<span class="line"><span class="token function">docker</span> <span class="token function">service</span> create <span class="token parameter variable">-name</span> frontend <span class="token parameter variable">-replicas</span> <span class="token number">5</span> <span class="token parameter variable">-p</span> <span class="token number">80</span>:80/tcp <span class="token punctuation">\\</span><span class="token punctuation">\\</span>  </span>
<span class="line"><span class="token parameter variable">-network</span> mynet mywebapp</span>
<span class="line"><span class="token function">docker</span> <span class="token function">service</span> create <span class="token parameter variable">-name</span> redis <span class="token parameter variable">-network</span> mynet redis:latest</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This is the basic architecture of this application:</p><figure><img src="https://docker.com/app/uploads/2022/12/docker-1-12-built-in-orchestration-3.png" alt="docker 1 12 built in orchestration 3" tabindex="0" loading="lazy"><figcaption>docker 1 12 built in orchestration 3</figcaption></figure><hr><h2 id="security" tabindex="-1"><a class="header-anchor" href="#security"><span>Security</span></a></h2><p>A core principle for Docker 1.12 is creating a zero configuration, secure-by-default, out of the box experience for the Docker platform. One of the major hurdles that administrators often face with deploying applications into production is running them securely, Docker 1.12 allows an administrator to follow the exact same steps setting up a demo cluster that they would to setup a secure production cluster.</p><p>Security is not something you can bolt-on after the fact. That is why Docker 1.12 comes with mutually authenticated TLS, providing authentication, authorization and encryption to the communications of every node participating in the swarm, out of the box.</p><p>When starting your first manager, Docker Engine will generate a new Certificate Authority (CA) and a set of initial certificates for you. After this initial step, every node joining the swarm will automatically be issued a new certificate with a randomly generated ID, and their current role in the swarm(manager or worker). Thesecertificates will be used as their cryptographically secure node identity for the lifetime of their participation in this swarm, and will be used by the managers to ensure secure dissemination of tasks and other updates.</p><figure><img src="https://docker.com/app/uploads/2022/12/docker-1-12-built-in-orchestration-2.png" alt="docker 1 12 built in orchestration 2" tabindex="0" loading="lazy"><figcaption>docker 1 12 built in orchestration 2</figcaption></figure><p>One of the biggest barriers of adoption of TLS has always been the difficulty of creating, configuring and maintaining the necessary Public Key Infrastructure(PKI). With Docker 1.12, everything not only gets setup and configured with safe defaults for you, but we also automated one of the most painful parts of dealing with TLS certificates: certificate rotation.</p><p>Under the hood, every node participating in the swarmis constantly refreshing its certificates, ensuring that potentially leaked or compromised certificates are no longer valid. The frequency with which certificates are rotated can be configured by the user, and set as low as every 30 minutes.</p><p>If you would like to use your own Certificate Authority, we also support an external-CA mode, where the managers in the swarm simply relay the Certificate Signing Requests of the nodes attempting to join the cluster to a remote URL.</p><hr><h2 id="bundles" tabindex="-1"><a class="header-anchor" href="#bundles"><span>Bundles</span></a></h2>`,19)),t("p",null,[e[14]||(e[14]=n("Docker 1.12 introduces a new file format called a ",-1)),t("a",C,[e[11]||(e[11]=n("Distributed Application Bundle (",-1)),o(r,{icon:"iconfont icon-github"}),e[12]||(e[12]=t("code",null,"docker/docker",-1)),e[13]||(e[13]=n(")",-1))]),e[15]||(e[15]=n("(experimental build only).Bundleis a new abstraction on top of servicefocused on the full stack application.",-1))]),e[25]||(e[25]=l('<p>A Docker Bundle file is a declarative specification of a set of services that mandates:</p><ul><li>What specific image revision to run</li><li>What networks to create</li><li>How containers in those services must be networked to run</li></ul><p>Bundle files are fully portable and are perfect deployment artifacts for software delivery pipelines because they let you ship fully spec‚Äôed and versioned multi-container Docker apps.</p><p>The bundle file spec is simple and open, and you can create bundles however you want. To get you started, Docker Compose has experimental support for creating bundle filesand with Docker 1.12 and swarm mode enabled, you can deploy the bundle files.</p><p>Bundles are an efficient mechanism for moving multi-service apps from developer laptops through CI to production. It‚Äôs experimental, and we‚Äôre looking for feedback from the community.</p><hr><h2 id="under-the-hood-of-docker-1-12" tabindex="-1"><a class="header-anchor" href="#under-the-hood-of-docker-1-12"><span>Under the hood of Docker 1.12</span></a></h2>',7)),t("p",null,[e[18]||(e[18]=n("When you take a look under the hood, Docker 1.12 uses a number of other interesting technologies.Inter-node communication is done using ",-1)),t("a",O,[o(r,{icon:"fas fa-globe"}),e[16]||(e[16]=n("gRPC",-1))]),e[19]||(e[19]=n(", which gives us HTTP/2 benefits like connection multiplexing and header compression. Our data structures are transmitted efficiently thanks to ",-1)),t("a",T,[o(r,{icon:"fa-brands fa-google"}),e[17]||(e[17]=n("protobufs",-1))]),e[20]||(e[20]=n(".",-1))]),o(m,{src:"youtube/F7hoq0KwHD4"}),e[26]||(e[26]=t("p",null,"Check out these additional resources on Docker 1.12:",-1)),o(c,{name:"Getting started with Swarm mode",desc:"Getting Started tutorial for Docker Engine Swarm mode",url:"https://docs.docker.com/engine/swarm/swarm-tutorial//",logo:"https://docs.docker.com/favicons/docs@2x.ico",preview:"https://docs.docker.com/images/thumbnail.webp"}),o(c,{name:"Swarm mode",desc:"Docker Engine Swarm mode overview",url:"https://docs.docker.com/engine/swarm//",logo:"https://docs.docker.com/favicons/docs@2x.ico",preview:"https://docs.docker.com/images/thumbnail.webp"}),k(" TODO: add ARTICLE CARD "),o(p,d(u({title:"Docker 1.12: Now with Built-in Orchestration!Docker",desc:"Learn from Docker experts to simplify and advance your app development and management with Docker. Stay up to date on Docker events and new version",link:"https://chanhi2000.github.io/bookshelf/docker.com/docker-1-12-built-in-orchestration.html",logo:"https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png",background:"rgba(29,99,237,0.2)"})),null,16)])}const P=g(w,[["render",A]]),N=JSON.parse('{"path":"/docker.com/docker-1-12-built-in-orchestration.html","title":"Docker 1.12: Now with Built-in Orchestration!Docker","lang":"en-US","frontmatter":{"lang":"en-US","title":"Docker 1.12: Now with Built-in Orchestration!Docker","description":"Article(s) > Docker 1.12: Now with Built-in Orchestration!Docker","icon":"fa-brands fa-docker","category":["DevOps","Docker","Article(s)"],"tag":["blog","docker.com","devops","docker"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Docker 1.12: Now with Built-in Orchestration!Docker\\",\\"image\\":[\\"https://docker.com/app/uploads/2022/12/docker-1-12-built-in-orchestration-1.png\\",\\"https://docker.com/app/uploads/2022/12/docker-1-12-built-in-orchestration-3.png\\",\\"https://docker.com/app/uploads/2022/12/docker-1-12-built-in-orchestration-2.png\\"],\\"datePublished\\":\\"2016-06-21T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Docker Core Engineering\\",\\"url\\":\\"https://docker.com/author/core_eng/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/docker.com/docker-1-12-built-in-orchestration.html"}],["meta",{"property":"og:site_name","content":"üìöBookshelf"}],["meta",{"property":"og:title","content":"Docker 1.12: Now with Built-in Orchestration!Docker"}],["meta",{"property":"og:description","content":"Article(s) > Docker 1.12: Now with Built-in Orchestration!Docker"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://docker.com/app/uploads/2022/12/docker-1-12-built-in-orchestration-1.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://docker.com/app/uploads/2022/12/docker-1-12-built-in-orchestration-1.png"}],["meta",{"name":"twitter:image:alt","content":"Docker 1.12: Now with Built-in Orchestration!Docker"}],["meta",{"property":"article:author","content":"Docker Core Engineering"}],["meta",{"property":"article:tag","content":"docker"}],["meta",{"property":"article:tag","content":"devops"}],["meta",{"property":"article:tag","content":"docker.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2016-06-21T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Docker 1.12: Now with Built-in Orchestration!Docker"},{"property":"og:description","content":"Docker 1.12: Now with Built-in Orchestration!Docker"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/docker.com/docker-1-12-built-in-orchestration.html"}]],"prev":"/devops/docker/articles/README.md","date":"2016-06-21T00:00:00.000Z","isOriginal":false,"author":[{"name":"Docker Core Engineering","url":"https://docker.com/author/core_eng/"}],"cover":"https://docker.com/app/uploads/2022/12/docker-1-12-built-in-orchestration-1.png"},"git":{},"readingTime":{"minutes":6.27,"words":1881},"filePathRelative":"docker.com/docker-1-12-built-in-orchestration.md","copyright":{"author":"Docker Core Engineering"}}');export{P as comp,N as data};
