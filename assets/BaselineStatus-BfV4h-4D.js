import w from"./BaselineIcon-CIMt1FF_.js";import m from"./BaselineStatusBrowser-BqT5d6A1.js";import{_}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as u,c as l,o as c,d as i,a as d,t as r,f as h}from"./app-BVguHYKu.js";const f={limited:{title:"Limited availability",defaultDescription:"This feature is not Baseline because it does not work in some of the most widely-used browsers."},newly:{title:"Newly Available",defaultDescription:"This feature works across the latest devices and browser versions. This feature might not work in older devices or browsers."},widely:{title:"Widely available",defaultDescription:"This feature is well established and works across many devices and browser versions."},loading:{title:"Loading",defaultDescription:""},no_data:{title:"Unknown availability",defaultDescription:"We currently don’t have browser support information about this feature."}},g={name:"BaselineStatus",components:{BaselineIcon:w,BaselineStatusBrowser:m},props:{featureid:{type:String,required:!0}},data(){return{isLoading:!1,feature:{},baseline:"no_data",title:"Baseline:",description:"",support:"",baselineDate:null,browsers:{chrome:{icon:""},edge:{icon:""},firefox:{icon:""},safari:{icon:""}}}},methods:{async fetchData(){try{this.isLoading=!0;const t=`https://api.webstatus.dev/v1/features/${this.featureid}`,e=await fetch(t);if(!e.ok)throw new Error(`Failed to fetch: ${e.status}`);const a=await e.json();console.log(JSON.stringify(a,2,null)),this.feature=a,this.baseline=a?.baseline?.status||"no_data",this.baselineDate=this.getBaselineDate(a)??void 0}catch(t){console.error("Error fetching data:",t)}this.isLoading=!1,console.log(`baseline: ${this.baseline}`),this.title=f[this.baseline]?.title||"Loading...",this.description=this.getDescriptionDate(this.baseline,this.baselineDate),this.browsers=this.feature?.browser_implementations||{}},getAriaLabel(){const t=this.baseline==="newly"?'<span class="baseline-badge">newly available</span>':"",e=this.baseline==="newly"&&this.baselineDate?this.baselineDate.split(" ")[1]:"",{chrome:a,edge:o,firefox:s,safari:n}=this.browsers||{};return this.title,`${this.title}${e?` ${e}`:""}${t?" (newly available)":""}. Supported in Chrome: ${a?.status==="available"?"yes":a?.status}. Supported in Edge: ${o?.status==="available"?"yes":o?.status}. Supported in Firefox: ${s?.status==="available"?"yes":s?.status}. Supported in Safari: ${n?.status==="available"?"yes":n?.status}.`},getBaselineDate(t){return t?.baseline?.low_date?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long"}).format(new Date(t.baseline.low_date)):""},getDescriptionDate(t,e){return console.log(`getDescriptionDate ... baseline: ${t}, date: ${e}`),t==="newly"&&e?`Since ${e} this feature works across the latest devices and browser versions. This feature might not work in older devices or browsers.`:t==="widely"&&e?`This feature is well established and works across many devices and browser versions. It’s been available across browsers since ${e}`:f[t].defaultDescription}},mounted(){this.fetchData()},render(){}},v={class:"baseline-status"},y={class:"name"},D={key:0},B=["aria-label"],S={class:"baseline-status-title","aria-hidden":"true"},L={key:0},k=["href"];function x(t,e,a,o,s,n){const b=u("BaselineIcon"),p=u("BaselineStatusBrowsers");return c(),l("div",v,[i("h1",y,r(s.feature?.name),1),s.feature?(c(),l("details",D,[i("summary",{"aria-label":n.getAriaLabel()},[h(b,{support:s.baseline,"aria-hidden":"true"},null,8,["support"]),i("div",S,[i("div",null,r(s.title)+" "+r(s.feature.year)+" "+r(s.feature.badge),1)]),h(p,{browser_implementations:s.feature?.browser_implementations},null,8,["browser_implementations"]),e[0]||(e[0]=i("span",{class:"open-icon","aria-hidden":"true"},[i("svg",{xmlns:"http://www.w3.org/2000/svg",width:"11",height:"7",viewBox:"0 0 11 7",fill:"none"},[i("path",{d:"M5.5 6.45356L0.25 1.20356L1.19063 0.262939L5.5 4.59419L9.80937 0.284814L10.75 1.22544L5.5 6.45356Z",fill:"currentColor"})])],-1))],8,B),i("p",null,r(s.description),1),s.baseline!=="no_data"?(c(),l("p",L,[i("a",{href:`https://github.com/web-platform-dx/web-features/blob/main/features/${s.feature.feature_id}.yml`,target:"_top"},"Learn more",8,k)])):d("v-if",!0)])):d("v-if",!0)])}const N=_(g,[["render",x],["__scopeId","data-v-3da221b7"]]);export{N as default};
