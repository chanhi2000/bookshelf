import{_ as g}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as m,d as s,f as t,b as l,a as v,t as h,n as r,g as u,w as p,e as a,r as c,o as f}from"./app-BVguHYKu.js";const b={},w={id:"frontmatter-title-관련",tabindex:"-1"},y={class:"header-anchor",href:"#frontmatter-title-관련"},x={class:"table-of-contents"},R={href:"https://tanstack.com/router/latest",target:"_blank",rel:"noopener noreferrer"},q={href:"https://tanstack.com/start/latest",target:"_blank",rel:"noopener noreferrer"},T={class:"hint-container info"},S={href:"https://tanstack.com/router/latest/docs/framework/react/overview",target:"_blank",rel:"noopener noreferrer"},j={href:"https://tanstack.com/router/v1/docs/framework/react/quick-start",target:"_blank",rel:"noopener noreferrer"},I={href:"https://github.com/arackaf/tanstack-router-routing-demo",target:"_blank",rel:"noopener noreferrer"},L={href:"https://github.com/arackaf/tanstack-router-routing-demo",target:"_blank",rel:"noopener noreferrer"},A={href:"https://tanstack.com/router/latest/docs/framework/react/guide/search-params",target:"_blank",rel:"noopener noreferrer"},z={href:"https://tanstack.com/router/latest/docs/framework/react/guide/custom-search-param-serialization",target:"_blank",rel:"noopener noreferrer"},W={href:"https://zod.dev/",target:"_blank",rel:"noopener noreferrer"},P={href:"https://tanstack.com/router/latest/docs/framework/react/guide/search-params#zod-adapter",target:"_blank",rel:"noopener noreferrer"},U={href:"https://github.com/arackaf/tanstack-router-routing-demo/tree/feature/optional-search-params-v2",target:"_blank",rel:"noopener noreferrer"},B={class:"hint-container info"};function C(k,n){const i=c("VPCard"),o=c("router-link"),d=c("SiteInfo"),e=c("VPIcon");return f(),m("div",null,[s("h1",w,[s("a",y,[s("span",null,h(k.$frontmatter.title)+" 관련",1)])]),t(i,r(u({title:"React.js > Article(s)",desc:"Article(s)",link:"/programming/js-react/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",x,[s("ul",null,[s("li",null,[t(o,{to:"#getting-started"},{default:p(()=>n[0]||(n[0]=[a("Getting started")])),_:1,__:[0]})]),s("li",null,[t(o,{to:"#the-plan"},{default:p(()=>n[1]||(n[1]=[a("The Plan")])),_:1,__:[1]})]),s("li",null,[t(o,{to:"#the-root-route"},{default:p(()=>n[2]||(n[2]=[a("The Root Route")])),_:1,__:[2]})]),s("li",null,[t(o,{to:"#running-the-app"},{default:p(()=>n[3]||(n[3]=[a("Running the App")])),_:1,__:[3]})]),s("li",null,[t(o,{to:"#building-the-app"},{default:p(()=>n[4]||(n[4]=[a("Building the App")])),_:1,__:[4]})]),s("li",null,[t(o,{to:"#routes"},{default:p(()=>n[5]||(n[5]=[a("Routes")])),_:1,__:[5]})]),s("li",null,[t(o,{to:"#path-parameters"},{default:p(()=>n[6]||(n[6]=[a("Path Parameters")])),_:1,__:[6]})]),s("li",null,[t(o,{to:"#advanced-routing"},{default:p(()=>n[7]||(n[7]=[a("Advanced Routing")])),_:1,__:[7]})]),s("li",null,[t(o,{to:"#directory-based-routing"},{default:p(()=>n[8]||(n[8]=[a("Directory-Based Routing")])),_:1,__:[8]})]),s("li",null,[t(o,{to:"#type-safe-querystrings"},{default:p(()=>n[9]||(n[9]=[a("Type-Safe Querystrings")])),_:1,__:[9]}),s("ul",null,[s("li",null,[t(o,{to:"#making-our-url-prettier"},{default:p(()=>n[10]||(n[10]=[a("Making Our URL Prettier")])),_:1,__:[10]})]),s("li",null,[t(o,{to:"#another-option"},{default:p(()=>n[11]||(n[11]=[a("Another Option")])),_:1,__:[11]})])])]),s("li",null,[t(o,{to:"#wrapping-up"},{default:p(()=>n[12]||(n[12]=[a("Wrapping up")])),_:1,__:[12]})])])]),n[190]||(n[190]=s("hr",null,null,-1)),t(d,{name:"Introducing TanStack Router",desc:"TanStack Router is a comprehensive JavaScript framework for client-side applications, emphasizing type-safe routing and navigation. It includes nested layouts and efficient data loading.",url:"https://frontendmasters.com/blog/introducing-tanstack-router/",logo:"https://frontendmasters.com/favicon.ico",preview:"https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/3821"}),s("p",null,[s("a",R,[t(e,{icon:"fas fa-globe"}),n[13]||(n[13]=a("TanStack Router"))]),n[14]||(n[14]=a(" is an incredibly exciting project. It’s essentially a fully-featured")),n[15]||(n[15]=s("em",null,"client-side",-1)),n[16]||(n[16]=a("JavaScript application framework. It provides a mature routing and navigation system with nested layouts and efficient data loading capabilities at every point in the route tree. Best of all, it does all of this in a")),n[17]||(n[17]=s("em",null,"type-safe",-1)),n[18]||(n[18]=a("manner."))]),s("p",null,[n[20]||(n[20]=a("What’s especially exciting is that, as of this writing, there’s a ")),s("a",q,[t(e,{icon:"fas fa-globe"}),n[19]||(n[19]=a("TanStack Start"))]),n[21]||(n[21]=a(" in the works, which will add server-side capabilities to Router, enabling you to build full-stack web applications. Start promises to do this with a server layer applied directly on top of the same TanStack Router we’ll be covering here. That makes this a perfect time to get to know Router if you haven’t already."))]),n[191]||(n[191]=s("p",null,"TanStack Router is more than just a router — it’s a full-fledged client-side application framework. So to prevent this post from getting too long, we won’t even try to cover it all. We’ll limit ourselves to routing and navigation, which is a larger topic than you might think, especially considering the type-safe nature of Router.",-1)),s("div",T,[n[22]||(n[22]=s("p",{class:"hint-container-title"},"Article Series",-1)),t(i,r(u({title:"Introducing TanStack Router",desc:"TanStack Router is a comprehensive JavaScript framework for client-side applications, emphasizing type-safe routing and navigation. It includes nested layouts and efficient data loading.",link:"/frontendmasters.com/introducing-tanstack-router.md",logo:"https://frontendmasters.com/favicon.ico",background:"rgba(188,75,52,0.2)"})),null,16),t(i,r(u({title:"Loading Data with TanStack Router: Getting Going",desc:"TanStack Router is one of the most exciting projects in the web development ecosystem right now, and it doesn’t get nearly enough attention. It’s a fully fledged client-side application framework that supports advanced routing, nested layouts, and hooks for loading data. Best of all, it does all of this with deep type safety. This post […]",link:"/frontendmasters.com/tanstack-router-data-loading-1.md",logo:"https://frontendmasters.com/favicon.ico",background:"rgba(188,75,52,0.2)"})),null,16),t(i,r(u({title:"Loading Data with TanStack Router: react-query",desc:"TanStack Query, or react-query, simplifies client-side data fetching with features like caching, automatic re-fetching, and error handling. It integrates smoothly with TanStack Router, allowing efficient prefetching and loading states using hooks like useSuspenseQuery. ",link:"/frontendmasters.com/tanstack-router-data-loading-2.md",logo:"https://frontendmasters.com/favicon.ico",background:"rgba(188,75,52,0.2)"})),null,16)]),n[192]||(n[192]=s("hr",null,null,-1)),n[193]||(n[193]=s("h2",{id:"getting-started",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#getting-started"},[s("span",null,"Getting started")])],-1)),s("p",null,[n[29]||(n[29]=a("There are ")),s("a",S,[t(e,{icon:"fas fa-globe"}),n[23]||(n[23]=a("official TanStack Router docs"))]),n[30]||(n[30]=a(" and ")),s("a",j,[n[24]||(n[24]=a("a ")),t(e,{icon:"fas fa-globe"}),n[25]||(n[25]=a("quickstart guide"))]),n[31]||(n[31]=a(", which has a nice tool for scaffolding a fresh Router project. You can also clone ")),s("a",I,[n[26]||(n[26]=a("the repo used for this post (")),t(e,{icon:"iconfont icon-github"}),n[27]||(n[27]=s("code",null,"arackaf/tanstack-router-routing-demo",-1)),n[28]||(n[28]=a(")"))]),n[32]||(n[32]=a("and follow along."))]),t(d,{name:"arackaf/tanstack-router-routing-demo",desc:"",url:"https://github.com/arackaf/tanstack-router-routing-demo/",logo:"https://github.githubassets.com/favicons/favicon-dark.svg",preview:"https://opengraph.githubassets.com/ce2149889468b8f6a3cff3fac8c363afd02d6813bae210f428ce1580778fa795/arackaf/tanstack-router-routing-demo"}),n[194]||(n[194]=s("hr",null,null,-1)),n[195]||(n[195]=s("h2",{id:"the-plan",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#the-plan"},[s("span",null,"The Plan")])],-1)),n[196]||(n[196]=s("p",null,"In order to see what Router can do and how it works, we’ll pretend to build a task management system, like Jira. Like the real Jira, we won’t make any effort at making things look nice or be pleasant to use. Our goal is to see what Router can do, not build a useful web application.",-1)),n[197]||(n[197]=s("p",null,"We’ll cover: routing, layouts, paths, search parameters, and of course static typing all along the way.",-1)),n[198]||(n[198]=s("p",null,"Let’s start at the very top.",-1)),n[199]||(n[199]=s("hr",null,null,-1)),n[200]||(n[200]=s("h2",{id:"the-root-route",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#the-root-route"},[s("span",null,"The Root Route")])],-1)),s("p",null,[n[33]||(n[33]=a("This is our root layout, which Router calls")),t(e,{icon:"fa-brands fa-react"}),n[34]||(n[34]=s("code",null,"__root.tsx",-1)),n[35]||(n[35]=a(". If you’re following along on your own project, this will go directly under the")),t(e,{icon:"fas fa-folder-open"}),n[36]||(n[36]=s("code",null,"routes",-1)),n[37]||(n[37]=a("folder."))]),n[201]||(n[201]=l(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="routes/__root.tsx"><span>routes/__root.tsx</span></div><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx"><pre><code class="language-tsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createRootRoute<span class="token punctuation">,</span> Link<span class="token punctuation">,</span> Outlet <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-router&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> Route <span class="token operator">=</span> <span class="token function">createRootRoute</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            Home</span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/tasks<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            Tasks</span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/epics<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            Epics</span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Outlet</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>The<code>createRootRoute</code>function does what it says. The<code>&lt;Link /&gt;</code>component is also fairly self-explanatory (it makes links). Router is kind enough to add an<code>active</code> class to Links which are currently active, which makes it easy to style them accordingly (as well as adds an appropriate <code>aria-current=&quot;page&quot;</code> attribute/value). Lastly, the<code>&lt;Outlet /&gt;</code>component is interesting: this is how we tell Router where to render the “content” for this layout.</p><hr><h2 id="running-the-app" tabindex="-1"><a class="header-anchor" href="#running-the-app"><span>Running the App</span></a></h2><p>We run our app with<code>npm run dev.</code>Check your terminal for the port on<code>localhost</code>where it’s running.</p>`,5)),s("p",null,[n[41]||(n[41]=a("More importantly, the ")),n[42]||(n[42]=s("code",null,"dev",-1)),n[43]||(n[43]=a(" watch process monitors the routes we’ll be adding, and maintains a")),n[44]||(n[44]=s("code",null,"routeTree.gen.ts",-1)),n[45]||(n[45]=a("file. This syncs metadata about our routes in order to help build static types, which will help us work with our routes safely. Speaking of, if you’re building this from scratch ")),s("a",L,[n[38]||(n[38]=a("from our demo repo (")),t(e,{icon:"iconfont icon-github"}),n[39]||(n[39]=s("code",null,"arackaf/tanstack-router-routing-demo",-1)),n[40]||(n[40]=a(")"))]),n[46]||(n[46]=a(", you might have noticed some TypeScript errors on our Link tags, since those URLs don’t yet exist. That’s right: ")),n[47]||(n[47]=s("strong",null,"TanStack Router deeply integrates TypeScript into the route level, and will even validate that your Link tags are pointing somewhere valid.",-1))]),n[202]||(n[202]=l(`<p>To be clear, this is not because of any editor plugins. The TypeScript integration itself is producing errors, as it would in your CI/CD system.</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="log"><span>log</span></div><div class="language-plaintext line-numbers-mode" data-highlighter="prismjs" data-ext="plaintext"><pre><code class="language-plaintext"><span class="line">src/routes/\\\\\\_\\\\\\_root.tsx:8:17 - error TS2322: Type &#39;&quot;/&quot;&#39; is not assignable to type &#39;&quot;.&quot; | &quot;..&quot; | undefined&#39;.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></div><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code class="language-html"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[&amp;.active]:font-bold<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="building-the-app" tabindex="-1"><a class="header-anchor" href="#building-the-app"><span>Building the App</span></a></h2>`,5)),s("p",null,[n[48]||(n[48]=a("Let’s get started by adding our root page. In Router, we use the file")),t(e,{icon:"fa-brands fa-redact"}),n[49]||(n[49]=s("code",null,"index.tsx",-1)),n[50]||(n[50]=a("to represent the root")),n[51]||(n[51]=s("code",null,"/",-1)),n[52]||(n[52]=a("path, wherever we are in the route tree (which we’ll explain shortly). We’ll create ")),t(e,{icon:"fa-brands fa-redact"}),n[53]||(n[53]=s("code",null,"index.tsx",-1)),n[54]||(n[54]=a(", and, assuming you have the ")),n[55]||(n[55]=s("code",null,"dev",-1)),n[56]||(n[56]=a(" task running, it should scaffold some code for you that looks like this:"))]),n[203]||(n[203]=l(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="index.tsx"><span>index.tsx</span></div><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx"><pre><code class="language-tsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createFileRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-router&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> Route <span class="token operator">=</span> <span class="token function">createFileRoute</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello /!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>There’s a bit more boilerplate than you might be used to with metaframeworks like Next or SvelteKit. In those frameworks, you just <code>export default</code> a React component, or plop down a normal Svelte component and everything<em>just works</em>. In TanStack Router we have have to call a function called<code>createFileRoute</code>, and pass in the route to where we are.</p><p>The route is necessary for the type safety Router has, but don’t worry, <strong>you don’t have to manage this yourself.</strong> The dev process not only scaffolds code like this for new files, it also keeps those path values in sync for you. Try it — change that path to something else, and save the file; it should change it right back, for you. Or create a folder called<code>junk</code>and drag it there: it should change the path to<code>&quot;/junk/&quot;</code>.</p><p>Let’s add the following content (after moving it back out of the junk folder).</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx"><pre><code class="language-tsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createFileRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-router&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> Route <span class="token operator">=</span> <span class="token function">createFileRoute</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  component<span class="token operator">:</span> Index<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Top level index page</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Simple and humble — just a component telling us we’re in the top level index page.</p><hr><h2 id="routes" tabindex="-1"><a class="header-anchor" href="#routes"><span>Routes</span></a></h2><p>Let’s start to create some actual routes. Our root layout indicated we want to have paths for dealing with tasks and epics. Router (by default) uses file-based routing, but provides you two ways to do so, which can be mixed and matched (we’ll look at both). You can stack your files into folders which match the path you’re browsing. Or you can use “flat routes” and indicate these route hierarchies in individual filenames, separating the paths with dots. If you’re thinking only the former is useful, stay tuned.</p>`,9)),s("p",null,[n[57]||(n[57]=a("Just for fun, let’s start with the flat routes. Let’s create a")),t(e,{icon:"fa-brands fa-react"}),n[58]||(n[58]=s("code",null,"tasks.index.tsx",-1)),n[59]||(n[59]=a("file. This is the same as creating an ")),t(e,{icon:"fa-brands fa-react"}),n[60]||(n[60]=s("code",null,"index.tsx",-1)),n[61]||(n[61]=a(" inside of an hypothetical")),n[62]||(n[62]=s("code",null,"tasks",-1)),n[63]||(n[63]=a("folder. For content we’ll add some basic markup (we’re trying to see how Router works, not build an actual todo app)."))]),n[204]||(n[204]=l(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="tasks.index.tsx"><span>tasks.index.tsx</span></div><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx"><pre><code class="language-tsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createFileRoute<span class="token punctuation">,</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-router&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> Route <span class="token operator">=</span> <span class="token function">createFileRoute</span><span class="token punctuation">(</span><span class="token string">&quot;/tasks/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  component<span class="token operator">:</span> Index<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> tasks <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">&quot;Task 1&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">&quot;Task 2&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">&quot;Task 3&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Tasks page!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token punctuation">{</span>tasks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> idx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></span>
<span class="line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>idx<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>t<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/tasks/$taskId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">params</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> taskId<span class="token operator">:</span> t<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">              View</span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/tasks/$taskId/edit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">params</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> taskId<span class="token operator">:</span> t<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">              Edit</span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div>`,1)),s("p",null,[n[64]||(n[64]=a("Before we continue, let’s add a layout file for all of our tasks routes, housing some common content that will be present on all pages routed to under")),n[65]||(n[65]=s("code",null,"/tasks",-1)),n[66]||(n[66]=a(". If we had a")),t(e,{icon:"fas fa-folder-open"}),n[67]||(n[67]=s("code",null,"tasks",-1)),n[68]||(n[68]=a("folder, we’d just throw a")),t(e,{icon:"fa-brands fa-react"}),n[69]||(n[69]=s("code",null,"route.tsx",-1)),n[70]||(n[70]=a("file in there. Instead, we’ll add a")),t(e,{icon:"fa-brands fa-react"}),n[71]||(n[71]=s("code",null,"tasks.route.tsx",-1)),n[72]||(n[72]=a("file. Since we’re using flat files, here, we can also just name it")),t(e,{icon:"fa-brands fa-react"}),n[73]||(n[73]=s("code",null,"tasks.tsx",-1)),n[74]||(n[74]=a(". But I like keeping things consistent with directory-based files (which we’ll see in a bit), so I prefer")),t(e,{icon:"fa-brands fa-react"}),n[75]||(n[75]=s("code",null,"tasks.route.tsx",-1)),n[76]||(n[76]=a("."))]),n[205]||(n[205]=l(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="tasks.route.tsx"><span>tasks.route.tsx</span></div><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx"><pre><code class="language-tsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createFileRoute<span class="token punctuation">,</span> Outlet <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-router&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> Route <span class="token operator">=</span> <span class="token function">createFileRoute</span><span class="token punctuation">(</span><span class="token string">&quot;/tasks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      Tasks layout </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Outlet</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>As always, don’t forget the<code>&lt;Outlet /&gt;</code>or else the actual content of that path will not render.</p>`,2)),s("p",null,[n[77]||(n[77]=a("To repeat,")),t(e,{icon:"fa-brands fa-react"}),n[78]||(n[78]=s("code",null,"xyz.route.tsx",-1)),n[79]||(n[79]=a("is a component that renders for the entire route, all the way down. It’s essentially a layout, but Router calls them routes. And")),t(e,{icon:"fa-brands fa-react"}),n[80]||(n[80]=s("code",null,"xyz.index.tsx",-1)),n[81]||(n[81]=a("is the file for the individual path at")),n[82]||(n[82]=s("code",null,"xyz",-1)),n[83]||(n[83]=a("."))]),n[206]||(n[206]=l('<p>This renders. There’s not much to look at, but take a quick look before we make one interesting change.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/09/tasks-page.jpg?resize=398%2C470&amp;ssl=1" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Notice the navigation links from the root layout at the very top. Below that, we see<code>Tasks layout</code>, from the tasks route file (essentially a layout). Below that, we have the content for our tasks page.</p><hr><h2 id="path-parameters" tabindex="-1"><a class="header-anchor" href="#path-parameters"><span>Path Parameters</span></a></h2><p>The<code>&lt;Link&gt;</code>tags in the tasks index file give away where we’re headed, but let’s build paths to view, and edit tasks. We’ll create<code>/tasks/123</code>and<code>/tasks/123/edit</code>paths, where of course <code>123</code> represents whatever the <code>taskId</code> is.</p>',6)),s("p",null,[n[84]||(n[84]=a("TanStack Router represents variables inside of a path as path parameters, and they’re represented as path segments that start with a dollar sign. So with that we’ll add")),t(e,{icon:"fa-brands fa-react"}),n[85]||(n[85]=s("code",null,"tasks.$taskId.index.tsx",-1)),n[86]||(n[86]=a(" and")),t(e,{icon:"fa-brands fa-react"}),n[87]||(n[87]=s("code",null,"tasks.$taskId.edit.tsx",-1)),n[88]||(n[88]=a(". The former will route to")),n[89]||(n[89]=s("code",null,"/tasks/123",-1)),n[90]||(n[90]=a("and the latter will route to")),n[91]||(n[91]=s("code",null,"/tasks/123/edit",-1)),n[92]||(n[92]=a(". Let’s take a look at")),t(e,{icon:"fa-brands fa-react"}),n[93]||(n[93]=s("code",null,"tasks.$taskId.index.tsx",-1)),n[94]||(n[94]=a("and find out how we actually get the path parameter that’s passed in."))]),n[207]||(n[207]=l(`<div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx"><pre><code class="language-tsx"><span class="line">simport <span class="token punctuation">{</span> createFileRoute<span class="token punctuation">,</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-router&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> Route <span class="token operator">=</span> <span class="token function">createFileRoute</span><span class="token punctuation">(</span><span class="token string">&quot;/tasks/$taskId/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token punctuation">{</span> taskId <span class="token punctuation">}</span> <span class="token operator">=</span> Route<span class="token punctuation">.</span><span class="token function">useParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/tasks<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Back</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">View task </span><span class="token punctuation">{</span>taskId<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The<code>Route.useParams()</code>object that exists on our Route object returns our parameters. But this isn’t interesting on its own; every routing framework has something like this. What’s particularly compelling is that this one is statically typed. Router is smart enough to know which parameters exist for that route (including parameters from higher up in the route, which we’ll see in a moment). That means that not only do we get auto complete…</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/09/path-param-auto-complete.jpg?resize=1024%2C567&amp;ssl=1" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>…but if you put an invalid path param in there, you’ll get a TypeScript error.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/09/parath-param-typed.jpg?resize=1024%2C372&amp;ssl=1" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>We also saw this with the Link tags we used to navigate to these routes.</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx"><pre><code class="language-tsx"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/tasks/$taskId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">params</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> taskId<span class="token operator">:</span> t<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line"></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>if we’d left off the params here (or specified anything other than<code>taskId</code>), we would have gotten an error.</p><hr><h2 id="advanced-routing" tabindex="-1"><a class="header-anchor" href="#advanced-routing"><span>Advanced Routing</span></a></h2><p>Let’s start to lean on Router’s advanced routing rules (a little) and see some of the nice features it supports. I’ll stress, these are advanced features you won’t commonly use, but it’s nice to know they’re there.</p><p>The edit task route is essentially identical, except the path is different, and I put the text to say “Edit” instead of “View.” But let’s use this route to explore a TanStack Router feature we haven’t seen.</p><p>Conceptually we have two hierarchies: we have the URL path, and we have the component tree. So far, these things have lined up 1:1. The URL path:</p><div class="language-plaintext line-numbers-mode" data-highlighter="prismjs" data-ext="plaintext"><pre><code class="language-plaintext"><span class="line">/tasks/123/edit</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Rendered:</p><div class="language-plaintext line-numbers-mode" data-highlighter="prismjs" data-ext="plaintext"><pre><code class="language-plaintext"><span class="line">root route -&gt; tasks route layout -&gt; edit task path</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The URL hierarchy and the component hierarchy lined up perfectly. But they don’t have to.</p>`,17)),s("p",null,[n[95]||(n[95]=a("Just for fun, to see how, let’s see how we can remove the main tasks layout file from the edit task route. So we want the")),n[96]||(n[96]=s("code",null,"/tasks/123/edit",-1)),n[97]||(n[97]=a("URL to render the same thing, but ")),n[98]||(n[98]=s("strong",null,"without",-1)),n[99]||(n[99]=a(" the ")),t(e,{icon:"fa-brands fa-firefox"}),n[100]||(n[100]=s("code",null,"tasks.route.tsx",-1)),n[101]||(n[101]=a(" route file being rendered. To do this, we just rename ")),t(e,{icon:"fa-brands fa-firefox"}),n[102]||(n[102]=s("code",null,"tasks.$taskId.edit.tsx",-1)),n[103]||(n[103]=a(" to ")),t(e,{icon:"fa-brands fa-firefox"}),n[104]||(n[104]=s("code",null,"tasks_.$taskId.edit.tsx",-1)),n[105]||(n[105]=a("."))]),s("p",null,[n[106]||(n[106]=a("Note that")),n[107]||(n[107]=s("code",null,"tasks",-1)),n[108]||(n[108]=a("became")),n[109]||(n[109]=s("code",null,"tasks_",-1)),n[110]||(n[110]=a(". We do need")),n[111]||(n[111]=s("code",null,"tasks",-1)),n[112]||(n[112]=a("in there, where it is, so Router will know how to eventually find the")),t(e,{icon:"fa-brands fa-firefox"}),n[113]||(n[113]=s("code",null,"edit.tsx",-1)),n[114]||(n[114]=a("file we’re rendering,")),n[115]||(n[115]=s("em",null,"based on the URL",-1)),n[116]||(n[116]=a(". But by naming it")),n[117]||(n[117]=s("code",null,"tasks_",-1)),n[118]||(n[118]=a(", we remove that")),n[119]||(n[119]=s("em",null,"component",-1)),n[120]||(n[120]=a("from the rendered component tree, even though")),n[121]||(n[121]=s("code",null,"tasks",-1)),n[122]||(n[122]=a("is still in the URL. Now when we render the edit task route, we get this:"))]),n[208]||(n[208]=s("figure",null,[s("img",{src:"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/09/edit-task-without-tasks-layout.jpg?resize=722%2C390&ssl=1",alt:"",tabindex:"0",loading:"lazy"}),s("figcaption")],-1)),n[209]||(n[209]=s("p",null,[a("Notice how"),s("code",null,"Tasks layout"),a("is gone.")],-1)),s("p",null,[n[123]||(n[123]=a("What if you wanted to do the opposite? What if you have a")),n[124]||(n[124]=s("em",null,"component",-1)),n[125]||(n[125]=a("hierarchy you want, that is, you")),n[126]||(n[126]=s("strong",null,"want",-1)),n[127]||(n[127]=a("some layout to render in the edit task page, but you")),n[128]||(n[128]=s("strong",null,"don’t",-1)),n[129]||(n[129]=a("want that layout to affect the URL. Well, just put the underscore on the opposite side. So we have ")),t(e,{icon:"fa-brands fa-firefox"}),n[130]||(n[130]=s("code",null,"tasks_.$taskId.edit.tsx",-1)),n[131]||(n[131]=a(" which renders the task edit page, but without putting the tasks layout route into the")),n[132]||(n[132]=s("em",null,"component hierarchy",-1)),n[133]||(n[133]=a(". Let’s say we have a special layout we")),n[134]||(n[134]=s("em",null,"want",-1)),n[135]||(n[135]=a("to use only for task editing. Let’s create a")),t(e,{icon:"fa-brands fa-firefox"}),n[136]||(n[136]=s("code",null,"_taskEdit.tsx",-1)),n[137]||(n[137]=a("."))]),n[210]||(n[210]=l(`<div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx"><pre><code class="language-tsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createFileRoute<span class="token punctuation">,</span> Outlet <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-router&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> Route <span class="token operator">=</span> <span class="token function">createFileRoute</span><span class="token punctuation">(</span><span class="token string">&quot;/_taskEdit&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      Special Task Edit Layout </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Outlet</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1)),s("p",null,[n[138]||(n[138]=a("Then we change our task edit file to this ")),t(e,{icon:"fa-brands fa-react"}),n[139]||(n[139]=s("code",null,"_taskEdit.tasks_.$taskId.edit.tsx",-1)),n[140]||(n[140]=a(". And now when we browse to")),n[141]||(n[141]=s("code",null,"/tasks/1/edit",-1)),n[142]||(n[142]=a("we see the task edit page with our custom layout (which did not affect our URL)."))]),n[211]||(n[211]=l('<figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/09/pathless-layout.jpg?resize=694%2C432&amp;ssl=1" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Again, this is an advanced feature. Most of the time you’ll use simple, boring, predictable routing rules. But it’s nice to know these advanced features exist.</p><hr><h2 id="directory-based-routing" tabindex="-1"><a class="header-anchor" href="#directory-based-routing"><span>Directory-Based Routing</span></a></h2><p>Instead of putting file hierarchies into file names with dots, you can also put them in directories. I<em>usually</em>prefer directories, but you can mix and match, and sometimes a judicious use of flat file names for things like pairs of<code>$pathParam.index.tsx</code>and<code>$pathParam.edit.tsx</code>feel natural inside of a directory. All the normal rules apply, so choose what feels best<em>to you</em>.</p><p>We won’t walk through everything for directories again. We’ll just take a peak at the finished product (which is also <a href="https://github.com/arackaf/tanstack-router-routing-demo" target="_blank" rel="noopener noreferrer">on GitHub</a>). We have an<code>epics</code>path, which lists out, well, epics. For each, we can edit or view the epic. When viewing, we also show a (static) list of milestones in the epic, which we can also view or edit. Like before, for fun, when we edit a milestone, we’ll remove the milestones route layout.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/09/directory-routing.jpg?resize=454%2C444&amp;ssl=1" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',7)),s("p",null,[n[143]||(n[143]=a("So rather than")),t(e,{icon:"fa-brands fa-react"}),n[144]||(n[144]=s("code",null,"epics.index.tsx",-1)),n[145]||(n[145]=a("and")),t(e,{icon:"fa-brands fa-react"}),n[146]||(n[146]=s("code",null,"epics.route.tsx",-1)),n[147]||(n[147]=a("we have ")),t(e,{icon:"fas fa-folder-open"}),n[148]||(n[148]=s("code",null,"epics/",-1)),t(e,{icon:"fa-brands fa-react"}),n[149]||(n[149]=s("code",null,"index.tsx",-1)),n[150]||(n[150]=a(" and ")),t(e,{icon:"fas fa-folder-open"}),n[151]||(n[151]=s("code",null,"epics/",-1)),t(e,{icon:"fa-brands fa-react"}),n[152]||(n[152]=s("code",null,"route.tsx",-1)),n[153]||(n[153]=a(". And so on. Again, they’re the same rules: replace the dots in the files names with slashes (and directories)."))]),s("p",null,[n[154]||(n[154]=a("Before moving on, let’s briefly pause and look at the")),t(e,{icon:"fa-brands fa-react"}),n[155]||(n[155]=s("code",null,"$milestoneId.index.tsx",-1)),n[156]||(n[156]=a("route. There’s a")),n[157]||(n[157]=s("code",null,"$milestoneId",-1)),n[158]||(n[158]=a("in the path, so we can find that path param. But look up, higher in the route tree. There’s also an")),n[159]||(n[159]=s("code",null,"$epicId",-1)),n[160]||(n[160]=a("param two layers higher. It should come as no surprise that Router is smart enough to realize this, and set the typings up such that both are present."))]),n[212]||(n[212]=s("figure",null,[s("img",{src:"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/09/multiple-path-params.jpg?resize=1024%2C534&ssl=1",alt:"",tabindex:"0",loading:"lazy"}),s("figcaption")],-1)),n[213]||(n[213]=s("hr",null,null,-1)),n[214]||(n[214]=s("h2",{id:"type-safe-querystrings",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#type-safe-querystrings"},[s("span",null,"Type-Safe Querystrings")])],-1)),n[215]||(n[215]=s("p",null,[a("The cherry on the top of this post will be, in my opinion, one of the most obnoxious aspects of web development: dealing with search params (sometimes called querystrings). Basically the stuff that comes after the"),s("code",null,"?"),a("in a URL:"),s("code",null,"/tasks?search=foo&status=open"),a(". The underlying platform primitive "),s("code",null,"URLSearchParams"),a(" can be tedious to work with, and frameworks don’t usually do much better, often providing you an un-typed bag of properties, and offering minimal help in constructing a new URL with new, updated querystring values.")],-1)),s("p",null,[n[162]||(n[162]=a("TanStack Router provides a convenient, fully-featured mechanism for managing search params, ")),n[163]||(n[163]=s("strong",null,"which are also type-safe",-1)),n[164]||(n[164]=a(". Let’s dive in. We’ll take a high-level look, but the full docs")),s("a",A,[t(e,{icon:"fas fa-globe"}),n[161]||(n[161]=a("are here"))]),n[165]||(n[165]=a("."))]),n[216]||(n[216]=l(`<p>We’ll add search param support for the<code>/epics/$epicId/milestones</code>route. We’ll allow various values in the search params that would allow the user to search milestones under a given epic. We’ve seen the <code>createFileRoute</code> function countless times. Typically we just pass a <code>component</code> to it.</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx"><pre><code class="language-tsx"><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> Route <span class="token operator">=</span> <span class="token function">createFileRoute</span><span class="token punctuation">(</span><span class="token string">&quot;/epics/$epicId/milestones/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// ...</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>There’s lots of other functions it supports. For search params we want<code>validateSearch</code>. This is our opportunity to tell Router<em>which</em>search params this route supports, and how to validate what’s currently in the URL. After all, the user is free to type whatever they want into a URL, regardless of the TypeScript typings you set up. It’s your job to take potentially invalid values, and project them to something valid.</p><p>First, let’s define a type for our search params.</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">type</span> <span class="token class-name">SearchParams</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  page<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  search<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  tags<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now let’s implement our<code>validateSearch</code>method. This receives a<code>Record&lt;string, unknown&gt;</code>representing whatever the user has in the URL, and from that, we return something matching our type. Let’s take a look.</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx"><pre><code class="language-tsx"><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> Route <span class="token operator">=</span> <span class="token function">createFileRoute</span><span class="token punctuation">(</span><span class="token string">&quot;/epics/$epicId/milestones/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">validateSearch</span><span class="token punctuation">(</span>search<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">unknown</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> SearchParams <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">      page<span class="token operator">:</span> <span class="token function">Number</span><span class="token punctuation">(</span>search<span class="token punctuation">.</span>page <span class="token operator">??</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">      search<span class="token operator">:</span> <span class="token punctuation">(</span>search<span class="token punctuation">.</span>search <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      tags<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>search<span class="token punctuation">.</span>tags<span class="token punctuation">)</span> <span class="token operator">?</span> search<span class="token punctuation">.</span>tags <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7)),s("p",null,[n[167]||(n[167]=a("Note that (unlike")),n[168]||(n[168]=s("code",null,"URLSearchParams",-1)),n[169]||(n[169]=a(") we are not limited to just string values. We can put objects or arrays in there, and TanStack will do the work of serializing and de-serializing it for us. Not only that, but you can even specify")),s("a",z,[t(e,{icon:"fas fa-globe"}),n[166]||(n[166]=a("custom serialization mechanisms"))]),n[170]||(n[170]=a("."))]),s("p",null,[n[173]||(n[173]=a("Moreover, for a production application, you’ll likely want to use a more serious validation mechanism, like ")),s("a",W,[t(e,{icon:"fas fa-globe"}),n[171]||(n[171]=a("Zod"))]),n[174]||(n[174]=a(". In fact, Router has a number of adapters you can use out of the box, including Zod. Check out the ")),s("a",P,[t(e,{icon:"fas fa-globe"}),n[172]||(n[172]=a("docson Search Params"))]),n[175]||(n[175]=a(" here."))]),n[217]||(n[217]=l(`<p>Let’s manually browse to this path, without any search params, and see what happens. When we browse to</p><div class="language-plaintext line-numbers-mode" data-highlighter="prismjs" data-ext="plaintext"><pre><code class="language-plaintext"><span class="line">http://localhost:5173/epics/1/milestones</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Router replaces (does not redirect) us to:</p><div class="language-plaintext line-numbers-mode" data-highlighter="prismjs" data-ext="plaintext"><pre><code class="language-plaintext"><span class="line">http://localhost:5173/epics/1/milestones?page=1&amp;search=&amp;tags=%5B%5D</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>TanStack ran our validation function, and then replaced our URL with the correct, valid search params. If you don’t like how it forces the URL to be “ugly” like that, stay tuned; there are workarounds. But first let’s work with what we have.</p><p>We’ve been using the<code>Route.useParams</code>method multiple times. There’s also a <code>Route.useSearch</code> that does the same thing, for search params. But let’s do something a little different. We’ve previously been putting everything in the same route file, so we could just directly reference the Route object from the same lexical scope. Let’s build a separate component to read, and update these search params.</p>`,6)),s("p",null,[n[176]||(n[176]=a("I’ve added a")),t(e,{icon:"fa-brands fa-react"}),n[177]||(n[177]=s("code",null,"MilestoneSearch.tsx",-1)),n[178]||(n[178]=a("component. You might think you could just import the ")),n[179]||(n[179]=s("code",null,"Route",-1)),n[180]||(n[180]=a(" object from the route file. But that’s dangerous. You’re likely to create a circular dependency, which might or might not work, depending on your bundler. Even if it “works” you might have some hidden issues lurking."))]),n[218]||(n[218]=l(`<p>Fortunately Router gives you a direct API to handle this,<code>getRouteApi</code>,which is exported from <code>@tanstack/react-router</code>. We pass it a (statically typed) route, and it gives us back the correct route object.</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx"><pre><code class="language-tsx"><span class="line"><span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">getRouteApi</span><span class="token punctuation">(</span><span class="token string">&quot;/epics/$epicId/milestones/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now we can call<code>useSearch</code>on that route object and get our statically typed result.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/09/get-search-params.jpg?resize=1024%2C528&amp;ssl=1" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>We won’t belabor the form elements and click handlers to sync and gather new values for these search parameters. Let’s just assume we have some new values, and see how we set them. For this, we can use the<code>useNavigate</code>hook.</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx"><pre><code class="language-tsx"><span class="line"><span class="token keyword">const</span> navigate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> </span>
<span class="line">  from<span class="token operator">:</span> <span class="token string">&quot;/epics/$epicId/milestones/&quot;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We call it and tell it where we’re navigating<em>from</em>. Now we use the result and tell it where we want to<em>go</em>(the same place we are), and are given a<code>search</code>function from which we return the new search params. Naturally, TypeScript will yell at us if we leave anything off. As a convenience, Router will pass this search function the current values, making it easy to just add / override something. So to page up, we can do</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx"><pre><code class="language-tsx"><span class="line"><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  to<span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function-variable function">search</span><span class="token operator">:</span> prev <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>prev<span class="token punctuation">,</span> page<span class="token operator">:</span> prev<span class="token punctuation">.</span>page <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Naturally, there’s also a<code>params</code>prop to this function, if you’re browsing to a route with path parameters that you have to specify (or else TypeScript will yell at you, like always). We don’t need an<code>$epicId</code>path param here, since there’s already one on the route, and since we’re going to the same place we already are (as indicated by the<code>from</code>value in <code>useNavigate</code>, and the<code>to: &quot;.&quot;</code>value in navigate function) Router knows to just keep what’s there, there.</p><p>If we want to set a search value and tags, we could do:</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx"><pre><code class="language-tsx"><span class="line"><span class="token keyword">const</span> newSearch <span class="token operator">=</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> tags <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;tag 1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tag 2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  to<span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function-variable function">search</span><span class="token operator">:</span> prev <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span> page<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> search<span class="token operator">:</span> newSearch<span class="token punctuation">,</span> tags <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Which will make our URL look like this:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">/epics/1/milestones?page=1&amp;search=Hello%20World&amp;tags=%5B&quot;tag%201&quot;%2C&quot;tag%202&quot;%5D</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Again, the search, and the array of strings were serialized for us.</p><p>If we want to<em>link to</em>a page with search params, we specify those search params on the Link tag</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx"><pre><code class="language-tsx"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> </span>
<span class="line">  <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/epics/$epicId/milestones<span class="token punctuation">&quot;</span></span> </span>
<span class="line">  <span class="token attr-name">params</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> epicId <span class="token punctuation">}</span><span class="token punctuation">}</span></span> </span>
<span class="line">  <span class="token attr-name">search</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> search<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> page<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> tags<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">  View milestones</span>
<span class="line"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>And as always, TypeScript will yell at us if we leave anything off. Strong typing is a good thing.</p><h3 id="making-our-url-prettier" tabindex="-1"><a class="header-anchor" href="#making-our-url-prettier"><span>Making Our URL Prettier</span></a></h3><p>As we saw, currently, browsing to:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">http://localhost:5173/epics/1/milestones</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Will replace the URL with this:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">http://localhost:5173/epics/1/milestones?page=1&amp;search=&amp;tags=%5B%5D</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>It will have all those query params since we specifically told Router that our page will always have a page, search, and tags value. If you care about having a minimal and clean URL, and want that transformation to<em>not</em>happen, you have some options. We can make all of these values optional. In JavaScript (and TypeScript) a value does not exist if it holds the value<code>undefined</code>. So we could change our type to this:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">type</span> <span class="token class-name">SearchParams</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  page<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></span>
<span class="line">  search<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></span>
<span class="line">  tags<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Or this which is the same thing:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line">ype SearchParams <span class="token operator">=</span> Partial<span class="token operator">&lt;</span><span class="token punctuation">{</span></span>
<span class="line">  page<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  search<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  tags<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Then do the extra work to put undefined values in place of default values:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token function">validateSearch</span><span class="token punctuation">(</span>search<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">unknown</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> SearchParams <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> page <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>search<span class="token punctuation">.</span>page <span class="token operator">??</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> searchVal <span class="token operator">=</span> <span class="token punctuation">(</span>search<span class="token punctuation">.</span>search <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> tags <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>search<span class="token punctuation">.</span>tags<span class="token punctuation">)</span> <span class="token operator">?</span> search<span class="token punctuation">.</span>tags <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">    page<span class="token operator">:</span> page <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> page<span class="token punctuation">,</span></span>
<span class="line">    search<span class="token operator">:</span> searchVal <span class="token operator">||</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span></span>
<span class="line">    tags<span class="token operator">:</span> tags<span class="token punctuation">.</span>length <span class="token operator">?</span> tags <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This will complicate places where you<em>use</em>these values, since now they might be undefined. Our nice simple pageUp call now looks like this</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  to<span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function-variable function">search</span><span class="token operator">:</span> prev <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>prev<span class="token punctuation">,</span> page<span class="token operator">:</span> <span class="token punctuation">(</span>prev<span class="token punctuation">.</span>page <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>On the plus side, our URL will now omit search params with default values, and for that matter, our<code>&lt;Link&gt;</code>tags to this page now don’t have to specify<em>any</em>search values, since they’re all optional.</p><h3 id="another-option" tabindex="-1"><a class="header-anchor" href="#another-option"><span>Another Option</span></a></h3><p>Router actually provides you another way to do this. Currently <code>validateSearch</code> accepts just an untyped<code>Record&lt;string, unknown&gt;</code>since the URL can contain anything. The “true” type of our search params is what we<em>return</em>from this function. Tweaking the<em>return type</em>is how we’ve been changing things.</p><p>But Router allows you to opt into another mode, where you can specify<em>both</em>a structure of incoming search params, with optional values,<em>as well as</em>the return type, which represents the validated, finalized type for the search params that will be<strong>used</strong>by your application code. Let’s see how.</p><p>First let’s specify two types for these search params</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">type</span> <span class="token class-name">SearchParams</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  page<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  search<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  tags<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> <span class="token class-name">SearchParamsInput</span> <span class="token operator">=</span> Partial<span class="token operator">&lt;</span><span class="token punctuation">{</span></span>
<span class="line">  page<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  search<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  tags<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now let’s pull in <code>SearchSchemaInput</code>:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> SearchSchemaInput <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-router&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>SearchSchemaInput</code>is how we signal to Router that we want to specify different search params for what we’ll<em>receive</em>compared to what we’ll<em>produce</em>. We do it by intersecting our desired input type with this type, like this:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token function">validateSearch</span><span class="token punctuation">(</span>search<span class="token operator">:</span> SearchParamsInput <span class="token operator">&amp;</span> SearchSchemaInput<span class="token punctuation">)</span><span class="token operator">:</span> SearchParams <span class="token punctuation">{</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now we perform the same original validation we had before, to produce real values, and that’s that. We can now browse to our page with a<code>&lt;Link&gt;</code>tag, and specify no search params at all, and it’ll accept it and not modify the URL, while still producing the same strongly-typed search param values as before.</p>`,41)),s("p",null,[n[185]||(n[185]=a("That said, when we")),n[186]||(n[186]=s("em",null,"update",-1)),n[187]||(n[187]=a("our URL, we can’t just “splat” all previous values, plus the value we’re setting, since those params will now have values, and therefore get updated into the URL. The GitHub repo has a branch called ")),s("a",U,[t(e,{icon:"fas fa-code-branch"}),n[181]||(n[181]=s("code",null,"feature/optional-search-params-v2",-1)),n[182]||(n[182]=a(" (")),t(e,{icon:"iconfont icon-github"}),n[183]||(n[183]=s("code",null,"arackaf/tanstack-router-routing-demo",-1)),n[184]||(n[184]=a(")"))]),n[188]||(n[188]=a(" showing this second approach."))]),n[219]||(n[219]=s("p",null,"Experiment and choose what works best for you and your use case.",-1)),n[220]||(n[220]=s("hr",null,null,-1)),n[221]||(n[221]=s("h2",{id:"wrapping-up",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#wrapping-up"},[s("span",null,"Wrapping up")])],-1)),n[222]||(n[222]=s("p",null,"TanStack Router is an incredibly exciting project. It’s a superbly-made, flexible client-side framework that promises fantastic server-side integration in the near future.",-1)),n[223]||(n[223]=s("p",null,"We’ve barely scratched the surface. We just covered the absolute basics of type-safe navigation, layouts, path params, and search params, but know there is much more to know, particularly around data loading and the upcoming server integration.",-1)),s("div",B,[n[189]||(n[189]=s("p",{class:"hint-container-title"},"Article Series",-1)),t(i,r(u({title:"Introducing TanStack Router",desc:"TanStack Router is a comprehensive JavaScript framework for client-side applications, emphasizing type-safe routing and navigation. It includes nested layouts and efficient data loading.",link:"/frontendmasters.com/introducing-tanstack-router.md",logo:"https://frontendmasters.com/favicon.ico",background:"rgba(188,75,52,0.2)"})),null,16),t(i,r(u({title:"Loading Data with TanStack Router: Getting Going",desc:"TanStack Router is one of the most exciting projects in the web development ecosystem right now, and it doesn’t get nearly enough attention. It’s a fully fledged client-side application framework that supports advanced routing, nested layouts, and hooks for loading data. Best of all, it does all of this with deep type safety. This post […]",link:"/frontendmasters.com/tanstack-router-data-loading-1.md",logo:"https://frontendmasters.com/favicon.ico",background:"rgba(188,75,52,0.2)"})),null,16),t(i,r(u({title:"Loading Data with TanStack Router: react-query",desc:"TanStack Query, or react-query, simplifies client-side data fetching with features like caching, automatic re-fetching, and error handling. It integrates smoothly with TanStack Router, allowing efficient prefetching and loading states using hooks like useSuspenseQuery. ",link:"/frontendmasters.com/tanstack-router-data-loading-2.md",logo:"https://frontendmasters.com/favicon.ico",background:"rgba(188,75,52,0.2)"})),null,16)]),v(" TODO: add ARTICLE CARD "),t(i,r(u({title:"Introducing TanStack Router",desc:"TanStack Router is a comprehensive JavaScript framework for client-side applications, emphasizing type-safe routing and navigation. It includes nested layouts and efficient data loading.",link:"https://chanhi2000.github.io/bookshelf/frontendmasters.com/introducing-tanstack-router.html",logo:"https://frontendmasters.com/favicon.ico",background:"rgba(188,75,52,0.2)"})),null,16)])}const F=g(b,[["render",C]]),O=JSON.parse('{"path":"/frontendmasters.com/introducing-tanstack-router.html","title":"Introducing TanStack Router","lang":"en-US","frontmatter":{"lang":"en-US","title":"Introducing TanStack Router","description":"Article(s) > Introducing TanStack Router","icon":"fa-brands fa-react","category":["Node.js","React.js","Article(s)"],"tag":["blog","frontendmasters.com","node","nodejs","node-js","react","reactjs","react-js"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Introducing TanStack Router\\",\\"image\\":[\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/09/tasks-page.jpg?resize=398%2C470&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/09/path-param-auto-complete.jpg?resize=1024%2C567&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/09/parath-param-typed.jpg?resize=1024%2C372&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/09/edit-task-without-tasks-layout.jpg?resize=722%2C390&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/09/pathless-layout.jpg?resize=694%2C432&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/09/directory-routing.jpg?resize=454%2C444&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/09/multiple-path-params.jpg?resize=1024%2C534&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/09/get-search-params.jpg?resize=1024%2C528&ssl=1\\"],\\"datePublished\\":\\"2024-09-13T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Adam Rackis\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/frontendmasters.com/introducing-tanstack-router.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"Introducing TanStack Router"}],["meta",{"property":"og:description","content":"Article(s) > Introducing TanStack Router"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/3821"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/3821"}],["meta",{"name":"twitter:image:alt","content":"Introducing TanStack Router"}],["meta",{"property":"article:author","content":"Adam Rackis"}],["meta",{"property":"article:tag","content":"react-js"}],["meta",{"property":"article:tag","content":"reactjs"}],["meta",{"property":"article:tag","content":"react"}],["meta",{"property":"article:tag","content":"node-js"}],["meta",{"property":"article:tag","content":"nodejs"}],["meta",{"property":"article:tag","content":"node"}],["meta",{"property":"article:tag","content":"frontendmasters.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2024-09-13T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Introducing TanStack Router"},{"property":"og:description","content":"Introducing TanStack Router"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/frontendmasters.com/introducing-tanstack-router.html"}]],"prev":"/programming/js-react/articles/README.md","date":"2024-09-13T00:00:00.000Z","isOriginal":false,"author":"Adam Rackis","cover":"https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/3821"},"git":{},"readingTime":{"minutes":16.82,"words":5046},"filePathRelative":"frontendmasters.com/introducing-tanstack-router.md","copyright":{"author":"Adam Rackis"}}');export{F as comp,O as data};
