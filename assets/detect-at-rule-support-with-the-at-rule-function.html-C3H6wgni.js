import{_ as g}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as h,d as s,f as n,b as i,a as b,t as w,n as u,g as d,w as r,e,r as a,o as k}from"./app-BItykJLQ.js";const v={},y={id:"frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´",tabindex:"-1"},S={class:"header-anchor",href:"#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"},T={class:"table-of-contents"},C={href:"https://github.com/w3c/csswg-drafts/issues/2463#issuecomment-1016720310",target:"_blank",rel:"noopener noreferrer"},x={href:"https://scroll-driven-animations.style/",target:"_blank",rel:"noopener noreferrer"},D={href:"https://github.com/w3c/csswg-drafts/issues/2463#issuecomment-1016720310",target:"_blank",rel:"noopener noreferrer"},A={href:"https://github.com/w3c/csswg-drafts/issues/6966",target:"_blank",rel:"noopener noreferrer"},B={href:"https://bugs.webkit.org/show_bug.cgi?id=235400",target:"_blank",rel:"noopener noreferrer"},F={href:"https://bugzilla.mozilla.org/show_bug.cgi?id=1751188",target:"_blank",rel:"noopener noreferrer"},I={href:"https://bugs.chromium.org/p/chromium/issues/detail?id=1289224",target:"_blank",rel:"noopener noreferrer"};function P(c,t){const p=a("VPCard"),l=a("router-link"),m=a("SiteInfo"),o=a("VPIcon"),f=a("RouteLink");return k(),h("div",null,[s("h1",y,[s("a",S,[s("span",null,w(c.$frontmatter.title)+" Í¥ÄÎ†®",1)])]),n(p,u(d({title:"CSS > Article(s)",desc:"Article(s)",link:"/programming/css/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",T,[s("ul",null,[s("li",null,[n(l,{to:"#the-problem"},{default:r(()=>[...t[0]||(t[0]=[e("The problem",-1)])]),_:1})]),s("li",null,[n(l,{to:"#the-solution"},{default:r(()=>[...t[1]||(t[1]=[e("The solution",-1)])]),_:1})]),s("li",null,[n(l,{to:"#the-solution-bis"},{default:r(()=>[...t[2]||(t[2]=[e("The solution, bis",-1)])]),_:1})]),s("li",null,[n(l,{to:"#browser-support"},{default:r(()=>[...t[3]||(t[3]=[e("Browser Support",-1)])]),_:1})])])]),t[51]||(t[51]=s("hr",null,null,-1)),n(m,{name:"The Future of CSS: Detect at-rule support with @supports at-rule(@keyword)",desc:"Using the at-rule() function we'll soon be able to detect support for at-rules and their descriptors.",url:"https://bram.us/bram.us/2022/01/20/detect-at-rule-support-with-the-at-rule-function/",logo:"https://bramu.us/favicon.ico",preview:"https://bram.us/wordpress/wp-content/uploads/2022/01/at-supports-at-rule.css.png"}),t[52]||(t[52]=s("figure",null,[s("img",{src:"https://bram.us/wordpress/wp-content/uploads/2022/01/at-supports-at-rule.css.png",alt:"",tabindex:"0",loading:"lazy"}),s("figcaption")],-1)),t[53]||(t[53]=s("p",null,[e("In CSS you can do feature detection using "),s("code",null,"@supports"),e(". With it you can detect support for property-value pairs and selectors. What currently isn‚Äôt possible though, is to detect support for certain at-rules (such as "),s("code",null,"@layer"),e(", "),s("code",null,"@scroll-timeline"),e(", etc.)")],-1)),s("p",null,[s("a",C,[t[4]||(t[4]=e("Hot off the press (",-1)),n(o,{icon:"iconfont icon-github"}),t[5]||(t[5]=s("code",null,"w3c/csswg-drafts",-1)),t[6]||(t[6]=e(")",-1))]),t[7]||(t[7]=e(" is a new CSS Working Group decision that defines the ",-1)),t[8]||(t[8]=s("code",null,"at-rule",-1)),t[9]||(t[9]=e(" function ‚Äî to be combined with ",-1)),t[10]||(t[10]=s("code",null,"@supports",-1)),t[11]||(t[11]=e(" ‚Äî which will allow just that.",-1))]),t[54]||(t[54]=s("hr",null,null,-1)),t[55]||(t[55]=s("h2",{id:"the-problem",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#the-problem"},[s("span",null,"The problem")])],-1)),s("p",null,[t[16]||(t[16]=e("The ",-1)),t[17]||(t[17]=s("code",null,"@scroll-timeline",-1)),t[18]||(t[18]=e(" at-rule mentioned in this post has been discontinued in favor of ",-1)),s("a",x,[n(o,{icon:"fas fa-globe"}),t[12]||(t[12]=e("scroll-driven animations with ",-1)),t[13]||(t[13]=s("code",null,"scroll()",-1)),t[14]||(t[14]=e(" and ",-1)),t[15]||(t[15]=s("code",null,"view()",-1))]),t[19]||(t[19]=e(". The problem laid out here still applies to other at-rules though. Think of feature detecting ",-1)),t[20]||(t[20]=s("code",null,"@property",-1)),t[21]||(t[21]=e(", ",-1)),t[22]||(t[22]=s("code",null,"@starting-style",-1)),t[23]||(t[23]=e(", ",-1)),t[24]||(t[24]=s("code",null,"@container",-1)),t[25]||(t[25]=e(", etc.",-1))]),t[56]||(t[56]=i(`<p>While working on [<strong>my articles and demos that use <code>@scroll-timeline</code></strong>](/bram.us/the-future-of-css-scroll-linked-animations-part-1.md, I ran into an issue: how do I feature detect support for this at-rule?</p><p>Thankfully I could use a workaround by checking for support of a ‚Äútelltale‚Äù property: <code>animation-timeline</code>: Browsers that have implemented <code>@scroll-timeline</code>, also have implemented the <code>animation-timeline</code> property. By checking for <code>animation-timeline</code>‚Äòs existence, we can feature detect support for <code>@scroll-timeline</code>.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">animation-timeline</span><span class="token punctuation">:</span> works<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">/* @scroll-timeline compatible code here */</span> </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3)),s("p",null,[t[27]||(t[27]=e("But detecting a telltale property isn‚Äôt always 100% accurate or possible. Take ",-1)),n(f,{to:"/bram.us/the-future-of-css-cascade-layers-css-at-layer.html"},{default:r(()=>[...t[26]||(t[26]=[s("strong",null,[e("the wonderful "),s("code",null,"@layer")],-1)])]),_:1}),t[28]||(t[28]=e(" for example: that one doesn‚Äôt come with a telltale property. How do we detect support for it?",-1))]),t[57]||(t[57]=s("p",null,"~",-1)),t[58]||(t[58]=s("hr",null,null,-1)),t[59]||(t[59]=s("h2",{id:"the-solution",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#the-solution"},[s("span",null,"The solution")])],-1)),s("p",null,[t[32]||(t[32]=e("To solve this, the CSS Working Group just ",-1)),s("a",D,[t[29]||(t[29]=e("decided (",-1)),n(o,{icon:"iconfont icon-github"}),t[30]||(t[30]=s("code",null,"w3c/csswg-drafts",-1)),t[31]||(t[31]=e(")",-1))]),t[33]||(t[33]=e(" to introduce a new function that be used in conjunction with ",-1)),t[34]||(t[34]=s("code",null,"@supports",-1)),t[35]||(t[35]=e(": ",-1)),t[36]||(t[36]=s("code",null,"at-rule()",-1)),t[37]||(t[37]=e(".",-1))]),t[60]||(t[60]=i(`<p>With it, we can feature detect at-rule support as follows:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@supports</span> <span class="token function">at-rule</span><span class="token punctuation">(</span>@foo<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">/* @foo is supported */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It‚Äôs also possible to detect support for certain descriptors. For <code>@scroll-timeline</code> this will come in handy, as the descriptors changed over time.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@supports</span> <span class="token function">at-rule</span><span class="token punctuation">(</span><span class="token atrule"><span class="token rule">@foo</span><span class="token punctuation">;</span></span></span> <span class="token selector">desc: val)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">/* @foo is supported. The descriptor \`desc\` with value \`val\` parses as part of that at-rule. */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Winging back to detect support for <code>@layer</code>, the CSS would look like this:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@supports</span> <span class="token function">at-rule</span><span class="token punctuation">(</span>@layer<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">/* @layer is supported */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="the-solution-bis" tabindex="-1"><a class="header-anchor" href="#the-solution-bis"><span>The solution, bis</span></a></h2>`,8)),s("p",null,[t[41]||(t[41]=e("Apart from the syntax above, there‚Äôs ",-1)),s("a",A,[t[38]||(t[38]=e("a follow-up issue (",-1)),n(o,{icon:"iconfont icon-github"}),t[39]||(t[39]=s("code",null,"w3c/csswg-drafts",-1)),t[40]||(t[40]=e(")",-1))]),t[42]||(t[42]=e(" that will allow you to pass in a full at-rule into ",-1)),t[43]||(t[43]=s("code",null,"at-rule()",-1)),t[44]||(t[44]=e(":",-1))]),t[61]||(t[61]=i(`<div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@supports</span> <span class="token function">at-rule</span><span class="token punctuation">(</span>@foo bar</span> <span class="token punctuation">{</span><span class="token property">baz</span><span class="token punctuation">:</span> qux<span class="token punctuation">}</span><span class="token selector">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">/* The entire at-rule with all its descriptors is supported. Unknown descriptors are ignored. */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that in this form you‚Äôll have to pass in a valid ‚Äî thus, complete ‚Äî at-rule.</p><hr><h2 id="browser-support" tabindex="-1"><a class="header-anchor" href="#browser-support"><span>Browser Support</span></a></h2><p>This is hot off the press. Currently, no browser supports this. I‚Äôve filed issues at all browser engines to add support for this:</p>`,5)),s("ul",null,[s("li",null,[t[46]||(t[46]=e("WebKit/Safari: ",-1)),s("a",B,[n(o,{icon:"fa-brands fa-safari"}),t[45]||(t[45]=e("Issue #235400",-1))])]),s("li",null,[t[48]||(t[48]=e("Gecko/Firefox: ",-1)),s("a",F,[n(o,{icon:"fa-brands fa-firefox"}),t[47]||(t[47]=e("Issue #1751188",-1))])]),s("li",null,[t[50]||(t[50]=e("Blink/Chromium: ",-1)),s("a",I,[n(o,{icon:"fa-brands fa-chrome"}),t[49]||(t[49]=e("Issue #1289224",-1))])])]),t[62]||(t[62]=s("div",{class:"hint-container note"},[s("p",{class:"hint-container-title"},"UPDATE 2024.10.04"),s("p",null,"The Chromium bug got assigned ‚Ä¶ expect this to be worked on in Q4 üôÇ")],-1)),t[63]||(t[63]=s("p",null,"To help spread the contents of this post, feel free to retweet the announcement tweet:",-1)),b(" TODO: add ARTICLE CARD "),n(p,u(d({title:"The Future of CSS: Detect at-rule support with @supports at-rule(@keyword)",desc:"Using the at-rule() function we'll soon be able to detect support for at-rules and their descriptors.",link:"https://chanhi2000.github.io/bookshelf/bram.us/detect-at-rule-support-with-the-at-rule-function.html",logo:"https://bramu.us/favicon.ico",background:"rgba(17,17,17,0.2)"})),null,16)])}const V=g(v,[["render",P]]),W=JSON.parse('{"path":"/bram.us/detect-at-rule-support-with-the-at-rule-function.html","title":"The Future of CSS: Detect at-rule support with @supports at-rule(@keyword)","lang":"en-US","frontmatter":{"lang":"en-US","title":"The Future of CSS: Detect at-rule support with @supports at-rule(@keyword)","description":"Article(s) > The Future of CSS: Detect at-rule support with @supports at-rule(@keyword)","icon":"fa-brands fa-css3-alt","category":["CSS","Article(s)"],"tag":["blog","bram.us","css"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"The Future of CSS: Detect at-rule support with @supports at-rule(@keyword)\\",\\"image\\":[\\"https://bram.us/wordpress/wp-content/uploads/2022/01/at-supports-at-rule.css.png\\"],\\"datePublished\\":\\"2022-01-20T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Bramus!\\",\\"url\\":\\"https://bram.us/author/bramus/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/bram.us/detect-at-rule-support-with-the-at-rule-function.html"}],["meta",{"property":"og:site_name","content":"üìöBookshelf"}],["meta",{"property":"og:title","content":"The Future of CSS: Detect at-rule support with @supports at-rule(@keyword)"}],["meta",{"property":"og:description","content":"Article(s) > The Future of CSS: Detect at-rule support with @supports at-rule(@keyword)"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://bram.us/wordpress/wp-content/uploads/2022/01/at-supports-at-rule.css.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://bram.us/wordpress/wp-content/uploads/2022/01/at-supports-at-rule.css.png"}],["meta",{"name":"twitter:image:alt","content":"The Future of CSS: Detect at-rule support with @supports at-rule(@keyword)"}],["meta",{"property":"article:author","content":"Bramus!"}],["meta",{"property":"article:tag","content":"css"}],["meta",{"property":"article:tag","content":"bram.us"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2022-01-20T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > The Future of CSS: Detect at-rule support with @supports at-rule(@keyword)"},{"property":"og:description","content":"The Future of CSS: Detect at-rule support with @supports at-rule(@keyword)"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/bram.us/detect-at-rule-support-with-the-at-rule-function.html"}]],"prev":"/programming/css/articles/README.md","date":"2022-01-20T00:00:00.000Z","isOriginal":false,"author":[{"name":"Bramus!","url":"https://bram.us/author/bramus/"}],"cover":"https://bram.us/wordpress/wp-content/uploads/2022/01/at-supports-at-rule.css.png"},"git":{},"readingTime":{"minutes":2.83,"words":849},"filePathRelative":"bram.us/detect-at-rule-support-with-the-at-rule-function.md","copyright":{"author":"Bramus!"}}');export{V as comp,W as data};
