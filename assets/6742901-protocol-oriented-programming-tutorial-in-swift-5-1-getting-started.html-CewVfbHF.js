import{_ as u}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as m,d as s,f as a,b as l,t as k,n as h,g,w as o,e,r as p,o as v}from"./app-BVguHYKu.js";const f={},y={id:"frontmatter-title-관련",tabindex:"-1"},b={class:"header-anchor",href:"#frontmatter-title-관련"},w={class:"table-of-contents"},S={href:"https://koenig-media.raywenderlich.com/uploads/2019/12/Protocol_Oriented_Programming_Materials-1.zip",target:"_blank",rel:"noopener noreferrer"};function x(c,n){const r=p("VPCard"),t=p("router-link"),d=p("SiteInfo"),i=p("VPIcon");return v(),m("div",null,[s("h1",y,[s("a",b,[s("span",null,k(c.$frontmatter.title)+" 관련",1)])]),a(r,h(g({title:"Swift > Article(s)",desc:"Article(s)",link:"/programming/swift/articles/README.md",logo:"https://chanhi2000.github.io/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",w,[s("ul",null,[s("li",null,[a(t,{to:"#getting-started"},{default:o(()=>n[0]||(n[0]=[e("Getting Started")])),_:1,__:[0]})]),s("li",null,[a(t,{to:"#hatching-the-egg"},{default:o(()=>n[1]||(n[1]=[e("Hatching the Egg")])),_:1,__:[1]})]),s("li",null,[a(t,{to:"#defining-protocol-conforming-types"},{default:o(()=>n[2]||(n[2]=[e("Defining Protocol-Conforming Types")])),_:1,__:[2]})]),s("li",null,[a(t,{to:"#extending-protocols-with-default-implementations"},{default:o(()=>n[3]||(n[3]=[e("Extending Protocols With Default Implementations")])),_:1,__:[3]})]),s("li",null,[a(t,{to:"#enums-can-play-too"},{default:o(()=>n[4]||(n[4]=[e("Enums Can Play, Too")])),_:1,__:[4]})]),s("li",null,[a(t,{to:"#overriding-default-behavior"},{default:o(()=>n[5]||(n[5]=[e("Overriding Default Behavior")])),_:1,__:[5]})]),s("li",null,[a(t,{to:"#extending-protocols"},{default:o(()=>n[6]||(n[6]=[e("Extending Protocols")])),_:1,__:[6]})]),s("li",null,[a(t,{to:"#effects-on-the-swift-standard-library"},{default:o(()=>n[7]||(n[7]=[e("Effects on the Swift Standard Library")])),_:1,__:[7]})]),s("li",null,[a(t,{to:"#off-to-the-races"},{default:o(()=>n[8]||(n[8]=[e("Off to the Races")])),_:1,__:[8]}),s("ul",null,[s("li",null,[a(t,{to:"#bringing-it-all-together"},{default:o(()=>n[9]||(n[9]=[e("Bringing It All Together")])),_:1,__:[9]})]),s("li",null,[a(t,{to:"#top-speed"},{default:o(()=>n[10]||(n[10]=[e("Top Speed")])),_:1,__:[10]})]),s("li",null,[a(t,{to:"#making-it-more-generic"},{default:o(()=>n[11]||(n[11]=[e("Making It More Generic")])),_:1,__:[11]})]),s("li",null,[a(t,{to:"#making-it-more-swifty"},{default:o(()=>n[12]||(n[12]=[e("Making It More Swifty")])),_:1,__:[12]})])])]),s("li",null,[a(t,{to:"#protocol-comparators"},{default:o(()=>n[13]||(n[13]=[e("Protocol Comparators")])),_:1,__:[13]})]),s("li",null,[a(t,{to:"#mutating-functions"},{default:o(()=>n[14]||(n[14]=[e("Mutating Functions")])),_:1,__:[14]})]),s("li",null,[a(t,{to:"#where-to-go-from-here"},{default:o(()=>n[15]||(n[15]=[e("Where to Go From Here?")])),_:1,__:[15]})])])]),n[22]||(n[22]=s("hr",null,null,-1)),a(d,{name:"Protocol-Oriented Programming Tutorial in Swift 5.1: Getting Started",desc:"In this protocol-oriented programming tutorial, you’ll learn about extensions, default implementations and other techniques to add abstraction to your code.",url:"https://kodeco.com/6742901-protocol-oriented-programming-tutorial-in-swift-5-1-getting-started",logo:"https://assets.carolus.kodeco.com/assets/murakami/category-icons/category-language-ios-c8cae19f3d83ea7062fbae593cd0bb3c096e9788cad03bb69b11c1e042a6bb47.svg",preview:"https://koenig-media.raywenderlich.com/uploads/2019/12/ProtocolOrientedProgramming-twitter.png"}),n[23]||(n[23]=l('<div class="hint-container note"><p class="hint-container-title">Update</p><p>Andy Pereira updated this tutorial for Swift 5.1 and Xcode 11. Erik Kerber wrote the original.</p></div><p><strong>Protocols</strong> are a fundamental feature of Swift. They play a leading role in the structure of the Swift standard library and are a common method of abstraction. They provide a similar experience to interfaces that some other languages have.</p><p>This tutorial will introduce you to a software engineering practice called <strong>protocol-oriented programming</strong>, which has become somewhat a fundamental in Swift. It really is something you need to grasp if you’re learning Swift!</p><p>In this tutorial, you’ll learn about:</p><ul><li>The difference between object-oriented and protocol-oriented programming.</li><li>Protocols with default implementations.</li><li>Extending the Swift standard library.</li><li>Further extending protocols with generics.</li></ul><p>What are you waiting for? Time to start your Swift engines!</p><div class="hint-container tip"><p class="hint-container-title">Note</p><p>This tutorial assumes you know the basics of Swift development and more advanced topics like generics. If you are new to Swift development, check <a href="https://www.raywenderlich.com/6338-swift-tutorial-part-1-expressions-variables-and-constants" target="_blank" rel="noopener noreferrer">out Swift Tutorial for Beginners</a> and <a href="https://www.raywenderlich.com/3535703-swift-generics-tutorial-getting-started" target="_blank" rel="noopener noreferrer">Swift Generics Tutorial: Getting Started</a> beforehand.</p></div><hr><h2 id="getting-started" tabindex="-1"><a class="header-anchor" href="#getting-started"><span>Getting Started</span></a></h2><p>Imagine you’re developing a racing video game. You want players to be able to drive cars, ride motorcycles and pilot planes. They can even ride different birds — because it’s a video game — and you can drive whatever you want! The key here is that there are lots of different “things” that can be driven or piloted.</p><p>A common approach for this type of app is <a href="https://www.raywenderlich.com/81952/intro-object-oriented-design-swift-part-1" target="_blank" rel="noopener noreferrer">object-oriented programming</a>, where you can encapsulate all of the logic inside base classes that other classes then inherit from. The base classes would have the “drive” and “pilot” logic in them.</p><p>You start programming your game by creating classes for each vehicle. Put a pin in the bird concept for now. You’ll work on that later.</p><p>As you code, you notice that <code>Car</code> and <code>Motorcycle</code> share some functionality, so you create a base class called <code>MotorVehicle</code> and add them to it. <code>Car</code> and <code>Motorcycle</code> then inherit from <code>MotorVehicle</code>. You also design a base class called <code>Aircraft</code> that <code>Plane</code> inherits from.</p><p>You think, “This is going great.” But wait! Your racing game is set in the year 30XX, and some cars can fly.</p><p>Now, you face a predicament. Swift doesn’t support multiple inheritance. How can your flying cars inherit from both <code>MotorVehicle</code> and <code>Aircraft</code>? Do you create another base class that merges the two functionalities? Probably not, since there’s no clean and easy way to do this.</p><p>Who will save your racing game from this disastrous dilemma? <strong>Protocol-oriented programming</strong> to the rescue!</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2019/12/mascot_swifty-superhero-blue-500x500.png" alt="Our hero, protocol-oriented programming Swift, flying to the rescue" tabindex="0" loading="lazy"><figcaption>Our hero, protocol-oriented programming Swift, flying to the rescue</figcaption></figure><p>Why Protocol-Oriented Programming?</p><hr><h2 id="hatching-the-egg" tabindex="-1"><a class="header-anchor" href="#hatching-the-egg"><span>Hatching the Egg</span></a></h2>',20)),s("p",null,[n[16]||(n[16]=e("Begin by opening Xcode and then creating a new playground named ")),a(i,{icon:"fa-brands fa-swift"}),n[17]||(n[17]=s("code",null,"SwiftProtocols.playground",-1)),n[18]||(n[18]=e(". Then add this code to it:"))]),n[24]||(n[24]=l(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">protocol</span> <span class="token class-name">Bird</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">var</span> canFly<span class="token punctuation">:</span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">protocol</span> <span class="token class-name">Flyable</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> airspeedVelocity<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Build the playground with <kbd>Command</kbd>+<kbd>Shift</kbd>+<kbd>Return</kbd> to make sure that it compiles properly.</p><p>This code defines a simple protocol, <code>Bird</code>, with properties <code>name</code> and <code>canFly</code>. It then defines a protocol called <code>Flyable</code>, which has the property <code>airspeedVelocity</code>.</p><p>In the pre-protocol days of yore, developers would start with <code>Flyable</code> as a base class and then rely on object inheritance to define <code>Bird</code> and any other things that fly.</p><p>But in protocol-oriented programming, everything starts as a protocol. This technique allows you to encapsulate the functional concept without needing a base class.</p><p>As you’re about to see, this makes the entire system much more flexible when defining types.</p><hr><h2 id="defining-protocol-conforming-types" tabindex="-1"><a class="header-anchor" href="#defining-protocol-conforming-types"><span>Defining Protocol-Conforming Types</span></a></h2><p>Start by adding the following <code>struct</code> definition to the bottom of the playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">struct</span> <span class="token class-name">FlappyBird</span><span class="token punctuation">:</span> <span class="token class-name">Bird</span><span class="token punctuation">,</span> <span class="token class-name">Flyable</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">  <span class="token keyword">let</span> flappyAmplitude<span class="token punctuation">:</span> <span class="token class-name">Double</span></span>
<span class="line">  <span class="token keyword">let</span> flappyFrequency<span class="token punctuation">:</span> <span class="token class-name">Double</span></span>
<span class="line">  <span class="token keyword">let</span> canFly <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">var</span> airspeedVelocity<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token number">3</span> <span class="token operator">*</span> flappyFrequency <span class="token operator">*</span> flappyAmplitude</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This code defines a new <code>struct</code> named <code>FlappyBird</code> that conforms to both the <code>Bird</code> and <code>Flyable</code> protocols. Its <code>airspeedVelocity</code> is a computed property comprising of <code>flappyFrequency</code> and <code>flappyAmplitude</code>. Being flappy, it returns <code>true</code> for <code>canFly</code>.</p><p>Next, add the following two <code>struct</code> definitions to the bottom of the playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">struct</span> <span class="token class-name">Penguin</span><span class="token punctuation">:</span> <span class="token class-name">Bird</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">  <span class="token keyword">let</span> canFly <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">struct</span> <span class="token class-name">SwiftBird</span><span class="token punctuation">:</span> <span class="token class-name">Bird</span><span class="token punctuation">,</span> <span class="token class-name">Flyable</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span> <span class="token string-literal"><span class="token string">&quot;Swift </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">version</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">let</span> canFly <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token keyword">let</span> version<span class="token punctuation">:</span> <span class="token class-name">Double</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">var</span> speedFactor <span class="token operator">=</span> <span class="token number">1000.0</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">init</span><span class="token punctuation">(</span>version<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">self</span><span class="token punctuation">.</span>version <span class="token operator">=</span> version</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// Swift is FASTER with each version!</span></span>
<span class="line">  <span class="token keyword">var</span> airspeedVelocity<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span></span>
<span class="line">    version <span class="token operator">*</span> speedFactor</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>A <code>Penguin</code> is a <code>Bird</code>, but it cannot fly. Good thing you didn’t take the inheritance approach and make all birds <code>Flyable</code>!</p><p>Using protocols, you can define functional components and have any relevant object conform to them.</p><p>You then declare <code>SwiftBird</code>, but in our game there are different versions of <code>SwiftBird</code>. The higher the <code>version</code> property is, the faster its <code>airspeedVelocity</code> as defined by the computed property.</p><p>However, you can see there are redundancies. Every type of <code>Bird</code> has to declare whether it <code>canFly</code> or not — even though a notion of <code>Flyable</code> already exists in your system. It’s almost like you need a way to define default implementations of protocol methods. Well, that’s where protocol extensions come in.</p><hr><h2 id="extending-protocols-with-default-implementations" tabindex="-1"><a class="header-anchor" href="#extending-protocols-with-default-implementations"><span>Extending Protocols With Default Implementations</span></a></h2><p>Protocol extensions allow you to define a protocol’s default behavior. To implement your first one, insert the following just below the <code>Bird</code> protocol definition:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">extension</span> <span class="token class-name">Bird</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Flyable birds can fly!</span></span>
<span class="line">  <span class="token keyword">var</span> canFly<span class="token punctuation">:</span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span> <span class="token keyword">self</span> <span class="token keyword">is</span> <span class="token class-name">Flyable</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This code defines an extension on <code>Bird</code>. It sets the default behavior for <code>canFly</code> to return true whenever the type conforms to the Flyable protocol. In other words, any <code>Flyable</code> bird no longer needs to explicitly declare it <code>canFly</code>. It will simply fly, as most birds do.</p><p>Now delete the <code>let canFly = ...</code> from <code>FlappyBird</code>, <code>Penguin</code> and <code>SwiftBird</code>. Build the playground again. You’ll notice that the playground still builds successfully because the protocol extension now handles that requirement.</p><hr><h2 id="enums-can-play-too" tabindex="-1"><a class="header-anchor" href="#enums-can-play-too"><span>Enums Can Play, Too</span></a></h2><p><code>Enum</code> types in Swift are much more powerful than enums from C and C++. They adopt many features that only <code>class</code> or <code>struct</code> types traditionally support, meaning they can conform to protocols.</p><p>Add the following <code>enum</code> definition to the end of the playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">enum</span> <span class="token class-name">UnladenSwallow</span><span class="token punctuation">:</span> <span class="token class-name">Bird</span><span class="token punctuation">,</span> <span class="token class-name">Flyable</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> african</span>
<span class="line">  <span class="token keyword">case</span> european</span>
<span class="line">  <span class="token keyword">case</span> unknown</span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">switch</span> <span class="token keyword">self</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">.</span>african<span class="token punctuation">:</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">&quot;African&quot;</span></span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">.</span>european<span class="token punctuation">:</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">&quot;European&quot;</span></span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">.</span>unknown<span class="token punctuation">:</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">&quot;What do you mean? African or European?&quot;</span></span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">var</span> airspeedVelocity<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">switch</span> <span class="token keyword">self</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">.</span>african<span class="token punctuation">:</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token number">10.0</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">.</span>european<span class="token punctuation">:</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token number">9.9</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">.</span>unknown<span class="token punctuation">:</span></span>
<span class="line">      <span class="token function">fatalError</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;You are thrown from the bridge of death!&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>By defining the correct properties, <code>UnladenSwallow</code> conforms to the two protocols <code>Bird</code> and <code>Flyable</code>. Because it’s such a conformist, it also enjoys default implementation for <code>canFly</code>.</p><p>Did you really think a tutorial involving <code>airspeedVelocity</code> could pass up a Monty Python reference?</p><hr><h2 id="overriding-default-behavior" tabindex="-1"><a class="header-anchor" href="#overriding-default-behavior"><span>Overriding Default Behavior</span></a></h2><p>Your <code>UnladenSwallow</code> type automatically received an implementation for <code>canFly</code> by conforming to the <code>Bird</code> protocol. However, you want <code>UnladenSwallow.unknown</code> to return <code>false</code> for <code>canFly</code>.</p><p>Can you override the default implementation? You bet. Go back to the end of your playground and add some new code:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">extension</span> <span class="token class-name">UnladenSwallow</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> canFly<span class="token punctuation">:</span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">self</span> <span class="token operator">!=</span> <span class="token punctuation">.</span>unknown</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now only <code>.african</code> and <code>.european</code> will return <code>true</code> for <code>canFly</code>. Try it out! Add the following code at the end of your playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token class-name">UnladenSwallow</span><span class="token punctuation">.</span>unknown<span class="token punctuation">.</span>canFly         <span class="token comment">// false</span></span>
<span class="line"><span class="token class-name">UnladenSwallow</span><span class="token punctuation">.</span>african<span class="token punctuation">.</span>canFly         <span class="token comment">// true</span></span>
<span class="line"><span class="token class-name">Penguin</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;King Penguin&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>canFly  <span class="token comment">// false</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Build the playground and you’ll notice it shows the values as given in the comments above.</p><p>In this way, you override properties and methods much like you can with <strong>virtual methods</strong> in object-oriented programming.</p><hr><h2 id="extending-protocols" tabindex="-1"><a class="header-anchor" href="#extending-protocols"><span>Extending Protocols</span></a></h2><p>You can also conform your own protocols to other protocols from the Swift standard library and define <em>default</em> behaviors. Replace your Bird protocol declaration with the following code:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">protocol</span> <span class="token class-name">Bird</span><span class="token punctuation">:</span> <span class="token class-name">CustomStringConvertible</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">var</span> canFly<span class="token punctuation">:</span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">extension</span> <span class="token class-name">CustomStringConvertible</span> <span class="token keyword">where</span> <span class="token keyword">Self</span><span class="token punctuation">:</span> <span class="token class-name">Bird</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> description<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span></span>
<span class="line">    canFly <span class="token operator">?</span> <span class="token string-literal"><span class="token string">&quot;I can fly&quot;</span></span> <span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Guess I&#39;ll just sit here :[&quot;</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Conforming to <code>CustomStringConvertible</code> means your type needs to have a <code>description</code> property so it be converted to a <code>String</code> automatically when needed. Instead of adding this property to every current and future <code>Bird</code> type, you’ve defined a protocol extension that <code>CustomStringConvertible</code> will only associate with types of <code>Bird</code>.</p><p>Try it out by entering the following at the bottom of the playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token class-name">UnladenSwallow</span><span class="token punctuation">.</span>african</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Build the playground and you should see “<code>I can fly</code>” appear in the assistant editor. Congratulations! You’ve extended your protocol.</p><hr><h2 id="effects-on-the-swift-standard-library" tabindex="-1"><a class="header-anchor" href="#effects-on-the-swift-standard-library"><span>Effects on the Swift Standard Library</span></a></h2><p>Protocol extensions can’t grip a one-pound coconut by the husk, but as you’ve seen, they can provide an efficient method for customizing and extending the capabilities of named types. The Swift team also employed protocols to improve the Swift standard library.</p><p>Add this code to the end of your playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">let</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">let</span> slice <span class="token operator">=</span> numbers<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">...</span><span class="token number">3</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">let</span> reversedSlice <span class="token operator">=</span> slice<span class="token punctuation">.</span><span class="token function">reversed</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> answer <span class="token operator">=</span> reversedSlice<span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token short-argument">$0</span> <span class="token operator">*</span> <span class="token number">10</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>answer<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You may be able to guess the printed answer, but what might surprise you are the types involved.</p><p>For example, <code>slice</code> is not an <code>Array&lt;Int&gt;</code> but an <code>ArraySlice&lt;Int&gt;</code>. This special <strong>wrapper type</strong> acts as a view into the original array, offering a fast and efficient way to perform operations on sections of a larger array. Similarly, <code>reversedSlice</code> is a <code>ReversedCollection&lt;ArraySlice&lt;Int&gt;&gt;</code>, another wrapper type with a view into the original array.</p><p>Fortunately, the wizards developing the Swift standard library defined the map function as an extension to the <code>Sequence</code> protocol, which all <code>Collection</code> types conform to. This lets you call <code>map</code> on <code>Array</code> as easily as on <code>ReversedCollection</code> and not notice the difference. You’ll borrow this important design pattern shortly.</p><hr><h2 id="off-to-the-races" tabindex="-1"><a class="header-anchor" href="#off-to-the-races"><span>Off to the Races</span></a></h2><p>So far, you’ve defined several types that conform to <code>Bird</code>. You’ll now add something completely different at the end of your playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">class</span> <span class="token class-name">Motorcycle</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">init</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">self</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name</span>
<span class="line">    speed <span class="token operator">=</span> <span class="token number">200.0</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">  <span class="token keyword">var</span> speed<span class="token punctuation">:</span> <span class="token class-name">Double</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This class has nothing to do with birds or flying. You just want to race motorcycles against penguins. It’s time to bring these wacky racers to the starting line.</p><hr><h3 id="bringing-it-all-together" tabindex="-1"><a class="header-anchor" href="#bringing-it-all-together"><span>Bringing It All Together</span></a></h3><p>To unify these disparate types, you need a common protocol for racing. You can manage this without even touching the original model definitions thanks to a fancy idea called <strong>retroactive modeling</strong>. Just add the following to your playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token comment">// 1</span></span>
<span class="line"><span class="token keyword">protocol</span> <span class="token class-name">Racer</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> speed<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span>  <span class="token comment">// speed is the only thing racers care about</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2</span></span>
<span class="line"><span class="token keyword">extension</span> <span class="token class-name">FlappyBird</span><span class="token punctuation">:</span> <span class="token class-name">Racer</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> speed<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span></span>
<span class="line">    airspeedVelocity</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">extension</span> <span class="token class-name">SwiftBird</span><span class="token punctuation">:</span> <span class="token class-name">Racer</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> speed<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span></span>
<span class="line">    airspeedVelocity</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">extension</span> <span class="token class-name">Penguin</span><span class="token punctuation">:</span> <span class="token class-name">Racer</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> speed<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token number">42</span>  <span class="token comment">// full waddle speed</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">extension</span> <span class="token class-name">UnladenSwallow</span><span class="token punctuation">:</span> <span class="token class-name">Racer</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> speed<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span></span>
<span class="line">    canFly <span class="token operator">?</span> airspeedVelocity <span class="token punctuation">:</span> <span class="token number">0.0</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">extension</span> <span class="token class-name">Motorcycle</span><span class="token punctuation">:</span> <span class="token class-name">Racer</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3</span></span>
<span class="line"><span class="token keyword">let</span> racers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Racer</span><span class="token punctuation">]</span> <span class="token operator">=</span></span>
<span class="line">  <span class="token punctuation">[</span><span class="token class-name">UnladenSwallow</span><span class="token punctuation">.</span>african<span class="token punctuation">,</span></span>
<span class="line">   <span class="token class-name">UnladenSwallow</span><span class="token punctuation">.</span>european<span class="token punctuation">,</span></span>
<span class="line">   <span class="token class-name">UnladenSwallow</span><span class="token punctuation">.</span>unknown<span class="token punctuation">,</span></span>
<span class="line">   <span class="token class-name">Penguin</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;King Penguin&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token class-name">SwiftBird</span><span class="token punctuation">(</span>version<span class="token punctuation">:</span> <span class="token number">5.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token class-name">FlappyBird</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Felipe&quot;</span></span><span class="token punctuation">,</span> flappyAmplitude<span class="token punctuation">:</span> <span class="token number">3.0</span><span class="token punctuation">,</span> flappyFrequency<span class="token punctuation">:</span> <span class="token number">20.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token class-name">Motorcycle</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Giacomo&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here’s what this does:</p><ol><li>First, define the protocol <code>Racer</code>. This protocol defines anything that can be raced in your game.</li><li>Then, conform everything to <code>Racer</code> so that all our existing types can be raced. Some types, such as <code>Motorcycle</code>, conform trivially. Others, such as <code>UnladenSwallow</code>, need a bit more logic. Either way, when you’re done you have a bunch of conforming <code>Racer</code> types.</li><li>With all of the types at the starting line, you now create an <code>Array&lt;Racer&gt;</code> which holds an instance of each of the types you’ve created.</li></ol><p>Build the playground to check everything compiles.</p><h3 id="top-speed" tabindex="-1"><a class="header-anchor" href="#top-speed"><span>Top Speed</span></a></h3><p>It’s time to write a function that determines the top speed of the racers. Add the following code to the end of your playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">topSpeed</span><span class="token punctuation">(</span>of racers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Racer</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span></span>
<span class="line">  racers<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>by<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span>speed <span class="token operator">&lt;</span> <span class="token short-argument">$1</span><span class="token punctuation">.</span>speed <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span>speed <span class="token operator">??</span> <span class="token number">0.0</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token function">topSpeed</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> racers<span class="token punctuation">)</span> <span class="token comment">// 5100</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This function uses the Swift standard library function <code>max</code> to find the racer with the highest speed and return it. It returns 0.0 if the user passes in an empty <code>Array</code> in for <code>racers</code>.</p><p>Build the playground and you&#39;ll see that the max speed of the racers you created earlier is indeed <code>5100</code>.</p><h3 id="making-it-more-generic" tabindex="-1"><a class="header-anchor" href="#making-it-more-generic"><span>Making It More Generic</span></a></h3><p>Suppose <code>Racers</code> is rather large, and you only want to find the top speed for a subset of the participants. The solution is to alter <code>topSpeed(of:)</code> to take anything that&#39;s a <code>Sequence</code> instead of the concrete <code>Array</code>.</p><p>Replace your existing implementation of <code>topSpeed(of:)</code> with the following function:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token comment">// 1</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">topSpeed</span><span class="token operator">&lt;</span><span class="token class-name">RacersType</span><span class="token punctuation">:</span> <span class="token class-name">Sequence</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>of racers<span class="token punctuation">:</span> <span class="token class-name">RacersType</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Double</span></span>
<span class="line">    <span class="token comment">/*2*/</span> <span class="token keyword">where</span> <span class="token class-name">RacersType</span><span class="token punctuation">.</span><span class="token class-name">Iterator</span><span class="token punctuation">.</span><span class="token class-name">Element</span> <span class="token operator">==</span> <span class="token class-name">Racer</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 3</span></span>
<span class="line">  racers<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>by<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span>speed <span class="token operator">&lt;</span> <span class="token short-argument">$1</span><span class="token punctuation">.</span>speed <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span>speed <span class="token operator">??</span> <span class="token number">0.0</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This one may look a bit scary, but here&#39;s how it breaks down:</p><ol><li><code>RacersType</code> is the generic type for this function. It can be any type that conforms to the Swift standard library&#39;s <code>Sequence</code> protocol.</li><li>The where clause specifies that the <code>Element</code> type of the <code>Sequence</code> must conform to your <code>Racer</code> protocol to use this function.</li><li>The actual function body is the same as before.</li></ol><p>Now add the following code to the bottom of your playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token function">topSpeed</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> racers<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">...</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 42</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Build the playground and you&#39;ll see an answer of 42 as the output. The function now works for any <code>Sequence</code> type including <code>ArraySlice</code>.</p><h3 id="making-it-more-swifty" tabindex="-1"><a class="header-anchor" href="#making-it-more-swifty"><span>Making It More Swifty</span></a></h3><p>Here&#39;s a secret: You can do even better. Add this at the end of your playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">extension</span> <span class="token class-name">Sequence</span> <span class="token keyword">where</span> <span class="token class-name">Iterator</span><span class="token punctuation">.</span><span class="token class-name">Element</span> <span class="token operator">==</span> <span class="token class-name">Racer</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">func</span> <span class="token function-definition function">topSpeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>by<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span>speed <span class="token operator">&lt;</span> <span class="token short-argument">$1</span><span class="token punctuation">.</span>speed <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span>speed <span class="token operator">??</span> <span class="token number">0.0</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">racers<span class="token punctuation">.</span><span class="token function">topSpeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">// 5100</span></span>
<span class="line">racers<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">...</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">topSpeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 42</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Borrowing from the Swift standard library playbook, you&#39;ve now extended <code>Sequence</code> itself to have a <code>topSpeed()</code> function. The function is easily discoverable and only applies when you are dealing with a <code>Sequence</code> of <code>Racer</code> types.</p><hr><h2 id="protocol-comparators" tabindex="-1"><a class="header-anchor" href="#protocol-comparators"><span>Protocol Comparators</span></a></h2><p>Another feature of Swift protocols is how you denote operator requirements such as equality of objects for <code>==</code> or how to compare objects for <code>&gt;</code> and <code>&lt;</code>. You know the deal — add the following code to the bottom of your playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">protocol</span> <span class="token class-name">Score</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> value<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">struct</span> <span class="token class-name">RacingScore</span><span class="token punctuation">:</span> <span class="token class-name">Score</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> value<span class="token punctuation">:</span> <span class="token class-name">Int</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Having a <code>Score</code> protocol means you can write code that treats all scores the same way. But by having different concrete types, such as <code>RacingScore</code>, you won&#39;t mix up these scores with style scores or cuteness scores. Thanks, compiler!</p><p>You want scores to be comparable so you can tell who has the highest score. Before Swift 3, developers needed to add global operator functions to conform to these protocols. Today, you can define these static methods as part of the model. Do so by replacing the definition of <code>Score</code> and <code>RacingScore</code> with the following:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">protocol</span> <span class="token class-name">Score</span><span class="token punctuation">:</span> <span class="token class-name">Comparable</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> value<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">struct</span> <span class="token class-name">RacingScore</span><span class="token punctuation">:</span> <span class="token class-name">Score</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> value<span class="token punctuation">:</span> <span class="token class-name">Int</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span>lhs<span class="token punctuation">:</span> <span class="token class-name">RacingScore</span><span class="token punctuation">,</span> rhs<span class="token punctuation">:</span> <span class="token class-name">RacingScore</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span></span>
<span class="line">    lhs<span class="token punctuation">.</span>value <span class="token operator">&lt;</span> rhs<span class="token punctuation">.</span>value</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Nice! You&#39;ve encapsulated all of the logic for <code>RacingScore</code> in one place. <code>Comparable</code> only requires you to provide an implementation for the less-than operator. The rest of the operators for comparison, like greater-than, have default implementations provided by the Swift standard library based on the less-than operator.</p><p>Test your newfound operator skills with the following line of code at the bottom of your playground:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token class-name">RacingScore</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token number">150</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token class-name">RacingScore</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token number">130</span><span class="token punctuation">)</span> <span class="token comment">// true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Build the playground and you&#39;ll notice that the answer is <code>true</code> as expected. You can now compare scores!</p><hr><h2 id="mutating-functions" tabindex="-1"><a class="header-anchor" href="#mutating-functions"><span>Mutating Functions</span></a></h2><p>So far, every example you&#39;ve implemented has demonstrated how to add functionality. But what if you want to have a protocol define something that changes an aspect of your object? You can do this by using <strong>mutating methods</strong> in your protocol.</p><p>At the bottom of the playground, add the following new protocol:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">protocol</span> <span class="token class-name">Cheat</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">boost</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> power<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This defines a protocol that gives your type the ability to cheat. How? By adding a boost to anything you feel is appropriate.</p><p>Next, create an extension on <code>SwiftBird</code> that conforms to <code>Cheat</code> with the following code:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">extension</span> <span class="token class-name">SwiftBird</span><span class="token punctuation">:</span> <span class="token class-name">Cheat</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">boost</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> power<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    speedFactor <span class="token operator">+=</span> power</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here, you implement <code>boost(_:)</code> and make <code>speedFactor</code> increase by the <code>power</code> passed in. You add the <code>mutating</code> keyword to let the <code>struct</code> know one of its values will change within this function.</p><p>Add the following code to the playground to see how this works:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">var</span> swiftBird <span class="token operator">=</span> <span class="token class-name">SwiftBird</span><span class="token punctuation">(</span>version<span class="token punctuation">:</span> <span class="token number">5.0</span><span class="token punctuation">)</span></span>
<span class="line">swiftBird<span class="token punctuation">.</span><span class="token function">boost</span><span class="token punctuation">(</span><span class="token number">3.0</span><span class="token punctuation">)</span></span>
<span class="line">swiftBird<span class="token punctuation">.</span>airspeedVelocity <span class="token comment">// 5015</span></span>
<span class="line">swiftBird<span class="token punctuation">.</span><span class="token function">boost</span><span class="token punctuation">(</span><span class="token number">3.0</span><span class="token punctuation">)</span></span>
<span class="line">swiftBird<span class="token punctuation">.</span>airspeedVelocity <span class="token comment">// 5030</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here, you&#39;ve created a <code>SwiftBird</code> that is mutable, and you boosted its velocity by three and then by three again. Build the playground and you should notice that the <code>airspeedVelocity</code> of the <code>SwiftBird</code> has increased with each boost.</p><hr><h2 id="where-to-go-from-here" tabindex="-1"><a class="header-anchor" href="#where-to-go-from-here"><span>Where to Go From Here?</span></a></h2>`,110)),s("p",null,[n[20]||(n[20]=e("Use the ")),s("a",S,[a(i,{icon:"fas fa-download"}),n[19]||(n[19]=s("code",null,"[Download Materials]",-1))]),n[21]||(n[21]=e(" button at the top or bottom of this tutorial to download the completed playground."))]),n[25]||(n[25]=l('<p>At this point, you&#39;ve tested the power of protocol-oriented programming by creating simple protocols and expanding them with protocol extensions. With default implementations, you can give existing protocols common and automatic behavior. This is like a base class only better, since they can apply to <code>struct</code> and <code>enum</code> types too.</p><p>You&#39;ve also seen that protocol extensions can extend and provide default behavior to protocols in the Swift standard library, Cocoa, Cocoa Touch or any third-party library.</p><p>To continue learning more about protocols, read the <a href="https://docs.swift.org/swift-book/LanguageGuide/Protocols.html" target="_blank" rel="noopener noreferrer">official Swift documentation</a>.</p><p>You can view an <a href="https://developer.apple.com/videos/wwdc/2015/?id=408" target="_blank" rel="noopener noreferrer">excellent WWDC session</a> on protocol-oriented programming on Apple&#39;s developer portal. It provides an in-depth exploration of the theory behind it all.</p><p>Read more about the rationale for operator conformance in its <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0091-improving-operators-in-protocols.md" target="_blank" rel="noopener noreferrer">Swift evolution proposal</a>. You may also want to learn more about Swift <code>Collection</code> protocols and <a href="https://www.raywenderlich.com/139591/building-custom-collection-swift" target="_blank" rel="noopener noreferrer">learn how to build your own</a>.</p><p>As with any programming paradigm, it&#39;s easy to get overly exuberant and use it for all the things. This interesting <a href="http://chris.eidhof.nl/post/protocol-oriented-programming/" target="_blank" rel="noopener noreferrer">blog post by Chris Eidhof</a> reminds readers that they should beware of silver-bullet solutions. Don&#39;t use protocols everywhere &quot;just because.&quot;</p><p>Have any questions? Let us know in the forum discussion below!</p>',7))])}const P=u(f,[["render",x]]),F=JSON.parse('{"path":"/kodeco.com/6742901-protocol-oriented-programming-tutorial-in-swift-5-1-getting-started.html","title":"Protocol-Oriented Programming Tutorial in Swift 5.1: Getting Started","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Protocol-Oriented Programming Tutorial in Swift 5.1: Getting Started","description":"Article(s) > Protocol-Oriented Programming Tutorial in Swift 5.1: Getting Started","icon":"fa-brands fa-swift","category":["Swift","Article(s)"],"tag":["blog","kodeco.com","swift","ios","xcode"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Protocol-Oriented Programming Tutorial in Swift 5.1: Getting Started\\",\\"image\\":[\\"https://koenig-media.raywenderlich.com/uploads/2019/12/mascot_swifty-superhero-blue-500x500.png\\"],\\"datePublished\\":\\"2020-01-22T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/kodeco.com/6742901-protocol-oriented-programming-tutorial-in-swift-5-1-getting-started.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"Protocol-Oriented Programming Tutorial in Swift 5.1: Getting Started"}],["meta",{"property":"og:description","content":"Article(s) > Protocol-Oriented Programming Tutorial in Swift 5.1: Getting Started"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://koenig-media.raywenderlich.com/uploads/2019/12/ProtocolOrientedProgramming-twitter.png"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://koenig-media.raywenderlich.com/uploads/2019/12/ProtocolOrientedProgramming-twitter.png"}],["meta",{"name":"twitter:image:alt","content":"Protocol-Oriented Programming Tutorial in Swift 5.1: Getting Started"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"ios"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"kodeco.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2020-01-22T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Protocol-Oriented Programming Tutorial in Swift 5.1: Getting Started"},{"property":"og:description","content":"Protocol-Oriented Programming Tutorial in Swift 5.1: Getting Started"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/kodeco.com/6742901-protocol-oriented-programming-tutorial-in-swift-5-1-getting-started.html"}]],"prev":"/programming/swift/articles/README.md","date":"2020-01-22T00:00:00.000Z","isOriginal":false,"cover":"https://koenig-media.raywenderlich.com/uploads/2019/12/ProtocolOrientedProgramming-twitter.png"},"git":{},"readingTime":{"minutes":10.87,"words":3260},"filePathRelative":"kodeco.com/6742901-protocol-oriented-programming-tutorial-in-swift-5-1-getting-started.md"}');export{P as comp,F as data};
