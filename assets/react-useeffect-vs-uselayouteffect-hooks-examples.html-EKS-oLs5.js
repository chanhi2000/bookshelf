import{_ as k}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as b,d as s,f as n,b as c,a as f,t as y,n as d,g as h,w as a,e as t,r as l,o as v}from"./app-BVguHYKu.js";const w="/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/banner.png",E="/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/react-hooks-cheatsheet-example.gif",x="/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/simple-counter-example.gif",L="/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/react-hooks-counter-example-ui.png",T="/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/counter-example-first-function-triggered.png",R="/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/useeffect-uselayouteffect-sequencing-example.png",C="/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/useeffect-uselayouteffect-title-shaking.webp",H="/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/data-collection-time-evaluation.png",A="/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/time-evaluation-graph.png",U="/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/useeffect-uselayouteffect-performance-render.png",j="/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/200-bars-button-output-example.png",O="/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/app-render-200-bars.png",S="/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/useeffect-logs-triggered.webp",I="/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/uselayouteffect-computation-triggered-example.gif",D="/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/useeffect-screencast.webp",M="/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/uselayouteffect-screencast.gif",q={},V={id:"frontmatter-title-관련",tabindex:"-1"},W={class:"header-anchor",href:"#frontmatter-title-관련"},F={class:"table-of-contents"},N={href:"https://react-hooks-cheatsheet.com/examples/fetching-data",target:"_blank",rel:"noopener noreferrer"},z={href:"https://react.dev/reference/react/useEffect",target:"_blank",rel:"noopener noreferrer"},K={class:"hint-container info"},B={class:"hint-container-title"},P={href:"https://codesandbox.io/s/useeffect-uselayouteffect-time-of-execution-gtrvg?fontsize=14",target:"_blank",rel:"noopener noreferrer"},J={href:"https://codesandbox.io/s/useeffect-uselayouteffect-time-of-execution-2-kqnqp?fontsize=14",target:"_blank",rel:"noopener noreferrer"},G={href:"https://codesandbox.io/s/useeffect-uselayouteffect-time-of-execution-gtrvg?fontsize=14",target:"_blank",rel:"noopener noreferrer"},Y={href:"https://youtu.be/M5_RlEn0XKw",target:"_blank",rel:"noopener noreferrer"},Q={href:"https://youtu.be/irUvYd39k4c",target:"_blank",rel:"noopener noreferrer"},Z={href:"https://codesandbox.io/s/useeffect-vs-uselayouteffect-heavy-computation-zoi53?fontsize=14",target:"_blank",rel:"noopener noreferrer"},X={href:"https://forms.gle/Qd6yZC1Lhcosnc2f8",target:"_blank",rel:"noopener noreferrer"};function $(m,e){const u=l("VPCard"),i=l("router-link"),g=l("SiteInfo"),o=l("VPIcon"),r=l("RouteLink"),p=l("SandPack");return v(),b("div",null,[s("h1",V,[s("a",W,[s("span",null,y(m.$frontmatter.title)+" 관련",1)])]),n(u,d(h({title:"React.js > Article(s)",desc:"Article(s)",link:"/programming/js-react/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",F,[s("ul",null,[s("li",null,[n(i,{to:"#what-is-the-useeffect-hook"},{default:a(()=>e[0]||(e[0]=[t("What is the useEffect Hook?")])),_:1,__:[0]})]),s("li",null,[n(i,{to:"#what-is-the-uselayouteffect-hook"},{default:a(()=>e[1]||(e[1]=[t("What is the useLayoutEffect Hook?")])),_:1,__:[1]})]),s("li",null,[n(i,{to:"#what-s-the-difference-between-useeffect-and-uselayouteffect"},{default:a(()=>e[2]||(e[2]=[t("What’s the difference between useEffect and useLayoutEffect?")])),_:1,__:[2]})]),s("li",null,[n(i,{to:"#examples-to-differentiate-useeffect-and-uselayouteffect"},{default:a(()=>e[3]||(e[3]=[t("Examples to differentiate useEffect and useLayoutEffect")])),_:1,__:[3]}),s("ul",null,[s("li",null,[n(i,{to:"#time-of-execution"},{default:a(()=>e[4]||(e[4]=[t("Time of execution")])),_:1,__:[4]})]),s("li",null,[n(i,{to:"#performance"},{default:a(()=>e[5]||(e[5]=[t("Performance")])),_:1,__:[5]})]),s("li",null,[n(i,{to:"#inconsistent-visual-changes"},{default:a(()=>e[6]||(e[6]=[t("Inconsistent visual changes")])),_:1,__:[6]})])])]),s("li",null,[n(i,{to:"#when-to-use-useeffect-and-when-to-use-uselayouteffect"},{default:a(()=>e[7]||(e[7]=[t("When to use useEffect and when to use useLayoutEffect")])),_:1,__:[7]})]),s("li",null,[n(i,{to:"#conclusion"},{default:a(()=>e[8]||(e[8]=[t("Conclusion")])),_:1,__:[8]})])])]),e[74]||(e[74]=s("hr",null,null,-1)),n(g,{name:"React useLayoutEffect vs. useEffect Hooks with examples",desc:"This guide to the useEffect and useLayoutEffect Hooks explores how each handles heavy computations and visual changes.",url:"https://blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples",logo:"/assets/image/blog.logrocket.com/favicon.png",preview:"/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/banner.png"}),e[75]||(e[75]=c('<div class="hint-container note"><p class="hint-container-title">Editor’s note</p><p>This post was last updated on 12 July 2023 to further elaborate on the differences in when and how the <code>useEffect</code> and <code>useLayoutEffect</code> Hooks are fired.</p></div><figure><img src="'+w+`" alt="React UseLayoutEffect Vs. UseEffect Hooks With Examples" tabindex="0" loading="lazy"><figcaption>React UseLayoutEffect Vs. UseEffect Hooks With Examples</figcaption></figure><p>Assuming you understand the difference between <code>useEffect</code> and <code>useLayoutEffect</code>, would you be able to explain them in simple terms? Or can you describe their nuances with practical examples?</p><p>In this tutorial, we’ll explore the differences between React’s <code>useEffect</code> and <code>useLayoutEffect</code> Hooks, such as how they handle heavy computations and inconsistent visual changes, with code examples that will reinforce your understanding of the concepts.</p><hr><h2 id="what-is-the-useeffect-hook" tabindex="-1"><a class="header-anchor" href="#what-is-the-useeffect-hook"><span>What is the <code>useEffect</code> Hook?</span></a></h2><p>The <code>useEffect</code> Hook is a powerful tool in React that helps developers manage side effects in functional components. It runs asynchronously after the browser repaints the screen.</p><p>This hook is commonly used for handling side effects such as fetching data, working with subscriptions, or interacting with the DOM. Essentially, <code>useEffect</code> lets you control what happens in your component based on different situations, making your code more flexible and efficient.</p><hr><h2 id="what-is-the-uselayouteffect-hook" tabindex="-1"><a class="header-anchor" href="#what-is-the-uselayouteffect-hook"><span>What is the <code>useLayoutEffect</code> Hook?</span></a></h2><p>The <code>useLayoutEffect</code> Hook is a variation of the <code>useEffect</code> Hook that runs synchronously before the browser repaints the screen. It was designed to handle side effects that require immediate DOM layout updates.</p><p><code>useLayoutEffect</code> ensures that any changes made within the hook are applied synchronously before the browser repaints the screen. While this might not seem ideal, it is highly encouraged in specific use cases, such as when measuring DOM elements, or animating or transitioning elements.</p><p>For example, a DOM mutation that must be visible to the user should be fired synchronously before the next paint, preventing the user from receiving a visual inconsistency. We’ll see an example of this later in the article.</p><hr><h2 id="what-s-the-difference-between-useeffect-and-uselayouteffect" tabindex="-1"><a class="header-anchor" href="#what-s-the-difference-between-useeffect-and-uselayouteffect"><span>What’s the difference between <code>useEffect</code> and <code>useLayoutEffect</code>?</span></a></h2><p>Sprinkled all over the two previous sections are pointers to the differences between <code>useEffect</code> and <code>useLayoutEffect</code>. Perhaps the most prominent of these is that the <code>useLayoutEffect</code> Hook is a variation of the <code>useEffect</code> Hook that runs synchronously before the browser repaints the screen.</p><p>Because the <code>useLayoutEffect</code> is a variation of the <code>useEffect</code> Hook, the signatures for both are exactly the same:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// do something</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>dependencies<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token function">useLayoutEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// do something</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>dependencies<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,18)),s("p",null,[e[10]||(e[10]=t("If you were to go through a codebase and replace every ")),e[11]||(e[11]=s("code",null,"useEffect",-1)),e[12]||(e[12]=t(" call with ")),e[13]||(e[13]=s("code",null,"useLayoutEffect",-1)),e[14]||(e[14]=t(", it would work in most cases. For example, I’ve taken an example from the ")),s("a",N,[n(o,{icon:"fas fa-globe"}),e[9]||(e[9]=t("React Hooks Cheatsheet"))]),e[15]||(e[15]=t(" that fetches data from a remote server and changes the implementation to use ")),e[16]||(e[16]=s("code",null,"useLayoutEffect",-1)),e[17]||(e[17]=t(" over ")),e[18]||(e[18]=s("code",null,"useEffect",-1)),e[19]||(e[19]=t(":"))]),e[76]||(e[76]=s("figure",null,[s("img",{src:E,alt:"React Hooks Cheatsheet Example",tabindex:"0",loading:"lazy"}),s("figcaption",null,"React Hooks Cheatsheet Example")],-1)),s("p",null,[e[21]||(e[21]=t("In our example, the code will still work. Now, we’ve established an important fact: ")),e[22]||(e[22]=s("code",null,"useEffect",-1)),e[23]||(e[23]=t(" and ")),e[24]||(e[24]=s("code",null,"useLayoutEffect",-1)),e[25]||(e[25]=t(" have the same signature. This trait makes it ")),n(r,{to:"/blog.logrocket.com/understanding-common-frustrations-react-hooks.html"},{default:a(()=>e[20]||(e[20]=[s("strong",null,"easy to assume that these two Hooks",-1)])),_:1,__:[20]}),e[26]||(e[26]=t(" behave in the same way."))]),e[77]||(e[77]=c(`<p>However, the second part of the aforementioned quote above feels a little fuzzier to most people. It states that <code>useLayoutEffect</code> runs synchronously before the browser repaints the screen. Essentially, the differences between <code>useEffect</code> and <code>useLayoutEffect</code> lie in when the two are fired and how they run.</p><p>Let’s consider the following contrived counter application:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="Counter.jsx"><span>Counter.jsx</span></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// perform side effect</span></span>
<span class="line">    <span class="token function">sendCountToServer</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">The current count is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token parameter">count</span> <span class="token operator">=&gt;</span> count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span>
<span class="line">        Update Count</span>
<span class="line">      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// </span></span>
<span class="line"><span class="token comment">// render Counter</span></span>
<span class="line"><span class="token operator">&lt;</span>Counter <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>When the component is mounted, the following code is painted to the user’s browser:</p><figure><img src="`+x+'" alt="Simple Counter Example" tabindex="0" loading="lazy"><figcaption>Simple Counter Example</figcaption></figure><p>With every click of the button, the counter state is updated, the <a href="https://blog.logrocket.com/8-dom-features-you-didnt-know-existed-ec2a0a28fd89/" target="_blank" rel="noopener noreferrer"><strong>DOM mutation is printed to the screen</strong></a>, and the effect function is triggered. Here’s what’s really happening:</p>',6)),f(" TODO: /blog.logrocket.com/8-dom-features-you-didnt-know-existed.md "),e[78]||(e[78]=c("<ol><li>The user performs an action, i.e., clicking the button</li><li>React updates the <code>count state</code> variable internally</li><li>React handles the DOM mutation</li><li>The browser then paints this DOM change to the browser’s screen</li><li>The <code>useEffect</code> function is fired only after the browser has painted the DOM change(s)</li></ol><p>With the click comes a state update, which in turn triggers a DOM mutation. The text contents of the <code>h1</code> element have to be changed from the previous <code>count</code> value to the new value.</p><p>Steps 1, 2, and 3 do not show any visual changes to the user. The user will only see a change after the browser has painted the changes or mutations to the DOM. React hands over the details about the DOM mutation to the browser engine, which figures out the entire process of painting the change to the screen.</p>",3)),s("p",null,[e[28]||(e[28]=t("The function passed to ")),e[29]||(e[29]=s("code",null,"useEffect",-1)),e[30]||(e[30]=t(" will be fired only after the DOM changes are painted on the screen. The ")),s("a",z,[n(o,{icon:"fa-brands fa-react"}),e[27]||(e[27]=t("official docs"))]),e[31]||(e[31]=t(" put it this way:"))]),s("div",K,[s("p",B,[n(o,{icon:"fa-brands fa-react"}),e[32]||(e[32]=t("react.dev"))]),e[33]||(e[33]=s("blockquote",null,[s("p",null,"“Even if your Effect was caused by an interaction (like a click), the browser may repaint the screen before processing the state updates inside your Effect.”")],-1))]),e[79]||(e[79]=c('<p>Another important thing to remember is that the <code>useEffect</code> function is fired asynchronously to not block the browser paint process.</p><div class="hint-container note"><p class="hint-container-title">N.B.</p><p>Although <code>useEffect</code> is deferred until after the browser has painted, it’s guaranteed to fire before any new renders. React will always flush a previous render’s effects before starting a new update.</p></div><p>Now, how does this differ from the <code>useLayoutEffect</code> Hook? Unlike <code>useEffect</code>, the function passed to the <code>useLayoutEffect</code> Hook is fired synchronously after all DOM mutations.</p><p>If you replaced the <code>useEffect</code> Hook with <code>useLayoutEffect</code>, the following would happen:</p><ol><li>The user performs an action, i.e., clicking the button</li><li>React updates the <code>count state</code> variable internally</li><li>React handles the DOM mutation</li><li>The <code>useLayoutEffect</code> function is fired</li><li>The browser waits for <code>useLayoutEffect</code> to finish, and only then does it paint this DOM change to the browser’s screen</li></ol><p>The <code>useLayoutEffect</code> Hook doesn’t wait for the browser to paint the DOM changes. It triggers the function right after the DOM mutations are computed. Also, keep in mind that updates scheduled inside <code>useLayoutEffect</code> will be flushed synchronously and will block the browser paint process.</p><hr><h2 id="examples-to-differentiate-useeffect-and-uselayouteffect" tabindex="-1"><a class="header-anchor" href="#examples-to-differentiate-useeffect-and-uselayouteffect"><span>Examples to differentiate <code>useEffect</code> and <code>useLayoutEffect</code></span></a></h2><p>The main differences between <code>useEffect</code> and <code>useLayoutEffect</code> lie in when they are fired and how they run, but regardless, it’s hard to tangibly quantify this difference without looking at concrete examples. In this section, I’ll highlight three examples that amplify the significance of the differences between <code>useEffect</code> and <code>useLayoutEffect</code>.</p><h3 id="time-of-execution" tabindex="-1"><a class="header-anchor" href="#time-of-execution"><span>Time of execution</span></a></h3>',10)),s("p",null,[e[35]||(e[35]=t("Modern browsers are very fast. We’ll employ some creativity to see how the time of execution differs between ")),e[36]||(e[36]=s("code",null,"useEffect",-1)),e[37]||(e[37]=t(" and ")),e[38]||(e[38]=s("code",null,"useLayoutEffect",-1)),e[39]||(e[39]=t(". In the ")),s("a",P,[n(o,{icon:"iconfont icon-codesandbox"}),e[34]||(e[34]=t("first example"))]),e[40]||(e[40]=t(", we’ll consider a counter similar to the one we looked at earlier:"))]),n(p,{rtl:"",theme:"dark",title:"ohansemmanuel%20%2F%20useEffect-useLayoutEffect-time-of-execution%20",template:"react",files:"eJyVUk1v4jAQ/Ssj7yVo2QR62rKAVLGhqlRRicJhtV6pjjMmWYKNbKctjfLfa8flQ7319vIm897zzDQkudnv4/+GjEi52yttYYmM2z40UBt8tMxi36NUCPS0g/fsoGobCGhBaLUDSrRvo+QXlVR+KFESJ8YeKjQxN+ajJmrJbakkON+oBw2VAFxJY+EvV7V0FgbtzKN/MDlliAa9rhvOWSLXPZkGgSChKowrtYkoWT+mkM7n6WwF8/Vitrp7WMBqeXd7my7T35R4LYD2KJkkwAsmNwi2QCiU2kKGlXoBq+Dp04OfPGkQgUFeOkajtOBMQekcdfylhPc3fx7Wqy8E1WhrLSEKguO8fAZeMWMWbIcTStxEKZmGoisXw2nTjbQdJw6f+asTdl9Zba3bhpKzquTbSRMyH3cQdQKeCeA7DHvtRTvAep+7/UD394VsEnTPrsnJdpy44B3272r90/C1O5gcBasr60/DVUifXJyPO9BM5YcwzYzx7UY7y3wE366ufw6y625SXFVKO0oIcZQuhqFFKGl/mPINRzAcaNyFOmnfAWDz9Gk=",options:"eJyrrgUAAXUA+Q==",customSetup:"eJyrrgUAAXUA+Q=="}),e[80]||(e[80]=c('<figure><img src="'+L+`" alt="React Hooks Counter Example UI" tabindex="0" loading="lazy"><figcaption>React Hooks Counter Example UI</figcaption></figure><p>In this counter, we have the addition of two <code>useEffect</code> calls:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;USE EFFECT FUNCTION TRIGGERED&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;USE SECOND EFFECT FUNCTION TRIGGERED&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that the effects log different texts depending on which is triggered, and as expected, the first effect function is triggered before the second:</p><figure><img src="`+T+`" alt="Counter Example First Function Triggered" tabindex="0" loading="lazy"><figcaption>Counter Example First Function Triggered</figcaption></figure><p>When there is more than one <code>useEffect</code> call within a component, the order of the effect calls is maintained. The first is triggered, then the second, and the sequence continues. Now, what happens if the second <code>useEffect</code> Hook is replaced with a <code>useLayoutEffect</code> Hook? Let’s take a look:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;USE EFFECT FUNCTION TRIGGERED&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">useLayoutEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;USE LAYOUT EFFECT FUNCTION TRIGGERED&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Even though the <code>useLayoutEffect</code> Hook is placed after the <code>useEffect</code> Hook, the <code>useLayoutEffect</code> Hook is triggered first! This is what it looks like:</p><figure><img src="`+R+'" alt=" And  Sequencing Example" tabindex="0" loading="lazy"><figcaption><code>useEffect</code> And <code>useLayoutEffect</code> Sequencing Example</figcaption></figure><p>The <code>useLayoutEffect</code> function is triggered synchronously before the DOM mutations are painted. However, the <code>useEffect</code> function is called after the DOM mutations are painted.</p><p>In the next example, we’ll look at plotting graphs with respect to the time of execution for both the <code>useEffect</code> and <code>useLayoutEffect</code> Hooks. The example app has a button that toggles the visual state of a title, whether shaking or not. Here’s the app in action:</p><figure><img src="'+C+'" alt=" And  Title Shaking" tabindex="0" loading="lazy"><figcaption><code>useEffect</code> And <code>useLayoutEffect</code> Title Shaking</figcaption></figure>',12)),s("p",null,[e[42]||(e[42]=t("I chose this example to make sure the browser actually has some changes to paint when the button is clicked, hence the animation. The visual state of the title is toggled within a ")),e[43]||(e[43]=s("code",null,"useEffect",-1)),e[44]||(e[44]=t(" function call. If it interests you, you can ")),s("a",J,[n(o,{icon:"iconfont icon-codesandbox"}),e[41]||(e[41]=t("view the implementation"))]),e[45]||(e[45]=t("."))]),n(p,{rtl:"",theme:"dark",title:"ohansemmanuel%20%2F%20useEffect-useLayoutEffect-time-of-execution-2%20",template:"react",files:"eJyFVduO00gQ/ZXCq5GMFDvJsBfWm8nuCiHxgHhgkBDCPHTs6qSZdrfpbg8TRfkDxDNv/CKfQPUlTmYYRBSlL1V1qupUVWeXTf/v+/K9zapMdL02Dl4ia9wEdjBYvHTM4cTvnnKO/pq2z9lWD+7k4iVy2AM3uoM6M968zv6pVa0SYp2VU+u2Em3ZWJtkfFCNE1oB+c8fwq5WAI1W1sFbYS837Eqo9QQsurR/BxdjRDln0uJDwgGQ6KA3eP1KdBhVKJx85oVefCfenFxdLKO36E9LLKVe5/EGKNiApDk0UjRXUIBLZwwI0DApK1KbHCx6NFybjqkGS6U/kodijKhsBmNQuagbIz7k6YSTPuRWN0NHOuWHAc32EiV50SYn1oJGnR3MBId85CZR5j9BrWwks/a5sK5kbUvWlvROjPeAxNnPjQx2+hrvsfPLfnJSlXcHbmMaG6ZaiV7mk7nF710WSP4DWcnNsdC5t0pwS3gwnqLmPvk26AajIJVt0Yprqhfl8oJ1eFFn1FR1tjzkutjMb0kTr8tnKKWG19rIdjHdzI/6/XLMFoqigt3x+C+V/g3bPoBvX798rjPwrfBCSH/8VGf7xbQ/wqwG56jDb7nW67VEQ4ZaPfENdrE7IXA/2gK8CpoQ7kfEaYRMaosp5R32nhyqVK3wJoxci5wN0vnhIkk2yU4GkEZ94zpJ/bvS7TbWqqeeoewqmAWWO2bWQsVTgC0JKGpyrVzBWSfktgLLlC0sGsGDmcMbVzAp1mTaUL3RhOsVa67WRg+qreC3xw1rkEUvQhUbFOuNq2A+m11vRm+JpRSbtsK/FBWwFY3r4DANPie732dn0YcmXjqP09+EC2o5q01F1mIMZMxyTt0O5/Rz9BiGMfhbadMiWc77GyB/oqVma2/Rck5OElMj5HgX8P67wi03VHILYZ4Sd/REhmfD6cOIOEMU+omo4lbS8/aozWcT8N/U87Hl57OzYPworX+k9a+0/j07+wVq4dm5B/k8IRCZYf0zrY9/iXgPYOTzJGtG/wPMF7BQRAg1jRcF7aOkHUzYEOv2jogLKYtOt2RJRfY9cioVVNu4a6jBqCGE4kLRbaxEtv8OpudDcQ==",options:"eJyrrgUAAXUA+Q==",customSetup:"eJyrrgUAAXUA+Q=="}),e[81]||(e[81]=c('<p>I gathered significant data by toggling the visual state every second, meaning I clicked the button using both the <code>useEffect</code> and <code>useLayoutEffect</code> Hooks. Then, using <code>performance.now</code>, I measured the difference between when the button was clicked and when the effect function was triggered for both <code>useEffect</code> and <code>useLayoutEffect</code>. I gathered the following data:</p><figure><img src="'+H+'" alt="Data Collection Time Evaluation" tabindex="0" loading="lazy"><figcaption>Data Collection Time Evaluation</figcaption></figure><p>From this data, I created a chart to visually represent the time of execution for <code>useEffect</code> and <code>useLayoutEffect</code>:</p><figure><img src="'+A+'" alt="Time Of Evaluation Graph" tabindex="0" loading="lazy"><figcaption>Time Of Evaluation Graph</figcaption></figure><p>Essentially, the graph above represents the time difference between when the <code>useEffect</code> and <code>useLayoutEffect</code> functions are triggered, which in some cases is of a magnitude greater than 10x. See how much later <code>useEffect</code> is fired when compared to <code>useLayoutEffect</code>?</p><p>You’ll see how this time difference plays a huge role in use cases like animating the DOM, which I will explain below.</p><h3 id="performance" tabindex="-1"><a class="header-anchor" href="#performance"><span>Performance</span></a></h3><p>Expensive calculations are, well, expensive. If handled poorly, they can negatively impact the performance of your application. With applications that run in the browser, you have to be careful not to block the user from seeing visual updates just because you’re running a heavy computation in the background.</p><p>The behavior of both <code>useEffect</code> and <code>useLayoutEffect</code> differ in how heavy computations are handled. As stated earlier, <code>useEffect</code> will defer the execution of the effect function until after the DOM mutations are painted, making it the obvious choice out of the two.</p>',9)),s("blockquote",null,[s("p",null,[e[47]||(e[47]=t("As an aside, I know ")),e[48]||(e[48]=s("code",null,"useMemo",-1)),e[49]||(e[49]=t(" is great for memoizing heavy computations. This article neglects that fact, instead comparing ")),e[50]||(e[50]=s("code",null,"useEffect",-1)),e[51]||(e[51]=t(" and ")),e[52]||(e[52]=s("code",null,"useLayoutEffect",-1)),e[53]||(e[53]=t(". Check out this ")),n(r,{to:"/blog.logrocket.com/react-usememo-vs-usecallback.html"},{default:a(()=>e[46]||(e[46]=[s("strong",null,[t("guide to the "),s("code",null,"useMemo"),t("Hook")],-1)])),_:1,__:[46]}),e[54]||(e[54]=t(" if you would like more information."))])]),s("p",null,[e[56]||(e[56]=t("As an example, I’ve set up an app that’s not practical, but decent enough to work for our use case. ")),s("a",G,[n(o,{icon:"iconfont icon-codesandbox"}),e[55]||(e[55]=t("The app"))]),e[57]||(e[57]=t(" renders with an initial screen that seems harmless:"))]),n(p,{rtl:"",theme:"dark",title:"ohansemmanuel%20%2F%20useEffect-useLayoutEffect-time-of-execution%20",template:"react",files:"eJyVUl1v2jAU/StX3kvQIIE+rRkgVSxUlSoqUXiYlkl1nBuS4djIdrayKP+9dlw+1Le+HZ/re879akl0dziEfzSJSVUfpDKwRsrMEFpoND4banDoUFIU6GgLH+lRNsYT0EGhZA0pUS4tJd9TkYp3pZSEkTZHjjpkWr/HikYwU0kB1jcYQJsKACaFNvCLyUZYC41m4dBvmJ1rCMaDPhsutQQ2ezb3Al5Ccgy53AUp2T4nkCyXyWIDy+1qsXl4WsFm/XB/n6yTHylxWgDdSTKKgJVU7BBMiVBKuYcMufwHRsLLh4ZfHKkRgUJeWUahMGBNQaocVfipCh/vfj5tN58oVKFplIDAC07z6i8wTrVe0RpnKbETTcncB224nMzbfqTdNLL4wt+csX1ljTF2G1IseMX2s9bXfNpB0As4xoOvMBl0V+kA20Nu9wP97yvZyOteXKOz7TSyhffY9dW51vC1P5gcC9pw407DRsiQXJ2PPdBM5kc/zYyy/U5ZyzyGLze338bZbT8pJrlUliqK4iRdTnxKIYUZ6eo/xjAZK6xP8dCaXf0oaF3xYwyaCj3SqConBGDw1Ywor3YiBmZXjsrnk+4NXA0LWg==",options:"eJyrrgUAAXUA+Q==",customSetup:"eJyrrgUAAXUA+Q=="}),e[82]||(e[82]=c('<figure><img src="'+U+'" alt=" And  Performance Render" tabindex="0" loading="lazy"><figcaption><code>useEffect</code> And <code>useLayoutEffect</code> Performance Render</figcaption></figure><p>However, it has two clickable buttons that trigger some interesting changes. For example, clicking the <strong>200 bars</strong> button sets the count state to 200:</p><figure><img src="'+j+'" alt="200 Bars Button Output Example" tabindex="0" loading="lazy"><figcaption>200 Bars Button Output Example</figcaption></figure><p>It also forces the browser to paint 200 new bars to the screen:</p><figure><img src="'+O+`" alt="App Render 200 Bars" tabindex="0" loading="lazy"><figcaption>App Render 200 Bars</figcaption></figure><p>This is not a very performant way to render 200 bars, as I’m creating new arrays every single time. But the point of our example is to make the browser work:</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token comment">// ... </span></span>
<span class="line"><span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token comment">//...</span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span></span>
<span class="line">    <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">&quot;column&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">columnCount</span><span class="token operator">:</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token string">&quot;10px&quot;</span> </span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">}</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">c</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> </span>
<span class="line">        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">&quot;20px&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token string">&quot;5px&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">}</span></span></span>
<span class="line">      <span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token punctuation">{</span>c<span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">   </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The click also triggers a heavy computation:</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token comment">// ...</span></span>
<span class="line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// do nothing when count is zero</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>count<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// perform computation when count is updated.</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;=== EFFECT STARTED === &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">val</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">=== EFFECT COMPLETED === </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Within the <code>useEffect</code> function, I create a new array with a length totaling the count number, in this case, an array of 200 values. I loop over the array and print something to the console for each value in the array.</p><p>We’ll still need to pay attention to the screen update and our log consoles to see how this behaves. For <code>useEffect</code>, our screen is updated with the new count value before the logs are triggered:</p><figure><img src="`+S+'" alt=" Logs Triggered" tabindex="0" loading="lazy"><figcaption><code>useEffect</code> Logs Triggered</figcaption></figure>',12)),s("p",null,[e[59]||(e[59]=t("Here’s the same screencast in ")),s("a",Y,[n(o,{icon:"fa-brands fa-youtube"}),e[58]||(e[58]=t("slow motion"))]),e[60]||(e[60]=t(". There’s no way you’ll miss the screen update happening before the heavy computation! So, is this behavior the same with ")),e[61]||(e[61]=s("code",null,"useLayoutEffect",-1)),e[62]||(e[62]=t("? No! Far from it."))]),e[83]||(e[83]=s("p",null,[t("With "),s("code",null,"useLayoutEffect"),t(", the computation will be triggered before the browser has painted the update. The computation takes time, which eats into the browser’s paint time. Check out the same action from above replaced with "),s("code",null,"useLayoutEffect"),t(":")],-1)),e[84]||(e[84]=s("figure",null,[s("img",{src:I,alt:"UseLayoutEffect Computation Triggered Example",tabindex:"0",loading:"lazy"}),s("figcaption",null,"UseLayoutEffect Computation Triggered Example")],-1)),s("p",null,[e[65]||(e[65]=t("Again, you can watch it in ")),s("a",Q,[n(o,{icon:"fa-brands fa-youtube"}),e[63]||(e[63]=t("slow motion"))]),e[66]||(e[66]=t(". You can see how ")),e[67]||(e[67]=s("code",null,"useLayoutEffect",-1)),e[68]||(e[68]=t(" stops the browser from painting the DOM changes for a bit. You can play around with ")),s("a",Z,[n(o,{icon:"iconfont icon-codesandbox"}),e[64]||(e[64]=t("the demo"))]),e[69]||(e[69]=t(", but be careful not to crash your browser."))]),n(p,{rtl:"",theme:"dark",title:"ohansemmanuel%20%2F%20useEffect-useLayoutEffect-time-of-execution%20",template:"react",files:"eJydVF1v2jAU/St33h6CRCGgIq0dQaoYfeo+1LKnpVJN4pC0iR3ZTguL8t93bSc0pbxskQjO/Tj33HNt12R8VZajR0UuSVaUQmq4ZTTSQ6ihUuxOU82GZrVKEmbMuLyhe1FpZ4AGEikKCIk0aSH5EvKQt0ghGY2V3udMjSKlWl9S8UhnggPW9QZQhxwgElxp+B2JimMJxfTSrO4hOHDw/IHNhmMCHmIECwcDkCXgfbAwLbJ5JNOV5JhuPhr3ZyqKnI1ysfVCEgQBrK6vV8s13K2vbterr2BMITFFTThnL3AlJd17DnyUZHnuTfBfyBWNUu+Z5oZGHxZNgy6/b3/oVVv++PbzZtXV+1Rb9ObBpTXDVpL7rnenU0p5nDtZfpUxvlEnG2cYvJGjU7Jl7VBbLKcKeC5yHmfPEOVUqe+0YEFIcDohWXQSztPJoiU3H+P6YFc4Ahxm940lzbyD+iC+eeJMlTndX6KgSc52IRn2vY+V0lmyXwquGdcmSJU0YmdUYr34KHgjZMykCZqWO0BNsxjkdkO96Ww27H7+6Hw2CMlrXtNOHeDAHLlvKq1xHwq+zLPoKajf6epNfX/QLPANGyrVfOwy/g3j3GLg+zTGfNxK+P+aRiKvCo5C4S4wKzty45gZW0HlNuNrURrLxC9Rfugr0+umPr3N23VBSy+yW6zPw26cvuE0XfOkLNumltjU0hge5eF0afS0tWM3UZKZ6b8Lcg3Z/gzKW/frpI+mbfuL3njnY+TeCxkMDu7jqbyGmkOEYSFnO3vHxSyhVa7NbYYeMiS9Gw/v1I2I9+409nv7OL347G8uOqh04kISPAJnKvvDLmHiS1Z0/hGCuwjNdvqM5tkW+4/wtDBpz/RLFuvUJPnPLy6JNH8B7kHCzA==",options:"eJyrrgUAAXUA+Q==",customSetup:"eJyrrgUAAXUA+Q=="}),e[85]||(e[85]=s("p",null,[t("Why does this difference in how heavy computations are handled matter? When possible, you should choose the "),s("code",null,"useEffect"),t(" Hook for cases where you want to be unobtrusive in the dealings of the browser paint process. In the real world, this is most of the time, except for when you’re reading layout from the DOM or doing something DOM-related that needs to be painted ASAP. In the next section, we’ll see an example in action.")],-1)),e[86]||(e[86]=s("h3",{id:"inconsistent-visual-changes",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#inconsistent-visual-changes"},[s("span",null,"Inconsistent visual changes")])],-1)),s("p",null,[e[71]||(e[71]=s("code",null,"useLayoutEffect",-1)),e[72]||(e[72]=t(" truly shines when handling inconsistent visual changes. As an example, let’s consider these real scenarios I encountered myself while working on my ")),s("a",X,[n(o,{icon:"fas fa-globe"}),e[70]||(e[70]=t("Udemy video course"))]),e[73]||(e[73]=t(" on Advanced Patterns with React Hooks."))]),e[87]||(e[87]=c('<p>With <code>useEffect</code>, you get a flicker before the DOM changes are painted, which was related to how refs are passed on to custom Hooks. Initially, these refs start off as <code>null</code> before actually being set when the attached DOM node is rendered:</p><figure><img src="'+D+'" alt=" Screencast" tabindex="0" loading="lazy"><figcaption><code>useEffect</code> Screencast</figcaption></figure><p>With <code>useLayoutEffect</code>:</p><figure><img src="'+M+'" alt=" Screencast" tabindex="0" loading="lazy"><figcaption><code>useLayoutEffect</code> Screencast</figcaption></figure><p>If you rely on these refs to perform an animation as soon as the component mounts, then you’ll find an unpleasant flickering of browser paints happening before your animation kicks in. This is the case with <code>useEffect</code>, but not <code>useLayoutEffect</code>.</p><p>Even without this flicker, sometimes you may find <code>useLayoutEffect</code> produces animations that look buttery, cleaner, and faster than <code>useEffect</code>. Be sure to test both Hooks when working with complex user interface animations.</p><hr><h2 id="when-to-use-useeffect-and-when-to-use-uselayouteffect" tabindex="-1"><a class="header-anchor" href="#when-to-use-useeffect-and-when-to-use-uselayouteffect"><span>When to use <code>useEffect</code> and when to use <code>useLayoutEffect</code></span></a></h2><p>Most of the time, the <code>useEffect</code> Hook should be your first choice because it runs asynchronously and doesn’t block the browser painting process, which can slow down your application. However, when you are completely sure that the code that you wish to use will visually affect your application, such as when using animations, transitions, or when you see some visual inconsistencies, use the <code>useLayoutEffect</code> Hook instead.</p><hr><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h2><p>In this article, we reviewed the <code>useEffect</code> and <code>useLayoutEffect</code> Hooks in React, looking into the inner workings and best use cases for each. We also demonstrated examples of both hooks regarding their firing, performance, and visual changes.</p><p>I hope you found this guide helpful!</p>',13)),f(" TODO: add ARTICLE CARD "),n(u,d(h({title:"React useLayoutEffect vs. useEffect Hooks with examples",desc:"This guide to the useEffect and useLayoutEffect Hooks explores how each handles heavy computations and visual changes.",link:"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples.html",logo:"/assets/image/blog.logrocket.com/favicon.png",background:"rgba(112,76,182,0.2)"})),null,16)])}const se=k(q,[["render",$]]),te=JSON.parse('{"path":"/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples.html","title":"React useLayoutEffect vs. useEffect Hooks with examples","lang":"en-US","frontmatter":{"lang":"en-US","title":"React useLayoutEffect vs. useEffect Hooks with examples","description":"Article(s) > React useLayoutEffect vs. useEffect Hooks with examples","icon":"fa-brands fa-react","category":["Node.js","React.js","Article(s)"],"tag":["blog","blog.logrocket.com","node","nodejs","node-js","react","reactjs","react-js"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"React useLayoutEffect vs. useEffect Hooks with examples\\",\\"image\\":[\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/banner.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/react-hooks-cheatsheet-example.gif\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/simple-counter-example.gif\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/react-hooks-counter-example-ui.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/counter-example-first-function-triggered.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/useeffect-uselayouteffect-sequencing-example.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/useeffect-uselayouteffect-title-shaking.webp\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/data-collection-time-evaluation.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/time-evaluation-graph.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/useeffect-uselayouteffect-performance-render.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/200-bars-button-output-example.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/app-render-200-bars.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/useeffect-logs-triggered.webp\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/uselayouteffect-computation-triggered-example.gif\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/useeffect-screencast.webp\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/uselayouteffect-screencast.gif\\"],\\"datePublished\\":\\"2023-07-12T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Ohans Emmanuel\\",\\"url\\":\\"https://blog.logrocket.com/author/ohansemmanuel/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"React useLayoutEffect vs. useEffect Hooks with examples"}],["meta",{"property":"og:description","content":"Article(s) > React useLayoutEffect vs. useEffect Hooks with examples"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/banner.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/banner.png"}],["meta",{"name":"twitter:image:alt","content":"React useLayoutEffect vs. useEffect Hooks with examples"}],["meta",{"property":"article:author","content":"Ohans Emmanuel"}],["meta",{"property":"article:tag","content":"react-js"}],["meta",{"property":"article:tag","content":"reactjs"}],["meta",{"property":"article:tag","content":"react"}],["meta",{"property":"article:tag","content":"node-js"}],["meta",{"property":"article:tag","content":"nodejs"}],["meta",{"property":"article:tag","content":"node"}],["meta",{"property":"article:tag","content":"blog.logrocket.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2023-07-12T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > React useLayoutEffect vs. useEffect Hooks with examples"},{"property":"og:description","content":"React useLayoutEffect vs. useEffect Hooks with examples"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples.html"}]],"prev":"/programming/js-react/articles/README.md","date":"2023-07-12T00:00:00.000Z","isOriginal":false,"author":[{"name":"Ohans Emmanuel","url":"https://blog.logrocket.com/author/ohansemmanuel/"}],"cover":"/assets/image/blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples/banner.png"},"git":{},"readingTime":{"minutes":11.33,"words":3398},"filePathRelative":"blog.logrocket.com/react-useeffect-vs-uselayouteffect-hooks-examples.md","copyright":{"author":"Ohans Emmanuel"}}');export{se as comp,te as data};
