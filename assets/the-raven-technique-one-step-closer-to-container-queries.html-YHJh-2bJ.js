import{_ as v}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as b,d as s,f as e,b as p,a as g,t as f,n as k,g as h,w as t,e as a,r as l,o as w}from"./app-BItykJLQ.js";const y={},x={id:"frontmatter-title-관련",tabindex:"-1"},_={class:"header-anchor",href:"#frontmatter-title-관련"},S={class:"table-of-contents"},T={href:"https://groups.google.com/a/chromium.org/g/blink-dev/c/u1AKdrXhPGI/m/wrJb-unhAgAJ",target:"_blank",rel:"noopener noreferrer"},C={href:"https://heydonworks.com/article/the-flexbox-holy-albatross/",target:"_blank",rel:"noopener noreferrer"},R={class:"hint-container info"},I={href:"https://codepen.io/collection/XqLJdm",target:"_blank",rel:"noopener noreferrer"},q={href:"https://web.dev/min-max-clamp/",target:"_blank",rel:"noopener noreferrer"},A={href:"https://developer.mozilla.org/en-US/docs/Web/CSS/var",target:"_blank",rel:"noopener noreferrer"},j={href:"https://kizu.ru/conditions-for-css-variables/",target:"_blank",rel:"noopener noreferrer"},W={href:"https://css-tricks.com/property/",target:"_blank",rel:"noopener noreferrer"},z={href:"https://codepen.io/batchman/pen/GRZNeaQ",target:"_blank",rel:"noopener noreferrer"},O={href:"https://codepen.io/batchman/pen/GRZVGQx",target:"_blank",rel:"noopener noreferrer"},B={href:"https://css-tricks.com/books/greatest-css-tricks/hard-stop-gradients/",target:"_blank",rel:"noopener noreferrer"},N={href:"https://codepen.io/batchman/pen/XWdvPVo",target:"_blank",rel:"noopener noreferrer"},P={href:"https://codepen.io/batchman/pen/YzWKpOr",target:"_blank",rel:"noopener noreferrer"},F={class:"hint-container note"},H={href:"https://css-tricks.com/author/chriscoyier/",target:"_blank",rel:"noopener noreferrer"},L={href:"https://css-tricks.com/author/agalante/",target:"_blank",rel:"noopener noreferrer"},Q={href:"https://css-tricks.com/author/cathydutton/",target:"_blank",rel:"noopener noreferrer"},M={href:"https://css-tricks.com/author/markoilic/",target:"_blank",rel:"noopener noreferrer"},D={href:"https://css-tricks.com/author/daveatanda/",target:"_blank",rel:"noopener noreferrer"};function U(c,n){const d=l("VPCard"),i=l("router-link"),m=l("SiteInfo"),u=l("RouteLink"),o=l("VPIcon"),r=l("CodePen");return w(),b("div",null,[s("h1",x,[s("a",_,[s("span",null,f(c.$frontmatter.title)+" 관련",1)])]),e(d,k(h({title:"CSS > Article(s)",desc:"Article(s)",link:"/programming/css/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",S,[s("ul",null,[s("li",null,[e(i,{to:"#why-raven"},{default:t(()=>[...n[0]||(n[0]=[a("Why “Raven”?",-1)])]),_:1})]),s("li",null,[e(i,{to:"#recap-math-functions-in-css"},{default:t(()=>[...n[1]||(n[1]=[a("Recap: Math functions in CSS",-1)])]),_:1})]),s("li",null,[e(i,{to:"#step-1-create-configuration-variables"},{default:t(()=>[...n[2]||(n[2]=[a("Step 1: Create configuration variables",-1)])]),_:1})]),s("li",null,[e(i,{to:"#step-2-create-indicator-variables"},{default:t(()=>[...n[3]||(n[3]=[a("Step 2: Create indicator variables",-1)])]),_:1})]),s("li",null,[e(i,{to:"#step-3-use-indicator-variables-to-select-interval-values"},{default:t(()=>[...n[4]||(n[4]=[a("Step 3: Use indicator variables to select interval values",-1)])]),_:1})]),s("li",null,[e(i,{to:"#and-an-absurdly-large-integer-to-select-arbitrary-length-values"},{default:t(()=>[...n[5]||(n[5]=[a("` and an absurdly large integer to select arbitrary-length values",-1)])]),_:1})]),s("li",null,[e(i,{to:"#step-5-bringing-it-all-together"},{default:t(()=>[...n[6]||(n[6]=[a("Step 5: Bringing it all together",-1)])]),_:1})]),s("li",null,[e(i,{to:"#anything-else"},{default:t(()=>[...n[7]||(n[7]=[a("Anything else?",-1)])]),_:1})]),s("li",null,[e(i,{to:"#what-about-heights"},{default:t(()=>[...n[8]||(n[8]=[a("What about heights?",-1)])]),_:1})]),s("li",null,[e(i,{to:"#what-about-showing-and-hiding-things"},{default:t(()=>[...n[9]||(n[9]=[a("What about showing and hiding things?",-1)])]),_:1})]),s("li",null,[e(i,{to:"#takeaways"},{default:t(()=>[...n[10]||(n[10]=[a("Takeaways",-1)])]),_:1})]),s("li",null,[e(i,{to:"#bonus-boolean-logic"},{default:t(()=>[...n[11]||(n[11]=[a("Bonus: Boolean logic",-1)])]),_:1})]),s("li",null,[e(i,{to:"#bonus-2-set-the-number-of-columns-in-a-grid-layout"},{default:t(()=>[...n[12]||(n[12]=[a("Bonus 2: Set the number of columns in a grid layout",-1)])]),_:1})]),s("li",null,[e(i,{to:"#bonus-3-change-the-background-color-with-a-linear-gradient"},{default:t(()=>[...n[13]||(n[13]=[a("Bonus 3: Change the background-color with a linear-gradient()",-1)])]),_:1})]),s("li",null,[e(i,{to:"#bonus-4-getting-rid-of-nested-variables"},{default:t(()=>[...n[14]||(n[14]=[a("Bonus 4: Getting rid of nested variables",-1)])]),_:1})]),s("li",null,[e(i,{to:"#final-thoughts"},{default:t(()=>[...n[15]||(n[15]=[a("Final thoughts",-1)])]),_:1})])])]),n[114]||(n[114]=s("hr",null,null,-1)),e(m,{name:"The Raven Technique: One Step Closer to Container Queries",desc:"For the millionth time: We need container queries in CSS! And guess what, it looks like we're heading in that direction.",url:"https://css-tricks.com/the-raven-technique-one-step-closer-to-container-queries",logo:"https://css-tricks/favicon.svg",preview:"https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/10/RT_x4UFA.png"}),s("p",null,[n[18]||(n[18]=a("For the millionth time: ",-1)),e(u,{to:"/css-tricks.com/lets-not-forget-about-container-queries.html"},{default:t(()=>[...n[16]||(n[16]=[s("strong",null,"We need container queries",-1)])]),_:1}),n[19]||(n[19]=a(" in CSS! And guess what, it looks like ",-1)),s("a",T,[e(o,{icon:"fa-brands fa-chrome"}),n[17]||(n[17]=a("we’re heading in that direction",-1))]),n[20]||(n[20]=a(".",-1))]),n[115]||(n[115]=s("p",null,[a("When building components for a website, you don’t always know how that component will be used. Maybe it will be render as wide as the browser window is. Maybe two of them will sit side by side. Maybe it will be in some narrow column. The width of "),s("em",null,"it"),a(" doesn’t always correlate with the width of the "),s("em",null,"browser window"),a(".")],-1)),n[116]||(n[116]=s("p",null,"It’s common to reach a point where having container based queries for the CSS of the component would be super handy. If you search around the web for solution to this, you’ll probably find several JavaScript-based solutions. But those come at a price: extra dependencies, styling that requires JavaScript, and polluted application logic and design logic.",-1)),s("p",null,[n[23]||(n[23]=a("I am a strong believer in separation of concerns, and layout is a CSS concern. For example, as nice of an API as ",-1)),n[24]||(n[24]=s("code",null,"IntersectionObserver",-1)),n[25]||(n[25]=a(" is, I want things like ",-1)),n[26]||(n[26]=s("code",null,":in-viewport",-1)),n[27]||(n[27]=a(" in CSS! So I continued searching for a CSS-only solution and I came across Heydon Pickering’s ",-1)),s("a",C,[e(o,{icon:"fas fa-globe"}),n[21]||(n[21]=a("The Flexbox Holy Albatross",-1))]),n[28]||(n[28]=a(". It is a nice solution for columns, but I wanted more. There are some refinements of the original albatross (like ",-1)),e(u,{to:"/css-tricks.com/holy-albatross-with-widths.html"},{default:t(()=>[...n[22]||(n[22]=[s("strong",null,"The Unholy Albatross",-1)])]),_:1}),n[29]||(n[29]=a("), but still, they are a little hacky and all that is happening is a rows-to-columns switch.",-1))]),n[117]||(n[117]=s("p",null,[a("I still want more! I want to get closer to actual container queries! So, what does CSS have offer that I could tap into? I have a mathematical background, so functions like "),s("code",null,"calc()"),a(", "),s("code",null,"min()"),a(", "),s("code",null,"max()"),a(" and "),s("code",null,"clamp()"),a(" are things I like and understand.")],-1)),n[118]||(n[118]=s("p",null,"Next step: build a container-query-like solution with them.",-1)),s("div",R,[n[33]||(n[33]=s("p",{class:"hint-container-title"},"Info",-1)),s("p",null,[n[31]||(n[31]=a("Want to see what is possible before reading on? ",-1)),s("a",I,[e(o,{icon:"fa-brands fa-codepen"}),n[30]||(n[30]=a("Here is a CodePen collection",-1))]),n[32]||(n[32]=a(" showing off what can be done with the ideas discussed in this article.",-1))])]),n[119]||(n[119]=s("hr",null,null,-1)),n[120]||(n[120]=s("h2",{id:"why-raven",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#why-raven"},[s("span",null,"Why “Raven”?")])],-1)),n[121]||(n[121]=s("p",null,"This work is inspired by Heydon’s albatross, but the technique can do more tricks, so I picked a raven, since ravens are very clever birds.",-1)),n[122]||(n[122]=s("hr",null,null,-1)),n[123]||(n[123]=s("h2",{id:"recap-math-functions-in-css",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#recap-math-functions-in-css"},[s("span",null,"Recap: Math functions in CSS")])],-1)),s("p",null,[e(u,{to:"/css-tricks.com/a-complete-guide-to-calc-in-css.html"},{default:t(()=>[...n[34]||(n[34]=[s("strong",null,[a("The "),s("code",null,"calc()"),a(" function")],-1)])]),_:1}),n[35]||(n[35]=a(" allows mathematical operations in CSS. As a bonus, one can combine units, so things like ",-1)),n[36]||(n[36]=s("code",null,"calc(100vw - 300px)",-1)),n[37]||(n[37]=a(" are possible.",-1))]),n[124]||(n[124]=p("<p>The <code>min()</code> and <code>max()</code> functions take two or more arguments and return the smallest or biggest argument (respectively).</p><p>The <code>clamp()</code> function is like a combination of <code>min()</code> and <code>max()</code> in a very useful way. The function <code>clamp(a, x, b)</code> will return:</p><ul><li><strong>a</strong> if x is smaller than a</li><li><strong>b</strong> if x is bigger than b and</li><li><strong>x</strong> if x is in between a and b</li></ul>",3)),s("p",null,[n[39]||(n[39]=a("So it’s a bit like ",-1)),n[40]||(n[40]=s("code",null,"clamp(smallest, relative, largest)",-1)),n[41]||(n[41]=a(". One may think of it as a shorthand for ",-1)),n[42]||(n[42]=s("code",null,"min(max(a,x),b)",-1)),n[43]||(n[43]=a(". ",-1)),s("a",q,[e(o,{icon:"iconfont icon-webdev"}),n[38]||(n[38]=a("Here’s more info on all that",-1))]),n[44]||(n[44]=a(" if you’d like to read more.",-1))]),s("p",null,[n[46]||(n[46]=a("We’re also going to use another CSS tool pretty heavily in this article: ",-1)),s("a",A,[e(o,{icon:"fa-brands fa-firefox"}),n[45]||(n[45]=a("CSS custom properties",-1))]),n[47]||(n[47]=a(". Those are the things like ",-1)),n[48]||(n[48]=s("code",null,"--color: red;",-1)),n[49]||(n[49]=a(" or ",-1)),n[50]||(n[50]=s("code",null,"--distance: 20px",-1)),n[51]||(n[51]=a(". Variables, essentially. We’ll be using them to keep the CSS cleaner, like not repeating ourselves too much.",-1))]),n[125]||(n[125]=p(`<p>Let’s get started with this Raven Technique.</p><hr><h2 id="step-1-create-configuration-variables" tabindex="-1"><a class="header-anchor" href="#step-1-create-configuration-variables"><span>Step 1: Create configuration variables</span></a></h2><p>Let’s create some CSS custom properties to set things up.</p><p>What is the base size we want our queries to be based on? Since we’re shooting for container query behavior, this would be <code>100%</code> — using <code>100vw</code> would make this behave like a media query, because that’s the width of the browser window, not the container!</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--base_size</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now we think about the breakpoints. Literally container widths where we want a break in order to apply new styles.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--breakpoint_wide</span><span class="token punctuation">:</span> 1500px<span class="token punctuation">;</span> </span>
<span class="line"><span class="token comment">/* Wider than 1500px will be considered wide */</span></span>
<span class="line"><span class="token property">--breakpoint_medium</span><span class="token punctuation">:</span> 800px<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">/* From 801px to 1500px will be considered medium */</span></span>
<span class="line"><span class="token comment">/* Smaller than or exact 800px will be small */</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In the running example, we will use three intervals, but there is no limit with this technique.</p><p>Now let’s define some (CSS length) values we would like to be returned for the intervals defined by the breakpoints. These are literal values:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--length_4_small</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">(</span>100% / 1<span class="token punctuation">)</span> - 10px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Change to your needs */</span></span>
<span class="line"><span class="token property">--length_4_medium</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">(</span>100% / 2<span class="token punctuation">)</span> - 10px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Change to your needs */</span></span>
<span class="line"><span class="token property">--length_4_wide</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">(</span>100% / 3<span class="token punctuation">)</span> - 10px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Change to your needs */</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This is the config. Let’s use it!</p><hr><h2 id="step-2-create-indicator-variables" tabindex="-1"><a class="header-anchor" href="#step-2-create-indicator-variables"><span>Step 2: Create indicator variables</span></a></h2><p>We will create some indicator variables for the intervals. They act a bit like boolean values, but with a length unit (<code>0px</code> and <code>1px</code>). If we clamp those lengths as minimum and maximum values, then they serve as a sort of “true” and “false” indicator.</p><p>So, if, and only if <code>--base_size</code> is bigger than <code>--breakpoint_wide</code>, we want a variable that’s <code>1px</code>. Otherwise, we want <code>0px</code>. This can be done with <code>clamp()</code>:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--is_wide</span><span class="token punctuation">:</span> <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_wide<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  1px</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If <code>var(--base_size) - var(--breakpoint_wide)</code> is negative, then <code>--base_size</code> is smaller than <code>--breakpoint_wide</code>, so <code>clamp()</code> will return <code>0px</code> in this case.</p><p>Conversely, if <code>--base_size</code> is bigger than <code>--breakpoint_wide</code>, the calculation will give a positive length, which is bigger than or equal to <code>1px</code>. That means <code>clamp()</code> will return <code>1px</code>.</p><p>Bingo! We got an indicator variable for “wide.”</p><p>Let’s do this for the “medium” interval:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--is_medium</span><span class="token punctuation">:</span> <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_medium<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  1px</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/*  DO NOT USE, SEE BELOW! */</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This will give us <code>0px</code> for the small interval, but <code>1px</code> for the medium <em>and</em> the wide interval. What we want, however, is <code>0px</code> for the wide interval and <code>1px</code> for the medium interval <em>exclusively</em>.</p><p>We can solve this by subtracting <code>--is_wide</code> value. In the wide interval, <code>1px - 1px</code> is <code>0px</code>; in the medium interval <code>1px - 0px</code> is <code>1px</code>; and for the small interval <code>0px - 0px</code> gives <code>0px</code>. Perfect.</p><p>So we get:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--is_medium</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span> </span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_medium<span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">  1px<span class="token punctuation">)</span> </span>
<span class="line">  - <span class="token function">var</span><span class="token punctuation">(</span>--is_wide<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>See the idea? To calculate an indicator variable, use <code>clamp()</code> with <code>0px</code> and <code>1px</code> as borders and the difference of <code>--base_width</code> and <code>--breakpoint_whatever</code> as the clamped value. Then subtract the sum of all indicators for bigger intervals. This logic produces the following for the smallest interval indicator:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--is_small</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span> - 0px<span class="token punctuation">,</span></span>
<span class="line">    1px<span class="token punctuation">)</span></span>
<span class="line">  - <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_medium<span class="token punctuation">)</span> + <span class="token function">var</span><span class="token punctuation">(</span>--is_wide<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We can skip the clamp here because the breakpoint for small is <code>0px</code> and <code>--base_size</code> is positive, so <code>--base_size - 0px</code> is alway bigger than <code>1px</code> and <code>clamp()</code> will always return <code>1px</code>. Therefore, the calculation of <code>--is_small</code> can be simplified to:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--is_small</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>1px - <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_medium<span class="token punctuation">)</span> + <span class="token function">var</span><span class="token punctuation">(</span>--is_wide<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="step-3-use-indicator-variables-to-select-interval-values" tabindex="-1"><a class="header-anchor" href="#step-3-use-indicator-variables-to-select-interval-values"><span>Step 3: Use indicator variables to select interval values</span></a></h2><p>Now we need to go from these “indicator variables” to something useful. Let’s assume we’re working with a pixel-based layout. Don’t panic, we will handle other units later.</p><p>Here’s a question. What does this return?</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span> * 100<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>If <code>--is_small</code> is <code>1px</code>, it will return <code>100px</code> and if <code>--is_small</code> is <code>0px</code>, it will return <code>0px</code>.</p><p>How is this useful? See this:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span> * 100<span class="token punctuation">)</span> </span>
<span class="line">  +</span>
<span class="line">  <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_medium<span class="token punctuation">)</span> * 200<span class="token punctuation">)</span> </span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This will return <code>100px + 0px = 100px</code> in the small interval (where <code>--is_small</code> is <code>1px</code> and <code>--is_medium</code> is <code>0px</code>). In the medium interval (where <code>--is_medium</code> is <code>1px</code> and <code>--is_small</code> is <code>0px</code>), it will return <code>0px + 200px = 200px</code>.</p>`,39)),s("p",null,[n[53]||(n[53]=a("Do you get the idea? See Roman Komarov’s ",-1)),s("a",j,[e(o,{icon:"fas fa-globe"}),n[52]||(n[52]=a("article",-1))]),n[54]||(n[54]=a(" for a deeper look at what is going on here because it can be complex to grasp.",-1))]),n[126]||(n[126]=p(`<p>You multiply a pixel value (without a unit) by the corresponding indicator variable and sum up all these terms. So, for a pixel based layout, something like this is sufficient:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span>  * 100<span class="token punctuation">)</span> </span>
<span class="line">  + <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_medium<span class="token punctuation">)</span> * 200<span class="token punctuation">)</span> </span>
<span class="line">  + <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_wide<span class="token punctuation">)</span>   * 500<span class="token punctuation">)</span> </span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>But most of the time, we don’t want pixel-based values. We want concepts, like “full width” or “third width” or maybe even other units, like <code>2rem</code>, <code>65ch</code>, and the like. We’ll have to keep going here for those.</p><hr><h2 id="and-an-absurdly-large-integer-to-select-arbitrary-length-values" tabindex="-1"><a class="header-anchor" href="#and-an-absurdly-large-integer-to-select-arbitrary-length-values"><span>\` and an absurdly large integer to select arbitrary-length values</span></a></h2><p>In the first step, we defined something like this instead of a static pixel value:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--length_4_medium</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">(</span>100% / 2<span class="token punctuation">)</span> - 10px<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>How can we use them then? The <code>min()</code> function to the rescue!</p><p>Let’s define one helper variable:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--very_big_int</span><span class="token punctuation">:</span> 9999<span class="token punctuation">;</span> </span>
<span class="line"><span class="token comment">/* Pure, unitless number. Must be bigger than any length appearing elsewhere. */</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Multiplying this value by an indicator variable gives either <code>0px</code> or <code>9999px</code>. How large this value should be depends on your browser. Chrome will take <code>999999</code>, but Firefox will not accept that high of a number, so <code>9999</code> is a value that will work in both. There are very few viewports larger than <code>9999px</code> around, so we should be OK.</p><p>What happens, then, when we <code>min()</code> this with any value smaller than <code>9999px</code> but bigger than <code>0px</code>?</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token function">min</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--length_4_small<span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span> </span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If, and only if <code>--is_small</code> is <code>0px</code>, it will return <code>0px</code>. If <code>--is_small</code> is <code>1px</code>, the multiplication will return <code>9999px</code> (which is bigger than <code>--length_4_small</code>), and <code>min</code> will return: <code>--length_4_small</code>.</p><p>This is how we can select any length (that is, smaller than <code>9999px</code> but bigger than <code>0px</code>) based on indicator variables.</p>`,15)),s("p",null,[n[56]||(n[56]=a("If you deal with viewports larger than 9999px, then you’ll need to adjust the ",-1)),n[57]||(n[57]=s("code",null,"--very_big_int",-1)),n[58]||(n[58]=a(" variable. This is a bit ugly, but we can fix this the moment pure CSS can ",-1)),s("a",W,[e(o,{icon:"iconfont icon-css-tricks"}),n[55]||(n[55]=a("drop the unit on a value",-1))]),n[59]||(n[59]=a(" in order to get rid of the units at our indicator variables (and directly multiply it with any length). For now, this works.",-1))]),n[127]||(n[127]=p(`<p>We will now combine all the parts and make the Raven fly!</p><hr><h2 id="step-5-bringing-it-all-together" tabindex="-1"><a class="header-anchor" href="#step-5-bringing-it-all-together"><span>Step 5: Bringing it all together</span></a></h2><p>We can now calculate our dynamic container-width-based, breakpoint-driven value like this:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--dyn_length</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_wide<span class="token punctuation">)</span>   * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--length_4_wide<span class="token punctuation">)</span><span class="token punctuation">)</span> </span>
<span class="line">  + <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_medium<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--length_4_medium<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  + <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span>  * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--length_4_small<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Each line is a <code>min()</code> from Step 4. All lines are added up like in Step 3, the indicator variables are from Step 2 and all is based on the configuration we did in Step 1 — they work all together in one big formula!</p>`,6)),s("p",null,[n[63]||(n[63]=a("Want to try it out? Here is a ",-1)),s("a",z,[n[60]||(n[60]=a("is a Pen (",-1)),e(o,{icon:"fa-brands fa-codepen"}),n[61]||(n[61]=s("code",null,"batchman",-1)),n[62]||(n[62]=a(")",-1))]),n[64]||(n[64]=a(" to play with (see the notes in the CSS).",-1))]),e(r,{user:"batchman","slug-hash":"GRZNeaQ",title:"Meet the Raven (can do more tricks than the albatross)","default-tab":["css","result"],theme:c.dark},null,8,["theme"]),n[128]||(n[128]=p(`<p>This Pen uses no flexbox, no grid, no floats. Just some divs. This is to show that helpers are unnecessary in this kind of layout. But feel free to use the Raven with these layouts too as it will help you do more complex layouts.</p><hr><h2 id="anything-else" tabindex="-1"><a class="header-anchor" href="#anything-else"><span>Anything else?</span></a></h2><p>So far, we’ve used fixed pixel values as our breakpoints, but maybe we want to change layout if the container is bigger or smaller than <em>half</em> of the viewport, minus 10px? No problem:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--breakpoint_wide</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50vw - 10px<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>That just works! Other formulas work as well. To avoid strange behavior, we want to use something like:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--breakpoint_medium</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_wide<span class="token punctuation">)</span><span class="token punctuation">,</span> 500px<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>…to set a second breakpoint at <code>500px</code> width. The calculations in Step 2 depend on the fact that <code>--breakpoint_wide</code> is not smaller than <code>--breakpoint_medium</code>. Just keep your breakpoints in the right order: <code>min()</code> and/or <code>max()</code> are very useful here!</p><hr><h2 id="what-about-heights" tabindex="-1"><a class="header-anchor" href="#what-about-heights"><span>What about heights?</span></a></h2><p>The evaluations of all the calculations are done lazily. That is, when assigning <code>--dyn_length</code> to any property, the calculation will be based on whatever <code>--base_size</code> evaluates to in this place. So setting a height will base the breakpoints on 100% height, if <code>--base_size</code> is <code>100%</code>.</p><p>I have not (yet) found a way to set a height based on the width of a container. So, you can use <code>padding-top</code> since <code>100%</code> evaluates to the width for padding.</p><hr><h2 id="what-about-showing-and-hiding-things" tabindex="-1"><a class="header-anchor" href="#what-about-showing-and-hiding-things"><span>What about showing and hiding things?</span></a></h2><p>The simplest way to show and hide things the Raven way is to set the width to <code>100px</code> (or any other suitable width) at the appropriate indicator variable:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">.show_if_small</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span> * 100<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">.show_if_medium</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_medium<span class="token punctuation">)</span> * 100<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">.show_if_wide</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_wide<span class="token punctuation">)</span> * 100<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You need to set:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span></span>
<span class="line"><span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span> <span class="token comment">/* to avoid ugly empty lines */</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>…or some other way to hide things within a box of <code>width: 0px</code>. Completely hiding the box requires setting additional box model properties, including <code>margin</code>, <code>padding</code> and <code>border-width</code>, to <code>0px</code> . The Raven can do this for some properties, but it’s just as effective to fix them to <code>0px</code>.</p><p>Another alternative is to use <code>position: absolute;</code> and draw the element off-screen via <code>left: calc(var(--is_???) * 9999);</code>.</p><hr><h2 id="takeaways" tabindex="-1"><a class="header-anchor" href="#takeaways"><span>Takeaways</span></a></h2><p>We might not need JavaScript at all, even for container query behavior! Certainly, we’d hope that if we actually get container queries in the CSS syntax, it will be a lot easier to use and understand — but it’s also very cool that things are possible in CSS today.</p><p>While working on this, I developed some opinions about other things CSS could use:</p><ul><li>Container-based units like <code>conW</code> and <code>conH</code> to set heights based on width. These units could be based on the root element of the current stacking context.</li><li>Some sort of “evaluate to value” function, to overcome problems with lazy evaluation. This would work great with a “strip unit” function that works at render time.</li></ul><div class="hint-container note"><p class="hint-container-title">Note</p><p>In an earlier version, I had used <code>cw</code> and <code>ch</code> for the units but it was pointed out to me that those can easily be confused by with CSS units with the same name. Thanks to Mikko Tapionlinna and Gilson Nunes Filho in the comments for the tip!</p></div><p>If we had that second one, it would allow us to set colors (in a clean way), borders, <code>box-shadow</code>, <code>flex-grow</code>, <code>background-position</code>, <code>z-index</code>, <code>scale()</code>, and other things with the Raven.</p><p>Together with component-based units, setting child dimensions to the same aspect-ratio as the parent would even be possible. Dividing by a value with unit is not possible; otherwise <code>--indicator / 1px</code> would work as “strip unit” for the Raven.</p><hr><h2 id="bonus-boolean-logic" tabindex="-1"><a class="header-anchor" href="#bonus-boolean-logic"><span>Bonus: Boolean logic</span></a></h2><p>Indicator variables look like boolean values, right? The only difference is they have a “px” unit. What about the logical combination of those? Imagine things like “container is wider than half the screen” <strong>and</strong> “layout is in two-column mode.” CSS functions to the rescue again!</p><p>For the <code>OR</code> operator, we can <code>max()</code> over all of the indicators:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--a_OR_b</span><span class="token punctuation">:</span> <span class="token function">max</span><span class="token punctuation">(</span> <span class="token function">var</span><span class="token punctuation">(</span>--indicator_a<span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--indicator_b<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>For the <code>NOT</code> operator, we can subtract the indicator from <code>1px</code>:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--NOT_a</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>1px - <span class="token function">var</span><span class="token punctuation">(</span>--indicator_a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Logic purists may stop here, since <code>NOR(a,b) = NOT(OR(a,b))</code> is complete boolean algebra. But, hey, just for fun, here are some more:</p><p><code>AND</code>:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--a_AND_b</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--indicator_a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--indicator_b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This evaluates to <code>1px</code> if and only if both indicators are <code>1px</code>.</p><p>Note that <code>min()</code> and <code>max()</code> take more than two arguments. They still work as an <code>AND</code> and <code>OR</code> for (more than two) indicator variables.</p><p><code>XOR</code>:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--a_XOR_b</span><span class="token punctuation">:</span> <span class="token function">max</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--indicator_a<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--indicator_b<span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--indicator_b<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--indicator_a<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If (and only if) both indicators have the same value, both differences are <code>0px</code>, and <code>max()</code> will return this. If the indicators have different values, one term will give <code>-1px</code>, the other will give <code>1px</code>. <code>max()</code> returns <code>1px</code> in this case.</p><p>If anyone is interested in the case where two indicators are equal, use this:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--a_EQ_b</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>1px - </span>
<span class="line">  <span class="token function">max</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token function">var</span><span class="token punctuation">(</span>--indicator_a<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--indicator_b<span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">    <span class="token function">var</span><span class="token punctuation">(</span>--indicator_b<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--indicator_a<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>And yes, this is <code>NOT(a XOR b)</code><em>.</em> I was unable to find a “nicer” solution to this.</p><p>Equality may be interesting for CSS length variables in general, rather than just being used for indicator variables. By using <code>clamp()</code> once again, this might help:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--a_EQUALS_b_general</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line">  1px -</span>
<span class="line">  <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span></span>
<span class="line">        <span class="token function">max</span><span class="token punctuation">(</span></span>
<span class="line">          <span class="token function">var</span><span class="token punctuation">(</span>--var_a<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--var_b<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token function">var</span><span class="token punctuation">(</span>--var_b<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--var_a<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        1px<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Remove the <code>px</code> units to get general equality for unit-less variables (integers).</p><p>I think this is enough boolean logic for most layouts!</p><hr><h2 id="bonus-2-set-the-number-of-columns-in-a-grid-layout" tabindex="-1"><a class="header-anchor" href="#bonus-2-set-the-number-of-columns-in-a-grid-layout"><span>Bonus 2: Set the number of columns in a grid layout</span></a></h2><p>Since the Raven is limited to return CSS length values, it is unable to directly choose the number of columns for a grid (since this is a value without a unit). But there is a way to make it work (assuming we declared the indicator variables like above):</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--number_of_cols_4_wide</span><span class="token punctuation">:</span> 4<span class="token punctuation">;</span></span>
<span class="line"><span class="token property">--number_of_cols_4_medium</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span></span>
<span class="line"><span class="token property">--number_of_cols_4_small</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span>
<span class="line"><span class="token property">--grid_gap</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token property">--grid_columns_width_4_wide</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line"><span class="token punctuation">(</span>100% - <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--number_of_cols_4_wide<span class="token punctuation">)</span> - 1<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--grid_gap<span class="token punctuation">)</span> <span class="token punctuation">)</span> / <span class="token function">var</span><span class="token punctuation">(</span>--number_of_cols_4_wide<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token property">--grid_columns_width_4_medium</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line"><span class="token punctuation">(</span>100% - <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--number_of_cols_4_medium<span class="token punctuation">)</span> - 1<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--grid_gap<span class="token punctuation">)</span> <span class="token punctuation">)</span> / <span class="token function">var</span><span class="token punctuation">(</span>--number_of_cols_4_medium<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token property">--grid_columns_width_4_small</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line"><span class="token punctuation">(</span>100% - <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--number_of_cols_4_small<span class="token punctuation">)</span> - 1<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--grid_gap<span class="token punctuation">)</span> <span class="token punctuation">)</span> / <span class="token function">var</span><span class="token punctuation">(</span>--number_of_cols_4_small<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token property">--raven_grid_columns_width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span> <span class="token comment">/*  use the Raven to combine the values  */</span></span>
<span class="line">  <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_wide<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">var</span><span class="token punctuation">(</span>--grid_columns_width_4_wide<span class="token punctuation">)</span><span class="token punctuation">)</span> </span>
<span class="line">  + <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_medium<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">var</span><span class="token punctuation">(</span>--grid_columns_width_4_medium<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  + <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">var</span><span class="token punctuation">(</span>--grid_columns_width_4_small<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>And set your grid up with:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">.grid_container</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> <span class="token function">repeat</span><span class="token punctuation">(</span>auto-fit<span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--raven_grid_columns_width<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">gap</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--grid_gap<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>How does this work?</p><ol><li>Define the number of columns we want for each interval (lines 1, 2, 3)</li><li>Calculate the perfect width of the columns for each interval (lines 5, 6, 7).</li></ol><div class="hint-container info"><p class="hint-container-title">What is happening here?</p><p>First, we calculate the available space for our columns. This is <code>100%</code>, minus the place the gaps will take. For <code>n</code> columns, there are <code>(n-1)</code> gaps. This space is then divided by the number of columns we want.</p></div><ol start="3"><li>Use the Raven to calculate the right column’s width for the actual <code>--base_size</code>.</li></ol><p>In the grid container, this line:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">grid-template-columns</span><span class="token punctuation">:</span> <span class="token function">repeat</span><span class="token punctuation">(</span>auto-fit<span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--raven_grid_columns_width<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>…then chooses the number of columns to fit the value the Raven provided (which will result in our <code>--number_of_cols_4_???</code> variables from above).</p><p>The Raven may not be able give the number of columns directly, but it can give a length to make <code>repeat</code> and <code>autofit</code> calculate the number we want for us.</p>`,64)),s("p",null,[n[68]||(n[68]=a("But ",-1)),n[69]||(n[69]=s("code",null,"auto-fit",-1)),n[70]||(n[70]=a(" with ",-1)),n[71]||(n[71]=s("code",null,"minmax()",-1)),n[72]||(n[72]=a(" does the same thing, right? No! The solution above will never give three columns (or five) and the number of columns does not need to increase with the width of the container. Try to set the following values ",-1)),s("a",O,[n[65]||(n[65]=a("in this Pen (",-1)),e(o,{icon:"fa-brands fa-codepen"}),n[66]||(n[66]=s("code",null,"batchman",-1)),n[67]||(n[67]=a(")",-1))]),n[73]||(n[73]=a(" to see the Raven take full flight:",-1))]),e(r,{user:"batchman","slug-hash":"GRZVGQx",title:"Raven for grid-columns","default-tab":["css","result"],theme:c.dark},null,8,["theme"]),n[129]||(n[129]=p(`<div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--number_of_cols_4_wide</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span>
<span class="line"><span class="token property">--number_of_cols_4_medium</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span></span>
<span class="line"><span class="token property">--number_of_cols_4_small</span><span class="token punctuation">:</span> 4<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="bonus-3-change-the-background-color-with-a-linear-gradient" tabindex="-1"><a class="header-anchor" href="#bonus-3-change-the-background-color-with-a-linear-gradient"><span>Bonus 3: Change the <code>background-color</code> with a <code>linear-gradient()</code></span></a></h2>`,3)),s("p",null,[n[75]||(n[75]=a("This one is a little more mind-bending. The Raven is all about length values, so how can we get a color out of these? Well, ",-1)),e(u,{to:"/css-tricks.com/css3-gradients.html"},{default:t(()=>[...n[74]||(n[74]=[s("strong",null,"linear gradients",-1)])]),_:1}),n[76]||(n[76]=a(" deal with both. They define colors in certain areas defined by length values. Let’s go through that concept in more detail before getting to the code.",-1))]),s("p",null,[n[78]||(n[78]=a("To work around the actual gradient part, it is a well known technique to ",-1)),s("a",B,[e(o,{icon:"iconfont icon-css-tricks"}),n[77]||(n[77]=a("double up a color stop",-1))]),n[79]||(n[79]=a(", effectively making the gradient part happen within ",-1)),n[80]||(n[80]=s("code",null,"0px",-1)),n[81]||(n[81]=a(". Look at this code to see how this is done:",-1))]),n[130]||(n[130]=p(`<div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">background-image</span><span class="token punctuation">:</span><span class="token function">linear-gradient</span><span class="token punctuation">(</span></span>
<span class="line">  to right<span class="token punctuation">,</span></span>
<span class="line">  red 0%<span class="token punctuation">,</span></span>
<span class="line">  red 50%<span class="token punctuation">,</span></span>
<span class="line">  blue 50%<span class="token punctuation">,</span></span>
<span class="line">  blue 100%</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This will color your background red on the left half, blue on the right. Note the first argument “to right.” This implies that percentage values are evaluated horizontally, from left to right.</p><p>Controlling the values of <code>50%</code> via Raven variables allows for shifting the color stop at will. And we can add more color stops. In the running example, we need three colors, resulting in two (doubled) inner color stops.</p><p>Adding some variables for color and color stops, this is what we get:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span></span>
<span class="line">  to right<span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_small<span class="token punctuation">)</span> 0px<span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_small<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--first_lgbreak_value<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_medium<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--first_lgbreak_value<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_medium<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--second_lgbreak_value<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_wide<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--second_lgbreak_value<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_wide<span class="token punctuation">)</span> 100%</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>But how do we calculate the values for <code>--first_lgbreak_value</code> and <code>--second_lgbreak_value</code>? Let’s see.</p><p>The first value controls where <code>--color_small</code> is visible. On the small interval, it should be <code>100%</code>, and <code>0px</code> in the other intervals. We’ve seen how to do this with the raven. The second variable controls the visibility of <code>--color_medium</code>. It should be <code>100%</code> for the small interval, <code>100%</code> for the medium interval, but <code>0px</code> for the wide interval. The corresponding indicator must be <code>1px</code> if the container width is in the small <em>or</em> the medium interval.</p><p>Since we can do boolean logic on indicators, it is:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token function">max</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">,</span> --is_medium<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>…to get the right indicator. This gives:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--first_lgbreak_value</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span> 100%<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token property">--second_lgbreak_value</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--is_medium<span class="token punctuation">)</span><span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span> 100%<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Putting things together results in this CSS code to change the <code>background-color</code> based on the width (the interval indicators are calculated like shown above):</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--first_lgbreak_value</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span></span>
<span class="line">      <span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span> 100%<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token property">--second_lgbreak_value</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--is_small<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--is_medium<span class="token punctuation">)</span><span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--very_big_int<span class="token punctuation">)</span><span class="token punctuation">,</span> 100%<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token property">--color_wide</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><span class="token comment">/* change to your needs*/</span></span>
<span class="line"><span class="token property">--color_medium</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span><span class="token comment">/* change to your needs*/</span></span>
<span class="line"><span class="token property">--color_small</span><span class="token punctuation">:</span> lightblue<span class="token punctuation">;</span><span class="token comment">/* change to your needs*/</span></span>
<span class="line"></span>
<span class="line"><span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span></span>
<span class="line">  to right<span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_small<span class="token punctuation">)</span> 0px<span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_small<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--first_lgbreak_value<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_medium<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--first_lgbreak_value<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_medium<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--second_lgbreak_value<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_wide<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--second_lgbreak_value<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">var</span><span class="token punctuation">(</span>--color_wide<span class="token punctuation">)</span> 100%</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,13)),s("p",null,[s("a",N,[n[82]||(n[82]=a("Here’s a Pen (",-1)),e(o,{icon:"iconfont icon-css-tricks"}),n[83]||(n[83]=a(")",-1))]),n[84]||(n[84]=a(" to see that in action.",-1))]),e(r,{user:"batchman","slug-hash":"XWdvPVo",title:"Raven for grid-columns","default-tab":["css","result"],theme:c.dark},null,8,["theme"]),n[131]||(n[131]=p(`<hr><h2 id="bonus-4-getting-rid-of-nested-variables" tabindex="-1"><a class="header-anchor" href="#bonus-4-getting-rid-of-nested-variables"><span>Bonus 4: Getting rid of nested variables</span></a></h2><p>While working with the Raven, I came across a strange problem: There is a limit on the number of nested variables that can be used in <code>calc()</code><em>.</em> This can cause some problems when using too many breakpoints. As far as I understand, this limit is in place to prevent page blocking while calculating the styles and allow for faster circle-reference checks.</p><p>In my opinion, something like <em>evaluate to value</em> would be a great way to overcome this. Nevertheless, this limit can give you a headache when pushing the limits of CSS. Hopefully this problem will be tackled in the future.</p><p>There is a way to calculate the indicator variables for the Raven without the need of (deeply) nested variables. Let’s look at the original calculation for the <code>--is_medium</code> value:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--is_medium</span><span class="token punctuation">:</span><span class="token function">calc</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span> </span>
<span class="line">        <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_medium<span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">        1px<span class="token punctuation">)</span> </span>
<span class="line">        - <span class="token function">var</span><span class="token punctuation">(</span>--is_wide<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The problem occurs with the subtraction of <code>--is_wide</code> . This causes the CSS parser to paste in the definition of the complete formula of <code>--is_wide</code>. The calculation of <code>--is_small</code> has even more of these types of references. (The definition for <code>--is_wide</code> will even be pasted twice since it is hidden within the definition of <code>--is_medium</code> and is also used directly.)</p><p>Fortunately, there is a way to calculate indicators without referencing indicators for bigger breakpoints.</p><p>The indicator is true if, and only if, <code>--base_size</code> is bigger than the lower breakpoint for the interval and smaller or equal than the higher breakpoint for the interval. This definition gives us the following code:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--is_medium</span><span class="token punctuation">:</span> </span>
<span class="line">  <span class="token function">min</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_medium<span class="token punctuation">)</span><span class="token punctuation">,</span> 1px<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span> 1px + <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_wide<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span><span class="token punctuation">,</span> 1px<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>min()</code> is used as a logical AND operator</li><li>the first <code>clamp()</code> is “<code>--base_size</code> is bigger than <code>--breakpoint_medium</code>”</li><li>the second <code>clamp()</code> means “<code>--base_size</code> is smaller or equal than <code>--breakpoint_wide</code>.”</li><li>Adding <code>1px</code> switches from “smaller than” to “smaller <strong>or equal</strong> than.” This works, because we are dealing with whole (pixel) numbers (<code>a &lt;= b</code> means <code>a &lt; (b+1)</code> for whole numbers).</li></ul><p>The complete calculation of the indicator variables can be done this way:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">--is_wide</span><span class="token punctuation">:</span> <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_wide<span class="token punctuation">)</span><span class="token punctuation">,</span> 1px<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token property">--is_medium</span><span class="token punctuation">:</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_medium<span class="token punctuation">)</span><span class="token punctuation">,</span> 1px<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                 <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span> 1px + <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_wide<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span><span class="token punctuation">,</span> 1px<span class="token punctuation">)</span></span>
<span class="line">             <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token property">--is_small</span><span class="token punctuation">:</span> <span class="token function">clamp</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span>1px + <span class="token function">var</span><span class="token punctuation">(</span>--breakpoint_medium<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--base_size<span class="token punctuation">)</span><span class="token punctuation">,</span> 1px<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The calculations for <code>--is_wide</code> and <code>--is_small</code> are simpler, because only one given breakpoint needs to be checked for each.</p>`,14)),s("p",null,[n[87]||(n[87]=a("This works with all the things we’ve looked at so far. ",-1)),s("a",P,[n[85]||(n[85]=a("Here’s a Pen (",-1)),e(o,{icon:"iconfont icon-css-tricks"}),n[86]||(n[86]=a(")",-1))]),n[88]||(n[88]=a(" that combines examples.",-1))]),e(r,{user:"batchman","slug-hash":"YzWKpOr",title:"A less nested Raven","default-tab":["css","result"],theme:c.dark},null,8,["theme"]),n[132]||(n[132]=p('<hr><h2 id="final-thoughts" tabindex="-1"><a class="header-anchor" href="#final-thoughts"><span>Final thoughts</span></a></h2><p>The Raven is not capable of all the things that a media query can do. But we don’t need it to do that, as we have media queries in CSS. It is fine to use them for the “big” design changes, like the position of a sidebar or a reconfiguration of a menu. Those things happen within the context of the full viewport (the size of the browser window).</p><p>But for components, media queries are kind of <em>wrong</em>, since we never know how components will be sized.</p><p>Heydon Pickering demonstrated this problem with this image:</p><figure><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/10/RT_x4UFA.png?resize=1200%2C482&amp;ssl=1" alt="Three boxes representing browsers from left-to-right. The first is a wide viewport with three boxes in a single row. The second is a narrow viewport with the boxes stacked vertically. The third is a wide viewport, but with a dashed vertical line down the middle representing a container and the three boxes are to the right of it in a single row." tabindex="0" loading="lazy"><figcaption>Three boxes representing browsers from left-to-right. The first is a wide viewport with three boxes in a single row. The second is a narrow viewport with the boxes stacked vertically. The third is a wide viewport, but with a dashed vertical line down the middle representing a container and the three boxes are to the right of it in a single row.</figcaption></figure><p>I hope that the Raven helps you to overcome the problems of creating responsive layouts for components and pushes the limits of “what can be done with CSS” a little bit further.</p>',7)),s("p",null,[n[90]||(n[90]=a("By showing what is possible today, maybe “real” container queries can be done by adding some syntax sugar and some very small new functions (like ",-1)),n[91]||(n[91]=s("code",null,"conW",-1)),n[92]||(n[92]=a(", ",-1)),n[93]||(n[93]=s("code",null,"conH",-1)),n[94]||(n[94]=a(", “strip-unit” or “evaluate-to-pixels”). If there was a function in CSS that allows to rewrite “",-1)),n[95]||(n[95]=s("code",null,"1px",-1)),n[96]||(n[96]=a("” to a whitespace, and “",-1)),n[97]||(n[97]=s("code",null,"0px",-1)),n[98]||(n[98]=a("” to “",-1)),n[99]||(n[99]=s("code",null,"initial",-1)),n[100]||(n[100]=a("“, the Raven could be combined with the ",-1)),e(u,{to:"/css-tricks.com/the-css-custom-property-toggle-trick.html"},{default:t(()=>[...n[89]||(n[89]=[s("strong",null,"Custom Property Toggle Trick",-1)])]),_:1}),n[101]||(n[101]=a(" and change every CSS property, not just length values.",-1))]),n[133]||(n[133]=s("p",null,"By avoiding JavaScript for this, your layouts will render faster because it’s not dependent on JavaScript downloading or running. It doesn’t even matter if JavaScript is disabled. These calculations will not block your main thread and your application logic isn’t cluttered with design logic.",-1)),s("div",F,[n[113]||(n[113]=s("p",{class:"hint-container-title"},"Note",-1)),s("p",null,[n[107]||(n[107]=a("Thanks to ",-1)),s("a",H,[e(o,{icon:"iconfont icon-css-tricks"}),n[102]||(n[102]=a("Chris",-1))]),n[108]||(n[108]=a(", ",-1)),s("a",L,[e(o,{icon:"iconfont icon-css-tricks"}),n[103]||(n[103]=a("Andrés Galante",-1))]),n[109]||(n[109]=a(", ",-1)),s("a",Q,[e(o,{icon:"iconfont icon-css-tricks"}),n[104]||(n[104]=a("Cathy Dutton",-1))]),n[110]||(n[110]=a(", ",-1)),s("a",M,[e(o,{icon:"iconfont icon-css-tricks"}),n[105]||(n[105]=a("Marko Ilic",-1))]),n[111]||(n[111]=a(", and ",-1)),s("a",D,[e(o,{icon:"iconfont icon-css-tricks"}),n[106]||(n[106]=a("David Atanda",-1))]),n[112]||(n[112]=a(" for their great CSS-Tricks articles. They really helped me explore what can be done with the Raven.",-1))])]),g(" TODO: add ARTICLE CARD "),e(d,k(h({title:"The Raven Technique: One Step Closer to Container Queries",desc:"For the millionth time: We need container queries in CSS! And guess what, it looks like we're heading in that direction.",link:"https://chanhi2000.github.io/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html",logo:"https://css-tricks/favicon.svg",background:"rgba(17,17,17,0.2)"})),null,16)])}const J=v(y,[["render",U]]),G=JSON.parse('{"path":"/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html","title":"The Raven Technique: One Step Closer to Container Queries","lang":"en-US","frontmatter":{"lang":"en-US","title":"The Raven Technique: One Step Closer to Container Queries","description":"Article(s) > The Raven Technique: One Step Closer to Container Queries","icon":"fa-brands fa-css3-alt","category":["CSS","Article(s)"],"tag":["blog","css-tricks.com","css"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"The Raven Technique: One Step Closer to Container Queries\\",\\"image\\":[\\"https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/10/RT_x4UFA.png?resize=1200%2C482&ssl=1\\"],\\"datePublished\\":\\"2020-11-10T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mathias Hülsbusch\\",\\"url\\":\\"https://css-tricks.com/author/mathiashulsbusch/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"The Raven Technique: One Step Closer to Container Queries"}],["meta",{"property":"og:description","content":"Article(s) > The Raven Technique: One Step Closer to Container Queries"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/10/RT_x4UFA.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/10/RT_x4UFA.png"}],["meta",{"name":"twitter:image:alt","content":"The Raven Technique: One Step Closer to Container Queries"}],["meta",{"property":"article:author","content":"Mathias Hülsbusch"}],["meta",{"property":"article:tag","content":"css"}],["meta",{"property":"article:tag","content":"css-tricks.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2020-11-10T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > The Raven Technique: One Step Closer to Container Queries"},{"property":"og:description","content":"The Raven Technique: One Step Closer to Container Queries"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.html"}]],"prev":"/programming/css/articles/README.md","date":"2020-11-10T00:00:00.000Z","isOriginal":false,"author":[{"name":"Mathias Hülsbusch","url":"https://css-tricks.com/author/mathiashulsbusch/"}],"cover":"https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/10/RT_x4UFA.png"},"git":{},"readingTime":{"minutes":16.07,"words":4822},"filePathRelative":"css-tricks.com/the-raven-technique-one-step-closer-to-container-queries.md","copyright":{"author":"Mathias Hülsbusch"}}');export{J as comp,G as data};
