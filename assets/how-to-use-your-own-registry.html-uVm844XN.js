import{_ as h}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as g,d as n,f as o,b as r,a as y,t as b,n as p,g as c,w as u,e as t,r as a,o as v}from"./app-BItykJLQ.js";const k={},f={id:"frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´",tabindex:"-1"},w={class:"header-anchor",href:"#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"},D={class:"table-of-contents"},A={href:"http://docs.docker.io/en/latest/installation/upgrading/",target:"_blank",rel:"noopener noreferrer"},x={href:"https://github.com/dotcloud/docker-registry",target:"_blank",rel:"noopener noreferrer"},S={href:"http://docs.docker.io/en/latest/examples/",target:"_blank",rel:"noopener noreferrer"},R={href:"https://github.com/dotcloud/docker-registry/blob/master/README.md",target:"_blank",rel:"noopener noreferrer"},I={class:"hint-container info"},j={href:"https://x.com/sam_alba",target:"_blank",rel:"noopener noreferrer"};function P(d,e){const i=a("VPCard"),l=a("router-link"),m=a("SiteInfo"),s=a("VPIcon");return v(),g("div",null,[n("h1",f,[n("a",w,[n("span",null,b(d.$frontmatter.title)+" Í¥ÄÎ†®",1)])]),o(i,p(c({title:"Docker > Article(s)",desc:"Article(s)",link:"/devops/docker/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),n("nav",D,[n("ul",null,[n("li",null,[o(l,{to:"#using-push-and-pull"},{default:u(()=>[...e[0]||(e[0]=[t("Using Push and Pull",-1)])]),_:1})]),n("li",null,[o(l,{to:"#install-your-registry-on-your-server-or-locally"},{default:u(()=>[...e[1]||(e[1]=[t("Install your Registry (on your server or locally)",-1)])]),_:1})])])]),e[28]||(e[28]=n("hr",null,null,-1)),o(m,{name:"How to use your own private local registry with Docker",desc:"Learn how to use a local registry with Docker to push images that contain proprietary code or confidential information that needs to remain private.",url:"https://docker.com/blog/how-to-use-your-own-registry",logo:"https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png",preview:"https://docker.com/app/uploads/2013/06/sam.jpeg"}),e[29]||(e[29]=n("p",null,[t("One of the things that makes Docker so useful is how easy it is to pull ready-to-use images from a central location, Docker‚Äôs "),n("em",null,"CentralRegistry"),t(". It is just as easy to "),n("em",null,"push"),t(" your own image (or collection of tagged images as a"),n("em",null,"repository"),t(") to the same publicregistry so that everyone can benefit from your newly Dockerized service.")],-1)),e[30]||(e[30]=n("p",null,"But sometimes you can‚Äôt share your repository with the world because it contains proprietary code or confidential information. Today we are introducing an easy way to share repositories on your own registry so that you can control access to them and still share them among multiple Docker daemons. You can decide if your registry is public or private.",-1)),n("p",null,[e[6]||(e[6]=t("You‚Äôll need the ",-1)),n("a",A,[o(s,{icon:"fa-brands fa-docker"}),e[2]||(e[2]=t("latest version of Docker",-1))]),e[7]||(e[7]=t(" (>=0.5.0) to use this new feature, and you must run this version as both the daemon and the client. You‚Äôll also need the ",-1)),n("a",x,[e[3]||(e[3]=t("Docker registry code (",-1)),o(s,{icon:"iconfont icon-github"}),e[4]||(e[4]=n("code",null,"dotcloud/docker-registry",-1)),e[5]||(e[5]=t(")",-1))]),e[8]||(e[8]=t(".",-1))]),e[31]||(e[31]=r(`<hr><h2 id="using-push-and-pull" tabindex="-1"><a class="header-anchor" href="#using-push-and-pull"><span>Using Push and Pull</span></a></h2><p>The default way of pushing and pulling repositories from the Central Registry has not changed:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># Pull the ubuntu base image:</span></span>
<span class="line"><span class="token function">docker</span> pull ubuntu</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Push the Hipache image (if you&#39;re samalba!)</span></span>
<span class="line"><span class="token function">docker</span> push samalba/hipache</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4)),n("p",null,[e[10]||(e[10]=t("Implicitly that ",-1)),e[11]||(e[11]=n("code",null,"push",-1)),e[12]||(e[12]=t(" and ",-1)),e[13]||(e[13]=n("code",null,"pull",-1)),e[14]||(e[14]=t(" each access the Central Registry at ",-1)),e[15]||(e[15]=n("code",null,"index.docker.io",-1)),e[16]||(e[16]=t(", so nothing has changed with the default behavior and all ",-1)),n("a",S,[o(s,{icon:"fa-brands fa-docker"}),e[9]||(e[9]=t("the examples",-1))]),e[17]||(e[17]=t(" still work.",-1))]),e[32]||(e[32]=r(`<div class="hint-container info"><p class="hint-container-title">Now the new feature!</p><p>To push to or pull from your <em>own</em> registry, you just need to add the registry‚Äôs location to the repository name. It will look like <code>my.registry.address:port/repositoryname</code>.</p></div><p>Let‚Äôs say I want to push the repository ‚Äúubuntu‚Äù to my local registry, which runs on my local machine, on the port 5000:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># First, make sure you have the &quot;ubuntu&quot; repository:</span></span>
<span class="line"><span class="token function">docker</span> pull ubuntu</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Then, find the image id that corresponds to the ubuntu repository</span></span>
<span class="line"><span class="token function">docker</span> images <span class="token operator">|</span> <span class="token function">grep</span> ubuntu <span class="token operator">|</span> <span class="token function">grep</span> latest</span>
<span class="line">ubuntu  latest  8dbd9e392a96  <span class="token number">12</span> weeks ago  <span class="token number">263</span> MB <span class="token punctuation">(</span>virtual <span class="token number">263</span> MB<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Almost there!</span></span>
<span class="line"><span class="token comment"># Tag to create a repository with the full registry location.</span></span>
<span class="line"><span class="token comment"># The location becomes a permanent part of the repository name.</span></span>
<span class="line"><span class="token function">docker</span> tag 8dbd9e392a96 localhost.localdomain:5000/ubuntu</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Finally, push the new repository to its home location.</span></span>
<span class="line"><span class="token function">docker</span> push localhost.localdomain:5000/ubuntu</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Obviously, the push will fail if no registry server answer locally on the port 5000. We‚Äôll briefly show how to start your own registry server at the end of this blog post.</p><p>It‚Äôs important to note that we‚Äôre using a domain containing a ‚Äú.‚Äù here, i.e. <code>localhost.domain</code>. Docker looks for either a ‚Äú.‚Äù (domain separator) or ‚Äú:‚Äù (port separator) to learn that the first part of the repository name is a location and not a user name. If you just had <code>localhost</code> without either <code>.localdomain</code> or <code>:5000</code> (either one would do) then Docker would believe that <code>localhost</code> is a username, as in <code>localhost/ubuntu</code> or <code>samalba/hipache</code>. It would then try to push to the default Central Registry. Having a dot or colon in the first part tells Docker that this name contains a hostname and that it should push to your specified location instead.</p><hr><h2 id="install-your-registry-on-your-server-or-locally" tabindex="-1"><a class="header-anchor" href="#install-your-registry-on-your-server-or-locally"><span>Install your Registry (on your server or locally)</span></a></h2>`,7)),n("p",null,[e[21]||(e[21]=t("Docker-Registry is a simple Python app, ",-1)),n("a",R,[e[18]||(e[18]=t("installing it is straight-forward (",-1)),o(s,{icon:"iconfont icon-github"}),e[19]||(e[19]=n("code",null,"dotcloud/docker-registry",-1)),e[20]||(e[20]=t(")",-1))]),e[22]||(e[22]=t(":",-1))]),e[33]||(e[33]=r(`<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">git</span> clone https://github.com/dotcloud/docker-registry.git</span>
<span class="line"><span class="token builtin class-name">cd</span> docker-registry</span>
<span class="line"><span class="token function">cp</span> config_sample.yml config.yml</span>
<span class="line">pip <span class="token function">install</span> <span class="token parameter variable">-r</span> requirements.txt</span>
<span class="line"></span>
<span class="line">gunicorn --access-logfile -<span class="token punctuation">\\</span></span>
<span class="line">--log-level debug <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">--debug</span> <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">-b</span> <span class="token number">0.0</span>.0.0:5000 <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">-w</span> <span class="token number">1</span> wsgi:application</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Your Registry is now running on localhost (port 5000) in a development flavor and using local storage. Obviously, in a production environment, you might want to run the Registry on port 443 (or 80 on a local network) and make it accessible on a hostname like ‚Äúregistry.domain.tld‚Äù, and point it to use S3 or other storage.</p>`,2)),n("div",I,[e[25]||(e[25]=n("p",{class:"hint-container-title"},"About Sam Alba",-1)),e[26]||(e[26]=n("figure",null,[n("img",{src:"https://docker.com/app/uploads/2013/06/sam.jpeg",alt:"Sam Alba",tabindex:"0",loading:"lazy"}),n("figcaption",null,"Sam Alba")],-1)),e[27]||(e[27]=n("p",null,"As dotCloud‚Äôs first engineering hire, Sam was part of the tiny team that shipped our first private beta in 2010. Since then, he has been instrumental in scaling the platform to tens of millions of unique visitors for tens of thousands of developers across the world, leaving his mark on every major feature and component along the way. Today, as dotCloud‚Äôs first director of engineering, he manages our fast-growing engineering team, which is another way to say he sits in meetings so that other engineers don‚Äôt have to. When not sitting in a meeting, he maintains several popular open-source projects, including Hipache and Cirruxcache and other projects also ending in ‚Äú-ache‚Äù. In a previous life, Sam supported Fortune 500s at Akamai, built the web infrastructure at several startups, and wrote software for self-driving cars in a research lab at INRIA.",-1)),n("p",null,[n("em",null,[e[24]||(e[24]=t("Connect with Sam on Twitter! ",-1)),n("a",j,[o(s,{icon:"fa-brands fa-x-twitter"}),e[23]||(e[23]=n("code",null,"@sam_alba",-1))])])])]),y(" TODO: add ARTICLE CARD "),o(i,p(c({title:"How to use your own private local registry with Docker",desc:"Learn how to use a local registry with Docker to push images that contain proprietary code or confidential information that needs to remain private.",link:"https://chanhi2000.github.io/bookshelf/docker.com/how-to-use-your-own-registry.html",logo:"https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png",background:"rgba(29,99,237,0.2)"})),null,16)])}const H=h(k,[["render",P]]),O=JSON.parse('{"path":"/docker.com/how-to-use-your-own-registry.html","title":"How to use your own private local registry with Docker","lang":"en-US","frontmatter":{"lang":"en-US","title":"How to use your own private local registry with Docker","description":"Article(s) > How to use your own private local registry with Docker","icon":"fa-brands fa-docker","category":["DevOps","Docker","Article(s)"],"tag":["blog","docker.com","devops","docker"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"How to use your own private local registry with Docker\\",\\"image\\":[\\"https://docker.com/app/uploads/2013/06/sam.jpeg\\"],\\"datePublished\\":\\"2013-07-20T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Sam Alba\\",\\"url\\":\\"https://docker.com/author/sam/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/docker.com/how-to-use-your-own-registry.html"}],["meta",{"property":"og:site_name","content":"üìöBookshelf"}],["meta",{"property":"og:title","content":"How to use your own private local registry with Docker"}],["meta",{"property":"og:description","content":"Article(s) > How to use your own private local registry with Docker"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://docker.com/app/uploads/2013/06/sam.jpeg"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://docker.com/app/uploads/2013/06/sam.jpeg"}],["meta",{"name":"twitter:image:alt","content":"How to use your own private local registry with Docker"}],["meta",{"property":"article:author","content":"Sam Alba"}],["meta",{"property":"article:tag","content":"docker"}],["meta",{"property":"article:tag","content":"devops"}],["meta",{"property":"article:tag","content":"docker.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2013-07-20T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > How to use your own private local registry with Docker"},{"property":"og:description","content":"How to use your own private local registry with Docker"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/docker.com/how-to-use-your-own-registry.html"}]],"prev":"/devops/docker/articles/README.md","date":"2013-07-20T00:00:00.000Z","isOriginal":false,"author":[{"name":"Sam Alba","url":"https://docker.com/author/sam/"}],"cover":"https://docker.com/app/uploads/2013/06/sam.jpeg"},"git":{},"readingTime":{"minutes":3.55,"words":1066},"filePathRelative":"docker.com/how-to-use-your-own-registry.md","copyright":{"author":"Sam Alba"}}');export{H as comp,O as data};
