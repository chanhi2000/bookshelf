import{_ as m}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as d,d as e,f as a,b as u,t as h,n as k,g as y,w as o,r as n,o as g,e as c}from"./app-BItykJLQ.js";const b={},f={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},w={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},v={class:"table-of-contents"};function F(r,t){const i=n("VPCard"),s=n("router-link"),p=n("SiteInfo"),l=n("KotlinPlayground");return g(),d("div",null,[e("h1",f,[e("a",w,[e("span",null,h(r.$frontmatter.title)+" ê´€ë ¨",1)])]),a(i,k(y({title:"Java > Article(s)",desc:"Article(s)",link:"/programming/java/articles/README.md",logo:"https://chanhi2000.github.io/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),e("nav",v,[e("ul",null,[e("li",null,[a(s,{to:"#contracts-are-inherited"},{default:o(()=>[...t[0]||(t[0]=[c("Contracts are inherited",-1)])]),_:1})]),e("li",null,[a(s,{to:"#summary"},{default:o(()=>[...t[1]||(t[1]=[c("Summary",-1)])]),_:1})])])]),t[2]||(t[2]=e("hr",null,null,-1)),a(p,{name:"Item 31: Respect abstraction contracts",desc:"Just because we can do something, does not mean we should. How to respect abstraction contracts and why it is so important.",url:"https://kt.academy/article/ek-respect-contracts",logo:"https://kt.academy/logo.png",preview:"https://kt.academy/_next/image?url=https%3A%2F%2Fmarcinmoskala.com%2FEffectiveKotlin-Book%2Fpromotion%2Frespect_contracts.jpg&w=1200&q=75"}),t[3]||(t[3]=e("p",null,"Both contracts and visibility are kind of an agreement between developers. This agreement can nearly always be violated by a user. Technically, everything in a single project can be hacked. For instance, it is possible to use reflection to open and use anything we want:",-1)),a(l,{title:"1",key:"3ed57594",settings:"%7B%7D",files:"eJyVUsFqwzAM/RVhdkihpGzHQA+DrdDDYDB2mndwY7XzcJRguxml7N9neXEaRjtoCNig957es/Qmaqu8h8ems+0BEY6SADpnehUQemXB6ArWFGAJd1xqe3TOaITtniC0L8EZ2hWzWJbi1aMrjF7eGD2TQtJUiuHDfbWnOpiWIit14y+WKFgqpHg+ERIKamUtailmjP2WFH9JLMeFAT1K4pCjGhMNTcZClQKXGuPpUD9hs0GX+T77gXJrnA9wBBNKUg3CkhP+SSAFG8oM1XX2wAx/X9fovdnYSIPg9jiFse3RZwx1yvOhaIfZ91qfCTMHwq/170QuBPtUvSp3GB6GgCuDVsd3NfkJrzLrMYw2huZTy40y4xh5WTI0KmXLRWr636wSYLGAWKfgKz7PbkDap4uPNIfbJJQ26aQ9Fc77ycAYQbz/AAl1B6I="}),t[4]||(t[4]=u(`<p>Just because you can do something doesnâ€™t mean that it is fine to do it. Here, we very strongly depend on implementation details, such as the names of the private property and the private function. They are not part of the contract at all, so they might change at any moment. This is like a ticking time bomb for our program.</p><p>Remember that a contract is like a warranty. As long as you use your computer correctly, the warranty protects you. When you open your computer and start hacking it, you lose your warranty. The same principle applies here: when you break the contract, it is your problem when the implementation changes and your code stops working.</p><hr><h2 id="contracts-are-inherited" tabindex="-1"><a class="header-anchor" href="#contracts-are-inherited"><span>Contracts are inherited</span></a></h2><p>It is especially important to respect contracts when we inherit from classes, or when we extend interfaces from another library. Remember that a children should respect parents contracts. For instance, every class extends <code>Any</code> that has <code>equals</code> and <code>hashCode</code> methods. Both those methods have well-established contracts that we need to respect. If we donâ€™t, our objects might not work correctly. For instance, when <code>hashCode</code> is not consistent with <code>equals</code>, our object might not behave correctly on <code>HashSet</code>. The behavior shown below is incorrect because a set should not allow duplicates:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">class</span> <span class="token function">Id</span><span class="token punctuation">(</span><span class="token keyword">val</span> id<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">equals</span><span class="token punctuation">(</span>other<span class="token operator">:</span> Any<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token operator">=</span></span>
<span class="line">      other <span class="token keyword">is</span> Id &amp;amp<span class="token punctuation">;</span>&amp;amp<span class="token punctuation">;</span> other<span class="token punctuation">.</span>id <span class="token operator">==</span> id</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> mutableSet <span class="token operator">=</span> <span class="token function">mutableSetOf</span><span class="token punctuation">(</span><span class="token function">Id</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">mutableSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">Id</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">mutableSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">Id</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>mutableSet<span class="token punctuation">.</span>size<span class="token punctuation">)</span> <span class="token comment">// 3</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In this case, the violated contract is that <code>hashCode</code> implementation should be consistent with <code>equals</code>. We will discuss it in the <em>Item 43: Respect the contract of <code>hashCode</code></em>. We will also discuss many other contracts defined by methods from <code>Any</code> in the <em>Chapter 6: Class design</em>. For now, remember to check and respect the expectations on the functions you override.</p><hr><h2 id="summary" tabindex="-1"><a class="header-anchor" href="#summary"><span>Summary</span></a></h2><p>If you want your programs to be stable, respect contracts. If you are forced to break them, document this fact well. Such information will be very helpful to whoever maintains your code, even if thatâ€™s just you in a few yearsâ€™ time.</p>`,10))])}const _=m(b,[["render",F]]),R=JSON.parse('{"path":"/kt.academy/ek-respect-contracts.html","title":"Item 31: Respect abstraction contracts","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Item 31: Respect abstraction contracts","description":"Article(s) > Item 31: Respect abstraction contracts","icon":"iconfont icon-kotlin","category":["Kotlin","Article(s)"],"tag":["blog","kt.academy","kotlin","kdoc"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Item 31: Respect abstraction contracts\\",\\"image\\":[\\"https://kt.academy/_next/image?url=https%3A%2F%2Fmarcinmoskala.com%2FEffectiveKotlin-Book%2Fpromotion%2Frespect_contracts.jpg&w=1200&q=75\\"],\\"datePublished\\":\\"2024-07-22T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Marcin MoskaÅ‚a\\",\\"url\\":\\"https://kt.academy/user/marcinmoskala\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/kt.academy/ek-respect-contracts.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Item 31: Respect abstraction contracts"}],["meta",{"property":"og:description","content":"Article(s) > Item 31: Respect abstraction contracts"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://kt.academy/_next/image?url=https%3A%2F%2Fmarcinmoskala.com%2FEffectiveKotlin-Book%2Fpromotion%2Frespect_contracts.jpg&w=1200&q=75"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://kt.academy/_next/image?url=https%3A%2F%2Fmarcinmoskala.com%2FEffectiveKotlin-Book%2Fpromotion%2Frespect_contracts.jpg&w=1200&q=75"}],["meta",{"name":"twitter:image:alt","content":"Item 31: Respect abstraction contracts"}],["meta",{"property":"article:author","content":"Marcin MoskaÅ‚a"}],["meta",{"property":"article:tag","content":"kdoc"}],["meta",{"property":"article:tag","content":"kotlin"}],["meta",{"property":"article:tag","content":"kt.academy"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2024-07-22T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Item 31: Respect abstraction contracts"},{"property":"og:description","content":"Item 31: Respect abstraction contracts"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/kt.academy/ek-respect-contracts.html"}]],"prev":"/programming/java/articles/README.md","date":"2024-07-22T00:00:00.000Z","isOriginal":false,"author":[{"name":"Marcin MoskaÅ‚a","url":"https://kt.academy/user/marcinmoskala"}],"cover":"https://kt.academy/_next/image?url=https%3A%2F%2Fmarcinmoskala.com%2FEffectiveKotlin-Book%2Fpromotion%2Frespect_contracts.jpg&w=1200&q=75"},"git":{},"readingTime":{"minutes":2.15,"words":645},"filePathRelative":"kt.academy/ek-respect-contracts.md","copyright":{"author":"Marcin MoskaÅ‚a"}}');export{_ as comp,R as data};
