import{_ as v}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as k,d as s,f as a,b as r,a as g,t as b,n as d,g as u,w as o,e,r as p,o as f}from"./app-BItykJLQ.js";const w={},y={id:"frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´",tabindex:"-1"},x={class:"header-anchor",href:"#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"},T={class:"table-of-contents"},C={href:"https://developer.android.com/develop/ui/compose/text/fonts#downloadable-fonts",target:"_blank",rel:"noopener noreferrer"},A={href:"https://gist.github.com/eevajonnapanula/f47b5eab078cf903648555559ba50b2d",target:"_blank",rel:"noopener noreferrer"},P={class:"hint-container info"},F={href:"https://proandroiddev.com/not-a-phase-text-with-compose-and-canvas-97cacc35a5f7",target:"_blank",rel:"noopener noreferrer"};function I(m,n){const c=p("VPCard"),t=p("router-link"),i=p("SiteInfo"),h=p("VidStack"),l=p("VPIcon");return f(),k("div",null,[s("h1",y,[s("a",x,[s("span",null,b(m.$frontmatter.title)+" Í¥ÄÎ†®",1)])]),a(c,d(u({title:"Android > Article(s)",desc:"Article(s)",link:"/programming/java-android/articles/README.md",logo:"https://chanhi2000.github.io/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",T,[s("ul",null,[s("li",null,[a(t,{to:"#before-we-start"},{default:o(()=>[...n[0]||(n[0]=[e("Before We Start",-1)])]),_:1})]),s("li",null,[a(t,{to:"#drawing-the-text"},{default:o(()=>[...n[1]||(n[1]=[e("Drawing the Text",-1)])]),_:1}),s("ul",null,[s("li",null,[a(t,{to:"#measuring"},{default:o(()=>[...n[2]||(n[2]=[e("Measuring",-1)])]),_:1})])])]),s("li",null,[a(t,{to:"#drawing"},{default:o(()=>[...n[3]||(n[3]=[e("Drawing",-1)])]),_:1})]),s("li",null,[a(t,{to:"#adding-fonts"},{default:o(()=>[...n[4]||(n[4]=[e("Adding Fonts",-1)])]),_:1})]),s("li",null,[a(t,{to:"#animating-the-text"},{default:o(()=>[...n[5]||(n[5]=[e("Animating the Text",-1)])]),_:1})]),s("li",null,[a(t,{to:"#wrapping-up"},{default:o(()=>[...n[6]||(n[6]=[e("Wrapping Up",-1)])]),_:1})]),s("li",null,[a(t,{to:"#links-in-the-blog-post"},{default:o(()=>[...n[7]||(n[7]=[e("Links in the Blog Post",-1)])]),_:1})])])]),n[18]||(n[18]=s("hr",null,null,-1)),a(i,{name:"Not a Phase ‚Äî Text with Compose and Canvas",desc:"I‚Äôve continued my journey with Compose and Canvas! After exploring drawing and animating shapes, I wanted to learn more about text. Bi-visibility Day was coming, so I drew a small animation to publish on Instagram. The final animation looks like this:",url:"https://droidcon.com/not-a-phase-text-with-compose-and-canvas",logo:"https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png",preview:"https://droidcon.com/wp-content/uploads/2024/11/1_pG4SZiLOj48ecZ7YtEa81A-1024x538.webp"}),n[19]||(n[19]=s("p",null,"I‚Äôve continued my journey with Compose and Canvas! After exploring drawing and animating shapes, I wanted to learn more about text. Bi-visibility Day was coming, so I drew a small animation to publish on Instagram. The final animation looks like this:",-1)),a(h,{src:"youtube/FJUn6FlpLqs"}),n[20]||(n[20]=r(`<p>In this blog post, we will look at how to add text to Canvas and position and animate it. We‚Äôre also utilizing custom Google Fonts in the drawing.</p><p>If you‚Äôre interested in reading the first two posts, here are the links:</p><ul><li><a href="https://medium.com/proandroiddev/paint-the-stars-drawing-with-compose-and-canvas-6a4e719efe20" target="_blank" rel="noopener noreferrer">Paint the Stars ‚Äî Drawing with Compose and Canvas</a></li><li><a href="https://medium.com/@eevajonna/floating-in-space-animations-with-compose-and-canvas-7e2978629cd7" target="_blank" rel="noopener noreferrer">Floating in Space ‚Äî Animations with Compose and Canvas</a></li></ul><hr><h2 id="before-we-start" tabindex="-1"><a class="header-anchor" href="#before-we-start"><span>Before We Start</span></a></h2><p>Before we start drawing, I want to say a few words about the design. It has the moon in the waning crescent phase, with a dashed line to complete it to the full moon shape. The text says, ‚ÄúNot a phase‚Äù.</p><p>Now, if you‚Äôre familiar with the discrimination and stereotypes bisexuals face, you probably already know what all of this means. But for those who are not, one of the stereotypes is that bisexuality is ‚Äújust a phase on the way to being straight/gay‚Äù.</p><p>But it‚Äôs not ‚Äî it‚Äôs an (umbrella) term for people who feel attraction towards their own and other genders. And even if a bi person is in a monogamous relationship with a person from one gender, it doesn‚Äôt make them straight/gay. They‚Äôre still bi.</p><p>So yeah, we‚Äôre here. We exist.</p><p>Now, let‚Äôs get to the coding part.</p><hr><h2 id="drawing-the-text" tabindex="-1"><a class="header-anchor" href="#drawing-the-text"><span>Drawing the Text</span></a></h2><h3 id="measuring" tabindex="-1"><a class="header-anchor" href="#measuring"><span>Measuring</span></a></h3><p>Drawing text on Canvas is a two-step process: First, measure the text and then draw it. To start with measuring, we‚Äôll need a<code>TextMeasurer</code>, and with Compose-code, we have this neat remember-function we can use:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">val</span> textMeasurer <span class="token operator">=</span> <span class="token function">rememberTextMeasurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>For measuring,<code>TextMeasurer</code>has a function<code>measure</code>, which takes in the text as either<code>AnnotatedString</code>or<code>String</code>, and a bunch of other (mainly) optional parameters that affect the size of the text. Things like<code>density</code>,<code>layoutDirection</code>,<code>style</code>,<code>fontFamilyResolver</code>, and others.</p><p>We will divide the text into two strings, as we want to animate and position them a bit differently. As both of our texts are just simple strings with one style, we can use the<code>String</code>-version for both. The first version of the ‚ÄúNot‚Äù-text looks like this:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">val</span> notText <span class="token operator">=</span></span>
<span class="line">    textMeasurer<span class="token punctuation">.</span><span class="token function">measure</span><span class="token punctuation">(</span></span>
<span class="line">        text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;Not&quot;</span></span><span class="token punctuation">,</span></span>
<span class="line">        style <span class="token operator">=</span></span>
<span class="line">            MaterialTheme<span class="token punctuation">.</span>typography<span class="token punctuation">.</span>titleSmall<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span></span>
<span class="line">                brush <span class="token operator">=</span> Brush<span class="token punctuation">.</span><span class="token function">linearGradient</span><span class="token punctuation">(</span></span>
<span class="line">                    colors <span class="token operator">=</span> Colors<span class="token punctuation">.</span>biFlag</span>
<span class="line">                <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>For the<code>measure</code>-function, we pass in the text and then styles. We want to use the theme typography here for straightforwardness, so we copy the small title styles and add a brush to have a linear gradient as the text color. Here, we‚Äôre using the bi-flag colors pink, purple, and blue.</p><p>The second text is pretty similar:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">val</span> phaseText <span class="token operator">=</span></span>
<span class="line">    textMeasurer<span class="token punctuation">.</span><span class="token function">measure</span><span class="token punctuation">(</span></span>
<span class="line">        text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;a phase&quot;</span></span><span class="token punctuation">,</span></span>
<span class="line">        style <span class="token operator">=</span></span>
<span class="line">            MaterialTheme<span class="token punctuation">.</span>typography<span class="token punctuation">.</span>titleLarge<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span></span>
<span class="line">                brush <span class="token operator">=</span></span>
<span class="line">                    Brush<span class="token punctuation">.</span><span class="token function">linearGradient</span><span class="token punctuation">(</span></span>
<span class="line">                        colors <span class="token operator">=</span> Colors<span class="token punctuation">.</span>biFlag<span class="token punctuation">,</span></span>
<span class="line">                    <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                fontSize <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>For this text, we‚Äôre utilizing the large title styles from the theme. In addition to gradient colors, we‚Äôre setting the font size to 30<code>sp</code>to make the text bigger.</p><p>Alright, now we have everything we need from the measuring step. Next up is drawing the texts on canvas.</p><hr><h2 id="drawing" tabindex="-1"><a class="header-anchor" href="#drawing"><span>Drawing</span></a></h2><p>Compose Canvas has a method called<code>drawText</code>for drawing text. It takes in a<code>TextLayoutResult</code>, which is the type that<code>measure</code>function returns. In addition, it takes other parameters meant for styling and positioning the text on Canvas.</p><p>For the<code>notText</code>we defined in the previous subsection, the<code>drawText</code>would look like this:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token function">drawText</span><span class="token punctuation">(</span></span>
<span class="line">    textLayoutResult <span class="token operator">=</span> notText<span class="token punctuation">,</span></span>
<span class="line">    topLeft <span class="token operator">=</span></span>
<span class="line">        <span class="token function">Offset</span><span class="token punctuation">(</span></span>
<span class="line">            size<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">0.25f</span><span class="token punctuation">,</span></span>
<span class="line">            size<span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token number">0.6f</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We pass in the text layout result, and then we define the<code>topLeft</code>offset to position the text correctly.</p><p>The other text is a bit different. We want to position it relative to the<code>notText</code>, so we use<code>notText</code>for calculating the correct position:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token function">drawText</span><span class="token punctuation">(</span></span>
<span class="line">    textLayoutResult <span class="token operator">=</span> phaseText<span class="token punctuation">,</span></span>
<span class="line">    topLeft <span class="token operator">=</span></span>
<span class="line">        <span class="token function">Offset</span><span class="token punctuation">(</span></span>
<span class="line">            x <span class="token operator">=</span> size<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">0.35f</span><span class="token punctuation">,</span></span>
<span class="line">            y <span class="token operator">=</span> <span class="token punctuation">(</span>size<span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token number">0.6f</span> <span class="token operator">+</span> notText<span class="token punctuation">.</span>size<span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token number">0.7f</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>So here, we define the y-offset to be the same as for the<code>notText</code>, and then we add 70% of the height of the<code>notText</code>. This could be the whole height, but I wanted to keep less break between the texts.</p><figure><img src="https://droidcon.com/wp-content/uploads/2024/11/0_s2dsi0JrLwORGpMV-300x300.webp" alt="After these steps, our text looks like this" tabindex="0" loading="lazy"><figcaption>After these steps, our text looks like this</figcaption></figure><p>There is just one thing left for the drawing ‚Äî using custom fonts. Let‚Äôs talk about that next.</p><hr><h2 id="adding-fonts" tabindex="-1"><a class="header-anchor" href="#adding-fonts"><span>Adding Fonts</span></a></h2><p>For this animation, I wanted to have custom fonts. After playing around with Google Fonts, I decided that the two fonts I‚Äôm using are Poppins and Damion.</p>`,37)),s("p",null,[n[9]||(n[9]=e("Android documentation has a page about adding fonts to your project:",-1)),s("a",C,[a(l,{icon:"fa-brands fa-androd"}),n[8]||(n[8]=e("Work with fonts",-1))]),n[10]||(n[10]=e(". However, I accidentally found that Android Studio lets you add Google Fonts as XML files straightforwardly. Here‚Äôs how it happens:",-1))]),n[21]||(n[21]=r(`<ol><li>Go to Resource Manager and select the ‚ÄúFont‚Äù-tab.</li><li>Click the ‚Äú+‚Äù button to add new resource.</li><li>Select ‚ÄúMore Fonts‚Ä¶‚Äù.</li><li>Find the Google Font you want to use, select weights, and press OK.</li><li>Let Android Studio add everything needed, like the certification for fonts.</li></ol><p>However, previews don‚Äôt work correctly if you do it this way and don‚Äôt import the ttf-files for fonts. So, if you rely on previews when developing, importing those files should resolve the issue.</p><p>After the font is available, the next thing to do is to use it in the styles. Here‚Äôs the code for the font families we‚Äôre going to use:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">val</span> PoppinsFontFamily <span class="token operator">=</span></span>
<span class="line">    <span class="token function">FontFamily</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token function">Font</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>font<span class="token punctuation">.</span>poppins\\_bold<span class="token punctuation">,</span> FontWeight<span class="token punctuation">.</span>Bold<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> DamionFontFamily <span class="token operator">=</span></span>
<span class="line">    <span class="token function">FontFamily</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token function">Font</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>font<span class="token punctuation">.</span>damion<span class="token punctuation">,</span> FontWeight<span class="token punctuation">.</span>Normal<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Then we add the font families to both texts ‚Äî Damion for the ‚ÄúNot‚Äù text and Poppins to the ‚Äúa phase‚Äù-text:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">val</span> notText <span class="token operator">=</span></span>
<span class="line">    textMeasurer<span class="token punctuation">.</span><span class="token function">measure</span><span class="token punctuation">(</span></span>
<span class="line">        text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;Not&quot;</span></span><span class="token punctuation">,</span></span>
<span class="line">        style <span class="token operator">=</span></span>
<span class="line">            MaterialTheme<span class="token punctuation">.</span>typography<span class="token punctuation">.</span>titleSmall<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span></span>
<span class="line">                <span class="token operator">..</span><span class="token punctuation">.</span></span>
<span class="line">                fontFamily <span class="token operator">=</span> DamionFontFamily</span>
<span class="line">            <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>And</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">val</span> phaseText <span class="token operator">=</span></span>
<span class="line">    textMeasurer<span class="token punctuation">.</span><span class="token function">measure</span><span class="token punctuation">(</span></span>
<span class="line">        text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;a phase&quot;</span></span><span class="token punctuation">,</span></span>
<span class="line">        style <span class="token operator">=</span></span>
<span class="line">            MaterialTheme<span class="token punctuation">.</span>typography<span class="token punctuation">.</span>titleLarge<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span></span>
<span class="line">                <span class="token operator">..</span><span class="token punctuation">.</span></span>
<span class="line">                fontFamily <span class="token operator">=</span> PoppinsFontFamily</span>
<span class="line">            <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://droidcon.com/wp-content/uploads/2024/11/0_mgOSDM0mPoS1PP8o-300x300.webp" alt="After these changes, the drawing looks like this" tabindex="0" loading="lazy"><figcaption>After these changes, the drawing looks like this</figcaption></figure><hr><h2 id="animating-the-text" tabindex="-1"><a class="header-anchor" href="#animating-the-text"><span>Animating the Text</span></a></h2><p>The last step we‚Äôll need to take is animating the text. We will do that by animating colors and floats. To set things up, let‚Äôs define<code>infiniteTransition</code>, which we‚Äôre going to use later:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">val</span> infiniteTransition <span class="token operator">=</span> <span class="token function">rememberInfiniteTransition</span><span class="token punctuation">(</span></span>
<span class="line">    label <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;infinite&quot;</span></span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We also want to show the color animation first on the ‚Äúnot‚Äù-text and only after that on the ‚Äúa phase‚Äù-text. One way to accomplish that is to define a helper float, based on which we use to animate the words. We‚Äôll get back to the implementation later.</p><p>We‚Äôll define a variable called<code>animationPosition</code>, an infinitely transitioning float from 0f to 4f, which restarts from 0 when it reaches 4. These values could be anything, but after testing, I found that these values worked best when combined with other things in this drawing.</p><p>The code for<code>animationPosition</code>could look like this:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">val</span> animationPosition <span class="token keyword">by</span> infiniteTransition<span class="token punctuation">.</span><span class="token function">animateFloat</span><span class="token punctuation">(</span></span>
<span class="line">    initialValue <span class="token operator">=</span> <span class="token number">0f</span><span class="token punctuation">,</span></span>
<span class="line">    targetValue <span class="token operator">=</span> <span class="token number">4f</span><span class="token punctuation">,</span></span>
<span class="line">    animationSpec <span class="token operator">=</span></span>
<span class="line">        <span class="token function">infiniteRepeatable</span><span class="token punctuation">(</span></span>
<span class="line">            <span class="token function">tween</span><span class="token punctuation">(</span></span>
<span class="line">                durationMillis <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">,</span></span>
<span class="line">                easing <span class="token operator">=</span> EaseIn<span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            RepeatMode<span class="token punctuation">.</span>Restart<span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    label <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;animationPosition&quot;</span></span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In addition, we will define a helper function for animating the colors. Let‚Äôs call it<code>biColorsAnimated</code>, define it to take in a Boolean parameter<code>animated</code>, and return a list of colors:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token annotation builtin">@Composable</span></span>
<span class="line"><span class="token keyword">fun</span> <span class="token function">biColorsAnimated</span><span class="token punctuation">(</span>animated<span class="token operator">:</span> Boolean<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>Color<span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// ....</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Inside the function, we define our animated colors. We first create a list with the colors, and then map through it. For each color, we return<code>animateColorAsState</code>‚Äòs value, which has the type<code>Color</code>, and finally, we return the list of colors:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">val</span> colors <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span></span>
<span class="line">    biFlag<span class="token punctuation">.</span>pink<span class="token punctuation">,</span></span>
<span class="line">    biFlag<span class="token punctuation">.</span>purple<span class="token punctuation">,</span></span>
<span class="line">    biFlag<span class="token punctuation">.</span>blue</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">return</span> colors<span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">animateColorAsState</span><span class="token punctuation">(</span></span>
<span class="line">        targetValue <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>animated<span class="token punctuation">)</span> it <span class="token keyword">else</span> white<span class="token punctuation">,</span></span>
<span class="line">        animationSpec <span class="token operator">=</span></span>
<span class="line">            <span class="token function">tween</span><span class="token punctuation">(</span></span>
<span class="line">                durationMillis <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span></span>
<span class="line">                easing <span class="token operator">=</span> EaseInBounce<span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        label <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">.</span>value</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This way, we have the bi flag‚Äôs colors as animated values and can use them with our text.</p><p>Finally, we get to tie everything together. For both of the texts, we change the brush gradient‚Äôs color parameter to use this new function:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">val</span> notText <span class="token operator">=</span></span>
<span class="line">    textMeasurer<span class="token punctuation">.</span><span class="token function">measure</span><span class="token punctuation">(</span></span>
<span class="line">        text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;Not&quot;</span></span><span class="token punctuation">,</span></span>
<span class="line">        style <span class="token operator">=</span></span>
<span class="line">            MaterialTheme<span class="token punctuation">.</span>typography<span class="token punctuation">.</span>titleSmall<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span></span>
<span class="line">                brush <span class="token operator">=</span></span>
<span class="line">                    Brush<span class="token punctuation">.</span><span class="token function">linearGradient</span><span class="token punctuation">(</span></span>
<span class="line">                        colors <span class="token operator">=</span> <span class="token function">biColorsAnimated</span><span class="token punctuation">(</span></span>
<span class="line">                            animated <span class="token operator">=</span> animationPosition <span class="token keyword">in</span> <span class="token number">0.5f</span><span class="token operator">..</span><span class="token number">1.5f</span></span>
<span class="line">                        <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment">// ...</span></span>
<span class="line">            <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> phaseText <span class="token operator">=</span></span>
<span class="line">    textMeasurer<span class="token punctuation">.</span><span class="token function">measure</span><span class="token punctuation">(</span></span>
<span class="line">        text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;a phase&quot;</span></span><span class="token punctuation">,</span></span>
<span class="line">        style <span class="token operator">=</span></span>
<span class="line">            MaterialTheme<span class="token punctuation">.</span>typography<span class="token punctuation">.</span>titleLarge<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span></span>
<span class="line">                brush <span class="token operator">=</span></span>
<span class="line">                    Brush<span class="token punctuation">.</span><span class="token function">linearGradient</span><span class="token punctuation">(</span></span>
<span class="line">                        colors <span class="token operator">=</span> <span class="token function">biColorsAnimated</span><span class="token punctuation">(</span></span>
<span class="line">                            animated <span class="token operator">=</span> animationPosition <span class="token keyword">in</span> <span class="token number">2f</span><span class="token operator">..</span><span class="token number">3.5f</span></span>
<span class="line">                        <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment">// ...</span></span>
<span class="line">            <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We use the<code>animationPosition</code>value to define if the colors for that text are animated. For the first text, we change the colors from white to the bi flag colors if the<code>animationPosition</code>is between 0.5f and 1.5f, and for the second, if the value is between 2f and 3.5f.</p>`,26)),s("p",null,[n[12]||(n[12]=e("These changes get us the animation you can see at the beginning of this blog post. You can find",-1)),s("a",A,[a(l,{icon:"iconfont icon-github"}),n[11]||(n[11]=e("the complete code in this code snippet",-1))]),n[13]||(n[13]=e(".",-1))]),a(i,{name:"not-a-phase.kt",desc:"GitHub Gist: instantly share code, notes, and snippets.",url:"https://gist.github.com/eevajonnapanula/f47b5eab078cf903648555559ba50b2d/",logo:"https://github.githubassets.com/favicons/favicon-dark.svg",preview:"https://github.githubassets.com/assets/gist-og-image-54fd7dc0713e.png"}),n[22]||(n[22]=s("hr",null,null,-1)),n[23]||(n[23]=s("h2",{id:"wrapping-up",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#wrapping-up"},[s("span",null,"Wrapping Up")])],-1)),n[24]||(n[24]=s("p",null,"In this blog post, we‚Äôve looked into adding text to Canvas, using custom Google Fonts, and animating colors. There was a lot to cover, but the end result is pretty nice!",-1)),n[25]||(n[25]=s("p",null,"I hope you‚Äôve enjoyed this blog post and learned something. If you want to share your learnings, post on the social media of your choosing, or let me know in the comments!",-1)),n[26]||(n[26]=s("hr",null,null,-1)),n[27]||(n[27]=s("h2",{id:"links-in-the-blog-post",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#links-in-the-blog-post"},[s("span",null,"Links in the Blog Post")])],-1)),a(i,{name:"Paint the Stars‚Ää‚Äî‚ÄäDrawing with Compose and Canvas",desc:"I‚Äôve always struggled with drawing in Canvas, and I decided to learn more about it. This blog post shares part of that learning journey.",url:"https://proandroiddev.com/paint-the-stars-drawing-with-compose-and-canvas-6a4e719efe20/",logo:"https://miro.medium.com/v2/resize:fill:256:256/1*A8VytPZQhvUf_MG6hm_Dlw.png",preview:"https://miro.medium.com/v2/resize:fit:1200/1*PeUL15ImxTXYw4uLVu4UvQ.png"}),a(i,{name:"Floating in Space‚Ää‚Äî‚ÄäAnimations with Compose and Canvas",desc:"Let‚Äôs animate the Canvas! This blog post discusses how to do that with animated floats.",url:"https://proandroiddev.com/floating-in-space-animations-with-compose-and-canvas-7e2978629cd7/",logo:"https://miro.medium.com/v2/resize:fill:256:256/1*A8VytPZQhvUf_MG6hm_Dlw.png",preview:"https://miro.medium.com/v2/resize:fit:1200/1*Fu-haBheuLWMsukdcTc6Iw.png"}),a(i,{name:"Work with fonts  | Jetpack Compose | Android Developers",desc:"This page describes how to set fonts in your Compose app.",url:"https://developer.android.com/develop/ui/compose/text/fonts?hl=en#downloadable-fonts",logo:"https://gstatic.com/devrel-devsite/prod/v6f23042ee535b54d461e0cc5c1cc12493e4d0aea4f2d54a7a63063da7859ead0/android/images/favicon.svg",preview:"https://developer.android.com/static/images/social/android-developers.png?hl=ko"}),a(i,{name:"not-a-phase.kt",desc:"GitHub Gist: instantly share code, notes, and snippets.",url:"https://gist.github.com/eevajonnapanula/f47b5eab078cf903648555559ba50b2d/",logo:"https://github.githubassets.com/favicons/favicon-dark.svg",preview:"https://github.githubassets.com/assets/gist-og-image-54fd7dc0713e.png"}),s("div",P,[n[17]||(n[17]=s("p",{class:"hint-container-title"},"Info",-1)),s("p",null,[n[16]||(n[16]=e("This article is previously published on ",-1)),s("a",F,[a(l,{icon:"fa-brands fa-medium"}),n[14]||(n[14]=s("code",null,"proandroiddev",-1)),n[15]||(n[15]=e(")",-1))])]),a(i,{name:"Not a Phase‚Ää‚Äî‚ÄäText with Compose and Canvas",desc:"I‚Äôve continued my journey with Compose and Canvas! After exploring drawing and animating shapes, I wanted to learn more about text‚Ä¶",url:"https://proandroiddev.com/not-a-phase-text-with-compose-and-canvas-97cacc35a5f7/",logo:"https://miro.medium.com/v2/resize:fill:256:256/1*A8VytPZQhvUf_MG6hm_Dlw.png",preview:"https://miro.medium.com/v2/resize:fit:1200/1*pG4SZiLOj48ecZ7YtEa81A.png"})]),g(" TODO: add ARTICLE CARD "),a(c,d(u({title:"Not a Phase ‚Äî Text with Compose and Canvas",desc:"I‚Äôve continued my journey with Compose and Canvas! After exploring drawing and animating shapes, I wanted to learn more about text. Bi-visibility Day was coming, so I drew a small animation to publish on Instagram. The final animation looks like this:",link:"https://chanhi2000.github.io/bookshelf/droidcon.com/not-a-phase-text-with-compose-and-canvas.html",logo:"https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png",background:"rgba(4,20,221,0.2)"})),null,16)])}const M=v(w,[["render",I]]),L=JSON.parse('{"path":"/droidcon.com/not-a-phase-text-with-compose-and-canvas.html","title":"Not a Phase ‚Äî Text with Compose and Canvas","lang":"en-US","frontmatter":{"lang":"en-US","title":"Not a Phase ‚Äî Text with Compose and Canvas","description":"Article(s) > Not a Phase ‚Äî Text with Compose and Canvas","icon":"fa-brands fa-android","category":["Java","Kotlin","Android","Article(s)"],"tag":["blog","droidcon.com","java","kotlin","android"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Not a Phase ‚Äî Text with Compose and Canvas\\",\\"image\\":[\\"https://droidcon.com/wp-content/uploads/2024/11/0_s2dsi0JrLwORGpMV-300x300.webp\\",\\"https://droidcon.com/wp-content/uploads/2024/11/0_mgOSDM0mPoS1PP8o-300x300.webp\\"],\\"datePublished\\":\\"2024-11-22T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Eevis Panula\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/droidcon.com/not-a-phase-text-with-compose-and-canvas.html"}],["meta",{"property":"og:site_name","content":"üìöBookshelf"}],["meta",{"property":"og:title","content":"Not a Phase ‚Äî Text with Compose and Canvas"}],["meta",{"property":"og:description","content":"Article(s) > Not a Phase ‚Äî Text with Compose and Canvas"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://droidcon.com/wp-content/uploads/2024/11/1_pG4SZiLOj48ecZ7YtEa81A-1024x538.webp"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://droidcon.com/wp-content/uploads/2024/11/1_pG4SZiLOj48ecZ7YtEa81A-1024x538.webp"}],["meta",{"name":"twitter:image:alt","content":"Not a Phase ‚Äî Text with Compose and Canvas"}],["meta",{"property":"article:author","content":"Eevis Panula"}],["meta",{"property":"article:tag","content":"android"}],["meta",{"property":"article:tag","content":"kotlin"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:tag","content":"droidcon.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2024-11-22T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Not a Phase ‚Äî Text with Compose and Canvas"},{"property":"og:description","content":"Not a Phase ‚Äî Text with Compose and Canvas"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/droidcon.com/not-a-phase-text-with-compose-and-canvas.html"}]],"prev":"/programming/java-android/articles/README.md","date":"2024-11-22T00:00:00.000Z","isOriginal":false,"author":"Eevis Panula","cover":"https://droidcon.com/wp-content/uploads/2024/11/1_pG4SZiLOj48ecZ7YtEa81A-1024x538.webp"},"git":{},"readingTime":{"minutes":6.98,"words":2094},"filePathRelative":"droidcon.com/not-a-phase-text-with-compose-and-canvas.md","copyright":{"author":"Eevis Panula"}}');export{M as comp,L as data};
