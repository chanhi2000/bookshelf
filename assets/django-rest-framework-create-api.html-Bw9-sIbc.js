import{_ as g}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as v,d as n,f as e,b as p,a as h,t as b,n as d,g as u,w as t,e as a,r as l,o as f}from"./app-BVguHYKu.js";const w="/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/banner.png",y="/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/testing-to-do-list-api.png",T="/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/detail-api-view-page.png",j="/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/to-do-list-documentation.png",E="/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/unauthorization-error.png",A="/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/login-create-guest-user.png",S="/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/auth-jwt-create-endpoint.png",D="/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/refresh-access-tokens-authenticating-user.png",R="/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/authorizing-apikey.png",P="/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/user-has-been-authenticated.png",z="/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/executing-get-method.png",x="/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/success-message-do-list-items.png",I={},q={id:"frontmatter-title-관련",tabindex:"-1"},_={class:"header-anchor",href:"#frontmatter-title-관련"},U={class:"table-of-contents"},C={class:"hint-container note"},L={href:"https://blog.logrocket.com/author/ukejegoodness/",target:"_blank",rel:"noopener noreferrer"},H={href:"https://django-rest-framework.org/",target:"_blank",rel:"noopener noreferrer"},N={href:"https://github.com/jazzband/djangorestframework-simplejwt",target:"_blank",rel:"noopener noreferrer"},O={href:"https://pypi.org/project/djoser/",target:"_blank",rel:"noopener noreferrer"};function F(k,s){const r=l("VPCard"),i=l("router-link"),m=l("SiteInfo"),o=l("VPIcon"),c=l("RouteLink");return f(),v("div",null,[n("h1",q,[n("a",_,[n("span",null,b(k.$frontmatter.title)+" 관련",1)])]),e(r,d(u({title:"Django > Article(s)",desc:"Article(s)",link:"/programming/py-django/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),n("nav",U,[n("ul",null,[n("li",null,[e(i,{to:"#what-is-django"},{default:t(()=>s[0]||(s[0]=[a("What is Django?")])),_:1,__:[0]})]),n("li",null,[e(i,{to:"#what-is-a-rest-api"},{default:t(()=>s[1]||(s[1]=[a("What is a REST API?")])),_:1,__:[1]})]),n("li",null,[e(i,{to:"#why-django-rest-framework"},{default:t(()=>s[2]||(s[2]=[a("Why Django REST framework?")])),_:1,__:[2]})]),n("li",null,[e(i,{to:"#setting-up-django-rest-framework"},{default:t(()=>s[3]||(s[3]=[a("Setting up Django REST framework")])),_:1,__:[3]})]),n("li",null,[e(i,{to:"#restful-structure-get-post-put-and-delete-methods"},{default:t(()=>s[4]||(s[4]=[a("RESTful structure: GET, POST, PUT, and DELETE methods")])),_:1,__:[4]})]),n("li",null,[e(i,{to:"#creating-models-for-our-django-app"},{default:t(()=>s[5]||(s[5]=[a("Creating models for our Django app")])),_:1,__:[5]}),n("ul",null,[n("li",null,[e(i,{to:"#model-serializer"},{default:t(()=>s[6]||(s[6]=[a("Model serializer")])),_:1,__:[6]})])])]),n("li",null,[e(i,{to:"#creating-api-views-in-django"},{default:t(()=>s[7]||(s[7]=[a("Creating API views in Django")])),_:1,__:[7]}),n("ul",null,[n("li",null,[e(i,{to:"#list-view"},{default:t(()=>s[8]||(s[8]=[a("List view")])),_:1,__:[8]})]),n("li",null,[e(i,{to:"#detail-view"},{default:t(()=>s[9]||(s[9]=[a("Detail view")])),_:1,__:[9]})])])]),n("li",null,[e(i,{to:"#authentication-and-permission-in-django"},{default:t(()=>s[10]||(s[10]=[a("Authentication and permission in Django")])),_:1,__:[10]})]),n("li",null,[e(i,{to:"#customizing-http-responses-django"},{default:t(()=>s[11]||(s[11]=[a("Customizing HTTP responses Django")])),_:1,__:[11]})]),n("li",null,[e(i,{to:"#best-practices-for-testing-rest-apis-built-with-django-rest-framework"},{default:t(()=>s[12]||(s[12]=[a("Best practices for testing REST APIs built with Django REST framework")])),_:1,__:[12]})]),n("li",null,[e(i,{to:"#conclusion"},{default:t(()=>s[13]||(s[13]=[a("Conclusion")])),_:1,__:[13]})])])]),s[82]||(s[82]=n("hr",null,null,-1)),e(m,{name:"How to create a REST API with Django REST framework",desc:"Use the Django REST framework to create powerful APIs for your web application, handling user login and authentication.",url:"https://blog.logrocket.com/django-rest-framework-create-api",logo:"/assets/image/blog.logrocket.com/favicon.png",preview:"/assets/image/blog.logrocket.com/django-rest-framework-create-api/banner.png"}),n("div",C,[s[17]||(s[17]=n("p",{class:"hint-container-title"},"Editor’s note",-1)),n("p",null,[s[15]||(s[15]=a("This tutorial was last updated by ")),n("a",L,[e(o,{icon:"fas fa-globe"}),s[14]||(s[14]=a("Ukeje Goodness"))]),s[16]||(s[16]=a(" on 13 March 2024 to include Django’s authentication and permission mechanisms, information about customizing Django HTTP responses, and a section about best practices to employ when testing REST APIs built with Django."))])]),s[83]||(s[83]=n("figure",null,[n("img",{src:w,alt:"How To Create A REST API With Django REST Framework",tabindex:"0",loading:"lazy"}),n("figcaption",null,"How To Create A REST API With Django REST Framework")],-1)),n("p",null,[s[19]||(s[19]=a("Django REST framework (DRF) is a powerful and flexible toolkit for building web APIs. In this tutorial, we’ll learn how to easily build a CRUD API using the Django REST framework. To build our sample to-do list application, we’ll start by setting up the Django REST framework in a Django project, followed by a complete tutorial on how to create a CRUD REST API with ")),n("a",H,[e(o,{icon:"iconfont icon-django"}),s[18]||(s[18]=a("Django REST framework"))]),s[20]||(s[20]=a("."))]),s[84]||(s[84]=n("hr",null,null,-1)),s[85]||(s[85]=n("h2",{id:"what-is-django",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#what-is-django"},[n("span",null,"What is Django?")])],-1)),n("p",null,[e(c,{to:"/blog.logrocket.com/whats-new-django-v4.html"},{default:t(()=>s[21]||(s[21]=[n("strong",null,"Django",-1)])),_:1,__:[21]}),s[22]||(s[22]=a(" is a free, open source, Python-based web framework that follows the Model-View-Template (MVT) architectural pattern. It reduces the hassle of web development so you can focus on writing your app instead of reinventing the wheel."))]),s[86]||(s[86]=n("hr",null,null,-1)),s[87]||(s[87]=n("h2",{id:"what-is-a-rest-api",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#what-is-a-rest-api"},[n("span",null,"What is a REST API?")])],-1)),n("p",null,[s[24]||(s[24]=a("A ")),e(c,{to:"/blog.logrocket.com/the-essential-guide-for-designing-a-production-ready-developer-friendly-restful-api.html"},{default:t(()=>s[23]||(s[23]=[n("strong",null,"REST API",-1)])),_:1,__:[23]}),s[25]||(s[25]=a(" is a popular way for systems to expose useful functions and data. REST, which stands for representational state transfer, can be made up of one or more resources that can be accessed at a given URL and returned in various formats, like JSON, images, HTML, and more."))]),s[88]||(s[88]=n("hr",null,null,-1)),s[89]||(s[89]=n("h2",{id:"why-django-rest-framework",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#why-django-rest-framework"},[n("span",null,"Why Django REST framework?")])],-1)),n("p",null,[s[27]||(s[27]=a("Django REST framework (DRF) is a powerful and flexible toolkit for building web APIs. Its main benefit is that it ")),e(c,{to:"/blog.logrocket.com/understanding-typescript-object-serialization.html"},{default:t(()=>s[26]||(s[26]=[n("strong",null,"simplifies the process of serialization",-1)])),_:1,__:[26]}),s[28]||(s[28]=a("."))]),s[90]||(s[90]=n("p",null,"Django REST framework is based on Django’s class-based views, so it’s an excellent option if you’re familiar with Django. It adopts implementations like class-based views, forms, model validators, the QuerySet API, and more.",-1)),s[91]||(s[91]=n("hr",null,null,-1)),s[92]||(s[92]=n("h2",{id:"setting-up-django-rest-framework",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#setting-up-django-rest-framework"},[n("span",null,"Setting up Django REST framework")])],-1)),n("p",null,[s[29]||(s[29]=a("Ideally, you’d want to create a virtual environment to isolate dependencies — however, this is optional. Run the command ")),s[30]||(s[30]=n("code",null,"python -m venv django_env",-1)),s[31]||(s[31]=a(" from inside your ")),e(o,{icon:"fas fa-folder-open"}),s[32]||(s[32]=n("code",null,"projects",-1)),s[33]||(s[33]=a(" folder to create the virtual environment. Then, run ")),s[34]||(s[34]=n("code",null,"source ./django_env/bin/activate",-1)),s[35]||(s[35]=a(" to turn it on."))]),s[93]||(s[93]=p(`<p>Keep in mind that you’ll need to reactivate your virtual environment in every new terminal session. You’ll know that it is turned on because the environment’s name will become part of the shell prompt.</p><p>Navigate to an empty folder in your terminal and install Django and Django REST framework in your project with the commands below:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">pip <span class="token function">install</span> django</span>
<span class="line">pip <span class="token function">install</span> django_rest_framework</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Create a Django project called <code>todo</code> with the following command:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">django-admin startproject todo</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,5)),n("p",null,[s[36]||(s[36]=a("Then, ")),s[37]||(s[37]=n("code",null,"cd",-1)),s[38]||(s[38]=a(" into the new ")),e(o,{icon:"fas fa-folder-open"}),s[39]||(s[39]=n("code",null,"todo",-1)),s[40]||(s[40]=a(" folder and create a new app for your API:"))]),s[94]||(s[94]=p(`<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">django-admin startapp todo_api</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Run your initial migrations of the built-in user model:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python manage.py migrate</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,3)),n("p",null,[s[41]||(s[41]=a("Next, add ")),s[42]||(s[42]=n("code",null,"rest_framework",-1)),s[43]||(s[43]=a(" and ")),s[44]||(s[44]=n("code",null,"todo",-1)),s[45]||(s[45]=a(" to the ")),s[46]||(s[46]=n("code",null,"INSTALLED_APPS",-1)),s[47]||(s[47]=a(" inside the ")),e(o,{icon:"fas fa-folder-open"}),s[48]||(s[48]=n("code",null,"todo/todo/",-1)),e(o,{icon:"fa-brands fa-python"}),s[49]||(s[49]=n("code",null,"settings.py",-1)),s[50]||(s[50]=a(" file:"))]),s[95]||(s[95]=p(`<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"># settings<span class="token punctuation">.</span>py</span>
<span class="line"><span class="token constant">INSTALLED_APPS</span> <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">&#39;django.contrib.admin&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;django.contrib.auth&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;django.contrib.contenttypes&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;django.contrib.sessions&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;django.contrib.messages&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;django.contrib.staticfiles&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;rest_framework&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;todo_api&#39;</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1)),n("p",null,[s[51]||(s[51]=a("Create a ")),e(o,{icon:"fa-brands fa-python"}),s[52]||(s[52]=n("code",null,"serializers.py",-1)),s[53]||(s[53]=a(" and ")),e(o,{icon:"fa-brands fa-python"}),s[54]||(s[54]=n("code",null,"urls.py",-1)),s[55]||(s[55]=a(" file in ")),e(o,{icon:"fas fa-folder-open"}),s[56]||(s[56]=n("code",null,"todo/todo_api",-1)),s[57]||(s[57]=a(" and add new files as configured in the directory structure below:"))]),s[96]||(s[96]=p(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="folder structure"><span>folder structure</span></div><div class="language-plaintext line-numbers-mode" data-highlighter="prismjs" data-ext="plaintext"><pre><code class="language-plaintext"><span class="line">├── todo</span>
<span class="line">│   ├── __init__.py</span>
<span class="line">│   ├── settings.py</span>
<span class="line">│   ├── urls.py</span>
<span class="line">├── db.sqlite3</span>
<span class="line">├── manage.py</span>
<span class="line">└── todo_api</span>
<span class="line">    ├── admin.py</span>
<span class="line">    ├── serializers.py</span>
<span class="line">    ├── __init__.py</span>
<span class="line">    ├── models.py</span>
<span class="line">    ├── urls.py</span>
<span class="line">    └── views.py</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div>`,1)),n("p",null,[s[58]||(s[58]=a("Be sure to include ")),s[59]||(s[59]=n("code",null,"rest_framework",-1)),s[60]||(s[60]=a(" and URLs as shown below in your main ")),e(o,{icon:"fa-brands fa-python"}),s[61]||(s[61]=n("code",null,"urls.py",-1)),s[62]||(s[62]=a(" file:"))]),s[97]||(s[97]=p(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="todo/todo/urls.py"><span>todo/todo/urls.py</span></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin</span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token punctuation">,</span> include</span>
<span class="line"><span class="token keyword">from</span> todo_api <span class="token keyword">import</span> urls <span class="token keyword">as</span> todo_urls</span>
<span class="line"></span>
<span class="line">urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;admin/&#39;</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;api-auth/&#39;</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">&#39;rest_framework.urls&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;todos/&#39;</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span>todo_urls<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Next, create a superuser. We’ll come back to this later:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python manage.py createsuperuser</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="restful-structure-get-post-put-and-delete-methods" tabindex="-1"><a class="header-anchor" href="#restful-structure-get-post-put-and-delete-methods"><span>RESTful structure: <code>GET</code>, <code>POST</code>, <code>PUT</code>, and <code>DELETE</code> methods</span></a></h2><p>In a RESTful API, endpoints define the structure and usage of the <code>GET</code>, <code>POST</code>, <code>PUT</code>, and <code>DELETE</code> HTTP methods. You must organize these methods logically.</p><p>To show how to build a RESTful app with Django REST framework, we’ll create an example to-do API. We’ll use two endpoints with their respective HTTP methods, as shown in the table below:</p><table><thead><tr><th>Endpoint</th><th><code>GET</code></th><th><code>POST</code></th><th><code>PUT</code></th><th><code>DELETE</code></th></tr></thead><tbody><tr><td><code>todos/api/</code></td><td>1. List All: List all to-dos for requested user</td><td>2. Create: Add a new to-do</td><td>N/A</td><td>N/A</td></tr><tr><td><code>todos/api/&lt;int:todo_id&gt;</code></td><td>3. Retrieve: Get a to-do with a given <code>todo_id</code></td><td>N/A</td><td>4. Update: Update a to-do with a given <code>todo_id</code></td><td>5. Delete: Delete a to-do with a given <code>todo_id</code></td></tr></tbody></table><hr><h2 id="creating-models-for-our-django-app" tabindex="-1"><a class="header-anchor" href="#creating-models-for-our-django-app"><span>Creating models for our Django app</span></a></h2><p>Let’s start by creating the model for our to-do list:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="todo/todo_api/models.py"><span>todo/todo_api/models.py</span></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models</span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> User</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Todo</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    task <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length <span class="token operator">=</span> <span class="token number">180</span><span class="token punctuation">)</span></span>
<span class="line">    timestamp <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>auto_now_add <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">,</span> auto_now <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">,</span> blank <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">    completed <span class="token operator">=</span> models<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">,</span> blank <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">    updated <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>auto_now <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">,</span> blank <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">    user <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>User<span class="token punctuation">,</span> on_delete <span class="token operator">=</span> models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">,</span> blank <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">,</span> null <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> self<span class="token punctuation">.</span>task</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>After creating the model, migrate it to the database:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python manage.py makemigrations</span>
<span class="line">python manage.py migrate</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="model-serializer" tabindex="-1"><a class="header-anchor" href="#model-serializer"><span>Model serializer</span></a></h3><p>To convert the <code>Model</code> object to an API-appropriate format like JSON, Django REST framework uses the <code>ModelSerializer</code> class to convert any model to serialized JSON objects:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="todo/todo_api/serializers.py"><span>todo/todo_api/serializers.py</span></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> serializers</span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> Todo</span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">TodoSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span></span>
<span class="line">        model <span class="token operator">=</span> Todo</span>
<span class="line">        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;task&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;completed&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;timestamp&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;updated&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><hr><h2 id="creating-api-views-in-django" tabindex="-1"><a class="header-anchor" href="#creating-api-views-in-django"><span>Creating API views in Django</span></a></h2><p>In this section, we’ll walk through how to create two API views: list view and detail view.</p><h3 id="list-view" tabindex="-1"><a class="header-anchor" href="#list-view"><span>List view</span></a></h3><p>The first API view class deals with the <code>todos/api/</code> endpoint, in which it handles <code>GET</code> for listing all to-dos of a given requested user and <code>POST</code> for creating a new to-do. Notice that we’ve added <code>permission_classes</code>, which only allow for authenticated users:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="todo/todo_api/views.py"><span>todo/todo_api/views.py</span></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>views <span class="token keyword">import</span> APIView</span>
<span class="line"><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>response <span class="token keyword">import</span> Response</span>
<span class="line"><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> status</span>
<span class="line"><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> permissions</span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> Todo</span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>serializers <span class="token keyword">import</span> TodoSerializer</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">TodoListApiView</span><span class="token punctuation">(</span>APIView<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># add permission to check if user is authenticated</span></span>
<span class="line">    permission_classes <span class="token operator">=</span> <span class="token punctuation">[</span>permissions<span class="token punctuation">.</span>IsAuthenticated<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># 1. List all</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token triple-quoted-string string">&#39;&#39;&#39;</span>
<span class="line">        List all the todo items for given requested user</span>
<span class="line">        &#39;&#39;&#39;</span></span>
<span class="line">        todos <span class="token operator">=</span> Todo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>user <span class="token operator">=</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span></span>
<span class="line">        serializer <span class="token operator">=</span> TodoSerializer<span class="token punctuation">(</span>todos<span class="token punctuation">,</span> many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span> status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_200_OK<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># 2. Create</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token triple-quoted-string string">&#39;&#39;&#39;</span>
<span class="line">        Create the Todo with given todo data</span>
<span class="line">        &#39;&#39;&#39;</span></span>
<span class="line">        data <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token string">&#39;task&#39;</span><span class="token punctuation">:</span> request<span class="token punctuation">.</span>data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;task&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">            <span class="token string">&#39;completed&#39;</span><span class="token punctuation">:</span> request<span class="token punctuation">.</span>data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;completed&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">            <span class="token string">&#39;user&#39;</span><span class="token punctuation">:</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token builtin">id</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        serializer <span class="token operator">=</span> TodoSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>data<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">if</span> serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">            serializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span> status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_201_CREATED<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>errors<span class="token punctuation">,</span> status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_400_BAD_REQUEST<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>The <code>GET</code> method first fetches all the objects from the model by filtering with the requested user ID. Then, it serializes from the model object to a JSON serialized object. Next, it returns the response with serialized data and status as <code>200_OK</code>.</p><p>The <code>POST</code> method fetches the requested data and adds the requested user ID to the <code>data</code> dictionary. Next, it creates a serialized object and saves the object if it’s valid. If valid, it returns <code>serializer.data</code>, which is a newly created object with the status <code>201_CREATED</code>. Otherwise, it returns the <code>serializer.errors</code> with the status <code>400_BAD_REQUEST</code>.</p><p>Create an endpoint for the class-based view above:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="todo/todo_api/urls.py"><span>todo/todo_api/urls.py</span></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url</span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token punctuation">,</span> include</span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>views <span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">    TodoListApiView<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;api&#39;</span><span class="token punctuation">,</span> TodoListApiView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Then, run the Django server:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python manage.py runserver</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now, we’re ready for the first test. Navigate to <code>http://127.0.0.1:8000/todos/api/</code>. Make sure you’re logged in with your superuser credentials:</p><figure><img src="`+y+`" alt="Testing The To Do List API" tabindex="0" loading="lazy"><figcaption>Testing The To Do List API</figcaption></figure><p>You can create a new to-do by posting the following code:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="output.json"><span>output.json</span></div><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;task&quot;</span><span class="token operator">:</span> <span class="token string">&quot;New Task&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;completed&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h3 id="detail-view" tabindex="-1"><a class="header-anchor" href="#detail-view"><span>Detail view</span></a></h3><p>Now that we’ve successfully created our first endpoint view, let’s create the second endpoint, <code>todos/api/&lt;int:todo_id&gt;</code> API view.</p><p>In this API view class, we need to create three methods for handling the corresponding HTTP methods, <code>GET</code>, <code>PUT</code>, and <code>DELETE</code>, as discussed above:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="todo/todo_api/views.py"><span>todo/todo_api/views.py</span></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>views <span class="token keyword">import</span> APIView</span>
<span class="line"><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>response <span class="token keyword">import</span> Response</span>
<span class="line"><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> status</span>
<span class="line"><span class="token keyword">from</span> todo<span class="token punctuation">.</span>models <span class="token keyword">import</span> Todo</span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>serializers <span class="token keyword">import</span> TodoSerializer</span>
<span class="line"><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> permissions</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">TodoDetailApiView</span><span class="token punctuation">(</span>APIView<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># add permission to check if user is authenticated</span></span>
<span class="line">    permission_classes <span class="token operator">=</span> <span class="token punctuation">[</span>permissions<span class="token punctuation">.</span>IsAuthenticated<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">get_object</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> todo_id<span class="token punctuation">,</span> user_id<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token triple-quoted-string string">&#39;&#39;&#39;</span>
<span class="line">        Helper method to get the object with given todo_id, and user_id</span>
<span class="line">        &#39;&#39;&#39;</span></span>
<span class="line">        <span class="token keyword">try</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">return</span> Todo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>todo_id<span class="token punctuation">,</span> user <span class="token operator">=</span> user_id<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">except</span> Todo<span class="token punctuation">.</span>DoesNotExist<span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token boolean">None</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># 3. Retrieve</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> todo_id<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token triple-quoted-string string">&#39;&#39;&#39;</span>
<span class="line">        Retrieves the Todo with given todo_id</span>
<span class="line">        &#39;&#39;&#39;</span></span>
<span class="line">        todo_instance <span class="token operator">=</span> self<span class="token punctuation">.</span>get_object<span class="token punctuation">(</span>todo_id<span class="token punctuation">,</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token keyword">not</span> todo_instance<span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">return</span> Response<span class="token punctuation">(</span></span>
<span class="line">                <span class="token punctuation">{</span><span class="token string">&quot;res&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Object with todo id does not exists&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">                status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_400_BAD_REQUEST</span>
<span class="line">            <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        serializer <span class="token operator">=</span> TodoSerializer<span class="token punctuation">(</span>todo_instance<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span> status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_200_OK<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># 4. Update</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">put</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> todo_id<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token triple-quoted-string string">&#39;&#39;&#39;</span>
<span class="line">        Updates the todo item with given todo_id if exists</span>
<span class="line">        &#39;&#39;&#39;</span></span>
<span class="line">        todo_instance <span class="token operator">=</span> self<span class="token punctuation">.</span>get_object<span class="token punctuation">(</span>todo_id<span class="token punctuation">,</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token keyword">not</span> todo_instance<span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">return</span> Response<span class="token punctuation">(</span></span>
<span class="line">                <span class="token punctuation">{</span><span class="token string">&quot;res&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Object with todo id does not exists&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> </span>
<span class="line">                status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_400_BAD_REQUEST</span>
<span class="line">            <span class="token punctuation">)</span></span>
<span class="line">        data <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token string">&#39;task&#39;</span><span class="token punctuation">:</span> request<span class="token punctuation">.</span>data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;task&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">            <span class="token string">&#39;completed&#39;</span><span class="token punctuation">:</span> request<span class="token punctuation">.</span>data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;completed&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">            <span class="token string">&#39;user&#39;</span><span class="token punctuation">:</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token builtin">id</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        serializer <span class="token operator">=</span> TodoSerializer<span class="token punctuation">(</span>instance <span class="token operator">=</span> todo_instance<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">,</span> partial <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">if</span> serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">            serializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span> status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_200_OK<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>errors<span class="token punctuation">,</span> status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_400_BAD_REQUEST<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># 5. Delete</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">delete</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> todo_id<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token triple-quoted-string string">&#39;&#39;&#39;</span>
<span class="line">        Deletes the todo item with given todo_id if exists</span>
<span class="line">        &#39;&#39;&#39;</span></span>
<span class="line">        todo_instance <span class="token operator">=</span> self<span class="token punctuation">.</span>get_object<span class="token punctuation">(</span>todo_id<span class="token punctuation">,</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token keyword">not</span> todo_instance<span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">return</span> Response<span class="token punctuation">(</span></span>
<span class="line">                <span class="token punctuation">{</span><span class="token string">&quot;res&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Object with todo id does not exists&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> </span>
<span class="line">                status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_400_BAD_REQUEST</span>
<span class="line">            <span class="token punctuation">)</span></span>
<span class="line">        todo_instance<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> Response<span class="token punctuation">(</span></span>
<span class="line">            <span class="token punctuation">{</span><span class="token string">&quot;res&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Object deleted!&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_200_OK</span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>The <code>GET</code> method first fetches the object with the ID <code>todo_id</code> and the user as the request user from the to-do model. If the requested object is not available, it returns the response with the status <code>400_BAD_REQUEST</code>. Otherwise, it serializes the model object to a JSON serialized object and returns the response with <code>serializer.data</code> and the status <code>200_OK</code>.</p><p>The <code>PUT</code> method fetches the to-do object if it is available in the database, updates its data with requested data, and saves the updated data in the database.</p><p>The <code>DELETE</code> method fetches the to-do object if it is available in the database, deletes it, and provides a response.</p>`,40)),n("p",null,[s[63]||(s[63]=a("Update the API ")),e(o,{icon:"fa-brands fa-python"}),s[64]||(s[64]=n("code",null,"urls.py",-1)),s[65]||(s[65]=a(" as demonstrated below:"))]),s[98]||(s[98]=p(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="todo/api/urls.py"><span>todo/api/urls.py</span></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url</span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token punctuation">,</span> include</span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>views <span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">    TodoListApiView<span class="token punctuation">,</span></span>
<span class="line">    TodoDetailApiView</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;api&#39;</span><span class="token punctuation">,</span> TodoListApiView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;api/&lt;int:todo_id&gt;/&#39;</span><span class="token punctuation">,</span> TodoDetailApiView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Now, if you navigate to <code>http://127.0.0.1:8000/todos/api/&lt;id&gt;/</code>, it will show the Detail API view page. Notice that you correctly navigate to a valid ID. In the image below, I used <code>7</code> as the ID:</p><figure><img src="`+T+'" alt="The Detail API View Page" tabindex="0" loading="lazy"><figcaption>The Detail API View Page</figcaption></figure><hr><h2 id="authentication-and-permission-in-django" tabindex="-1"><a class="header-anchor" href="#authentication-and-permission-in-django"><span>Authentication and permission in Django</span></a></h2><p>You can implement authentication and permissions in your Django apps in multiple ways.</p>',6)),n("p",null,[s[70]||(s[70]=a("You can use the ")),n("a",N,[s[66]||(s[66]=a("Simple JWT package (")),e(o,{icon:"iconfont icon-github"}),s[67]||(s[67]=n("code",null,"jazzband/djangorestframework-simplejwt",-1)),s[68]||(s[68]=a(")"))]),s[71]||(s[71]=a(" (a DRF extension) for JWT authentication. Additionally, you can use ")),n("a",O,[e(o,{icon:"fas fa-globe"}),s[69]||(s[69]=a("djoser"))]),s[72]||(s[72]=a(", a powerful Django package that makes authentication endpoint implementation and user management easier in DRF APIs."))]),s[99]||(s[99]=p(`<p>Execute this command to install the packages:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">pip <span class="token function">install</span> djangorestframework-simplejwt djoser</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Next, you need to configure your Django project settings. First, add djoser to <code>INSTALLED_APPS</code> like this:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line">INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token comment"># third party apps</span></span>
<span class="line">    <span class="token string">&#39;djoser&#39;</span><span class="token punctuation">,</span>  </span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Next, add <code>REST_FRAMEWORK</code> settings:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line">REST_FRAMEWORK <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&#39;DEFAULT_AUTHENTICATION_CLASSES&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">&#39;rest_framework_simplejwt.authentication.JWTAuthentication&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string">&#39;DEFAULT_SCHEMA_CLASS&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;drf_spectacular.openapi.AutoSchema&#39;</span><span class="token punctuation">,</span>  <span class="token comment"># drf-spectacular settings</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Add the <code>SIMPLE_JWT</code> settings to configure the <code>simplejwt</code> package:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line">SIMPLE_JWT <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&#39;AUTH_HEADER_TYPES&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token string">&#39;JWT&#39;</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&quot;ACCESS_TOKEN_LIFETIME&quot;</span><span class="token punctuation">:</span> timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&quot;REFRESH_TOKEN_LIFETIME&quot;</span><span class="token punctuation">:</span> timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now, add <code>djoser</code> authentication URL routes in your <code>[url.py](&lt;http://url.py&gt;)</code> file.</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line">urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;admin/&#39;</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;auth/&#39;</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">&#39;djoser.urls&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;auth/&#39;</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">&#39;djoser.urls.jwt&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10)),n("p",null,[s[73]||(s[73]=a("Create a ")),e(o,{icon:"fa-brands fa-python"}),s[74]||(s[74]=n("code",null,"serializers.py",-1)),s[75]||(s[75]=a(" file in your Django app (not project!) and add this to the file:"))]),s[100]||(s[100]=p(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="serializers.py"><span>serializers.py</span></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> djoser<span class="token punctuation">.</span>serializers <span class="token keyword">import</span> UserSerializer<span class="token punctuation">,</span> UserCreateSerializer <span class="token keyword">as</span> BaseUserSerializer</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">UserCreateSerializer</span><span class="token punctuation">(</span>BaseUserSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">(</span>BaseUserSerializer<span class="token punctuation">.</span>Meta<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;email&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;username&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;password&#39;</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Here, you imported two serializers from the <code>djoser</code> package. The <code>UserSerializer</code> serializes user objects while the <code>UserCreateSerializer</code> creates user objects.</p><p>The custom serializer inherits from djoser’s <code>UserCreateSerializer</code> and overrides the <code>Meta</code> class to define the <code>id</code>, <code>email</code>, <code>username</code>, and <code>password</code> fields for serialization:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="serializer.py"><span>serializer.py</span></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">class</span> <span class="token class-name">CurrentUserSerializer</span><span class="token punctuation">(</span>UserSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">(</span>UserSerializer<span class="token punctuation">.</span>Meta<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;email&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;username&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;password&#39;</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>The <code>CurrentUserSerializer</code> class inherits from <code>UserSerializer</code>. Like <code>UserCreateSerializer</code>, the <code>Meta</code> class is overridden for custom behavior, and fields are specified.</p>`,5)),n("p",null,[s[76]||(s[76]=a("Now, create a custom ")),e(o,{icon:"fa-brands fa-python"}),s[77]||(s[77]=n("code",null,"permissions.py",-1)),s[78]||(s[78]=a(" file in the Django app directory and add this code to the file:"))]),s[101]||(s[101]=p(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="permissions.py"><span>permissions.py</span></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> permissions</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">IsOwner</span><span class="token punctuation">(</span>permissions<span class="token punctuation">.</span>BasePermission<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">has_object_permission</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> view<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token keyword">in</span> permissions<span class="token punctuation">.</span>SAFE_METHODS<span class="token punctuation">:</span></span>
<span class="line">            <span class="token comment"># Allow read-only methods for everyone</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token boolean">True</span></span>
<span class="line">        <span class="token comment"># Check if the user making the request is the owner of the student object</span></span>
<span class="line">        <span class="token keyword">return</span> obj<span class="token punctuation">.</span>user <span class="token operator">==</span> request<span class="token punctuation">.</span>user</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Here, you’ve defined a custom permissions class that extends the <code>permissions.BasePermission</code> from DRF.</p><p>The <code>IsOwner</code> class is customer permission that ensures general read access for all users while restricting modification rights to the user with the object. The <code>SAFE_METHODS</code> list identifies read-only requests universally.</p>`,3)),n("p",null,[s[79]||(s[79]=a("Add these to your ")),e(o,{icon:"fa-brands fa-python"}),s[80]||(s[80]=n("code",null,"views.py",-1)),s[81]||(s[81]=a(" file:"))]),s[102]||(s[102]=p(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="todo/todo_api/views.py"><span>todo/todo_api/views.py</span></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> rest_framework_simplejwt<span class="token punctuation">.</span>authentication <span class="token keyword">import</span> JWTAuthentication</span>
<span class="line"><span class="token keyword">from</span> permissions <span class="token keyword">import</span> IsOwner</span>
<span class="line"><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>permissions <span class="token keyword">import</span> IsAuthenticated</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>We’ve imported the <code>JWTAuthentication</code> class from the <code>rest_framework_simplejwt.authentication</code> module. <code>JWTAuthentication</code> is a DRF authentication class that verifies the JWTs in the request headers.</p><p>You’ve also imported a custom permission for the app (<code>IsOwner</code>).</p><p>Add the JWT authentication and custom permissions to the <code>TodoListApiView</code> and the <code>TodoDetailApiView</code>:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line">authentication_classes <span class="token operator">=</span> <span class="token punctuation">[</span>JWTAuthentication<span class="token punctuation">]</span></span>
<span class="line">permission_classes <span class="token operator">=</span> <span class="token punctuation">[</span>IsAuthenticated<span class="token punctuation">,</span> IsOwner<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>The two lines of code add the JWT authentication and custom permissions to both endpoints, requiring the user to authenticate using JWT tokens and not edit other users’ to-do items.</p><p>Now, let’s test the functionality. Execute the code using the command below:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python manage.py runserver</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now, navigate to this page to view the documentation:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="url"><span>url</span></div><div class="language-plaintext line-numbers-mode" data-highlighter="prismjs" data-ext="plaintext"><pre><code class="language-plaintext"><span class="line">http://127.0.0.1:8000/api/schema/swagger/#/todos/todos_api_create</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></div><figure><img src="`+j+'" alt="To Do List Documentation" tabindex="0" loading="lazy"><figcaption>To Do List Documentation</figcaption></figure><p>Click on the endpoint <code>/todo/api/</code>, then click <strong>Try it out</strong>.</p><p>Next, fill the serializer fields with the required testing data and click <strong>Execute</strong>. Upon making that user request to the endpoint, our JWT authentication mechanism picked up the request but didn’t find the required access token for the route, thus responding with a 401 error:</p><figure><img src="'+E+`" alt="Unauthorization Error" tabindex="0" loading="lazy"><figcaption>Unauthorization Error</figcaption></figure><p>To get your authentication credentials, you must first create a user. In your terminal, run the following command:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python manage.py createsuperuser</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Provide the required credentials you are prompted for in the terminal. Then, head to the Django admin panel (<code>http://127.0.0.1:8000/admin/</code>) to create a guest user. Log in with the superuser credentials created before:</p><figure><img src="`+A+'" alt="Login To Create A Guest User" tabindex="0" loading="lazy"><figcaption>Login To Create A Guest User</figcaption></figure><p>Click the <strong>+</strong> icon beside the Users model to add the guest user to the project DB. Then, head over to the endpoint, <code>auth/jwt/create</code>:</p><figure><img src="'+S+'" alt=" Endpoint" tabindex="0" loading="lazy"><figcaption><code>/auth/jwt/create</code> Endpoint</figcaption></figure><p>Fill out the request body with the recently created guest user’s credentials (username and password), then click <strong>Execute</strong>.</p><p>The request returns the expected response and the access and refresh tokens for authenticating the user:</p><figure><img src="'+D+'" alt="Refresh And Access Tokens For Authenticating The User" tabindex="0" loading="lazy"><figcaption>Refresh And Access Tokens For Authenticating The User</figcaption></figure><p>Copy the access token from the response body. Then click on the <strong>Authorize</strong> button with the lock icon. A popup is displayed — input the letters “JWT”, followed by a space, and the access token. Then, click <strong>Authorize</strong>:</p><figure><img src="'+R+'" alt="Authorizing The ApiKey" tabindex="0" loading="lazy"><figcaption>Authorizing The ApiKey</figcaption></figure><p>Now head back to the post endpoint <code>/todos/api</code>. Leave the request body as it is and click <strong>Execute</strong>. The endpoint now gives the proper response because the user has been authenticated!</p><figure><img src="'+P+`" alt="User Has Been Authenticated" tabindex="0" loading="lazy"><figcaption>User Has Been Authenticated</figcaption></figure><hr><h2 id="customizing-http-responses-django" tabindex="-1"><a class="header-anchor" href="#customizing-http-responses-django"><span>Customizing HTTP responses Django</span></a></h2><p>Here’s how you can customize HTTP responses in your project. Using the examples inthe <code>TodolistApiView</code>, update the <code>GET</code> method with this:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># Retrieve all todo items for the authenticated user</span></span>
<span class="line">    todos <span class="token operator">=</span> Todo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>user<span class="token operator">=</span>request<span class="token punctuation">.</span>user<span class="token punctuation">)</span></span>
<span class="line">    serializer <span class="token operator">=</span> TodoSerializer<span class="token punctuation">(</span>todos<span class="token punctuation">,</span> many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>user<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>todos<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># Construct custom response data</span></span>
<span class="line">    custom_data <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string">&#39;count&#39;</span><span class="token punctuation">:</span> todos<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># Total count of todos</span></span>
<span class="line">        <span class="token string">&#39;results&#39;</span><span class="token punctuation">:</span> serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span>  <span class="token comment"># Serialized todo items</span></span>
<span class="line">        <span class="token string">&#39;message&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;List of todo items retrieved successfully.&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token comment"># Return custom response</span></span>
<span class="line">    <span class="token keyword">return</span> Response<span class="token punctuation">(</span>custom_data<span class="token punctuation">,</span> status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_200_OK<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>get</code> function customizes HTTP responses with the DRF. It retrieves to-do items associated with the authenticated user, serializes them, and constructs a custom response with the count of the to-do items, serialized data, and a success message before returning them as the HTTP response with a <code>200</code> HTTP status code.</p><p>To test this functionality, head over to the <code>/todos/api GET</code> method:</p><figure><img src="`+z+'" alt="Executing The Get Method" tabindex="0" loading="lazy"><figcaption>Executing The Get Method</figcaption></figure><p>Based on the code in the <code>todolist</code> API view, when you click <strong>Execute</strong>, you can see the response body give back the number of to-do items, the results, and the success message:</p><figure><img src="'+x+'" alt="Success Message With The To Do List Items" tabindex="0" loading="lazy"><figcaption>Success Message With The To Do List Items</figcaption></figure><hr><h2 id="best-practices-for-testing-rest-apis-built-with-django-rest-framework" tabindex="-1"><a class="header-anchor" href="#best-practices-for-testing-rest-apis-built-with-django-rest-framework"><span>Best practices for testing REST APIs built with Django REST framework</span></a></h2><p>Implement best practices to test the REST API projects you’ve built with DRF. Here are some practices that you can try out for your project:</p><ul><li>Use Django testing frameworks and functionalities like Django <code>TestCase</code> or DRF <code>APITestCase</code>. DRF extends them to add API-specific features that you can use to test your endpoints</li><li>Test all the HTTP methods of your project to verify their behavior and document them for maintenance</li><li>Mock external dependencies and services for test isolation. By mocking external dependencies, you can be sure that only the users you authorize can access protected resources and execute specific actions</li><li>Test edge cases like empty payloads, invalid data, and boundary conditions to verify appropriate error responses and API behaviors</li><li>Integrate your API workflows into a CI/CD pipeline to automate testing and ensure new changes don’t break existing systems</li><li>Test features like pagination, filtering, and sorting if your API supports them</li><li>It would be best to also document your test cases, including test purposes, expected outcomes, and dependencies. This helps stakeholders understand and maintain tests in a project</li></ul><p>Finally, as your API evolves, regularly review and update your tests to reflect functionality, requirements, and code base structure changes in the long term.</p><hr><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h2><p>Congratulations! You’ve successfully built your first fully functional CRUD Django REST API. Building a RESTful API can be complicated, but Django REST framework handles complexity fairly well. I hope you have fun building new APIs using DRF, and be sure to leave a comment if you have any questions. Happy coding!</p>',44)),h(" TODO: add ARTICLE CARD "),e(r,d(u({title:"How to create a REST API with Django REST framework",desc:"Use the Django REST framework to create powerful APIs for your web application, handling user login and authentication.",link:"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/django-rest-framework-create-api.html",logo:"/assets/image/blog.logrocket.com/favicon.png",background:"rgba(112,76,182,0.2)"})),null,16)])}const V=g(I,[["render",F]]),B=JSON.parse('{"path":"/blog.logrocket.com/django-rest-framework-create-api.html","title":"How to create a REST API with Django REST framework","lang":"en-US","frontmatter":{"lang":"en-US","title":"How to create a REST API with Django REST framework","description":"Article(s) > How to create a REST API with Django REST framework","icon":"iconfont icon-django","category":["Python","Django","Article(s)"],"tag":["blog","blog.logrocket.com","python","py","django","py-django"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"How to create a REST API with Django REST framework\\",\\"image\\":[\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/banner.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/testing-to-do-list-api.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/detail-api-view-page.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/to-do-list-documentation.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/unauthorization-error.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/login-create-guest-user.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/auth-jwt-create-endpoint.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/refresh-access-tokens-authenticating-user.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/authorizing-apikey.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/user-has-been-authenticated.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/executing-get-method.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/success-message-do-list-items.png\\"],\\"datePublished\\":\\"2024-03-13T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Gaurav Singhal\\",\\"url\\":\\"https://blog.logrocket.com/author/gauravsinghal/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/django-rest-framework-create-api.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"How to create a REST API with Django REST framework"}],["meta",{"property":"og:description","content":"Article(s) > How to create a REST API with Django REST framework"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/banner.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/django-rest-framework-create-api/banner.png"}],["meta",{"name":"twitter:image:alt","content":"How to create a REST API with Django REST framework"}],["meta",{"property":"article:author","content":"Gaurav Singhal"}],["meta",{"property":"article:tag","content":"py-django"}],["meta",{"property":"article:tag","content":"django"}],["meta",{"property":"article:tag","content":"py"}],["meta",{"property":"article:tag","content":"python"}],["meta",{"property":"article:tag","content":"blog.logrocket.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2024-03-13T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > How to create a REST API with Django REST framework"},{"property":"og:description","content":"How to create a REST API with Django REST framework"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/django-rest-framework-create-api.html"}]],"prev":"/programming/py-django/articles/README.md","date":"2024-03-13T00:00:00.000Z","isOriginal":false,"author":[{"name":"Gaurav Singhal","url":"https://blog.logrocket.com/author/gauravsinghal/"}],"cover":"/assets/image/blog.logrocket.com/django-rest-framework-create-api/banner.png"},"git":{},"readingTime":{"minutes":11.3,"words":3391},"filePathRelative":"blog.logrocket.com/django-rest-framework-create-api.md","copyright":{"author":"Gaurav Singhal"}}');export{V as comp,B as data};
