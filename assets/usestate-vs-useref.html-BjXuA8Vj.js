import{_ as g}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as m,d as s,f as t,b as p,a as b,t as f,n as r,g as d,w as o,e as a,r as c,o as h}from"./app-BVguHYKu.js";const y="/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/banner.png",w="/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/component-re-render-every-state-change.gif",x="/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/react-devtools-highlight-option.png",j="/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/child-component-re-render-every-state-change.gif",q="/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/react-hooks-lifecycle-diagram.png",S="/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/setting-state-useeffect.webp",R="/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/useeffect-render-infinite-loop.webp",A="/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/values-stored-current-property.png",D="/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/count-no-update-click.webp",C="/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/controlled-component-renders-every-keystroke.webp",M="/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/uncontrolled-component-no-re-renders.gif",T="/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/focus-input-field.webp",E="/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/access-previous-state-useref.webp",I="/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/normal-variable-assignment-useref.webp",H="/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/eslint-rules-hooks-plugin-warning.png",L={},z={id:"frontmatter-title-관련",tabindex:"-1"},N={class:"header-anchor",href:"#frontmatter-title-관련"},U={class:"table-of-contents"},W={href:"https://codesandbox.io/s/gifted-austin-28p3z?file=/src/App.js",target:"_blank",rel:"noopener noreferrer"},V={href:"https://reactjs.org/docs/hooks-state.html",target:"_blank",rel:"noopener noreferrer"},P={href:"https://reactjs.org/docs/hooks-reference.html#lazy-initial-state",target:"_blank",rel:"noopener noreferrer"},O={href:"https://reactjs.org/docs/hooks-rules.html",target:"_blank",rel:"noopener noreferrer"},B={href:"https://wavez.github.io/react-hooks-lifecycle/",target:"_blank",rel:"noopener noreferrer"},F={href:"https://reactjs.org/docs/hooks-effect.html",target:"_blank",rel:"noopener noreferrer"},Y={class:"hint-container note"},$={href:"https://reactjs.org/docs/hooks-reference.html#functional-updates",target:"_blank",rel:"noopener noreferrer"},J={href:"https://reactjs.org/docs/state-and-lifecycle.html",target:"_blank",rel:"noopener noreferrer"},G={href:"https://reactjs.org/docs/hooks-faq.html#should-i-use-one-or-many-state-variables",target:"_blank",rel:"noopener noreferrer"},Z={href:"https://reactjs.org/docs/hooks-reference.html#useref",target:"_blank",rel:"noopener noreferrer"},K={href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let",target:"_blank",rel:"noopener noreferrer"},X={href:"https://reactjs.org/docs/hooks-reference.html#usereducer",target:"_blank",rel:"noopener noreferrer"},Q={href:"https://reactjs.org/docs/hooks-reference.html#usecontext",target:"_blank",rel:"noopener noreferrer"},_={href:"https://reactjs.org/docs/hooks-faq.html#is-there-something-like-instance-variables",target:"_blank",rel:"noopener noreferrer"},nn={href:"https://reactjs.org/docs/uncontrolled-components.html",target:"_blank",rel:"noopener noreferrer"},sn={href:"https://reactjs.org/docs/uncontrolled-components.html",target:"_blank",rel:"noopener noreferrer"},an={href:"https://developer.mozilla.org/en-US/docs/Web/API/HTMLOrForeignElement/focus",target:"_blank",rel:"noopener noreferrer"},tn={href:"https://usehooks.com/usePrevious/",target:"_blank",rel:"noopener noreferrer"},en={href:"https://npmjs.com/package/eslint-plugin-react-hooks",target:"_blank",rel:"noopener noreferrer"},pn={href:"https://doppelmutzi.github.io/javascript-to-master-before-learning-react/#immutable-vs-mutable-values",target:"_blank",rel:"noopener noreferrer"},on={href:"https://reactjs.org/docs/react-component.html#state",target:"_blank",rel:"noopener noreferrer"};function ln(k,n){const u=c("VPCard"),l=c("router-link"),v=c("SiteInfo"),e=c("VPIcon"),i=c("RouteLink");return h(),m("div",null,[s("h1",z,[s("a",N,[s("span",null,f(k.$frontmatter.title)+" 관련",1)])]),t(u,r(d({title:"React.js > Article(s)",desc:"Article(s)",link:"/programming/js-react/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",U,[s("ul",null,[s("li",null,[t(l,{to:"#understanding-the-usestate-hook"},{default:o(()=>n[0]||(n[0]=[a("Understanding the useState Hook")])),_:1,__:[0]}),s("ul",null,[s("li",null,[t(l,{to:"#using-the-usestate-hook-with-useeffect"},{default:o(()=>n[1]||(n[1]=[a("Using the useState Hook with useEffect")])),_:1,__:[1]})]),s("li",null,[t(l,{to:"#differences-from-class-based-components"},{default:o(()=>n[2]||(n[2]=[a("Differences from class-based components")])),_:1,__:[2]})])])]),s("li",null,[t(l,{to:"#understanding-the-useref-hook"},{default:o(()=>n[3]||(n[3]=[a("Understanding the useRef Hook")])),_:1,__:[3]}),s("ul",null,[s("li",null,[t(l,{to:"#common-use-cases-for-useref"},{default:o(()=>n[4]||(n[4]=[a("Common use cases for useRef")])),_:1,__:[4]})]),s("li",null,[t(l,{to:"#why-let-can-t-replace-useref"},{default:o(()=>n[5]||(n[5]=[a("Why let can’t replace useRef")])),_:1,__:[5]})])])]),s("li",null,[t(l,{to:"#the-differences-between-useref-and-usestate-at-a-glance"},{default:o(()=>n[6]||(n[6]=[a("The differences between useRef and useState at a glance")])),_:1,__:[6]})]),s("li",null,[t(l,{to:"#conclusion"},{default:o(()=>n[7]||(n[7]=[a("Conclusion")])),_:1,__:[7]})])])]),n[132]||(n[132]=s("hr",null,null,-1)),t(v,{name:"useState vs. useRef: Similarities, differences, and use cases",desc:"Learn the similarities and differences between the useState and useRef Hooks in React, as illustrated demos and use cases.",url:"https://blog.logrocket.com/usestate-vs-useref",logo:"/assets/image/blog.logrocket.com/favicon.png",preview:"/assets/image/blog.logrocket.com/usestate-vs-useref/banner.png"}),n[133]||(n[133]=s("p",null,[a("This article explains the React Hooks "),s("code",null,"useState"),a(" and "),s("code",null,"useRef"),a(". You’ll learn their basic usage and get to know the different use cases for both Hooks.")],-1)),n[134]||(n[134]=s("figure",null,[s("img",{src:y,alt:" vs. : Similarities, Differences, and Use Cases",tabindex:"0",loading:"lazy"}),s("figcaption",null,[s("code",null,"useState"),a(" vs. "),s("code",null,"useRef"),a(": Similarities, Differences, and Use Cases")])],-1)),s("p",null,[n[9]||(n[9]=a("You can find the examples as part of a ")),s("a",W,[t(e,{icon:"iconfont icon-codesandbox"}),n[8]||(n[8]=a("CodeSandbox"))]),n[10]||(n[10]=a(". To see the different examples in action, just adapt the following line in ")),t(e,{icon:"fa-brands fa-react"}),n[11]||(n[11]=s("code",null,"App.jsx",-1)),n[12]||(n[12]=a(":"))]),n[135]||(n[135]=p(`<div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> AppDemo6<span class="token punctuation">;</span> <span class="token comment">// change to AppDemo&lt;Nr&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="understanding-the-usestate-hook" tabindex="-1"><a class="header-anchor" href="#understanding-the-usestate-hook"><span>Understanding the <code>useState</code> Hook</span></a></h2>`,3)),s("p",null,[n[14]||(n[14]=a("The ")),s("a",V,[t(e,{icon:"fa-brands fa-react"}),n[13]||(n[13]=s("code",null,"useState",-1))]),n[15]||(n[15]=a(" Hook enables the development of component state for functional components. Before React 16.8, state local to a component was only possible with class-based components."))]),n[136]||(n[136]=p(`<p>Take a look at the following code.</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="AppDemo1.jsx"><span>AppDemo1.jsx</span></div><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">AppDemo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> stateWithUpdater <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> darkMode <span class="token operator">=</span> stateWithUpdater<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> darkModeUpdater <span class="token operator">=</span> stateWithUpdater<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>darkMode <span class="token operator">?</span> <span class="token string">&quot;dark mode on&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;dark mode off&quot;</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">darkModeUpdater</span><span class="token punctuation">(</span><span class="token operator">!</span>darkMode<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        toggle dark mode</span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>The <code>useState</code> Hook returns an array with two items. In the example, we implement a Boolean component state, and we initialize our Hook with <code>true</code>.</p>`,3)),s("p",null,[n[17]||(n[17]=a("This single argument of ")),n[18]||(n[18]=s("code",null,"useState",-1)),n[19]||(n[19]=a(" is considered only during the initial render cycle. If you need an initial value that is complex to calculate, however, then you can ")),s("a",P,[t(e,{icon:"fa-brands fa-react"}),n[16]||(n[16]=a("pass a callback function"))]),n[20]||(n[20]=a(" for performance optimization purposes."))]),n[137]||(n[137]=p(`<p>The first array item represents the actual state, and the second item constitutes the state updater function. The <code>onClick</code> handler demonstrates how to use the updater function (<code>darkModeUpdate</code>) to change the state variable (<code>darkMode</code>). It is important to update your state exactly like this. The following code is illegal:</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line">darkMode <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,2)),s("p",null,[n[22]||(n[22]=a("If you have some experience with the ")),n[23]||(n[23]=s("code",null,"useState",-1)),n[24]||(n[24]=a(" Hook, you may wonder about the syntax of my example. The default usage is to utilize the returned array items with the help of ")),t(i,{to:"/blog.logrocket.com/javascript-concepts-before-learning-react.html"},{default:o(()=>n[21]||(n[21]=[s("strong",null,"array destructuring",-1)])),_:1,__:[21]}),n[25]||(n[25]=a("."))]),n[138]||(n[138]=p(`<div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">const</span> <span class="token punctuation">[</span>darkMode<span class="token punctuation">,</span> setDarkMode<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,1)),s("p",null,[n[27]||(n[27]=a("As a reminder, it’s crucial to follow ")),s("a",O,[t(e,{icon:"fa-brands fa-react"}),n[26]||(n[26]=a("the rules of Hooks"))]),n[28]||(n[28]=a(" when using any Hook, not just ")),n[29]||(n[29]=s("code",null,"useState",-1)),n[30]||(n[30]=a(" or ")),n[31]||(n[31]=s("code",null,"useRef",-1)),n[32]||(n[32]=a(":"))]),n[139]||(n[139]=p(`<ul><li>Hooks should only be called from the top level of your React function</li><li>Hooks must not be called from nested code (e.g., loops, conditions)</li><li>Hooks may also be called at the top level from custom Hooks</li></ul><p>Now that we’ve covered the basics, let’s look at all aspects of the Hook with the following example code.</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="AppDemo2.jsx"><span>AppDemo2.jsx</span></div><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">AppDemo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;render App&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>darkMode<span class="token punctuation">,</span> setDarkMode<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">App </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>darkMode <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;dark-mode&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">The useState hook</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Click the button to toggle the state</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span></span>
<span class="line">        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token function">setDarkMode</span><span class="token punctuation">(</span><span class="token operator">!</span>darkMode<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">}</span></span></span>
<span class="line">      <span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        toggle dark mode</span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>If <code>darkMode</code> is set to <code>true</code>, then an additional CSS class (<code>dark-mode</code>) is added to <code>className</code>, and the colors of the background and the text are inverted. As you can see from the console output in the recording, every time the state changes, the corresponding component gets re-rendered.</p><figure><img src="`+w+'" alt="App Component Re-rendering on Every State Change" tabindex="0" loading="lazy"><figcaption>App Component Re-rendering on Every State Change</figcaption></figure><p>Every state change re-renders the <code>App</code> component.</p>',6)),s("p",null,[t(i,{to:"/blog.logrocket.com/debug-react-applications-with-the-new-react-devtools.html"},{default:o(()=>n[33]||(n[33]=[s("strong",null,"React DevTools",-1)])),_:1,__:[33]}),n[34]||(n[34]=a(" is especially helpful here to visually highlight updates when components render. In the last recording, you can see the flashing border around the component that notifies you of another component rendering cycle."))]),n[140]||(n[140]=p('<figure><img src="'+x+`" alt="Enabling React DevTools Option to Highlight Re-renders" tabindex="0" loading="lazy"><figcaption>Enabling React DevTools Option to Highlight Re-renders</figcaption></figure><p>Option to visually highlight re-renders.</p><p>In the next example, the headings are extracted into a separate React component (<code>Description</code>).</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="AppDemo3.jsx"><span>AppDemo3.jsx</span></div><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">AppDemo3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;render App&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>darkMode<span class="token punctuation">,</span> setDarkMode<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">App </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>darkMode <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;dark-mode&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Description</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span></span>
<span class="line">        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token function">setDarkMode</span><span class="token punctuation">(</span><span class="token operator">!</span>darkMode<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">}</span></span></span>
<span class="line">      <span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        toggle dark mode</span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">Description</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;render Description&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">The useState hook</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Click the button to toggle the state</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>The <code>App</code> component gets rendered whenever the user clicks on the button because the corresponding click handler updates the <code>darkMode</code> state variable. Additionally, the child component <code>Description</code> gets rendered, too.</p><figure><img src="`+j+'" alt="App and Child Components Re-rendering on Every State Change" tabindex="0" loading="lazy"><figcaption>App and Child Components Re-rendering on Every State Change</figcaption></figure><p>Every state change re-renders the <code>App</code> and child components.</p>',7)),s("p",null,[n[36]||(n[36]=a("The ")),s("a",B,[t(e,{icon:"fas fa-globe"}),n[35]||(n[35]=a("following diagram"))]),n[37]||(n[37]=a(" illustrates that a state change causes a render cycle."))]),n[141]||(n[141]=s("figure",null,[s("img",{src:q,alt:"Diagram of the React Hooks Lifecycle",tabindex:"0",loading:"lazy"}),s("figcaption",null,"Diagram of the React Hooks Lifecycle")],-1)),n[142]||(n[142]=s("p",null,"A state update re-renders the corresponding component.",-1)),n[143]||(n[143]=s("p",null,"Why is it important to understand the React Hooks lifecycle? On the one hand, state is preserved over render as long as you do not update the state via the updater function, which in itself triggers a renewed render cycle.",-1)),n[144]||(n[144]=s("h3",{id:"using-the-usestate-hook-with-useeffect",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#using-the-usestate-hook-with-useeffect"},[s("span",null,[a("Using the "),s("code",null,"useState"),a(" Hook with "),s("code",null,"useEffect")])])],-1)),s("p",null,[n[39]||(n[39]=a("Another important concept to understand is the ")),s("a",F,[t(e,{icon:"fa-brands fa-react"}),n[38]||(n[38]=s("code",null,"useEffect",-1))]),n[40]||(n[40]=a(" Hook, which you most likely have to use in your application to invoke asynchronous code (e.g., to fetch data). As you can see in the previous diagram, the ")),n[41]||(n[41]=s("code",null,"useState",-1)),n[42]||(n[42]=a(" and ")),n[43]||(n[43]=s("code",null,"useEffect",-1)),n[44]||(n[44]=a(" Hooks are tightly coupled because state changes might invoke effects."))]),n[145]||(n[145]=p(`<p>Let’s take a look at the following example. We introduce two additional state variables: <code>loading</code> and <code>lang</code>. The effect is invoked whenever the <code>url</code> prop changes. It fetches a language string (either <code>en</code> or <code>de</code>) and updates the state with the <code>setLang</code> updater function.</p><p>Depending on the language, an English or German string inside of the heading gets rendered. In addition, during the process of fetching, a <code>loading</code> state is set, and depending on the value (<code>true</code> or <code>false</code>), a loading indicator is rendered instead of the heading.</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="App4.jsx"><span>App4.jsx</span></div><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">App4</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> url <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;render App&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>lang<span class="token punctuation">,</span> setLang<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&quot;de&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>darkMode<span class="token punctuation">,</span> setDarkMode<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;useEffect&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token function-variable function">fetchData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token keyword">const</span> <span class="token punctuation">{</span> language <span class="token punctuation">}</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span></span>
<span class="line">          <span class="token function">setLang</span><span class="token punctuation">(</span>language<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">throw</span> error<span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>url<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">App </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>darkMode <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;dark-mode&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token punctuation">{</span>loading <span class="token operator">?</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Loading...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token punctuation">{</span>lang <span class="token operator">===</span> <span class="token string">&quot;en&quot;</span></span>
<span class="line">              <span class="token operator">?</span> <span class="token string">&quot;The useState hook is awesome&quot;</span></span>
<span class="line">              <span class="token operator">:</span> <span class="token string">&quot;Der useState Hook ist toll&quot;</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span></span>
<span class="line">            <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">              <span class="token function">setDarkMode</span><span class="token punctuation">(</span><span class="token operator">!</span>darkMode<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">}</span></span></span>
<span class="line">          <span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            toggle dark mode</span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><figure><img src="`+S+'" alt="Setting Loading and Lang State Inside useEffect" tabindex="0" loading="lazy"><figcaption>Setting Loading and Lang State Inside useEffect</figcaption></figure><p>Setting loading and lang state inside <code>useEffect</code>.</p><p>Let’s pretend we want to toggle the dark mode whenever we’ve fetched the current language. We add a call to the <code>setDarkMode</code> updater after we’ve updated the language. In addition, we need to add the <code>darkMode</code> state as a dependency to the effect’s dependency array.</p>',6)),s("div",Y,[n[48]||(n[48]=s("p",{class:"hint-container-title"},"Note",-1)),s("p",null,[n[46]||(n[46]=a("Why this must be done goes beyond the scope of this article, but you can ")),t(i,{to:"/blog.logrocket.com/useeffect-react-hook-complete-guide.html"},{default:o(()=>n[45]||(n[45]=[s("strong",null,[a("read about the "),s("code",null,"useEffect"),a(" Hook in great detail")],-1)])),_:1,__:[45]}),n[47]||(n[47]=a(" in my previous post."))])]),n[146]||(n[146]=p(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="AppDemo5.jsx"><span>AppDemo5.jsx</span></div><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">AppDemo5</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> url <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;render App&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>lang<span class="token punctuation">,</span> setLang<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&quot;de&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>darkMode<span class="token punctuation">,</span> setDarkMode<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;useEffect&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token function-variable function">fetchData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token keyword">const</span> <span class="token punctuation">{</span> language <span class="token punctuation">}</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span></span>
<span class="line">          <span class="token function">setLang</span><span class="token punctuation">(</span>language<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          <span class="token function">setDarkMode</span><span class="token punctuation">(</span><span class="token operator">!</span>darkMode<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">throw</span> error<span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>url<span class="token punctuation">,</span> darkMode<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">App </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>darkMode <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;dark-mode&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token punctuation">{</span>loading <span class="token operator">?</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Loading...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token punctuation">{</span>lang <span class="token operator">===</span> <span class="token string">&quot;en&quot;</span></span>
<span class="line">              <span class="token operator">?</span> <span class="token string">&quot;The useState hook is awesome&quot;</span></span>
<span class="line">              <span class="token operator">:</span> <span class="token string">&quot;Der useState Hook ist toll&quot;</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span></span>
<span class="line">            <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">              <span class="token function">setDarkMode</span><span class="token punctuation">(</span><span class="token operator">!</span>darkMode<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">}</span></span></span>
<span class="line">          <span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            toggle dark mode</span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Unfortunately, we have caused an infinite loop.</p><figure><img src="`+R+'" alt="Incorrect Use of useEffect Causes an Infinite Loop of Renders" tabindex="0" loading="lazy"><figcaption>Incorrect Use of useEffect Causes an Infinite Loop of Renders</figcaption></figure><p>Wrong usage of state in combination with <code>useEffect</code> causes an infinite loop.</p><p>Why is that? Because we have added <code>darkMode</code> to the dependency array of the effect, and we updated this exact state inside of the effect, the effect gets invoked again, updates the state again, and this goes on and on.</p>',5)),s("p",null,[n[50]||(n[50]=a("But there is a way out! We can avoid the ")),n[51]||(n[51]=s("code",null,"darkMode",-1)),n[52]||(n[52]=a(" as the effect’s dependency by ")),s("a",$,[t(e,{icon:"fa-brands fa-react"}),n[49]||(n[49]=a("calculating the new state from the previous state"))]),n[53]||(n[53]=a(". We call the ")),n[54]||(n[54]=s("code",null,"setDarkMode",-1)),n[55]||(n[55]=a(" updater differently by passing a function that has the previous state as an argument."))]),n[147]||(n[147]=p(`<p>The revised <code>useEffect</code> implementation looks like this:</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;useEffect&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token function-variable function">fetchData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token punctuation">{</span> language <span class="token punctuation">}</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">setLang</span><span class="token punctuation">(</span>language<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">setDarkMode</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">previous</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>previous<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// no access of darkMode state</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">throw</span> error<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>url<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// no darkMode dependency</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="differences-from-class-based-components" tabindex="-1"><a class="header-anchor" href="#differences-from-class-based-components"><span>Differences from class-based components</span></a></h3>`,3)),s("p",null,[n[57]||(n[57]=a("If you’ve been using React for a long time or you’re currently working on legacy code, you know class-based components. With class-based components, you have one single object representing the component state. To update one slice of the overall state, you can leverage the generic ")),s("a",J,[t(e,{icon:"fa-brands fa-react"}),n[56]||(n[56]=s("code",null,"setState",-1))]),n[58]||(n[58]=a(" method."))]),n[148]||(n[148]=p(`<p>Imagine we only want to update the <code>darkMode</code> state variable. Then you can just put the updated property into the object; the rest of the state remains unaffected.</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">darkMode</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>With functional components, however, the preferred way is to use atomic state variables that can be updated individually. Otherwise, you can quickly find yourself in the valley of tears.</p><p>Compared to <code>AppDemo6</code>, the following component (<code>AppDemo7</code>) has only been refactored with regard to state management. Instead of three atomic state variables with primitive data types, we use one state object (<code>state</code>).</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="AppDemo7.jsx"><span>AppDemo7.jsx</span></div><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">AppDemo7</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> url <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">lang</span><span class="token operator">:</span> <span class="token string">&quot;de&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">darkMode</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialState<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;render App&quot;</span><span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;useEffect&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token function-variable function">fetchData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">lang</span><span class="token operator">:</span> prev<span class="token punctuation">.</span>lang<span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">darkMode</span><span class="token operator">:</span> prev<span class="token punctuation">.</span>darkMode</span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token keyword">const</span> <span class="token punctuation">{</span> language <span class="token punctuation">}</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span></span>
<span class="line">          <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">lang</span><span class="token operator">:</span> language<span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">darkMode</span><span class="token operator">:</span> <span class="token operator">!</span>prev<span class="token punctuation">.</span>darkMode<span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">loading</span><span class="token operator">:</span> prev<span class="token punctuation">.</span>loading</span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">throw</span> error<span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">lang</span><span class="token operator">:</span> prev<span class="token punctuation">.</span>lang<span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">darkMode</span><span class="token operator">:</span> prev<span class="token punctuation">.</span>darkMode</span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>url<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">App </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>state<span class="token punctuation">.</span>darkMode <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;dark-mode&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>loading <span class="token operator">?</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Loading...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>lang <span class="token operator">===</span> <span class="token string">&quot;en&quot;</span></span>
<span class="line">              <span class="token operator">?</span> <span class="token string">&quot;The useState hook is awesome&quot;</span></span>
<span class="line">              <span class="token operator">:</span> <span class="token string">&quot;Der useState Hook ist toll&quot;</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span></span>
<span class="line">            <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">              <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">                <span class="token literal-property property">darkMode</span><span class="token operator">:</span> <span class="token operator">!</span>prev<span class="token punctuation">.</span>darkMode<span class="token punctuation">,</span></span>
<span class="line">                <span class="token comment">// lang: prev.lang,</span></span>
<span class="line">                <span class="token literal-property property">loading</span><span class="token operator">:</span> prev<span class="token punctuation">.</span>loading</span>
<span class="line">              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">}</span></span></span>
<span class="line">          <span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            toggle dark mode</span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>As you can see, the the code is messy and hard to maintain. It also includes a bug illustrated with a commented-out property in the <code>onClick</code> handler. When the user clicks the button, the overall state is not calculated correctly.</p>`,6)),s("p",null,[n[60]||(n[60]=a("In this case, the ")),n[61]||(n[61]=s("code",null,"lang",-1)),n[62]||(n[62]=a(" property is not present. This leads to a bug that causes the text to be rendered in German since ")),n[63]||(n[63]=s("code",null,"state.lang",-1)),n[64]||(n[64]=a(" is ")),n[65]||(n[65]=s("code",null,"undefined",-1)),n[66]||(n[66]=a(". I hope that I have definitively shown that this is a bad idea. By the way, the ")),s("a",G,[t(e,{icon:"fa-brands fa-react"}),n[59]||(n[59]=a("React team doesn’t recommend that either"))]),n[67]||(n[67]=a("."))]),n[149]||(n[149]=s("hr",null,null,-1)),n[150]||(n[150]=s("h2",{id:"understanding-the-useref-hook",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#understanding-the-useref-hook"},[s("span",null,[a("Understanding the "),s("code",null,"useRef"),a(" Hook")])])],-1)),s("p",null,[n[69]||(n[69]=a("The ")),s("a",Z,[t(e,{icon:"fa-brands fa-react"}),n[68]||(n[68]=s("code",null,"useRef",-1))]),n[70]||(n[70]=a(" Hook is similar to ")),n[71]||(n[71]=s("code",null,"useState",-1)),n[72]||(n[72]=a(", but different 😀. Before I clear that up, I’ll explain its basic usage."))]),n[151]||(n[151]=p(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="AppDemo8.jsx"><span>AppDemo8.jsx</span></div><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">AppDemo8</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> ref1 <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> ref2 <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token number">2021</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;render&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ref1<span class="token punctuation">,</span> ref2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>ref1<span class="token punctuation">.</span>current<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>ref2<span class="token punctuation">.</span>current<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>The result is unspectacular but shows the crux.</p><figure><img src="`+A+'" alt=" Values Are Stored in the Current Property" tabindex="0" loading="lazy"><figcaption><code>useRef</code> Values Are Stored in the Current Property</figcaption></figure><p>The values are stored in the <code>current</code> property.</p><p>We initialized two references (aka refs) by calling. The Hook call returns an object that has a property <code>current</code>, which stores the actual value. If you pass an argument <code>initialValue</code> to <code>useRef(initialValue)</code>, then this value is stored in <code>current</code>.</p><p>That’s the reason why the first <code>console.log</code> output stores <code>undefined</code>: because we invoked the Hook without any argument. Don’t worry, we can assign values later.</p><p>To access a ref’s value, you need to access its <code>current</code> property, as we did in the JSX part. refs are directly available in the initial render right after they have been defined.</p>',7)),s("p",null,[n[75]||(n[75]=a("But why do we need ")),n[76]||(n[76]=s("code",null,"useRef",-1)),n[77]||(n[77]=a(" at all? Why not use ordinary ")),s("a",K,[t(e,{icon:"fa-brands fa-firefox"}),n[73]||(n[73]=s("code",null,"let",-1)),n[74]||(n[74]=a(" variables"))]),n[78]||(n[78]=a(" instead? Hold your horses — we’ll come back to that."))]),n[152]||(n[152]=p(`<h3 id="common-use-cases-for-useref" tabindex="-1"><a class="header-anchor" href="#common-use-cases-for-useref"><span>Common use cases for <code>useRef</code></span></a></h3><p>Let’s take a look at the following example.</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="AppDemo9.jsx"><span>AppDemo9.jsx</span></div><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">AppDemo9</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> countRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;render&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">count: </span><span class="token punctuation">{</span>countRef<span class="token punctuation">.</span>current<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span></span>
<span class="line">        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          countRef<span class="token punctuation">.</span>current <span class="token operator">=</span> countRef<span class="token punctuation">.</span>current <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>countRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">}</span></span></span>
<span class="line">      <span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        increase count</span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Our goal is to define a ref called <code>countRef</code>, initialize the value with <code>0</code>, and increase this counter variable on every button click. The rendered count value should update. Unfortunately, it does not work — even the console output proves that the <code>current</code> property holds the correct updates.</p><figure><img src="`+D+'" alt="Count Doesn&#39;t Update on Button Click" tabindex="0" loading="lazy"><figcaption>Count Doesn&#39;t Update on Button Click</figcaption></figure><p>Count does not update on button click.</p><p>As you see from our other console output render, our component does not re-render. We could utilize <code>useState</code> instead to have this behavior.</p>',7)),s("p",null,[n[81]||(n[81]=a("What? So ")),n[82]||(n[82]=s("code",null,"useRef",-1)),n[83]||(n[83]=a(" is pretty useless? Not so fast — it’s handy in combination with other Hooks triggering re-renders, such as ")),n[84]||(n[84]=s("code",null,"useState",-1)),n[85]||(n[85]=a(", ")),s("a",X,[t(e,{icon:"fa-brands fa-react"}),n[79]||(n[79]=s("code",null,"useReducer",-1))]),n[86]||(n[86]=a(", and ")),s("a",Q,[t(e,{icon:"fa-brands fa-react"}),n[80]||(n[80]=s("code",null,"useContext",-1))]),n[87]||(n[87]=a("`."))]),n[153]||(n[153]=s("p",null,[a("You have to think of "),s("code",null,"useRef"),a(" as another tool in your toolbox, and you have to understand when to use it. Remember the component lifecycle diagram from above? The values of refs persist (specifically the "),s("code",null,"current"),a(" property) throughout render cycles. It’s not a bug; it’s a feature.")],-1)),n[154]||(n[154]=s("p",null,"Consider situations where you want to update a component’s data (i.e., its state variables) to trigger a render in order to update the UI. You could also have situations where you want the same behavior with one exception: you do not want to trigger a render cycle because this could lead to bugs, awkward user experience (e.g., flickers), or performance problems.",-1)),s("p",null,[n[89]||(n[89]=a("You can think of refs as ")),s("a",_,[t(e,{icon:"fa-brands fa-react"}),n[88]||(n[88]=a("instance variables of class-based components"))]),n[90]||(n[90]=a(". A ref is a generic container to store any kind of data, such as primitive data or objects."))]),n[155]||(n[155]=p(`<p>Fine, we’ll show a useful example.</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="AppDemo10.jsx"><span>AppDemo10.jsx</span></div><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">AppDemo10</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;render&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token function-variable function">handleInputChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">setValue</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleInputChange<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>As you can see from the recording below, this component just renders an input field and stores its value in the <code>value</code> state variable. The console output reveals that the <code>AppDemo10</code> component gets re-rendered on every keystroke.</p>`,3)),s("p",null,[n[93]||(n[93]=a("This might be the behavior you want, e.g., to perform an operation such as a search on every character. This is called a ")),s("a",nn,[t(e,{icon:"fa-brands fa-react"}),n[91]||(n[91]=a("controlled component"))]),n[94]||(n[94]=a(". However, it could be just the opposite, and the renderings become problematic. Then you need an ")),s("a",sn,[t(e,{icon:"fa-brands fa-react"}),n[92]||(n[92]=a("uncontrolled component"))]),n[95]||(n[95]=a("."))]),n[156]||(n[156]=p('<figure><img src="'+C+`" alt="A Controlled Component Rendering on Every Keystroke" tabindex="0" loading="lazy"><figcaption>A Controlled Component Rendering on Every Keystroke</figcaption></figure><p>A controlled component renders on every keystroke.</p><p>Let’s rewrite the example to use an uncontrolled component with <code>useRef</code>. As a consequence, we need a button to update the component’s state and store the completely filled input field.</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="AppDemo11.jsx"><span>AppDemo11.jsx</span></div><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">AppDemo11</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> valueRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;render&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>valueRef<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">setValue</span><span class="token punctuation">(</span>valueRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Value: </span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>valueRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">click</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>With this solution, we do not cause render cycles on every keystroke. On the other side, we need to “submit” the input with a button to update the state variable <code>value</code>. As you can see from the console output, the second render first occurs on button click.</p><figure><img src="`+M+`" alt="An Uncontrolled Component Does Not Trigger a Re-render" tabindex="0" loading="lazy"><figcaption>An Uncontrolled Component Does Not Trigger a Re-render</figcaption></figure><p>An uncontrolled component does not trigger re-renders on change.</p><p>By the way, the example above shows the second use case for refs.</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>valueRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>With the <code>ref</code> property, React provides direct access to React components or HTML elements. The console output reveals that we indeed have access to the <code>input</code> element. The reference is stored in the <code>current</code> property.</p><p>This constitutes the second use case of <code>useRef</code> besides utilizing it as a generic container persisting data throughout the component lifecycle. If you need direct access to a DOM element, you can leverage the <code>ref</code> prop. The next example shows how to focus the input field after the component was initialized.</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="AppDemo12.jsx"><span>AppDemo12.jsx</span></div><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">AppDemo12</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;render&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;useEffect&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div>`,12)),s("p",null,[n[97]||(n[97]=a("Inside the ")),n[98]||(n[98]=s("code",null,"useEffect",-1)),n[99]||(n[99]=a(" callback, we call the native ")),s("a",an,[t(e,{icon:"fa-brands fa-firefox"}),n[96]||(n[96]=s("code",null,"focus",-1))]),n[100]||(n[100]=a(" method."))]),n[157]||(n[157]=s("figure",null,[s("img",{src:T,alt:"Adding Focus to an Input Field Via refs",tabindex:"0",loading:"lazy"}),s("figcaption",null,"Adding Focus to an Input Field Via refs")],-1)),n[158]||(n[158]=s("p",null,"Focus an input field with the help of a ref.",-1)),n[159]||(n[159]=s("p",null,"This technique is also widely used in React projects in combination with third-party (non-React) components when you need direct access to DOM elements.",-1)),s("p",null,[n[102]||(n[102]=a("Another common use case is when you need the state value of the previous render cycle. The following example shows how to do this. Of course, you could also extract the logic into a custom ")),s("a",tn,[t(e,{icon:"fas fa-globe"}),n[101]||(n[101]=s("code",null,"usePrevious",-1))]),n[103]||(n[103]=a("Hook."))]),n[160]||(n[160]=p(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="AppDemo13.jsx"><span>AppDemo13.jsx</span></div><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">AppDemo13</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;render&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">// Get the previous value (was passed into hook on last render)</span></span>
<span class="line">  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">// Store current value in ref</span></span>
<span class="line">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;useEffect&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    ref<span class="token punctuation">.</span>current <span class="token operator">=</span> count<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Only re-run if value changes</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        Now: </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text">, before: </span><span class="token punctuation">{</span>ref<span class="token punctuation">.</span>current<span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Increment</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>After the initial render, an effect is executed that assigns the state variable <code>count</code> to the <code>ref.current</code>. Because no additional render occurs, the rendered value is <code>undefined</code>. A click on the button triggers a state update because of a call to <code>setCount</code>.</p><p>Next, the UI gets re-rendered, and the <strong>before</strong> label shows the correct value (<code>0</code>). After rendering, another effect is invoked. Now <code>1</code> gets assigned to our ref, and so on.</p><figure><img src="`+E+`" alt="Accessing Previous State Via useRef" tabindex="0" loading="lazy"><figcaption>Accessing Previous State Via useRef</figcaption></figure><p>Access previous state with the help of <code>useRef</code>.</p><p>It’s important to note that all refs need to get updated either inside a <code>useEffect</code> callback or inside handlers. Mutating the ref during rendering, i.e., from places other than those just mentioned, might introduce bugs. The same applies to <code>useState</code>, too.</p><h3 id="why-let-can-t-replace-useref" tabindex="-1"><a class="header-anchor" href="#why-let-can-t-replace-useref"><span>Why <code>let</code> can’t replace <code>useRef</code></span></a></h3><p>Now I still owe you a resolution for why a <code>let</code> variable does not replace the concept of a ref. The next example replaces the use of <code>useRef</code> with a vanilla JavaScript variable assignment from inside the <code>useEffect</code> Hook.</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="AppDemo14.jsx"><span>AppDemo14.jsx</span></div><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">AppDemo14</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;render&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">let</span> prevCount<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;useEffect&quot;</span><span class="token punctuation">,</span> prevCount<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    prevCount <span class="token operator">=</span> count<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        Now: </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text">, before: </span><span class="token punctuation">{</span>prevCount<span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Increment</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>However, the following recording will reveal that this does not work. The console output reinforces the problem because the assignment inside of <code>useEffect</code> gets overridden on every new render cycle. <code>undefined</code> is implicitly assigned because of <code>let prevCount;</code>.</p><figure><img src="`+I+'" alt="A Normal Variable Assignment Cannot Replace " tabindex="0" loading="lazy"><figcaption>A Normal Variable Assignment Cannot Replace <code>useRef</code></figcaption></figure><p>A normal variable assignment cannot replace useRef.</p>',12)),s("p",null,[n[107]||(n[107]=a("Even the mighty ESLint ")),s("a",en,[n[104]||(n[104]=a("Rules of Hooks plugin (")),t(e,{icon:"fa-brands fa-npm"}),n[105]||(n[105]=s("code",null,"eslint-plugin-react-hooks",-1)),n[106]||(n[106]=a(")"))]),n[108]||(n[108]=a(" tells you that we should utilize ")),n[109]||(n[109]=s("code",null,"useRef",-1)),n[110]||(n[110]=a(" instead."))]),n[161]||(n[161]=s("figure",null,[s("img",{src:H,alt:"Warning From the ESLint Rules of Hooks Plugin",tabindex:"0",loading:"lazy"}),s("figcaption",null,"Warning From the ESLint Rules of Hooks Plugin")],-1)),n[162]||(n[162]=s("p",null,"The ESLint plugin warns you about using variables instead of refs.",-1)),n[163]||(n[163]=s("hr",null,null,-1)),n[164]||(n[164]=s("h2",{id:"the-differences-between-useref-and-usestate-at-a-glance",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#the-differences-between-useref-and-usestate-at-a-glance"},[s("span",null,[a("The differences between "),s("code",null,"useRef"),a(" and "),s("code",null,"useState"),a(" at a glance")])])],-1)),n[165]||(n[165]=s("p",null,"The following differences have already been discussed in detail but are presented here again in a succinctly summarized form:",-1)),s("ul",null,[n[129]||(n[129]=s("li",null,[a("Both preserve their data during render cycles and UI updates, but only the "),s("code",null,"useState"),a(" Hook with its updater function causes re-renders")],-1)),n[130]||(n[130]=s("li",null,[s("code",null,"useRef"),a(" returns an object with a "),s("code",null,"current"),a(" property holding the actual value. In contrast, "),s("code",null,"useState"),a(" returns an array with two elements: the first item constitutes the state, and the second item represents the state updater function")],-1)),s("li",null,[n[113]||(n[113]=s("code",null,"useRef",-1)),n[114]||(n[114]=a("‘s ")),n[115]||(n[115]=s("code",null,"current",-1)),n[116]||(n[116]=a(" property is ")),s("a",pn,[t(e,{icon:"fas fa-globe"}),n[111]||(n[111]=a("mutable"))]),n[117]||(n[117]=a(", but ")),n[118]||(n[118]=s("code",null,"useState",-1)),n[119]||(n[119]=a("‘s state variable not. In contrast to the ")),n[120]||(n[120]=s("code",null,"current",-1)),n[121]||(n[121]=a(" property of ")),n[122]||(n[122]=s("code",null,"useRef",-1)),n[123]||(n[123]=a(", you should not directly assign values to the state variable of ")),n[124]||(n[124]=s("code",null,"useState",-1)),n[125]||(n[125]=a(". Instead, always use the updater function (i.e., the second array item). As the React team recommends in the ")),s("a",on,[t(e,{icon:"fa-brands fa-react"}),n[112]||(n[112]=a("documentation"))]),n[126]||(n[126]=a(" for ")),n[127]||(n[127]=s("code",null,"setState",-1)),n[128]||(n[128]=a(" in class-based components (but still true for function components), treat state like an immutable variable"))]),n[131]||(n[131]=s("li",null,[s("code",null,"useState"),a(" and "),s("code",null,"useRef"),a(" can be considered data Hooks, but only "),s("code",null,"useRef"),a(" can be used in yet another field of application: to gain direct access to React components or DOM elements")],-1))]),n[166]||(n[166]=p('<hr><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h2><p>This article addresses the <code>useState</code> and <code>useRef</code> Hooks. It should be clear at this point that there is no such thing as a good or a bad Hook. You need both Hooks for your React applications because they are designed for different applications.</p><p>If you want to update data and cause a UI update, <code>useState</code> is your Hook. If you need some kind of data container throughout the component’s lifecycle without causing render cycles on mutating your variable, then <code>useRef</code> is your solution.</p>',4)),b(" TODO: add ARTICLE CARD "),t(u,r(d({title:"useState vs. useRef: Similarities, differences, and use cases",desc:"Learn the similarities and differences between the useState and useRef Hooks in React, as illustrated demos and use cases.",link:"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/usestate-vs-useref.html",logo:"/assets/image/blog.logrocket.com/favicon.png",background:"rgba(112,76,182,0.2)"})),null,16)])}const rn=g(L,[["render",ln]]),dn=JSON.parse('{"path":"/blog.logrocket.com/usestate-vs-useref.html","title":"useState vs. useRef: Similarities, differences, and use cases","lang":"en-US","frontmatter":{"lang":"en-US","title":"useState vs. useRef: Similarities, differences, and use cases","description":"Article(s) > useState vs. useRef: Similarities, differences, and use cases","icon":"fa-brands fa-react","category":["Node.js","React.js","Article(s)"],"tag":["blog","blog.logrocket.com","node","nodejs","node-js","react","reactjs","react-js"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"useState vs. useRef: Similarities, differences, and use cases\\",\\"image\\":[\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/banner.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/component-re-render-every-state-change.gif\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/react-devtools-highlight-option.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/child-component-re-render-every-state-change.gif\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/react-hooks-lifecycle-diagram.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/setting-state-useeffect.webp\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/useeffect-render-infinite-loop.webp\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/values-stored-current-property.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/count-no-update-click.webp\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/controlled-component-renders-every-keystroke.webp\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/uncontrolled-component-no-re-renders.gif\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/focus-input-field.webp\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/access-previous-state-useref.webp\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/normal-variable-assignment-useref.webp\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/eslint-rules-hooks-plugin-warning.png\\"],\\"datePublished\\":\\"2021-05-24T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Sebastian Weber\\",\\"url\\":\\"https://blog.logrocket.com/author/sebastianweber/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/usestate-vs-useref.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"useState vs. useRef: Similarities, differences, and use cases"}],["meta",{"property":"og:description","content":"Article(s) > useState vs. useRef: Similarities, differences, and use cases"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/banner.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/usestate-vs-useref/banner.png"}],["meta",{"name":"twitter:image:alt","content":"useState vs. useRef: Similarities, differences, and use cases"}],["meta",{"property":"article:author","content":"Sebastian Weber"}],["meta",{"property":"article:tag","content":"react-js"}],["meta",{"property":"article:tag","content":"reactjs"}],["meta",{"property":"article:tag","content":"react"}],["meta",{"property":"article:tag","content":"node-js"}],["meta",{"property":"article:tag","content":"nodejs"}],["meta",{"property":"article:tag","content":"node"}],["meta",{"property":"article:tag","content":"blog.logrocket.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2021-05-24T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > useState vs. useRef: Similarities, differences, and use cases"},{"property":"og:description","content":"useState vs. useRef: Similarities, differences, and use cases"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/usestate-vs-useref.html"}]],"prev":"/programming/js-react/articles/README.md","date":"2021-05-24T00:00:00.000Z","isOriginal":false,"author":[{"name":"Sebastian Weber","url":"https://blog.logrocket.com/author/sebastianweber/"}],"cover":"/assets/image/blog.logrocket.com/usestate-vs-useref/banner.png"},"git":{},"readingTime":{"minutes":13.22,"words":3966},"filePathRelative":"blog.logrocket.com/usestate-vs-useref.md","copyright":{"author":"Sebastian Weber"}}');export{rn as comp,dn as data};
