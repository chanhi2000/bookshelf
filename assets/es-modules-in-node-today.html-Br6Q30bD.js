import{_ as f}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as b,d as s,f as o,b as t,a as g,t as k,n as d,g as u,w as l,e,r,o as v}from"./app-BVguHYKu.js";const h="/bookshelf/assets/image/blog.logrocket.com/es-modules-in-node-today/banner.jpeg",y={},w={id:"frontmatter-title-관련",tabindex:"-1"},j={class:"header-anchor",href:"#frontmatter-title-관련"},x={class:"table-of-contents"},S={class:"hint-container info"},E={href:"https://en.wikipedia.org/wiki/Module",target:"_blank",rel:"noopener noreferrer"},N={href:"https://en.wikipedia.org/wiki/Modular_programming",target:"_blank",rel:"noopener noreferrer"},q={href:"https://en.wikipedia.org/wiki/Modular_programming#Terminology",target:"_blank",rel:"noopener noreferrer"},M={href:"https://en.wikipedia.org/wiki/Module_pattern#Namespaces",target:"_blank",rel:"noopener noreferrer"},T={href:"https://nodejs.org/docs/latest/api/modules.html#modules_modules",target:"_blank",rel:"noopener noreferrer"},A={href:"https://requirejs.org/docs/commonjs.html",target:"_blank",rel:"noopener noreferrer"},C={href:"https://nodejs.org/dist/latest-v13.x/docs/api/esm.html#esm_ecmascript_modules",target:"_blank",rel:"noopener noreferrer"},J={class:"hint-container note"},I={href:"https://nodejs.org/en/",target:"_blank",rel:"noopener noreferrer"},U={href:"https://requirejs.org/docs/commonjs.html",target:"_blank",rel:"noopener noreferrer"},D={href:"https://nodejs.org/api/esm.html#esm_introduction",target:"_blank",rel:"noopener noreferrer"},R={href:"https://nodejs.org/api/documentation.html",target:"_blank",rel:"noopener noreferrer"},P={class:"hint-container note"},F={href:"https://nodejs.org/api/packages.html#packages_determining_module_system",target:"_blank",rel:"noopener noreferrer"},L={href:"https://nodejs.org/api/packages.html#packages_determining_module_system",target:"_blank",rel:"noopener noreferrer"},W={href:"https://nodejs.org/api/esm.html#esm_resolution_algorithm",target:"_blank",rel:"noopener noreferrer"},O={href:"https://nodejs.org/api/esm.html#esm_import_specifiers",target:"_blank",rel:"noopener noreferrer"},z={class:"hint-container note"},B={href:"https://nodejs.org/api/esm.html#esm_import_statements",target:"_blank",rel:"noopener noreferrer"},V={href:"https://nodejs.org/api/esm.html#esm_experimental_json_modules",target:"_blank",rel:"noopener noreferrer"},H={href:"https://nodejs.org/api/esm.html#esm_package_entry_points",target:"_blank",rel:"noopener noreferrer"},$={href:"https://github.com/nodejs/ecmascript-modules/blob/modules-lkgr/doc/api/modules.md#exports",target:"_blank",rel:"noopener noreferrer"},G={href:"https://github.com/nodejs/ecmascript-modules/blob/modules-lkgr/doc/api/modules.md#requireid",target:"_blank",rel:"noopener noreferrer"},Z={href:"https://github.com/nodejs/node/blob/7c63bc6540f4ad21f911f38f8708ed988f433ce7/lib/internal/modules/cjs/loader.js#L166",target:"_blank",rel:"noopener noreferrer"},K={href:"https://github.com/nodejs/ecmascript-modules/blob/modules-lkgr/doc/api/modules.md#the-module-wrapper",target:"_blank",rel:"noopener noreferrer"},Y={href:"https://github.com/commonjs/commonjs/blob/master/docs/specs/modules/1.0.html.markdown",target:"_blank",rel:"noopener noreferrer"},Q={href:"https://github.com/commonjs/commonjs/blob/master/docs/specs/modules/1.0.html.markdown#commonjs-modules",target:"_blank",rel:"noopener noreferrer"},X={href:"https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js#L156",target:"_blank",rel:"noopener noreferrer"},_={href:"https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js#L1087",target:"_blank",rel:"noopener noreferrer"},nn={class:"hint-container note"},sn={href:"https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js#L890:8",target:"_blank",rel:"noopener noreferrer"},en={href:"https://nodejs.org/en/knowledge/getting-started/what-is-require/",target:"_blank",rel:"noopener noreferrer"},on={href:"https://github.com/nodejs/ecmascript-modules/blob/modules-lkgr/doc/api/modules.md#the-module-wrapper",target:"_blank",rel:"noopener noreferrer"},an={href:"https://github.com/nodejs/node-eps/blob/master/002-es-modules.md#21-types",target:"_blank",rel:"noopener noreferrer"},tn={href:"https://github.com/nodejs/node-eps/blob/master/002-es-modules.md#31-async-loading",target:"_blank",rel:"noopener noreferrer"},ln={href:"https://github.com/nodejs/node-eps/blob/master/002-es-modules.md#22-operations",target:"_blank",rel:"noopener noreferrer"},rn={href:"https://github.com/nodejs/node-eps/blob/master/002-es-modules.md#22-operations",target:"_blank",rel:"noopener noreferrer"},pn={href:"https://tc39.es/ecma262/#sec-source-text-module-records",target:"_blank",rel:"noopener noreferrer"},dn={href:"https://nodejs.org/api/esm.html#esm_customizing_esm_specifier_resolution_algorithm",target:"_blank",rel:"noopener noreferrer"},un={href:"https://nodejs.org/api/esm.html#esm_customizing_esm_specifier_resolution_algorithm",target:"_blank",rel:"noopener noreferrer"},mn={href:"https://nodejs.org/api/esm.html#esm_interoperability_with_commonjs",target:"_blank",rel:"noopener noreferrer"},cn={href:"https://nodejs.org/api/esm.html#esm_https_loader",target:"_blank",rel:"noopener noreferrer"},fn={href:"https://nodejs.org/api/esm.html#esm_transpiler_loader",target:"_blank",rel:"noopener noreferrer"},bn={href:"https://github.com/WICG/import-maps#extension-less-imports",target:"_blank",rel:"noopener noreferrer"},gn={href:"https://github.com/tc39/proposal-import-meta",target:"_blank",rel:"noopener noreferrer"},kn={href:"https://nodejs.org/api/esm.html#esm_conditional_exports",target:"_blank",rel:"noopener noreferrer"},vn={href:"https://nodejs.org/api/esm.html#esm_differences_between_es_modules_and_commonjs",target:"_blank",rel:"noopener noreferrer"},hn={href:"https://nodejs.org/api/esm.html#esm_writing_dual_packages_while_avoiding_or_minimizing_hazards",target:"_blank",rel:"noopener noreferrer"},yn={href:"https://nodejs.org/api/packages.html#packages_dual_commonjs_es_module_packages",target:"_blank",rel:"noopener noreferrer"},wn={href:"https://nodejs.org/docs/latest-v15.x/api/esm.html#esm_differences_between_es_modules_and_commonjs",target:"_blank",rel:"noopener noreferrer"},jn={href:"https://nodejs.org/docs/latest-v15.x/api/esm.html#esm_loaders",target:"_blank",rel:"noopener noreferrer"},xn={href:"https://babeljs.io/",target:"_blank",rel:"noopener noreferrer"},Sn={href:"https://github.com/standard-things/esm#readme",target:"_blank",rel:"noopener noreferrer"},En={href:"https://twitter.com/alex_nnakwue",target:"_blank",rel:"noopener noreferrer"};function Nn(m,n){const p=r("VPCard"),i=r("router-link"),c=r("SiteInfo"),a=r("VPIcon");return v(),b("div",null,[s("h1",w,[s("a",j,[s("span",null,k(m.$frontmatter.title)+" 관련",1)])]),o(p,d(u({title:"Node.js > Article(s)",desc:"Article(s)",link:"/programming/js-node/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",x,[s("ul",null,[s("li",null,[o(i,{to:"#introduction"},{default:l(()=>n[0]||(n[0]=[e("Introduction")])),_:1,__:[0]})]),s("li",null,[o(i,{to:"#table-of-contents"},{default:l(()=>n[1]||(n[1]=[e("Table of contents")])),_:1,__:[1]})]),s("li",null,[o(i,{to:"#what-are-es-modules"},{default:l(()=>n[2]||(n[2]=[e("What are ES modules?")])),_:1,__:[2]})]),s("li",null,[o(i,{to:"#adding-support-for-es-modules-in-node-today"},{default:l(()=>n[3]||(n[3]=[e("Adding support for ES modules in Node today")])),_:1,__:[3]})]),s("li",null,[o(i,{to:"#package-scope"},{default:l(()=>n[4]||(n[4]=[e("Package scope")])),_:1,__:[4]})]),s("li",null,[o(i,{to:"#import-and-export-syntax-in-es-modules"},{default:l(()=>n[5]||(n[5]=[e("Import and export syntax in ES modules")])),_:1,__:[5]})]),s("li",null,[o(i,{to:"#package-entry-points"},{default:l(()=>n[6]||(n[6]=[e("Package entry points")])),_:1,__:[6]})]),s("li",null,[o(i,{to:"#commonjs-module-system"},{default:l(()=>n[7]||(n[7]=[e("CommonJS module system")])),_:1,__:[7]})]),s("li",null,[o(i,{to:"#interoperability-for-both-module-systems"},{default:l(()=>n[8]||(n[8]=[e("Interoperability for both module systems")])),_:1,__:[8]})]),s("li",null,[o(i,{to:"#features-of-both-module-systems"},{default:l(()=>n[9]||(n[9]=[e("Features of both module systems")])),_:1,__:[9]})]),s("li",null,[o(i,{to:"#es-modules-moving-forward"},{default:l(()=>n[10]||(n[10]=[e("ES modules moving forward")])),_:1,__:[10]})]),s("li",null,[o(i,{to:"#conclusion"},{default:l(()=>n[11]||(n[11]=[e("Conclusion")])),_:1,__:[11]})])])]),n[315]||(n[315]=s("hr",null,null,-1)),o(c,{name:"Using ES modules in Node.js",desc:"Learn about the state of ES modules in Node today, including concerns realted to transitioning from and interoperability with CommonJS.",url:"https://blog.logrocket.com/es-modules-in-node-today",logo:"/assets/image/blog.logrocket.com/favicon.png",preview:"/assets/image/blog.logrocket.com/es-modules-in-node-today/banner.jpeg"}),n[316]||(n[316]=t('<div class="hint-container note"><p class="hint-container-title">Editor’s note</p><p>This article was updated on 3 March 2021.</p></div><hr><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction"><span>Introduction</span></a></h2><figure><img src="'+h+'" alt="ES Modules In Node Today" tabindex="0" loading="lazy"><figcaption>ES Modules In Node Today</figcaption></figure>',4)),s("div",S,[n[12]||(n[12]=s("p",{class:"hint-container-title"},"Ralph Johnson",-1)),n[13]||(n[13]=s("blockquote",null,[s("p",null,"“Before software can be reusable, it first has to be usable.”")],-1)),o(p,d(u({title:"Ralph Johnson (computer scientist) - Wikipedia",desc:"Ralph E. Johnson is a Research Associate Professor in the Department of Computer Science at the University of Illinois at Urbana-Champaign. He is a co-author of the influential computer science textbook Design Patterns: Elements of Reusable Object-Oriented Software, for which he won the 2010 ACM SIGSOFT Outstanding Research Award.",link:"https://en.wikipedia.org/wiki/Ralph_Johnson_(computer_scientist)/",logo:"https://en.wikipedia.org/static/favicon/wikipedia.ico",background:"rgba(244,245,255,0.2)"})),null,16)]),s("p",null,[s("a",E,[o(a,{icon:"fa-brands fa-wikipedia-w"}),n[14]||(n[14]=e("Modules"))]),n[16]||(n[16]=e(" are independent building blocks of a software program. They are basically a design pattern that implements features of ")),s("a",N,[o(a,{icon:"fa-brands fa-wikipedia-w"}),n[15]||(n[15]=e("modular design"))]),n[17]||(n[17]=e(" in programming languages. The module system is supported in many languages and is quite popular since the way dependencies are handled, packaged, and managed determines how easy it is to work with a large and growing source code."))]),n[317]||(n[317]=s("p",null,"In modular design, business logic pertaining to particular features or functionalities are packaged (modularized) in a standardized format for reusability, flexibility, and for the sake of reducing complexity. This setup affords a loosely coupled system due to a smooth interface of communication, as there are no global variables or shared state.",-1)),s("p",null,[n[20]||(n[20]=e("Although the concept of modules is ")),s("a",q,[o(a,{icon:"fa-brands fa-wikipedia-w"}),n[18]||(n[18]=e("quite different depending on the language"))]),n[21]||(n[21]=e(", they are akin to the idea of ")),s("a",M,[o(a,{icon:"fa-brands fa-wikipedia-w"}),n[19]||(n[19]=e("namespaces"))]),n[22]||(n[22]=e(" in languages like Java. Modules enable code organization by splitting a codebase into reusable components such that each performs individual functions and can be combined or composed to form larger functionalities or an entire application."))]),s("p",null,[n[26]||(n[26]=e("In Node.js, the ")),s("a",T,[o(a,{icon:"fa-brands fa-node"}),n[23]||(n[23]=e("module system"))]),n[27]||(n[27]=e(" has come a long way from its earlier adoption of ")),s("a",A,[o(a,{icon:"fas fa-globe"}),n[24]||(n[24]=e("CommonJS"))]),n[28]||(n[28]=e(". Today, ")),s("a",C,[o(a,{icon:"fa-brands fa-node"}),n[25]||(n[25]=e("ECMAScript modules"))]),n[29]||(n[29]=e(" (ES modules), which are now stable and fit for production use,are the official standard for packaging code for reuse in both client- and server-side JavaScript."))]),n[318]||(n[318]=t('<hr><h2 id="table-of-contents" tabindex="-1"><a class="header-anchor" href="#table-of-contents"><span>Table of contents</span></a></h2><p>In this article, we are going to learn about ES modules in Node. However, we will briefly explore other ways of handling and organizing server-side code with CommonJS.</p><p>Why? So that we have a point of reference to recognize the benefits of ES modules. In essence, we will learn about the challenges it tries to solve that earlier module systems were not adapted to solve.</p><p>We will be looking at:</p><ul><li><strong>An introduction to ES modules</strong> — here, we introduce ES modules in an exciting way</li><li><strong>A brief history of ES modules</strong> — here, we learn about the transition from the earlier module system to ES modules. We will also briefly examine how interoperable these modules systems are with one another</li><li><strong>Adding support for ES modules in Node</strong> — here, we learn about how we can incrementally add support for ES modules in Node. We also learn how to migrate an old codebase to start using ES modules</li><li><strong>Comparing and contrasting features</strong> — here, we will learn about the features of both these module systems and how they compare</li><li><strong>Then lastly, ES modules moving forward</strong></li></ul>',6)),s("div",J,[n[36]||(n[36]=s("p",{class:"hint-container-title"},"Prerequisites",-1)),s("p",null,[n[31]||(n[31]=e("To easily follow along with this tutorial, it is advisable to have the latest version of Node.js installed. Instructions on how to do so are available in the ")),s("a",I,[o(a,{icon:"fa-brands fa-node"}),n[30]||(n[30]=e("Node documentation"))]),n[32]||(n[32]=e("."))]),s("p",null,[n[34]||(n[34]=e("Also, for better context, readers may need to be fairly knowledgeable with the ")),s("a",U,[o(a,{icon:"fas fa-globe"}),n[33]||(n[33]=e("CommonJS"))]),n[35]||(n[35]=e(" module system in Node. It is equally welcoming for newcomers learning the Node.js module system or applying ES modules in their Node projects today."))])]),n[319]||(n[319]=s("hr",null,null,-1)),n[320]||(n[320]=s("h2",{id:"what-are-es-modules",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#what-are-es-modules"},[s("span",null,"What are ES modules?")])],-1)),s("p",null,[n[39]||(n[39]=e("With the release of Node version 15.3.0 (currently in v15.11.0), ")),s("a",D,[o(a,{icon:"fa-brands fa-node"}),n[37]||(n[37]=e("ES modules"))]),n[40]||(n[40]=e(" can now be used without an experimental flag, as they are now stable and compatible with the NPM ecosystem. Details about the stability index can be found ")),s("a",R,[o(a,{icon:"fa-brands fa-node"}),n[38]||(n[38]=e("here"))]),n[41]||(n[41]=e(" in the node.js ESM documentation.With ES modules, modules are defined with the use of the ")),n[42]||(n[42]=s("code",null,"import",-1)),n[43]||(n[43]=e(" and ")),n[44]||(n[44]=s("code",null,"export",-1)),n[45]||(n[45]=e(" keywords instead of the ")),n[46]||(n[46]=s("code",null,"require()",-1)),n[47]||(n[47]=e(" function in CommonJS. Here is how they are used:"))]),n[321]||(n[321]=t(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="f.js"><span>f.js</span></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">sayLanguage</span><span class="token punctuation">(</span><span class="token parameter">language</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">I love </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>language<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="code-block-with-title"><div class="code-block-title-bar" data-title="g.js"><span>g.js</span></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span>sayLanguage<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./f.js&#39;</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sayLanguage</span><span class="token punctuation">(</span><span class="token string">&#39;JavaScript&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="code-block-with-title"><div class="code-block-title-bar" data-title="package.json"><span>package.json</span></div><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esm&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div>`,3)),s("div",P,[n[61]||(n[61]=s("p",{class:"hint-container-title"},"Note",-1)),s("p",null,[n[48]||(n[48]=e("Readers should take note of the type field in the ")),o(a,{icon:"iconfont icon-json"}),n[49]||(n[49]=s("code",null,"package.json",-1)),n[50]||(n[50]=e(" file above. To be able to load an ES module, we need to set ")),n[51]||(n[51]=s("code",null,'"type": "module"',-1)),n[52]||(n[52]=e(" in this file or, as an alternative, we can use the ")),n[53]||(n[53]=s("code",null,".mjs",-1)),n[54]||(n[54]=e(" file extension as against the usual ")),n[55]||(n[55]=s("code",null,".js",-1)),n[56]||(n[56]=e(" file extension. Also, from Node version ")),n[57]||(n[57]=s("code",null,"12.7.0",-1)),n[58]||(n[58]=e(" and ")),n[59]||(n[59]=s("code",null,"13.2.0",-1)),n[60]||(n[60]=e(", loading ECMAScript modules no longer required us to pass any command-line flag."))])]),n[322]||(n[322]=t(`<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">node</span> g.js</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># I love JavaScript!</span></span>
<span class="line"><span class="token comment"># undefined</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The result/terminal output of running our code is shown above.</p><hr><h2 id="adding-support-for-es-modules-in-node-today" tabindex="-1"><a class="header-anchor" href="#adding-support-for-es-modules-in-node-today"><span>Adding support for ES modules in Node today</span></a></h2><p>This support was previously behind the <code>--experimental-module</code> flag. Currently, this is no longer required as from version 13.14.0 to 14.0.0, the implementation is now stable and can now be used with the earlier commonJS module system.</p>`,5)),s("p",null,[n[63]||(n[63]=e("Files ending with ")),n[64]||(n[64]=s("code",null,".mjs",-1)),n[65]||(n[65]=e(" or ")),n[66]||(n[66]=s("code",null,".js",-1)),n[67]||(n[67]=e(" extensions (with the nearest ")),o(a,{icon:"iconfont icon-json"}),n[68]||(n[68]=s("code",null,"package.json",-1)),n[69]||(n[69]=e(" file with a ")),n[70]||(n[70]=s("code",null,"field",-1)),n[71]||(n[71]=e(" type) are treated as ES modules, as shown earlier. So, in essence, when we run ")),n[72]||(n[72]=s("code",null,"node g.js",-1)),n[73]||(n[73]=e(" in the same folder as the above ")),o(a,{icon:"iconfont icon-json"}),n[74]||(n[74]=s("code",null,"package.json",-1)),n[75]||(n[75]=e(", the file is treated as an ESM. Additionally, it is an ESM if we are passing string arguments to the Node.js standard input with flag ")),n[76]||(n[76]=s("code",null,"--input-type=module",-1)),n[77]||(n[77]=e(". More details can be found ")),s("a",F,[o(a,{icon:"fa-brands fa-node"}),n[62]||(n[62]=e("here"))]),n[78]||(n[78]=e("."))]),s("p",null,[n[79]||(n[79]=e("It’s important to note that with ESM, without the ")),n[80]||(n[80]=s("code",null,"type",-1)),n[81]||(n[81]=e(" field in the parent ")),o(a,{icon:"iconfont icon-json"}),n[82]||(n[82]=s("code",null,"package.json",-1)),n[83]||(n[83]=e(" file or the other ways specified above, Node throws the error shown below:"))]),n[323]||(n[323]=t('<div class="code-block-with-title"><div class="code-block-title-bar" data-title="output"><span>output</span></div><div class="language-plaintext line-numbers-mode" data-highlighter="prismjs" data-ext="plaintext"><pre><code class="language-plaintext"><span class="line">(node:2844) Warning: To load an ES module, set &quot;type&quot;: &quot;module&quot; in the package.json or use the .mjs extension.(Use `node --trace-warnings ...` to show where the warning was created). Also, as an aside, we cannot make use of import statements outside of modules.</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></div><hr><h2 id="package-scope" tabindex="-1"><a class="header-anchor" href="#package-scope"><span>Package scope</span></a></h2>',3)),s("p",null,[n[84]||(n[84]=e("A package scope, defined by the ")),n[85]||(n[85]=s("code",null,"type",-1)),n[86]||(n[86]=e(" flag in a parent ")),o(a,{icon:"iconfont icon-json"}),n[87]||(n[87]=s("code",null,"package.json",-1)),n[88]||(n[88]=e(" file and all folders below it, is present in the current scope of that package, as explained earlier. Furthermore, files ending with the ")),n[89]||(n[89]=s("code",null,".mjs",-1)),n[90]||(n[90]=e(" extension are always loaded as ES modules regardless of the scope of that package."))]),s("p",null,[n[91]||(n[91]=e("In the same light, all other forms of files without extensions and without the ")),n[92]||(n[92]=s("code",null,"type",-1)),n[93]||(n[93]=e(" flag in the parent ")),o(a,{icon:"iconfont icon-json"}),n[94]||(n[94]=s("code",null,"package.json",-1)),n[95]||(n[95]=e(" file are treated as CommonJS. Additionally, files ending with ")),n[96]||(n[96]=s("code",null,".cjs",-1)),n[97]||(n[97]=e(" extensions are treated as CJS modules regardless of package scope."))]),s("p",null,[n[99]||(n[99]=e("It’s important to know that because Node.js now supports both ES modules and commonJS modules, package authors need to always ensure the ")),n[100]||(n[100]=s("code",null,"type",-1)),n[101]||(n[101]=e(" field in their package.json file is always included, regardless of the module type. This allows for backwards compatibility; for instance, in a situation where the default type of Node.js changes, Node would know how to handle or interprete files in our program. More details ")),s("a",L,[o(a,{icon:"fa-brands fa-node"}),n[98]||(n[98]=e("here"))]),n[102]||(n[102]=e("."))]),n[324]||(n[324]=s("hr",null,null,-1)),n[325]||(n[325]=s("h2",{id:"import-and-export-syntax-in-es-modules",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#import-and-export-syntax-in-es-modules"},[s("span",null,"Import and export syntax in ES modules")])],-1)),s("p",null,[n[104]||(n[104]=e("In ES modules, specifiers are like string-based file paths used after the ")),n[105]||(n[105]=s("code",null,"from",-1)),n[106]||(n[106]=e(" keyword. There are both ")),s("a",W,[o(a,{icon:"fa-brands fa-node"}),n[103]||(n[103]=e("algorithms"))]),n[107]||(n[107]=e(" to load an ES module specifier and to determine the module format of a resolved URL. An example is shown below:"))]),n[326]||(n[326]=t(`<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span>cat<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;animals&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,1)),s("p",null,[n[109]||(n[109]=e("The ")),n[110]||(n[110]=s("code",null,"animal",-1)),n[111]||(n[111]=e(" specifier in this case is an npm package, for example. Other ways specifiers can be referenced include from both absolute and relative file paths or URLs, and paths within other packages. Examples are shown in this ")),s("a",O,[o(a,{icon:"fa-brands fa-node"}),n[108]||(n[108]=e("section"))]),n[112]||(n[112]=e(" of the documentation."))]),n[327]||(n[327]=t(`<div class="hint-container note"><p class="hint-container-title">Note</p><p>Node.js built-in Modules can now be loaded or referenced by absolute URL strings from version <code>14.13.1</code>. When using the import keyword, a file extension must be provided to resolve relative or absolute URL specifiers.</p></div><p>Although <code>import</code> statements are permitted only in ES modules, they can reference both an ESM or CommonJS modules. For example:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> packageMain <span class="token keyword">from</span> <span class="token string">&#39;commonjs-package&#39;</span><span class="token punctuation">;</span> <span class="token comment">// Works</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> method <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;commonjs-package&#39;</span><span class="token punctuation">;</span> <span class="token comment">// Errors</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3)),s("div",z,[n[121]||(n[121]=s("p",{class:"hint-container-title"},"Note",-1)),s("p",null,[s("a",B,[o(a,{icon:"fa-brands fa-node"}),n[113]||(n[113]=e("Import statements"))]),n[115]||(n[115]=e(" that reference other types of files like JSON or Wasm are still experimental and require the ")),n[116]||(n[116]=s("code",null,"--experimental-json-modules",-1)),n[117]||(n[117]=e(" and ")),n[118]||(n[118]=s("code",null,"--experimental-wasm-modules",-1)),n[119]||(n[119]=e(" flags, respectively, to be passed, as they are only supported in commonJS. From Node version 14.8.0, we were able to make use of the top-level await without passing CLI flags. Details including using the await keyword outside async functions (AKA top-level await) for ESM, can be found ")),s("a",V,[o(a,{icon:"fa-brands fa-node"}),n[114]||(n[114]=e("here"))]),n[120]||(n[120]=e("."))])]),n[328]||(n[328]=t(`<p>For exports in ES modules, we can make use of the following:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// Named exports</span></span>
<span class="line">module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Alex&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Default exports</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;My name is Mat&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container note"><p class="hint-container-title">Note</p><p>All built-in Node packages support all types of exports (named, default) described above. Since Node version <code>14.13.0</code>, support has been added for detection of CommonJS named exports in ESM.</p></div><hr><h2 id="package-entry-points" tabindex="-1"><a class="header-anchor" href="#package-entry-points"><span>Package entry points</span></a></h2>`,5)),s("p",null,[n[122]||(n[122]=e("There are now two fields that can define entry points for a package: ")),n[123]||(n[123]=s("code",null,"main",-1)),n[124]||(n[124]=e(" and ")),n[125]||(n[125]=s("code",null,"exports",-1)),n[126]||(n[126]=e(", in a project’s ")),o(a,{icon:"iconfont icon-json"}),n[127]||(n[127]=s("code",null,"package.json",-1)),n[128]||(n[128]=e(" file. While the ")),n[129]||(n[129]=s("code",null,"main",-1)),n[130]||(n[130]=e(" field only defines the main entry point of the package, the ")),n[131]||(n[131]=s("code",null,"exports",-1)),n[132]||(n[132]=e(" field provides an alternative where the main entry point can be defined while also providing the benefit of encapsulating the package."))]),s("p",null,[n[133]||(n[133]=e("Module files within packages can be accessed by appending a path to the package name. Another way is if the package’s ")),o(a,{icon:"iconfont icon-json"}),n[134]||(n[134]=s("code",null,"package.json",-1)),n[135]||(n[135]=e(" contains an ")),n[136]||(n[136]=s("code",null,"exports",-1)),n[137]||(n[137]=e(" field where the files within packages can only be accessed via the paths defined in the ")),n[138]||(n[138]=s("code",null,"exports",-1)),n[139]||(n[139]=e(" object."))]),s("p",null,[n[141]||(n[141]=e("To set the main entry point for a package for example, it is advisable to define both ")),n[142]||(n[142]=s("code",null,"exports",-1)),n[143]||(n[143]=e(" and ")),n[144]||(n[144]=s("code",null,"main",-1)),n[145]||(n[145]=e(" in the package’s ")),o(a,{icon:"iconfont icon-json"}),n[146]||(n[146]=s("code",null,"package.json",-1)),n[147]||(n[147]=e(" file. More details can be found in the ")),s("a",H,[o(a,{icon:"fa-brands fa-node"}),n[140]||(n[140]=e("documentation"))]),n[148]||(n[148]=e("."))]),n[329]||(n[329]=s("hr",null,null,-1)),n[330]||(n[330]=s("h2",{id:"commonjs-module-system",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#commonjs-module-system"},[s("span",null,"CommonJS module system")])],-1)),s("p",null,[n[153]||(n[153]=e("Prior to the introduction of ES modules, the community relied heavily on CommonJS for packaging server-side JavaScript code. In the CommonJS module system, each file is treated as a module, which exposes a set of APIs (via a well-defined interface) with the use of the ")),s("a",$,[n[149]||(n[149]=s("code",null,"exports",-1)),n[150]||(n[150]=e("object (")),o(a,{icon:"iconfont icon-github"}),n[151]||(n[151]=s("code",null,"nodejs/ecmascript-modules",-1)),n[152]||(n[152]=e(")"))]),n[154]||(n[154]=e(". To understand this better, here is an example using the object created by the module system:"))]),n[331]||(n[331]=t(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="a.js"><span>a.js</span></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">function</span> <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">My name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">sayAge</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">I&#39;m </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> years old.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>sayName<span class="token punctuation">,</span> sayAge<span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div>`,1)),s("p",null,[n[159]||(n[159]=e("To use these functions (imported as modules in a different file), we can use the ")),s("a",G,[n[155]||(n[155]=s("code",null,"require",-1)),n[156]||(n[156]=e(" function (")),o(a,{icon:"iconfont icon-github"}),n[157]||(n[157]=s("code",null,"nodejs/ecmascript-modules",-1)),n[158]||(n[158]=e(")"))]),n[160]||(n[160]=e(". This accepts a module identifier (ID) specified by either a relative or an absolute path or by name, based on the module type of the exposed APIs, like so:"))]),n[332]||(n[332]=t(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="b.js"><span>b.js</span></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span>sayName<span class="token punctuation">,</span> sayAge<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./a&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// assuming a.js is in the same folder path</span></span>
<span class="line"></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token string">&#39;Alex&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// My name is Alex.</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sayAge</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// I&#39;m 25 years old.</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// TO RUN THE CODE SAMPLE TYPE: </span></span>
<span class="line"><span class="token comment">// node b.js </span></span>
<span class="line"><span class="token comment">// on your terminal</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div>`,1)),s("p",null,[n[167]||(n[167]=e("As we can see above, the ")),n[168]||(n[168]=s("code",null,"require",-1)),n[169]||(n[169]=e(" object returns/imports the module content exported from the ")),n[170]||(n[170]=s("code",null,"a.js",-1)),n[171]||(n[171]=e(" file. To learn more about the ")),s("a",Z,[n[161]||(n[161]=e("implementation (")),o(a,{icon:"iconfont icon-json"}),n[162]||(n[162]=s("code",null,"nodejs/node",-1)),n[163]||(n[163]=e(")"))]),n[172]||(n[172]=e(" of the ")),n[173]||(n[173]=s("code",null,"module",-1)),n[174]||(n[174]=e(", ")),n[175]||(n[175]=s("code",null,"export",-1)),n[176]||(n[176]=e(", and ")),n[177]||(n[177]=s("code",null,"require",-1)),n[178]||(n[178]=e(" keywords, we can peek at the module wrapper ")),s("a",K,[n[164]||(n[164]=e("here (")),o(a,{icon:"iconfont icon-json"}),n[165]||(n[165]=s("code",null,"nodejs/ecmascript-modules",-1)),n[166]||(n[166]=e(")"))]),n[179]||(n[179]=e("."))]),s("p",null,[n[186]||(n[186]=e("The CommonJS specification is also available ")),s("a",Y,[n[180]||(n[180]=e("here (")),o(a,{icon:"iconfont icon-github"}),n[181]||(n[181]=s("code",null,"commonjs/commonjs",-1)),n[182]||(n[182]=e(")"))]),n[187]||(n[187]=e(". The spec ")),s("a",Q,[n[183]||(n[183]=e("highlights (")),o(a,{icon:"iconfont icon-github"}),n[184]||(n[184]=s("code",null,"commonjs/commonjs",-1)),n[185]||(n[185]=e(")"))]),n[188]||(n[188]=e(" the minimum features that a module system must have in order to support and be interoperable with other module systems."))]),n[333]||(n[333]=t(`<p>The CommonJS implementation allows for a defined structure in how files are loaded. In this approach, code required from other files are loaded or parsed synchronously. For this reason, catching and detecting failure points or debugging code are easier and less tedious.</p><p>Why? Because variables present in the modules or exported files are within the scope of that module or private to it and not in the global scope, as such errors are properly propagated. Also, because of the huge separation of concern, modules are loaded from parent to child, traversing down the dependency graph.</p><div class="hint-container note"><p class="hint-container-title">Note</p><p>When the wrapper function returns, the exports object is cached, then returned as the return value for the <code>require()</code> method. This is like a cycle. How? On the next call to the <code>module.exports</code> method, the same process of wrapping the module with the wrapper function is repeated. But not without checking if that module is already stored in the cache.</p></div><p>The signature of the wrapper function is shown below:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">exports<span class="token punctuation">,</span> require<span class="token punctuation">,</span> module<span class="token punctuation">,</span> __filename<span class="token punctuation">,</span> __dirname</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Module code actually lives in here</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>Module</code> object, which takes in an ID and a parent module as parameters, contains the <code>export</code> object:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">function</span> <span class="token function">Module</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> parent<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>path <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> parent<span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">updateChildren</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>filename <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>loaded <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>updateChildren</code> method scans through the file path until the root of the file system is reached. Its job is to update the <code>children</code> property of the <code>Module</code> object with the new <code>parent</code>, as the case may be. Here is the signature below:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">function</span> <span class="token function">updateChildren</span><span class="token punctuation">(</span><span class="token parameter">parent<span class="token punctuation">,</span> child<span class="token punctuation">,</span> scan</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> children <span class="token operator">=</span> parent <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span>children<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>children <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>scan <span class="token operator">&amp;&amp;</span> children<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">   children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9)),s("p",null,[n[189]||(n[189]=e("Let’s see an example to understand this better. In the ")),o(a,{icon:"fa-brands fa-js"}),n[190]||(n[190]=s("code",null,"b.js",-1)),n[191]||(n[191]=e(" file above, add this line of code to print the module and the argument object:"))]),n[334]||(n[334]=t(`<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>After running <code>node b.js</code>, we get the following output:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">node</span> b.js</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># My name is Alex.</span></span>
<span class="line"><span class="token comment"># undefined</span></span>
<span class="line"><span class="token comment"># I&#39;m 25 years old.</span></span>
<span class="line"><span class="token comment"># undefined</span></span>
<span class="line"><span class="token comment"># &lt;ref *1&gt; Module {</span></span>
<span class="line"><span class="token comment">#   id: &#39;.&#39;,</span></span>
<span class="line"><span class="token comment">#   path: &#39;/Users/retina/Desktop/es-modules in Node&#39;,</span></span>
<span class="line"><span class="token comment">#   exports: {},</span></span>
<span class="line"><span class="token comment">#   parent: null,</span></span>
<span class="line"><span class="token comment">#   filename: &#39;/Users/retina/Desktop/es-modules in Node/b.js&#39;,</span></span>
<span class="line"><span class="token comment">#   loaded: false,</span></span>
<span class="line"><span class="token comment">#   children: [</span></span>
<span class="line"><span class="token comment">#     Module {</span></span>
<span class="line"><span class="token comment">#       id: &#39;/Users/retina/Desktop/es-modules in Node/a.js&#39;,</span></span>
<span class="line"><span class="token comment">#       path: &#39;/Users/retina/Desktop/es-modules in Node&#39;,</span></span>
<span class="line"><span class="token comment">#       exports: [Object],</span></span>
<span class="line"><span class="token comment">#       parent: [Circular *1],</span></span>
<span class="line"><span class="token comment">#       filename: &#39;/Users/retina/Desktop/es-modules in Node/a.js&#39;,</span></span>
<span class="line"><span class="token comment">#       loaded: true,</span></span>
<span class="line"><span class="token comment">#       children: [],</span></span>
<span class="line"><span class="token comment">#       paths: [Array]</span></span>
<span class="line"><span class="token comment">#     }</span></span>
<span class="line"><span class="token comment">#   ],</span></span>
<span class="line"><span class="token comment">#   paths: [</span></span>
<span class="line"><span class="token comment">#     &#39;/Users/retina/Desktop/es-modules in Node/node_modules&#39;,</span></span>
<span class="line"><span class="token comment">#     &#39;/Users/retina/Desktop/node_modules&#39;,</span></span>
<span class="line"><span class="token comment">#     &#39;/Users/retina/node_modules&#39;,</span></span>
<span class="line"><span class="token comment">#     &#39;/Users/node_modules&#39;,</span></span>
<span class="line"><span class="token comment">#     &#39;/node_modules&#39;</span></span>
<span class="line"><span class="token comment">#   ]</span></span>
<span class="line"><span class="token comment"># } [Arguments] {</span></span>
<span class="line"><span class="token comment">#   &#39;0&#39;: {},</span></span>
<span class="line"><span class="token comment">#   &#39;1&#39;: [Function: require] {</span></span>
<span class="line"><span class="token comment">#     resolve: [Function: resolve] { paths: [Function: paths] },</span></span>
<span class="line"><span class="token comment">#     main: Module {</span></span>
<span class="line"><span class="token comment">#       id: &#39;.&#39;,</span></span>
<span class="line"><span class="token comment">#       path: &#39;/Users/retina/Desktop/es-modules in Node&#39;,</span></span>
<span class="line"><span class="token comment">#       exports: {},</span></span>
<span class="line"><span class="token comment">#       parent: null,</span></span>
<span class="line"><span class="token comment">#       filename: &#39;/Users/retina/Desktop/es-modules in Node/b.js&#39;,</span></span>
<span class="line"><span class="token comment">#       loaded: false,</span></span>
<span class="line"><span class="token comment">#       children: [Array],</span></span>
<span class="line"><span class="token comment">#       paths: [Array]</span></span>
<span class="line"><span class="token comment">#     },</span></span>
<span class="line"><span class="token comment">#     extensions: [Object: null prototype] {</span></span>
<span class="line"><span class="token comment">#       &#39;.js&#39;: [Function (anonymous)],</span></span>
<span class="line"><span class="token comment">#       &#39;.json&#39;: [Function (anonymous)],</span></span>
<span class="line"><span class="token comment">#       &#39;.node&#39;: [Function (anonymous)]</span></span>
<span class="line"><span class="token comment">#     },</span></span>
<span class="line"><span class="token comment">#     cache: [Object: null prototype] {</span></span>
<span class="line"><span class="token comment">#       &#39;/Users/retina/Desktop/es-modules in Node/b.js&#39;: [Module],</span></span>
<span class="line"><span class="token comment">#       &#39;/Users/retina/Desktop/es-modules in Node/a.js&#39;: [Module]</span></span>
<span class="line"><span class="token comment">#     }</span></span>
<span class="line"><span class="token comment">#   },</span></span>
<span class="line"><span class="token comment">#   &#39;2&#39;: Module {</span></span>
<span class="line"><span class="token comment">#     id: &#39;.&#39;,</span></span>
<span class="line"><span class="token comment">#     path: &#39;/Users/retina/Desktop/es-modules in Node&#39;,</span></span>
<span class="line"><span class="token comment">#     exports: {},</span></span>
<span class="line"><span class="token comment">#     parent: null,</span></span>
<span class="line"><span class="token comment">#     filename: &#39;/Users/retina/Desktop/es-modules in Node/b.js&#39;,</span></span>
<span class="line"><span class="token comment">#     loaded: false,</span></span>
<span class="line"><span class="token comment">#     children: [ [Module] ],</span></span>
<span class="line"><span class="token comment">#     paths: [</span></span>
<span class="line"><span class="token comment">#       &#39;/Users/retina/Desktop/es-modules in Node/node_modules&#39;,</span></span>
<span class="line"><span class="token comment">#       &#39;/Users/retina/Desktop/node_modules&#39;,</span></span>
<span class="line"><span class="token comment">#       &#39;/Users/retina/node_modules&#39;,</span></span>
<span class="line"><span class="token comment">#       &#39;/Users/node_modules&#39;,</span></span>
<span class="line"><span class="token comment">#       &#39;/node_modules&#39;</span></span>
<span class="line"><span class="token comment">#     ]</span></span>
<span class="line"><span class="token comment">#   },</span></span>
<span class="line"><span class="token comment">#   &#39;3&#39;: &#39;/Users/retina/Desktop/es-modules in Node/b.js&#39;,</span></span>
<span class="line"><span class="token comment">#   &#39;4&#39;: &#39;/Users/retina/Desktop/es-modules in Node&#39;</span></span>
<span class="line"><span class="token comment"># }</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3)),s("p",null,[n[195]||(n[195]=e("As shown above, we can see the ")),s("a",X,[n[192]||(n[192]=e("module object (")),o(a,{icon:"iconfont icon-github"}),n[193]||(n[193]=s("code",null,"nodejs/node",-1)),n[194]||(n[194]=e(")"))]),n[196]||(n[196]=t(" on line 6 with all the properties, including the <code>filename</code>, <code>id</code>, <code>children</code>, path depth, etc. Also, we can see the <code>argument</code> object, which consists of the <code>export</code> object, <code>require</code> function, file and folder path, and the <code>Module</code> (which is essentially what the wrapper function does, but it executes the code contained in a file/module).",15))]),s("p",null,[n[200]||(n[200]=e("Finally, as an exercise, we can go ahead and print the ")),n[201]||(n[201]=s("code",null,"require",-1)),n[202]||(n[202]=e(" function in the ")),n[203]||(n[203]=s("code",null,"b.js",-1)),n[204]||(n[204]=e(" file. To learn more about the output of the ")),n[205]||(n[205]=s("code",null,"require",-1)),n[206]||(n[206]=e(" function, we can check the ")),s("a",_,[n[197]||(n[197]=e("implementation (")),o(a,{icon:"iconfont icon-github"}),n[198]||(n[198]=s("code",null,"nodejs/node",-1)),n[199]||(n[199]=e(")"))]),n[207]||(n[207]=e(" in this section of the Node source code."))]),s("div",nn,[n[220]||(n[220]=s("p",{class:"hint-container-title"},"Note",-1)),s("p",null,[n[213]||(n[213]=e("Special emphasis should be placed on the ")),s("a",sn,[n[208]||(n[208]=s("code",null,"load",-1)),n[209]||(n[209]=e(" (")),o(a,{icon:"iconfont icon-github"}),n[210]||(n[210]=s("code",null,"nodejs/node",-1)),n[211]||(n[211]=e(")"))]),n[214]||(n[214]=e(" and ")),n[215]||(n[215]=s("code",null,"validateString",-1)),n[216]||(n[216]=e(" methods. The ")),n[217]||(n[217]=s("code",null,"validateString",-1)),n[218]||(n[218]=e(" method, as its name implies, checks whether the passed-in module ID is a valid string. To understand the require function on a much higher level, you can check the ")),s("a",en,[o(a,{icon:"iconfont icon-name"}),n[212]||(n[212]=e("Knowledge section"))]),n[219]||(n[219]=e(" of the Node documentation."))])]),n[335]||(n[335]=s("hr",null,null,-1)),n[336]||(n[336]=s("h2",{id:"interoperability-for-both-module-systems",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#interoperability-for-both-module-systems"},[s("span",null,"Interoperability for both module systems")])],-1)),s("p",null,[n[233]||(n[233]=e("In CommonJS, ")),s("a",on,[n[221]||(n[221]=e("modules are wrapped as functions (")),o(a,{icon:"iconfont icon-github"}),n[222]||(n[222]=s("code",null,"nodejs/ecmascript-modules",-1)),n[223]||(n[223]=e(")"))]),n[234]||(n[234]=e(" before they are evaluated at runtime. For ES modules, code reuse provided via ")),n[235]||(n[235]=s("code",null,"import",-1)),n[236]||(n[236]=e(" and ")),n[237]||(n[237]=s("code",null,"export",-1)),n[238]||(n[238]=e()),s("a",an,[n[224]||(n[224]=e("binding (")),o(a,{icon:"iconfont icon-github"}),n[225]||(n[225]=s("code",null,"nodejs/node-eps",-1)),n[226]||(n[226]=e(")"))]),n[239]||(n[239]=e(" are already ")),s("a",tn,[n[227]||(n[227]=e("created or loaded (")),o(a,{icon:"iconfont icon-github"}),n[228]||(n[228]=s("code",null,"nodejs/node-eps",-1)),n[229]||(n[229]=e(")"))]),n[240]||(n[240]=e(" asynchronously before they are evaluated. To understand how ESM works under the hood, you can check ")),s("a",ln,[n[230]||(n[230]=e("here (")),o(a,{icon:"iconfont icon-github"}),n[231]||(n[231]=s("code",null,"nodejs/node-eps",-1)),n[232]||(n[232]=e(")"))]),n[241]||(n[241]=e(". Now let’s explore further 🙂"))]),n[337]||(n[337]=s("p",null,"For a quick comparison, a CommonJS module goes through this phase in its lifecycle:",-1)),n[338]||(n[338]=s("p",null,"Resolution -> Loading -> Wrapping -> Evaluation -> Caching",-1)),s("p",null,[n[245]||(n[245]=e("This validates the fact that for CommonJS, there is no way to determine what gets exported as a module until the module is wrapped and evaluated. This is quite different for ES modules, as the imported symbols are already ")),s("a",rn,[n[242]||(n[242]=e("parsed and understood by the language (")),o(a,{icon:"iconfont icon-github"}),n[243]||(n[243]=s("code",null,"nodejs/node-eps",-1)),n[244]||(n[244]=e(")"))]),n[246]||(n[246]=e(" before the code gets evaluated."))]),s("p",null,[n[248]||(n[248]=e("When the code is parsed, just before it is evaluated, an internal ")),s("a",pn,[o(a,{icon:"fas fa-globe"}),n[247]||(n[247]=e("Module Record"))]),n[249]||(n[249]=e(" is created, and only after this data structure is well-formed are the files parsed and the code evaluated."))]),n[339]||(n[339]=t(`<p>For example:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="d.mjs"><span>d.mjs</span></div><div class="language-mjs line-numbers-mode" data-highlighter="prismjs" data-ext="mjs"><pre><code class="language-mjs"><span class="line">const check = () =&gt; {</span>
<span class="line">  console.log(&#39;Just checking&#39;);</span>
<span class="line">};</span>
<span class="line">export.check = check;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="code-block-with-title"><div class="code-block-title-bar" data-title="e.mjs"><span>e.mjs</span></div><div class="language-mjs line-numbers-mode" data-highlighter="prismjs" data-ext="mjs"><pre><code class="language-mjs"><span class="line">import {check} from &#39;./d&#39; // assuming they are on the same folder path</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></div>`,3)),s("p",null,[n[250]||(n[250]=e("In the ")),o(a,{icon:"fa-brands fa-js"}),n[251]||(n[251]=s("code",null,"e.mjs",-1)),n[252]||(n[252]=e(" file above, Node.js parses and validates the imports before going further to execute or evaluate the piece of code. This is not the case for a CommonJS module: the exported symbols are only made known after the module is wrapped and evaluated."))]),n[340]||(n[340]=s("p",null,"This incompatibility is one of the many reasons the standard body in charge of ECMAScript intended to implement interoperability for both ESM and Node’s existing CommonJS module system.",-1)),s("p",null,[n[254]||(n[254]=e("Furthermore, the ")),s("a",dn,[o(a,{icon:"fa-brands fa-node"}),n[253]||(n[253]=e("current specifier resolution"))]),n[255]||(n[255]=e(" does not support all default behavior of the CommonJS loader. One of the major differences is automatic resolution of file extensions and the ability to import directories that have an index file."))]),s("p",null,[n[257]||(n[257]=e("For example, if we do an ")),n[258]||(n[258]=s("code",null,"import './directory'",-1)),n[259]||(n[259]=e(" from, say, a directory that has an ")),o(a,{icon:"fa-brands fa-js"}),n[260]||(n[260]=s("code",null,"index.js",-1)),n[261]||(n[261]=e(", ES modules do not look for an ")),o(a,{icon:"fa-brands fa-js"}),n[262]||(n[262]=s("code",null,"index.js",-1)),n[263]||(n[263]=e(" file in the specified folder, as was the case in CommonJS. Instead, it throws an error. This can be fixed by passing the experimental flag ")),n[264]||(n[264]=s("code",null,"--experimental-specifier-resolution=[mode]",-1)),n[265]||(n[265]=e(". More details ")),s("a",un,[o(a,{icon:"fa-brands fa-node"}),n[256]||(n[256]=e("here"))]),n[266]||(n[266]=e("."))]),n[341]||(n[341]=s("div",{class:"hint-container note"},[s("p",{class:"hint-container-title"},"Note"),s("p",null,[e("To customize the default module resolution, loader hooks can optionally be provided via the "),s("code",null,"--experimental-loader ./loader-name.mjs"),e(" argument to Node.js. The loaders APIs are currently being redesigned, which means they would change in the future.")])],-1)),n[342]||(n[342]=s("p",null,[e("Also, while import statements can reference both an ES module and a commonJS module, import statements are permitted only in ES modules. However, for loading ES modules, commonJS supports dynamic import expressions. As an addition, a require function can be constructed within an ESM using the "),s("code",null,"module.createRequire()"),e(" method.")],-1)),s("p",null,[n[268]||(n[268]=e("More details about interoperability with CommonJS can be found in this ")),s("a",mn,[o(a,{icon:"fa-brands fa-node"}),n[267]||(n[267]=e("section"))]),n[269]||(n[269]=e(" of the documentation."))]),n[343]||(n[343]=s("hr",null,null,-1)),n[344]||(n[344]=s("h2",{id:"features-of-both-module-systems",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#features-of-both-module-systems"},[s("span",null,"Features of both module systems")])],-1)),s("ul",null,[n[285]||(n[285]=s("li",null,[e("Dynamic "),s("code",null,"import()"),e(" is supported in both CommonJS and ES modules. It can be used to include ES module files from CommonJS code")],-1)),s("li",null,[n[271]||(n[271]=e("ECMAScript 6 also provides that modules can be loaded from a URL, while CommonJS is limited to relative and absolute file paths. ")),s("a",cn,[o(a,{icon:"fa-brands fa-node"}),n[270]||(n[270]=e("This new improvement"))]),n[272]||(n[272]=e(" not only makes loading more complicated, but also slow"))]),s("li",null,[n[274]||(n[274]=e("Sources that are in formats Node.js doesn’t understand can be converted into JavaScript. More details can be found ")),s("a",fn,[o(a,{icon:"fa-brands fa-node"}),n[273]||(n[273]=e("here"))])]),s("li",null,[n[278]||(n[278]=e("Support for ")),s("a",bn,[n[275]||(n[275]=e("extensionless main entry points (")),o(a,{icon:"iconfont icon-github"}),n[276]||(n[276]=s("code",null,"WICG/import-maps",-1)),n[277]||(n[277]=e(")"))]),n[279]||(n[279]=e(" in ESM has been dropped"))]),s("li",null,[s("a",gn,[o(a,{icon:"iconfont icon-github"}),n[280]||(n[280]=s("code",null,"tc39/proposal-import-meta",-1))]),n[281]||(n[281]=e(" provides the absolute URL of the current ES module file. It is currently a stage 4 proposal in the TC39 spec"))]),n[286]||(n[286]=s("li",null,"Dynamic imports can be used to import both ES and CommonJS modules. In CommonJS modules it can be used to load ES modules. Note that it returns a promise",-1)),n[287]||(n[287]=s("li",null,[e("A file extension must be provided when using the "),s("code",null,"import"),e(" keyword. Directory indexes (e.g., "),s("code",null,"'./database/index.js'"),e(") must be fully specified")],-1)),s("li",null,[n[283]||(n[283]=e("Dual CommonJS and ESM are now possible with the use of ")),s("a",kn,[o(a,{icon:"fa-brands fa-node"}),n[282]||(n[282]=e("conditional exports."))]),n[284]||(n[284]=e(" Now, Node.js can run ES module entry points, and a package can contain both CommonJS and ESM entry points"))]),n[288]||(n[288]=s("li",null,[e("From version 14.13.1, ESM added support for using "),s("code",null,"node: URLs"),e(" to load Node.js built-in modules, allowing built-in modules to be referenced by valid absolute URL strings")],-1))]),n[345]||(n[345]=t('<div class="hint-container note"><p class="hint-container-title">Note</p><p>Function <code>require</code> shouldn’t be used in ES modules. This is because ES modules are executed asynchronously. To load an ES module from a CommonJS module, we can make use of <code>import()</code>.</p></div><p>Readers should also note that there are still some known differences between ESM and commonJS modules. For example, native modules are not currently supported with ESM imports. Also, the ES module loader has its own kind of caching system and does not rely on <code>require.cache</code> found in the commonJS parlance.</p><p>Others include the unavailability of <em>_filename</em> or <em>_dirname</em> found in the commonJS module system. ESM provides other ways of replicating this behaviour with the use of <code>import.meta.url</code>.</p>',3)),s("p",null,[n[290]||(n[290]=e("For more details about the differences between ES Modules and commonJS modules, readers can check this ")),s("a",vn,[o(a,{icon:"fa-brands fa-node"}),n[289]||(n[289]=e("section of the documentation"))]),n[291]||(n[291]=e("."))]),n[346]||(n[346]=s("hr",null,null,-1)),n[347]||(n[347]=s("h2",{id:"es-modules-moving-forward",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#es-modules-moving-forward"},[s("span",null,"ES modules moving forward")])],-1)),s("p",null,[n[293]||(n[293]=e("ES modules are no longer tagged experimental, and are now stable in terms of technical implementation as of Node version 15.3.0. This means that they are now ready for production usage. The challenge, therefore, is upon package authors, maintainers, and developers to be explicit with defining the type field in the ")),o(a,{icon:"iconfont icon-json"}),n[294]||(n[294]=s("code",null,"package.json",-1)),n[295]||(n[295]=e(" file and other useful conventions discussed in the specifications. More details about this can be found ")),s("a",hn,[o(a,{icon:"fa-brands fa-node"}),n[292]||(n[292]=e("here"))]),n[296]||(n[296]=e("."))]),n[348]||(n[348]=s("p",null,"Nowadays, it is possible to use both CommonJS and ESM in one application, but with less friction. But of course, CommonJS modules need to know if the module being loaded is a CommonJS or an ES module since the latter is loaded only asynchronously.",-1)),s("p",null,[n[298]||(n[298]=e("The issues relating to dual-package hazard and ways to avoid or curtail these hazards are extensively covered in the ")),s("a",yn,[o(a,{icon:"fa-brands fa-node"}),n[297]||(n[297]=e("package section"))]),n[299]||(n[299]=e(" of the documentation."))]),s("p",null,[n[301]||(n[301]=e("Also, in accordance with the ESM spec, using the import keyword does not complete the file path by default with the file name extension, as for CommonJS modules. Therefore, this should also be explicitly stated beforehand. More details can be found in the section ")),s("a",wn,[o(a,{icon:"fa-brands fa-node"}),n[300]||(n[300]=e("outlining the differences between both module systems"))]),n[302]||(n[302]=e("."))]),n[349]||(n[349]=s("hr",null,null,-1)),n[350]||(n[350]=s("h2",{id:"conclusion",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#conclusion"},[s("span",null,"Conclusion")])],-1)),n[351]||(n[351]=s("p",null,"Prior to the introduction of the ES6 standard, there wasn’t any native implementation for organizing source code in server-side JavaScript. The community relied heavily on CommonJS module format.",-1)),n[352]||(n[352]=s("p",null,"Nowadays, with the introduction and API stabilization of ES modules, developers can enjoy the many benefits associated with the release specification. This article has highlighted the transition between both module systems and their interoperability.",-1)),s("p",null,[n[304]||(n[304]=e("Note that this article has not covered the loaders API since they are still experimental and will definitely change in future versions. To learn more about it please check ")),s("a",jn,[o(a,{icon:"fa-brands fa-node"}),n[303]||(n[303]=e("this section"))]),n[305]||(n[305]=e(" of the documentation."))]),s("p",null,[n[308]||(n[308]=e("Tools like ")),s("a",xn,[o(a,{icon:"iconfont icon-babel"}),n[306]||(n[306]=e("Babel"))]),n[309]||(n[309]=e(" and ")),s("a",Sn,[o(a,{icon:"iconfont icon-github"}),n[307]||(n[307]=e("`standard-things/esm``"))]),n[310]||(n[310]=e(", which translate the newer syntax into code compatible with older environments, the transition becomes even easier."))]),s("p",null,[n[313]||(n[313]=e("In the long run, this entire draft process is an important step and paves the way for further future improvements. Let me know if you have any questions in the comment section below, or message me on my ")),s("a",En,[n[311]||(n[311]=e("Twitter handle ()")),o(a,{icon:"fa-brands fa-x-twitter"}),n[312]||(n[312]=s("code",null,"alex_nnakwue",-1))]),n[314]||(n[314]=e(". Thanks for reading 🙂"))]),g(" TODO: add ARTICLE CARD "),o(p,d(u({title:"Using ES modules in Node.js",desc:"Learn about the state of ES modules in Node today, including concerns realted to transitioning from and interoperability with CommonJS.",link:"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/es-modules-in-node-today.html",logo:"/assets/image/blog.logrocket.com/favicon.png",background:"rgba(112,76,182,0.2)"})),null,16)])}const Tn=f(y,[["render",Nn]]),An=JSON.parse('{"path":"/blog.logrocket.com/es-modules-in-node-today.html","title":"Using ES modules in Node.js","lang":"en-US","frontmatter":{"lang":"en-US","title":"Using ES modules in Node.js","description":"Article(s) > Using ES modules in Node.js","icon":"fa-brands fa-node","category":["Node.js","Article(s)"],"tag":["blog","blog.logrocket.com","node","nodejs","node-js"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Using ES modules in Node.js\\",\\"image\\":[\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/es-modules-in-node-today/banner.jpeg\\"],\\"datePublished\\":\\"2021-03-03T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Alexander Nnakwue\\",\\"url\\":\\"https://blog.logrocket.com/author/alexandernnakwue/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/es-modules-in-node-today.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"Using ES modules in Node.js"}],["meta",{"property":"og:description","content":"Article(s) > Using ES modules in Node.js"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/es-modules-in-node-today/banner.jpeg"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/es-modules-in-node-today/banner.jpeg"}],["meta",{"name":"twitter:image:alt","content":"Using ES modules in Node.js"}],["meta",{"property":"article:author","content":"Alexander Nnakwue"}],["meta",{"property":"article:tag","content":"node-js"}],["meta",{"property":"article:tag","content":"nodejs"}],["meta",{"property":"article:tag","content":"node"}],["meta",{"property":"article:tag","content":"blog.logrocket.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2021-03-03T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Using ES modules in Node.js"},{"property":"og:description","content":"Using ES modules in Node.js"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/es-modules-in-node-today.html"}]],"prev":"/programming/js-node/articles/README.md","date":"2021-03-03T00:00:00.000Z","isOriginal":false,"author":[{"name":"Alexander Nnakwue","url":"https://blog.logrocket.com/author/alexandernnakwue/"}],"cover":"/assets/image/blog.logrocket.com/es-modules-in-node-today/banner.jpeg"},"git":{},"readingTime":{"minutes":15.01,"words":4502},"filePathRelative":"blog.logrocket.com/es-modules-in-node-today.md","copyright":{"author":"Alexander Nnakwue"}}');export{Tn as comp,An as data};
