import{_ as k}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as v,d as n,f as e,b as u,a as y,t as h,n as m,g,w as a,e as t,r as o,o as f}from"./app-BItykJLQ.js";const w={},S={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},C={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},T={class:"table-of-contents"},A={href:"https://webperf.social/@ryantownsend/112722554445494335",target:"_blank",rel:"noopener noreferrer"},x={href:"https://developer.chrome.com/blog/entry-exit-animations#the_starting-style_rule_for_entry_animations",target:"_blank",rel:"noopener noreferrer"},I={href:"https://lea.verou.me/blog/2024/css-conditionals-now/",target:"_blank",rel:"noopener noreferrer"},D={href:"https://mastodon.social/@Schepp",target:"_blank",rel:"noopener noreferrer"};function F(r,s){const c=o("VPCard"),p=o("router-link"),b=o("SiteInfo"),l=o("VPIcon"),i=o("RouteLink"),d=o("CodePen");return f(),v("div",null,[n("h1",S,[n("a",C,[n("span",null,h(r.$frontmatter.title)+" ê´€ë ¨",1)])]),e(c,m(g({title:"CSS > Article(s)",desc:"Article(s)",link:"/programming/css/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),n("nav",T,[n("ul",null,[n("li",null,[e(p,{to:"#the-code"},{default:a(()=>[...s[0]||(s[0]=[t("The Code",-1)])]),_:1})]),n("li",null,[e(p,{to:"#how-it-works"},{default:a(()=>[...s[1]||(s[1]=[t("How it works",-1)])]),_:1})]),n("li",null,[e(p,{to:"#demo"},{default:a(()=>[...s[2]||(s[2]=[t("Demo",-1)])]),_:1})]),n("li",null,[e(p,{to:"#alternative-approach-style-queries"},{default:a(()=>[...s[3]||(s[3]=[t("Alternative Approach: Style Queries",-1)])]),_:1})])])]),s[35]||(s[35]=n("hr",null,null,-1)),e(b,{name:"Feature detect CSS @starting-style support",desc:"Awaiting browser support for at-rule(), hereâ€™s how you do it.",url:"https://bram.us/2024/07/11/feature-detect-css-starting-style-support/",logo:"https://bramu.us/favicon.ico",preview:"https://bram.us/wordpress/wp-content/uploads/2024/07/css-scrollable-detection.png"}),s[36]||(s[36]=n("figure",null,[n("img",{src:"https://bram.us/wordpress/wp-content/uploads/2024/07/css-scrollable-detection.png",alt:"",tabindex:"0",loading:"lazy"}),n("figcaption")],-1)),n("p",null,[s[7]||(s[7]=t("The other day on Mastodon, ",-1)),n("a",A,[e(l,{icon:"fas fa-globe"}),s[4]||(s[4]=t("Ryan wondered",-1))]),s[8]||(s[8]=t(" how he can detect support for ",-1)),n("a",x,[e(l,{icon:"fa-brands fa-chrome"}),s[5]||(s[5]=n("code",null,"@starting-style",-1))]),s[9]||(s[9]=t(". While in theory you could use ",-1)),e(i,{to:"/bram.us/detect-at-rule-support-with-the-at-rule-function.html"},{default:a(()=>[...s[6]||(s[6]=[n("strong",null,[n("code",null,"@supports at-rule()")],-1)])]),_:1}),s[10]||(s[10]=t(" for this, in practice you canâ€™t because it has no browser support (ðŸ˜­).",-1))]),n("p",null,[s[12]||(s[12]=t("Drawing inspiration from ",-1)),e(i,{to:"/bram.us/feature-detect-css-property-support.html"},{default:a(()=>[...s[11]||(s[11]=[n("strong",null,[t("my previous post on how to detect support for "),n("code",null,"@property")],-1)])]),_:1}),s[13]||(s[13]=t(", I came up with a similar method to detect ",-1)),s[14]||(s[14]=n("code",null,"@starting-style",-1)),s[15]||(s[15]=t(" support",-1))]),s[37]||(s[37]=u(`<hr><h2 id="the-code" tabindex="-1"><a class="header-anchor" href="#the-code"><span>The Code</span></a></h2><p>The code I landed on is this:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@property</span> --supported</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">syntax</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">initial-value</span><span class="token punctuation">:</span> <span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">inherits</span><span class="token punctuation">:</span> false<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token selector">:root</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--supported</span><span class="token punctuation">:</span> initial<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">transition</span><span class="token punctuation">:</span> --supported 0s <span class="token function">calc</span><span class="token punctuation">(</span>infinity * 1s<span class="token punctuation">)</span> step-end<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">transition-behavior</span><span class="token punctuation">:</span> allow-discrete<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@starting-style</span></span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">:root</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">--supported</span><span class="token punctuation">:</span> <span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/* Usage: */</span></span>
<span class="line"><span class="token selector">:root</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--bg-if-support</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--supported<span class="token punctuation">)</span> green<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">--bg-if-no-support</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--supported<span class="token punctuation">,</span> red<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">body</span> <span class="token punctuation">{</span> </span>
<span class="line">  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--bg-if-support<span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--bg-if-no-support<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4)),n("p",null,[s[17]||(s[17]=t("The code uses ",-1)),s[18]||(s[18]=n("code",null,"@starting-style",-1)),s[19]||(s[19]=t(" to set up a Space Toggle with the ",-1)),s[20]||(s[20]=n("code",null,"--supported",-1)),s[21]||(s[21]=t(" property. In browsers without support the value is ",-1)),s[22]||(s[22]=n("code",null,"initial",-1)),s[23]||(s[23]=t(". You can use the computed value of ",-1)),s[24]||(s[24]=n("code",null,"--supported",-1)),s[25]||(s[25]=t(" as a classic Space Toggles but also with Style Queries ",-1)),n("a",I,[e(l,{icon:"fas fa-globe"}),s[16]||(s[16]=t("or other types of conditionals",-1))]),s[26]||(s[26]=t(".",-1))]),s[38]||(s[38]=u('<hr><h2 id="how-it-works" tabindex="-1"><a class="header-anchor" href="#how-it-works"><span>How it works</span></a></h2><p>The code works by registering a custom property with an <code>initial-value</code> that is not <code>initial</code>. The value of that property gets changed to <code>initial</code> in <code>:root</code> but <code>@starting-style</code> also changesit.</p><p>To prevent the value from swapping back to <code>initial</code>, the property is given a transition delay that lasts for all eternity. For this to work, it relies on <code>transition-behavior</code>.</p>',4)),n("p",null,[s[28]||(s[28]=t("ðŸŒŸ Shout-out to ",-1)),n("a",D,[e(l,{icon:"fas fa-globe"}),s[27]||(s[27]=t("Schepp",-1))]),s[29]||(s[29]=t(" who mentioned this â€œlong transition delayâ€-approach at CSS Day. The idea got stuck in my head and Iâ€™m happy I was able to use it here.",-1))]),s[39]||(s[39]=n("hr",null,null,-1)),s[40]||(s[40]=n("h2",{id:"demo",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#demo"},[n("span",null,"Demo")])],-1)),s[41]||(s[41]=n("p",null,[t("Embedded below is a demo that uses this technique. In browsers with support for "),n("code",null,"@starting-style"),t(" the background is green, otherwise it will be red.")],-1)),e(d,{user:"bramus","slug-hash":"gONQEKV",title:"Detect @starting-style support","default-tab":["css","result"],theme:r.dark},null,8,["theme"]),n("p",null,[s[31]||(s[31]=t("Note that it doesnâ€™t properly detect Chrome versions 117-118 because of the ",-1)),s[32]||(s[32]=n("code",null,"@property",-1)),s[33]||(s[33]=t(" bug I detailed in ",-1)),e(i,{to:"/bram.us/feature-detect-css-property-support.html"},{default:a(()=>[...s[30]||(s[30]=[n("strong",null,[t("the previous post on feature detecting "),n("code",null,"@property")],-1)])]),_:1}),s[34]||(s[34]=t(". I think this is acceptable.",-1))]),s[42]||(s[42]=n("hr",null,null,-1)),s[43]||(s[43]=n("h2",{id:"alternative-approach-style-queries",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#alternative-approach-style-queries"},[n("span",null,"Alternative Approach: Style Queries")])],-1)),s[44]||(s[44]=n("p",null,[t("The following demo is a variant that uses Style Queries to respond to the change instead of a Space Toggle. The core mechanism under the hood is still the the same: a "),n("code",null,"transition-delay"),t(" mechanism on the custom property.")],-1)),e(d,{user:"bramus","slug-hash":"QWReXaW",title:"Detect @starting-style support","default-tab":["css","result"],theme:r.dark},null,8,["theme"]),s[45]||(s[45]=u(`<p>Unfortunately, because Style Queries are not widely supported at this moment, the test is incomplete and incorrectly excludes many browser versions because they simply donâ€™t support Style Queries. On the other hand the code is easier to read and understand.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@property</span> --supported</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">syntax</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;number&gt;&quot;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">initial-value</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">inherits</span><span class="token punctuation">:</span> false<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">:root</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">transition</span><span class="token punctuation">:</span> --supported 0s <span class="token function">calc</span><span class="token punctuation">(</span>infinity * 1s<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token atrule"><span class="token rule">@starting-style</span></span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">:root</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">--supported</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2)),y(" TODO: add ARTICLE CARD "),e(c,m(g({title:"Feature detect CSS @starting-style support",desc:"Awaiting browser support for at-rule(), hereâ€™s how you do it.",link:"https://chanhi2000.github.io/bookshelf/bram.us/feature-detect-css-starting-style-support.html",logo:"https://bramu.us/favicon.ico",background:"rgba(17,17,17,0.2)"})),null,16)])}const V=k(w,[["render",F]]),q=JSON.parse('{"path":"/bram.us/feature-detect-css-starting-style-support.html","title":"Feature detect CSS @starting-style support","lang":"en-US","frontmatter":{"lang":"en-US","title":"Feature detect CSS @starting-style support","description":"Article(s) > Feature detect CSS @starting-style support","icon":"fa-brands fa-css3-alt","category":["CSS","Article(s)"],"tag":["blog","bram.us","css"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Feature detect CSS @starting-style support\\",\\"image\\":[\\"https://bram.us/wordpress/wp-content/uploads/2024/07/css-scrollable-detection.png\\"],\\"datePublished\\":\\"2024-07-12T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Bramus!\\",\\"url\\":\\"https://bram.us/author/bramus/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/bram.us/feature-detect-css-starting-style-support.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Feature detect CSS @starting-style support"}],["meta",{"property":"og:description","content":"Article(s) > Feature detect CSS @starting-style support"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://bram.us/wordpress/wp-content/uploads/2024/07/css-scrollable-detection.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://bram.us/wordpress/wp-content/uploads/2024/07/css-scrollable-detection.png"}],["meta",{"name":"twitter:image:alt","content":"Feature detect CSS @starting-style support"}],["meta",{"property":"article:author","content":"Bramus!"}],["meta",{"property":"article:tag","content":"css"}],["meta",{"property":"article:tag","content":"bram.us"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2024-07-12T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Feature detect CSS @starting-style support"},{"property":"og:description","content":"Feature detect CSS @starting-style support"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/bram.us/feature-detect-css-starting-style-support.html"}]],"prev":"/programming/css/articles/README.md","date":"2024-07-12T00:00:00.000Z","isOriginal":false,"author":[{"name":"Bramus!","url":"https://bram.us/author/bramus/"}],"cover":"https://bram.us/wordpress/wp-content/uploads/2024/07/css-scrollable-detection.png"},"git":{},"readingTime":{"minutes":2.44,"words":732},"filePathRelative":"bram.us/feature-detect-css-starting-style-support.md","copyright":{"author":"Bramus!"}}');export{V as comp,q as data};
