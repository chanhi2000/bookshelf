import{_ as d}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as k,d as s,f as a,b as i,t as m,n as v,g,w as o,e,r as p,o as h}from"./app-BItykJLQ.js";const b={},A={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},y={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},f={class:"table-of-contents"},w={href:"https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md#12-versioning",target:"_blank",rel:"noopener noreferrer"};function I(c,n){const l=p("VPCard"),t=p("router-link"),r=p("SiteInfo"),u=p("VPIcon");return h(),k("div",null,[s("h1",A,[s("a",y,[s("span",null,m(c.$frontmatter.title)+" ê´€ë ¨",1)])]),a(l,v(g({title:"C# > Article(s)",desc:"Article(s)",link:"/programming/cs/articles/README.md",logo:"https://chanhi2000.github.io/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",f,[s("ul",null,[s("li",null,[a(t,{to:"#why-you-need-api-versioning"},{default:o(()=>[...n[0]||(n[0]=[e("Why You Need API Versioning",-1)])]),_:1})]),s("li",null,[a(t,{to:"#implementing-api-versioning-in-asp-net-core"},{default:o(()=>[...n[1]||(n[1]=[e("Implementing API Versioning in ASP.NET Core",-1)])]),_:1})]),s("li",null,[a(t,{to:"#different-types-of-api-versioning"},{default:o(()=>[...n[2]||(n[2]=[e("Different Types of API Versioning",-1)])]),_:1})]),s("li",null,[a(t,{to:"#versioning-controllers"},{default:o(()=>[...n[3]||(n[3]=[e("Versioning Controllers",-1)])]),_:1})]),s("li",null,[a(t,{to:"#deprecating-api-versions"},{default:o(()=>[...n[4]||(n[4]=[e("Deprecating API Versions",-1)])]),_:1})]),s("li",null,[a(t,{to:"#versioning-minimal-apis"},{default:o(()=>[...n[5]||(n[5]=[e("Versioning Minimal APIs",-1)])]),_:1})]),s("li",null,[a(t,{to:"#takeaway"},{default:o(()=>[...n[6]||(n[6]=[e("Takeaway",-1)])]),_:1})])])]),n[11]||(n[11]=s("hr",null,null,-1)),a(r,{name:"API Versioning in ASP.NET Core",desc:"API versioning allows your API to evolve independently from the clients using it. I'll show you how to implement API versioning in ASP.NET Core.",url:"https://milanjovanovic.tech/blog/api-versioning-in-aspnetcore/",logo:"https://milanjovanovic.tech/profile_favicon.png",preview:"https://milanjovanovic.tech/blog-covers/mnw_070.png"}),n[12]||(n[12]=i(`<p>In the past year, I built and maintained a large public API. The API has dozens of integrations, serving mainly mobile applications.</p><p>When your API is serving so many clients, breaking changes are expensive.</p><p>So, everything I implemented on the public API had to be planned.</p><p>Adding a new field? Forget about it.</p><p>Renaming existing fields? Forget about it.</p><p>If I wanted to introduce breaking changes, I had to version the API.</p><p>Today, I&#39;ll show you how to implement API versioning in ASP.NET Core.</p><hr><h2 id="why-you-need-api-versioning" tabindex="-1"><a class="header-anchor" href="#why-you-need-api-versioning"><span>Why You Need API Versioning</span></a></h2><p>API versioning allows your API to evolve independently from the clients using it.</p><p>Introducing breaking changes to your API is a bad user experience. API versioning gives you a mechanism to avoid exposing breaking changes to clients. Instead of making a breaking change, you introduce a new API version.</p><p>What&#39;s the definition of a breaking change?</p><p>This isn&#39;t an exhaustive list, but a few examples of breaking changes are:</p><ul><li>Removing or renaming APIs or API parameters</li><li>Changing the behavior of existing APIs</li><li>Changing the API response contract</li><li>Changing the API error codes</li></ul><p>You can decide what a breaking change means for your API. For example, adding a new field to the response doesn&#39;t have to be a breaking change.</p><p>Let&#39;s see how to implement API versioning.</p><hr><h2 id="implementing-api-versioning-in-asp-net-core" tabindex="-1"><a class="header-anchor" href="#implementing-api-versioning-in-asp-net-core"><span>Implementing API Versioning in ASP.NET Core</span></a></h2><p>Let&#39;s start by installing three NuGet packages that we&#39;ll need to implement API versioning:</p><ul><li><code>Asp.Versioning.Http</code></li><li><code>Asp.Versioning.Mvc</code></li><li><code>Asp.Versioning.Mvc.ApiExplorer</code></li></ul><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell"><pre><code class="language-powershell"><span class="line"><span class="token function">Install-Package</span> Asp<span class="token punctuation">.</span>Versioning<span class="token punctuation">.</span>Http <span class="token comment"># This is needed for Minimal APIs</span></span>
<span class="line"><span class="token function">Install-Package</span> Asp<span class="token punctuation">.</span>Versioning<span class="token punctuation">.</span>Mvc <span class="token comment"># This is needed for Controllers</span></span>
<span class="line"><span class="token function">Install-Package</span> Asp<span class="token punctuation">.</span>Versioning<span class="token punctuation">.</span>Mvc<span class="token punctuation">.</span>ApiExplorer</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This allows us to call <code>AddApiVersioning</code> and provide a delegate to configure the <code>ApiVersioningOptions</code>.</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line">builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token function">AddApiVersioning</span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    options<span class="token punctuation">.</span>DefaultApiVersion <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ApiVersion</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    options<span class="token punctuation">.</span>ReportApiVersions <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line">    options<span class="token punctuation">.</span>AssumeDefaultVersionWhenUnspecified <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line">    options<span class="token punctuation">.</span>ApiVersionReader <span class="token operator">=</span> ApiVersionReader<span class="token punctuation">.</span><span class="token function">Combine</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UrlSegmentApiVersionReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HeaderApiVersionReader</span><span class="token punctuation">(</span><span class="token string">&quot;X-Api-Version&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">.</span><span class="token function">AddMvc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// This is needed for controllers</span></span>
<span class="line"><span class="token punctuation">.</span><span class="token function">AddApiExplorer</span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    options<span class="token punctuation">.</span>GroupNameFormat <span class="token operator">=</span> <span class="token string">&quot;&#39;v&#39;V&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    options<span class="token punctuation">.</span>SubstituteApiVersionInUrl <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here&#39;s the explanation for the <code>ApiVersioningOptions</code> properties:</p><ul><li><code>DefaultApiVersion</code> - Sets the default API version. Typically, this will be <code>v1.0</code>.</li><li><code>ReportApiVersions</code> - Reports the supported API versions in the <code>api-supported-versions</code> response header.</li><li><code>AssumeDefaultVersionWhenUnspecified</code> - Uses the <code>DefaultApiVersion</code> when the client didn&#39;t provide an explicit version.</li><li><code>ApiVersionReader</code> - Configures how to read the API version specified by the client. The default value is <code>QueryStringApiVersionReader</code>.</li></ul><p>The <code>AddApiExplorer</code> method is helpful if you are using Swagger. It will fix the endpoint routes and substitute the API version route parameter.</p><hr><h2 id="different-types-of-api-versioning" tabindex="-1"><a class="header-anchor" href="#different-types-of-api-versioning"><span>Different Types of API Versioning</span></a></h2><p>The most common ways to implement API versioning are:</p><ul><li>URL versioning: <code>https://localhost:5001/api/v1/workouts</code></li><li>Header versioning: <code>https://localhost:5001/api/workouts -H &#39;X-Api-Version: 1&#39;</code></li><li>Query parameter versioning: <code>https://localhost:5001/api/workouts?api-version=1</code></li></ul><p>There are a few other ways to implement API versioning. For example, using the <code>accept</code> or <code>content-type</code> headers. But they aren&#39;t used often.</p><p>The <code>Asp.Versioning.Http</code> library has a few <code>IApiVersionReader</code> implementations:</p><ul><li><code>UrlSegmentApiVersionReader</code></li><li><code>HeaderApiVersionReader</code></li><li><code>QueryStringApiVersionReader</code></li><li><code>MediaTypeApiVersionReader</code></li></ul>`,33)),s("p",null,[s("a",w,[n[7]||(n[7]=e("Microsoft's API versioning guidelines (",-1)),a(u,{icon:"iconfont icon-github"}),n[8]||(n[8]=s("code",null,"Microsoft/api-guidelines",-1)),n[9]||(n[9]=e(")",-1))]),n[10]||(n[10]=e(" suggest using URL or query string parameter versioning.",-1))]),n[13]||(n[13]=i(`<p>I use URL versioning almost exclusively in the applications I&#39;m developing.</p><hr><h2 id="versioning-controllers" tabindex="-1"><a class="header-anchor" href="#versioning-controllers"><span>Versioning Controllers</span></a></h2><p>To implement API versioning in ASP.NET controllers, you have to decorate the controller with the <code>ApiVersion</code> attribute.</p><p>The <code>ApiVersion</code> attribute allows you to specify which API versions that <code>WorkoutsController</code> supports. In this case, the controller supports both <code>v1</code> and <code>v2</code>. You use the <code>MapToApiVersion</code> attribute on the endpoints to specify the concrete API version.</p><p>The route parameter <code>v{v:apiVersion}</code> lets you specify the API version using <code>v1</code> or <code>v2</code> in the URL.</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiVersion</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiVersion</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiController</span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;api/v{v:apiVersion}/workouts&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WorkoutsController</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ControllerBase</span></span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MapToApiVersion</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;{workoutId}&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token return-type class-name">IActionResult</span> <span class="token function">GetWorkoutV1</span><span class="token punctuation">(</span><span class="token class-name">Guid</span> workoutId<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token function">Ok</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">GetWorkoutByIdQuery</span><span class="token punctuation">(</span>workoutId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MapToApiVersion</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;{workoutId}&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token return-type class-name">IActionResult</span> <span class="token function">GetWorkoutV2</span><span class="token punctuation">(</span><span class="token class-name">Guid</span> workoutId<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token function">Ok</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">GetWorkoutByIdQuery</span><span class="token punctuation">(</span>workoutId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="deprecating-api-versions" tabindex="-1"><a class="header-anchor" href="#deprecating-api-versions"><span>Deprecating API Versions</span></a></h2><p>If you want to deprecate an old API version, you can set the <code>Deprecated</code> property on the <code>ApiVersion</code> attribute. The deprecated API versions will be reported using the <code>api-deprecated-versions</code> response header.</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiVersion</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> Deprecated <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiVersion</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiController</span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;api/v{v:apiVersion}/workouts&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WorkoutsController</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ControllerBase</span></span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="versioning-minimal-apis" tabindex="-1"><a class="header-anchor" href="#versioning-minimal-apis"><span>Versioning Minimal APIs</span></a></h2><p>Versioning Minimal APIs requires you to define an <code>ApiVersionSet</code>, which you&#39;ll pass to the endpoints.</p><ul><li><code>NewApiVersionSet</code> - Creates a new <code>ApiVersionSetBuilder</code> that you can use to configure the <code>ApiVersionSet</code>.</li><li><code>HasApiVersion</code> - Indicates that the <code>ApiVersionSet</code> supports the specified <code>ApiVersion</code>.</li><li><code>ReportApiVersions</code>- Indicates that all APIs in the <code>ApiVersionSet</code> will report their versions.</li></ul><p>After creating the <code>ApiVersionSet</code>, you must pass it to a Minimal API endpoint by calling <code>WithApiVersionSet</code>. You can map to an explicit API version by calling <code>MapToApiVersion</code>.</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line"><span class="token class-name">ApiVersionSet</span> apiVersionSet <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">NewApiVersionSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">HasApiVersion</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ApiVersion</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">HasApiVersion</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ApiVersion</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">ReportApiVersions</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;api/v{version:apiVersion}/workouts/{workoutId}&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token class-name">Guid</span> workoutId<span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name">ISender</span> sender<span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name">CancellationToken</span> ct<span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name"><span class="token keyword">var</span></span> query <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GetWorkoutByIdQuery</span><span class="token punctuation">(</span>workoutId<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token class-name">Result<span class="token punctuation">&lt;</span>WorkoutResponse<span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token keyword">await</span> sender<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> ct<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">Match</span><span class="token punctuation">(</span>Results<span class="token punctuation">.</span>Ok<span class="token punctuation">,</span> CustomResults<span class="token punctuation">.</span>Problem<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">.</span><span class="token function">WithApiVersionSet</span><span class="token punctuation">(</span>apiVersionSet<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">.</span><span class="token function">MapToApiVersion</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Specifying the <code>ApiVersionSet</code> for each Minimal API endpoint can be cumbersome. So you can define a route group and set the <code>ApiVersionSet</code> only once. Route groups are also practical because they allow you to specify the route prefix.</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line"><span class="token class-name">ApiVersionSet</span> apiVersionSet <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">NewApiVersionSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">HasApiVersion</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ApiVersion</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">ReportApiVersions</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">RouteGroupBuilder</span> <span class="token keyword">group</span> <span class="token operator">=</span> app</span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">MapGroup</span><span class="token punctuation">(</span><span class="token string">&quot;api/v{version:apiVersion}&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">WithApiVersionSet</span><span class="token punctuation">(</span>apiVersionSet<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">group</span><span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;workouts&quot;</span><span class="token punctuation">,</span> <span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">group</span><span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;workouts/{workoutId}&quot;</span><span class="token punctuation">,</span> <span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="takeaway" tabindex="-1"><a class="header-anchor" href="#takeaway"><span>Takeaway</span></a></h2><p>API versioning is one of the best practices for designing modern APIs. Consider implementing API versioning from the first release. This makes it easier for clients to support future API versions. And it gets your team used to managing breaking changes and versioning the API.</p><p>You can use the <code>Asp.Versioning.Http</code> library to add API versioning in ASP.NET Core. Define the supported API versions, and start using them in your endpoints.</p><p>Remember to agree as a team what represents a breaking change. This should be well documented in the team&#39;s API design guidelines.</p><p>My preferred way to implement API versioning is using URL versioning. It&#39;s simple and explicit.</p><p>And since this is the last issue for the year, I wish you a happy and prosperous new year.</p><p>Thanks for reading, and stay awesome!</p><p>1</p>`,28))])}const S=d(b,[["render",I]]),T=JSON.parse('{"path":"/milanjovanovic.tech/api-versioning-in-aspnetcore.html","title":"API Versioning in ASP.NET Core","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"API Versioning in ASP.NET Core","description":"Article(s) > API Versioning in ASP.NET Core","icon":"iconfont icon-csharp","category":["C#","DotNet","Article(s)"],"tag":["blog","milanjovanovic.tech","cs","c#","csharp","dotnet"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"API Versioning in ASP.NET Core\\",\\"image\\":[\\"https://milanjovanovic.tech/blog-covers/mnw_070.png\\"],\\"datePublished\\":\\"2023-12-30T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Milan JovanoviÄ‡\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/milanjovanovic.tech/api-versioning-in-aspnetcore.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"API Versioning in ASP.NET Core"}],["meta",{"property":"og:description","content":"Article(s) > API Versioning in ASP.NET Core"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://milanjovanovic.tech/blog-covers/mnw_070.png"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://milanjovanovic.tech/blog-covers/mnw_070.png"}],["meta",{"name":"twitter:image:alt","content":"API Versioning in ASP.NET Core"}],["meta",{"property":"article:author","content":"Milan JovanoviÄ‡"}],["meta",{"property":"article:tag","content":"dotnet"}],["meta",{"property":"article:tag","content":"csharp"}],["meta",{"property":"article:tag","content":"c#"}],["meta",{"property":"article:tag","content":"cs"}],["meta",{"property":"article:tag","content":"milanjovanovic.tech"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2023-12-30T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > API Versioning in ASP.NET Core"},{"property":"og:description","content":"API Versioning in ASP.NET Core"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/milanjovanovic.tech/api-versioning-in-aspnetcore.html"}]],"prev":"/programming/cs/articles/README.md","date":"2023-12-30T00:00:00.000Z","isOriginal":false,"author":"Milan JovanoviÄ‡","cover":"https://milanjovanovic.tech/blog-covers/mnw_070.png"},"git":{},"readingTime":{"minutes":3.93,"words":1179},"filePathRelative":"milanjovanovic.tech/api-versioning-in-aspnetcore.md","copyright":{"author":"Milan JovanoviÄ‡"}}');export{S as comp,T as data};
