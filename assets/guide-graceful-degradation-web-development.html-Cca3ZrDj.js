import{_ as g}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as f,d as s,f as e,b as h,a as b,t as v,n as c,g as u,w as t,e as a,r as i,o as w}from"./app-BVguHYKu.js";const y="/bookshelf/assets/image/blog.logrocket.com/guide-graceful-degradation-web-development/banner.png",d="/bookshelf/assets/image/blog.logrocket.com/guide-graceful-degradation-web-development/random-joke-generator-frontend.png",x="/bookshelf/assets/image/blog.logrocket.com/guide-graceful-degradation-web-development/random-joke-generator-frontend-failures.png",A={},j={id:"frontmatter-title-관련",tabindex:"-1"},P={class:"header-anchor",href:"#frontmatter-title-관련"},I={class:"table-of-contents"},q={href:"https://github.com/rosdec/graceful_degradetion",target:"_blank",rel:"noopener noreferrer"},J={href:"https://github.com/rosdec/graceful_degradetion/releases/tag/initial_setup",target:"_blank",rel:"noopener noreferrer"},R={href:"https://official-joke-api.appspot.com/random_joke",target:"_blank",rel:"noopener noreferrer"};function T(k,n){const l=i("VPCard"),p=i("router-link"),m=i("SiteInfo"),o=i("VPIcon"),r=i("RouteLink");return w(),f("div",null,[s("h1",j,[s("a",P,[s("span",null,v(k.$frontmatter.title)+" 관련",1)])]),e(l,c(u({title:"TypeScript > Article(s)",desc:"Article(s)",link:"/programming/ts/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",I,[s("ul",null,[s("li",null,[e(p,{to:"#implementing-graceful-degradation-in-a-demo-application"},{default:t(()=>n[0]||(n[0]=[a("Implementing graceful degradation in a demo application")])),_:1,__:[0]})]),s("li",null,[e(p,{to:"#failures-and-mitigations"},{default:t(()=>n[1]||(n[1]=[a("Failures and mitigations")])),_:1,__:[1]}),s("ul",null,[s("li",null,[e(p,{to:"#first-failure-handling-api-timeouts-gracefully"},{default:t(()=>n[2]||(n[2]=[a("First failure: Handling API timeouts gracefully")])),_:1,__:[2]})]),s("li",null,[e(p,{to:"#second-failure-handling-network-errors-gracefully"},{default:t(()=>n[3]||(n[3]=[a("Second failure: Handling network errors gracefully")])),_:1,__:[3]})])])]),s("li",null,[e(p,{to:"#mitigation-for-the-frontend"},{default:t(()=>n[4]||(n[4]=[a("Mitigation for the frontend")])),_:1,__:[4]})]),s("li",null,[e(p,{to:"#conclusion"},{default:t(()=>n[5]||(n[5]=[a("Conclusion")])),_:1,__:[5]})])])]),n[35]||(n[35]=s("hr",null,null,-1)),e(m,{name:"A guide to graceful degradation in web development",desc:"Implement graceful degradation in frontend apps by handling failures, mitigating API timeouts, and ensuring a seamless UX with fallbacks.",url:"https://blog.logrocket.com/guide-graceful-degradation-web-development",logo:"/assets/image/blog.logrocket.com/favicon.png",preview:"/assets/image/blog.logrocket.com/guide-graceful-degradation-web-development/banner.png"}),n[36]||(n[36]=s("p",null,"Graceful degradation is a design principle in software and system engineering that ensures a system continues functioning - albeit with reduced performance or features - when one or more of its components fail or encounter problems.",-1)),n[37]||(n[37]=s("figure",null,[s("img",{src:y,alt:"A Guide To Graceful Degradation In Web Development",tabindex:"0",loading:"lazy"}),s("figcaption",null,"A Guide To Graceful Degradation In Web Development")],-1)),n[38]||(n[38]=s("p",null,"Rather than completely breaking down, the system “degrades gracefully” by maintaining core functionality and providing a minimally viable user experience. Which aspect is degraded depends on the kind of system/software.",-1)),n[39]||(n[39]=s("p",null,"For example, a mapping service might stop returning additional details about a city area because of a network slowdown but still will let the user navigate the areas of the map that have already been downloaded; a website might remain navigable and readable even if certain scripts, images, or advanced features don’t load, like webmail that will still let you edit your emails even if you are in airplane mode.",-1)),n[40]||(n[40]=s("p",null,"The concept of “graceful degradation” contrasts with “fail-fast” approaches, where a system immediately halts operations when it encounters a failure. Graceful degradation emphasizes resilience and user-centric design by ensuring critical services remain accessible during partial disruptions.",-1)),s("p",null,[n[9]||(n[9]=a("As usual, the code for this article ")),s("a",q,[n[6]||(n[6]=a("is available on GitHub. (")),e(o,{icon:"iconfont icon-github"}),n[7]||(n[7]=s("code",null,"rosdec/graceful_degradetion",-1)),n[8]||(n[8]=a(")"))]),n[10]||(n[10]=a(" We will use tags to follow our path along the “degradation” of the functionalities."))]),n[41]||(n[41]=s("hr",null,null,-1)),n[42]||(n[42]=s("h2",{id:"implementing-graceful-degradation-in-a-demo-application",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#implementing-graceful-degradation-in-a-demo-application"},[s("span",null,"Implementing graceful degradation in a demo application")])],-1)),s("p",null,[n[12]||(n[12]=a("To support our explanation, we will use a simple application (written in ")),e(r,{to:"/blog.logrocket.com/getting-started-deno-fresh.html"},{default:t(()=>n[11]||(n[11]=[s("strong",null,"Deno/Fresh",-1)])),_:1,__:[11]}),n[13]||(n[13]=a(" but the language/framework is irrelevant in this article) that will invoke a remote API to get a fresh joke for the user."))]),s("p",null,[n[17]||(n[17]=a("The interface is pretty simple and the code can be found on the repository (at ")),s("a",J,[n[14]||(n[14]=a("this tag (")),e(o,{icon:"iconfont icon-github"}),n[15]||(n[15]=s("code",null,"rosdec/graceful_degradetion",-1)),n[16]||(n[16]=a(")"))]),n[18]||(n[18]=a(" in particular)."))]),s("p",null,[n[20]||(n[20]=a("The ")),e(o,{icon:"fas fa-folder-open"}),n[21]||(n[21]=s("code",null,"islands\\",-1)),e(o,{icon:"fa-brands fa-react"}),n[22]||(n[22]=s("code",null,"Joke.tsx",-1)),n[23]||(n[23]=a(" file is a preact component responsible for displaying a random joke in a web interface. It uses the ")),e(r,{to:"/blog.logrocket.com/react-hooks-cheat-sheet-solutions-common-problems.html"},{default:t(()=>n[19]||(n[19]=[s("strong",null,[s("code",null,"useState"),a(" and "),s("code",null,"useEffect"),a(" Hooks")],-1)])),_:1,__:[19]}),n[24]||(n[24]=a(" to manage the joke’s state and fetch data when the component mounts. The joke is fetched from the ")),n[25]||(n[25]=s("code",null,"/api/joke",-1)),n[26]||(n[26]=a(" endpoint, and users can retrieve a new one by clicking a button. The component renders the joke along with a button that triggers fetching a new joke dynamically when clicked."))]),s("p",null,[n[28]||(n[28]=a("The ")),e(o,{icon:"fas fa-folder-open"}),n[29]||(n[29]=s("code",null,"routes\\api\\",-1)),e(o,{icon:"iconfont icon-typescript"}),n[30]||(n[30]=s("code",null,"joke.ts",-1)),n[31]||(n[31]=a(" file defines an API endpoint that returns a random joke. It fetches a joke from an external API (for this example, we use ")),s("a",R,[e(o,{icon:"fas fa-globe"}),n[27]||(n[27]=a("a service"))]),n[32]||(n[32]=a(" but any other similar service is fine) and extracts the setup and punchline. The response is then formatted as a single string (")),n[33]||(n[33]=s("code",null,"setup + punchline",-1)),n[34]||(n[34]=a(") and returned as a JSON response to the client."))]),n[43]||(n[43]=h(`<hr><h2 id="failures-and-mitigations" tabindex="-1"><a class="header-anchor" href="#failures-and-mitigations"><span>Failures and mitigations</span></a></h2><p>The application doesn’t do much, but from an architectural point of view, it is comprised of two tiers: the frontend and the backend with the API. Our frontend is simple and cannot fail, but the backend, our “joke” API, can fail: it relies on an external service that is out of our control.</p><p>Let’s look at the current version of the API:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> FreshContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;$fresh/server.ts&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>_req<span class="token operator">:</span> Request<span class="token punctuation">,</span> _ctx<span class="token operator">:</span> FreshContext<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Response<span class="token operator">&gt;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token string">&quot;https://official-joke-api.appspot.com/random_joke&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> newJoke <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">const</span> body <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>newJoke<span class="token punctuation">.</span>setup <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> newJoke<span class="token punctuation">.</span>punchline<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="first-failure-handling-api-timeouts-gracefully" tabindex="-1"><a class="header-anchor" href="#first-failure-handling-api-timeouts-gracefully"><span>First failure: Handling API timeouts gracefully</span></a></h3><p>The first kind of failure we will implement is aiming to randomly get a timeout on the external API call. Let’s modify the code:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> FreshContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;$fresh/server.ts&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span></span>
<span class="line">  _req<span class="token operator">:</span> Request<span class="token punctuation">,</span></span>
<span class="line">  _ctx<span class="token operator">:</span> FreshContext<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Response<span class="token operator">&gt;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Simulate a timeout by setting a timeout promise</span></span>
<span class="line">  <span class="token keyword">const</span> timeoutPromise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span>
<span class="line">    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// Fetch the joke from the external API</span></span>
<span class="line">  <span class="token keyword">const</span> fetchPromise <span class="token operator">=</span> <span class="token function">fetch</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token string">&quot;https://official-joke-api.appspot.com/random_joke&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// Race the fetch promise against the timeout</span></span>
<span class="line">  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>fetchPromise<span class="token punctuation">,</span> timeoutPromise<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token keyword">instanceof</span> <span class="token class-name">Response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> newJoke <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> body <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>newJoke<span class="token punctuation">.</span>setup <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> newJoke<span class="token punctuation">.</span>punchline<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">&quot;Failed to fetch joke&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token number">500</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In this new version, we add a <code>timeoutPromise</code> that will “<code>race</code>” with our external API call: if the external API answers in less than <code>200ms</code> (i.e. wins the race), we get a new joke, otherwise, we get <code>null</code> as a result. This is disruptive - our frontend relies on the response from the API as a JSON object, and it gets a message (“Failed to fetch joke”) and a 500 HTTP error. In the browser, it will produce these effects:</p><figure><img src="`+d+`" alt="Random Joke Generator Frontend Sample" tabindex="0" loading="lazy"><figcaption>Random Joke Generator Frontend Sample</figcaption></figure><p>The joke is not refreshed and you get an error message in the console because the message you get from the API is not a formatted JSON. To mitigate the random timeouts we injected in our API code, we can provide a safety net: when the fetch fails, we return a standard joke formatted as the frontend expects:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token comment">// ...</span></span>
<span class="line">  <span class="token comment">// Race the fetch promise against the timeout</span></span>
<span class="line">  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>fetchPromise<span class="token punctuation">,</span> timeoutPromise<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// If the timeout wins, return a fallback response</span></span>
<span class="line">    <span class="token keyword">const</span> fallbackJoke <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">      setup<span class="token operator">:</span> <span class="token string">&quot;[cached] Why did the developer go broke?&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      punchline<span class="token operator">:</span> <span class="token string">&quot;Because they used up all their cache!&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> body <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span></span>
<span class="line">      fallbackJoke<span class="token punctuation">.</span>setup <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> fallbackJoke<span class="token punctuation">.</span>punchline<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// ...</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To mitigate the effects of the failure we just created, we check the call has returned null; in such case, it comes in handy to have a <code>fallbackJoke</code> that will be returned in the same format expected by the frontend. This simple mechanism has augmented the resilience of our API to a particular type of failure: the unpredictable timeout of the external API.</p><h3 id="second-failure-handling-network-errors-gracefully" tabindex="-1"><a class="header-anchor" href="#second-failure-handling-network-errors-gracefully"><span>Second failure: Handling network errors gracefully</span></a></h3><p>In the timeout example, the mechanism we deployed to mitigate still relies on the fact that the server with the external API is reachable. If you unplug the network cable from your PC (or activate airplane mode), you will see that the frontend will fail in a new way:</p><figure><img src="`+x+`" alt="Random Joke Generator With A Frontend Failure" tabindex="0" loading="lazy"><figcaption>Random Joke Generator With A Frontend Failure</figcaption></figure><p>The reason is that the backend is not able to reach the external API server and thus returns an error to the backend (check the logs from Deno for more information). To mitigate this situation, we must modify the backend to be aware of the failure of the external API and then handle it by serving a fallback joke:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line">  <span class="token comment">// ...</span></span>
<span class="line">    <span class="token comment">// If the fetch completes in time, proceed as usual</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token keyword">instanceof</span> <span class="token class-name">Response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">const</span> newJoke <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">const</span> body <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>newJoke<span class="token punctuation">.</span>setup <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> newJoke<span class="token punctuation">.</span>punchline<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Failed to fetch joke&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>_error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Handle any other errors (e.g., network issues)</span></span>
<span class="line">    <span class="token keyword">const</span> errorJoke <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">      setup<span class="token operator">:</span> <span class="token string">&quot;[cached] Why did the API call fail?&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      punchline<span class="token operator">:</span> <span class="token string">&quot;Because it couldn&#39;t handle the request!&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> body <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>errorJoke<span class="token punctuation">.</span>setup <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> errorJoke<span class="token punctuation">.</span>punchline<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token number">500</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The mitigation relies on the fact that instead of returning a generic “Failed to fetch joke” message, we wrap the whole interaction with the external API server in a try/catch block. This block will let us handle the network failure by serving a local joke instead of an expressive error message. This is the final solution to the possible errors you can get on the backend, and it increases the system’s resilience.</p><hr><h2 id="mitigation-for-the-frontend" tabindex="-1"><a class="header-anchor" href="#mitigation-for-the-frontend"><span>Mitigation for the frontend</span></a></h2><p>In the previous section, we increased the resilience to failures but we also want to keep a user-centric approach as a part of the graceful degradation. At the moment, the user is not aware if the joke they get is fresh or not. To increase this knowledge, we will extend the JSON returned from the backend to keep track of the freshness of the joke. When the external API fails, the JSON that is returned to the frontend will state that the joke is not fresh (<code>fresh</code> is <code>false</code>):</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">const</span> errorJoke <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  setup<span class="token operator">:</span> <span class="token string">&quot;Why did the API call fail?&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  punchline<span class="token operator">:</span> <span class="token string">&quot;Because it couldn&#39;t handle the request!&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  fresh<span class="token operator">:</span> <span class="token boolean">false</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Otherwise, when the external API succeeds, we return a JSON object with the <code>fresh</code> field set to <code>true</code>:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token keyword">instanceof</span> <span class="token class-name">Response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> newJoke <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  newJoke<span class="token punctuation">.</span>fresh <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> body <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>newJoke<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now that the frontend receives the freshness of every joke, we just need to show it to the user:</p><figure><img src="`+d+'" alt="Random Joke Generator Frontend Sample" tabindex="0" loading="lazy"><figcaption>Random Joke Generator Frontend Sample</figcaption></figure><p>When the external API call fails, a message is shown in red, so the user knows what they are getting.</p><hr><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h2><p>In this article, we explored the concept of graceful degradation, highlighting two mechanisms for mitigating system failures. We explored two principles for implementing graceful degradation: building resilient components to withstand failures and adopting a user-centric approach so users are aware of any limited functionalities of the system in case of failures.</p>',31)),b(" TODO: add ARTICLE CARD "),e(l,c(u({title:"A guide to graceful degradation in web development",desc:"Implement graceful degradation in frontend apps by handling failures, mitigating API timeouts, and ensuring a seamless UX with fallbacks.",link:"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/guide-graceful-degradation-web-development.html",logo:"/assets/image/blog.logrocket.com/favicon.png",background:"rgba(112,76,182,0.2)"})),null,16)])}const N=g(A,[["render",T]]),C=JSON.parse('{"path":"/blog.logrocket.com/guide-graceful-degradation-web-development.html","title":"A guide to graceful degradation in web development","lang":"en-US","frontmatter":{"lang":"en-US","title":"A guide to graceful degradation in web development","description":"Article(s) > A guide to graceful degradation in web development","icon":"iconfont icon-typescript","category":["TypeScript","Article(s)"],"tag":["blog","blog.logrocket.com","ts","typsecript"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"A guide to graceful degradation in web development\\",\\"image\\":[\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/guide-graceful-degradation-web-development/banner.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/guide-graceful-degradation-web-development/random-joke-generator-frontend.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/guide-graceful-degradation-web-development/random-joke-generator-frontend-failures.png\\",\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/guide-graceful-degradation-web-development/random-joke-generator-frontend.png\\"],\\"datePublished\\":\\"2025-02-11T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Rosario De Chiara\\",\\"url\\":\\"https://blog.logrocket.com/author/rosariodechiara/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/guide-graceful-degradation-web-development.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"A guide to graceful degradation in web development"}],["meta",{"property":"og:description","content":"Article(s) > A guide to graceful degradation in web development"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/guide-graceful-degradation-web-development/banner.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/guide-graceful-degradation-web-development/banner.png"}],["meta",{"name":"twitter:image:alt","content":"A guide to graceful degradation in web development"}],["meta",{"property":"article:author","content":"Rosario De Chiara"}],["meta",{"property":"article:tag","content":"typsecript"}],["meta",{"property":"article:tag","content":"ts"}],["meta",{"property":"article:tag","content":"blog.logrocket.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2025-02-11T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > A guide to graceful degradation in web development"},{"property":"og:description","content":"A guide to graceful degradation in web development"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/guide-graceful-degradation-web-development.html"}]],"prev":"/programming/ts/articles/README.md","date":"2025-02-11T00:00:00.000Z","isOriginal":false,"author":[{"name":"Rosario De Chiara","url":"https://blog.logrocket.com/author/rosariodechiara/"}],"cover":"/assets/image/blog.logrocket.com/guide-graceful-degradation-web-development/banner.png"},"git":{},"readingTime":{"minutes":5.74,"words":1721},"filePathRelative":"blog.logrocket.com/guide-graceful-degradation-web-development.md","copyright":{"author":"Rosario De Chiara"}}');export{N as comp,C as data};
