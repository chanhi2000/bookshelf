import{_ as g}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as v,d as s,f as t,b as l,a as h,t as b,n as r,g as d,w as p,e as a,r as i,o as f}from"./app-BVguHYKu.js";const w={},y={id:"frontmatter-title-관련",tabindex:"-1"},q={class:"header-anchor",href:"#frontmatter-title-관련"},T={class:"table-of-contents"},j={class:"hint-container note"},x={href:"https://blog.logrocket.com/author/josephmawa/",target:"_blank",rel:"noopener noreferrer"},P={class:"hint-container note"},H={href:"https://jsonplaceholder.typicode.com/users",target:"_blank",rel:"noopener noreferrer"},N={href:"https://github.com/geshan/nodejs-requests",target:"_blank",rel:"noopener noreferrer"},I={href:"https://nodejs.org/api/http.html",target:"_blank",rel:"noopener noreferrer"},A={href:"https://nodejs.org/api/https.html",target:"_blank",rel:"noopener noreferrer"},S={href:"https://github.com/geshan/nodejs-requests/pull/1",target:"_blank",rel:"noopener noreferrer"},O={href:"https://github.com/geshan/nodejs-requests/pull/3/files",target:"_blank",rel:"noopener noreferrer"},E={href:"https://npmjs.com/package/got",target:"_blank",rel:"noopener noreferrer"},R={href:"https://github.com/geshan/nodejs-requests/pull/4/files",target:"_blank",rel:"noopener noreferrer"},D={href:"https://github.com/ladjs/superagent",target:"_blank",rel:"noopener noreferrer"},G={href:"https://github.com/ladjs/superagent#plugins",target:"_blank",rel:"noopener noreferrer"},M={href:"https://developer.mozilla.org/en-US/docs/Glossary/IIFE",target:"_blank",rel:"noopener noreferrer"},C={href:"https://github.com/ladjs/supertest",target:"_blank",rel:"noopener noreferrer"},F={href:"https://github.com/geshan/nodejs-requests/pull/5/files",target:"_blank",rel:"noopener noreferrer"},W={href:"https://npmjs.com/package/node-fetch",target:"_blank",rel:"noopener noreferrer"},Y={href:"https://npmtrends.com/node-fetch",target:"_blank",rel:"noopener noreferrer"},$={href:"https://github.com/geshan/nodejs-requests/pull/6/files",target:"_blank",rel:"noopener noreferrer"},L={href:"https://npmtrends.com/axios-vs-got-vs-superagent-vs-node-fetch",target:"_blank",rel:"noopener noreferrer"},B={href:"https://github.com/sindresorhus/got#comparison",target:"_blank",rel:"noopener noreferrer"},J={href:"https://npmjs.com/package/request",target:"_blank",rel:"noopener noreferrer"};function z(k,n){const u=i("VPCard"),o=i("router-link"),m=i("SiteInfo"),e=i("VPIcon"),c=i("RouteLink");return f(),v("div",null,[s("h1",y,[s("a",q,[s("span",null,b(k.$frontmatter.title)+" 관련",1)])]),t(u,r(d({title:"Node.js > Article(s)",desc:"Article(s)",link:"/programming/js-node/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",T,[s("ul",null,[s("li",null,[t(o,{to:"#the-example-restful-api-we-will-use"},{default:p(()=>n[0]||(n[0]=[a("The example RESTful API we will use")])),_:1,__:[0]})]),s("li",null,[t(o,{to:"#client-options-for-http-requests-in-node-js"},{default:p(()=>n[1]||(n[1]=[a("Client options for HTTP requests in Node.js")])),_:1,__:[1]}),s("ul",null,[s("li",null,[t(o,{to:"#standard-node-js-http-s-module"},{default:p(()=>n[2]||(n[2]=[a("Standard Node.js HTTP(S) module")])),_:1,__:[2]})]),s("li",null,[t(o,{to:"#the-built-in-fetch-api"},{default:p(()=>n[3]||(n[3]=[a("The built-in Fetch API")])),_:1,__:[3]})]),s("li",null,[t(o,{to:"#axios"},{default:p(()=>n[4]||(n[4]=[a("Axios")])),_:1,__:[4]})]),s("li",null,[t(o,{to:"#got"},{default:p(()=>n[5]||(n[5]=[a("Got")])),_:1,__:[5]})]),s("li",null,[t(o,{to:"#superagent"},{default:p(()=>n[6]||(n[6]=[a("superagent")])),_:1,__:[6]})]),s("li",null,[t(o,{to:"#node-fetch"},{default:p(()=>n[7]||(n[7]=[a("node-fetch")])),_:1,__:[7]})])])]),s("li",null,[t(o,{to:"#a-comparison-of-node-http-request-methods"},{default:p(()=>n[8]||(n[8]=[a("A comparison of Node HTTP request methods")])),_:1,__:[8]})]),s("li",null,[t(o,{to:"#implementing-http-services-with-express-js"},{default:p(()=>n[9]||(n[9]=[a("Implementing HTTP services with Express.js")])),_:1,__:[9]})]),s("li",null,[t(o,{to:"#handling-node-https-post-requests"},{default:p(()=>n[10]||(n[10]=[a("Handling Node HTTPS POST requests")])),_:1,__:[10]})]),s("li",null,[t(o,{to:"#conclusion"},{default:p(()=>n[11]||(n[11]=[a("Conclusion")])),_:1,__:[11]})])])]),n[109]||(n[109]=s("hr",null,null,-1)),t(m,{name:"5 ways to make HTTP requests in Node.js",desc:"Make HTTP requests in Node.js using the native module as well as npm packages like Axios, Got, SuperAgent, and node-fetch.",url:"https://blog.logrocket.com/5-ways-make-http-requests-node-js",logo:"/assets/image/blog.logrocket.com/favicon.png",preview:"https://blog.logrocket.com/wp-content/uploads/2024/02/5-ways-make-http-requests-node-js.png"}),s("div",j,[n[15]||(n[15]=s("p",{class:"hint-container-title"},"Editor’s note",-1)),s("p",null,[n[13]||(n[13]=a("This article was last updated by ")),s("a",x,[t(e,{icon:"fas fa-globe"}),n[12]||(n[12]=a("Joseph Maw"))]),n[14]||(n[14]=a("a on 2 February 2024 to include changes made in Node 14, as well as to add information about implementing HTTP services with Express.js, and handling Node HTTPS POST requests."))])]),n[110]||(n[110]=s("figure",null,[s("img",{src:"https://blog.logrocket.com/wp-content/uploads/2024/02/5-ways-make-http-requests-node-js.png",alt:"5 Ways To Make HTTP Requests In Node.js",tabindex:"0",loading:"lazy"}),s("figcaption",null,"5 Ways To Make HTTP Requests In Node.js")],-1)),n[111]||(n[111]=s("p",null,"There are multiple ways to make HTTP requests in Node.js. We can do so by using the standard built-in HTTP/HTTPS modules provided by Node.js, leveraging the Fetch API that’s included in your Node environment, or opting for a third-party npm package to simplify the process.",-1)),n[112]||(n[112]=s("p",null,"In this article, we will explore the native HTTPS module and Fetch API, as well as examine popular npm packages like Axios, Got, superagent, and node-fetch to facilitate making HTTP requests efficiently.",-1)),n[113]||(n[113]=s("p",null,"Let’s get started!",-1)),s("div",P,[n[23]||(n[23]=s("p",{class:"hint-container-title"},"Prerequisites",-1)),n[24]||(n[24]=s("p",null,"Before we dive in, here are some prerequisites:",-1)),s("ul",null,[s("li",null,[n[17]||(n[17]=a("Node.js running on your machine (")),t(c,{to:"/blog.logrocket.com/node-js-docker-improve-dx.html"},{default:p(()=>n[16]||(n[16]=[s("strong",null,"maybe as a Docker container",-1)])),_:1,__:[16]}),n[18]||(n[18]=a("). All the examples require Node.js 14 or later"))]),n[21]||(n[21]=s("li",null,[a("Familiarity with npm commands like "),s("code",null,"npm init"),a(", and you should be able to install npm packages with the "),s("code",null,"npm install <module-name>"),a(" command")],-1)),n[22]||(n[22]=s("li",null,[a("Know how to execute JavaScript files with the "),s("code",null,"node <filename>"),a(" command to see the example output")],-1)),s("li",null,[n[20]||(n[20]=a("Familiarity with JavaScript ")),t(c,{to:"/blog.logrocket.com/evolution-async-programming-javascript.html"},{default:p(()=>n[19]||(n[19]=[s("strong",null,"callbacks, promises, and async/await",-1)])),_:1,__:[19]})])])]),n[114]||(n[114]=s("hr",null,null,-1)),n[115]||(n[115]=s("h2",{id:"the-example-restful-api-we-will-use",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#the-example-restful-api-we-will-use"},[s("span",null,"The example RESTful API we will use")])],-1)),s("p",null,[n[29]||(n[29]=a("We will use each HTTP client to make a GET request to the ")),s("a",H,[t(e,{icon:"fas fa-globe"}),n[25]||(n[25]=a("JSONPlaceholder"))]),n[30]||(n[30]=a(" API. It will send us data for 10 users. We will log each username and ID on the console. You can find the examples from this article in ")),s("a",N,[n[26]||(n[26]=a("this GitHub repository (")),t(e,{icon:"iconfont icon-github"}),n[27]||(n[27]=s("code",null,"geshan/nodejs-requests",-1)),n[28]||(n[28]=a(")"))]),n[31]||(n[31]=a("."))]),n[116]||(n[116]=s("hr",null,null,-1)),n[117]||(n[117]=s("h2",{id:"client-options-for-http-requests-in-node-js",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#client-options-for-http-requests-in-node-js"},[s("span",null,"Client options for HTTP requests in Node.js")])],-1)),n[118]||(n[118]=s("p",null,"We will explore five ways of making GET requests to the placeholder API. Let’s start with the built-in native HTTP(S) module as our first example.",-1)),n[119]||(n[119]=s("h3",{id:"standard-node-js-http-s-module",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#standard-node-js-http-s-module"},[s("span",null,"Standard Node.js HTTP(S) module")])],-1)),s("p",null,[n[34]||(n[34]=a("Node.js comes with built-in ")),s("a",I,[t(e,{icon:"fa-brands fa-node"}),n[32]||(n[32]=a("HTTP"))]),n[35]||(n[35]=a(" and ")),s("a",A,[t(e,{icon:"fa-brands fa-node"}),n[33]||(n[33]=a("HTTPS"))]),n[36]||(n[36]=a(" modules. In the example below, we use the HTTPS module to perform a GET request to the placeholder API:"))]),n[120]||(n[120]=l(`<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> https <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;https&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">https<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;https://jsonplaceholder.typicode.com/users&#39;</span><span class="token punctuation">,</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> headerDate <span class="token operator">=</span> res<span class="token punctuation">.</span>headers <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>date <span class="token operator">?</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>date <span class="token operator">:</span> <span class="token string">&#39;no response date&#39;</span><span class="token punctuation">;</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Status Code:&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Date in Response header:&#39;</span><span class="token punctuation">,</span> headerDate<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span> <span class="token parameter">chunk</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;end&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Response ended: &#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>Buffer<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">for</span><span class="token punctuation">(</span>user <span class="token keyword">of</span> users<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Got user with id: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>user<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Error: &#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Let’s walk through the code. We required the built-in <code>https</code> module, which is available in any standard Node.js installation. There is no need for a <code>package.json</code> file or <code>npm install</code> to start using it.</p><p>We then used the <code>get</code> method to make a network request to the JSONPlaceholder API.</p><p>Next, we initialized <code>data</code> as an empty array and logged the status code and date from the response header. Whenever we get a chunk of data, we push it into the <code>data</code> array.</p><p>After receiving all the responses, we concatenate the data array, convert it to a string, and parse the JSON to get the list of users. We looped through the users and logged the user ID and name to the console.</p>`,5)),s("p",null,[n[40]||(n[40]=a("One thing to note here: if there is an error on the request, the error message is logged on the console. ")),s("a",S,[n[37]||(n[37]=a("The above code is available as a pull request (")),t(e,{icon:"iconfont icon-github"}),n[38]||(n[38]=s("code",null,"geshan/nodejs-requests",-1)),n[39]||(n[39]=a(")"))]),n[41]||(n[41]=a("."))]),s("p",null,[n[42]||(n[42]=a("You can execute the code above using the ")),n[43]||(n[43]=s("code",null,"node native-https.js",-1)),n[44]||(n[44]=a(" command, provided you named the file ")),t(e,{icon:"fa-brands fa-js"}),n[45]||(n[45]=s("code",null,"native-https.js",-1)),n[46]||(n[46]=a(". It should show an output like so:"))]),n[121]||(n[121]=l(`<figure><img src="https://blog.logrocket.com/wp-content/uploads/2021/02/Output-of-node-native-code.png" alt="Output of node native code" tabindex="0" loading="lazy"><figcaption>Output of node native code</figcaption></figure><p>You can use the same method to run all the other examples in this post; they will show a similar output. We print the status code, the date from the response header, and the user ID and name from the response body.</p><p>Next, let’s explore how to make HTTP requests in Node.js using the built-in browser-compatible Fetch API.</p><h3 id="the-built-in-fetch-api" tabindex="-1"><a class="header-anchor" href="#the-built-in-fetch-api"><span>The built-in Fetch API</span></a></h3><p>Node.js shipped an experimental version of the browser-compatible implementation of the Fetch API in v16.15.0 and it became stable in Node v21. Fetch is natively available in the environment, eliminating the need for importation or requiring it separately. This built-in API offers several benefits: there’s no need for ongoing maintenance, security concerns are minimized, and there’s no impact on the bundle size or licensing issues that are often associated with third-party packages.</p><p>You can use the Fetch API with async/await or promise chaining:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;https://jsonplaceholder.typicode.com/users&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> headerDate <span class="token operator">=</span> res<span class="token punctuation">.</span>headers <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;date&#39;</span><span class="token punctuation">)</span> <span class="token operator">?</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;date&#39;</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">&#39;no response date&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Status Code:&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Date in Response header:&#39;</span><span class="token punctuation">,</span> headerDate<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">for</span><span class="token punctuation">(</span>user <span class="token keyword">of</span> users<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Got user with id: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>user<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//can be console.error</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Because the Fetch API is browser-compatible, the code you write for fetching data in the browser using the Fetch API can also be used in Node.js without modification and vice versa.</p>`,8)),s("p",null,[n[47]||(n[47]=a("Next in line for exploration is the Axios npm package — for this, we will need a ")),t(e,{icon:"iconfont icon-json"}),n[48]||(n[48]=s("code",null,"package.json",-1)),n[49]||(n[49]=a(" file."))]),n[122]||(n[122]=s("h3",{id:"axios",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#axios"},[s("span",null,"Axios")])],-1)),s("p",null,[t(c,{to:"/blog.logrocket.com/how-to-make-http-requests-like-a-pro-with-axios.html"},{default:p(()=>n[50]||(n[50]=[s("strong",null,"Axios",-1)])),_:1,__:[50]}),n[51]||(n[51]=a(" is a very popular promise-based request library. It is an HTTP client available for both browsers and Node.js. It also includes handy features like intercepting request and response data, and automatically transforming request and response data to JSON."))]),n[123]||(n[123]=l(`<p>You can install Axios with the following command:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> <span class="token function">install</span> axios</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Then you can use it like so:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> axios <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;axios&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;https://jsonplaceholder.typicode.com/users&#39;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> headerDate <span class="token operator">=</span> res<span class="token punctuation">.</span>headers <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>date <span class="token operator">?</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>date <span class="token operator">:</span> <span class="token string">&#39;no response date&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Status Code:&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Date in Response header:&#39;</span><span class="token punctuation">,</span> headerDate<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">const</span> users <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">for</span><span class="token punctuation">(</span>user <span class="token keyword">of</span> users<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Got user with id: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>user<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Error: &#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>There’s less code in the above example than in the previous one because it uses promise chaining. However, you can turn it into async/await.</p><p>Let’s explain what the above example does. We required the <code>axios</code> library and then used the <code>axios.get</code> method to make a GET request to the JSONPlaceholder API. We used promise chaining to handle the response. In the <code>then</code> method callback, we logged the status code and date to the console.</p><p>Axios transforms the response data into JSON out of the box. The response data in the above example is an array of users. We looped through it and logged the user ID and name to the console.</p>`,7)),s("p",null,[n[55]||(n[55]=a("In case of any error, we logged the error message on the console. The above example is also accessible as a ")),s("a",O,[n[52]||(n[52]=a("pull request (")),t(e,{icon:"iconfont icon-github"}),n[53]||(n[53]=s("code",null,"geshan/nodejs-requests",-1)),n[54]||(n[54]=a(")"))]),n[56]||(n[56]=a("."))]),n[124]||(n[124]=s("p",null,"Next, we will look at Got, another popular and feature-rich library.",-1)),n[125]||(n[125]=s("h3",{id:"got",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#got"},[s("span",null,"Got")])],-1)),s("p",null,[s("a",E,[n[57]||(n[57]=a("Got (")),t(e,{icon:"fa-brands fa-npm"}),n[58]||(n[58]=s("code",null,"got",-1)),n[59]||(n[59]=a(")"))]),n[60]||(n[60]=a(" is another popular HTTP request library for Node.js. Got features a promise-based API, and its HTTP/2 support and pagination API are its unique selling points."))]),n[126]||(n[126]=l(`<p>We can install Got with the following command:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> <span class="token function">install</span> got</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Below is a quick example illustrating how to use Got to fetch users from our mock API:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> got <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;got&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">got<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;https://jsonplaceholder.typicode.com/users&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">responseType</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> headerDate <span class="token operator">=</span> res<span class="token punctuation">.</span>headers <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>date <span class="token operator">?</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>date <span class="token operator">:</span> <span class="token string">&#39;no response date&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Status Code:&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Date in Response header:&#39;</span><span class="token punctuation">,</span> headerDate<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">const</span> users <span class="token operator">=</span> res<span class="token punctuation">.</span>body<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">for</span><span class="token punctuation">(</span>user <span class="token keyword">of</span> users<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Got user with id: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>user<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Error: &#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The code example above is similar to Axios but with two main differences:</p><ol><li>We needed to pass <code>{responseType: &#39;json&#39;}</code> as the second parameter to the <code>get</code> method to indicate that the response was in JSON format</li><li>The status code header was called <code>statusCode</code>, not <code>status</code></li></ol>`,6)),s("p",null,[n[64]||(n[64]=a("Other things remained the same as the previous request with Axios. You can see the above example in ")),s("a",R,[n[61]||(n[61]=a("this pull request (")),t(e,{icon:"iconfont icon-github"}),n[62]||(n[62]=s("code",null,"geshan/nodejs-requests",-1)),n[63]||(n[63]=a(")"))]),n[65]||(n[65]=a("."))]),n[127]||(n[127]=s("p",null,"Next up, we will look at superagent.",-1)),n[128]||(n[128]=s("h3",{id:"superagent",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#superagent"},[s("span",null,"superagent")])],-1)),s("p",null,[s("a",D,[t(e,{icon:"iconfont icon-github"}),n[66]||(n[66]=s("code",null,"ladjs/superagent",-1))]),n[70]||(n[70]=a(", first released in April 2011 by VisionMedia, is one of the oldest Node.js request packages. superagent brands itself as a “small, progressive, client-side HTTP request library and Node.js module with the same API, supporting many high-level HTTP client features.” It offers both callback- and promise-based APIs. ")),s("a",G,[n[67]||(n[67]=a("superagent has several plugins (")),t(e,{icon:"iconfont icon-github"}),n[68]||(n[68]=s("code",null,"ladjs/superagent",-1)),n[69]||(n[69]=a(")"))]),n[71]||(n[71]=a(" you can use to extend its functionality."))]),n[129]||(n[129]=l(`<p>You can install superagent with the following command:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> <span class="token function">install</span> superagent</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,2)),s("p",null,[n[73]||(n[73]=a("Let’s look at what an API call looks like with superagent. We will use async/await with an ")),s("a",M,[t(e,{icon:"fa-brands fa-firefox"}),n[72]||(n[72]=a("Immediately Invoked Function Expression (IIFE)"))]),n[74]||(n[74]=a(" for this illustration instead of promise chaining:"))]),n[130]||(n[130]=l(`<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> superagent <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;superagent&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> superagent<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;https://jsonplaceholder.typicode.com/users&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> headerDate <span class="token operator">=</span> res<span class="token punctuation">.</span>headers <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>date <span class="token operator">?</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>date <span class="token operator">:</span> <span class="token string">&#39;no response date&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Status Code:&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Date in Response header:&#39;</span><span class="token punctuation">,</span> headerDate<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">const</span> users <span class="token operator">=</span> res<span class="token punctuation">.</span>body<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">for</span><span class="token punctuation">(</span>user <span class="token keyword">of</span> users<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Got user with id: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>user<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//can be console.error</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1)),s("p",null,[n[81]||(n[81]=a("superagent is mature and battle-tested, which makes it reliable. We can also test superagent calls with the ")),s("a",C,[n[75]||(n[75]=a("SuperTest library (")),t(e,{icon:"iconfont icon-github"}),n[76]||(n[76]=s("code",null,"ladjs/supertest",-1)),n[77]||(n[77]=a(")"))]),n[82]||(n[82]=a(". Like with the previous examples, the superagent example above is available as a ")),s("a",F,[n[78]||(n[78]=a("pull request (")),t(e,{icon:"iconfont icon-github"}),n[79]||(n[79]=s("code",null,"geshan/nodejs-requests",-1)),n[80]||(n[80]=a(")"))]),n[83]||(n[83]=a("."))]),n[131]||(n[131]=s("p",null,"Now, let’s look at node-fetch.",-1)),n[132]||(n[132]=s("h3",{id:"node-fetch",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#node-fetch"},[s("span",null,"node-fetch")])],-1)),s("p",null,[s("a",W,[t(e,{icon:"fa-brands fa-npm"}),n[84]||(n[84]=s("code",null,"node-fetch",-1))]),n[86]||(n[86]=a(" is another very popular HTTP request library for Node.js — in the first week of February 2024, it was downloaded more than 50 million times, ")),s("a",Y,[t(e,{icon:"fas fa-globe"}),n[85]||(n[85]=a("according to npm trends"))]),n[87]||(n[87]=a("."))]),n[133]||(n[133]=l(`<p>In their own words, “node-fetch is a lightweight module that brings the Fetch API (<code>window.fetch</code>) to Node.js.” Its features include consistency with the browser-based <code>window.fetch</code> and native promise and async functions.</p><p>You can install node-fetch with the command below:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> <span class="token function">install</span> node-fetch</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Let’s look at how to use node-fetch to make HTTP requests. We will also use async/await in the example below to keep things simple:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> fetch <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;node-fetch&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;https://jsonplaceholder.typicode.com/users&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> headerDate <span class="token operator">=</span> res<span class="token punctuation">.</span>headers <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;date&#39;</span><span class="token punctuation">)</span> <span class="token operator">?</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;date&#39;</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">&#39;no response date&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Status Code:&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Date in Response header:&#39;</span><span class="token punctuation">,</span> headerDate<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">for</span><span class="token punctuation">(</span>user <span class="token keyword">of</span> users<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Got user with id: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>user<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//can be console.error</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Let’s review some of the differences here compared to our example of using superagent with async/await:</p><ol><li>node-fetch did not need an explicit GET method; the HTTP verb can be sent as a <code>method</code> key in the second parameter, which is an object. For instance: <code>{method: &#39;GET&#39;}</code></li><li>Another difference is that the header is an object with a <code>get</code> method to get header values. We called <code>res.headers.get(&#39;date&#39;)</code> to get the value of the date response header</li></ol>`,7)),s("p",null,[n[91]||(n[91]=a("As with the other code examples, the example above is accessible as a ")),s("a",$,[n[88]||(n[88]=a("pull request (")),t(e,{icon:"iconfont icon-github"}),n[89]||(n[89]=s("code",null,"geshan/nodejs-requests",-1)),n[90]||(n[90]=a(")"))]),n[92]||(n[92]=a(". Now it’s time to compare the four libraries that we just reviewed."))]),n[134]||(n[134]=s("hr",null,null,-1)),n[135]||(n[135]=s("h2",{id:"a-comparison-of-node-http-request-methods",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#a-comparison-of-node-http-request-methods"},[s("span",null,"A comparison of Node HTTP request methods")])],-1)),s("p",null,[n[94]||(n[94]=a("Except for the built-in HTTP/HTTPS modules and the built-in fetch API, all the other four HTTP client libraries are available as npm packages. Below is a quick overview of their weekly download statistics for the past six months according to ")),s("a",L,[t(e,{icon:"fas fa-globe"}),n[93]||(n[93]=a("npm trends"))]),n[95]||(n[95]=a(":"))]),n[136]||(n[136]=s("figure",null,[s("img",{src:"https://blog.logrocket.com/wp-content/uploads/2021/02/npm-trends-download-statistics-1.png",alt:"NPM Trends Download Statistics",tabindex:"0",loading:"lazy"}),s("figcaption",null,"NPM Trends Download Statistics")],-1)),s("p",null,[n[99]||(n[99]=a("In terms of monthly downloads, node-fetch was the most popular, and superagent was the least popular in the past six months. To gain a more comprehensive understanding of their popularity, let’s examine additional metrics, drawing insights from the comparison table available on the ")),s("a",B,[n[96]||(n[96]=a("Got GitHub repository (")),t(e,{icon:"iconfont icon-github"}),n[97]||(n[97]=s("code",null,"sindresorhus/got",-1)),n[98]||(n[98]=a(")"))]),n[100]||(n[100]=a(":"))]),n[137]||(n[137]=l(`<table><thead><tr><th></th><th><strong>Axios</strong></th><th><strong>Got</strong></th><th><strong>superagent</strong></th><th><strong>node-fetch</strong></th></tr></thead><tbody><tr><td><strong>GitHub stars</strong></td><td>103K</td><td>14K</td><td>17K</td><td>8.6K</td></tr><tr><td><strong>Install size (from packagephobia)</strong></td><td>2.11MB</td><td>757kB</td><td>1.68MB</td><td>7.45MB</td></tr><tr><td><strong>npm downloads (per month)</strong></td><td>213M</td><td>84M</td><td>38M</td><td>222M</td></tr></tbody></table><p>From the above table, node-fetch is the most downloaded package and has the largest install size of 7.45MB. Axios has the most GitHub stars with 103K — more than all three other libraries combined.</p><hr><h2 id="implementing-http-services-with-express-js" tabindex="-1"><a class="header-anchor" href="#implementing-http-services-with-express-js"><span>Implementing HTTP services with Express.js</span></a></h2><p>Express.js is a fast, minimal, unopinionated, and feature-rich Node.js framework. It’s a very popular framework that you can use to create an HTTP server fast.</p><p>After installing Express from the npm package registry, you can create an Express instance and listen for HTTP connections as in the example below:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token constant">PORT</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">3000</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token constant">PORT</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Your app is listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token constant">PORT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>However, the above server will return an HTTP 404 error because we haven’t declared any routes yet. A basic Express.js route takes the form below:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">app<span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">(</span><span class="token constant">PATH</span><span class="token punctuation">,</span> <span class="token constant">HANDLER</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>In the above structure, <code>app</code> is an express instance, <code>METHOD</code> is an HTTP request method, <code>path</code> is a path on the server, and <code>handler</code> is a callback function that runs after matching a route.</p><p>The HTTP request methods include <code>get</code>, <code>post</code>, <code>put</code>, and <code>delete</code>. Therefore, your routes will look like so:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;GET request from /&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;POST request from /&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;PUT request from /user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;DELETE request from /user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Let’s add an index route, <code>/</code>, to the basic Express server we created above so that it returns “Hello world!” instead of the HTTP 404 error when you navigate to <code>http://localhost:3000/</code>:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token constant">PORT</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">3000</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token constant">PORT</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Your app is listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token constant">PORT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,14)),s("p",null,[n[102]||(n[102]=a("That’s how you use Express.js to implement a basic HTTP service. If you want to learn more about features such as serving static assets, mounting a middleware, user authentication, cookies and session management, and error handling in Express.js, check out this ")),t(c,{to:"/blog.logrocket.com/express-js-adoption-guide.html"},{default:p(()=>n[101]||(n[101]=[s("strong",null,"Express.js adoption guide",-1)])),_:1,__:[101]}),n[103]||(n[103]=a(" ."))]),n[138]||(n[138]=l(`<hr><h2 id="handling-node-https-post-requests" tabindex="-1"><a class="header-anchor" href="#handling-node-https-post-requests"><span>Handling Node HTTPS POST requests</span></a></h2><p>In this section, we will explore how to handle POST requests in a Node.js server. A typical POST request occurs when a user submits an HTML form or makes an AJAX POST request.</p><p>When the POST request hits its intended endpoint, you will access the POST data, parse it in your callback function, validate and sanitize the data, and possibly send back a response. However, you should be aware that parsing an HTTP request body can be tedious when working with a plain Node.js server.</p><p>The code below is a basic implementation of a plain Node.js HTTP server. It has a basic HTML form you can use to make a POST request. The structure of the request body depends on the encoding type. These encoding types include <code>application/x-www-form-urlencoded</code>, <code>multipart/form-data</code>, and <code>text/plain</code>:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string"></span>
<span class="line">&lt;!DOCTYPE html&gt;</span>
<span class="line">&lt;html lang=&quot;en&quot;&gt;</span>
<span class="line">  &lt;head&gt;</span>
<span class="line">    &lt;meta charset=&quot;UTF-8&quot; /&gt;</span>
<span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;</span>
<span class="line">    &lt;title&gt;Document&lt;/title&gt;</span>
<span class="line">  &lt;/head&gt;</span>
<span class="line">  &lt;body&gt;</span>
<span class="line">    &lt;form action=&quot;/submit-form&quot; enctype=&quot;application/x-www-form-urlencoded&quot; method=&quot;POST&quot;&gt;</span>
<span class="line">      &lt;label&gt; Enter Name: </span>
<span class="line">        &lt;input type=&quot;text&quot; autocomplete=&quot;name&quot; name=&quot;name&quot; required /&gt;</span>
<span class="line">      &lt;/label&gt;</span>
<span class="line">      &lt;input type=&quot;submit&quot; /&gt;</span>
<span class="line">    &lt;/form&gt;</span>
<span class="line">  &lt;/body&gt;</span>
<span class="line">&lt;/html&gt;</span>
<span class="line"></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">switch</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>method<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token string">&quot;GET&quot;</span><span class="token operator">:</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;Content-Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text/html&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;Content-Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text/plain&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;Page not found&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token string">&quot;POST&quot;</span><span class="token operator">:</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">&quot;/submit-form&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> body <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>
<span class="line">        req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          body <span class="token operator">+=</span> data<span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Request body:  &quot;</span> <span class="token operator">+</span> body<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          <span class="token comment">// Parse, validate, and sanitize</span></span>
<span class="line">          res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;Content-Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;application/json&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> body <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;Content-Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text/plain&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;Page not found&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">default</span><span class="token operator">:</span></span>
<span class="line">      res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">405</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;Content-Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text/plain&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;Method not supported&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token constant">PORT</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">3000</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token constant">PORT</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Your app is listening on PORT </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token constant">PORT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You need to validate and sanitize the data after parsing a POST request body. You can then save the data in a database, authenticate the user, or redirect to an appropriate page.</p><p>Most backend frameworks have built-in features for parsing an HTTP request body. With Express.js, you can use the built-in <code>express.urlencoded()</code> middleware when the request body has the <code>application/x-www-form-urlencoded</code> encoding. The middleware will populate the <code>req.body</code> with key-value pairs of the request data:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token constant">PORT</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">3000</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&quot;public&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/submit-form&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token constant">PORT</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Your app is listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token constant">PORT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>For <code>multipart/form-data</code> encoding, you need to use third-party packages such as busboy, Multer, or formidable.</p><p>The code below illustrates how you can use Multer. Because it is not a built-in middleware, be sure to first install it from the npm package registry:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> multer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;multer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> upload <span class="token operator">=</span> <span class="token function">multer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token constant">PORT</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">3000</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&quot;public&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/submit-form&quot;</span><span class="token punctuation">,</span> upload<span class="token punctuation">.</span><span class="token function">none</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;req.body: &quot;</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type: &quot;</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token constant">PORT</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Your app is listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token constant">PORT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Finally, Express also has a built-in middleware for parsing request bodies with <code>text/plain</code> encoding. Its usage is similar to the previous middleware we looked at. You can mount it like so:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h2><p>In the past, I used superagent quite extensively; after that, I moved to Axios. With its long feature list, I want to give Got a try soon. Even though node-fetch looks promising and has a small install size, I am not sure if the API is user-friendly enough — at least for me.</p>`,17)),s("p",null,[n[107]||(n[107]=a("You might notice the omission of the ")),s("a",J,[n[104]||(n[104]=a("Request npm package (")),t(e,{icon:"fa-brands fa-npm"}),n[105]||(n[105]=s("code",null,"request",-1)),n[106]||(n[106]=a(")"))]),n[108]||(n[108]=a(" in my discussion. Despite its continued popularity, with 11.42 million weekly downloads, Request has been deprecated as of February 2024, rendering it an impractical choice."))]),n[139]||(n[139]=s("p",null,"All these libraries mainly do the same thing — much like which brand of coffee you prefer, in the end, you are still drinking coffee. Choose wisely depending on your use case, and make the right tradeoffs for maximum benefit.",-1)),h(" TODO: add ARTICLE CARD "),t(u,r(d({title:"5 ways to make HTTP requests in Node.js",desc:"Make HTTP requests in Node.js using the native module as well as npm packages like Axios, Got, SuperAgent, and node-fetch.",link:"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/5-ways-make-http-requests-node-js.html",logo:"/assets/image/blog.logrocket.com/favicon.png",background:"rgba(112,76,182,0.2)"})),null,16)])}const U=g(w,[["render",z]]),Z=JSON.parse('{"path":"/blog.logrocket.com/5-ways-make-http-requests-node-js.html","title":"5 ways to make HTTP requests in Node.js","lang":"en-US","frontmatter":{"lang":"en-US","title":"5 ways to make HTTP requests in Node.js","description":"Article(s) > 5 ways to make HTTP requests in Node.js","icon":"fa-brands fa-node","category":["Node.js","Article(s)"],"tag":["blog","blog.logrocket.com","node","nodejs","node-js"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"5 ways to make HTTP requests in Node.js\\",\\"image\\":[\\"https://blog.logrocket.com/wp-content/uploads/2024/02/5-ways-make-http-requests-node-js.png\\",\\"https://blog.logrocket.com/wp-content/uploads/2021/02/Output-of-node-native-code.png\\",\\"https://blog.logrocket.com/wp-content/uploads/2021/02/npm-trends-download-statistics-1.png\\"],\\"datePublished\\":\\"2024-02-02T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Geshan Manandhar\\",\\"url\\":\\"https://blog.logrocket.com/author/geshanmanandhar/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/5-ways-make-http-requests-node-js.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"5 ways to make HTTP requests in Node.js"}],["meta",{"property":"og:description","content":"Article(s) > 5 ways to make HTTP requests in Node.js"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://blog.logrocket.com/wp-content/uploads/2024/02/5-ways-make-http-requests-node-js.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://blog.logrocket.com/wp-content/uploads/2024/02/5-ways-make-http-requests-node-js.png"}],["meta",{"name":"twitter:image:alt","content":"5 ways to make HTTP requests in Node.js"}],["meta",{"property":"article:author","content":"Geshan Manandhar"}],["meta",{"property":"article:tag","content":"node-js"}],["meta",{"property":"article:tag","content":"nodejs"}],["meta",{"property":"article:tag","content":"node"}],["meta",{"property":"article:tag","content":"blog.logrocket.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2024-02-02T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > 5 ways to make HTTP requests in Node.js"},{"property":"og:description","content":"5 ways to make HTTP requests in Node.js"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/5-ways-make-http-requests-node-js.html"}]],"prev":"/programming/js-node/articles/README.md","date":"2024-02-02T00:00:00.000Z","isOriginal":false,"author":[{"name":"Geshan Manandhar","url":"https://blog.logrocket.com/author/geshanmanandhar/"}],"cover":"https://blog.logrocket.com/wp-content/uploads/2024/02/5-ways-make-http-requests-node-js.png"},"git":{},"readingTime":{"minutes":11.42,"words":3425},"filePathRelative":"blog.logrocket.com/5-ways-make-http-requests-node-js.md","copyright":{"author":"Geshan Manandhar"}}');export{U as comp,Z as data};
