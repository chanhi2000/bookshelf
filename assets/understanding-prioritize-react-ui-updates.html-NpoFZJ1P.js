import{_ as m}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as h,d as s,f as t,b as i,a as u,t as v,n as r,g as d,w as e,e as a,r as l,o as b}from"./app-BVguHYKu.js";const f="/bookshelf/assets/image/blog.logrocket.com/understanding-prioritize-react-ui-updates/banner.png",y={},w={id:"frontmatter-title-관련",tabindex:"-1"},x={class:"header-anchor",href:"#frontmatter-title-관련"},U={class:"table-of-contents"};function T(k,n){const c=l("VPCard"),o=l("router-link"),g=l("SiteInfo"),p=l("RouteLink");return b(),h("div",null,[s("h1",w,[s("a",x,[s("span",null,v(k.$frontmatter.title)+" 관련",1)])]),t(c,r(d({title:"React.js > Article(s)",desc:"Article(s)",link:"/programming/js-react/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",U,[s("ul",null,[s("li",null,[t(o,{to:"#why-prioritize-ui-updates-at-all"},{default:e(()=>n[0]||(n[0]=[a("Why prioritize UI updates at all?")])),_:1,__:[0]})]),s("li",null,[t(o,{to:"#how-does-the-usetransition-hook-help"},{default:e(()=>n[1]||(n[1]=[a("How does the useTransition() Hook help?")])),_:1,__:[1]})]),s("li",null,[t(o,{to:"#considerations-when-using-usetransition"},{default:e(()=>n[2]||(n[2]=[a("Considerations when using useTransition()")])),_:1,__:[2]})]),s("li",null,[t(o,{to:"#deferring-state-updates-with-the-usedeferredvalue-hook"},{default:e(()=>n[3]||(n[3]=[a("Deferring state updates with the useDeferredValue() Hook")])),_:1,__:[3]})]),s("li",null,[t(o,{to:"#conclusion"},{default:e(()=>n[4]||(n[4]=[a("Conclusion")])),_:1,__:[4]})])])]),n[28]||(n[28]=s("hr",null,null,-1)),t(g,{name:"Understanding when and how to prioritize React UI updates",desc:"Use the useTransition() and useDeferredValue() Hooks in your next React project to help you prioritize the UI updates on the client side.",url:"https://blog.logrocket.com/understanding-prioritize-react-ui-updates",logo:"/assets/image/blog.logrocket.com/favicon.png",preview:"/assets/image/blog.logrocket.com/understanding-prioritize-react-ui-updates/banner.png"}),n[29]||(n[29]=i('<p>React v18 provided two new Hooks — <code>useTransition()</code> and <code>useDeferredValue()</code> — to help you prioritize the UI updates on the client side. You can now explicitly give priority to a certain user interaction that is sluggish and slow over other UI updates.</p><figure><img src="'+f+'" alt="Understanding When And How To Prioritize React Ui Updates" tabindex="0" loading="lazy"><figcaption>Understanding When And How To Prioritize React Ui Updates</figcaption></figure><p>This behavior will ensure that any heavy UI updates are smooth, while less significant UI updates can be done in parallel or once the higher-priority updates finish. In this article, we will explore how to use the <code>useTransition()</code> and <code>useDeferredValue()</code> Hooks in your next project.</p><hr><h2 id="why-prioritize-ui-updates-at-all" tabindex="-1"><a class="header-anchor" href="#why-prioritize-ui-updates-at-all"><span>Why prioritize UI updates at all?</span></a></h2>',5)),s("p",null,[n[6]||(n[6]=a("Prioritizing UI updates is one way to ")),t(p,{to:"/blog.logrocket.com/optimizing-performance-react-application.html"},{default:e(()=>n[5]||(n[5]=[s("strong",null,"optimize performance in a React application",-1)])),_:1,__:[5]}),n[7]||(n[7]=a(". While working with complex state updates, you will likely encounter situations where a certain UI update is slow due to the intensive computations performed on the client side."))]),n[30]||(n[30]=s("p",null,"For example, imagine that you have a list of 10,000 products rendered on the screen and you want to implement a search functionality based on the product name.",-1)),s("p",null,[n[9]||(n[9]=a("Ideally, you should never render 10,000 items at once, but either use ")),t(p,{to:"/blog.logrocket.com/react-pagination-scratch-hooks.html"},{default:e(()=>n[8]||(n[8]=[s("strong",null,"some kind of pagination",-1)])),_:1,__:[8]}),n[10]||(n[10]=a(" or ")),n[11]||(n[11]=s("a",{href:"https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/",target:"_blank",rel:"noopener noreferrer"},"lazy loading technique",-1)),n[12]||(n[12]=a(". But for sake of this example, suppose all the items are rendered on the screen at once."))]),u(" TODO: /blog.logrocket.com/lazy-loading-components-in-react-16-6.md "),n[31]||(n[31]=s("p",null,[a("Now, when you implement a search functionality and bind it to the "),s("code",null,"onChange"),a(" event, the text you enter in the input box itself would be quite laggy. This is because each keystroke is responsible for updating and rendering a large number of products in the list.")],-1)),n[32]||(n[32]=s("p",null,"This is a perfect use case for prioritizing keystroke UI updates over the rendering of the lists below. You want to ensure that there is no delay in typing in the textbox, but a delay of a few microseconds in rendering the list is tolerable in terms of the user’s experience.",-1)),n[33]||(n[33]=s("hr",null,null,-1)),n[34]||(n[34]=s("h2",{id:"how-does-the-usetransition-hook-help",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#how-does-the-usetransition-hook-help"},[s("span",null,[a("How does the "),s("code",null,"useTransition()"),a(" Hook help?")])])],-1)),s("p",null,[n[14]||(n[14]=a("React v18 solves the problem in our example above by ")),t(p,{to:"/blog.logrocket.com/getting-started-react-18-starttransition.html"},{default:e(()=>n[13]||(n[13]=[s("strong",null,[a("providing a unique Hook called "),s("code",null,"useTransition")],-1)])),_:1,__:[13]}),n[15]||(n[15]=a("`. You can simply use this Hook to wrap the event responsible for the textbox UI keystroke updates."))]),n[35]||(n[35]=i(`<p>The <code>useTransition</code> Hook returns an array with two variables:</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">const</span> <span class="token punctuation">[</span> isPending<span class="token punctuation">,</span> startTransition <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useTransition</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The first variable is a boolean that tells you if a non-blocking UI update is pending.</p><p>The second variable is a function that can wrap your state update for “transition” — meaning that particular transition is of higher priority and will be executed as a non-blocking UI state update.</p><p>In the example described above, you have an input box and an <code>onChange</code> event handler attached to it:</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>search<span class="token punctuation">,</span> setSearch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">function</span> <span class="token function">handleFilterChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">setSearch</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>search<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleFilterChange<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span> </span>
<span class="line">  <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It should look something like the below:</p><figure><img src="https://blog.logrocket.com/wp-content/uploads/2023/04/List-numbered-items-search-bar.png" alt="List Of Numbered Items Displayed Under Empty Search Bar" tabindex="0" loading="lazy"><figcaption>List Of Numbered Items Displayed Under Empty Search Bar</figcaption></figure><p>You can improve the sluggish input by using the <code>useTransition</code> Hook like so:</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">function</span> <span class="token function">handleFilterChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">startTransition</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">setSearch</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now, the <code>setSearch(e.target.value)</code> UI update will be treated as a transition.</p><p>You can always use the first variable that the <code>useTransition</code> Hook provides to check if the transition is pending. The <code>isPending</code> variable can be later used to show a pending transition in your main <code>App</code> component.</p><p>Here is the complete code implementing the <code>useTransition</code> Hook to improve the user experience while typing in the input box:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="App.jsx"><span>App.jsx</span></div><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> List <span class="token keyword">from</span> <span class="token string">&quot;./List&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/** </span>
<span class="line"> * create a dummy list of 10000 items, simulating a large number of products.</span>
<span class="line"> */</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">dummyList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Item </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">return</span> items<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token function">dummyList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">filterItems</span><span class="token punctuation">(</span><span class="token parameter">search</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>search<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> list<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">product</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> product<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>filterTerm<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/*</span>
<span class="line">create a \`List\` functional component that would later be used to map over a list of items under the \`App\` component.</span>
<span class="line">*/</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">List</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> items <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token punctuation">{</span>items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>isPending<span class="token punctuation">,</span> startTransition<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useTransition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>search<span class="token punctuation">,</span> setSearch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">const</span> searchedItems <span class="token operator">=</span> <span class="token function">filterItems</span><span class="token punctuation">(</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">function</span> <span class="token function">handleFilterChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">startTransition</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">     <span class="token comment">// wrapping setSearch in </span></span>
<span class="line">        <span class="token function">setSearch</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">// setSearch(event.target.value); -&gt; This is now redundant</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>search<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleFilterChange<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">      // \`isPending\` boolean can be used to track your transition state</span>
<span class="line">       </span><span class="token punctuation">{</span>isPending <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Loading...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">      // render a list of items and pass a prop with the filtered items</span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List</span></span> <span class="token attr-name">items</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>searchedItems<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>You can check out the result below:</p><figure><img src="https://blog.logrocket.com/wp-content/uploads/2023/04/User-typing-search-bar-filter-results-update-list.gif" alt="User Shown Typing Into Search Bar To Filter Through List Of Numbered Items. Updated Results Render After Slight Delay While Typing In Search Bar Occurs Immediately As The Prioritized Ui Update" tabindex="0" loading="lazy"><figcaption>User Shown Typing Into Search Bar To Filter Through List Of Numbered Items. Updated Results Render After Slight Delay While Typing In Search Bar Occurs Immediately As The Prioritized Ui Update</figcaption></figure><hr><h2 id="considerations-when-using-usetransition" tabindex="-1"><a class="header-anchor" href="#considerations-when-using-usetransition"><span>Considerations when using <code>useTransition()</code></span></a></h2>`,18)),s("p",null,[n[17]||(n[17]=a("One important thing to note here is that the ")),n[18]||(n[18]=s("code",null,"input",-1)),n[19]||(n[19]=a(" component is ")),t(p,{to:"/blog.logrocket.com/controlled-vs-uncontrolled-components-in-react.html"},{default:e(()=>n[16]||(n[16]=[s("strong",null,"an uncontrolled component",-1)])),_:1,__:[16]}),n[20]||(n[20]=a(". This works in this example, since you don’t want the state value to be in sync with the input value; instead, you want ")),n[21]||(n[21]=s("code",null,"setSearch(e.target.value)",-1)),n[22]||(n[22]=a(" to be handled as the higher priority."))]),n[36]||(n[36]=i(`<p>That being said, <code>useTransition</code> cannot work with a controlled input component, as both the typed-in value and the filter result would be in sync. This would result in the same initial problem — i.e., the sluggish behavior due to a large number of list items.</p><p>React itself considers using the <code>useTransition</code> Hook in a controlled component as an anti-pattern. The code below is an anti-pattern and should not be used at all:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="App.jsx"><span>App.jsx</span></div><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>search<span class="token punctuation">,</span> setSearch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">function</span> <span class="token function">handleFilterChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">startTransition</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">setSearch</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token punctuation">{</span><span class="token comment">// ❌Never do this with controlled component}</span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>search<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>search<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleFilterChange<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Therefore, while the <code>useTransition</code> Hook can be great for handling state updates, it should be a last resort or a trick that you should only use when you have slow UI updates. This is especially true when dealing with older devices with slow CPUs.</p><p>Most of the UI updates can be handled with React itself if done correctly. There is also another Hook called <code>useDeferredValue</code> that was introduced in React v18, which solves a very similar set of problems and can be used if you do not have control over state calls, as in this example:</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List</span></span> <span class="token attr-name">items</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>searchedItems<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="deferring-state-updates-with-the-usedeferredvalue-hook" tabindex="-1"><a class="header-anchor" href="#deferring-state-updates-with-the-usedeferredvalue-hook"><span>Deferring state updates with the <code>useDeferredValue()</code> Hook</span></a></h2>`,8)),s("p",null,[t(p,{to:"/blog.logrocket.com/react-hooks-cheat-sheet-solutions-common-problems.html#usedeferredvalue"},{default:e(()=>n[23]||(n[23]=[s("strong",null,[a("The "),s("code",null,"useDeferredvalue"),a(" Hook")],-1)])),_:1,__:[23]}),n[24]||(n[24]=a(", as the name suggests, helps you in “deferring” a state update."))]),n[37]||(n[37]=i(`<p>In the example above, you can also use this Hook if you do not have control over how the list state is being called, but can only manipulate the <code>List</code> component. In that case, you can pass the <code>items</code> prop to the <code>useDeferredValue</code> Hook and map over it instead of directly on <code>items</code>, like so:</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx"><pre><code class="language-jsx"><span class="line"><span class="token keyword">function</span> <span class="token function">List</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> items <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> deferredItems <span class="token operator">=</span> <span class="token function">useDeferredValue</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token punctuation">{</span>deferredItems<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2)),s("p",null,[n[26]||(n[26]=a("This would ensure that the input updates are quick and snappy while the list takes a while to update. You might have seen this behavior if you have used ")),t(p,{to:"/blog.logrocket.com/how-and-when-to-debounce-or-throttle-in-react.html"},{default:e(()=>n[25]||(n[25]=[s("strong",null,"debouncing in search functionality",-1)])),_:1,__:[25]}),n[27]||(n[27]=a(". This Hook behaves exactly like that, but by deferring list UI updates on each keystroke."))]),n[38]||(n[38]=i('<p>If in general, you have control over state calls, it is a better idea to use the <code>useTransition</code> Hook. Otherwise, you can always delay a UI update from the <code>List</code> component itself, somewhat like the debounce method.</p><p>You should never mix and match the <code>useDeferredValue</code> and <code>useTransition</code> Hooks together, as they both are solving the same problem.</p><p>However, you might likely want to use <code>useDeferredValue</code> along with debouncing or throttling, which can further improve the user experience and save some network calls while the user is interacting with the input box.</p><hr><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h2><p>The <code>useTransition</code> and <code>useDeferredValue</code> Hooks can be very useful in solving those slow and laggy UI updates that are caused by either a slow CPU performance or due to external factors like API itself.</p><p>Always keep in mind that prioritizing UI updates should be a last resort. You should always first try to design a performant UI with good code practices and React patterns.</p>',7)),u(" TODO: add ARTICLE CARD "),t(c,r(d({title:"Understanding when and how to prioritize React UI updates",desc:"Use the useTransition() and useDeferredValue() Hooks in your next React project to help you prioritize the UI updates on the client side.",link:"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/understanding-prioritize-react-ui-updates.html",logo:"/assets/image/blog.logrocket.com/favicon.png",background:"rgba(112,76,182,0.2)"})),null,16)])}const z=m(y,[["render",T]]),R=JSON.parse('{"path":"/blog.logrocket.com/understanding-prioritize-react-ui-updates.html","title":"Understanding when and how to prioritize React UI updates","lang":"en-US","frontmatter":{"lang":"en-US","title":"Understanding when and how to prioritize React UI updates","description":"Article(s) > Understanding when and how to prioritize React UI updates","icon":"fa-brands fa-react","category":["Node.js","React.js","Article(s)"],"tag":["blog","blog.logrocket.com","node","nodejs","node-js","react","reactjs","react-js"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Understanding when and how to prioritize React UI updates\\",\\"image\\":[\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/understanding-prioritize-react-ui-updates/banner.png\\",\\"https://blog.logrocket.com/wp-content/uploads/2023/04/List-numbered-items-search-bar.png\\",\\"https://blog.logrocket.com/wp-content/uploads/2023/04/User-typing-search-bar-filter-results-update-list.gif\\"],\\"datePublished\\":\\"2023-04-17T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Abhinav Anshul\\",\\"url\\":\\"https://blog.logrocket.com/author/abhinavanshul/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/understanding-prioritize-react-ui-updates.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"Understanding when and how to prioritize React UI updates"}],["meta",{"property":"og:description","content":"Article(s) > Understanding when and how to prioritize React UI updates"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/understanding-prioritize-react-ui-updates/banner.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/understanding-prioritize-react-ui-updates/banner.png"}],["meta",{"name":"twitter:image:alt","content":"Understanding when and how to prioritize React UI updates"}],["meta",{"property":"article:author","content":"Abhinav Anshul"}],["meta",{"property":"article:tag","content":"react-js"}],["meta",{"property":"article:tag","content":"reactjs"}],["meta",{"property":"article:tag","content":"react"}],["meta",{"property":"article:tag","content":"node-js"}],["meta",{"property":"article:tag","content":"nodejs"}],["meta",{"property":"article:tag","content":"node"}],["meta",{"property":"article:tag","content":"blog.logrocket.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2023-04-17T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Understanding when and how to prioritize React UI updates"},{"property":"og:description","content":"Understanding when and how to prioritize React UI updates"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/understanding-prioritize-react-ui-updates.html"}]],"prev":"/programming/js-react/articles/README.md","date":"2023-04-17T00:00:00.000Z","isOriginal":false,"author":[{"name":"Abhinav Anshul","url":"https://blog.logrocket.com/author/abhinavanshul/"}],"cover":"/assets/image/blog.logrocket.com/understanding-prioritize-react-ui-updates/banner.png"},"git":{},"readingTime":{"minutes":5.47,"words":1641},"filePathRelative":"blog.logrocket.com/understanding-prioritize-react-ui-updates.md","copyright":{"author":"Abhinav Anshul"}}');export{z as comp,R as data};
