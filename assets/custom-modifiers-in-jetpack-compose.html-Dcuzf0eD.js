import{_ as h}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as v,d as s,f as e,b as p,a as l,t as b,n as d,g as u,w as t,e as a,r as i,o as g}from"./app-BVguHYKu.js";const y={},w={id:"frontmatter-title-관련",tabindex:"-1"},C={class:"header-anchor",href:"#frontmatter-title-관련"},M={class:"table-of-contents"},x={class:"hint-container info"},N={href:"https://engineering.teknasyon.com/composable-modifier-vs-composed-factory-in-jetpack-compose-6cbb675b0e7b",target:"_blank",rel:"noopener noreferrer"},T={class:"hint-container info"},A={href:"https://youtu.be/BjGX2RftXsU",target:"_blank",rel:"noopener noreferrer"};function F(m,n){const c=i("VPCard"),o=i("router-link"),k=i("SiteInfo"),r=i("VPIcon"),f=i("VidStack");return g(),v("div",null,[s("h1",w,[s("a",C,[s("span",null,b(m.$frontmatter.title)+" 관련",1)])]),e(c,d(u({title:"Android > Article(s)",desc:"Article(s)",link:"/programming/java-android/articles/README.md",logo:"https://chanhi2000.github.io/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",M,[s("ul",null,[s("li",null,[e(o,{to:"#using-composed-to-create-custom-modifiers"},{default:t(()=>n[0]||(n[0]=[a("Using composed() to Create Custom Modifiers")])),_:1,__:[0]})]),s("li",null,[e(o,{to:"#using-composable-modifier-factory-to-create-custom-modifiers"},{default:t(()=>n[1]||(n[1]=[a("Using @Composable Modifier Factory to Create Custom Modifiers")])),_:1,__:[1]})]),s("li",null,[e(o,{to:"#the-recommended-way-new-modifier-node-api"},{default:t(()=>n[2]||(n[2]=[a("The Recommended Way: New Modifier.Node API")])),_:1,__:[2]})]),s("li",null,[e(o,{to:"#modifier-node"},{default:t(()=>n[3]||(n[3]=[a("Modifier.Node")])),_:1,__:[3]})]),s("li",null,[e(o,{to:"#modifiernodeelement"},{default:t(()=>n[4]||(n[4]=[a("ModifierNodeElement:")])),_:1,__:[4]})]),s("li",null,[e(o,{to:"#modifier-factory"},{default:t(()=>n[5]||(n[5]=[a("Modifier Factory")])),_:1,__:[5]})])])]),n[15]||(n[15]=s("hr",null,null,-1)),e(k,{name:"Custom modifiers in Jetpack Compose",desc:"Modifiers in Jetpack Compose are a powerful tool for customising and enhancing UI components. They allow developers to modify the appearance, behaviour, and layout of composable functions without changing their core implementation.",url:"https://droidcon.com/custom-modifiers-in-jetpack-compose",logo:"https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png",preview:"https://droidcon.com/wp-content/uploads/2024/11/1_Oe-DGannPg34NnFtp02TjA.webp"}),n[16]||(n[16]=p(`<p>Modifiers in Jetpack Compose are a powerful tool for customising and enhancing UI components. They allow developers to modify the appearance, behaviour, and layout of composable functions without changing their core implementation.</p><div class="hint-container important"><p class="hint-container-title">Key aspects of modifiers</p><ul><li><strong>Chainable:</strong> Modifiers can be chained together, allowing for multiple modifications to be applied sequentially.</li><li><strong>Reusable:</strong> Custom modifiers can be created and reused across different components, promoting code reusability.</li><li><strong>Extensible:</strong> Developers can create their own custom modifiers to add specific functionality.</li></ul></div><p>The Reusable and Extensible aspects is what make modifiers super powerful. Hence in this blog we’ll be looking at how to create custom modifiers.</p><div class="hint-container important"><p class="hint-container-title">Three Ways</p><ol><li><code>composed { }</code></li><li><code>@Composable</code> modifier factory</li><li>Modifier.Node API</li></ol></div><hr><h2 id="using-composed-to-create-custom-modifiers" tabindex="-1"><a class="header-anchor" href="#using-composed-to-create-custom-modifiers"><span>Using <code>composed()</code> to Create Custom Modifiers</span></a></h2><p>The <code>composed()</code> function is a convenient way to create custom modifiers in Jetpack Compose. It allows you to define a modifier that can contain composable content.</p><p>Here’s a basic structure of using <code>composed()</code>:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">fun</span> Modifier<span class="token punctuation">.</span><span class="token function">customModifier</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token comment">// parameters</span></span>
<span class="line"><span class="token punctuation">)</span> <span class="token operator">=</span> composed <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Your custom modifier logic here</span></span>
<span class="line">  <span class="token comment">// Can include other composables</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token comment">// Additional modifiers</span></span>
<span class="line">  <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Key points about using <code>composed()</code>:</p><ul><li><strong>Composable context:</strong> Inside <code>composed{}</code>, you have access to the composable context, allowing you to use other <code>@Composable</code> functions.</li><li><strong>State observation:</strong> You can observe state and trigger recomposition when needed.</li><li><strong>Chaining:</strong> Use <code>this.then()</code> to chain additional modifiers.</li></ul><p>Example of a custom modifier using <code>composed()</code>:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="shimmer.kt"><span>shimmer.kt</span></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">fun</span> Modifier<span class="token punctuation">.</span><span class="token function">shimmerEffect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> composed <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">val</span> size <span class="token operator">=</span> remember <span class="token punctuation">{</span> <span class="token function">mutableStateOf</span><span class="token punctuation">(</span><span class="token function">IntSize</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">val</span> transition <span class="token operator">=</span> <span class="token function">rememberInfiniteTransition</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">val</span> startOffsetX <span class="token operator">=</span> transition<span class="token punctuation">.</span><span class="token function">animateFloat</span><span class="token punctuation">(</span></span>
<span class="line">        initialValue <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">2</span> <span class="token operator">*</span> size<span class="token punctuation">.</span>value<span class="token punctuation">.</span>width<span class="token punctuation">.</span><span class="token function">toFloat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        targetValue <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> size<span class="token punctuation">.</span>value<span class="token punctuation">.</span>width<span class="token punctuation">.</span><span class="token function">toFloat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        animationSpec <span class="token operator">=</span> <span class="token function">infiniteRepeatable</span><span class="token punctuation">(</span></span>
<span class="line">            animation <span class="token operator">=</span> <span class="token function">tween</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">background</span><span class="token punctuation">(</span></span>
<span class="line">        brush <span class="token operator">=</span> Brush<span class="token punctuation">.</span><span class="token function">linearGradient</span><span class="token punctuation">(</span></span>
<span class="line">            colors <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span></span>
<span class="line">                <span class="token function">Color</span><span class="token punctuation">(</span><span class="token number">0xFFB8B5B5</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token function">Color</span><span class="token punctuation">(</span><span class="token number">0xFF8F8B8B</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token function">Color</span><span class="token punctuation">(</span><span class="token number">0xFFB8B5B5</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            start <span class="token operator">=</span> <span class="token function">Offset</span><span class="token punctuation">(</span>startOffsetX<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            end <span class="token operator">=</span> <span class="token function">Offset</span><span class="token punctuation">(</span>startOffsetX<span class="token punctuation">.</span>value <span class="token operator">+</span> size<span class="token punctuation">.</span>value<span class="token punctuation">.</span>width<span class="token punctuation">.</span><span class="token function">toFloat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> size<span class="token punctuation">.</span>value<span class="token punctuation">.</span>height<span class="token punctuation">.</span><span class="token function">toFloat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onGloballyPositioned</span> <span class="token punctuation">{</span></span>
<span class="line">        size<span class="token punctuation">.</span>value <span class="token operator">=</span> it<span class="token punctuation">.</span>size</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>This example creates a shimmer effect modifier that can be applied to any composable to add a shimmering animation.</p><hr><h2 id="using-composable-modifier-factory-to-create-custom-modifiers" tabindex="-1"><a class="header-anchor" href="#using-composable-modifier-factory-to-create-custom-modifiers"><span>Using <code>@Composable</code> Modifier Factory to Create Custom Modifiers</span></a></h2><p>Another approach to creating custom modifiers in Jetpack Compose is using <code>@Composable</code> modifier factories. This method allows you to create modifiers that can use other <code>@Composable</code> functions and observe state changes.</p><p>Here’s the basic structure of a <code>@Composable</code> modifier factory:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token annotation builtin">@Composable</span></span>
<span class="line"><span class="token keyword">fun</span> Modifier<span class="token punctuation">.</span><span class="token function">customModifier</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token comment">// parameters</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> Modifier <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Your custom modifier logic here</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token comment">// Additional modifiers</span></span>
<span class="line">  <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Key points about using @Composable modifier factories:</p><ul><li><strong>Composable context:</strong> The function is marked with @Composable, giving you access to other composable functions and state.</li><li><strong>Return type:</strong> The function explicitly returns a Modifier.</li><li><strong>Flexibility:</strong> You can use remember, derivedStateOf, and other composable functions within the modifier.</li></ul><p>Example of a custom modifier using @Composable modifier factory:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="pulsating.kt"><span>pulsating.kt</span></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token annotation builtin">@Composable</span></span>
<span class="line"><span class="token keyword">fun</span> Modifier<span class="token punctuation">.</span><span class="token function">pulsatingScale</span><span class="token punctuation">(</span></span>
<span class="line">    pulseFraction<span class="token operator">:</span> Float <span class="token operator">=</span> <span class="token number">1.2f</span><span class="token punctuation">,</span></span>
<span class="line">    duration<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">1000</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> Modifier <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">val</span> infiniteTransition <span class="token operator">=</span> <span class="token function">rememberInfiniteTransition</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">val</span> scale <span class="token operator">=</span> infiniteTransition<span class="token punctuation">.</span><span class="token function">animateFloat</span><span class="token punctuation">(</span></span>
<span class="line">        initialValue <span class="token operator">=</span> <span class="token number">1f</span><span class="token punctuation">,</span></span>
<span class="line">        targetValue <span class="token operator">=</span> pulseFraction<span class="token punctuation">,</span></span>
<span class="line">        animationSpec <span class="token operator">=</span> <span class="token function">infiniteRepeatable</span><span class="token punctuation">(</span></span>
<span class="line">            animation <span class="token operator">=</span> <span class="token function">tween</span><span class="token punctuation">(</span>duration<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            repeatMode <span class="token operator">=</span> RepeatMode<span class="token punctuation">.</span>Reverse</span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token function">scale</span><span class="token punctuation">(</span>scale<span class="token punctuation">.</span>value<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div>`,23)),l(" @include: https://gist.github.com/itsSiddharthGupta/d934cf90ed70cbcdf20bd583b76628dd/raw/f4f3c3889f315989b920a116b82dd90f7bb4332d/pulsating.kt "),n[17]||(n[17]=s("p",null,"This example creates a pulsating scale effect modifier that can be applied to any composable to add a pulsating animation. The scale and duration of the pulse can be customised through parameters.",-1)),s("div",x,[n[9]||(n[9]=s("p",{class:"hint-container-title"},"Info",-1)),s("p",null,[n[7]||(n[7]=a("This is an excellent ")),s("a",N,[e(r,{icon:"fas fa-globe"}),n[6]||(n[6]=a("article"))]),n[8]||(n[8]=a(" which explains the key differences b/w the 2 approaches. Here is the summary:"))]),n[10]||(n[10]=s("ol",null,[s("li",null,[s("strong",null,"Extractability"),a(": CMF is limited to use within the Composition scope, while composed() can be extracted and used more flexibly.")]),s("li",null,[s("strong",null,"CompositionLocal resolution"),a(": CMF resolves CompositionLocal values at the call site, while composed() resolves them at the usage site.")]),s("li",null,[s("strong",null,"State resolution"),a(": CMF resolves state only once at the call site, while composed() resolves state at the usage site for each Layout.")]),s("li",null,[s("strong",null,"Performance"),a(": CMF performs better than composed() due to avoiding the expensive materialize() call.")])],-1))]),n[18]||(n[18]=p('<hr><h2 id="the-recommended-way-new-modifier-node-api" tabindex="-1"><a class="header-anchor" href="#the-recommended-way-new-modifier-node-api"><span>The Recommended Way: New Modifier.Node API</span></a></h2><p>As we can see above, creating custom modifiers using <code>composed { }</code> makes more sense than using the <strong>CMF</strong> approach. Using <strong>CMF</strong> is ideal when you need inline modifiers or extract a modifier for using it in only one component. On the other hand, <strong>composed</strong> is useful when designing generic modifiers.</p><p>But here’s the catch, the <strong>composed</strong> way has few performance issues and the new recommended way of creating custom modifiers is to use the Modifier.Node API.</p>',4)),s("div",T,[n[14]||(n[14]=s("p",{class:"hint-container-title"},"Info",-1)),s("p",null,[n[12]||(n[12]=a("Compose 1.3 introduced the Modifier.Node API where the team has migrated all the pre-defined modifiers to this new API. I would highly recommend to watch ")),s("a",A,[e(r,{icon:"fa-brands fa-youtube"}),n[11]||(n[11]=a("this"))]),n[13]||(n[13]=a(" *youtube video of Android Dev Summit which explains why this change has been done."))]),e(f,{src:"youtube/BjGX2RftXsU"})]),n[19]||(n[19]=p(`<p>So if you want the best of both worlds — performance, extractability, skippability, reusable modifiers, use Modifier.Node API</p><p>There are three parts to implementing a custom modifier using Modifier.Node:</p><ul><li>A <code>Modifier.Node</code> implementation that holds the logic and state of your modifier.</li><li>A <code>ModifierNodeElement</code> that creates and updates modifier node instances.</li><li>An optional modifier factory as detailed above.</li></ul><p><code>ModifierNodeElement</code> classes are stateless and new instances are allocated each recomposition, whereas <code>Modifier.Node</code> classes can be stateful and will survive across multiple recompositions, and can even be reused.</p><p>Here is the very basic example of drawing a circle of specific color as shared in the official documentation.</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="drawCircle.kt"><span>drawCircle.kt</span></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token comment">// Modifier factory</span></span>
<span class="line"><span class="token keyword">fun</span> Modifier<span class="token punctuation">.</span><span class="token function">circle</span><span class="token punctuation">(</span>color<span class="token operator">:</span> Color<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">this</span> then <span class="token function">CircleElement</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ModifierNodeElement</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">CircleElement</span><span class="token punctuation">(</span><span class="token keyword">val</span> color<span class="token operator">:</span> Color<span class="token punctuation">)</span> <span class="token operator">:</span> ModifierNodeElement<span class="token operator">&lt;</span>CircleNode<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">CircleNode</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">update</span><span class="token punctuation">(</span>node<span class="token operator">:</span> CircleNode<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        node<span class="token punctuation">.</span>color <span class="token operator">=</span> color</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Modifier.Node</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token function">CircleNode</span><span class="token punctuation">(</span><span class="token keyword">var</span> color<span class="token operator">:</span> Color<span class="token punctuation">)</span> <span class="token operator">:</span> DrawModifierNode<span class="token punctuation">,</span> Modifier<span class="token punctuation">.</span><span class="token function">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">fun</span> ContentDrawScope<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">drawCircle</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div>`,6)),l(" @include: https://gist.github.com/itsSiddharthGupta/865e54d95260138019df1e9346942a9a/raw/bbd4d5a1ca6a78de2012b17f9ccbe87b8d948c51/drawCircle.kt  "),n[20]||(n[20]=p(`<hr><h2 id="modifier-node" tabindex="-1"><a class="header-anchor" href="#modifier-node"><span>Modifier.Node</span></a></h2><p>The first step is to create a class which implements the <code>Modifier.Node</code> along with <code>DrawModifierNode</code>. There are multiple factory nodes which compose provides out of the box. Here we want to draw something hence we are using the <code>DrawModifierNode</code>. If we wanted to do something with user inputs or gestures we might want to use <code>PointerInputModifierNode</code></p><figure><img src="https://droidcon.com/wp-content/uploads/2024/11/1_ybo1ri0Ouh63eDGq0R0tsw-826x1024.webp" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><hr><h2 id="modifiernodeelement" tabindex="-1"><a class="header-anchor" href="#modifiernodeelement"><span>ModifierNodeElement:</span></a></h2><p>A <code>ModifierNodeElement</code> is an immutable class that holds the data to create or update your custom modifier:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">private</span> <span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">CircleElement</span><span class="token punctuation">(</span><span class="token keyword">val</span> color<span class="token operator">:</span> Color<span class="token punctuation">)</span> <span class="token operator">:</span> ModifierNodeElement<span class="token operator">&lt;</span>CircleNode<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">CircleNode</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">update</span><span class="token punctuation">(</span>node<span class="token operator">:</span> CircleNode<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        node<span class="token punctuation">.</span>color <span class="token operator">=</span> color</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>ModifierNodeElement</code> implementations need to override the following methods:</p><ol><li><code>create</code>: This is the function that instantiates your modifier node. This gets called to create the node when your modifier is first applied. Usually, this amounts to constructing the node and configuring it with the parameters that were passed in to the modifier factory.</li><li><code>update</code>: This function is called whenever this modifier is provided in the same spot this node already exists, but a property has changed. This is determined by the <code>equals</code> method of the class. The modifier node that was previously created is sent as a parameter to the <code>update</code> call. At this point, you should update the nodes’ properties to correspond with the updated parameters. The ability for nodes to be reused this way is key to the performance gains that <code>Modifier.Node</code> brings; therefore, you must update the existing node rather than creating a new one in the <code>update</code> method. In our circle example, the color of the node is updated.</li></ol><p>Additionally, <code>ModifierNodeElement</code> implementations also need to implement <code>equals</code> and <code>hashCode</code>. <code>update</code> will only get called if an equals comparison with the previous element returns false.</p><hr><h2 id="modifier-factory" tabindex="-1"><a class="header-anchor" href="#modifier-factory"><span>Modifier Factory</span></a></h2><p>This is the public API surface of your modifier. Most implementations simply create the modifier element and add it to the modifier chain:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token comment">// Modifier factory</span></span>
<span class="line"><span class="token keyword">fun</span> Modifier<span class="token punctuation">.</span><span class="token function">circle</span><span class="token punctuation">(</span>color<span class="token operator">:</span> Color<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">this</span> then <span class="token function">CircleElement</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,15)),l(" TODO: add ARTICLE CARD "),e(c,d(u({title:"Custom modifiers in Jetpack Compose",desc:"Modifiers in Jetpack Compose are a powerful tool for customising and enhancing UI components. They allow developers to modify the appearance, behaviour, and layout of composable functions without changing their core implementation.",link:"https://chanhi2000.github.io/bookshelf/droidcon.com/custom-modifiers-in-jetpack-compose.html",logo:"https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png",background:"rgba(4,20,221,0.2)"})),null,16)])}const S=h(y,[["render",F]]),E=JSON.parse('{"path":"/droidcon.com/custom-modifiers-in-jetpack-compose.html","title":"Custom modifiers in Jetpack Compose","lang":"en-US","frontmatter":{"lang":"en-US","title":"Custom modifiers in Jetpack Compose","description":"Article(s) > Custom modifiers in Jetpack Compose","icon":"iconfont icon-jetpack-compose","category":["Java","Kotlin","Android","Jetpack Compose","Article(s)"],"tag":["blog","droidcon.com","java","kotlin","android","jetpack-compse"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Custom modifiers in Jetpack Compose\\",\\"image\\":[\\"https://droidcon.com/wp-content/uploads/2024/11/1_ybo1ri0Ouh63eDGq0R0tsw-826x1024.webp\\"],\\"datePublished\\":\\"2024-11-27T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Siddharth Gupta\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/droidcon.com/custom-modifiers-in-jetpack-compose.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"Custom modifiers in Jetpack Compose"}],["meta",{"property":"og:description","content":"Article(s) > Custom modifiers in Jetpack Compose"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://droidcon.com/wp-content/uploads/2024/11/1_Oe-DGannPg34NnFtp02TjA.webp"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://droidcon.com/wp-content/uploads/2024/11/1_Oe-DGannPg34NnFtp02TjA.webp"}],["meta",{"name":"twitter:image:alt","content":"Custom modifiers in Jetpack Compose"}],["meta",{"property":"article:author","content":"Siddharth Gupta"}],["meta",{"property":"article:tag","content":"jetpack-compse"}],["meta",{"property":"article:tag","content":"android"}],["meta",{"property":"article:tag","content":"kotlin"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:tag","content":"droidcon.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2024-11-27T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Custom modifiers in Jetpack Compose"},{"property":"og:description","content":"Custom modifiers in Jetpack Compose"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/droidcon.com/custom-modifiers-in-jetpack-compose.html"}]],"prev":"/programming/java-android/articles/README.md","date":"2024-11-27T00:00:00.000Z","isOriginal":false,"author":"Siddharth Gupta","cover":"https://droidcon.com/wp-content/uploads/2024/11/1_Oe-DGannPg34NnFtp02TjA.webp"},"git":{},"readingTime":{"minutes":4.84,"words":1452},"filePathRelative":"droidcon.com/custom-modifiers-in-jetpack-compose.md","copyright":{"author":"Siddharth Gupta"}}');export{S as comp,E as data};
