import{_ as k}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as g,d as s,f as e,b,a as f,t as y,n as u,g as d,w as o,e as a,r as l,o as w}from"./app-BItykJLQ.js";const S={},A={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},x={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},D={class:"table-of-contents"},C={href:"https://scroll-driven-animations.style/",target:"_blank",rel:"noopener noreferrer"},I={href:"https://front-end.social/@kizu",target:"_blank",rel:"noopener noreferrer"},T={href:"https://kizu.dev/scroll-driven-animations/",target:"_blank",rel:"noopener noreferrer"},V={href:"https://kizu.dev/fit-to-width-text/",target:"_blank",rel:"noopener noreferrer"},q={href:"https://front-end.social/@johannes",target:"_blank",rel:"noopener noreferrer"},P={href:"https://johannesodland.github.io/state/scroll-snap/scroll-driven-animations/2023/06/18/scroll-persisted-state.html",target:"_blank",rel:"noopener noreferrer"},j={href:"https://front-end.social/@johannes/110578929538884564",target:"_blank",rel:"noopener noreferrer"},R={href:"https://w3.org/TR/css-cascade-5/#cascading-origins",target:"_blank",rel:"noopener noreferrer"},B={href:"https://developer.chrome.com/blog/scrollend-a-new-javascript-event/",target:"_blank",rel:"noopener noreferrer"};function N(p,n){const r=l("VPCard"),i=l("router-link"),m=l("SiteInfo"),v=l("VidStack"),t=l("VPIcon"),c=l("RouteLink"),h=l("CodePen");return w(),g("div",null,[s("h1",A,[s("a",x,[s("span",null,y(p.$frontmatter.title)+" ê´€ë ¨",1)])]),e(r,u(d({title:"CSS > Article(s)",desc:"Article(s)",link:"/programming/css/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",D,[s("ul",null,[s("li",null,[e(i,{to:"#intro"},{default:o(()=>[...n[0]||(n[0]=[a("Intro",-1)])]),_:1})]),s("li",null,[e(i,{to:"#the-code"},{default:o(()=>[...n[1]||(n[1]=[a("The Code",-1)])]),_:1})]),s("li",null,[e(i,{to:"#how-it-works"},{default:o(()=>[...n[2]||(n[2]=[a("How it works",-1)])]),_:1})]),s("li",null,[e(i,{to:"#demo"},{default:o(()=>[...n[3]||(n[3]=[a("Demo",-1)])]),_:1})]),s("li",null,[e(i,{to:"#it-s-not-perfect"},{default:o(()=>[...n[4]||(n[4]=[a("Itâ€™s not perfect",-1)])]),_:1})])])]),n[38]||(n[38]=s("hr",null,null,-1)),e(m,{name:"Solved by CSS Scroll-Driven Animations: A :snapped selector",desc:"(Ab)using Scroll-Driven Animations to apply styles on elements that are snapped within their scroll-snapping enabled ancestor scroller.",url:"https://bram.us/bram.us/2023/06/26/faking-a-snapped-selector-with-scroll-driven-animations/",logo:"https://bramu.us/favicon.ico",preview:"https://bram.us/wordpress/wp-content/uploads/2023/06/sda-snapped-v2.gif"}),e(v,{src:"https://www.bram.us/wordpress/wp-content/uploads/2023/06/sda-snapped-v2.mp4"}),s("p",null,[s("a",C,[e(t,{icon:"fas fa-globe"}),n[5]||(n[5]=a("Scroll-Driven Animations",-1))]),n[6]||(n[6]=a(" can be used for more than driving an animation by scroll. In this post, I share how you can use Scroll-Driven Animations to fake a ",-1)),n[7]||(n[7]=s("code",null,":snapped",-1)),n[8]||(n[8]=a(" selector â€“ a fictitious selector that matches elements that are currently snapped within their scroll-snapping enabled ancestor scroller.",-1))]),n[39]||(n[39]=s("hr",null,null,-1)),n[40]||(n[40]=s("h2",{id:"intro",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#intro"},[s("span",null,"Intro")])],-1)),n[41]||(n[41]=s("p",null,"One of the cool and unexpected things of the upcoming Scroll-Driven Animations feature â€“ coming in Chrome 115, which is released this July â€“ is that it can be used well beyond its original intended use when combined with other CSS features.",-1)),s("p",null,[s("a",I,[e(t,{icon:"fas fa-globe"}),n[9]||(n[9]=a("Roma(n) Komarov",-1))]),n[15]||(n[15]=a(" for example has used them to ",-1)),s("a",T,[e(t,{icon:"fas fa-globe"}),n[10]||(n[10]=a("apply styles when an element with sticky positioning is stuck",-1))]),n[16]||(n[16]=a(" and even created ",-1)),s("a",V,[e(t,{icon:"fas fa-globe"}),n[11]||(n[11]=a("text that shrinks to the available width",-1))]),n[17]||(n[17]=a(" with it. Or take ",-1)),s("a",q,[e(t,{icon:"fas fa-globe"}),n[12]||(n[12]=a("Johannes Odland",-1))]),n[18]||(n[18]=a("â€™s ",-1)),s("a",P,[e(t,{icon:"fas fa-globe"}),n[13]||(n[13]=a("scroll-persisted state",-1))]),n[19]||(n[19]=a(", which is quite unexpected. Or even my own ",-1)),e(c,{to:"/bram.us/scroll-triggered-animations.html"},{default:o(()=>[...n[14]||(n[14]=[s("strong",null,"Scroll-Triggered Animations hack",-1)])]),_:1}),n[20]||(n[20]=a(" thatâ€™s built upon it.",-1))]),s("p",null,[n[24]||(n[24]=a("In one of Johannesâ€™s toots, ",-1)),s("a",j,[e(t,{icon:"fas fa-globe"}),n[21]||(n[21]=a("the ",-1)),n[22]||(n[22]=s("code",null,":snapped",-1)),n[23]||(n[23]=a(" selector came up",-1))]),n[25]||(n[25]=a(". Itâ€™s a fictitious selector that would match the element that is currently snapped within its parent scroller that has scroll-snapping applied to it. As you might have guessed already, that one too can also be faked with Scroll-Driven Animations.",-1))]),n[42]||(n[42]=b(`<hr><h2 id="the-code" tabindex="-1"><a class="header-anchor" href="#the-code"><span>The Code</span></a></h2><p>If youâ€™re here just for the code, here it is. It is used in <a href="#demo">the demo</a> below.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@keyframes</span> snapped</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">to</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">/* Declare your :snapped styles here */</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token selector">[data-snap-align]</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">scroll-snap-type</span><span class="token punctuation">:</span> x mandatory<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token selector">[data-snap-align] &gt; *</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">animation</span><span class="token punctuation">:</span> snapped <span class="token function">steps</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">animation-timeline</span><span class="token punctuation">:</span> <span class="token function">view</span><span class="token punctuation">(</span>inline<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token selector">[data-snap-align=&quot;start&quot;] &gt; *</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">scroll-snap-align</span><span class="token punctuation">:</span> start<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">animation-range</span><span class="token punctuation">:</span> exit -1px exit 1px<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">[data-snap-align=&quot;center&quot;] &gt; *</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">scroll-snap-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">animation-range</span><span class="token punctuation">:</span> cover <span class="token function">calc</span><span class="token punctuation">(</span>50% - 1px<span class="token punctuation">)</span> cover <span class="token function">calc</span><span class="token punctuation">(</span>50% + 1px<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token selector">[data-snap-align=&quot;end&quot;] &gt; *</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">scroll-snap-align</span><span class="token punctuation">:</span> end<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">animation-range</span><span class="token punctuation">:</span> entry <span class="token function">calc</span><span class="token punctuation">(</span>100% - 1px<span class="token punctuation">)</span> entry <span class="token function">calc</span><span class="token punctuation">(</span>100% + 1px<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="how-it-works" tabindex="-1"><a class="header-anchor" href="#how-it-works"><span>How it works</span></a></h2><p>At the core sites a scroll-driven animation that is linked to each element using a View Timeline. In the <code>to</code> keyframe block, the styles that need to apply when the element snapped are declared.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@keyframes</span> snapped</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">to</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">/* Declare your :snapped styles here */</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token selector">[data-snap-align]</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">scroll-snap-type</span><span class="token punctuation">:</span> x mandatory<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token selector">[data-snap-align] &gt; *</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">animation</span><span class="token punctuation">:</span> snapped <span class="token function">steps</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">animation-timeline</span><span class="token punctuation">:</span> <span class="token function">view</span><span class="token punctuation">(</span>inline<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Depending on the <code>scroll-snap-align</code> property value <em>(<code>start</code>, <code>center</code>, or <code>end</code>)</em>, the <code>animation-range</code> must also be set to a different value. The thing that might trip you up here is that the <code>start</code> of scroll-snapping maps to the <code>exit</code> range of Scroll-Driven Animations. It feels like they are opposites, but in fact they are not:</p><ul><li><code>scroll-snap-align: start</code> = right before the element is about to exit the scroller = around <code>exit 0%</code></li><li><code>scroll-snap-align: center</code> = when the element is at the center of the scroller = around <code>cover 50%</code></li><li><code>scroll-snap-align: end</code> = when the element has entered the scroller completely = around <code>entry 100%</code></li></ul><p>Because you canâ€™t set the start and end range to the same value â€“ the animation would not run in that case â€“ you need to give it some space to run. You do this by adding/subtracting <code>1px</code> from the range-start and range-end. For the elements with <code>scroll-snap-align: end;</code>, for example, the range becomes this:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">[data-snap-align=&quot;end&quot;] &gt; *</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">scroll-snap-align</span><span class="token punctuation">:</span> end<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">animation-range</span><span class="token punctuation">:</span> entry <span class="token function">calc</span><span class="token punctuation">(</span>100% - 1px<span class="token punctuation">)</span> entry <span class="token function">calc</span><span class="token punctuation">(</span>100% + 1px<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Finally, to prevent elements from being animated midway â€“ which can happen as Iâ€™ve noticed â€“ donâ€™t use a <code>linear</code> timing function but use a <code>steps</code>-based one.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">[data-snap-align] &gt; *</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">animation</span><span class="token punctuation">:</span> snapped <span class="token function">steps</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">animation-timeline</span><span class="token punctuation">:</span> <span class="token function">view</span><span class="token punctuation">(</span>inline<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="demo" tabindex="-1"><a class="header-anchor" href="#demo"><span>Demo</span></a></h2><p>Try out the code shown above in the pen below. Note that your browser needs to support Scroll-Driven Animations for it to work, which is Chrome 115 at the time of writing.</p>`,17)),e(h,{user:"bramus","slug-hash":"zYMoNvg",title:"(Ab)using Scroll-Driven Animations to fake Scroll-Snapping :snapped","default-tab":["css","result"],theme:p.dark},null,8,["theme"]),n[43]||(n[43]=s("p",null,"If your browser does not support Scroll-Driven Animations, you can see a recording embedded at the top of this post.",-1)),n[44]||(n[44]=s("hr",null,null,-1)),n[45]||(n[45]=s("h2",{id:"it-s-not-perfect",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#it-s-not-perfect"},[s("span",null,"Itâ€™s not perfect")])],-1)),n[46]||(n[46]=s("p",null,[a("While the code allows you mimic what a hypothetical "),s("code",null,":snapped"),a(" selector would give you, itâ€™s not perfect:")],-1)),s("ul",null,[n[29]||(n[29]=s("li",null,"The state applies before the scroll has actually snapped. If you scroll quickly, you can see some items apply the animation even though the scroller is still scrolling. Same if you scroll slowly across a point where it should snap.",-1)),s("li",null,[n[27]||(n[27]=a("Itâ€™s implemented using animations. This can have some unwanted side-effects because animations are ",-1)),s("a",R,[e(t,{icon:"iconfont icon-w3c"}),n[26]||(n[26]=a("a separate origin in the cascade",-1))]),n[28]||(n[28]=a(".",-1))]),n[30]||(n[30]=s("li",null,"It requires scroll-driven animations.",-1))]),s("p",null,[n[35]||(n[35]=a("You could work around some of these with some extra JavaScript that listens for ",-1)),s("a",B,[e(t,{icon:"fa-brands fa-chrome"}),n[31]||(n[31]=a("the ",-1)),n[32]||(n[32]=s("code",null,"scrollend",-1)),n[33]||(n[33]=a(" event",-1))]),n[36]||(n[36]=a(" and/or ",-1)),e(c,{to:"/bram.us/scroll-triggered-animations.html"},{default:o(()=>[...n[34]||(n[34]=[s("strong",null,"make it a Scroll-Triggered Animation",-1)])]),_:1}),n[37]||(n[37]=a(", but still it would remain a hacky way to achieve all this. To me, this exactly makes the case to eventually have a proper way to to apply styles onto snapped elements built straight into CSS.",-1))]),f(" TODO: add ARTICLE CARD "),e(r,u(d({title:"Solved by CSS Scroll-Driven Animations: A :snapped selector",desc:"(Ab)using Scroll-Driven Animations to apply styles on elements that are snapped within their scroll-snapping enabled ancestor scroller.",link:"https://chanhi2000.github.io/bookshelf/bram.us/faking-a-snapped-selector-with-scroll-driven-animations.html",logo:"https://bramu.us/favicon.ico",background:"rgba(17,17,17,0.2)"})),null,16)])}const z=k(S,[["render",N]]),J=JSON.parse('{"path":"/bram.us/faking-a-snapped-selector-with-scroll-driven-animations.html","title":"Solved by CSS Scroll-Driven Animations: A :snapped selector","lang":"en-US","frontmatter":{"lang":"en-US","title":"Solved by CSS Scroll-Driven Animations: A :snapped selector","description":"Article(s) > Solved by CSS Scroll-Driven Animations: A :snapped selector","icon":"fa-brands fa-css3-alt","category":["CSS","Article(s)"],"tag":["blog","bram.us","css"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Solved by CSS Scroll-Driven Animations: A :snapped selector\\",\\"image\\":[\\"https://bram.us/wordpress/wp-content/uploads/2023/06/sda-snapped-v2.gif\\"],\\"datePublished\\":\\"2023-06-27T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Bramus!\\",\\"url\\":\\"https://bram.us/author/bramus/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/bram.us/faking-a-snapped-selector-with-scroll-driven-animations.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Solved by CSS Scroll-Driven Animations: A :snapped selector"}],["meta",{"property":"og:description","content":"Article(s) > Solved by CSS Scroll-Driven Animations: A :snapped selector"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://bram.us/wordpress/wp-content/uploads/2023/06/sda-snapped-v2.gif"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://bram.us/wordpress/wp-content/uploads/2023/06/sda-snapped-v2.gif"}],["meta",{"name":"twitter:image:alt","content":"Solved by CSS Scroll-Driven Animations: A :snapped selector"}],["meta",{"property":"article:author","content":"Bramus!"}],["meta",{"property":"article:tag","content":"css"}],["meta",{"property":"article:tag","content":"bram.us"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2023-06-27T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Solved by CSS Scroll-Driven Animations: A :snapped selector"},{"property":"og:description","content":"Solved by CSS Scroll-Driven Animations: A :snapped selector"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/bram.us/faking-a-snapped-selector-with-scroll-driven-animations.html"}]],"prev":"/programming/css/articles/README.md","date":"2023-06-27T00:00:00.000Z","isOriginal":false,"author":[{"name":"Bramus!","url":"https://bram.us/author/bramus/"}],"cover":"https://bram.us/wordpress/wp-content/uploads/2023/06/sda-snapped-v2.gif"},"git":{},"readingTime":{"minutes":3.89,"words":1167},"filePathRelative":"bram.us/faking-a-snapped-selector-with-scroll-driven-animations.md","copyright":{"author":"Bramus!"}}');export{z as comp,J as data};
