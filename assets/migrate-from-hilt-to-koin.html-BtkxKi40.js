import{_ as h}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as f,d as e,f as s,b as p,t as k,n as v,g as y,w as i,e as t,r as d,o as b}from"./app-BVguHYKu.js";const w={},K={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},A={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},M={class:"table-of-contents"},H={href:"https://share-eu1.hsforms.com/1OdTs0YwvRIO9yNagrrIa3A2b3ipg",target:"_blank",rel:"noopener noreferrer"},j={class:"hint-container info"},I={href:"https://share-eu1.hsforms.com/1OdTs0YwvRIO9yNagrrIa3A2b3ipg",target:"_blank",rel:"noopener noreferrer"},S={href:"https://share-eu1.hsforms.com/1OdTs0YwvRIO9yNagrrIa3A2b3ipg",target:"_blank",rel:"noopener noreferrer"},T={href:"https://share-eu1.hsforms.com/1OdTs0YwvRIO9yNagrrIa3A2b3ipg",target:"_blank",rel:"noopener noreferrer"},C={href:"https://insert-koin.io/docs/reference/koin-annotations/start/",target:"_blank",rel:"noopener noreferrer"};function x(m,n){const g=d("VPCard"),a=d("router-link"),u=d("SiteInfo"),r=d("VPIcon"),c=d("Tabs");return b(),f("div",null,[e("h1",K,[e("a",A,[e("span",null,k(m.$frontmatter.title)+" ê´€ë ¨",1)])]),s(g,v(y({title:"Android > Article(s)",desc:"Article(s)",link:"/programming/java-android/articles/README.md",logo:"https://chanhi2000.github.io/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),e("nav",M,[e("ul",null,[e("li",null,[s(a,{to:"#setting-up-koin-and-koin-annotations"},{default:i(()=>n[0]||(n[0]=[t("Setting Up Koin and Koin Annotations")])),_:1,__:[0]}),e("ul",null,[e("li",null,[s(a,{to:"#step-1-adding-koin-dependencies"},{default:i(()=>n[1]||(n[1]=[t("Step 1: Adding Koin Dependencies")])),_:1,__:[1]})]),e("li",null,[s(a,{to:"#step-2-setting-up-koin-annotations"},{default:i(()=>n[2]||(n[2]=[t("Step 2: Setting Up Koin Annotations")])),_:1,__:[2]})]),e("li",null,[s(a,{to:"#step-3-configuring-source-sets"},{default:i(()=>n[3]||(n[3]=[t("Step 3: Configuring Source Sets")])),_:1,__:[3]})]),e("li",null,[s(a,{to:"#optional-activating-compile-time-safety"},{default:i(()=>n[4]||(n[4]=[t("Optional: Activating Compile-Time Safety")])),_:1,__:[4]})])])]),e("li",null,[s(a,{to:"#replacing-hilt-annotations-with-koin"},{default:i(()=>n[5]||(n[5]=[t("Replacing Hilt Annotations with Koin")])),_:1,__:[5]}),e("ul",null,[e("li",null,[s(a,{to:"#hilt-annotations-and-their-koin-equivalents"},{default:i(()=>n[6]||(n[6]=[t("Hilt Annotations and Their Koin Equivalents")])),_:1,__:[6]})]),e("li",null,[s(a,{to:"#why-some-hilt-annotations-are-not-needed-in-koin"},{default:i(()=>n[7]||(n[7]=[t("Why Some Hilt Annotations are Not Needed in Koin")])),_:1,__:[7]})])])]),e("li",null,[s(a,{to:"#initializing-koin"},{default:i(()=>n[8]||(n[8]=[t("Initializing Koin")])),_:1,__:[8]})]),e("li",null,[s(a,{to:"#injecting-dependencies"},{default:i(()=>n[9]||(n[9]=[t("Injecting Dependencies")])),_:1,__:[9]})]),e("li",null,[s(a,{to:"#viewmodel-injection"},{default:i(()=>n[10]||(n[10]=[t("ViewModel Injection")])),_:1,__:[10]})]),e("li",null,[s(a,{to:"#composable-injection"},{default:i(()=>n[11]||(n[11]=[t("Composable Injection")])),_:1,__:[11]})]),e("li",null,[s(a,{to:"#migrating-modules"},{default:i(()=>n[12]||(n[12]=[t("Migrating Modules")])),_:1,__:[12]}),e("ul",null,[e("li",null,[s(a,{to:"#step-1-replace-module-and-installin-with-module-from-koin"},{default:i(()=>n[13]||(n[13]=[t("Step 1: Replace @Module and @InstallIn with @Module from Koin")])),_:1,__:[13]})]),e("li",null,[s(a,{to:"#step-2-change-provides-methods-to-single-or-factory"},{default:i(()=>n[14]||(n[14]=[t("Step 2: Change @Provides Methods to @Single or @Factory")])),_:1,__:[14]})]),e("li",null,[s(a,{to:"#step-3-remove-inject-from-constructors"},{default:i(()=>n[15]||(n[15]=[t("Step 3: Remove @Inject from Constructors")])),_:1,__:[15]})]),e("li",null,[s(a,{to:"#step-4-update-module-declarations-in-startkoin"},{default:i(()=>n[16]||(n[16]=[t("Step 4: Update Module Declarations in startKoin")])),_:1,__:[16]})]),e("li",null,[s(a,{to:"#step-5-bridging-components-between-hilt-and-koin"},{default:i(()=>n[17]||(n[17]=[t("Step 5: Bridging Components Between Hilt and Koin")])),_:1,__:[17]})])])]),e("li",null,[s(a,{to:"#testing"},{default:i(()=>n[18]||(n[18]=[t("Testing")])),_:1,__:[18]})]),e("li",null,[s(a,{to:"#compose-previews"},{default:i(()=>n[19]||(n[19]=[t("Compose Previews")])),_:1,__:[19]}),e("ul",null,[e("li",null,[s(a,{to:"#final-migration-tips"},{default:i(()=>n[20]||(n[20]=[t("Final Migration Tips")])),_:1,__:[20]})])])])])]),n[42]||(n[42]=e("hr",null,null,-1)),s(u,{name:"How To Migrate from Hilt to Koin - A Detailed Guide",desc:"Migrate from Hilt to Koin for Android devs. A step-by-step guide to cover setup, annotation replacements, module migration, testing, & Compose previews.",url:"https://blog.kotzilla.io/migrate-from-hilt-to-koin",logo:"https://blog.kotzilla.io/hubfs/favicon.png",preview:"https://blog.kotzilla.io/hubfs/Screenshot%202024-07-18%20at%2017.13.33.png"}),n[43]||(n[43]=p('<figure><img src="https://139572340.fs1.hubspotusercontent-eu1.net/hub/139572340/hubfs/Screenshot 2024-08-01 at 13.12.26.png?width=1200&amp;length=1200&amp;name=Screenshot 2024-08-01 at 13.12.26.png" alt="Migrate from Hilt to Koin" tabindex="0" loading="lazy"><figcaption>Migrate from Hilt to Koin</figcaption></figure><p>Migrating from Hilt to <a href="https://insert-koin.io/" target="_blank" rel="noopener noreferrer">Koin</a> might seem daunting at first, but it&#39;s actually more manageable than you might think. To simplify the process, we&#39;ve put together a comprehensive guide for you.</p><p>For Android developers, especially those looking for a dependency injection (DI) solution for their Kotlin Multiplatform (KMP) projects, Koin offers KMP compatibility that Hilt doesn&#39;t yet. Our step-by-step guide will help you make the switch smoothly.</p><div class="hint-container tip"><p class="hint-container-title">Pro Tip</p><p>To allow for a progressive migration, set up both DI frameworks to coexist temporarily. This enables you to migrate parts of your codebase incrementally, reducing the risk of disruption.</p></div><p>This guide covers common scenarios and transformations to streamline your migration process. Plus, we&#39;ve included a handy cheat sheet for quick referenceðŸ˜‰</p><p>Get it here ðŸ‘‡</p>',6)),e("blockquote",null,[e("p",null,[e("a",H,[s(r,{icon:"fas fa-download"}),n[21]||(n[21]=t("Download Cheat Sheet"))])])]),n[44]||(n[44]=p(`<hr><h2 id="setting-up-koin-and-koin-annotations" tabindex="-1"><a class="header-anchor" href="#setting-up-koin-and-koin-annotations"><span>Setting Up Koin and Koin Annotations</span></a></h2><p>There are three steps (and an optional fourth):</p><h3 id="step-1-adding-koin-dependencies" tabindex="-1"><a class="header-anchor" href="#step-1-adding-koin-dependencies"><span>Step 1: Adding Koin Dependencies</span></a></h3><p>Ok, so, to start using Koin, include the necessary dependencies in your <code>build.gradle.kts</code> file.</p><p>You need this as it provides the core functionality of the Koin framework, which is necessary for implementing dependency injection in your Android application.</p><p>Add the following lines in the dependencies section:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token comment">// Koin</span></span>
<span class="line"><span class="token function">implementation</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;io.insert-koin: koin-android: 3.5.6&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="step-2-setting-up-koin-annotations" tabindex="-1"><a class="header-anchor" href="#step-2-setting-up-koin-annotations"><span>Step 2: Setting Up Koin Annotations</span></a></h3><p><strong>Now, set up Koin Annotations</strong>, which simplify the configuration and usage of Koin. Koin Annotations help automate the generation of boilerplate code needed for dependency injection. By including these dependencies, you enable annotation processing, which simplifies module and component setup.</p><p>Add the KSP Gradle Plugin:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line">plugins <span class="token punctuation">{</span> </span>
<span class="line">  <span class="token function">kotlin</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;multiplatform&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,12)),e("div",j,[n[22]||(n[22]=e("p",{class:"hint-container-title"},"Info",-1)),n[23]||(n[23]=e("p",null,"Here's the link to the official doc:",-1)),s(u,{name:"KSP with Kotlin Multiplatform | Kotlin Documentation",desc:"KSP with Kotlin Multiplatform",url:"https://kotlinlang.org/docs/ksp-multiplatform.html",logo:"https://kotlinlang.org/assets/images/apple-touch-icon-144x144.png?v2",preview:"https://kotlinlang.org/assets/images/open-graph/docs.png"})]),n[45]||(n[45]=p(`<p>Gradle Dependencies:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token comment">// Koin Annotations </span></span>
<span class="line"><span class="token function">implementation</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;io.insert-koin: koin-annotations:1.3.1&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">ksp</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;io.insert-koin:koin-ksp-compiler:1.3.1&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ensure to include the KSP plugin in your project setup. The KSP (Kotlin Symbol Processing) plugin is responsible for processing annotations during compile time.</p><p>This step is necessary for Koin Annotations to work. It allows the framework to generate the required code for dependency injection automatically.</p><h3 id="step-3-configuring-source-sets" tabindex="-1"><a class="header-anchor" href="#step-3-configuring-source-sets"><span>Step 3: Configuring Source Sets</span></a></h3><p>In Android only, configure your source sets to recognize the KSP-generated code. This configuration ensures that the generated code from KSP is included in your project&#39;s source sets. Without this step, the generated classes might not be recognized, leading to compilation errors:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line">android <span class="token punctuation">{</span></span>
<span class="line">  applicationVariants<span class="token punctuation">.</span><span class="token function">all</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">val</span> variantName <span class="token operator">=</span> name</span>
<span class="line">    sourceSets <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;main&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        java<span class="token punctuation">.</span><span class="token function">srcDir</span><span class="token punctuation">(</span><span class="token function">File</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;build/generated/ksp/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">variantName</span></span><span class="token string">/kotlin&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// ... </span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="optional-activating-compile-time-safety" tabindex="-1"><a class="header-anchor" href="#optional-activating-compile-time-safety"><span>Optional: Activating Compile-Time Safety</span></a></h3><p>To enable compile-time safety checks in Koin, configure KSP with the <code>KOIN_CONFIG_CHECK</code> property.Enabling this setting allows Koin to perform configuration checks at compile time, ensuring that all dependencies are correctly defined and reducing the risk of runtime errors due to misconfigurations:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line">ksp <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">arg</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;KOIN_CONFIG_CHECK&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;true&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="replacing-hilt-annotations-with-koin" tabindex="-1"><a class="header-anchor" href="#replacing-hilt-annotations-with-koin"><span>Replacing Hilt Annotations with Koin</span></a></h2><p>Converting Hilt annotations to Koin equivalents involves several changes. If there&#39;s no equivalent, you can simply remove the Hilt annotation.</p><h3 id="hilt-annotations-and-their-koin-equivalents" tabindex="-1"><a class="header-anchor" href="#hilt-annotations-and-their-koin-equivalents"><span>Hilt Annotations and Their Koin Equivalents</span></a></h3><figure><img src="https://blog.kotzilla.io/hs-fs/hubfs/Screenshot 2024-07-15 at 17.10.52.png?width=1680&amp;height=1302&amp;name=Screenshot 2024-07-15 at 17.10.52.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="why-some-hilt-annotations-are-not-needed-in-koin" tabindex="-1"><a class="header-anchor" href="#why-some-hilt-annotations-are-not-needed-in-koin"><span>Why Some Hilt Annotations are Not Needed in Koin</span></a></h3><h4 id="hiltandroidapp" tabindex="-1"><a class="header-anchor" href="#hiltandroidapp"><span><code>@HiltAndroidApp</code></span></a></h4>`,17)),s(c,{data:[{id:"Hilt"},{id:"Koin"}],active:0},{title0:i(({value:o,isActive:l})=>n[24]||(n[24]=[t("Hilt")])),title1:i(({value:o,isActive:l})=>n[25]||(n[25]=[t("Koin")])),tab0:i(({value:o,isActive:l})=>n[26]||(n[26]=[e("p",null,[e("code",null,"@HiltAndroidApp"),t(" is used to trigger Hilt's code generation and set up the dependency graph for the application.")],-1)])),tab1:i(({value:o,isActive:l})=>n[27]||(n[27]=[e("p",null,[t("Koin doesn't require an annotation on the application class. Instead, you initialize Koin explicitly in the "),e("code",null,"onCreate"),t(" method of your "),e("code",null,"Application"),t(" class using "),e("code",null,"startKoin"),t(". This approach is more flexible as it does not rely on code generation.")],-1)])),_:1}),n[46]||(n[46]=e("h4",{id:"androidentrypoint",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#androidentrypoint"},[e("span",null,[e("code",null,"@AndroidEntryPoint")])])],-1)),s(c,{data:[{id:"Hilt"},{id:"Koin"}],active:0},{title0:i(({value:o,isActive:l})=>n[28]||(n[28]=[t("Hilt")])),title1:i(({value:o,isActive:l})=>n[29]||(n[29]=[t("Koin")])),tab0:i(({value:o,isActive:l})=>n[30]||(n[30]=[e("p",null,[e("code",null,"@AndroidEntryPoint"),t(" is used to indicate that Hilt should provide dependencies to Android components (activities, fragments, services).")],-1)])),tab1:i(({value:o,isActive:l})=>n[31]||(n[31]=[e("p",null,[t("Koin injects dependencies directly without requiring specific annotations on the components. Dependency injection is achieved using property delegation (e.g., by "),e("code",null,"inject()"),t(") or constructor injection, making it simpler and more intuitive.")],-1)])),_:1}),n[47]||(n[47]=e("h4",{id:"installin",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#installin"},[e("span",null,[e("code",null,"@InstallIn")])])],-1)),s(c,{data:[{id:"Hilt"},{id:"Koin"}],active:0},{title0:i(({value:o,isActive:l})=>n[32]||(n[32]=[t("Hilt")])),title1:i(({value:o,isActive:l})=>n[33]||(n[33]=[t("Koin")])),tab0:i(({value:o,isActive:l})=>n[34]||(n[34]=[e("p",null,[e("code",null,"@InstallIn"),t(" specifies the Hilt component in which the module will be installed (e.g., SingletonComponent, ActivityComponent).")],-1)])),tab1:i(({value:o,isActive:l})=>n[35]||(n[35]=[e("p",null,"Koin modules do not need to be installed into specific components because Koin uses a simpler and more straightforward module system. You define your modules and then load them when you start Koin. The dependency scope (e.g., singleton, factory) is directly managed within the module definitions.",-1)])),_:1}),n[48]||(n[48]=p(`<hr><h2 id="initializing-koin" tabindex="-1"><a class="header-anchor" href="#initializing-koin"><span>Initializing Koin</span></a></h2><p>Replace Hilt initialization with <code>startKoin</code> in your Application class. Koin requires explicit initialization within the Application class to set up the dependency graph. This setup is crucial for Koin to manage dependencies throughout the application lifecycle.</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">class</span> MyApplication<span class="token operator">:</span> <span class="token function">Application</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    startkoin <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">androidContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token label symbol">@MyApplication</span><span class="token punctuation">)</span> <span class="token function">modules</span> <span class="token punctuation">(</span><span class="token function">AppModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>module<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="injecting-dependencies" tabindex="-1"><a class="header-anchor" href="#injecting-dependencies"><span>Injecting Dependencies</span></a></h2><p>Convert Hilt injection to Koin injection. Koin uses Kotlin property delegation <code>by inject()</code>for dependency injection, which is more idiomatic in Kotlin and eliminates the need for <code>@Inject</code> annotations/</p><figure><img src="https://blog.kotzilla.io/hs-fs/hubfs/Screenshot 2024-07-15 at 17.22.03.png?width=2400&amp;height=810&amp;name=Screenshot 2024-07-15 at 17.22.03.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><hr><h2 id="viewmodel-injection" tabindex="-1"><a class="header-anchor" href="#viewmodel-injection"><span>ViewModel Injection</span></a></h2><p>In summary, migrating ViewModel injection from Hilt to Koin involves:</p><ul><li>Using <code>@KoinViewModel</code> instead of <code>@HiltViewModel</code>.</li><li>Removing <code>@Inject</code> annotations and using direct constructor injection.</li></ul><p>In Hilt, you use the <code>@HiltViewModel</code> annotation to mark a ViewModel class for dependency injection. This annotation, combined with the <code>@Inject</code> constructor, allows Hilt to automatically provide the necessary dependencies:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token annotation builtin">@HiltViewModel</span></span>
<span class="line"><span class="token keyword">class</span> MyViewModel <span class="token annotation builtin">@Inject</span> <span class="token keyword">constructor</span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">val</span> repository<span class="token operator">:</span> Repository</span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In Koin, you achieve similar functionality using the <code>@KoinViewModel</code> annotation. Instead of using <code>@Inject</code>, you directly declare the dependencies in the constructor, and Koin takes care of the rest:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token annotation builtin">@KoinViewModel</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token function">MyViewModel</span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">val</span> repository<span class="token operator">:</span> Repository</span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Koin simplifies ViewModel injection by removing the need for explicit injection annotations. The <code>@KoinViewModel</code> annotation ensures that Koin understands the lifecycle of the ViewModel and provides the necessary dependencies.</p>`,17)),e("blockquote",null,[e("p",null,[e("a",I,[s(r,{icon:"fas fa-download"}),n[36]||(n[36]=t("Download Cheat Sheet"))])])]),n[49]||(n[49]=p(`<hr><h2 id="composable-injection" tabindex="-1"><a class="header-anchor" href="#composable-injection"><span>Composable Injection</span></a></h2><p>As Jetpack Compose becomes the preferred toolkit for building native UI in Android, integrating dependency injection into Composable functions is crucial for maintaining a clean and modular architecture. Both Hilt and Koin support dependency injection within Composables, but the approach varies between the two frameworks.</p><p>Using Hilt, you can inject a ViewModel in a Composable function using the <code>hiltViewModel</code> function:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token annotation builtin">@Composable</span></span>
<span class="line"><span class="token keyword">fun</span> <span class="token function">MyComposable</span><span class="token punctuation">(</span>viewModel<span class="token operator">:</span> MyViewModel <span class="token operator">=</span> <span class="token function">hiltViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Koin provides the <code>koinViewModel</code> function for ViewModel injection in Jetpack Compose, aligning with the Compose paradigm and ensuring dependencies are managed within the Composable lifecycle:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token annotation builtin">@Composable</span></span>
<span class="line"><span class="token keyword">fun</span> <span class="token function">MyComposable</span><span class="token punctuation">(</span>viewModel<span class="token operator">:</span> MyViewModel <span class="token operator">=</span> <span class="token function">koinViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>For injecting non-ViewModel dependencies, use <code>koinInject()</code>:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token annotation builtin">@Composable</span></span>
<span class="line"><span class="token keyword">fun</span> <span class="token function">MyComposable</span><span class="token punctuation">(</span>myComponent<span class="token operator">:</span> MyComponent <span class="token operator">=</span> <span class="token function">koinInject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>One of the key benefits of using <code>koinInject</code> is that it ensures the injected dependencies are managed in line with the Composable lifecycle. When the Composable is recomposed or removed, Koin manages the dependencies accordingly, preventing memory leaks and ensuring optimal resource usage.</p><hr><h2 id="migrating-modules" tabindex="-1"><a class="header-anchor" href="#migrating-modules"><span>Migrating Modules</span></a></h2><p>Migrating dependency injection modules from Hilt to Koin requires a systematic approach to ensure that your dependencies are configured correctly and efficiently. This section will guide you through the necessary steps to transform your Hilt modules into Koin modules.</p><h3 id="step-1-replace-module-and-installin-with-module-from-koin" tabindex="-1"><a class="header-anchor" href="#step-1-replace-module-and-installin-with-module-from-koin"><span>Step 1: Replace <code>@Module</code> and <code>@InstallIn</code> with <code>@Module</code> from Koin</span></a></h3><p>In Hilt, modules are annotated with <code>@Module</code> and are installed into specific components using <code>@InstallIn</code>. This setup helps Hilt understand the scope and lifecycle of the dependencies.</p><p>In Koin, the module definition is more straightforward. You define a module using the <code>module</code> function, and you don&#39;t need a separate annotation to specify the component scope. Koin&#39;s approach eliminates the need for <code>@InstallIn</code> by using a single <code>@Module</code> annotation and managing scopes within the module itself. This simplifies the configuration and reduces boilerplate code.</p><h3 id="step-2-change-provides-methods-to-single-or-factory" tabindex="-1"><a class="header-anchor" href="#step-2-change-provides-methods-to-single-or-factory"><span>Step 2: Change <code>@Provides</code> Methods to <code>@Single</code> or <code>@Factory</code></span></a></h3><p>In Hilt, you use <code>@Provides</code> methods within your modules to specify how to create dependencies. These methods can also indicate the scope of the dependency, such as singleton or scoped.</p><p>In Koin, you use <code>@Single</code> for singleton instances and <code>@Factory</code> for factory-scoped instances directly in the class definition or the module. Koin&#39;s annotations like <code>@Single</code> and <code>@Factory</code> make it clear and concise how dependencies are scoped and provided. This reduces the need for separate methods and keeps the module definition more readable.</p><h3 id="step-3-remove-inject-from-constructors" tabindex="-1"><a class="header-anchor" href="#step-3-remove-inject-from-constructors"><span>Step 3: Remove <code>@Inject</code> from Constructors</span></a></h3><p>In Hilt, constructors are annotated with <code>@Inject</code> to indicate where dependencies should be provided.</p><p>In Koin, you don&#39;t need to annotate constructors with <code>@Inject</code>. You simply define the dependencies in the constructor, and Koin handles the rest. Removing <code>@Inject</code> annotations aligns with Kotlin&#39;s idiomatic way of handling dependency injection. Koin uses constructor injection directly, making the code cleaner and reducing annotation clutter.</p><h3 id="step-4-update-module-declarations-in-startkoin" tabindex="-1"><a class="header-anchor" href="#step-4-update-module-declarations-in-startkoin"><span>Step 4: Update Module Declarations in <code>startKoin</code></span></a></h3><p>Finally, in Hilt, modules are implicitly registered through the annotation processing system.</p><p>In Koin, you need to explicitly declare and load your modules in the <code>startKoin</code> function within your Application class. Explicitly declaring modules in <code>startKoin</code> ensures that all dependencies are loaded and managed by Koin from the start of the application lifecycle. This approach provides more control and transparency over your dependency graph.</p><h3 id="step-5-bridging-components-between-hilt-and-koin" tabindex="-1"><a class="header-anchor" href="#step-5-bridging-components-between-hilt-and-koin"><span>Step 5: Bridging Components Between Hilt and Koin</span></a></h3><p>To allow for a progressive migration, you can bridge components between Hilt and Koin. This involves setting up both DI frameworks to coexist temporarily, enabling you to migrate parts of your codebase incrementally. This bridging approach allows you to gradually migrate your dependencies from Hilt to Koin without disrupting your entire codebase. It provides flexibility and reduces the risk of introducing errors during the migration process.</p>`,27)),e("blockquote",null,[e("p",null,[e("a",S,[s(r,{icon:"fas fa-download"}),n[37]||(n[37]=t("Download Cheat Sheet"))])])]),n[50]||(n[50]=p(`<hr><h2 id="testing" tabindex="-1"><a class="header-anchor" href="#testing"><span>Testing</span></a></h2><p>When migrating from Hilt to Koin, you&#39;ll need to adjust your test setup to use Koin&#39;s testing utilities instead of Hilt&#39;s.</p><p>In Hilt, you typically use the <code>HiltAndroidRule</code> to set up and tear down the dependency graph for your tests.</p><p>Koin provides a straightforward testing API that allows you to set up and tear down the dependency graph in your tests. Here&#39;s how you can migrate your test setup from Hilt to Koin:</p><ul><li>Implement the <code>KoinTest</code> interface.</li><li>Use the <code>startKoin</code> function to initialize your test modules.</li><li>Use the <code>stopKoin</code> function to clean up after your tests.</li></ul><div class="language-Kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="Kotlin"><pre><code class="language-Kotlin"><span class="line">class MyTest: KoinTest {</span>
<span class="line">  @Before</span>
<span class="line">  fun setup() {</span>
<span class="line">    startkoin { modules (testModule) } }</span>
<span class="line">  </span>
<span class="line">  @After</span>
<span class="line">  fun tearDown() {</span>
<span class="line">    stopKoin()</span>
<span class="line">  }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="compose-previews" tabindex="-1"><a class="header-anchor" href="#compose-previews"><span>Compose Previews</span></a></h2><p>When using Koin, it&#39;s essential to set up your Compose previews correctly to ensure they can access the necessary dependencies.</p><p>In Hilt, you might use a preview composable to provide the necessary dependencies.</p><p>With Koin, you can use the <code>KoinApplication</code> composable to provide the required dependencies for your Compose previews. This approach ensures that your preview composables have access to the same dependency graph as the rest of your application, making your previews more accurate and reliable.</p><p>Here&#39;s how you can set up a Koin-powered Compose preview:</p><div class="language-Kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="Kotlin"><pre><code class="language-Kotlin"><span class="line">@Preview</span>
<span class="line">@Composable</span>
<span class="line">fun MyPreviewComposable() {</span>
<span class="line">  KoinApplication(application = { modules (previewModule) }) {</span>
<span class="line">    MyComposable()</span>
<span class="line">  }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Using the <code>KoinApplication</code> composable ensures that your dependencies are correctly provided to your preview composables. This setup mirrors the runtime environment, allowing you to accurately preview how your UI components will behave with the actual dependencies.</p><h3 id="final-migration-tips" tabindex="-1"><a class="header-anchor" href="#final-migration-tips"><span>Final Migration Tips</span></a></h3><p>Migrating from Hilt to Koin can be straightforward if you approach it methodically. Here are some tips to help you along the way, ensuring a smooth transition without overwhelming yourself or your codebase.</p><ul><li><strong>Start with Smaller, Less Dependent Modules</strong>: This allows you to get accustomed to Koin&#39;s setup and mechanics without dealing with complex dependency graphs right away.</li><li><strong>Bridge Components Between Hilt and Koin</strong>: To allow for a progressive migration, set up both DI frameworks to coexist temporarily. This enables you to migrate parts of your codebase incrementally, reducing the risk of disruption.</li><li><strong>Leverage Koin Annotations for Easier Migration</strong>: For simple dependencies that don&#39;t require complex setup or scoping, leverage Koin&#39;s default module annotations like <code>@Single</code> or <code>@Factory</code>This can save time and keep your module definitions clean and concise. It also helps in maintaining readability and reducing boilerplate code.</li><li><strong>Update Tests Alongside Component Migrations</strong>: As you migrate your components, don&#39;t forget to update your tests. Ensure that your test setup uses Koin&#39;s testing utilities and that all dependencies are correctly mocked or provided.</li><li><strong>Verify Dependency Graph After Migration</strong>: Once you&#39;ve migrated a set of components or modules, take the time to verify the entire dependency graph to ensure everything is wired correctly.</li></ul>`,18)),e("blockquote",null,[e("p",null,[e("a",T,[s(r,{icon:"fas fa-download"}),n[38]||(n[38]=t("Download Cheat Sheet"))])])]),e("p",null,[n[40]||(n[40]=t("By following these tips, you'll be able to transition your project from Hilt to Koin smoothly. And don't forget to refer to ")),e("a",C,[s(r,{icon:"fas fa-globe"}),n[39]||(n[39]=t("Koin's official docs"))]),n[41]||(n[41]=t(" for any advanced usage and detailed information that might help along the way."))]),n[51]||(n[51]=e("p",null,"Happy MigrationðŸ‘‹",-1))])}const D=h(w,[["render",x]]),P=JSON.parse('{"path":"/blog.kotzilla.io/migrate-from-hilt-to-koin.html","title":"How To Migrate from Hilt to Koin - A Detailed Guide","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"How To Migrate from Hilt to Koin - A Detailed Guide","description":"Article(s) > How To Migrate from Hilt to Koin - A Detailed Guide","icon":"fa-brands fa-android","category":["Java","Kotlin","Android","Gradle","Article(s)"],"tag":["blog","blog.kotzilla.io","java","kotiln","android","gradle","hilt","koin"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"How To Migrate from Hilt to Koin - A Detailed Guide\\",\\"image\\":[\\"https://139572340.fs1.hubspotusercontent-eu1.net/hub/139572340/hubfs/Screenshot%202024-08-01%20at%2013.12.26.png?width=1200&length=1200&name=Screenshot%202024-08-01%20at%2013.12.26.png\\",\\"https://blog.kotzilla.io/hs-fs/hubfs/Screenshot%202024-07-15%20at%2017.10.52.png?width=1680&height=1302&name=Screenshot%202024-07-15%20at%2017.10.52.png\\",\\"https://blog.kotzilla.io/hs-fs/hubfs/Screenshot%202024-07-15%20at%2017.22.03.png?width=2400&height=810&name=Screenshot%202024-07-15%20at%2017.22.03.png\\"],\\"datePublished\\":\\"2024-07-23T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.kotzilla.io/migrate-from-hilt-to-koin.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"How To Migrate from Hilt to Koin - A Detailed Guide"}],["meta",{"property":"og:description","content":"Article(s) > How To Migrate from Hilt to Koin - A Detailed Guide"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://blog.kotzilla.io/hubfs/Screenshot%202024-07-18%20at%2017.13.33.png"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://blog.kotzilla.io/hubfs/Screenshot%202024-07-18%20at%2017.13.33.png"}],["meta",{"name":"twitter:image:alt","content":"How To Migrate from Hilt to Koin - A Detailed Guide"}],["meta",{"property":"article:tag","content":"koin"}],["meta",{"property":"article:tag","content":"hilt"}],["meta",{"property":"article:tag","content":"gradle"}],["meta",{"property":"article:tag","content":"android"}],["meta",{"property":"article:tag","content":"kotiln"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:tag","content":"blog.kotzilla.io"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2024-07-23T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > How To Migrate from Hilt to Koin - A Detailed Guide"},{"property":"og:description","content":"How To Migrate from Hilt to Koin - A Detailed Guide"},{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/blog.kotzilla.io/migrate-from-hilt-to-koin.html"}]],"prev":"/programming/java-android/articles/README.md","date":"2024-07-23T00:00:00.000Z","isOriginal":false,"cover":"https://blog.kotzilla.io/hubfs/Screenshot%202024-07-18%20at%2017.13.33.png"},"git":{},"readingTime":{"minutes":7.81,"words":2344},"filePathRelative":"blog.kotzilla.io/migrate-from-hilt-to-koin.md"}');export{D as comp,P as data};
