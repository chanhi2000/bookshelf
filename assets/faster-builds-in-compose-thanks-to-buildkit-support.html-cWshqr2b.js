import{_ as m}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as h,d as t,f as s,b as k,a as b,t as g,n as r,g as l,w as f,e as o,r as n,o as v}from"./app-BItykJLQ.js";const D={},y={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},w={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},C={class:"table-of-contents"},B={href:"https://github.com/docker/compose",target:"_blank",rel:"noopener noreferrer"},K={href:"http://docs.docker.com/develop/develop-images/build_enhancements.",target:"_blank",rel:"noopener noreferrer"},S={href:"http://docs.docker.com/develop/develop-images/build_enhancements.https://github.com/docker/compose/releases/tag/1.25.1",target:"_blank",rel:"noopener noreferrer"};function I(p,e){const i=n("VPCard"),c=n("router-link"),d=n("SiteInfo"),a=n("VPIcon"),u=n("VidStack");return v(),h("div",null,[t("h1",y,[t("a",w,[t("span",null,g(p.$frontmatter.title)+" ê´€ë ¨",1)])]),s(i,r(l({title:"Docker > Article(s)",desc:"Article(s)",link:"/devops/docker/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),t("nav",C,[t("ul",null,[t("li",null,[s(c,{to:"#enabling-buildkit-build"},{default:f(()=>[...e[0]||(e[0]=[o("Enabling Buildkit build",-1)])]),_:1})])])]),e[10]||(e[10]=t("hr",null,null,-1)),s(d,{name:"Faster builds in Docker Compose 1.25.1 thanks to BuildKit SupportDocker",desc:"One of the most requested features for the docker-compose tool is definitely support for building using Buildkit which is an alternative builder with great capabilities, like caching, concurrency and ability to use custom front-ends just to mention a few... Ahhh with a nice blue output! And the good news is that Docker Compose 1.25.1 - that was just released early January â€“ includes BuildKit support!",url:"https://docker.com/blog/faster-builds-in-compose-thanks-to-buildkit-support",logo:"https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png",preview:"https://docker.com/app/uploads/2020/01/alvaro-bernal-RgIKRYhmG2k-unsplash-1110x740.jpg"}),e[11]||(e[11]=t("figure",null,[t("img",{src:"https://docker.com/app/uploads/2020/01/alvaro-bernal-RgIKRYhmG2k-unsplash-1110x740.jpg",alt:"",tabindex:"0",loading:"lazy"}),t("figcaption")],-1)),t("p",null,[e[6]||(e[6]=o("One of the most requested features for the ",-1)),t("a",B,[e[1]||(e[1]=o("docker-compose (",-1)),s(a,{icon:"iconfont icon-github"}),e[2]||(e[2]=t("code",null,"docker/compose",-1)),e[3]||(e[3]=o(")",-1))]),e[7]||(e[7]=o(" tool is definitely support for building using ",-1)),t("a",K,[s(a,{icon:"fa-brands fa-docker"}),e[4]||(e[4]=o("Buildkit",-1))]),e[8]||(e[8]=o(" which is an alternative builder with great capabilities, like caching, concurrency and ability to use custom BuildKit front-ends just to mention a fewâ€¦ Ahhh with a nice blue output! And the good news is that ",-1)),t("a",S,[s(a,{icon:"fa-brands fa-docker"}),e[5]||(e[5]=o("Docker Compose 1.25.1",-1))]),e[9]||(e[9]=o(" â€“ that was just released early January â€“ includes BuildKit support!",-1))]),e[12]||(e[12]=k(`<p>BuildKit support for Docker Compose is actually achieved by redirecting the <em>docker-compose</em> build to the Docker CLI with a limited feature set.</p><hr><h2 id="enabling-buildkit-build" tabindex="-1"><a class="header-anchor" href="#enabling-buildkit-build"><span>Enabling Buildkit build</span></a></h2><p>To enable this, we have to align some stars.</p><p>First, it requires that the Docker CLI binary present in your PATH:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">which</span> <span class="token function">docker</span></span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># /usr/local/bin/docker</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Second, <em>docker-compose</em> has to be run with the environment variable <code>COMPOSE_DOCKER_CLI_BUILD</code> set to 1 like in:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token assign-left variable">COMPOSE_DOCKER_CLI_BUILD</span><span class="token operator">=</span><span class="token number">1</span> <span class="token function">docker-compose</span> build</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This instruction tells <em>docker-compose</em> to use the Docker CLI when executing a build. You should see the same build output, but starting with the experimental warning.</p><p>As <em>docker-compose</em> passes its environment variables to the Docker CLI, we can also tell the CLI to use BuildKit instead of the default builder. To accomplish that, we can execute this:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token assign-left variable">COMPOSE_DOCKER_CLI_BUILD</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">DOCKER_BUILDKIT</span><span class="token operator">=</span><span class="token number">1</span> <span class="token function">docker-compose</span> build</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>A short video is worth a thousand words:</p>`,12)),s(u,{src:"https://docker.com/app/uploads/2020/01/ComposeBuildKit.mov"}),e[13]||(e[13]=t("div",{class:"hint-container note"},[t("p",{class:"hint-container-title"},"Note"),t("p",null,"Please note that BuildKit support in docker-compose was initially released with Docker Compose 1.25.0. This feature is marked as experimental for now.")],-1)),b(" TODO: add ARTICLE CARD "),s(i,r(l({title:"Faster builds in Docker Compose 1.25.1 thanks to BuildKit SupportDocker",desc:"One of the most requested features for the docker-compose tool is definitely support for building using Buildkit which is an alternative builder with great capabilities, like caching, concurrency and ability to use custom front-ends just to mention a few... Ahhh with a nice blue output! And the good news is that Docker Compose 1.25.1 - that was just released early January â€“ includes BuildKit support!",link:"https://chanhi2000.github.io/bookshelf/docker.com/faster-builds-in-compose-thanks-to-buildkit-support.html",logo:"https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png",background:"rgba(29,99,237,0.2)"})),null,16)])}const R=m(D,[["render",I]]),A=JSON.parse('{"path":"/docker.com/faster-builds-in-compose-thanks-to-buildkit-support.html","title":"Faster builds in Docker Compose 1.25.1 thanks to BuildKit SupportDocker","lang":"en-US","frontmatter":{"lang":"en-US","title":"Faster builds in Docker Compose 1.25.1 thanks to BuildKit SupportDocker","description":"Article(s) > Faster builds in Docker Compose 1.25.1 thanks to BuildKit SupportDocker","icon":"fa-brands fa-docker","category":["DevOps","Docker","Article(s)"],"tag":["blog","docker.com","devops","docker"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Faster builds in Docker Compose 1.25.1 thanks to BuildKit SupportDocker\\",\\"image\\":[\\"https://docker.com/app/uploads/2020/01/alvaro-bernal-RgIKRYhmG2k-unsplash-1110x740.jpg\\"],\\"datePublished\\":\\"2020-01-23T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/docker.com/faster-builds-in-compose-thanks-to-buildkit-support.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Faster builds in Docker Compose 1.25.1 thanks to BuildKit SupportDocker"}],["meta",{"property":"og:description","content":"Article(s) > Faster builds in Docker Compose 1.25.1 thanks to BuildKit SupportDocker"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://docker.com/app/uploads/2020/01/alvaro-bernal-RgIKRYhmG2k-unsplash-1110x740.jpg"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://docker.com/app/uploads/2020/01/alvaro-bernal-RgIKRYhmG2k-unsplash-1110x740.jpg"}],["meta",{"name":"twitter:image:alt","content":"Faster builds in Docker Compose 1.25.1 thanks to BuildKit SupportDocker"}],["meta",{"property":"article:tag","content":"docker"}],["meta",{"property":"article:tag","content":"devops"}],["meta",{"property":"article:tag","content":"docker.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2020-01-23T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Faster builds in Docker Compose 1.25.1 thanks to BuildKit SupportDocker"},{"property":"og:description","content":"Faster builds in Docker Compose 1.25.1 thanks to BuildKit SupportDocker"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/docker.com/faster-builds-in-compose-thanks-to-buildkit-support.html"}]],"prev":"/devops/docker/articles/README.md","date":"2020-01-23T00:00:00.000Z","isOriginal":false,"author":null,"cover":"https://docker.com/app/uploads/2020/01/alvaro-bernal-RgIKRYhmG2k-unsplash-1110x740.jpg"},"git":{},"readingTime":{"minutes":2.05,"words":614},"filePathRelative":"docker.com/faster-builds-in-compose-thanks-to-buildkit-support.md"}');export{R as comp,A as data};
