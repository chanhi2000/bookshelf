import{_ as g}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as m,d as s,f as a,b as o,t as k,n as h,g as v,w as t,e,r,o as y}from"./app-BItykJLQ.js";const f={},b={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},w={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},T={class:"table-of-contents"},R={href:"https://github.com/App-vNext/Polly",target:"_blank",rel:"noopener noreferrer"},P={href:"https://youtu.be/PqVQFUCTzUM",target:"_blank",rel:"noopener noreferrer"},x={href:"https://pollydocs.org/strategies/",target:"_blank",rel:"noopener noreferrer"},q={href:"https://pollydocs.org/strategies/retry.html#defaults",target:"_blank",rel:"noopener noreferrer"},A={href:"https://pollydocs.org/strategies/hedging.html",target:"_blank",rel:"noopener noreferrer"},C={href:"https://pollydocs.org/strategies/fallback.html",target:"_blank",rel:"noopener noreferrer"},E={href:"https://pollydocs.org/strategies/",target:"_blank",rel:"noopener noreferrer"};function j(c,n){const u=r("VPCard"),l=r("router-link"),d=r("SiteInfo"),i=r("VPIcon"),p=r("RouteLink");return y(),m("div",null,[s("h1",b,[s("a",w,[s("span",null,k(c.$frontmatter.title)+" ê´€ë ¨",1)])]),a(u,h(v({title:"C# > Article(s)",desc:"Article(s)",link:"/programming/cs/articles/README.md",logo:"https://chanhi2000.github.io/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",T,[s("ul",null,[s("li",null,[a(l,{to:"#resilience-why-you-should-care"},{default:t(()=>[...n[0]||(n[0]=[e("Resilience: Why You Should Care",-1)])]),_:1})]),s("li",null,[a(l,{to:"#resilience-pipelines"},{default:t(()=>[...n[1]||(n[1]=[e("Resilience Pipelines",-1)])]),_:1})]),s("li",null,[a(l,{to:"#resilience-pipelines-and-dependency-injection"},{default:t(()=>[...n[2]||(n[2]=[e("Resilience Pipelines and Dependency Injection",-1)])]),_:1})]),s("li",null,[a(l,{to:"#resilience-strategies-and-polly"},{default:t(()=>[...n[3]||(n[3]=[e("Resilience Strategies and Polly",-1)])]),_:1})]),s("li",null,[a(l,{to:"#http-request-resilience"},{default:t(()=>[...n[4]||(n[4]=[e("HTTP Request Resilience",-1)])]),_:1})]),s("li",null,[a(l,{to:"#takeaway"},{default:t(()=>[...n[5]||(n[5]=[e("Takeaway",-1)])]),_:1})])])]),n[55]||(n[55]=s("hr",null,null,-1)),a(d,{name:"Building Resilient Cloud Applications With .NET",desc:"By designing your applications with resilience in mind, you can create robust and reliable systems, even when the going gets tough. In this newsletter, we'll explore the tools and techniques we have in .NET to build resilient systems.",url:"https://milanjovanovic.tech/blog/building-resilient-cloud-applications-with-dotnet/",logo:"https://milanjovanovic.tech/profile_favicon.png",preview:"https://milanjovanovic.tech/blog-covers/mnw_089.png"}),n[56]||(n[56]=o('<p>From my experience working with microservices systems, things don&#39;t always go as planned. Network requests randomly fail, application servers become overloaded, and unexpected errors appear. That&#39;s where resilience comes in.</p><p>Resilient applications can recover from transient failures and continue to function. Resilience is achieved by designing applications that can handle failures gracefully and recover quickly.</p><p>By designing your applications with resilience in mind, you can create robust and reliable systems, even when the going gets tough.</p><p>In this newsletter, we&#39;ll explore the tools and techniques we have in .NET to build resilient systems.</p><hr><h2 id="resilience-why-you-should-care" tabindex="-1"><a class="header-anchor" href="#resilience-why-you-should-care"><span>Resilience: Why You Should Care</span></a></h2><p>Sending HTTP requests is a common approach for remote communication between services. However, HTTP requests are susceptible to failures from network or server issues. These failures can disrupt service availability, especially as dependencies increase and the risk of cascading failures grows.</p><p>So, how can you improve the resilience of your applications and services?</p><p>Here are a few strategies you can consider to increase resilience:</p><ul><li><strong>Retries</strong>: Retry requests that fail due to transient errors.</li><li><strong>Timeouts</strong>: Cancel requests that exceed a specified time limit.</li><li><strong>Fallbacks</strong>: Define alternative actions or results for failed operations.</li><li><strong>Circuit Breakers</strong>: Temporarily suspend communication with unavailable services.</li></ul><p>You can use these strategies individually or in combination for optimal HTTP request resilience.</p><p>Let&#39;s see how we can introduce resilience in a .NET application.</p><hr><h2 id="resilience-pipelines" tabindex="-1"><a class="header-anchor" href="#resilience-pipelines"><span>Resilience Pipelines</span></a></h2>',14)),s("p",null,[n[7]||(n[7]=e("With .NET 8, integrating resilience into your applications has become much simpler. We can use ",-1)),n[8]||(n[8]=s("code",null,"Microsoft.Extensions.Resilience",-1)),n[9]||(n[9]=e(" and ",-1)),n[10]||(n[10]=s("code",null,"Microsoft.Extensions.Http.Resilience",-1)),n[11]||(n[11]=e(", which are built on top of ",-1)),s("a",R,[a(i,{icon:"iconfont icon-github"}),n[6]||(n[6]=s("code",null,"App-vNext/Polly",-1))]),n[12]||(n[12]=e(". Polly is a .NET resilience and transient fault-handling library. Polly allows us to define resilience strategies such as retry, circuit breaker, timeout, rate-limiting, fallback, and hedging.",-1))]),s("p",null,[n[14]||(n[14]=e("Polly received a new API surface in its latest version (V8), which was implemented in collaboration with Microsoft. You can learn more about the ",-1)),s("a",P,[a(i,{icon:"fa-brands fa-youtube"}),n[13]||(n[13]=s("strong",null,"Polly V8 API in this video",-1))]),n[15]||(n[15]=e(".",-1))]),a(i,{icon:"fa-brands fa-PqVQFUCTzUM"}),n[57]||(n[57]=o(`<p>If you were previously using <code>Microsoft.Extensions.Http.Polly</code>, it is recommended that you switch to one of the previously mentioned packages.</p><p>Let&#39;s start by installing the required NuGet packages:</p><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell"><pre><code class="language-powershell"><span class="line"><span class="token function">Install-Package</span> Microsoft<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span>Resilience</span>
<span class="line"><span class="token function">Install-Package</span> Microsoft<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span>Http<span class="token punctuation">.</span>Resilience</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,3)),s("p",null,[n[17]||(n[17]=e("To use resilience, you must first build a pipeline consisting of resilience ",-1)),s("a",x,[a(i,{icon:"fas fa-globe"}),n[16]||(n[16]=e("strategies",-1))]),n[18]||(n[18]=e(". Each strategy that we configure as part of the pipeline will execute in order of configuration. Order is important with resilience pipelines. Keep that in mind.",-1))]),n[58]||(n[58]=o(`<p>We start by creating an instance of <code>ResiliencePipelineBuilder</code>, which allows us to configure resilience strategies.</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line"><span class="token class-name">ResiliencePipeline</span> pipeline <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ResiliencePipelineBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">AddRetry</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">RetryStrategyOptions</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        ShouldHandle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PredicateBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Handle</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ConflictException<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        Delay <span class="token operator">=</span> TimeSpan<span class="token punctuation">.</span><span class="token function">FromSeconds</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        MaxRetryAttempts <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">        BackoffType <span class="token operator">=</span> DelayBackoffType<span class="token punctuation">.</span>Exponential<span class="token punctuation">,</span></span>
<span class="line">        UseJitter <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">AddTimeout</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">TimeoutStrategyOptions</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        Timeout <span class="token operator">=</span> TimeSpan<span class="token punctuation">.</span><span class="token function">FromSeconds</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">await</span> pipeline<span class="token punctuation">.</span><span class="token function">ExecuteAsync</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token keyword">async</span> ct <span class="token operator">=&gt;</span> <span class="token keyword">await</span> httpClient<span class="token punctuation">.</span><span class="token function">GetAsync</span><span class="token punctuation">(</span><span class="token string">&quot;https://modularmonolith.com&quot;</span><span class="token punctuation">,</span> ct<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    cancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here&#39;s what we&#39;re adding to the resilience pipeline:</p>`,3)),s("ul",null,[s("li",null,[n[20]||(n[20]=s("code",null,"AddRetry",-1)),n[21]||(n[21]=e(" - Configures a retry resilience strategy, which we can further configure by passing in a ",-1)),n[22]||(n[22]=s("code",null,"RetryStrategyOptions",-1)),n[23]||(n[23]=e(" instance. We can provide a predicate for the ",-1)),n[24]||(n[24]=s("code",null,"ShouldHandle",-1)),n[25]||(n[25]=e(" property to define which exceptions the resilience strategy should handle. The retry strategy also comes with some sensible ",-1)),s("a",q,[a(i,{icon:"fas fa-globe"}),n[19]||(n[19]=e("default values",-1))]),n[26]||(n[26]=e(".",-1))]),n[27]||(n[27]=s("li",null,[s("code",null,"AddTimeout"),e(" - Configures a timeout strategy that will throw a "),s("code",null,"TimeoutRejectedException"),e(" if the delegate does not complete before the timeout. We can provide a custom timeout by passing in a "),s("code",null,"TimeoutStrategyOptions"),e(" instance. The default timeout is 30 seconds.")],-1))]),n[59]||(n[59]=o(`<p>Finally, we can <code>Build</code> the resilience pipeline and get back a configured <code>ResiliencePipeline</code> instance that will apply the respective resilience strategies. To use the <code>ResiliencePipeline</code>, we can call the <code>ExecuteAsync</code> method and pass in a delegate.</p><hr><h2 id="resilience-pipelines-and-dependency-injection" tabindex="-1"><a class="header-anchor" href="#resilience-pipelines-and-dependency-injection"><span>Resilience Pipelines and Dependency Injection</span></a></h2><p>Configuring a resilience pipeline every time we want to use it is cumbersome. .NET 8 introduces a new extension method for the <code>IServiceCollection</code> interface that allows us to register resilience pipelines with dependency injection.</p><p>Instead of manually configuring resilience every time, you ask for a pre-made pipeline by name.</p><p>We start by calling the <code>AddResiliencePipeline</code> method, which allows us to configure the resilience pipeline. Each resilience pipeline needs to have a unique key. We can use this key to resolve the respective resilience pipeline instance.</p><p>In this example, we&#39;re passing in a <code>string</code> key which allows us to configure the non-generic <code>ResiliencePipelineBuilder</code>.</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line">services<span class="token punctuation">.</span><span class="token function">AddResiliencePipeline</span><span class="token punctuation">(</span><span class="token string">&quot;retry&quot;</span><span class="token punctuation">,</span> builder <span class="token operator">=&gt;</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    builder<span class="token punctuation">.</span><span class="token function">AddRetry</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">RetryStrategyOptions</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        Delay <span class="token operator">=</span> TimeSpan<span class="token punctuation">.</span><span class="token function">FromSeconds</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        MaxRetryAttempts <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">        BackoffType <span class="token operator">=</span> DelayBackoffType<span class="token punctuation">.</span>Exponential<span class="token punctuation">,</span></span>
<span class="line">        UseJitter <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8)),s("p",null,[n[30]||(n[30]=e("However, we can also specify generic arguments when calling ",-1)),n[31]||(n[31]=s("code",null,"AddResiliencePipeline",-1)),n[32]||(n[32]=e(". This allows us to configure a typed resilience pipeline using ",-1)),n[33]||(n[33]=s("code",null,"ResiliencePipelineBuilder<TResult>",-1)),n[34]||(n[34]=e(". Using this approach, we can access the ",-1)),s("a",A,[a(i,{icon:"fas fa-globe"}),n[28]||(n[28]=e("hedging",-1))]),n[35]||(n[35]=e(" and ",-1)),s("a",C,[a(i,{icon:"fas fa-globe"}),n[29]||(n[29]=e("fallback",-1))]),n[36]||(n[36]=e(" strategies.",-1))]),n[60]||(n[60]=o(`<p>In the following example, we&#39;re configuring a fallback strategy by calling <code>AddFallback</code>. This allows us to provide a fallback value that we can return in case of a failure. The fallback could be a static value or come from another HTTP request or the database.</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line">services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddResiliencePipeline</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> GitHubUser<span class="token punctuation">?</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;gh-fallback&quot;</span><span class="token punctuation">,</span> builder <span class="token operator">=&gt;</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    builder<span class="token punctuation">.</span><span class="token function">AddFallback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">FallbackStrategyOptions<span class="token punctuation">&lt;</span>GitHubUser<span class="token punctuation">?</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        FallbackAction <span class="token operator">=</span> _ <span class="token operator">=&gt;</span></span>
<span class="line">            Outcome<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">FromResultAsValueTask</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>GitHubUser<span class="token punctuation">?</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>GitHubUser<span class="token punctuation">.</span>Empty<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To use resilience pipelines configured with dependency injection, we can use the <code>ResiliencePipelineProvider</code>. It exposes a <code>GetPipeline</code> method for obtaining the pipeline instance. We have to provide the key used to register the resilience pipeline.</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line">app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;users&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token class-name">HttpClient</span> httpClient<span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name">ResiliencePipelineProvider<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> pipelineProvider<span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">ResiliencePipeline<span class="token punctuation">&lt;</span>GitHubUser<span class="token punctuation">?</span><span class="token punctuation">&gt;</span></span> pipeline <span class="token operator">=</span></span>
<span class="line">        pipelineProvider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetPipeline</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>GitHubUser<span class="token punctuation">?</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;gh-fallback&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token class-name"><span class="token keyword">var</span></span> user <span class="token operator">=</span> <span class="token keyword">await</span> pipeline<span class="token punctuation">.</span><span class="token function">ExecuteAsync</span><span class="token punctuation">(</span><span class="token keyword">async</span> token <span class="token operator">=&gt;</span></span>
<span class="line">        <span class="token keyword">await</span> httpClient<span class="token punctuation">.</span><span class="token function">GetAsync</span><span class="token punctuation">(</span><span class="token string">&quot;api/users&quot;</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        cancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="resilience-strategies-and-polly" tabindex="-1"><a class="header-anchor" href="#resilience-strategies-and-polly"><span>Resilience Strategies and Polly</span></a></h2>`,6)),s("p",null,[s("a",E,[a(i,{icon:"fas fa-globe"}),n[37]||(n[37]=e("Resilience strategies",-1))]),n[38]||(n[38]=e(" are the core component of Polly. They're designed to run custom callbacks while introducing an additional layer of resilience. We can't run these strategies directly. Instead, we execute them through a resilience pipeline.",-1))]),n[61]||(n[61]=o('<p>Polly categorizes resilience strategies into <strong>reactive</strong> and <strong>proactive</strong>. Reactive strategies handle specific exceptions or results. Proactive strategies decide to cancel or reject the execution of callbacks using a rate limiter or a timeout resilience strategy.</p><p>Polly has the following built-in resilience strategies:</p><ul><li><strong>Retry</strong>: The classic &quot;try again&quot; approach. Works great for temporary network glitches. You can configure how many retries you have and even add some randomness (jitter) to avoid overloading the system if everyone retries at once.</li><li><strong>Circuit-breaker</strong>: Like an electrical circuit breaker, this prevents hammering a failing system. If errors pile up, the circuit breaker &quot;trips&quot; temporarily to give the system time to recover.</li><li><strong>Fallback</strong>: Provides a safe, default response if your primary call fails. It might be a cached result or a simple &quot;service unavailable&quot; message.</li><li><strong>Hedging</strong>: Makes multiple requests simultaneously, taking the first successful response. It is helpful if your system has numerous ways of handling something.</li><li><strong>Timeout</strong>: Prevents requests from hanging forever by terminating them if the timeout is exceeded.</li><li><strong>Rate-limiter</strong>: Throttles outgoing requests to prevent overwhelming external services.</li></ul><hr><h2 id="http-request-resilience" tabindex="-1"><a class="header-anchor" href="#http-request-resilience"><span>HTTP Request Resilience</span></a></h2><p>Sending HTTP calls to external services is how your application interacts with the outside world. These could be third-party services like payment gateways and identity providers or other services your team owns and operates.</p><p>The <code>Microsoft.Extensions.Http.Resilience</code> library comes with ready-to-use resilience pipelines for sending HTTP requests.</p>',7)),s("p",null,[n[40]||(n[40]=e("We can add resilience to outgoing ",-1)),a(p,{to:"/milanjovanovic.tech/the-right-way-to-use-httpclient-in-dotnet.html"},{default:t(()=>[...n[39]||(n[39]=[s("strong",null,"HttpClient requests",-1)])]),_:1}),n[41]||(n[41]=e(" using the ",-1)),n[42]||(n[42]=s("code",null,"AddStandardResilienceHandler",-1)),n[43]||(n[43]=e(" method.",-1))]),n[62]||(n[62]=o(`<div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line">services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddHttpClient</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>GitHubService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">static</span> <span class="token punctuation">(</span>httpClient<span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    httpClient<span class="token punctuation">.</span>BaseAddress <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span><span class="token string">&quot;https://api.github.com/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">.</span><span class="token function">AddStandardResilienceHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1)),s("p",null,[n[45]||(n[45]=e("This also means you can eliminate any ",-1)),a(p,{to:"/milanjovanovic.tech/extending-httpclient-with-delegating-handlers-in-aspnetcore.html"},{default:t(()=>[...n[44]||(n[44]=[s("strong",null,"delegating handlers",-1)])]),_:1}),n[46]||(n[46]=e(" you previously used for resilience.",-1))]),n[63]||(n[63]=o('<p>The standard resilience handler combines five Polly strategies to create a resilience pipeline suitable for most scenarios. The standard pipeline contains the following strategies:</p><ul><li><strong>Rate limiter</strong>: Limits the maximum number of concurrent requests sent to the dependency.</li><li><strong>Total request timeout</strong>: Introduces a total timeout, including any retry attempts.</li><li><strong>Retry</strong>: Retries a request if it fails because of a timeout or a transient error.</li><li><strong>Circuit breaker</strong>: Prevents sending further requests if too many failures are detected.</li><li><strong>Attempt timeout</strong>: Introduces a timeout for an individual request.</li></ul><p>You can customize any aspect of the standard resilience pipeline by configuring the <code>HttpStandardResilienceOptions</code>.</p><hr><h2 id="takeaway" tabindex="-1"><a class="header-anchor" href="#takeaway"><span>Takeaway</span></a></h2><p>Resilience isn&#39;t just a buzzword; it&#39;s a core principle for building reliable software systems. We&#39;re fortunate to have powerful tools like <code>Microsoft.Extensions.Resilience</code> and Polly at our disposal. We can use them to design systems that gracefully handle any transient failures.</p>',6)),s("p",null,[n[48]||(n[48]=e("Good ",-1)),a(p,{to:"/milanjovanovic.tech/introduction-to-distributed-tracing-with-opentelemetry-in-dotnet.html"},{default:t(()=>[...n[47]||(n[47]=[s("strong",null,"monitoring and observability",-1)])]),_:1}),n[49]||(n[49]=e(" are essential to understand how your resilience mechanisms work in production. Remember, the goal isn't to eliminate failures but to gracefully handle them and keep your application functioning.",-1))]),s("p",null,[n[52]||(n[52]=e("Ready to dive deeper into resilient architecture? My advanced course on ",-1)),a(p,{to:"/milanjovanovic.tech/modular-monolith-architecture/"},{default:t(()=>[...n[50]||(n[50]=[s("strong",null,"building modular monoliths",-1)])]),_:1}),n[53]||(n[53]=e(" will equip you with the skills to design and implement robust, scalable systems. Check out ",-1)),a(p,{to:"/milanjovanovic.tech/modular-monolith-architecture/"},{default:t(()=>[...n[51]||(n[51]=[s("strong",null,"Modular Monolith Architecture",-1)])]),_:1}),n[54]||(n[54]=e(".",-1))]),n[64]||(n[64]=s("div",{class:"hint-container info"},[s("p",{class:"hint-container-title"},"Challenge"),s("p",null,"Take a look at your existing .NET projects. Are there any critical areas where a little resilience could go a long way? Pick one and try applying some of the techniques we've discussed here.")],-1)),n[65]||(n[65]=s("p",null,"That's all for today.",-1)),n[66]||(n[66]=s("p",null,"See you next week.",-1))])}const B=g(f,[["render",j]]),N=JSON.parse('{"path":"/milanjovanovic.tech/building-resilient-cloud-applications-with-dotnet.html","title":"Building Resilient Cloud Applications With .NET","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Building Resilient Cloud Applications With .NET","description":"Article(s) > Building Resilient Cloud Applications With .NET","icon":"iconfont icon-csharp","category":["C#","DotNet","Article(s)"],"tag":["blog","milanjovanovic.tech","cs","c#","csharp","dotnet"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Building Resilient Cloud Applications With .NET\\",\\"image\\":[\\"https://milanjovanovic.tech/blog-covers/mnw_089.png\\"],\\"datePublished\\":\\"2024-05-11T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Milan JovanoviÄ‡\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/milanjovanovic.tech/building-resilient-cloud-applications-with-dotnet.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Building Resilient Cloud Applications With .NET"}],["meta",{"property":"og:description","content":"Article(s) > Building Resilient Cloud Applications With .NET"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://milanjovanovic.tech/blog-covers/mnw_089.png"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://milanjovanovic.tech/blog-covers/mnw_089.png"}],["meta",{"name":"twitter:image:alt","content":"Building Resilient Cloud Applications With .NET"}],["meta",{"property":"article:author","content":"Milan JovanoviÄ‡"}],["meta",{"property":"article:tag","content":"dotnet"}],["meta",{"property":"article:tag","content":"csharp"}],["meta",{"property":"article:tag","content":"c#"}],["meta",{"property":"article:tag","content":"cs"}],["meta",{"property":"article:tag","content":"milanjovanovic.tech"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2024-05-11T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Building Resilient Cloud Applications With .NET"},{"property":"og:description","content":"Building Resilient Cloud Applications With .NET"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/milanjovanovic.tech/building-resilient-cloud-applications-with-dotnet.html"}]],"prev":"/programming/cs/articles/README.md","date":"2024-05-11T00:00:00.000Z","isOriginal":false,"author":"Milan JovanoviÄ‡","cover":"https://milanjovanovic.tech/blog-covers/mnw_089.png"},"git":{},"readingTime":{"minutes":5.64,"words":1693},"filePathRelative":"milanjovanovic.tech/building-resilient-cloud-applications-with-dotnet.md","copyright":{"author":"Milan JovanoviÄ‡"}}');export{B as comp,N as data};
