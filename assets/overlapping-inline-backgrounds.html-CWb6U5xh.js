import{_ as f}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as q,d as a,f as t,b as p,a as w,t as y,n as g,g as v,w as l,e as s,r as i,o as x}from"./app-BVguHYKu.js";const C={},T={id:"frontmatter-title-관련",tabindex:"-1"},S={class:"header-anchor",href:"#frontmatter-title-관련"},G={class:"table-of-contents"},B={href:"https://x.com/LukyVJ/status/1894338305795244316",target:"_blank",rel:"noopener noreferrer"},z={href:"https://frontendmasters.com/blog/author/temaniafif/",target:"_blank",rel:"noopener noreferrer"},A={href:"https://x.com/ChallengesCss/status/1894354015531450664",target:"_blank",rel:"noopener noreferrer"},V={href:"https://css-tricks.com/decorating-lines-of-text-with-box-decoration-break/",target:"_blank",rel:"noopener noreferrer"},j={href:"https://webplatform.github.io/docs/svg/elements/feComponentTransfer/",target:"_blank",rel:"noopener noreferrer"},M={href:"https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/in",target:"_blank",rel:"noopener noreferrer"},F={href:"https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/result",target:"_blank",rel:"noopener noreferrer"},R={href:"https://developer.mozilla.org/en-US/docs/Web/SVG/Element/feColorMatrix",target:"_blank",rel:"noopener noreferrer"},I={href:"https://bsky.app/profile/anatudor.bsky.social/post/3kqibnwoquk2m",target:"_blank",rel:"noopener noreferrer"},W={href:"https://bsky.app/profile/anatudor.bsky.social/post/3kojyswsn2q2w",target:"_blank",rel:"noopener noreferrer"},P={href:"https://issues.chromium.org/issues/373410239",target:"_blank",rel:"noopener noreferrer"},D={href:"https://cdpn.io/pen/debug/KwKvRKr",target:"_blank",rel:"noopener noreferrer"},U={href:"https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/in2",target:"_blank",rel:"noopener noreferrer"},N={href:"https://developer.mozilla.org/en-US/docs/Web/SVG/Element/feMerge",target:"_blank",rel:"noopener noreferrer"},O={href:"https://developer.mozilla.org/en-US/docs/Web/SVG/Element/feBlend",target:"_blank",rel:"noopener noreferrer"},E={href:"https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/mode",target:"_blank",rel:"noopener noreferrer"},L={href:"https://codepen.io/thebabydino/pen/gbOwxGL",target:"_blank",rel:"noopener noreferrer"},J={href:"https://mastodon.social/@patrick_h_lauke/114064700058785709",target:"_blank",rel:"noopener noreferrer"},K={href:"https://codepen.io/patrickhlauke/pen/jOzJwvZ",target:"_blank",rel:"noopener noreferrer"},Z={href:"https://codepen.io/thebabydino/pen/ogNzGpw",target:"_blank",rel:"noopener noreferrer"},$={href:"https://codepen.io/thebabydino/pen/azbpKpg",target:"_blank",rel:"noopener noreferrer"},H={href:"https://bugzilla.mozilla.org/show_bug.cgi?id=1951653",target:"_blank",rel:"noopener noreferrer"},Y={href:"https://codepen.io/thebabydino/pen/pvormNg",target:"_blank",rel:"noopener noreferrer"},Q={href:"https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/color-interpolation-filters",target:"_blank",rel:"noopener noreferrer"},X={href:"https://codepen.io/thebabydino/pen/yyLgWjQ",target:"_blank",rel:"noopener noreferrer"},_={href:"https://developer.mozilla.org/en-US/docs/Web/SVG/Element/feFlood",target:"_blank",rel:"noopener noreferrer"},nn={href:"https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/operator#fecomposite",target:"_blank",rel:"noopener noreferrer"},an={href:"https://developer.mozilla.org/en-US/docs/Web/SVG/Element/feComposite",target:"_blank",rel:"noopener noreferrer"},sn={href:"https://codepen.io/thebabydino/pen/JojEqBo",target:"_blank",rel:"noopener noreferrer"},tn={href:"https://codepen.io/thebabydino/pen/ZYEJBZr",target:"_blank",rel:"noopener noreferrer"},en={href:"https://mastodon.social/@AmeliaBR@front-end.social/114065645349479429",target:"_blank",rel:"noopener noreferrer"},pn={href:"https://codepen.io/AmeliaBR/pen/XJWjEmM?editors=1100",target:"_blank",rel:"noopener noreferrer"},on={href:"https://css-tricks.com/adventures-in-css-semi-transparency-land/",target:"_blank",rel:"noopener noreferrer"},ln={href:"https://pugjs.org/api/getting-started.html",target:"_blank",rel:"noopener noreferrer"},cn={href:"https://bsky.app/profile/anatudor.bsky.social/post/3kzquolz3xs2c",target:"_blank",rel:"noopener noreferrer"},un={href:"https://developer.mozilla.org/en-US/docs/Web/Accessibility/Guides/Understanding_WCAG/Perceivable/Color_contrast",target:"_blank",rel:"noopener noreferrer"};function rn(c,n){const m=i("VPCard"),u=i("router-link"),h=i("SiteInfo"),e=i("VPIcon"),o=i("VidStack"),r=i("CodePen"),b=i("Tabs");return x(),q("div",null,[a("h1",T,[a("a",S,[a("span",null,y(c.$frontmatter.title)+" 관련",1)])]),t(m,g(v({title:"CSS > Article(s)",desc:"Article(s)",link:"/programming/css/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),a("nav",G,[a("ul",null,[a("li",null,[t(u,{to:"#the-initial-problem-and-exact-particular-solution"},{default:l(()=>n[0]||(n[0]=[s("The initial problem and exact particular solution")])),_:1,__:[0]})]),a("li",null,[t(u,{to:"#expanding-the-problem-scope"},{default:l(()=>n[1]||(n[1]=[s("Expanding the problem scope")])),_:1,__:[1]}),a("ul",null,[a("li",null,[t(u,{to:"#a-related-problem"},{default:l(()=>n[2]||(n[2]=[s("A related problem")])),_:1,__:[2]})]),a("li",null,[t(u,{to:"#the-simplest-case-separate-spans-opaque-backgrounds-black-white-text"},{default:l(()=>n[3]||(n[3]=[s("The simplest case: separate spans, opaque backgrounds, black/ white text")])),_:1,__:[3]})]),a("li",null,[t(u,{to:"#slightly-more-complex-long-wrapping-span-opaque-background-black-white-text"},{default:l(()=>n[4]||(n[4]=[s("Slightly more complex: long wrapping span, opaque background, black/ white text")])),_:1,__:[4]})]),a("li",null,[t(u,{to:"#the-most-complex-case-transparent-background-where-neither-the-text-nor-the-background-are-black-white"},{default:l(()=>n[5]||(n[5]=[s("The most complex case: transparent background where neither the text nor the background are black/white")])),_:1,__:[5]})])])])])]),n[207]||(n[207]=a("hr",null,null,-1)),t(h,{name:"A Deep Dive into the Inline Background Overlap Problem",desc:"`box-decoration-break: clone;` in CSS can help us make for interesting backgrounds across lines of text that break, but when opacity gets involved, things can get complicated.",url:"https://frontendmasters.com/blog/overlapping-inline-backgrounds/",logo:"https://frontendmasters.com/favicon.ico",preview:"https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/5330"}),a("p",null,[n[9]||(n[9]=s("A")),a("a",B,[n[6]||(n[6]=s("tweet by Lucas Bonomi (")),t(e,{icon:"fa-brands fa-x-twitter"}),n[7]||(n[7]=a("code",null,"LukyVJ",-1)),n[8]||(n[8]=s(")"))]),n[10]||(n[10]=s("got me thinking about this problem: how to get a semitransparent background following some inline text with padding, but without the overlap problem that can be seen in the image below."))]),n[208]||(n[208]=a("figure",null,[a("img",{src:"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/416732169-9cbb369e-7dab-4ad1-b345-aefbdfaa50c9.png?resize=1024%2C250&ssl=1",alt:"Screenshot showing three lines of text, middle aligned, each with its own semitransparent background and padding. The padding on each line leads to intersection, and where we have intersection, the semi-transparent background becomes more opaque. The challenge is to get this result without the increase in alpha in the intersection areas.",tabindex:"0",loading:"lazy"}),a("figcaption",null,"Screenshot showing three lines of text, middle aligned, each with its own semitransparent background and padding. The padding on each line leads to intersection, and where we have intersection, the semi-transparent background becomes more opaque. The challenge is to get this result without the increase in alpha in the intersection areas.")],-1)),n[209]||(n[209]=a("p",null,"the problem at hand: the overlapping parts appear darker because of the layered opacity",-1)),a("p",null,[a("a",z,[t(e,{icon:"fas fa-globe"}),n[11]||(n[11]=s("Temani Afif"))]),n[15]||(n[15]=s(" had already ")),a("a",A,[n[12]||(n[12]=s("suggested (")),t(e,{icon:"fa-brands fa-x-twitter"}),n[13]||(n[13]=a("code",null,"ChallengesCss",-1)),n[14]||(n[14]=s(")"))]),n[16]||(n[16]=s(" using an SVG")),n[17]||(n[17]=a("code",null,"filter",-1)),n[18]||(n[18]=s("solution, and that was my first instinct too."))]),n[210]||(n[210]=p(`<p>While the initial problem has a pretty simple solution, more complex variations lead me down a deep rabbit hole and I thought the journey was worth sharing in an article.</p><hr><h2 id="the-initial-problem-and-exact-particular-solution" tabindex="-1"><a class="header-anchor" href="#the-initial-problem-and-exact-particular-solution"><span>The initial problem and exact particular solution</span></a></h2><p>We start with some middle-aligned text wrapped inside a<code>p</code>and a<code>span</code>. The<code>span</code>gets <code>padding</code>, <code>border-radius</code>,and a semi-transparent<code>background</code>.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">p &gt; span</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">padding</span><span class="token punctuation">:</span> .25em<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>0 0 0/ <span class="token function">var</span><span class="token punctuation">(</span>--a<span class="token punctuation">,</span> .7<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">box-decoration-break</span><span class="token punctuation">:</span> clone</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5)),a("p",null,[n[20]||(n[20]=s("We’re also setting")),n[21]||(n[21]=a("code",null,"box-decoration-break: clone",-1)),n[22]||(n[22]=s("so that each wrapped line gets its own")),n[23]||(n[23]=a("code",null,"padding",-1)),n[24]||(n[24]=s("and corner rounding (this is a very neat CSS feature that’s")),a("a",V,[t(e,{icon:"fas fa-globe"}),n[19]||(n[19]=s("worth looking into"))]),n[25]||(n[25]=s("if you’re not familiar with it)."))]),n[211]||(n[211]=p(`<p>The result of the above code looks as follows:</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419917091-aeb8f280-1a3b-4827-85c1-c6bf6425fb96.png?resize=800%2C192&amp;ssl=1" alt="what the above CSS gives us: the overlap problem" tabindex="0" loading="lazy"><figcaption>what the above CSS gives us: the overlap problem</figcaption></figure><p>This is pretty much the same as the screenshot Lucas posted, so let’s see how we can fix it with an SVG<code>filter</code>!</p><p>The first step is to make the<code>background</code>of the<code>span</code>opaque by setting<code>--a</code>to<code>1</code>. This gets rid of the overlap increasing alpha problem because there is no more transparency. To restore that transparency, we use an SVG<code>filter</code>. We’ll get to that in a moment, but for now, these are the styles we add:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token comment">/* same other styles as before */</span></span>
<span class="line"><span class="token selector">p</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--a</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>#alpha<span class="token punctuation">)</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The SVG<code>filter</code>needs to live inside an<code>svg</code>element. Since this<code>svg</code>element only contains our<code>filter</code>and no actual SVG graphics to be displayed on the screen, it is functionally the same as a<code>style</code>element, so there’s no need for it to be visible/ take up space in the document flow.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0<span class="token punctuation">&#39;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0<span class="token punctuation">&#39;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>true<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>alpha<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token comment">&lt;!-- filter content goes here --&gt;</span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">svg[height=&#39;0&#39;][aria-hidden=&#39;true&#39;]</span> <span class="token punctuation">{</span> <span class="token property">position</span><span class="token punctuation">:</span> fixed <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,8)),a("p",null,[n[28]||(n[28]=s("The first primitive,")),a("a",j,[t(e,{icon:"fas fa-globe"}),n[26]||(n[26]=a("code",null,"feComponentTransfer",-1))]),n[29]||(n[29]=s(", takes the")),n[30]||(n[30]=a("code",null,"SourceAlpha",-1)),n[31]||(n[31]=s("(basically, the")),n[32]||(n[32]=a("code",null,"filter",-1)),n[33]||(n[33]=s("input, with the RGB channels of all pixels zeroed, all pixels become black, but keep their alpha) as input (")),a("a",M,[t(e,{icon:"fa-brands fa-firefox"}),n[27]||(n[27]=a("code",null,"in",-1))]),n[34]||(n[34]=s(") and scales it to the desired alpha, basically giving us the semitransparent version of the shape of the")),n[35]||(n[35]=a("code",null,"span",-1)),n[36]||(n[36]=s("background. This is because the input alpha is")),n[37]||(n[37]=a("code",null,"1",-1)),n[38]||(n[38]=s("within the")),n[39]||(n[39]=a("code",null,"span",-1)),n[40]||(n[40]=s("background area and")),n[41]||(n[41]=a("code",null,"0",-1)),n[42]||(n[42]=s("outside it. Multiplying the desired alpha with")),n[43]||(n[43]=a("code",null,"1",-1)),n[44]||(n[44]=s("leaves it unchanged, while multiplying it with")),n[45]||(n[45]=a("code",null,"0",-1)),n[46]||(n[46]=s("… well, zeroes it."))]),n[212]||(n[212]=p(`<div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0<span class="token punctuation">&#39;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0<span class="token punctuation">&#39;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>true<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>alpha<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>SourceAlpha<span class="token punctuation">&#39;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>back<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>linear<span class="token punctuation">&#39;</span></span> <span class="token attr-name">slope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>.7<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1)),a("p",null,[n[48]||(n[48]=s("We’ve also named the")),a("a",F,[t(e,{icon:"fa-brands fa-firefox"}),n[47]||(n[47]=a("code",null,"result",-1))]),n[49]||(n[49]=s("of this primitive")),n[50]||(n[50]=a("code",null,"back",-1)),n[51]||(n[51]=s("so we can reference it later in primitives not immediately folowing this particular")),n[52]||(n[52]=a("code",null,"feComponentTransfer",-1)),n[53]||(n[53]=s("one."))]),n[213]||(n[213]=a("figure",null,[a("img",{src:"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419932978-df9f8eed-00ef-45b7-a954-bd8e7cbcf753-1.png?resize=800%2C192&ssl=1",alt:"result of the first filter step: the semitransparent black background",tabindex:"0",loading:"lazy"}),a("figcaption",null,"result of the first filter step: the semitransparent black background")],-1)),n[214]||(n[214]=a("p",null,[s("Now we have the semi-transparent multi-line"),a("code",null,"span"),s("background with no increase in alpha in the overlap areas. But we still need to get the text and add it on top of it.")],-1)),a("p",null,[n[57]||(n[57]=s("Next, we have a")),a("a",R,[t(e,{icon:"fa-brands fa-firefox"}),n[54]||(n[54]=a("code",null,"feColorMatrix",-1))]),n[58]||(n[58]=s("primitive that uses the")),a("a",I,[t(e,{icon:"fas fa-globe"}),n[55]||(n[55]=s("green channel as an alpha mask"))]),n[59]||(n[59]=s("(the second value on the last row of the matrix is the only non-zero one) and maxes out (sets to")),n[60]||(n[60]=a("code",null,"100%",-1)),n[61]||(n[61]=s(") all RGB channels of the output (last column, first three rows), basically")),a("a",W,[t(e,{icon:"fas fa-globe"}),n[56]||(n[56]=s("painting the output"))]),n[62]||(n[62]=s("white with an alpha equal to the input green channel value. This means the result is full transparency where the input’s green channel is zero (everywhere outside the white text) and opaque white where it’s maxed out (just for the white text)."))]),n[215]||(n[215]=p(`<div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alpha<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceAlpha<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>linear<span class="token punctuation">&quot;</span></span> <span class="token attr-name">slope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.7<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1 </span>
<span class="line">              0 0 0 0 1</span>
<span class="line">              0 0 0 0 1</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that by default, the inputs of any primitives other than the very first one in the<code>filter</code>get set to the result of the primitive right before, so for this<code>feColorMatrix</code>primitive we need to explicitly set the input<code>in</code>to<code>SourceGraphic</code>.</p>`,2)),a("p",null,[n[64]||(n[64]=s("Also note that there’s a reason behind using the green channel to extract the text. This is because when using Chrome and a wide gamut display, we may hit")),a("a",P,[t(e,{icon:"fa-brands fa-chrome"}),n[63]||(n[63]=s("a bug"))]),n[65]||(n[65]=p("which causes<code>feColorMatrix</code>to find for example red in what’s <code>0%</code> red, <code>100%</code> green and <code>0%</code> blue. And it’s not just that, but extracting the red channel out of<code>100%</code> red, <code>0%</code> green and<code>0%</code> blue doesn’t give us<code>100%</code> red, but a lower value.",17))]),n[216]||(n[216]=a("p",null,"To get an idea of just how bad the problem is, check out the comparison screenshot below - everything should have all channels either maxed out or zeroed (like on the left), there should be no in betweens (like on the right).",-1)),a("figure",null,[n[69]||(n[69]=a("img",{src:"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420838686-97a8bda8-f32c-4e6b-8ce7-4a2ff63feeb3.png?resize=1024%2C547&ssl=1",alt:'expected vs. wide gamut problem (<VPIcon icon="fa-brands fa-codepen"/>live test)',tabindex:"0",loading:"lazy"},null,-1)),a("figcaption",null,[n[67]||(n[67]=s("expected vs. wide gamut problem (")),a("a",D,[t(e,{icon:"fa-brands fa-codepen"}),n[66]||(n[66]=s("live test"))]),n[68]||(n[68]=s(")"))])]),n[217]||(n[217]=a("p",null,"After a bunch of tests, it results the problem is less noticeable when using the green channel (compared to when using the blue or red channels), so we’re trying to limit this bug on the hardware where it’s possible to hit it.",-1)),n[218]||(n[218]=a("p",null,"We now have just the white text:",-1)),n[219]||(n[219]=a("figure",null,[a("img",{src:"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419943848-cc3f8df9-621a-4c95-9227-9b64c8abd320.png?resize=800%2C192&ssl=1",alt:"result of the second filter step: just the white text",tabindex:"0",loading:"lazy"}),a("figcaption",null,"result of the second filter step: just the white text")],-1)),a("p",null,[n[71]||(n[71]=s("The final step is to place the semi-transparent black background underneath it (")),a("a",U,[t(e,{icon:"fa-brands fa-firefox"}),n[70]||(n[70]=a("code",null,"in2",-1))]),n[72]||(n[72]=s("specifies the bottom layer):"))]),n[220]||(n[220]=p(`<div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alpha<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceAlpha<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>linear<span class="token punctuation">&quot;</span></span> <span class="token attr-name">slope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.7<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1</span>
<span class="line">              0 0 0 0 1</span>
<span class="line">              0 0 0 0 1</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feBlend</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1)),a("p",null,[n[76]||(n[76]=s("I see")),a("a",N,[t(e,{icon:"fa-brands fa-firefox"}),n[73]||(n[73]=a("code",null,"feMerge",-1))]),n[77]||(n[77]=s("often used for this, but here we only have two layers, so I find")),a("a",O,[t(e,{icon:"fa-brands fa-firefox"}),n[74]||(n[74]=a("code",null,"feBlend",-1))]),n[78]||(n[78]=s("(with the default")),a("a",E,[t(e,{icon:"fa-brands fa-firefox"}),n[75]||(n[75]=a("code",null,"mode",-1))]),n[79]||(n[79]=s("of")),n[80]||(n[80]=a("code",null,"normal",-1)),n[81]||(n[81]=s("which just places the top layer")),n[82]||(n[82]=a("code",null,"in",-1)),n[83]||(n[83]=s("over the bottom layer")),n[84]||(n[84]=a("code",null,"in2",-1)),n[85]||(n[85]=s(") a much simpler solution."))]),n[221]||(n[221]=p("<p>Note that we’re not specifying<code>in</code>explicitly because, by default, it’s the result of the previous primitive, the<code>feColorMatrix</code>. This is also why we didn’t bother with setting the<code>result</code>attribute like we did for the first primitive, the<code>feComponentTransfer</code>one because the output of this<code>feColorMatrix</code> primitive only gets fed automatically into the<code>in</code>input of the final primitive and nowhere else after that.</p><p>Cool, right?</p>",2)),a("figure",null,[n[91]||(n[91]=a("img",{src:"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419953162-16382e11-1781-4ac9-af5b-3d49ac010d7a.png?resize=800%2C192&ssl=1",alt:'the desired result (live demo (<VPIcon icon="fa-brands fa-codepen"/>))',tabindex:"0",loading:"lazy"},null,-1)),a("figcaption",null,[n[89]||(n[89]=s("the desired result (")),a("a",L,[n[86]||(n[86]=s("live demo (")),t(e,{icon:"fa-brands fa-codepen"}),n[87]||(n[87]=a("code",null,"thebabydino",-1)),n[88]||(n[88]=s(")"))]),n[90]||(n[90]=s(")"))])]),n[222]||(n[222]=a("hr",null,null,-1)),n[223]||(n[223]=a("h2",{id:"expanding-the-problem-scope",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#expanding-the-problem-scope"},[a("span",null,"Expanding the problem scope")])],-1)),n[224]||(n[224]=a("p",null,"I thought this was a neat trick worth sharing, so I posted about it on social media, which lead to an interesting conversation on Mastodon.",-1)),n[225]||(n[225]=a("h3",{id:"a-related-problem",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#a-related-problem"},[a("span",null,"A related problem")])],-1)),a("p",null,[n[96]||(n[96]=s("Patrick H. Lauke")),a("a",J,[t(e,{icon:"fas fa-globe"}),n[92]||(n[92]=s("pointed me"))]),n[97]||(n[97]=s("to")),a("a",K,[n[93]||(n[93]=s("a CodePen demo (")),t(e,{icon:"fa-brands fa-codepen"}),n[94]||(n[94]=a("code",null,"patrickhlauke",-1)),n[95]||(n[95]=s(")"))]),n[98]||(n[98]=s("he had made a few years back, higlighting a related problem I wasn’t hitting with the quick demo I had shared: the background of the later lines covering up the text of the ones right before them."))]),n[226]||(n[226]=p('<p>My demo wasn’t hitting this problem because I had tried to stay reasonably close to the initial challenge screenshot, so I hadn’t used a big enough<code>padding</code>to run into it. But let’s say we increase the<code>padding</code>of the<code>span</code>from<code>.25em</code>to<code>.5em</code>(and also remove the<code>filter</code>to make the problem more obvious).</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419959733-8c866d6c-e940-4e24-b27e-294025425e69.png?resize=800%2C192&amp;ssl=1" alt="the bigger padding problem" tabindex="0" loading="lazy"><figcaption>the bigger padding problem</figcaption></figure><h3 id="the-simplest-case-separate-spans-opaque-backgrounds-black-white-text" tabindex="-1"><a class="header-anchor" href="#the-simplest-case-separate-spans-opaque-backgrounds-black-white-text"><span>The simplest case: separate spans, opaque backgrounds, black/ white text</span></a></h3><p>We first consider the case when we only have separate words wrapped in spans with opaque backgrounds and the text is either black or white (or at least very close). In this very simple case, a properly set<code>mix-blend-mode</code>on<code>span</code>elements (<code>darken</code>for black text,<code>lighten</code>for white) suffices, there’s no need for an SVG<code>filter</code>.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419973578-7e5dd953-22e5-4106-8a96-ed4a240ffcfe.png?resize=800%2C342&amp;ssl=1" alt="isolated spans on opaque contrasting background" tabindex="0" loading="lazy"><figcaption>isolated spans on opaque contrasting background</figcaption></figure><p>Both<code>darken</code>and<code>lighten</code>value work on a per pixel, per channel basis. For each pixel of the input, they take either the minimum (<code>darken</code>) or the maximum (<code>lighten</code>) channel value betwen the two blended layers to produce the result.</p><p>Black always has all channels smaller or at most equal to those of anything else. So when we blend any background layer with black text using the<code>darken</code>blend mode, the result always shows the black text where there is overlap because the<code>0%</code>-valued channels of the black text are always the result of the minimum computation.</p><p>White always has all channels bigger or at most equal to those of anything else. So when we blend any background layer with white text using the<code>lighten</code>blend mode, the result always shows the white text where there is overlap because the<code>100%</code>-valued channels of the white text are always the result of the maximum computation.</p><p>Now this works fine as it is when we don’t have any backdrop behind or when the backdrop is either white for black text or black for white text. In other cases, for example if we have a busy image behind, things don’t look as good as the<code>span</code>elements also get blended with the image backdrop.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419983532-e37313d6-3ab8-4f77-850f-84b6ff6cdb41.png?resize=800%2C342&amp;ssl=1" alt="isolated spans on busy background problem" tabindex="0" loading="lazy"><figcaption>isolated spans on busy background problem</figcaption></figure><p>Luckily, the fix is straightforward: we just need to set<code>isolation: isolate</code>on the parent paragraph!</p>',11)),a("figure",null,[n[104]||(n[104]=a("img",{src:"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419990476-c8acfa01-453b-46be-a940-f2f7d9919e13.png?resize=800%2C342&ssl=1",alt:'isolated spans on busy background solution (live demo (<VPIcon icon="fa-brands fa-codepen"/>))',tabindex:"0",loading:"lazy"},null,-1)),a("figcaption",null,[n[102]||(n[102]=s("isolated spans on busy background solution (")),a("a",Z,[n[99]||(n[99]=s("live demo (")),t(e,{icon:"fa-brands fa-codepen"}),n[100]||(n[100]=a("code",null,"thebabydino",-1)),n[101]||(n[101]=s(")"))]),n[103]||(n[103]=s(")"))])]),n[227]||(n[227]=p('<h3 id="slightly-more-complex-long-wrapping-span-opaque-background-black-white-text" tabindex="-1"><a class="header-anchor" href="#slightly-more-complex-long-wrapping-span-opaque-background-black-white-text"><span>Slightly more complex: long wrapping span, opaque background, black/ white text</span></a></h3><p>In this case, the<code>mix-blend-mode</code>solution isn’t enough anymore because the point of it was to blend the<code>span</code>background with the text of the parent paragraph that gets covered. But now it’s the<code>span</code>‘s own text that gets covered by the<code>background</code>of its next line.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420042481-0b030caf-58d6-4dcd-8e37-9c1ffe97a930.png?resize=800%2C264&amp;ssl=1" alt="long wrapping span problem in spite of mix-blend-mode" tabindex="0" loading="lazy"><figcaption>long wrapping span problem in spite of mix-blend-mode</figcaption></figure><p>To get around this, we wrap the entire<code>span</code>in another<code>span</code>and set the <code>padding</code> and <code>background</code> only on the outer<code>span</code>(<code>p &gt; span</code>). This causes the black/white text of the inner<code>span</code>as well as that of the paragraph around the spans to get blended with the outer<code>span</code>background.</p>',4)),a("figure",null,[n[110]||(n[110]=a("img",{src:"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420043339-b2559f56-e965-4ae6-812a-75c0d41c8275.png?resize=800%2C423&ssl=1",alt:'long wrapping span nesting solution (live demo (<VPIcon icon="fa-brands fa-codepen"/>))',tabindex:"0",loading:"lazy"},null,-1)),a("figcaption",null,[n[108]||(n[108]=s("long wrapping span nesting solution (")),a("a",$,[n[105]||(n[105]=s("live demo (")),t(e,{icon:"fa-brands fa-codepen"}),n[106]||(n[106]=a("code",null,"thebabydino",-1)),n[107]||(n[107]=s(")"))]),n[109]||(n[109]=s(")"))])]),a("p",null,[n[112]||(n[112]=s("If you’ve checked the above demo in Firefox, you may have noticed that it doesn’t work. This is due to")),a("a",H,[t(e,{icon:"fa-brands fa-firefox"}),n[111]||(n[111]=s("bug 1951653"))]),n[113]||(n[113]=s("."))]),n[228]||(n[228]=p(`<p>In the particular case when the<em>entire</em>text in the paragraph is wrapped in a<code>span</code>, we can avoid the Firefox bug by setting the<code>mix-blend-mode</code>property<em>only</em>on the inner<code>span</code>(<code>span span</code>).</p><p>However, in the case above, where we also have paragraph text outside the outer<code>span</code>too, this unfortunately still leaves us with the problem of that text before the long<code>span</code>getting covered by the background of the next<code>span</code>line.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420044455-77799210-3b25-4312-98a7-4cc296a9cdba.png?resize=800%2C264&amp;ssl=1" alt="Firefox workaround not good enough if there’s paragraph text before the long wrapping span" tabindex="0" loading="lazy"><figcaption>Firefox workaround not good enough if there’s paragraph text before the long wrapping span</figcaption></figure><h3 id="the-most-complex-case-transparent-background-where-neither-the-text-nor-the-background-are-black-white" tabindex="-1"><a class="header-anchor" href="#the-most-complex-case-transparent-background-where-neither-the-text-nor-the-background-are-black-white"><span>The most complex case: transparent background where neither the text nor the background are black/white</span></a></h3><p>In this case, the blending solution isn’t enough anymore and we need an SVG<code>filter</code>one.</p><p>Going back to our original demo, we need to apply the solution from the previous case: wrap the<code>span</code>in another, set the<code>padding</code>and<code>background</code>only on the outer one (<code>p &gt; span</code>), blend<em>only</em>the inner<code>span</code>element with the outer one to ensure our solution works cross-browser (since we have white text, we use the<code>lighten</code>mode) and prevent blending with anything outside the containing paragraph<code>p</code>by setting<code>isolation: isolate</code>on it.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">p</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">isolation</span><span class="token punctuation">:</span> isolate<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>#alpha<span class="token punctuation">)</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token selector">p &gt; span</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">padding</span><span class="token punctuation">:</span> .5em<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">background</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">box-decoration-break</span><span class="token punctuation">:</span> clone<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token selector">span</span> <span class="token punctuation">{</span> <span class="token property">mix-blend-mode</span><span class="token punctuation">:</span> lighten <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7)),a("figure",null,[n[119]||(n[119]=a("img",{src:"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420278763-d87f1df8-cc99-4e42-9aab-03662273003a.png?resize=800%2C192&ssl=1",alt:'the desired result in the bigger padding case (live demo (<VPIcon icon="fa-brands fa-codepen"/>))',tabindex:"0",loading:"lazy"},null,-1)),a("figcaption",null,[n[117]||(n[117]=s("the desired result in the bigger padding case (")),a("a",Y,[n[114]||(n[114]=s("live demo (")),t(e,{icon:"fa-brands fa-codepen"}),n[115]||(n[115]=a("code",null,"thebabydino",-1)),n[116]||(n[116]=s(")"))]),n[118]||(n[118]=s(")"))])]),n[229]||(n[229]=p(`<p>But what we want here is to move away from black/ white text and background, so let’s see how to do that.</p><h4 id="set-rgba-values-in-the-svg-filter" tabindex="-1"><a class="header-anchor" href="#set-rgba-values-in-the-svg-filter"><span>Set RGBA values in the SVG filter</span></a></h4><p>If we wanted to have a background that’s not semi-transparent black, but a semi-transparent dark blue, let’s say<code>rgb(25 25 112)</code>(which can also be written as<code>rgb(9.8% 9.8% 43.9%)</code>), as well as gold-orange text, let’s say<code>rgb(255 165 0)</code>(which can also be written as<code>rgb(100% 64.7% 0%)</code>), then we use<code>feColorMatrix</code>as the first primitive as well and alter the final column values on the first three matrix rows for both the first matrix giving us the background and the second one giving us the text to use the decimal representation of the three percentage RGB values:</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alpha<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0  .098 </span>
<span class="line">              0 0 0 0  .098 </span>
<span class="line">              0 0 0 0  .439 </span>
<span class="line">              0 0 0 .7 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">      <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1 </span>
<span class="line">              0 0 0 0 .647 </span>
<span class="line">              0 0 0 0 0 </span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feBlend</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4)),a("p",null,[n[121]||(n[121]=s("Other than the")),n[122]||(n[122]=a("code",null,"id",-1)),n[123]||(n[123]=s(", we’ve now also set")),a("a",Q,[t(e,{icon:"fa-brands fa-firefox"}),n[120]||(n[120]=s("another attribute"))]),n[124]||(n[124]=s("on the")),n[125]||(n[125]=a("code",null,"filter",-1)),n[126]||(n[126]=s("element. We aren’t going into it because I don’t really understand much about it, but just know that this attribute with this value needs to be added on any SVG")),n[127]||(n[127]=a("code",null,"filter",-1)),n[128]||(n[128]=s("that messes with the RGB channels. Otherwise, the result won’t be consistent between browsers (the default is")),n[129]||(n[129]=a("code",null,"linearRGB",-1)),n[130]||(n[130]=s("in theory, but only the")),n[131]||(n[131]=a("code",null,"sRGB",-1)),n[132]||(n[132]=s("value seems to work in Safari) and it may not match expectations (the")),n[133]||(n[133]=a("code",null,"sRGB",-1)),n[134]||(n[134]=s("value is the one that gives us the result we want). Previously, having just white text on a black background, we didn’t really need it and it was safe to skip it, but now we have to include it."))]),a("figure",null,[n[140]||(n[140]=a("img",{src:"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420321413-7ec2fa9c-4667-40ef-a0a0-5192a5333d30.png?resize=800%2C192&ssl=1",alt:'golden text on dark blue background using the method of setting the RGB values in the SVG filter (live demo (<VPIcon icon="fa-brands fa-codepen"/>))',tabindex:"0",loading:"lazy"},null,-1)),a("figcaption",null,[n[138]||(n[138]=s("golden text on dark blue background using the method of setting the RGB values in the SVG filter (")),a("a",X,[n[135]||(n[135]=s("live demo (")),t(e,{icon:"fa-brands fa-codepen"}),n[136]||(n[136]=a("code",null,"thebabydino",-1)),n[137]||(n[137]=s(")"))]),n[139]||(n[139]=s(")"))])]),n[230]||(n[230]=p(`<p>The problem with this solution is that it involves hardcoding the RGBA values for both the<code>span</code>background and text in the SVG<code>filter</code>, meaning we can’t control them from the CSS.</p><p>Let’s try another approach!</p><h4 id="set-rgba-values-upstream-of-the-svg-filter" tabindex="-1"><a class="header-anchor" href="#set-rgba-values-upstream-of-the-svg-filter"><span>Set RGBA values upstream of the SVG filter</span></a></h4><p>First, we set them as custom properties upstream of the<code>svg</code>:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">body</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--a</span><span class="token punctuation">:</span> .5<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">--back-c</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>25 25 112/ <span class="token function">var</span><span class="token punctuation">(</span>--a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">--text-c</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>255 165 0<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5)),a("p",null,[n[144]||(n[144]=p("Then we modify the<code>filter</code>a bit. We use<code>SourceAlpha</code>to give us the background area, though we still extract the text area via a<code>feColorMatrix</code>primitive and save it as<code>text</code>, but this time we don’t care about the RGB values, we won’t use them anyway. We also flood the entire<code>filter</code>area with<code>--back-c</code>and<code>--text-c</code>(using",15)),a("a",_,[t(e,{icon:"fa-brands fa-firefox"}),n[141]||(n[141]=a("code",null,"feFlood",-1))]),n[145]||(n[145]=s("), but then, out of the entire area, we only keep what’s at the intersection (")),a("a",nn,[t(e,{icon:"fa-brands fa-firefox"}),n[142]||(n[142]=a("code",null,"operator='in'",-1))]),n[146]||(n[146]=s("of")),a("a",an,[t(e,{icon:"fa-brands fa-firefox"}),n[143]||(n[143]=a("code",null,"feComposite",-1))]),n[147]||(n[147]=s(") with the")),n[148]||(n[148]=a("code",null,"SourceAlpha",-1)),n[149]||(n[149]=s("and")),n[150]||(n[150]=a("code",null,"text",-1)),n[151]||(n[151]=s("areas respectively. Finally, we stack these intersections (via")),n[152]||(n[152]=a("code",null,"feBlend",-1)),n[153]||(n[153]=s("), with the text on top."))]),n[231]||(n[231]=p(`<div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alpha<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFlood</span> <span class="token attr-name">flood-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>var(--back-c)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceAlpha<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0 </span>
<span class="line">              0 0 0 0 </span>
<span class="line">              0 0 0 0 0 </span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">      <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFlood</span> <span class="token attr-name">flood-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>var(--text-c)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feBlend</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This allows us to control both the text and background from the CSS.</p><p>However, the values of<code>--back-c</code>and<code>--text-c</code>are those of the<code>feFlood</code>primitive, not those on the element the<code>filter</code>applies to. So for any different text or background, we need to have a different <code>filter</code>.</p><p>If that’s difficult to grasp, let’s say we want two different options, the same golden-orange text on a dark blue background and also dark blue text on a pink background.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">body</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--a</span><span class="token punctuation">:</span> .7<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">--back-c-1</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>25 25 112/ <span class="token function">var</span><span class="token punctuation">(</span>--a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">--text-c-1</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>255 165 0<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">--back-c-2</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>255 105 180/ <span class="token function">var</span><span class="token punctuation">(</span>--a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">--text-c-2</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>25 25 112<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">--back-c</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--back-c-1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">--text-c</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--text-c-1<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now we can change<code>--back-c</code>and<code>--text-c</code>on the second paragraph:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">p:nth-child(2)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--back-c</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--back-c-2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">--text-c</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--text-c-2<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7)),a("p",null,[n[157]||(n[157]=s("But changing these variables on the second paragraph")),a("a",sn,[n[154]||(n[154]=s("doesn’t do anything (")),t(e,{icon:"fa-brands fa-codepen"}),n[155]||(n[155]=a("code",null,"thebabydino",-1)),n[156]||(n[156]=s(")"))]),n[158]||(n[158]=s("for the result of the SVG")),n[159]||(n[159]=a("code",null,"filter",-1)),n[160]||(n[160]=s("applied to it because the values for")),n[161]||(n[161]=a("code",null,"--back-c",-1)),n[162]||(n[162]=s("and")),n[163]||(n[163]=a("code",null,"--text-c",-1)),n[164]||(n[164]=s("that get used by the")),n[165]||(n[165]=a("code",null,"filter",-1)),n[166]||(n[166]=s("are")),n[167]||(n[167]=a("em",null,"always",-1)),n[168]||(n[168]=s("those set upstream from it on the")),n[169]||(n[169]=a("code",null,"body",-1)),n[170]||(n[170]=s("."))]),t(o,{src:"https://videopress.com/61a5e22d-4593-4de2-b46e-71400201ee3a"}),n[232]||(n[232]=a("p",null,"Unfortunately, this is just how things are for SVG filters, even though CSS ones don’t have this limitation, like the comparison below shows.",-1)),a("figure",null,[n[178]||(n[178]=a("img",{src:"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421036374-6abf5652-0b1c-4fbe-89dd-e381a3cc1900.png?resize=800%2C778&ssl=1",alt:'CSS vs. SVG drop-shadow filter using a variable for(live demo (<VPIcon icon="fa-brands fa-codepen"/>))',tabindex:"0",loading:"lazy"},null,-1)),a("figcaption",null,[n[174]||(n[174]=s("CSS vs. SVG drop-shadow filter using a variable for")),n[175]||(n[175]=a("code",null,"flood-color",-1)),n[176]||(n[176]=s("(")),a("a",tn,[n[171]||(n[171]=s("live demo (")),t(e,{icon:"fa-brands fa-codepen"}),n[172]||(n[172]=a("code",null,"thebabydino",-1)),n[173]||(n[173]=s(")"))]),n[177]||(n[177]=s(")"))])]),n[233]||(n[233]=a("h4",{id:"set-rgb-values-in-the-css-fix-alpha-in-the-svg-filter",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#set-rgb-values-in-the-css-fix-alpha-in-the-svg-filter"},[a("span",null,"Set RGB values in the CSS, fix alpha in the SVG filter")])],-1)),a("p",null,[n[183]||(n[183]=s("Amelia Bellamy-Royds")),a("a",en,[t(e,{icon:"fas fa-globe"}),n[179]||(n[179]=s("suggested"))]),n[184]||(n[184]=s("a")),n[185]||(n[185]=a("code",null,"feComponentTransfer",-1)),a("a",pn,[n[180]||(n[180]=s("approach (")),t(e,{icon:"fa-brands fa-codepen"}),n[181]||(n[181]=a("code",null,"AmeliaBR",-1)),n[182]||(n[182]=s(")"))]),n[186]||(n[186]=s("that allows setting the palette from the CSS and then using the SVG")),n[187]||(n[187]=a("code",null,"filter",-1)),n[188]||(n[188]=s("only to take care of the increase in alpha where there is overlap."))]),a("p",null,[n[190]||(n[190]=p('What Amelia’s<code>filter</code>does is use<code>feComponentTransfer</code>to preserve the alpha of everything that’s fully transparent (the area outside the span) or fully opaque (the text), but map a bunch of alpha values in between to the desired background alpha<code>a</code>. This should also catch and map the background overlap alpha (which is<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>+</mo><mi>a</mi><mo>−</mo><mi>a</mi><mo>×</mo><mi>a</mi><mo>=</mo><mn>2</mn><mo>×</mo><mi>a</mi><mo>−</mo><mi>a</mi><mo>×</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">a+a-a\\times{a}=2\\times{a}-a\\times{a}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord"><span class="mord mathnormal">a</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">a</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord"><span class="mord mathnormal">a</span></span></span></span></span>- for more details, see this',9)),a("a",on,[t(e,{icon:"fas fa-globe"}),n[189]||(n[189]=s("Adventures in CSS Semi-Transparency Land"))]),n[191]||(n[191]=s("article) to")),n[192]||(n[192]=a("code",null,"a",-1)),n[193]||(n[193]=s("."))]),n[234]||(n[234]=a("p",null,"This is a very smart solution and it seems to work really well for this particular background and text case as well as for similar cases. But there are still issues, points where it breaks.",-1)),n[235]||(n[235]=a("p",null,[s("First off, if we increase the alpha to something like"),a("code",null,".75"),s(", we start seeing an overlap.")],-1)),n[236]||(n[236]=a("figure",null,[a("img",{src:"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420356221-86ba9f46-d026-4138-9975-04f6f8acddf8.png?resize=800%2C192&ssl=1",alt:"overlap problem becoming visible when alpha is bumped up to",tabindex:"0",loading:"lazy"}),a("figcaption",null,[s("overlap problem becoming visible when alpha is bumped up to"),a("code",null,".75")])],-1)),n[237]||(n[237]=a("p",null,[s("My first instinct was to do what Amelia also suggests doing in the comments to her version - increase the number of intervals as the alpha gets closer to the ends of the"),a("code",null,"[0, 1]"),s("interval.")],-1)),a("p",null,[n[195]||(n[195]=s("Since I’m using ")),a("a",ln,[t(e,{icon:"iconfont icon-pug"}),n[194]||(n[194]=s("Pug"))]),n[196]||(n[196]=s(" to generate the markup anyway, I figured this would be a good way to first measure how large the base intervals would need to be - and by that I mean the minimum between the distance between the ends of the")),n[197]||(n[197]=a("code",null,"[0, 1]",-1)),n[198]||(n[198]=s("interval and the desired alpha as well as the overlap alpha."))]),n[238]||(n[238]=p(`<p>We’re excluding<code>2*a - a*a</code>and<code>1 - a</code>from the minimum computation since<code>a</code>is subunitary, so<code>a</code>is always bigger than<code>a*a</code>, which results in<code>a</code>being always smaller than<code>2*a - a*a = a*(2 - a)</code>, which also results in<code>1 + a*a - 2*a</code>being smaller than<code>1 - a</code>.</p><p>Then we get how many such base intervals<code>u</code>we could fit between<code>0</code>and<code>1</code>, round up this number (<code>n</code>) and then generate the list of alpha values (for<code>tableValues</code>) which remains<code>0</code>and<code>1</code>at the ends, but is set to<code>a</code>everywhere in between.</p><div class="language-pug line-numbers-mode" data-highlighter="prismjs" data-ext="pug"><pre><code class="language-pug"><span class="line"><span class="token punctuation">-</span><span class="token code"> <span class="token keyword">let</span> u <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">+</span> a<span class="token operator">*</span>a <span class="token operator">-</span> <span class="token number">2</span><span class="token operator">*</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>
<span class="line"><span class="token punctuation">-</span><span class="token code"> <span class="token keyword">let</span> n <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>
<span class="line"><span class="token punctuation">-</span><span class="token code"> <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i<span class="token operator">*</span><span class="token punctuation">(</span>n <span class="token operator">-</span> i<span class="token punctuation">)</span> <span class="token operator">?</span> a <span class="token operator">:</span> i<span class="token operator">/</span>n<span class="token punctuation">)</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag">feFuncA<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">&#39;table&#39;</span> tableValues<span class="token operator">=</span>v<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39; &#39;</span></span><span class="token punctuation">)</span></span></span>)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This does indeed fix the background overlap problem for any alpha, though it still means we need different filters for different alphas. Here is what gets generated for a few different alpha values:</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token comment">&lt;!-- a = .8 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>table<span class="token punctuation">&#39;</span></span> </span>
<span class="line">         <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 .8 1<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- a = .75 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>table<span class="token punctuation">&#39;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0 .75 .75 .75 .75 .75 .75 .75 .75 .75 .75 .75 .75 .75 .75 .75 1<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- a = .65 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>table<span class="token punctuation">&#39;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0 .65 .65 .65 .65 .65 .65 .65 .65 1<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- a = .5 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>table<span class="token punctuation">&#39;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0 .5 .5 .5 1<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- a = .35 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>table<span class="token punctuation">&#39;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0 .35 .35 1<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- a = .2 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>table<span class="token punctuation">&#39;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0 .2 .2 .2 .2 1<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- a = .1 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>table<span class="token punctuation">&#39;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0 .1 .1 .1 .1 .1 .1 .1 .1 .1 1<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- a = .05 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>table<span class="token punctuation">&#39;</span></span> </span>
<span class="line">         <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 .05 1<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We also have another bigger problem: due to font anti-aliasing, the<code>feComponentTransfer</code> messes up the text for lower value alphas and the lower the value, the worse the problem looks.</p>`,6)),a("p",null,[n[200]||(n[200]=s("Font anti-aliasing makes the edge pixels of text semi-transparent in order to avoid a")),a("a",cn,[t(e,{icon:"fas fa-globe"}),n[199]||(n[199]=s("jagged, pixelated, ugly"))]),n[201]||(n[201]=s(", even broken look. For comparison, below is the same text without vs. with anti-aliasing, at normal size and scaled up 12 times:"))]),n[239]||(n[239]=p('<figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420568656-a726cc27-9ef9-46a2-84d4-943370d2a18f.png?resize=800%2C360&amp;ssl=1" alt="without vs. with anti-aliasing" tabindex="0" loading="lazy"><figcaption>without vs. with anti-aliasing</figcaption></figure><p>Those semi-transparent font edge pixels placed on top of the semi-transparent background also give us semi-transparent pixels. At the same time, our<code>filter</code>maps the alpha of more and more of the semi-transparent pixels of the input to the desired background alpha<code>a</code>as this<code>a</code>nears the ends of the<code>[0, 1]</code>interval. As<code>a</code>nears<code>0</code>, then almost all semi-transparent edge pixels get this very low<code>a</code>alpha, making them much more transparent than they should be and causing an eroded look for our text.</p>',2)),t(o,{src:"https://videos.files.wordpress.com/Ge3Bu3Oa/421803224-f729daa9-2153-40e1-ae97-222eea2327da-1_mp4_hd.original.jpg?w=680"}),t(r,{user:"thebabydino","slug-hash":"MYWoVKB",title:"no alpha increase on inline background overlap #5a: fancy palette, dynamic alpha fix","default-tab":["css","result"],theme:c.$isDarkmode?"dark":"light"},null,8,["theme"]),n[240]||(n[240]=p(`<p>I guess a simple fix for that would be to only map to the desired alpha<code>a</code>the smallest number of alpha points possible and let all others keep their initial alpha. This would mean that the first alpha point we map to the desired alpha<code>a</code>is equal to it or the nearest smaller than it, while the last one is equal to the overlap alpha<code>2*a - a*a</code>or the nearest bigger than it.</p><p>For example, if the desired alpha<code>a</code>is<code>.2</code>, then the overlap alpha is<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.2</mn><mo>+</mo><mn>0.2</mn><mo>−</mo><mn>0.2</mn><mo>×</mo><mn>0.2</mn><mo>=</mo><mn>0.36</mn></mrow><annotation encoding="application/x-tex">0.2 +0.2-0.2\\times{0.2}=0.36</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0.2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0.2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0.2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord"><span class="mord">0.2</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.36</span></span></span></span>. The base interval<code>u</code>is<code>.2</code>,<code>n</code>is<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>0.2</mn></mfrac><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">\\frac{1}{0.2}=5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0.2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span>, so we generate<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>+</mo><mn>1</mn><mo>=</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">n+1=6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span></span></span></span>alpha points:</p><div class="language-plaintext line-numbers-mode" data-highlighter="prismjs" data-ext="plaintext"><pre><code class="language-plaintext"><span class="line">0 .2 .4 .6 .8 1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>If before we mapped all those between<code>0</code>and<code>1</code>to the desired alpha<code>.2</code>, now we only map to the desired alpha<code>a</code>, those loosely matching the<code>[.2, .36]</code>interval - that is,<code>.2</code>and<code>.4</code>:</p><div class="language-plaintext line-numbers-mode" data-highlighter="prismjs" data-ext="plaintext"><pre><code class="language-plaintext"><span class="line">0 .2 .2 .6 .8 1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>In general, that means our values array would become:</p><div class="language-pug line-numbers-mode" data-highlighter="prismjs" data-ext="pug"><pre><code class="language-pug"><span class="line"><span class="token punctuation">-</span><span class="token code"> <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>
<span class="line"><span class="token punctuation">-</span><span class="token code"> v <span class="token operator">=</span> v<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>i<span class="token operator">*</span><span class="token punctuation">(</span>n <span class="token operator">-</span> i<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span>n <span class="token operator">&gt;</span> a <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span>n <span class="token operator">&lt;</span> a<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">-</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> a <span class="token operator">:</span> i<span class="token operator">/</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Probably ensuring the values outside the interval mapped to<code>a</code>are evenly distributed would be the more correct solution, but this simpler trick also seems to work really well when it comes to fixing the text erosion problem.</p>`,8)),t(o,{src:"https://videos.files.wordpress.com/2vnkFRZP/antialiasing_mp4_hd.original.jpg?w=680"}),t(r,{user:"thebabydino","slug-hash":"QwWgxMG",title:"no alpha increase on inline background overlap #5b: fancy palette, better dynamic alpha fix","default-tab":["css","result"],theme:c.$isDarkmode?"dark":"light"},null,8,["theme"]),n[241]||(n[241]=a("p",null,[s("But you may have noticed there’s still a problem and this is not an SVG"),a("code",null,"filter"),s("one, it comes from the CSS.")],-1)),n[242]||(n[242]=a("p",null,[s("To make it more obvious, let’s put result right next to what we got via the earlier method of seting the RGBA values from the SVG"),a("code",null,"filter"),s("- can you see it?")],-1)),t(o,{src:"https://videos.files.wordpress.com/Pz5L7juY/comparison_mp4_hd.original.jpg?w=680"}),t(r,{user:"thebabydino","slug-hash":"qEBjwzx",title:"no alpha increase on inline background overlap #6: comparisons","default-tab":["css","result"],theme:c.$isDarkmode?"dark":"light"},null,8,["theme"]),n[243]||(n[243]=a("p",null,[s("If you can’t spot it in the recording above, how about when we have a diagonal middle split in between the result we get when we bake into the filter all RGBA values and the result we get with this alpha fix method via"),a("code",null,"feComponentTransfer"),s("?")],-1)),n[244]||(n[244]=a("figure",null,[a("img",{src:"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420592423-5ee58be4-e3b6-475d-8353-dbdd07b28506.png?resize=800%2C374&ssl=1",alt:"split comparison",tabindex:"0",loading:"lazy"}),a("figcaption",null,"split comparison")],-1)),n[245]||(n[245]=a("p",null,"It’s pretty subtle here, but if you think it looks like this latest method is making the text a bit more faded, particularly at higher alpha values, you’re right.",-1)),n[246]||(n[246]=a("p",null,[s("This is because the blending fix for the background overlapping text problem results in the text"),a("code",null,"color"),s("not being preserved. This was precisely why we switched from a blending-only solution to an SVG"),a("code",null,"filter"),s("one in the case when the text isn’t black or white (or close enough and the particular choice of text and background preserves the text post-blending exactly as it was set).")],-1)),a("p",null,[n[203]||(n[203]=s("A lot of text and background combinations don’t make this very obvious because, in order to have")),a("a",un,[t(e,{icon:"fa-brands fa-firefox"}),n[202]||(n[202]=s("a good contrast ratio"))]),n[204]||(n[204]=s(", we often need either the text or the background behind it to be very dark or very bright - which means there’s a chance all three RGB channels of the text are either below or above the corresponding RGB channels of the background, or even if one of the channels is deviating on the other side, it’s not deviating enough to make a noticeable difference. But sometimes we can still see there’s a problem, as illustrated by the interactive demo below, which allows changing the palette."))]),t(r,{user:"thebabydino","slug-hash":"jEOwgoP",title:"no alpha increase on inline background overlap #7: various palettes for dynamic alpha fix","default-tab":["css","result"],theme:c.$isDarkmode?"dark":"light"},null,8,["theme"]),n[247]||(n[247]=p("<p>All of these palettes were chosen to have a good contrast ratio. Even so, there is some degree of text fading<em>for all of them</em>. And while it’s not easy to spot that for the first five, it’s way more noticeable for the second to last one and almost impossible to miss for the final one.</p><p>Let’s take the second to last one, which uses a lighter blue than our initial palette, so it has a somewhat lower contrast making the problem more obvious. The higher the alpha gets, what should be golden text on a semitransparent deep blue background looks more pink-ish. This is due to the text being<code>rgb(100% 74.51% 4.31%)</code>and the background being<code>rgb(22.75% 21.18% 100%)</code>(we leave out the transparency for now and assume the alpha is<code>1</code>). Blending these using the<code>lighten</code>blend mode means taking the maximum value out of the two for each channel - that is,<code>100%</code>(<code>max(100%, 22.75%)</code>) for the red channel,<code>74.51%</code>(<code>max(74.51%, 21.18%)</code>) for the green one and<code>100%</code>(<code>max(4.31%, 100%)</code>) for the blue one. That means our text is<code>rgb(100% 74.51% 100%)</code>, a light pink, which is different from the<code>color</code>value of<code>rgb(100% 74.51% 4.31%)</code>(golden) we’ve set.</p>",2)),t(o,{src:"https://videos.files.wordpress.com/kNkKLwer/varying-alpha_mp4_hd.original.jpg?w=680"}),n[248]||(n[248]=p("<p>The final text and background combination makes the problem even more clear. The higher the alpha gets, what should be lime text on a semitransparent blue background looks more like aqua text. This is due to the text being<code>rgb(0% 100% 0%)</code>and the background being<code>rgb(0% 0% 100%)</code>(again, we leave out the transparency for now and assume the alpha is<code>1</code>). Blending these using the<code>lighten</code>blend mode means taking the maximum value out of the two for each channel - that is,<code>0%</code>(<code>max(0%, 0%)</code>) for the red channel,<code>100%</code>(<code>max(100%, 0%)</code>) for the green one and<code>100%</code>(<code>max(0%, 100%)</code>) for the blue one. That means our text is<code>rgb(0% 100% 100%)</code>, so aqua, which is different from the<code>color</code>value of<code>rgb(0% 100% 0%)</code>(lime) we’ve set.</p>",1)),t(o,{src:"https://videos.files.wordpress.com/6vWnDPhz/final-palette_mp4_hd.original.jpg?w=680"}),n[249]||(n[249]=p(`<p>So what now? Well, the one solution I’ve been able to find is to pass in the text and background shapes separate from the RGBA values used for them. I’ve tried approaching this in multiple ways and ended up hitting bugs in all browsers. Tiling bugs in Safari and Chrome, a weird Windows-specific bug in Firefox, the same wide gamut bug mentioned before in Chrome… bugs everywhere.</p><p>So now we’re not going through all of my failed experiments, of which there were many, we’re just looking at the one solution I’ve managed to get working reasonably well across various browser, OS and hardware combinations.</p><h4 id="set-shapes-and-rgba-values-in-the-css-pass-them-to-the-svg-filter-via-different-channels-alpha-points" tabindex="-1"><a class="header-anchor" href="#set-shapes-and-rgba-values-in-the-css-pass-them-to-the-svg-filter-via-different-channels-alpha-points"><span>Set shapes and RGBA values in the CSS, pass them to the SVG filter via different channels/ alpha points</span></a></h4><p>The shape of the span background and that of the text get passed to the SVG filter using the<code>1</code>alpha point. That means we have white text on black background, all opaque, so we can extract it in the SVG by mapping all alpha points except<code>1</code>to<code>0</code>.</p><p>We pass the text and background RGB values using the<code>.75</code>and<code>.25</code>alpha points - this allows us to extract them in the SVG<code>filter</code>by mapping their corresponding alpha points to<code>1</code>, while all other alpha points are<code>0</code>.</p><p>Finally, we pass the alpha value to the SVG via the green channel, using the<code>.5</code>alpha point. By mapping the<code>.5</code>alpha point to<code>1</code>, while all other alpha points get mapped to<code>0</code>, we can extract in the SVG<code>filter</code>the desired background alpha value via the green channel value.</p><p>This means we have five alpha points (<code>0</code>,<code>.25</code>,<code>.5</code>,<code>.75</code>and<code>1</code>), so we’re going to need to use five values for the<code>tableValues</code>attribute of<code>feFuncA</code>, all of them zeroed, except the one corresponding to the point we’re interested in and which we map to<code>1</code>.</p><p>In order to do this, we first add an absolutely positioned, non-clickable pseudo on the<code>p</code>element. This pseudo has a<code>border</code>and two shadows (an outer one and an<code>inset</code>one) and is offset outwards (using a negative<code>inset</code>) to compensate for both the<code>inset</code>shadow and the<code>border</code>, so that there is no visible part of this pseudo intersecting the<code>span</code>background shape.</p><div class="language-scss line-numbers-mode" data-highlighter="prismjs" data-ext="scss"><pre><code class="language-scss"><span class="line"><span class="token selector">p </span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--a</span><span class="token punctuation">:</span> 0.7<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">--text-c</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>255 165 0<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">--back-c</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>25 25 112<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token selector"><span class="token parent important">&amp;</span>::after </span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">inset</span><span class="token punctuation">:</span> -2em<span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">border</span><span class="token punctuation">:</span> solid 1em <span class="token function">rgb</span><span class="token punctuation">(</span>0% <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--a<span class="token punctuation">)</span> <span class="token operator">*</span> 100%<span class="token punctuation">)</span> 0%/ 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">box-shadow</span><span class="token punctuation">:</span> inset 0 0 0 1em <span class="token function">rgba</span><span class="token punctuation">(</span>from <span class="token function">var</span><span class="token punctuation">(</span>--text-c<span class="token punctuation">)</span> r g b/ 0.75<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">      0 0 0 1em <span class="token function">rgba</span><span class="token punctuation">(</span>from <span class="token function">var</span><span class="token punctuation">(</span>--back-c<span class="token punctuation">)</span> r g b/ 0.25<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">pointer-events</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The first shadow is an<code>inset</code>one using the desired text RGB value and a<code>.75</code>alpha, which allows us to pass the RGB value to the SVG<code>filter</code>via the<code>.75</code>alpha point. The second shadow is an outer one using the desired background RGB value and a<code>.25</code>alpha, which allows us to pass the RGB value to the SVG<code>filter</code>via the<code>.25</code>alpha point.</p><p>The<code>border-color</code>uses the desired<code>span</code>background alpha value on the green channel (we’re using the green channel due to the same Chrome wide gamut bug mentioned earlier in this article) and has a<code>.5</code>alpha. This allows us to pass to the SVG<code>filter</code>the value of the desired<code>span</code>background alpha as the green channel value using the<code>.5</code>alpha point.</p><p>The negative<code>inset</code>(<code>-2em</code>) is set to compensate for both the<code>inset</code>shadow (with a<code>1em</code>spread) and for the<code>border</code>(with a<code>1em</code>width) because it’s very important that none of the visible parts of the pseudo (the<code>border</code>and the<code>box-shadow</code>using the<code>.25</code>,<code>.5</code>and<code>.75</code>alpha points) intersect the shape of the<code>span</code>background (using the<code>1</code>alpha point).</p><p>The<code>pointer-events: none</code>property is there in order to avoid any interference with the<code>span</code>text selection. We could have also used<code>z-index: -1</code>, since there is no intersection between the visible parts of the pseudo and the<code>span</code>background shape. Both of them do the job and in this case, it really doesn’t matter which we choose to use.</p><p>What we have so far definitely doesn’t look great, but… we’re getting there!</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420622735-172f79d1-5f49-4c70-9b01-c9cde68974c0.png?resize=800%2C400&amp;ssl=1" alt="before applying any filter" tabindex="0" loading="lazy"><figcaption>before applying any filter</figcaption></figure><p>Moving on to the<code>filter</code>, we start in a similar manner as before, by getting the<code>opaque</code>part. To do so, we preserve just just the fifth alpha point (<code>1</code>), while mapping all others to<code>0</code>. Everything that intially has an alpha of<code>0</code>(transparent part inside the frames around the<code>span</code>shape),<code>.25</code>(outermost dark blue frame),<code>.5</code>(middle green frame) or<code>.75</code>(innermost golden frame) becomes transparent.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0<span class="token punctuation">&#39;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0<span class="token punctuation">&#39;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>true<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>go<span class="token punctuation">&#39;</span></span> <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>sRGB<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>opaque<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>table<span class="token punctuation">&#39;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>0 0 0 0 1<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We’ve saved this result as<code>opaque</code>for when we need to use it later.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420622938-0a6221ab-593a-4f45-93ca-1dc28820428e.png?resize=800%2C400&amp;ssl=1" alt="the opaque result" tabindex="0" loading="lazy"><figcaption>the opaque result</figcaption></figure><p>Next, from the initial<code>filter</code>input, we extract the background RGB area by mapping the second (<code>.25</code>) alpha point to<code>1</code>, while mapping all others to<code>0</code>. Note that we don’t want the input of the second primitive to be the<code>result</code>of the first one, but the<code>filter</code>input, so we explicitly specify <code>in</code>as<code>SourceGraphic</code>.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In theory, this second<code>feComponentTransfer</code>extracts second just the background RGB area (pseudo outer shadow area, using the second alpha point,<code>.25</code>). In practice, can you see what else it has picked up?</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420623150-858f198f-0791-40de-8dae-7a4af30623f7.png?resize=800%2C400&amp;ssl=1" alt="the outer frame using the background RGB" tabindex="0" loading="lazy"><figcaption>the outer frame using the background RGB</figcaption></figure><p>If you cannot pick it up (it’s not easy), let’s remove the image backdrop and circle the problem areas:</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420624040-f48d5f15-0298-4ea1-923a-3dfcbdd96b92.png?resize=800%2C400&amp;ssl=1" alt="highlighting the problem areas" tabindex="0" loading="lazy"><figcaption>highlighting the problem areas</figcaption></figure><p>Those black pixels it picks up are again due to anti-aliasing. At the rounded corners of the<code>span</code>background lines, we have semitransparent pixels in order for these corners to look smooth, not jagged. But then our second<code>feComponentTransfer</code> maps the pixels in the<code>[0, .25]</code>interval to<code>[0, 1]</code> and the pixels in the<code>[.25, .5]</code> interval to<code>[1, 0]</code>. And this doesn’t catch just the pixels of the pseudo’s outer shadow using the<code>.25</code>alpha point, but also the pixels in the<code>[0, .5]</code>interval at those rounded corners of those<code>span</code>background lines, which get a non-zero alpha too.</p><p>Now in our particular case where we have a black<code>span</code>background, we can safely just ignore those pixels when moving on to the next step. But if we were to have a red background there, things would be very different and those pixels could cause a lot of trouble.</p><p>That’s because at the next step we expand the background RGB frame we got to cover the entire<code>filter</code>area and we do that with a<code>feMorphology</code>primitive using the<code>dilate</code>operation. What this does is the following: for every channel of every pixel, it takes the<em>maximum</em>of all the values of that channel for the pixels lying within the specified<code>radius</code>(from the current pixel) along both the<em>x</em>and the<em>y</em>axes in both the negative and positive direction.</p><p>Below, you can see how this works for a channel whose values are either maxed out (<code>1</code>) or zeroed (<code>0</code>). For every pixel of the input (green outline around the current one), the corresponding output value for the same channel is the maximum of all the values for that channel in the vicinity of the current pixel (within the red square).</p>`,29)),t(o,{src:"https://videos.files.wordpress.com/SVWv7R53/dialation_mp4_hd_1080p.original.jpg?h=821"}),n[250]||(n[250]=p(`<p>For our purpose, we first care about the alpha channel, since this turns opaque all transparent pixels that are within the specified<code>radius</code>from any opaque one along both axes in both directions, effectively dilating our frame to fill the area inside it.</p><p>But the maximum computation happens for the RGB channels too. Black has zero for all RGB channels, so those stray pixels don’t affect the result of the maximum computation since every single one of the RGB channels of the frame is above zero, which makes them be the result of the maximum for every single one of the RGB channels.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that the<code>filter</code>now has<code>primitiveUnits</code>set to<code>objectBoundingBox</code>so values for attributes such as the<code>radius</code>attribute of<code>feMorphology</code>are not pixel values anymore, but relative to the<code>filter</code>input box size. This is because the size of our<code>filter</code>area is given by its input, whose exact pixel size is determined by the text content which we have no way of knowing. So we switch to relative units.</p>`,4)),t(o,{src:"https://videos.files.wordpress.com/y9XaZrfy/incresing-dialation_mp4_hd.original.jpg?w=680"}),n[251]||(n[251]=p("<p>There are two things to keep in mind here.</p><p>One, I’m not exactly happy to have to use such a relatively large dilation value, as it can negatively impact performance (at least from the tests on my laptop, the performance hit is obvious in both Firefox and Epiphany for the final demo). But unfortunately, my initial idea of extracting small squares in the top left corner and then tiling them ran into at least one different bug in every browser on at least one OS, so I guess this dilation was the only option left.</p><p>Two, if we had a red (<code>rgb(100% 0% 0%)</code>) instead of a black (<code>rgb(0% 0% 0%)</code>) background, then the maxed up red channel would cause trouble since<code>100%</code>is a bigger value than the<code>9.8%</code>of the frame (desired RGB being<code>rgb(9.8% 9.8% 43.9%)</code>), so then we’d end up with those pesky corner pixels bloating up and turning the intersection with the dilated frame purple, a mix (<code>rgb(max(100%, 9.8%) max(0%, 9.8%) max(0%, 43.9%))</code>) between the red channel of the initial red<code>span</code>background and the green and blue channels of the frame (which has the desired RGB value for the background and whose red channel we’d lose this way).</p>",3)),t(o,{src:"https://videos.files.wordpress.com/WKB25WuV/increasing-dialation_mp4_hd.original.jpg?w=680"}),n[252]||(n[252]=a("p",null,[s("In such a case where a red input area would “contaminate” our desired background RGB, we’d first need to apply a small erosion to get rid of those pesky corner pixels"),a("em",null,"before"),s("we apply the dilation. Erosion works in a similar manner to dilation, except we take the"),a("em",null,"minimum"),s("channel value of all pixels within the set"),a("code",null,"radius"),s("along both axes in both directions.")],-1)),t(o,{src:"https://videos.files.wordpress.com/GWdvgYeJ/erosion_mp4_hd_1080p.original.jpg?h=816"}),n[253]||(n[253]=p(`<p>In our case, we care about the alpha channel erosions, all the transparent pixels around zeroing the alpha of those few ones we didn’t really mean to pick up.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>.01<span class="token punctuation">&#39;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Note that<code>erode</code>is the default<code>operator</code>, so we don’t need to explicitly set it.</p><p>Back to our case, after dilating the frame to fill the entire<code>filter</code>area with the desired background RGB and saving this result as<code>back-rgb</code>, we extract (again, out of the initial<code>filter</code>input) the desired alpha as the green channel value of the pseudo border with a<code>.5</code>alpha. This means another<code>feComponentTransfer</code>, this time one mapping all alpha points to<code>0</code>, except for the third one (<code>.5</code>), which gets mapped to<code>1</code>(though in this one case the exact alpha it gets mapped to doesn’t really matter as long as its non-zero).</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This gives us a green frame (red and blue channels zeroed, green channel set to the value of the desired alpha for the background of the<code>span</code>lines):</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421526552-d7aa5011-b420-42ad-86e9-7c218867d0f0.png?resize=800%2C416&amp;ssl=1" alt="the middle frame using the desired alpha on the green channel" tabindex="0" loading="lazy"><figcaption>the middle frame using the desired alpha on the green channel</figcaption></figure><p>Now you can probably guess what follows: we<code>dilate</code>this green frame to cover the entire<code>filter</code>area. Again, we have those stray black pixels, but since they’re black, their channel values just get discarded when we perform the dilation, so we don’t need that erosion step in between.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We don’t save the<code>result</code>of this primitive this time, but we’ll get to that in a moment. This is what we have now - not too exciting yet, though things are about to change.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421563823-bef2a12e-63c3-48ae-8c03-ab698869dae1-1.png?resize=800%2C512&amp;ssl=1" alt="middle frame dilated to fill entire filter area" tabindex="0" loading="lazy"><figcaption>middle frame dilated to fill entire filter area</figcaption></figure><p>Next, we use<code>feColorMatrix</code>to give this layer covering the entire<code>filter</code>area an alpha equal to that of its green channel. This is why we don’t save the result of the second<code>feMorphology</code>- because we only feed it into the input of the very next primitive,<code>feColorMatrix</code>and then we don’t need it anywhere after that. We don’t care about the RGB values of the<code>result</code>, only about the alpha, so we just zero them all.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span> </span>
<span class="line highlighted">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line highlighted">              0 0 0 0 0</span>
<span class="line highlighted">              0 0 0 0 0</span>
<span class="line highlighted">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line highlighted">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Basically, what this<code>feColorMatrix</code>does is set the output alpha channel to be equal to the input green channel (well, to<code>1</code>multiplied with the input green channel), regardless of the values of the other input channels (red, blue, alpha). This way, we recover the alpha channel from the green one.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421564769-35c90577-cc28-417d-8f11-fd28e1baaf26.png?resize=800%2C512&amp;ssl=1" alt="alpha value finally on the alpha channel" tabindex="0" loading="lazy"><figcaption>alpha value finally on the alpha channel</figcaption></figure><p>Next step is to intersect the previously saved<code>back-rgb</code>result with this one, so we keep the RGB channels of that layer and the alpha channel of this one.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>What happens here is the alphas of the two input layers (<code>1</code>for<code>back-rgb</code>and the desired<code>span</code>background alpha for the other) are multiplied to give us the output alpha. At the same time, we only keep the RGB values of the top one (<code>back-rgb</code>) for the output.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421566248-cb88abc1-50fa-407c-9820-6484b5272908.png?resize=800%2C512&amp;ssl=1" alt="the desired semi-transparent background, filling the filter area" tabindex="0" loading="lazy"><figcaption>the desired semi-transparent background, filling the filter area</figcaption></figure><p>We now have the entire filter area covered by a layer with the desired RGBA for the<code>span</code>background lines, so the next step is to restrict it to the area of those<code>span</code>lines,<code>opaque</code>. That is, only keep it at the intersection with that area and save the<code>result</code>as<code>back</code>.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It finally looks like we’re getting somewhere!</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421567092-20782bfb-8bd8-47a4-955d-1f7e8f7638b2.png?resize=800%2C416&amp;ssl=1" alt="the semi-transparent dark blue background of the" tabindex="0" loading="lazy"><figcaption>the semi-transparent dark blue background of the<code>span</code></figcaption></figure><p>Next, we can move on to the text!</p><p>We start by extracting the text RGB area by mapping the fourth (<code>.75</code>) alpha point to<code>1</code>, while mapping all others to<code>0</code>. Again, we explicitly specify <code>in</code> as <code>SourceGraphic</code>.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line highlighted">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 1 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This gives us yet another frame, this time one in the gold we want for the text.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421568337-289ed7d9-92db-4c73-b5e0-9fcd041b98b3.png?resize=800%2C416&amp;ssl=1" alt="the inner frame using the text RGB" tabindex="0" loading="lazy"><figcaption>the inner frame using the text RGB</figcaption></figure><p>Just like we did for the other frames, we<code>dilate</code>this one too in order to make it fill the entire<code>filter</code>area and save this result as<code>text-rgb</code>.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span> </span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 1 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421569320-65eb1151-e0fa-4d6e-a024-25b6ccadde1c.png?resize=800%2C512&amp;ssl=1" alt="inner frame dilated to fill entire filter area" tabindex="0" loading="lazy"><figcaption>inner frame dilated to fill entire filter area</figcaption></figure><p>Then we extract the text shape from the<code>opaque</code>layer, just like we did before, using the green channel like an alpha mask.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span> </span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 1 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line highlighted">      <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span></span>
<span class="line highlighted">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line highlighted">              0 0 0 0 0</span>
<span class="line highlighted">              0 0 0 0 0</span>
<span class="line highlighted">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line highlighted">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,33)),t(b,{data:[{id:'<VPIcon icon="fa-brands fa-chrome"/>'},{id:'<VPIcon icon="fa-brands fa-firefox"/>'}],active:0},{title0:l(({value:k,isActive:d})=>[t(e,{icon:"fa-brands fa-chrome"})]),title1:l(({value:k,isActive:d})=>[t(e,{icon:"fa-brands fa-firefox"})]),tab0:l(({value:k,isActive:d})=>n[205]||(n[205]=[a("p",null,"My expectation was that this would give us just the text shape like below, which is what happens in Chrome.",-1),a("figure",null,[a("img",{src:"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421569898-090dbf24-dc65-4dff-830b-b538d97c6128.png?resize=800%2C416&ssl=1",alt:"the text shape extracted using the green channel (Chrome)",tabindex:"0",loading:"lazy"}),a("figcaption",null,"the text shape extracted using the green channel (Chrome)")],-1)])),tab1:l(({value:k,isActive:d})=>n[206]||(n[206]=[a("p",null,"However, Firefox does something interesting here and thinking it through, I’m not entirely sure it’s wrong.",-1),a("figure",null,[a("img",{src:"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421581023-73fac2b0-fa13-4029-b449-71036fdc48b7.png?resize=800%2C416&ssl=1",alt:"Firefox extracting more than just the text shapes",tabindex:"0",loading:"lazy"}),a("figcaption",null,"Firefox extracting more than just the text shapes")],-1)])),_:1}),n[254]||(n[254]=p(`<p>What seems to happen is that Chrome forgets all about the RGB values of the semi-transparent areas of the pseudo and just zeroes them when zeroing their alphas in the first <code>feComponentTransfer</code> primitive to extract the<code>opaque</code>part (the<code>span</code>with white text on solid black background). Then when using the green channel as an alpha mask on the opaque part, all that’s not transparent is the white text, where the green channel is maxed out.</p><p>However, Firefox doesn’t seem to throw away the RGB values of those semi-transparent frames created by the<code>border</code>and<code>box-shadow</code>on the pseudo, even if it also zeroes their alphas via the first primitive as well. So even though the<code>opaque</code>result looks the same in both browsers, it’s not really the same. Then when we get to this latest<code>feColorMatrix</code>step, Firefox finds green in those now fully transparent frames because even though their alpha got zeroed to get the<code>opaque</code>result, their RGB values got preserved.</p><p>Whichever browser is right, there’s a very simple way to get the result we want cross-browser: intersect what we have now with the<code>opaque</code>result. It doesn’t even matter the RGB values of which layer we choose to preserve as a result of this intersection because we won’t be using them anyway.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span> </span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 1 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The next step is to keep the<code>text-rgb</code>layer only at the intersection with the text we just got.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">      </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span> </span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">      </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 1 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421573835-3385e69e-5c01-4d25-9863-281e7d5e4a23.png?resize=800%2C416&amp;ssl=1" alt="the golden text of the" tabindex="0" loading="lazy"><figcaption>the golden text of the<code>span</code></figcaption></figure><p>Finally, we place this on top of the<code>back</code>layer with a<code>feBlend</code>, just like we did before.</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span></span>
<span class="line">    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">color-interpolation-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sRGB<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">primitiveUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>objectBoundingBox<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">          </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 1 0 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">      </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 1 0 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span> </span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">        </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComponentTransfer</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SourceGraphic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feFuncA</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tableValues</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 1 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feComponentTransfer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feMorphology</span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dilate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">result</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-rgb<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feColorMatrix</span></span>
<span class="line">      <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span></span>
<span class="line">      <span class="token attr-name">values</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 0 0 0 0</span>
<span class="line">              0 1 0 0 0<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opaque<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feComposite</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-rgb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">operator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feBlend</span> <span class="token attr-name">in2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This is our final result!</p>`,10)),t(r,{user:"thebabydino","slug-hash":"XJWaMMb",title:"inline semitransparent text background with no overlap #8b","default-tab":["css","result"],theme:c.$isDarkmode?"dark":"light"},null,8,["theme"]),n[255]||(n[255]=p("<p>This allows us to have full control from the CSS over the text and background RGB, as well as over the background alpha, without needing to hardcode any of them in the SVG<code>filter</code>, which means we don’t need a different SVG<code>filter</code>if we want to set a different value for any of them on one o the elements the filter is applied to.</p><p>Now you may be thinking… well, this looks ugly with those semi-transparent frames before the filter is<code>applied</code>, so what if the filter fails? Well, the fix is really simple.<code>clip-path</code>gets applied after <code>filter</code>, so we can clip out those frames. They still get used for the<code>filter</code>if the<code>filter</code>is applied, but if it fails, we are still left with the very reasonable choice of white text on black background.</p><p>The following demo has different text and background combinations for each paragraph. All paragraphs use the exact same<code>filter</code>(the one above), they just have different values for<code>--text-c</code>,<code>--back-c</code>and<code>--a</code>.</p>",3)),t(r,{user:"thebabydino","slug-hash":"EaxmJag",title:"inline semitransparent text background with no overlap #8c","default-tab":["css","result"],theme:c.$isDarkmode?"dark":"light"},null,8,["theme"]),w(" TODO: add ARTICLE CARD "),t(m,g(v({title:"A Deep Dive into the Inline Background Overlap Problem",desc:"`box-decoration-break: clone;` in CSS can help us make for interesting backgrounds across lines of text that break, but when opacity gets involved, things can get complicated.",link:"https://chanhi2000.github.io/bookshelf/frontendmasters.com/overlapping-inline-backgrounds.html",logo:"https://frontendmasters.com/favicon.ico",background:"rgba(188,75,52,0.2)"})),null,16)])}const mn=f(C,[["render",rn]]),gn=JSON.parse('{"path":"/frontendmasters.com/overlapping-inline-backgrounds.html","title":"A Deep Dive into the Inline Background Overlap Problem","lang":"en-US","frontmatter":{"lang":"en-US","title":"A Deep Dive into the Inline Background Overlap Problem","description":"Article(s) > A Deep Dive into the Inline Background Overlap Problem","icon":"fa-brands fa-css3-alt","category":["CSS","Article(s)"],"tag":["blog","frontendmasters.com","css"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"A Deep Dive into the Inline Background Overlap Problem\\",\\"image\\":[\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/416732169-9cbb369e-7dab-4ad1-b345-aefbdfaa50c9.png?resize=1024%2C250&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419917091-aeb8f280-1a3b-4827-85c1-c6bf6425fb96.png?resize=800%2C192&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419932978-df9f8eed-00ef-45b7-a954-bd8e7cbcf753-1.png?resize=800%2C192&ssl=1\\",\\"https://cdpn.io/pen/debug/KwKvRKr\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419943848-cc3f8df9-621a-4c95-9227-9b64c8abd320.png?resize=800%2C192&ssl=1\\",\\"https://codepen.io/thebabydino/pen/gbOwxGL\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419959733-8c866d6c-e940-4e24-b27e-294025425e69.png?resize=800%2C192&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419973578-7e5dd953-22e5-4106-8a96-ed4a240ffcfe.png?resize=800%2C342&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/419983532-e37313d6-3ab8-4f77-850f-84b6ff6cdb41.png?resize=800%2C342&ssl=1\\",\\"https://codepen.io/thebabydino/pen/ogNzGpw\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420042481-0b030caf-58d6-4dcd-8e37-9c1ffe97a930.png?resize=800%2C264&ssl=1\\",\\"https://codepen.io/thebabydino/pen/azbpKpg\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420044455-77799210-3b25-4312-98a7-4cc296a9cdba.png?resize=800%2C264&ssl=1\\",\\"https://codepen.io/thebabydino/pen/pvormNg\\",\\"https://codepen.io/thebabydino/pen/yyLgWjQ\\",\\"https://codepen.io/thebabydino/pen/ZYEJBZr\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420356221-86ba9f46-d026-4138-9975-04f6f8acddf8.png?resize=800%2C192&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420568656-a726cc27-9ef9-46a2-84d4-943370d2a18f.png?resize=800%2C360&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420592423-5ee58be4-e3b6-475d-8353-dbdd07b28506.png?resize=800%2C374&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420622735-172f79d1-5f49-4c70-9b01-c9cde68974c0.png?resize=800%2C400&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420622938-0a6221ab-593a-4f45-93ca-1dc28820428e.png?resize=800%2C400&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420623150-858f198f-0791-40de-8dae-7a4af30623f7.png?resize=800%2C400&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/420624040-f48d5f15-0298-4ea1-923a-3dfcbdd96b92.png?resize=800%2C400&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421526552-d7aa5011-b420-42ad-86e9-7c218867d0f0.png?resize=800%2C416&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421563823-bef2a12e-63c3-48ae-8c03-ab698869dae1-1.png?resize=800%2C512&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421564769-35c90577-cc28-417d-8f11-fd28e1baaf26.png?resize=800%2C512&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421566248-cb88abc1-50fa-407c-9820-6484b5272908.png?resize=800%2C512&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421567092-20782bfb-8bd8-47a4-955d-1f7e8f7638b2.png?resize=800%2C416&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421568337-289ed7d9-92db-4c73-b5e0-9fcd041b98b3.png?resize=800%2C416&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421569320-65eb1151-e0fa-4d6e-a024-25b6ccadde1c.png?resize=800%2C512&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421569898-090dbf24-dc65-4dff-830b-b538d97c6128.png?resize=800%2C416&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421581023-73fac2b0-fa13-4029-b449-71036fdc48b7.png?resize=800%2C416&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/03/421573835-3385e69e-5c01-4d25-9863-281e7d5e4a23.png?resize=800%2C416&ssl=1\\"],\\"datePublished\\":\\"2025-03-18T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Ana Tudor\\",\\"url\\":\\"https://frontendmasters.com/blog/author/anatudor/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/frontendmasters.com/overlapping-inline-backgrounds.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"A Deep Dive into the Inline Background Overlap Problem"}],["meta",{"property":"og:description","content":"Article(s) > A Deep Dive into the Inline Background Overlap Problem"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/5330"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/5330"}],["meta",{"name":"twitter:image:alt","content":"A Deep Dive into the Inline Background Overlap Problem"}],["meta",{"property":"article:author","content":"Ana Tudor"}],["meta",{"property":"article:tag","content":"css"}],["meta",{"property":"article:tag","content":"frontendmasters.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2025-03-18T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > A Deep Dive into the Inline Background Overlap Problem"},{"property":"og:description","content":"A Deep Dive into the Inline Background Overlap Problem"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/frontendmasters.com/overlapping-inline-backgrounds.html"}]],"prev":"/programming/css/articles/README.md","date":"2025-03-18T00:00:00.000Z","isOriginal":false,"author":[{"name":"Ana Tudor","url":"https://frontendmasters.com/blog/author/anatudor/"}],"cover":"https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/5330"},"git":{},"readingTime":{"minutes":34.76,"words":10428},"filePathRelative":"frontendmasters.com/overlapping-inline-backgrounds.md","copyright":{"author":"Ana Tudor"}}');export{mn as comp,gn as data};
