import{_ as y}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as h,d as s,f as t,b as p,t as v,n as u,g as d,w as e,e as a,r as i,o as k}from"./app-BItykJLQ.js";const b={},f={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},w={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},C={class:"table-of-contents"},S={href:"https://en.wikipedia.org/wiki/Shift-left_testing",target:"_blank",rel:"noopener noreferrer"},A={href:"https://sonarsource.com/products/sonarqube/",target:"_blank",rel:"noopener noreferrer"},x={href:"https://rules.sonarsource.com/csharp/RSPEC-5344",target:"_blank",rel:"noopener noreferrer"},I={href:"https://gist.github.com/m-jovanovic/417b7d0a641d7dd7d1972550fba298db",target:"_blank",rel:"noopener noreferrer"};function j(g,n){const c=i("VPCard"),o=i("router-link"),m=i("SiteInfo"),l=i("VPIcon"),r=i("RouteLink");return k(),h("div",null,[s("h1",f,[s("a",w,[s("span",null,v(g.$frontmatter.title)+" ê´€ë ¨",1)])]),t(c,u(d({title:"C# > Article(s)",desc:"Article(s)",link:"/programming/cs/articles/README.md",logo:"https://chanhi2000.github.io/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),t(c,u(d({title:"Redis > Article(s)",desc:"Article(s)",link:"/data-science/redis/articles/README.md",logo:"https://chanhi2000.github.io/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",C,[s("ul",null,[s("li",null,[t(o,{to:"#what-is-static-code-analysis"},{default:e(()=>[...n[0]||(n[0]=[a("What is Static Code Analysis?",-1)])]),_:1})]),s("li",null,[t(o,{to:"#static-code-analysis-in-net"},{default:e(()=>[...n[1]||(n[1]=[a("Static Code Analysis in .NET",-1)])]),_:1})]),s("li",null,[t(o,{to:"#finding-and-fixing-security-risks"},{default:e(()=>[...n[2]||(n[2]=[a("Finding (and Fixing) Security Risks",-1)])]),_:1})]),s("li",null,[t(o,{to:"#conclusion"},{default:e(()=>[...n[3]||(n[3]=[a("Conclusion",-1)])]),_:1})])])]),n[24]||(n[24]=s("hr",null,null,-1)),t(m,{name:"Improving Code Quality in C# With Static Code Analysis",desc:"Static code analysis helps you build secure, maintainable, and high-quality C# code. In this week's newsletter, we'll explore how to integrate it into your .NET projects.",url:"https://milanjovanovic.tech/blog/improving-code-quality-in-csharp-with-static-code-analysis/",logo:"https://milanjovanovic.tech/profile_favicon.png",preview:"https://milanjovanovic.tech/blog-covers/mnw_101.png"}),n[25]||(n[25]=p('<p>Writing good code is important for any software project. It&#39;s also something I deeply care about. However, it can be hard to spot problems by just reading through everything.</p><p>Luckily, there&#39;s a tool that can help: <strong>static code analysis</strong>.</p><p>It&#39;s like having an extra pair of eyes automatically checking your code. Static code analysis helps you build secure, maintainable, and high-quality C# code.</p><p>Here&#39;s what we are going to cover in this week&#39;s newsletter:</p><ul><li>Static code analysis</li><li>Static analysis in .NET</li><li>Finding security risks</li></ul><p>Let&#39;s see how static code analysis can help us improve our code quality.</p><hr><h2 id="what-is-static-code-analysis" tabindex="-1"><a class="header-anchor" href="#what-is-static-code-analysis"><span>What is Static Code Analysis?</span></a></h2><p>Static code analysis is a way to examine your code without actually running it. It reports any issues related to security, performance, coding style, or best practices.</p>',9)),s("p",null,[n[5]||(n[5]=a("With static code analysis, you can ",-1)),s("a",S,[t(l,{icon:"fa-brands fa-wikipedia-w"}),n[4]||(n[4]=a('"shift left"',-1))]),n[6]||(n[6]=a(". This allows you to find and fix issues early in the development process when they're less expensive to solve.",-1))]),n[26]||(n[26]=s("p",null,"By writing high-quality code, you'll be able to build systems that are more reliable, scalable, and easier to maintain over time. Investing in code quality will pay dividends in the later stages of any project.",-1)),s("p",null,[n[9]||(n[9]=a("You can integrate static code analysis into your ",-1)),t(r,{to:"/milanjovanovic.tech/how-to-build-ci-cd-pipeline-with-github-actions-and-dotnet.html"},{default:e(()=>[...n[7]||(n[7]=[s("strong",null,"CI pipeline",-1)])]),_:1}),n[10]||(n[10]=a(" for a quick feedback loop. We can also pair this with ",-1)),t(r,{to:"/milanjovanovic.tech/shift-left-with-architecture-testing-in-dotnet.html"},{default:e(()=>[...n[8]||(n[8]=[s("strong",null,"architecture testing",-1)])]),_:1}),n[11]||(n[11]=a(" to enforce additional coding standards.",-1))]),n[27]||(n[27]=p('<hr><h2 id="static-code-analysis-in-net" tabindex="-1"><a class="header-anchor" href="#static-code-analysis-in-net"><span>Static Code Analysis in .NET</span></a></h2><p>.NET has built-in Roslyn analyzers that inspect your C# code for code style and quality issues. Code analysis is enabled by default if your project targets .NET 5 or later.</p><p>The best way I found to configure static code analysis is using <code>Directory.Build.props</code>. It&#39;s an XML file where you can configure common project properties. You can place the <code>Directory.Build.props</code> file in the root folder so it will apply to all projects.</p><p>You can configure the <code>TargetFramework</code>, <code>ImplicitUsings</code>, <code>Nullable</code> (nullable reference types), etc. But what we care about is configuring static code analysis.</p><p>Here are some properties we can configure:</p><ul><li><code>TreatWarningsAsErrors</code> - Treat all warnings as errors.</li><li><code>CodeAnalysisTreatWarningsAsErrors</code> - Treat code quality (CAxxxx) warnings as errors.</li><li><code>EnforceCodeStyleInBuild</code> - Enables code-style analysis (&quot;IDExxxx&quot;) rules.</li><li><code>AnalysisLevel</code> - Specifies which analyzers to enable. The default value is <code>latest</code>.</li><li><code>AnalysisMode</code> - Configures the predefined code analysis configuration.</li></ul>',7)),s("p",null,[n[13]||(n[13]=a("We can also install additional NuGet packages to our projects. ",-1)),n[14]||(n[14]=s("code",null,"SonarAnalyzer.CSharp",-1)),n[15]||(n[15]=a(" contains additional code analyzers to help us write clean, safe, and reliable code. This library comes from the same company that built ",-1)),s("a",A,[t(l,{icon:"fas fa-globe"}),n[12]||(n[12]=a("SonarQube",-1))]),n[16]||(n[16]=a(".",-1))]),n[28]||(n[28]=p(`<div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Project</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PropertyGroup</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TargetFramework</span><span class="token punctuation">&gt;</span></span>net8.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>TargetFramework</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImplicitUsings</span><span class="token punctuation">&gt;</span></span>enable<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ImplicitUsings</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Nullable</span><span class="token punctuation">&gt;</span></span>enable<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Nullable</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">&lt;!-- Configure code analysis. --&gt;</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AnalysisLevel</span><span class="token punctuation">&gt;</span></span>latest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AnalysisLevel</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AnalysisMode</span><span class="token punctuation">&gt;</span></span>All<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AnalysisMode</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TreatWarningsAsErrors</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>TreatWarningsAsErrors</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CodeAnalysisTreatWarningsAsErrors</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CodeAnalysisTreatWarningsAsErrors</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EnforceCodeStyleInBuild</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>EnforceCodeStyleInBuild</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PropertyGroup</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ItemGroup</span> <span class="token attr-name">Condition</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#39;</span>$(MSBuildProjectExtension)&#39; != &#39;.dcproj&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PackageReference</span> <span class="token attr-name">Include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SonarAnalyzer.CSharp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>*<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PrivateAssets</span><span class="token punctuation">&gt;</span></span>all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PrivateAssets</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IncludeAssets</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        runtime; build; native; contentfiles; analyzers; buildtransitive</span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>IncludeAssets</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PackageReference</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ItemGroup</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Project</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The built-in .NET analyzers and the ones from <code>SonarAnalyzer.CSharp</code> can be very helpful. But they can also make a lot of noise with too many build warnings.</p><p>When you encounter code analysis rules that you don&#39;t consider helpful, you can turn them off. You can configure individual code analysis rules in the <code>.editorconfig</code> file.</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line"># S125: Sections of code should not be commented out</span>
<span class="line">dotnet_diagnostic.S125.severity = none</span>
<span class="line"></span>
<span class="line"># S1075: URIs should not be hardcoded</span>
<span class="line">dotnet_diagnostic.S1075.severity = none</span>
<span class="line"></span>
<span class="line"># S2094: Classes should not be empty</span>
<span class="line">dotnet_diagnostic.S2094.severity = none</span>
<span class="line"></span>
<span class="line"># S3267: Loops should be simplified with &quot;LINQ&quot; expressions</span>
<span class="line">dotnet_diagnostic.S3267.severity = none</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="finding-and-fixing-security-risks" tabindex="-1"><a class="header-anchor" href="#finding-and-fixing-security-risks"><span>Finding (and Fixing) Security Risks</span></a></h2><p>Static code analysis can help you detect potential security vulnerabilities in your code. Here&#39;s an example of a <code>PasswordHasher</code> using only <code>10,000</code> iterations to generate a password hash. The <code>S5344</code> rule, from <code>SonarAnalyzer.CSharp</code>, detects this issue and warns us. The recommended minimal number of iterations is <code>100,000</code>.</p>`,7)),s("p",null,[n[18]||(n[18]=a("You can navigate to the explanation for ",-1)),s("a",x,[t(l,{icon:"fas fa-globe"}),n[17]||(n[17]=a("S5344",-1))]),n[19]||(n[19]=a(" to learn more:",-1))]),n[29]||(n[29]=p('<blockquote><p>Weakly hashed password storage poses a significant security risk to software applications.</p></blockquote><p>With <code>TreatWarningsAsErrors</code> turned on, your build will fail until you solve this issue. This reduces the chance of introducing security risks in production.</p><figure><img src="https://milanjovanovic.tech/blogs/mnw_101/static_code_analysis.png?imwidth=1920" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><hr><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h2><p>Static code analysis is a powerful tool I include in all my C# projects. It helps me catch problems early, leads to more reliable and secure code, and saves time and effort. While the initial setup and fine-tuning of rules might take some time, the long-term benefits are undeniable.</p><p>Remember, static code analysis is a tool that complements your existing development practices.</p><p>You can create a robust development process that consistently delivers high-quality software by combining static code analysis with other techniques like code reviews, unit testing, and continuous integration.</p><p>Embrace static code analysis. Your future self (and your team) will thank you.</p><p>That&#39;s all for today.</p><p>See you next week.</p>',11)),s("p",null,[n[21]||(n[21]=s("strong",null,"P.S.",-1)),n[22]||(n[22]=a(" Here's a sample ",-1)),s("a",I,[t(l,{icon:"iconfont icon-github"}),n[20]||(n[20]=a(".editorconfig",-1))]),n[23]||(n[23]=a(" file you can add to your projects and customize to fit your needs.",-1))])])}const E=y(b,[["render",j]]),W=JSON.parse('{"path":"/milanjovanovic.tech/improving-code-quality-in-csharp-with-static-code-analysis.html","title":"Improving Code Quality in C# With Static Code Analysis","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Improving Code Quality in C# With Static Code Analysis","description":"Article(s) > Improving Code Quality in C# With Static Code Analysis","icon":"iconfont icon-csharp","category":["C#","DotNet","Article(s)"],"tag":["blog","milanjovanovic.tech","cs","c#","csharp","dotnet"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Improving Code Quality in C# With Static Code Analysis\\",\\"image\\":[\\"https://milanjovanovic.tech/blogs/mnw_101/static_code_analysis.png?imwidth=1920\\"],\\"datePublished\\":\\"2024-08-03T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Milan JovanoviÄ‡\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/milanjovanovic.tech/improving-code-quality-in-csharp-with-static-code-analysis.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Improving Code Quality in C# With Static Code Analysis"}],["meta",{"property":"og:description","content":"Article(s) > Improving Code Quality in C# With Static Code Analysis"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://milanjovanovic.tech/blog-covers/mnw_101.png"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://milanjovanovic.tech/blog-covers/mnw_101.png"}],["meta",{"name":"twitter:image:alt","content":"Improving Code Quality in C# With Static Code Analysis"}],["meta",{"property":"article:author","content":"Milan JovanoviÄ‡"}],["meta",{"property":"article:tag","content":"dotnet"}],["meta",{"property":"article:tag","content":"csharp"}],["meta",{"property":"article:tag","content":"c#"}],["meta",{"property":"article:tag","content":"cs"}],["meta",{"property":"article:tag","content":"milanjovanovic.tech"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2024-08-03T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Improving Code Quality in C# With Static Code Analysis"},{"property":"og:description","content":"Improving Code Quality in C# With Static Code Analysis"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/milanjovanovic.tech/improving-code-quality-in-csharp-with-static-code-analysis.html"}]],"prev":"/programming/cs/articles/README.md","date":"2024-08-03T00:00:00.000Z","isOriginal":false,"author":"Milan JovanoviÄ‡","cover":"https://milanjovanovic.tech/blog-covers/mnw_101.png"},"git":{},"readingTime":{"minutes":3.54,"words":1063},"filePathRelative":"milanjovanovic.tech/improving-code-quality-in-csharp-with-static-code-analysis.md","copyright":{"author":"Milan JovanoviÄ‡"}}');export{E as comp,W as data};
