import{_ as b}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as g,d as s,f as t,b as o,a as v,t as f,n as d,g as c,w as a,e as n,r as p,o as y}from"./app-BItykJLQ.js";const w={},k={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},x={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},U={class:"table-of-contents"};function S(m,e){const u=p("VPCard"),i=p("router-link"),h=p("SiteInfo"),l=p("RouteLink"),r=p("VPIcon");return y(),g("div",null,[s("h1",k,[s("a",x,[s("span",null,f(m.$frontmatter.title)+" ê´€ë ¨",1)])]),t(u,d(c({title:"Linux - Debian > Article(s)",desc:"Article(s)",link:"/devops/linux-debian/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",U,[s("ul",null,[s("li",null,[t(i,{to:"#what-is-apt-mirror"},{default:a(()=>[...e[0]||(e[0]=[n("What is apt-mirror?",-1)])]),_:1})]),s("li",null,[t(i,{to:"#what-you-ll-need-in-detail"},{default:a(()=>[...e[1]||(e[1]=[n("What Youâ€™ll Need (In Detail)",-1)])]),_:1})]),s("li",null,[t(i,{to:"#step-1-install-apt-mirror-for-local-apt-repository-in-ubuntu"},{default:a(()=>[...e[2]||(e[2]=[n("Step 1: Install apt-mirror for Local APT Repository in Ubuntu",-1)])]),_:1})]),s("li",null,[t(i,{to:"#step-2-creating-necessary-folders-for-local-ubuntu-repository"},{default:a(()=>[...e[3]||(e[3]=[n("Step 2: Creating Necessary Folders for Local Ubuntu Repository",-1)])]),_:1})]),s("li",null,[t(i,{to:"#step-3-configure-apt-mirror"},{default:a(()=>[...e[4]||(e[4]=[n("Step 3: Configure apt-mirror",-1)])]),_:1})]),s("li",null,[t(i,{to:"#step-4-start-mirroring-apt-packages"},{default:a(()=>[...e[5]||(e[5]=[n("Step 4: Start Mirroring APT Packages",-1)])]),_:1})]),s("li",null,[t(i,{to:"#step-5-serve-the-mirror-via-apache-or-nginx"},{default:a(()=>[...e[6]||(e[6]=[n("Step 5: Serve the Mirror via Apache or Nginx",-1)])]),_:1})]),s("li",null,[t(i,{to:"#step-6-configure-clients-to-use-the-local-mirror"},{default:a(()=>[...e[7]||(e[7]=[n("Step 6: Configure Clients to Use the Local Mirror",-1)])]),_:1})]),s("li",null,[t(i,{to:"#step-7-automate-mirror-sync"},{default:a(()=>[...e[8]||(e[8]=[n("Step 7: Automate Mirror Sync",-1)])]),_:1})]),s("li",null,[t(i,{to:"#conclusion"},{default:a(()=>[...e[9]||(e[9]=[n("Conclusion",-1)])]),_:1})])])]),e[65]||(e[65]=s("hr",null,null,-1)),t(h,{name:"How to Set Up Local Repositories with apt-mirror in Ubuntu",desc:"In this article, youâ€™ll learn how to set up a local Ubuntu repository using apt-mirror to save bandwidth and speed up package installs.",url:"https://tecmint.com/setup-local-repositories-in-ubuntu",logo:"https://tecmint.com/wp-content/uploads/2020/07/favicon.ico",preview:"https://tecmint.com/wp-content/uploads/2014/05/setup-local-ubuntu-repository-apt-mirror.webp"}),e[66]||(e[66]=o('<p>If youâ€™re managing multiple <strong>Ubuntu</strong> machines in a network, downloading updates and packages for each system individually is a pain, as it eats up your bandwidth and takes more time than it should.</p><p>Wouldnâ€™t it be nice if you could download all the required packages just once and let all your systems install them locally from your own repository? thatâ€™s exactly what <code>apt-mirror</code> helps you do.</p><p>In this article, Iâ€™ll walk you through step-by-step on how to set up a local <strong>Ubuntu</strong> repository using <code>apt-mirror</code>.</p><hr><h2 id="what-is-apt-mirror" tabindex="-1"><a class="header-anchor" href="#what-is-apt-mirror"><span>What is apt-mirror?</span></a></h2><p><code>apt-mirror</code> is a small tool that downloads an entire <strong>APT</strong> repository (or a subset of it) from the <strong>Ubuntu</strong> mirrors and saves it locally on your server. You can then serve this local repository over <strong>HTTP</strong>, and point your client machines to it.</p><p>Basically, <code>apt-mirror</code> helps you:</p><ul><li>Create a local mirror of Ubuntu packages.</li><li>Reduce internet usage (great for limited bandwidth setups).</li><li>Speed up package installations and updates.</li><li>Work in offline or isolated environments.</li></ul><hr><h2 id="what-you-ll-need-in-detail" tabindex="-1"><a class="header-anchor" href="#what-you-ll-need-in-detail"><span>What Youâ€™ll Need (In Detail)</span></a></h2><p>Before we roll up our sleeves and start mirroring <strong>Ubuntu</strong> repositories, letâ€™s make sure youâ€™ve got everything in place.</p><p>Hereâ€™s a breakdown of the essentials and why each one matters.</p>',12)),s("ul",null,[e[26]||(e[26]=o("<li>Youâ€™ll need a dedicated <strong>Ubuntu</strong> machine, preferably running a recent <strong>LTS</strong> (<strong>Long-Term Support</strong>) version such as <strong>Ubuntu 24.04</strong>, <strong>Ubuntu 22.04</strong>, or <strong>Ubuntu 20.04</strong>.</li>",1)),s("li",null,[e[11]||(e[11]=n("Youâ€™ll need between ",-1)),e[12]||(e[12]=s("strong",null,"150GB",-1)),e[13]||(e[13]=n(" to ",-1)),e[14]||(e[14]=s("strong",null,"250GB",-1)),e[15]||(e[15]=n(" of ",-1)),t(l,{to:"/tecmint.com/bleachbit-disk-space-cleaner-for-linux.html"},{default:a(()=>[...e[10]||(e[10]=[s("strong",null,"free disk space",-1)])]),_:1}),e[16]||(e[16]=n(", depending on how much of the Ubuntu repository you plan to mirror.",-1))]),s("li",null,[e[18]||(e[18]=n("You should be comfortable using the command line: editing files, ",-1)),t(l,{to:"/tecmint.com/essential-linux-commands.html"},{default:a(()=>[...e[17]||(e[17]=[s("strong",null,"running commands",-1)])]),_:1}),e[19]||(e[19]=n(" with ",-1)),e[20]||(e[20]=s("code",null,"sudo",-1)),e[21]||(e[21]=n(", installing packages, and setting up basic services like ",-1)),e[22]||(e[22]=s("strong",null,"Apache",-1)),e[23]||(e[23]=n(" or ",-1)),e[24]||(e[24]=s("strong",null,"Nginx",-1)),e[25]||(e[25]=n(".",-1))]),e[27]||(e[27]=s("li",null,"Youâ€™ll need a stable and reasonably fast internet connection for the first sync, as it can download tens or even hundreds of gigabytes, which is especially important if youâ€™re mirroring an entire Ubuntu release with multiple components.",-1))]),e[67]||(e[67]=o(`<hr><h2 id="step-1-install-apt-mirror-for-local-apt-repository-in-ubuntu" tabindex="-1"><a class="header-anchor" href="#step-1-install-apt-mirror-for-local-apt-repository-in-ubuntu"><span>Step 1: Install apt-mirror for Local APT Repository in Ubuntu</span></a></h2><p>To begin setting up a local repository, the first step is to install the <code>apt-mirror</code> package, which is specifically designed to help you create a complete or partial mirror of Ubuntuâ€™s official APT repositories.</p><p>Start by updating your systemâ€™s package index to ensure you get the latest version of available software.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> update</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Once the update is complete, install the <code>apt-mirror</code> tool using the command:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> apt-mirror</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>After installation, <code>apt-mirror</code> is ready to be configured for your specific mirroring needs.</p><hr><h2 id="step-2-creating-necessary-folders-for-local-ubuntu-repository" tabindex="-1"><a class="header-anchor" href="#step-2-creating-necessary-folders-for-local-ubuntu-repository"><span>Step 2: Creating Necessary Folders for Local Ubuntu Repository</span></a></h2><p>When you use <code>apt-mirror</code>, it needs a place on your system to download and store all the repositories such as data packages, metadata, and structure.</p>`,11)),s("p",null,[e[28]||(e[28]=n("By default, it saves everything under the directory ",-1)),t(r,{icon:"fas fa-folder-open"}),e[29]||(e[29]=s("code",null,"/var/spool/apt-mirror",-1)),e[30]||(e[30]=n(", which becomes the local replica of the Ubuntu repository youâ€™re mirroring.",-1))]),e[68]||(e[68]=o(`<p>Although you can change this location by modifying the configuration file (weâ€™ll get to that in a later step), itâ€™s important to first make sure the directory exists and is ready to be used.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">sudo</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /var/spool/apt-mirror</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,2)),s("p",null,[e[31]||(e[31]=n("In addition to this, we also create another directory at ",-1)),t(r,{icon:"fas fa-folder-open"}),e[32]||(e[32]=s("code",null,"/var/www/html/ubuntu",-1)),e[33]||(e[33]=n(", which will be the public-facing folder from which client machines on your network can access the mirrored repository via a web server like ",-1)),e[34]||(e[34]=s("strong",null,"Apache",-1)),e[35]||(e[35]=n(" or ",-1)),e[36]||(e[36]=s("strong",null,"Nginx",-1)),e[37]||(e[37]=n(".",-1))]),e[69]||(e[69]=o(`<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">sudo</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /var/www/html/ubuntu</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Later in the process, weâ€™ll synchronize the contents from the mirror directory into this web-accessible path. That way, your internal machines donâ€™t need to reach out to the internetâ€”theyâ€™ll pull updates directly from your local mirror through HTTP.</p><hr><h2 id="step-3-configure-apt-mirror" tabindex="-1"><a class="header-anchor" href="#step-3-configure-apt-mirror"><span>Step 3: Configure apt-mirror</span></a></h2><p>Once youâ€™ve installed <code>apt-mirror</code>, you need to tell it what to download, where to store it, and how to behave during the sync. All of that is controlled through the main configuration file located at:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">/etc/apt/mirror.list</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Open the file in your favorite editor.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/apt/mirror.list</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now letâ€™s look at a sample configuration to mirror <strong>Ubuntu 24.04 (Noble Numbat)</strong> for amd64 (64-bit) systems:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="/etc/apt/mirror.list"><span>/etc/apt/mirror.list</span></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment">############# apt-mirror config #############</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Directory to store the mirrored files</span></span>
<span class="line"><span class="token builtin class-name">set</span> base_path    /var/spool/apt-mirror</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Internal structure directories</span></span>
<span class="line"><span class="token builtin class-name">set</span> mirror_path  <span class="token variable">$base_path</span>/mirror</span>
<span class="line"><span class="token builtin class-name">set</span> skel_path    <span class="token variable">$base_path</span>/skel</span>
<span class="line"><span class="token builtin class-name">set</span> var_path     <span class="token variable">$base_path</span>/var</span>
<span class="line"><span class="token builtin class-name">set</span> cleanscript  <span class="token variable">$var_path</span>/clean.sh</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Architecture you want to mirror</span></span>
<span class="line"><span class="token builtin class-name">set</span> defaultarch  amd64</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Number of download threads (10â€“20 is good for most)</span></span>
<span class="line"><span class="token builtin class-name">set</span> nthreads     <span class="token number">10</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Tilde files control (leave as is)</span></span>
<span class="line"><span class="token builtin class-name">set</span> _tilde <span class="token number">0</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">############# Repositories to Mirror ###########</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Base Ubuntu 24.04 repositories</span></span>
<span class="line">deb http://archive.ubuntu.com/ubuntu noble main restricted universe multiverse</span>
<span class="line">deb http://archive.ubuntu.com/ubuntu noble-updates main restricted universe multiverse</span>
<span class="line">deb http://archive.ubuntu.com/ubuntu noble-backports main restricted universe multiverse</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Security updates</span></span>
<span class="line">deb http://security.ubuntu.com/ubuntu noble-security main restricted universe multiverse</span>
<span class="line"></span>
<span class="line"><span class="token comment">############# Clean Instructions ##############</span></span>
<span class="line"></span>
<span class="line">clean http://archive.ubuntu.com/ubuntu</span>
<span class="line">clean http://security.ubuntu.com/ubuntu</span>
<span class="line"></span>
<span class="line"><span class="token comment">##############################################</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><hr><h2 id="step-4-start-mirroring-apt-packages" tabindex="-1"><a class="header-anchor" href="#step-4-start-mirroring-apt-packages"><span>Step 4: Start Mirroring APT Packages</span></a></h2>`,12)),s("p",null,[e[38]||(e[38]=n("Once youâ€™ve properly configured your ",-1)),t(r,{icon:"fas fa-file-lines"}),e[39]||(e[39]=s("code",null,"mirror.list",-1)),e[40]||(e[40]=n(" file with the repositories and components you want to mirror. Itâ€™s time to run the ",-1)),e[41]||(e[41]=s("code",null,"apt-mirror",-1)),e[42]||(e[42]=n(" command to download the Ubuntu packages to your local server.",-1))]),e[70]||(e[70]=o(`<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">sudo</span> apt-mirror</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,1)),s("p",null,[e[43]||(e[43]=n("The above command connects to the official Ubuntu mirror servers, fetches the metadata and package files you specified earlier, and saves them to your local disk under ",-1)),t(r,{icon:"fas fa-folder-open"}),e[44]||(e[44]=s("code",null,"/var/spool/apt-mirror",-1)),e[45]||(e[45]=n(".",-1))]),e[71]||(e[71]=s("p",null,[n("Depending on how many components you included (like "),s("code",null,"main"),n(", "),s("code",null,"universe"),n(", etc.) and how many architectures (like amd64 or i386), this process can take several hours and might consume over 100 GB of disk space. So make sure your server has enough free storage before you begin.")],-1)),s("p",null,[e[48]||(e[48]=n("I highly recommend running the above command inside a ",-1)),t(l,{to:"/tecmint.com/screen-command-examples-to-manage-linux-terminals.html"},{default:a(()=>[...e[46]||(e[46]=[s("strong",null,[s("code",null,"screen")],-1)])]),_:1}),e[49]||(e[49]=n(" or ",-1)),t(l,{to:"/tecmint.com/tmux-to-access-multiple-linux-terminals-inside-a-single-console.html"},{default:a(()=>[...e[47]||(e[47]=[s("strong",null,[s("code",null,"tmux")],-1)])]),_:1}),e[50]||(e[50]=n(" session, because large downloads take time, and if your SSH session gets disconnected or your terminal closes, the download will stop. Using screen or tmux ensures the process continues running in the background, even if you lose connection.",-1))]),e[72]||(e[72]=o(`<hr><h2 id="step-5-serve-the-mirror-via-apache-or-nginx" tabindex="-1"><a class="header-anchor" href="#step-5-serve-the-mirror-via-apache-or-nginx"><span>Step 5: Serve the Mirror via Apache or Nginx</span></a></h2><p>Once your system has finished downloading all the Ubuntu packages using <code>apt-mirror</code>, the next step is to make those packages accessible to other machines on your network.</p><p>To do this, youâ€™ll need to serve the mirrored files over <strong>HTTP</strong>, which is where a web server like <strong>Apache</strong> or <strong>Nginx</strong> comes into play.</p><p>In this guide, weâ€™ll use <strong>Apache</strong> for simplicity, so start by installing <strong>Apache</strong> using the command:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> apache2</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,6)),s("p",null,[e[51]||(e[51]=n("Once itâ€™s installed, youâ€™ll need to make your local mirror directory accessible to Apacheâ€™s default web root, which is typically located at ",-1)),t(r,{icon:"fas fa-folder-open"}),e[52]||(e[52]=s("code",null,"/var/www/html",-1)),e[53]||(e[53]=n(".",-1))]),e[73]||(e[73]=o(`<p>To do that, you can create symbolic links from the mirrored directories to the web root. For example, use the following commands to link the Ubuntu archive and security mirrors:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /var/spool/apt-mirror/mirror/archive.ubuntu.com/ubuntu /var/www/html/ubuntu</span>
<span class="line"><span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /var/spool/apt-mirror/mirror/security.ubuntu.com/ubuntu /var/www/html/ubuntu-security</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>After linking, itâ€™s time to test if the mirror is working, open a web browser and go to <code>http://your-server-ip/ubuntu/dists/noble/</code>. Replace <code>your-server-ip</code> with the actual IP address of your mirror server. If everything is set up correctly, you should see the directory listing or release files for the <strong>noble</strong> distribution.</p><hr><h2 id="step-6-configure-clients-to-use-the-local-mirror" tabindex="-1"><a class="header-anchor" href="#step-6-configure-clients-to-use-the-local-mirror"><span>Step 6: Configure Clients to Use the Local Mirror</span></a></h2>`,5)),s("p",null,[e[54]||(e[54]=n("Once your local APT mirror is set up and served over HTTP, the next step is to configure your client machines to use it instead of reaching out to the internet for packages, which means youâ€™ll need to edit the ",-1)),t(r,{icon:"fas fa-file-lines"}),e[55]||(e[55]=s("code",null,"sources.list",-1)),e[56]||(e[56]=n(" file on each client, which tells the system where to fetch updates and software from.",-1))]),s("p",null,[e[57]||(e[57]=n("Start by making a backup of the existing ",-1)),t(r,{icon:"fas fa-file-lines"}),e[58]||(e[58]=s("code",null,"sources.list",-1)),e[59]||(e[59]=n(" file, just in case you need to revert to the original settings later.",-1))]),e[74]||(e[74]=o(`<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">sudo</span> <span class="token function">cp</span> /etc/apt/sources.list /etc/apt/sources.list.bak</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>After that, open the file in your preferred text editor.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/apt/sources.list</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now comes the important part â€” replace the default Ubuntu mirror URLs with the IP address (or hostname) of your local mirror server. For example, if your local server IP is <code>192.168.1.100</code>, your sources list should look like this:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="/etc/apt/sources.list"><span>/etc/apt/sources.list</span></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">deb http://192.168.1.100/ubuntu noble main restricted universe multiverse</span>
<span class="line">deb http://192.168.1.100/ubuntu noble-updates main restricted universe multiverse</span>
<span class="line">deb http://192.168.1.100/ubuntu-security noble-security main restricted universe multiverse</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>These lines tell the client machine to fetch the base system packages, updates, and security patches directly from the local mirror instead of going out to <code>archive.ubuntu.com</code> or <code>security.ubuntu.com</code>.</p><p>Once youâ€™ve made these changes, save and run:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> update</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This will refresh the package index using your local repository. If everything is configured correctly and your local mirror is accessible, the client should now pull updates and install packages directly from your server, resulting in faster installations and less internet usage.</p><hr><h2 id="step-7-automate-mirror-sync" tabindex="-1"><a class="header-anchor" href="#step-7-automate-mirror-sync"><span>Step 7: Automate Mirror Sync</span></a></h2><p>Once youâ€™ve completed the initial synchronization of your local Ubuntu mirror using <code>apt-mirror</code>, the next important step is to keep it updated regularly.</p><p>Ubuntu repositories are updated frequently with new packages, security patches, and bug fixes. If your local mirror becomes outdated, your client systems wonâ€™t benefit from these updates, defeating the purpose of having a mirror in the first place.</p>`,13)),s("p",null,[e[61]||(e[61]=n("To handle this automatically, we use a simple but powerful Linux feature called ",-1)),e[62]||(e[62]=s("code",null,"cron",-1)),e[63]||(e[63]=n(", which allows you to schedule tasks (called ",-1)),t(l,{to:"/tecmint.com/create-and-manage-cron-jobs-on-linux.html"},{default:a(()=>[...e[60]||(e[60]=[s("strong",null,[s("code",null,"cron"),n(" jobs")],-1)])]),_:1}),e[64]||(e[64]=n(") to run at specific times or intervals.",-1))]),e[75]||(e[75]=o(`<p>To do this, open the root userâ€™s crontab file by running:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">sudo</span> <span class="token function">crontab</span> <span class="token parameter variable">-e</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now, add the following line to the bottom of the file:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token number">0</span> <span class="token number">2</span> * * * /usr/bin/apt-mirror <span class="token operator">&gt;</span> /var/log/apt-mirror.log</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This line tells the system to run the <code>apt-mirror</code> command every day at 2:00 AM. The <code>&gt; /var/log/apt-mirror.log</code> part sends the output of the command to a log file, so you can check it later if you need to troubleshoot.</p><hr><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h2><p>Setting up a local Ubuntu APT repository with <code>apt-mirror</code> is a great solution for anyone managing multiple machines on a network. It not only saves time and bandwidth but also ensures faster package installations and easier maintenance, especially in environments with limited or no internet access.</p>`,8)),v(" TODO: add ARTICLE CARD "),t(u,d(c({title:"How to Set Up Local Repositories with apt-mirror in Ubuntu",desc:"In this article, youâ€™ll learn how to set up a local Ubuntu repository using apt-mirror to save bandwidth and speed up package installs.",link:"https://chanhi2000.github.io/bookshelf/tecmint.com/setup-local-repositories-in-ubuntu.html",logo:"https://tecmint.com/wp-content/uploads/2020/07/favicon.ico",background:"rgba(5,86,243,0.2)"})),null,16)])}const I=b(w,[["render",S]]),L=JSON.parse('{"path":"/tecmint.com/setup-local-repositories-in-ubuntu.html","title":"How to Set Up Local Repositories with apt-mirror in Ubuntu","lang":"en-US","frontmatter":{"lang":"en-US","title":"How to Set Up Local Repositories with apt-mirror in Ubuntu","description":"Article(s) > How to Set Up Local Repositories with apt-mirror in Ubuntu","icon":"fa-brands fa-ubuntu","category":["DevOps","Linux","Debian","Ubuntu","Article(s)"],"tag":["blog","tecmint.com","devops","linux","debian","ubuntu"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"How to Set Up Local Repositories with apt-mirror in Ubuntu\\",\\"image\\":[\\"https://tecmint.com/wp-content/uploads/2014/05/setup-local-ubuntu-repository-apt-mirror.webp\\"],\\"datePublished\\":\\"2025-07-22T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Matei Cezar\\",\\"url\\":\\"https://tecmint.com/author/cezarmatei/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/tecmint.com/setup-local-repositories-in-ubuntu.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"How to Set Up Local Repositories with apt-mirror in Ubuntu"}],["meta",{"property":"og:description","content":"Article(s) > How to Set Up Local Repositories with apt-mirror in Ubuntu"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://tecmint.com/wp-content/uploads/2014/05/setup-local-ubuntu-repository-apt-mirror.webp"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://tecmint.com/wp-content/uploads/2014/05/setup-local-ubuntu-repository-apt-mirror.webp"}],["meta",{"name":"twitter:image:alt","content":"How to Set Up Local Repositories with apt-mirror in Ubuntu"}],["meta",{"property":"article:author","content":"Matei Cezar"}],["meta",{"property":"article:tag","content":"ubuntu"}],["meta",{"property":"article:tag","content":"debian"}],["meta",{"property":"article:tag","content":"linux"}],["meta",{"property":"article:tag","content":"devops"}],["meta",{"property":"article:tag","content":"tecmint.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2025-07-22T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > How to Set Up Local Repositories with apt-mirror in Ubuntu"},{"property":"og:description","content":"How to Set Up Local Repositories with apt-mirror in Ubuntu"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/tecmint.com/setup-local-repositories-in-ubuntu.html"}]],"prev":"/devops/linux-debian/articles/README.md","date":"2025-07-22T00:00:00.000Z","isOriginal":false,"author":[{"name":"Matei Cezar","url":"https://tecmint.com/author/cezarmatei/"}],"cover":"https://tecmint.com/wp-content/uploads/2014/05/setup-local-ubuntu-repository-apt-mirror.webp"},"git":{},"readingTime":{"minutes":6.72,"words":2015},"filePathRelative":"tecmint.com/setup-local-repositories-in-ubuntu.md","copyright":{"author":"Matei Cezar"}}');export{I as comp,L as data};
