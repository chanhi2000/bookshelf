import{_ as m}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as v,d as s,f as e,b as l,a as b,t as h,n as r,g as u,w as p,e as a,r as i,o as g}from"./app-BVguHYKu.js";const y="/bookshelf/assets/image/blog.logrocket.com/practical-guide-typescript-decorators/banner.png",f={},w={id:"frontmatter-title-관련",tabindex:"-1"},x={class:"header-anchor",href:"#frontmatter-title-관련"},T={class:"table-of-contents"},S={class:"hint-container note"},j={href:"https://blog.logrocket.com/author/yansun/",target:"_blank",rel:"noopener noreferrer"},R={href:"https://github.com/tc39/proposal-decorators",target:"_blank",rel:"noopener noreferrer"},q={href:"https://caniuse.com/?search=decorators",target:"_blank",rel:"noopener noreferrer"},F={href:"https://github.com/tc39/proposals",target:"_blank",rel:"noopener noreferrer"},A={href:"https://github.com/mdipirro/typescript-decorators",target:"_blank",rel:"noopener noreferrer"},I={href:"https://github.com/tc39/proposal-decorators/issues/47",target:"_blank",rel:"noopener noreferrer"},D={href:"https://github.com/microsoft/TypeScript/pull/50820",target:"_blank",rel:"noopener noreferrer"},W={href:"https://devblogs.microsoft.com/typescript/announcing-typescript-5-0/#differences-with-experimental-legacy-decorators",target:"_blank",rel:"noopener noreferrer"},C={href:"https://typeorm.io",target:"_blank",rel:"noopener noreferrer"},P={href:"https://angular.io/",target:"_blank",rel:"noopener noreferrer"};function N(d,n){const c=i("VPCard"),t=i("router-link"),k=i("SiteInfo"),o=i("VPIcon");return g(),v("div",null,[s("h1",w,[s("a",x,[s("span",null,h(d.$frontmatter.title)+" 관련",1)])]),e(c,r(u({title:"TypeScript > Article(s)",desc:"Article(s)",link:"/programming/ts/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",T,[s("ul",null,[s("li",null,[e(t,{to:"#decorators-in-javascript-vs-typescript"},{default:p(()=>n[0]||(n[0]=[a("Decorators in JavaScript vs. TypeScript")])),_:1,__:[0]})]),s("li",null,[e(t,{to:"#getting-started-with-decorators-in-typescript"},{default:p(()=>n[1]||(n[1]=[a("Getting started with decorators in TypeScript")])),_:1,__:[1]})]),s("li",null,[e(t,{to:"#new-typescript-decorators"},{default:p(()=>n[2]||(n[2]=[a("New TypeScript decorators")])),_:1,__:[2]})]),s("li",null,[e(t,{to:"#types-of-decorators"},{default:p(()=>n[3]||(n[3]=[a("Types of decorators")])),_:1,__:[3]}),s("ul",null,[s("li",null,[e(t,{to:"#class-decorators"},{default:p(()=>n[4]||(n[4]=[a("Class decorators")])),_:1,__:[4]})]),s("li",null,[e(t,{to:"#method-decorators"},{default:p(()=>n[5]||(n[5]=[a("Method decorators")])),_:1,__:[5]})]),s("li",null,[e(t,{to:"#property-decorators"},{default:p(()=>n[6]||(n[6]=[a("Property decorators")])),_:1,__:[6]})]),s("li",null,[e(t,{to:"#accessor-decorators"},{default:p(()=>n[7]||(n[7]=[a("Accessor decorators")])),_:1,__:[7]})]),s("li",null,[e(t,{to:"#auto-accessor-decorators"},{default:p(()=>n[8]||(n[8]=[a("Auto-accessor decorators")])),_:1,__:[8]})]),s("li",null,[e(t,{to:"#parameter-decorators"},{default:p(()=>n[9]||(n[9]=[a("Parameter decorators")])),_:1,__:[9]})])])]),s("li",null,[e(t,{to:"#use-cases-for-typescript-decorators"},{default:p(()=>n[10]||(n[10]=[a("Use cases for TypeScript decorators")])),_:1,__:[10]}),s("ul",null,[s("li",null,[e(t,{to:"#calculating-execution-time"},{default:p(()=>n[11]||(n[11]=[a("Calculating execution time")])),_:1,__:[11]})])])]),s("li",null,[e(t,{to:"#advanced-decorator-patterns"},{default:p(()=>n[12]||(n[12]=[a("Advanced decorator patterns")])),_:1,__:[12]}),s("ul",null,[s("li",null,[e(t,{to:"#decorator-composition"},{default:p(()=>n[13]||(n[13]=[a("Decorator composition")])),_:1,__:[13]})]),s("li",null,[e(t,{to:"#decorator-factory"},{default:p(()=>n[14]||(n[14]=[a("Decorator factory")])),_:1,__:[14]})]),s("li",null,[e(t,{to:"#automatic-error-guard"},{default:p(()=>n[15]||(n[15]=[a("Automatic error guard")])),_:1,__:[15]})])])]),s("li",null,[e(t,{to:"#conclusion"},{default:p(()=>n[16]||(n[16]=[a("Conclusion")])),_:1,__:[16]})])])]),n[74]||(n[74]=s("hr",null,null,-1)),e(k,{name:"A practical guide to TypeScript decorators",desc:"TypeScript decorators allow you to calculate execution time, perform runtime type assertion, guard against errors, and much more.",url:"https://blog.logrocket.com/practical-guide-typescript-decorators",logo:"/assets/image/blog.logrocket.com/favicon.png",preview:"/assets/image/blog.logrocket.com/practical-guide-typescript-decorators/banner.png"}),s("div",S,[n[20]||(n[20]=s("p",{class:"hint-container-title"},"Editor’s note",-1)),s("p",null,[n[18]||(n[18]=a("This article was last updated by ")),s("a",j,[e(o,{icon:"fas fa-globe"}),n[17]||(n[17]=a("Yan Sun"))]),n[19]||(n[19]=a(" on 21 March 2024 to provide information about parameter decorators in TypeScript, and explore advanced decorator patterns like decorator composition and factories."))])]),n[75]||(n[75]=s("figure",null,[s("img",{src:y,alt:"A Practical Guide To TypeScript Decorators",tabindex:"0",loading:"lazy"}),s("figcaption",null,"A Practical Guide To TypeScript Decorators")],-1)),s("p",null,[n[24]||(n[24]=a("A decorator is a programming design pattern in which you wrap something to change its behavior. This feature is currently at ")),s("a",R,[n[21]||(n[21]=a("stage three (")),e(o,{icon:"iconfont icon-github"}),n[22]||(n[22]=s("code",null,"tc39/proposal-decorators",-1)),n[23]||(n[23]=a(")"))]),n[25]||(n[25]=a(" in JavaScript. Decorators are not new; several programming languages, such as Python, Java, and C#, adopted this pattern before JavaScript. Further refinement of the syntax will require feedback from implementation and users."))]),s("p",null,[n[27]||(n[27]=a("At the time of writing, ")),s("a",q,[e(o,{icon:"fas fa-globe"}),n[26]||(n[26]=a("most browsers do not support decorators"))]),n[28]||(n[28]=a(". Nonetheless, you can test them out by using compilers like Babel."))]),n[76]||(n[76]=s("p",null,"In this article, we will learn how decorators compare in JavaScript and TypeScript. We will also explore the various types of TypeScript decorators, including the class, method, property, and accessor decorators.",-1)),n[77]||(n[77]=s("hr",null,null,-1)),n[78]||(n[78]=s("h2",{id:"decorators-in-javascript-vs-typescript",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#decorators-in-javascript-vs-typescript"},[s("span",null,"Decorators in JavaScript vs. TypeScript")])],-1)),n[79]||(n[79]=s("p",null,"TypeScript’s decorator feature differs significantly from JavaScript’s. The first big difference concerns what we can decorate. TypeScript decorators allow us to annotate and modify class declarations, methods, properties, accessors, and parameters.",-1)),s("p",null,[n[32]||(n[32]=a("TypeScript 5.0 introduces the new implementation of decorator support, which aligns with the ")),s("a",F,[n[29]||(n[29]=a("ECMAScript stage three proposal (")),e(o,{icon:"iconfont icon-github"}),n[30]||(n[30]=s("code",null,"tc39/proposals",-1)),n[31]||(n[31]=a(")"))]),n[33]||(n[33]=a(". However, it does not currently support parameter decoration, but that might change in future ECMAScript proposals. Old TypeScript decorators do support parameter decoration. We’ll learn more about this later in the article. JavaScript, on the other hand, only lets us decorate class declarations and methods."))]),n[80]||(n[80]=l(`<p>The second important difference between decorators in JavaScript and TypeScript is type checking. Because TypeScript is a strongly typed programming language, it can type-check the parameters and return the value of the decorator function. JavaScript lacks this type checking and validation, so you need to rely on runtime checks or external tools like linters to catch type errors.</p><hr><h2 id="getting-started-with-decorators-in-typescript" tabindex="-1"><a class="header-anchor" href="#getting-started-with-decorators-in-typescript"><span>Getting started with decorators in TypeScript</span></a></h2><p>Start by creating a blank Node.js project:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">mkdir</span> typescript-decorators</span>
<span class="line"><span class="token builtin class-name">cd</span> typescript-decorators</span>
<span class="line"><span class="token function">npm</span> init <span class="token parameter variable">-y</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Next, install TypeScript as a development dependency:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> typescript @types/node</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,7)),s("p",null,[n[34]||(n[34]=a("The ")),e(o,{icon:"fa-brands fa-npm"}),n[35]||(n[35]=s("code",null,"@types/node",-1)),n[36]||(n[36]=a(" package contains the Node.js type definitions for TypeScript. We need this package to access some Node.js standard libraries."))]),s("p",null,[n[37]||(n[37]=a("Add an npm script in the ")),e(o,{icon:"iconfont icon-json"}),n[38]||(n[38]=s("code",null,"package.json",-1)),n[39]||(n[39]=a(" file to compile your TypeScript code:"))]),n[81]||(n[81]=l(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="package.json"><span>package.json</span></div><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// ...</span></span>
<span class="line">  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tsc&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Until TypeScript 5.0, we had to explicitly set a flag, <code>experimentalDecorators</code>, to use decorators in our code. With TypeScript 5.0, this is no longer the case. While such a flag will likely stay around for the foreseeable future, we can use new-style decorators without it. In fact, the old-style decorators modeled a different version of the proposal (Stage 2). We can use both styles in our code because the type rules differ, but it’s not advisable.</p><p>Remember to configure your working environment to use at least TypeScript 5. Otherwise, the code in this article won’t compile.</p><p>We’ll use <code>ES6</code> as a target for TypeScript because all modern browsers support it:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="package.json"><span>package.json</span></div><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ES6&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Next, we’ll create a simple TypeScript file to test the project out:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> run build</span>
<span class="line"><span class="token function">node</span> index.js</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># Hello, world!</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Instead of repeating this command repeatedly, we can simplify the compilation and execution process by using a package called ts-node. It’s a community package that enables us to run TypeScript code directly without compiling it first.</p><p>Let’s install it as a development dependency:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> ts-node</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,11)),s("p",null,[n[40]||(n[40]=a("Next, add a ")),n[41]||(n[41]=s("code",null,"start",-1)),n[42]||(n[42]=a(" script to the ")),e(o,{icon:"iconfont icon-json"}),n[43]||(n[43]=s("code",null,"package.json",-1)),n[44]||(n[44]=a(" file:"))]),n[82]||(n[82]=l(`<div class="code-block-with-title"><div class="code-block-title-bar" data-title="package.json"><span>package.json</span></div><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tsc&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ts-node index.ts&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Simply run <code>npm start</code> to run your code:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> start</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># Hello, world!</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3)),s("p",null,[n[48]||(n[48]=a("I have all the ")),s("a",A,[n[45]||(n[45]=a("source code for this article published on my GitHub (")),e(o,{icon:"iconfont icon-github"}),n[46]||(n[46]=s("code",null,"mdipirro/typescript-decorators",-1)),n[47]||(n[47]=a(")"))]),n[49]||(n[49]=a(". You can clone it onto your machine using the command below:"))]),n[83]||(n[83]=l(`<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">git</span> clone git@github.com:mdipirro/typescript-decorators.git</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="new-typescript-decorators" tabindex="-1"><a class="header-anchor" href="#new-typescript-decorators"><span>New TypeScript decorators</span></a></h2><p>In TypeScript, decorators are functions that can be attached to classes and their members, such as methods and properties.</p><p>In this section, we’re going to look at new-style decorators. First, the new <code>Decorator</code> type is defined as follows:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="Decorator.ts"><span>Decorator.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">type</span> <span class="token class-name">Decorator</span> <span class="token operator">=</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> Input<span class="token punctuation">,</span> context<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">  kind<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">symbol</span><span class="token punctuation">;</span></span>
<span class="line">  access<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    get<span class="token operator">?</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span></span>
<span class="line">    set<span class="token operator">?</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">private</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">static</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span></span>
<span class="line">  addInitializer<span class="token operator">?</span><span class="token punctuation">(</span><span class="token function-variable function">initializer</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Output <span class="token operator">|</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>The <code>type</code> definition above looks complex, so let’s break it down one piece at a time:</p><ul><li><code>target</code> represents the element we’re decorating, whose type is <code>Input</code></li><li><code>context</code> contains metadata about how the decorated method was declared, namely: <ul><li><code>kind</code>: The type of decorated value. As we’ll see, this can be either <code>class</code>, <code>method</code>, <code>getter</code>, <code>setter</code>, <code>field</code>, or <code>accessor</code></li><li><code>name</code>: The name of the decorated object</li><li><code>access</code>: An object with references to a getter and setter method to access the decorated object</li><li><code>private</code>: Whether the decorated object is a <code>private</code> class member</li><li><code>static</code>: Whether the decorated object is a <code>static</code> class member</li><li><code>addInitializer</code>: A way to add custom initialization logic at the beginning of the constructor (or when the class is defined)</li></ul></li><li><code>Output</code> represents the type of value returned by the <code>Decorator</code> function</li></ul>`,8)),s("p",null,[n[53]||(n[53]=a("In the next section, we’ll examine the types of decorators. Interestingly, while old-style decorators let us decorate function parameters, new-style ones don’t, at least for now. In fact, parameter decorators are waiting for a ")),s("a",I,[n[50]||(n[50]=a("follow-on proposal (")),e(o,{icon:"iconfont icon-github"}),n[51]||(n[51]=s("code",null,"tc39/proposal-decorators",-1)),n[52]||(n[52]=a(")"))]),n[54]||(n[54]=a(" to reach Stage 3."))]),n[84]||(n[84]=l(`<hr><h2 id="types-of-decorators" tabindex="-1"><a class="header-anchor" href="#types-of-decorators"><span>Types of decorators</span></a></h2><p>Now that we know how the Decorator type is defined, we’ll examine the various types of decorators.</p><h3 id="class-decorators" tabindex="-1"><a class="header-anchor" href="#class-decorators"><span>Class decorators</span></a></h3><p>Class decorators allow modification of class behavior. Upon class initialization, they are invoked and gain access to the class’s constructor, methods, and properties.</p><p>When you attach a function to a class as a decorator, you’ll receive the class constructor as the first parameter:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="ClassDecorator.ts"><span>ClassDecorator.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">type</span> <span class="token class-name">ClassDecorator</span> <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">,</span> context<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">  kind<span class="token operator">:</span> <span class="token string">&quot;class&quot;</span></span>
<span class="line">  name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span></span>
<span class="line">  <span class="token function">addInitializer</span><span class="token punctuation">(</span><span class="token function-variable function">initializer</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Function</span> <span class="token operator">|</span> <span class="token keyword">void</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>For example, let’s assume we want to use a decorator to add two properties, <code>fuel</code> and <code>isEmpty()</code>, to a <code>Rocket</code> class. In this case, we could write the following function:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="WithFuel.ts"><span>WithFuel.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">function</span> <span class="token function">WithFuel</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token keyword">typeof</span> Rocket<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">typeof</span> Rocket <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">&quot;class&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token keyword">extends</span></span> target <span class="token punctuation">{</span></span>
<span class="line">      fuel<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">50</span></span>
<span class="line">      <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fuel <span class="token operator">==</span> <span class="token number">0</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>After ensuring the <code>kind</code> of the decorated element is indeed <code>class</code>, we return a new class with two additional properties. Alternatively, we could have used prototype objects to add new methods dynamically:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="WithFuel.ts"><span>WithFuel.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">function</span> <span class="token function">WithFuel</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token keyword">typeof</span> Rocket<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">typeof</span> Rocket <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">&quot;class&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    target<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>fuel <span class="token operator">=</span> <span class="token number">50</span></span>
<span class="line">    target<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isEmpty <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fuel <span class="token operator">==</span> <span class="token number">0</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>We can use <code>WithFuel</code> as follows:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="Rocket.ts"><span>Rocket.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">WithFuel</span></span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Rocket</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> rocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span>rocket <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fuel<span class="token punctuation">)</span></span>
<span class="line"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Is the rocket empty? </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token punctuation">(</span>rocket <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">//</span></span>
<span class="line"><span class="token comment">// 50</span></span>
<span class="line"><span class="token comment">// Is the rocket empty? false</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>You might have noticed that we had to cast <code>rocket</code> to <code>any</code> to access the new properties. That’s because decorators can’t influence the structure of the type.</p><p>If the original class defines a property that is later decorated, the decorator overrides the original value. For example, if <code>Rocket</code> has a <code>fuel</code> property with a different value, <code>WithFuel</code> would override<br> such a value:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="WithFuel.ts"><span>WithFuel.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">function</span> <span class="token function">WithFuel</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token keyword">typeof</span> Rocket<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">typeof</span> Rocket <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">&quot;class&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token keyword">extends</span></span> target <span class="token punctuation">{</span></span>
<span class="line">      fuel<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">50</span></span>
<span class="line">      <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fuel <span class="token operator">==</span> <span class="token number">0</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">WithFuel</span></span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Rocket</span> <span class="token punctuation">{</span></span>
<span class="line">  fuel<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">75</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> rocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span>rocket <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fuel<span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">//</span></span>
<span class="line"><span class="token comment">// 50</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Another use of the class decorators is to enhance the existing class methods. Let’s say we have an <code>addFuel</code> method in the <code>Rocket</code> class:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="Rocket.ts"><span>Rocket.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">class</span> <span class="token class-name">Rocket</span> <span class="token punctuation">{</span></span>
<span class="line">  fuel<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">addFuel</span><span class="token punctuation">(</span>amount<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>fuel <span class="token operator">+=</span> amount<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>We can extend the <code>addFuel</code> method by applying a new class decorator: <code>logFuel</code>:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="logFuel.ts"><span>logFuel.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">function</span> <span class="token function">logFuel</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> original <span class="token operator">=</span> target<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>addFuel<span class="token punctuation">;</span></span>
<span class="line">  target<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">addFuel</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Before adding fuel, total fuel: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">this</span><span class="token punctuation">.</span>fuel<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">original</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">After adding fuel, total fuel: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">this</span><span class="token punctuation">.</span>fuel<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>The above decorator adds logging functionality around the <code>addFuel</code> method of the class, allowing us to track changes in the fuel level before and after each fuel addition operation. Now, when we add it to the <code>Rocket</code> class as below, the change in fuel amount will be printed in the console:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="Rocket.ts"><span>Rocket.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">logFuel</span></span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Rocket</span> <span class="token punctuation">{</span></span>
<span class="line">  fuel<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">addFuel</span><span class="token punctuation">(</span>amount<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>fuel <span class="token operator">+=</span> amount<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">const</span> rocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">rocket<span class="token punctuation">.</span><span class="token function">addFuel</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">/*</span>
<span class="line">Before adding fuel, total fuel: 11</span>
<span class="line">After adding fuel, total fuel: 21</span>
<span class="line">*/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h3 id="method-decorators" tabindex="-1"><a class="header-anchor" href="#method-decorators"><span>Method decorators</span></a></h3><p>Another good place to attach a decorator is class methods. In this case, the type of the decorator function is as follows:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="ClassMethodDecorator.ts"><span>ClassMethodDecorator.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">type</span> <span class="token class-name">ClassMethodDecorator</span> <span class="token operator">=</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">,</span> context<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">  kind<span class="token operator">:</span> <span class="token string">&quot;method&quot;</span></span>
<span class="line">  name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">symbol</span></span>
<span class="line">  access<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">static</span><span class="token operator">:</span> <span class="token builtin">boolean</span></span>
<span class="line">  <span class="token keyword">private</span><span class="token operator">:</span> <span class="token builtin">boolean</span></span>
<span class="line">  <span class="token function">addInitializer</span><span class="token punctuation">(</span><span class="token function-variable function">initializer</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Function</span> <span class="token operator">|</span> <span class="token keyword">void</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>We can use method decorators when we want something to happen before or after the invocation of the method being decorated.</p><p>For example, during development, it might be useful to log the calls using a given method or verify pre/post-conditions before/after the call. Additionally, we can influence how the method is invoked, for example, by delaying its execution or limiting the number of calls within a given amount of time.</p><p>Finally, we can use method decorators to mark a method as deprecated, logging a message to warn the user and tell them which method to use instead:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="deprecatedMethod.ts"><span>deprecatedMethod.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">function</span> <span class="token function">deprecatedMethod</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">&quot;method&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>context<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is deprecated and will be removed in a future version.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token function">target</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Again, the first parameter of the <code>deprecatedMethod</code> function is, in this case, the method we’re decorating. After making sure it’s indeed a method (<code>context.kind === &quot;method&quot;</code>), we return a new <code>function</code> that wraps the decorated method and logs a warning message before calling the actual method call.</p><p>We can then use our new decorator as follows:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="Rocket.ts"><span>Rocket.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">WithFuel</span></span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Rocket</span> <span class="token punctuation">{</span></span>
<span class="line">  fuel<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">75</span></span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">deprecatedMethod</span></span></span>
<span class="line">  <span class="token function">isReadyForLaunch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Boolean <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> rocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Is the rocket ready for launch? </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>rocket<span class="token punctuation">.</span><span class="token function">isReadyForLaunch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>In the <code>isReadyForLaunch()</code> method, we refer to the <code>isEmpty</code> method we added via the <code>WithFuel</code> decorator. Notice how we had to cast <code>this</code> to an instance of <code>any</code>, as we did before. When we call <code>isReadyForLaunch()</code>, we’ll see the following output, showing that the warning gets correctly printed out:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="output"><span>output</span></div><div class="language-plaintext line-numbers-mode" data-highlighter="prismjs" data-ext="plaintext"><pre><code class="language-plaintext"><span class="line">isReadyForLaunch is deprecated and will be removed in a future version.</span>
<span class="line">Is the rocket ready for launch? true</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Method decorators can be useful if you want to extend the functionality of our methods, which we’ll cover later.</p><h3 id="property-decorators" tabindex="-1"><a class="header-anchor" href="#property-decorators"><span>Property decorators</span></a></h3><p>Property decorators are very similar to method decorators:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="ClassPropertyDecorator.ts"><span>ClassPropertyDecorator.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">type</span> <span class="token class-name">ClassPropertyDecorator</span> <span class="token operator">=</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> context<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">  kind<span class="token operator">:</span> <span class="token string">&quot;field&quot;</span></span>
<span class="line">  name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">symbol</span></span>
<span class="line">  access<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">,</span> <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">static</span><span class="token operator">:</span> <span class="token builtin">boolean</span></span>
<span class="line">  <span class="token keyword">private</span><span class="token operator">:</span> <span class="token builtin">boolean</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>initialValue<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token keyword">void</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Not surprisingly, the use cases for property decorators are very similar to those for method decorators. For example, we can track the accesses to a property or mark it as deprecated:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="deprecatedProperty.ts"><span>deprecatedProperty.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">function</span> <span class="token function">deprecatedProperty</span><span class="token punctuation">(</span>_<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">&quot;field&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>initialValue<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>context<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is deprecated and will be removed in a future version.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">return</span> initialValue</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>The code is very similar to the <code>deprecatedMethod</code> decorator we defined for methods, and so is its usage.</p><h3 id="accessor-decorators" tabindex="-1"><a class="header-anchor" href="#accessor-decorators"><span>Accessor decorators</span></a></h3><p>Very similar to method decorators are accessor decorators, which are decorators that target getters and setters:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="ClassDecorator.ts"><span>ClassDecorator.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">type</span> <span class="token class-name">ClassSetterDecorator</span> <span class="token operator">=</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">,</span> context<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">  kind<span class="token operator">:</span> <span class="token string">&quot;setter&quot;</span></span>
<span class="line">  name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">symbol</span></span>
<span class="line">  access<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">static</span><span class="token operator">:</span> <span class="token builtin">boolean</span></span>
<span class="line">  <span class="token keyword">private</span><span class="token operator">:</span> <span class="token builtin">boolean</span></span>
<span class="line">  <span class="token function">addInitializer</span><span class="token punctuation">(</span><span class="token function-variable function">initializer</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Function</span> <span class="token operator">|</span> <span class="token keyword">void</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> <span class="token class-name">ClassGetterDecorator</span> <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">,</span> context<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">  kind<span class="token operator">:</span> <span class="token string">&quot;getter&quot;</span></span>
<span class="line">  name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">symbol</span></span>
<span class="line">  access<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">static</span><span class="token operator">:</span> <span class="token builtin">boolean</span></span>
<span class="line">  <span class="token keyword">private</span><span class="token operator">:</span> <span class="token builtin">boolean</span></span>
<span class="line">  <span class="token function">addInitializer</span><span class="token punctuation">(</span><span class="token function-variable function">initializer</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Function</span> <span class="token operator">|</span> <span class="token keyword">void</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>The definition of accessor decorators is similar to that of method decorators. For example, we can merge our <code>deprecatedMethod</code> and <code>deprecatedProperty</code> decorations into a single, <code>deprecated</code> function that features support for getters and setters as well:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="deprecated.ts"><span>deprecated.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">function</span> <span class="token function">deprecated</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> kind <span class="token operator">=</span> context<span class="token punctuation">.</span>kind</span>
<span class="line">  <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>context<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is deprecated and will be removed in a future version.</span><span class="token template-punctuation string">\`</span></span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>kind <span class="token operator">===</span> <span class="token string">&quot;method&quot;</span> <span class="token operator">||</span> kind <span class="token operator">===</span> <span class="token string">&quot;getter&quot;</span> <span class="token operator">||</span> kind <span class="token operator">===</span> <span class="token string">&quot;setter&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token function">target</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>kind <span class="token operator">===</span> <span class="token string">&quot;field&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>initialValue<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">return</span> initialValue</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h3 id="auto-accessor-decorators" tabindex="-1"><a class="header-anchor" href="#auto-accessor-decorators"><span>Auto-accessor decorators</span></a></h3><p>The new decorator proposal also introduced a new element called the “auto-accessor field”:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span></span>
<span class="line">  accessor x<span class="token operator">:</span> <span class="token builtin">number</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The transpiler will turn the <code>x</code> field above into a pair of getter and setter methods, with a <code>private</code> property behind the scenes. This is useful to represent a simple accessor pair and helps avoid some edgy issues that might arise while using decorators on class fields.</p>`,50)),s("p",null,[n[58]||(n[58]=a("Auto-accessors can also be decorated, and their type will essentially be a merge of ")),n[59]||(n[59]=s("code",null,"ClassSetterDecorator",-1)),n[60]||(n[60]=a(" and ")),n[61]||(n[61]=s("code",null,"ClassGetterDecorator",-1)),n[62]||(n[62]=a(". You can find additional details in the ")),s("a",D,[n[55]||(n[55]=a("Stage 3 decorators pull request (")),e(o,{icon:"iconfont icon-github"}),n[56]||(n[56]=s("code",null,"microsoft/TypeScript",-1)),n[57]||(n[57]=a(")"))]),n[63]||(n[63]=a("."))]),n[85]||(n[85]=s("h3",{id:"parameter-decorators",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#parameter-decorators"},[s("span",null,"Parameter decorators")])],-1)),s("p",null,[n[65]||(n[65]=a("Please note that the parameter decorator is not supported in TypeScript 5.0. The ")),s("a",W,[e(o,{icon:"iconfont icon-typescript"}),n[64]||(n[64]=a("TypeScript documentation"))]),n[66]||(n[66]=a(" states: “This new decorator proposal is not compatible with — ")),n[67]||(n[67]=s("code",null,"emitDecoratorMetadata",-1)),n[68]||(n[68]=a(", and it does not allow decorating parameters. Future ECMAScript proposals may be able to help bridge that gap.”"))]),n[86]||(n[86]=l(`<p>If you are still supporting the older version of TypeScript code, here is how we can use the parameter decorator.</p><p>A parameter decorator is placed before the parameter’s declaration and used to observe parameter declarations within methods. It takes three parameters:</p><ul><li>The constructor function of the class (for static) or the class prototype (for instance)</li><li>The method name</li><li>The ordinal index of the parameter</li></ul><p>Below is a simple example:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="Rocket.ts"><span>Rocket.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">function</span> <span class="token function">paramLogger</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> methodName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> parameterIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Parameter </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>parameterIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> of </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>methodName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> method</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Rocket</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">launch</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">paramLogger</span></span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Launching </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> in 3... 2... 1... 🚀</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> rocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">rocket<span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span><span class="token string">&#39;Space X&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//</span></span>
<span class="line"><span class="token comment">// Parameter 1 of launch method</span></span>
<span class="line"><span class="token comment">// Launching Space X in 3... 2... 1... 🚀</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>The above example defines a parameter decorator <code>paramLogger</code> that logs the index and name of a parameter. It’s applied to the <code>name</code> parameter of <code>launch</code> method. When an instance of <code>Rocket</code> class is created and its <code>launch</code> method is invoked, we can observe the console output showing the logging of the parameter information.</p><hr><h2 id="use-cases-for-typescript-decorators" tabindex="-1"><a class="header-anchor" href="#use-cases-for-typescript-decorators"><span>Use cases for TypeScript decorators</span></a></h2><p>Now that we’ve covered what decorators are and how to use them properly, let’s look at some specific problems they can help us solve.</p><h3 id="calculating-execution-time" tabindex="-1"><a class="header-anchor" href="#calculating-execution-time"><span>Calculating execution time</span></a></h3><p>Let’s say we want to estimate how long it takes to run a function to gauge your application performance. We can create a decorator to calculate the execution time of a method and print it on the console:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="Rocket.ts"><span>Rocket.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">class</span> <span class="token class-name">Rocket</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">measure</span></span></span>
<span class="line">  <span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Launching in 3... 2... 1... 🚀&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>The <code>Rocket</code> class has a <code>launch</code> method inside of it. To measure the execution time of the <code>launch</code> method, you can attach the <code>measure</code> decorator:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="measure.ts"><span>measure.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> performance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;perf_hooks&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">measure</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">&quot;method&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">const</span> start <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  </span>
<span class="line">      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">target</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">const</span> end <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Execution time: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>end <span class="token operator">-</span> start<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> milliseconds</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">return</span> result</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>As you can see, the <code>measure</code> decorator replaces the original method with a new one that enables it to calculate the execution time of the original method and log it to the console. To calculate the execution time, we’ll use the <a href="https://nodejs.org/api/perf_hooks.html" target="_blank" rel="noopener noreferrer">Performance Hooks API</a> from the Node.js standard library. Instantiate a new <code>Rocket</code> instance and call the <code>launch</code> method:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">const</span> rocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">rocket<span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>You’ll get the following result:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="output"><span>output</span></div><div class="language-plaintext line-numbers-mode" data-highlighter="prismjs" data-ext="plaintext"><pre><code class="language-plaintext"><span class="line">Launching in 3... 2... 1... 🚀</span>
<span class="line">Execution time: 1.062355000525713 milliseconds</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></div><hr><h2 id="advanced-decorator-patterns" tabindex="-1"><a class="header-anchor" href="#advanced-decorator-patterns"><span>Advanced decorator patterns</span></a></h2><p>In TypeScript, advanced decorator patterns such as decorator composition and factories provide flexibility and reusability when applying decorators to classes, methods, and properties.</p><h3 id="decorator-composition" tabindex="-1"><a class="header-anchor" href="#decorator-composition"><span>Decorator composition</span></a></h3><p>Decorator composition involves applying multiple decorators to a single class, method, or property, allowing for combining different behaviors to achieve more dynamic functionality. We can compose decorators by stacking them one after another, with each decorator executing sequentially.</p><p>Below is an example of two decorators: <code>minimumFuel</code> and <code>maximumFuel</code>:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="fuel-min-max.ts"><span>fuel-min-max.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">function</span> <span class="token function">minimumFuel</span><span class="token punctuation">(</span>fuel<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">&#39;method&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>fuel <span class="token operator">&gt;</span> fuel<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;fuel is more than mininum&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          <span class="token keyword">return</span> <span class="token function">target</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Not enough fuel. Required: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>fuel<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, got </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">this</span><span class="token punctuation">.</span>fuel<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">maximumFuel</span><span class="token punctuation">(</span>fuel<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">&#39;method&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>fuel <span class="token operator">&lt;</span> fuel<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;fuel is less than maximum&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          <span class="token keyword">return</span> <span class="token function">target</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">excessive fuel. Maximum: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>fuel<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, got </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">this</span><span class="token punctuation">.</span>fuel<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>We can apply both decorators to the <code>launch</code> method, so both conditions can be enforced: the fuel level must be within the minimum and maximum levels before initiating the launch:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="Rocket.ts"><span>Rocket.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">class</span> <span class="token class-name">Rocket</span> <span class="token punctuation">{</span></span>
<span class="line">  fuel<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">maximumFuel</span></span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">minimumFuel</span></span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Launching in 3... 2... 1... 🚀&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">const</span> rocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">rocket<span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//</span></span>
<span class="line"><span class="token comment">// fuel is less than maximum</span></span>
<span class="line"><span class="token comment">// fuel is more than mininum</span></span>
<span class="line"><span class="token comment">// Launching in 3... 2... 1... 🚀</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>When using multiple decorators in combination, the sequence is important. The decorators execute in the order they are listed. In this case, the <code>maximumFuel</code> decorator is applied first, followed by the <code>minimumFuel</code> decorator.</p><h3 id="decorator-factory" tabindex="-1"><a class="header-anchor" href="#decorator-factory"><span>Decorator factory</span></a></h3><p>To configure our decorators to act differently in a certain scenario, we can use a concept called the decorator factory. Decorator factories are functions returning a decorator. This enables us to customize the behavior of our decorators by passing some parameters to the factory.</p><p>Take a look at the example below:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="fill.ts"><span>fill.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">function</span> <span class="token function">fill</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>_<span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">&quot;field&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>initialValue<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> value <span class="token operator">+</span> initialValue</span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>The <code>fill</code> decorator factory generates a decorator that can be applied to a property. When applied, it adds the value provided to the decorator to the value provided during field initialization:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="Rocket.ts"><span>Rocket.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">class</span> <span class="token class-name">Rocket</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">fill</span></span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span></span>
<span class="line">  fuel<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">50</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">const</span> rocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rocket<span class="token punctuation">.</span>fuel<span class="token punctuation">)</span> <span class="token comment">// 70</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>We can also use the decorator factory to create a class decorator. Here is an example of a class decorator called <code>Throttle</code>, which throttles the execution of the <code>launch</code> method:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="Rocket.ts"><span>Rocket.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">function</span> <span class="token function">Throttle</span><span class="token punctuation">(</span>delay<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> context<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> original <span class="token operator">=</span> target<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>launch<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">let</span> timeout <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">    target<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">launch</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timeout<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">original</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        timeout <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          timeout <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Throttle, wait next time</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Throttle</span></span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Rocket</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Launching in 3... 2... 1... 🚀&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">const</span> rocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">rocket<span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">rocket<span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">/* output</span>
<span class="line">Launching in 3... 2... 1... 🚀</span>
<span class="line">Throttle, wait next time</span>
<span class="line">*/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>In the above code, we retrieve the original method <code>launch</code> from the target class prototype, then call the <code>launch</code> method if the timeout is active; otherwise, we skip the call.</p><p>In this example, the <code>Rocket</code> class is decorated with the newly created decorator, specifying a throttle duration of 1000 milliseconds (one second). As shown in the console output, the first call to <code>launch</code> is successful, but the second call is skipped as it is still within the timeout period.</p><h3 id="automatic-error-guard" tabindex="-1"><a class="header-anchor" href="#automatic-error-guard"><span>Automatic error guard</span></a></h3><p>Another common use case for decorators is checking pre- and post-conditions on method calls. For example, assume we want to make sure <code>fuel</code> is at least a given value before calling the <code>launch()</code> method:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="Rocket.ts"><span>Rocket.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">class</span> <span class="token class-name">Rocket</span> <span class="token punctuation">{</span></span>
<span class="line">  fuel <span class="token operator">=</span> <span class="token number">50</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Launching to Mars in 3... 2... 1... 🚀&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Let’s say we have a <code>Rocket</code> class that has a <code>launchToMars</code> method. To launch a rocket, the fuel level must be above, for example, 75. Let’s create the decorator for it:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="minimumFuel.ts"><span>minimumFuel.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">function</span> <span class="token function">minimumFuel</span><span class="token punctuation">(</span>fuel<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">&quot;method&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>fuel <span class="token operator">&gt;</span> fuel<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token function">target</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span></span>
<span class="line">          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Not enough fuel. Required: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>fuel<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, got </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">this</span><span class="token punctuation">.</span>fuel<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p><code>minimumFuel</code> is a factory decorator. It takes the fuel parameter, indicating how much fuel is needed to launch a particular rocket. Just like in the previous use case, to check the fuel condition, wrap the original method with a new method. Notice how we can freely refer to <code>this.fuel</code>, which will only work at runtime.</p><p>Now, we can plug our decorator into the <code>launch</code> method and set the minimum fuel level:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="Rocket.ts"><span>Rocket.ts</span></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">class</span> <span class="token class-name">Rocket</span> <span class="token punctuation">{</span></span>
<span class="line">  fuel <span class="token operator">=</span> <span class="token number">50</span></span>
<span class="line"></span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">minimumFuel</span></span><span class="token punctuation">(</span><span class="token number">75</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Launching to Mars in 3... 2... 1... 🚀&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>If we now invoke the <code>launch</code> method, it won’t launch the rocket because the current fuel level is 50:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">const</span> rocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">rocket<span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">Not enough fuel<span class="token punctuation">.</span> Required<span class="token operator">:</span> <span class="token number">75</span><span class="token punctuation">,</span> got <span class="token number">50</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The cool thing about this decorator is that you can apply the same logic to a different method without rewriting the whole if-else statement.</p><hr><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h2>`,51)),s("p",null,[n[71]||(n[71]=a("In some scenarios, we don’t need to create custom decorators. Many TypeScript libraries and frameworks, such as ")),s("a",C,[e(o,{icon:"fas fa-globe"}),n[69]||(n[69]=a("TypeORM"))]),n[72]||(n[72]=a(" and ")),s("a",P,[n[70]||(n[70]=a("Angular")),e(o,{icon:"fa-brands fa-angular"})]),n[73]||(n[73]=a(", already provide all the decorators we need. But it’s always worth the extra effort to understand what’s going on under the hood, and it might even inspire you to build your own TypeScript framework."))]),b(" TODO: add ARTICLE CARD "),e(c,r(u({title:"A practical guide to TypeScript decorators",desc:"TypeScript decorators allow you to calculate execution time, perform runtime type assertion, guard against errors, and much more.",link:"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/practical-guide-typescript-decorators.html",logo:"/assets/image/blog.logrocket.com/favicon.png",background:"rgba(112,76,182,0.2)"})),null,16)])}const E=m(f,[["render",N]]),$=JSON.parse('{"path":"/blog.logrocket.com/practical-guide-typescript-decorators.html","title":"A practical guide to TypeScript decorators","lang":"en-US","frontmatter":{"lang":"en-US","title":"A practical guide to TypeScript decorators","description":"Article(s) > A practical guide to TypeScript decorators","icon":"iconfont icon-typescript","category":["TypeScript","Article(s)"],"tag":["blog","blog.logrocket.com","typescript","ts"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"A practical guide to TypeScript decorators\\",\\"image\\":[\\"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/practical-guide-typescript-decorators/banner.png\\"],\\"datePublished\\":\\"2024-03-21T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Rahman Fadhil\\",\\"url\\":\\"https://blog.logrocket.com/author/rahmanfadhil/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/practical-guide-typescript-decorators.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"A practical guide to TypeScript decorators"}],["meta",{"property":"og:description","content":"Article(s) > A practical guide to TypeScript decorators"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/practical-guide-typescript-decorators/banner.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/practical-guide-typescript-decorators/banner.png"}],["meta",{"name":"twitter:image:alt","content":"A practical guide to TypeScript decorators"}],["meta",{"property":"article:author","content":"Rahman Fadhil"}],["meta",{"property":"article:tag","content":"ts"}],["meta",{"property":"article:tag","content":"typescript"}],["meta",{"property":"article:tag","content":"blog.logrocket.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2024-03-21T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > A practical guide to TypeScript decorators"},{"property":"og:description","content":"A practical guide to TypeScript decorators"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.logrocket.com/practical-guide-typescript-decorators.html"}]],"prev":"/programming/ts/articles/README.md","date":"2024-03-21T00:00:00.000Z","isOriginal":false,"author":[{"name":"Rahman Fadhil","url":"https://blog.logrocket.com/author/rahmanfadhil/"}],"cover":"/assets/image/blog.logrocket.com/practical-guide-typescript-decorators/banner.png"},"git":{},"readingTime":{"minutes":12.72,"words":3817},"filePathRelative":"blog.logrocket.com/practical-guide-typescript-decorators.md","copyright":{"author":"Rahman Fadhil"}}');export{E as comp,$ as data};
