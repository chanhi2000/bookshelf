import{_ as v}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as b,d as s,f as e,b as o,a as h,t as g,n as r,g as d,w as i,e as a,r as l,o as f}from"./app-BItykJLQ.js";const y={},x={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},w={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},S={class:"table-of-contents"},C={href:"https://css.oddbird.net/sasslike/mixins-functions/",target:"_blank",rel:"noopener noreferrer"},I={href:"https://css.oddbird.net/sasslike/mixins-functions/",target:"_blank",rel:"noopener noreferrer"},T={href:"https://github.com/w3c/csswg-drafts/issues/9350#issuecomment-1939628591",target:"_blank",rel:"noopener noreferrer"},z={href:"https://sass-lang.com/guide/#mixins",target:"_blank",rel:"noopener noreferrer"},A={href:"https://codepen.io/miriamsuzanne/pen/qBGXMPg?editors=1100",target:"_blank",rel:"noopener noreferrer"},j={href:"https://kizu.dev/",target:"_blank",rel:"noopener noreferrer"},q={href:"https://kizu.dev/cyclic-toggles/",target:"_blank",rel:"noopener noreferrer"},W={href:"https://kizu.dev/layered-toggles/#future-of-mixins",target:"_blank",rel:"noopener noreferrer"},P={href:"https://youtu.be/ZC_WS05t2lI",target:"_blank",rel:"noopener noreferrer"};function M(c,n){const u=l("VPCard"),p=l("router-link"),m=l("SiteInfo"),t=l("VPIcon"),k=l("CodePen");return f(),b("div",null,[s("h1",x,[s("a",w,[s("span",null,g(c.$frontmatter.title)+" ê´€ë ¨",1)])]),e(u,r(d({title:"CSS > Article(s)",desc:"Article(s)",link:"/programming/css/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),s("nav",S,[s("ul",null,[s("li",null,[e(p,{to:"#mixin-substitution-with-apply"},{default:i(()=>[...n[0]||(n[0]=[a("Mixin substitution with @apply",-1)])]),_:1})]),s("li",null,[e(p,{to:"#style-queries-and-layered-toggles"},{default:i(()=>[...n[1]||(n[1]=[a("Style queries and â€˜layered togglesâ€™",-1)])]),_:1})]),s("li",null,[e(p,{to:"#custom-properties-cascade"},{default:i(()=>[...n[2]||(n[2]=[a("Custom properties cascade",-1)])]),_:1})]),s("li",null,[e(p,{to:"#it-s-hard-to-un-mix-a-previously-mixed-in-mixin-once-mixed"},{default:i(()=>[...n[3]||(n[3]=[a("Itâ€™s hard to un-mix a previously mixed-in mixin once mixed",-1)])]),_:1})]),s("li",null,[e(p,{to:"#should-mixin-calls-cascade"},{default:i(()=>[...n[4]||(n[4]=[a("Should mixin calls cascade?",-1)])]),_:1})])])]),n[34]||(n[34]=s("hr",null,null,-1)),e(m,{name:"Can you un-mix a mixin?",desc:"Rethinking the CSS mixin proposal after CSS Day",url:"https://oddbird.net/2024/06/11/removing-mixins/",logo:"https://oddbird.net/safari-pinned-tab.svg",preview:"https://oddbird.net/assets/images/blog/2024/blender-1600w.jpeg"}),n[35]||(n[35]=s("p",null,"The CSS Working Group has agreed to move forward with CSS-native mixins. But some recent mixin-like CSS tricks have an advantage that the official proposal doesnâ€™t account for: they make it easy to remove a mixin after itâ€™s already been mixed in.",-1)),n[36]||(n[36]=s("hr",null,null,-1)),n[37]||(n[37]=s("h2",{id:"mixin-substitution-with-apply",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#mixin-substitution-with-apply"},[s("span",null,[a("Mixin substitution with "),s("code",null,"@apply")])])],-1)),s("p",null,[n[11]||(n[11]=a("Iâ€™ve been thinking about ",-1)),s("a",C,[e(t,{icon:"iconfont icon-oddbird"}),n[5]||(n[5]=a("CSS-native mixins",-1))]),n[12]||(n[12]=a(". How do we create re-usable blocks of styling that can be â€˜mixed inâ€™ to various selectors, based on arbitrary conditions? I made ",-1)),s("a",I,[e(t,{icon:"iconfont icon-oddbird"}),n[6]||(n[6]=a("a proposal",-1))]),n[13]||(n[13]=a(" last year, and it was ",-1)),s("a",T,[n[7]||(n[7]=a("adopted by the CSS Working Group (",-1)),e(t,{icon:"iconfont icon-github"}),n[8]||(n[8]=s("code",null,"w3c/csswg-drafts",-1)),n[9]||(n[9]=a(")",-1))]),n[14]||(n[14]=a(" for further exploration and specification. That proposal is similar to ",-1)),s("a",z,[e(t,{icon:"fa-brands fa-sass"}),n[10]||(n[10]=a("mixins in Sass",-1))]),n[15]||(n[15]=a(" and other pre-processors, and builds on CSS Nesting:",-1))]),n[38]||(n[38]=o(`<div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token comment">/* define it once */</span></span>
<span class="line"><span class="token atrule"><span class="token rule">@mixin</span> --visually-hidden</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">clip</span><span class="token punctuation">:</span> <span class="token function">rect</span><span class="token punctuation">(</span>0 0 0 0<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">clip-path</span><span class="token punctuation">:</span> <span class="token function">inset</span><span class="token punctuation">(</span>50%<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">height</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">width</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/* use in various places */</span></span>
<span class="line"><span class="token selector">[visually-hidden]</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token atrule"><span class="token rule">@apply</span> --visually-hidden<span class="token punctuation">;</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token selector">[hidden-when=small]</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token atrule"><span class="token rule">@container</span> <span class="token punctuation">(</span>inline-size &lt; 20ch<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token atrule"><span class="token rule">@apply</span> --visually-hidden<span class="token punctuation">;</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>At parse time, the browser can (with some minor caveats) substitute each mixin call with a nested block of declarations:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">[visually-hidden]</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">&amp;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">clip</span><span class="token punctuation">:</span> <span class="token function">rect</span><span class="token punctuation">(</span>0 0 0 0<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">clip-path</span><span class="token punctuation">:</span> <span class="token function">inset</span><span class="token punctuation">(</span>50%<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">/* â€¦ */</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token selector">[hidden-when=small]</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token atrule"><span class="token rule">@container</span> <span class="token punctuation">(</span>inline-size &lt; 20ch<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token selector">&amp;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">clip</span><span class="token punctuation">:</span> <span class="token function">rect</span><span class="token punctuation">(</span>0 0 0 0<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token property">clip-path</span><span class="token punctuation">:</span> <span class="token function">inset</span><span class="token punctuation">(</span>50%<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token comment">/* â€¦ */</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This is a straight-forward approach, that should be possible to implement. As authors we can build on that by including selectors and conditions inside the mixin code, or by passing in arguments. Itâ€™s a useful feature, but it has some limitations.</p><hr><h2 id="style-queries-and-layered-toggles" tabindex="-1"><a class="header-anchor" href="#style-queries-and-layered-toggles"><span>Style queries and â€˜layered togglesâ€™</span></a></h2><p>We donâ€™t have CSS-native mixins yet, but we do have style queries (in Chromium, and Webkit beta) which can be used for mixin-like behavior:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token comment">/* define the mixin */</span></span>
<span class="line"><span class="token atrule"><span class="token rule">@container</span> <span class="token function">style</span><span class="token punctuation">(</span>--fancy-em<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">em</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span></span>
<span class="line">      to bottom right<span class="token punctuation">,</span></span>
<span class="line">      <span class="token function">var</span><span class="token punctuation">(</span>--fancy-em<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">background-clip</span><span class="token punctuation">:</span> text<span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token punctuation">(</span><span class="token property">-webkit-background-clip</span><span class="token punctuation">:</span> text<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">-webkit-background-clip</span><span class="token punctuation">:</span> text<span class="token punctuation">;</span></span>
<span class="line">      <span class="token property">background-clip</span><span class="token punctuation">:</span> text<span class="token punctuation">;</span></span>
<span class="line">      <span class="token property">color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span></span>
<span class="line">      <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/* apply the mixin by giving --fancy-em a value */</span></span>
<span class="line"><span class="token selector">p</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--fancy-em</span><span class="token punctuation">:</span> mediumvioletred<span class="token punctuation">,</span> teal<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8)),s("p",null,[n[19]||(n[19]=a("(You can see this ",-1)),s("a",A,[n[16]||(n[16]=a("style query demo (",-1)),e(t,{icon:"fa-brands fa-codepen"}),n[17]||(n[17]=s("code",null,"miriamsuzanne",-1)),n[18]||(n[18]=a(")",-1))]),n[20]||(n[20]=a(" working in a Chromium browser.)",-1))]),n[39]||(n[39]=s("p",null,[a("While that may be useful once supported everywhere, it has an even stronger â€˜nestingâ€™ requirement: container queries cannot apply styles to the container itself. The example above works because we query the parent paragraph to apply styles on nested "),s("code",null,"em"),a(" elements.")],-1)),s("p",null,[s("a",j,[e(t,{icon:"fas fa-globe"}),n[21]||(n[21]=a("Roman Komarov",-1))]),n[24]||(n[24]=a(" has developed another mixin-like syntax that works today in all major browsers, using â€˜",-1)),s("a",q,[e(t,{icon:"fas fa-globe"}),n[22]||(n[22]=a("cyclic toggles",-1))]),n[25]||(n[25]=a("â€™ and ",-1)),n[26]||(n[26]=s("code",null,"revert-layer",-1)),n[27]||(n[27]=a(" to create what he calls ",-1)),s("a",W,[e(t,{icon:"fas fa-globe"}),n[23]||(n[23]=a("Layered Toggles",-1))]),n[28]||(n[28]=a(":",-1))]),n[40]||(n[40]=o(`<div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@layer</span> defaults</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">/* any defaults need to be defined in lower layers */</span></span>
<span class="line">  <span class="token selector">p</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> 80%<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/* Define mixins in a higher layer */</span></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> mixins</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">*:not(:focus):not(:active)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">--hidden</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--hidden--off<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">--hidden--off</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--hidden<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">--hidden--on</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--hidden<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token property">clip</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token function">var</span><span class="token punctuation">(</span>--hidden--off<span class="token punctuation">,</span> revert-layer<span class="token punctuation">)</span></span>
<span class="line">      <span class="token function">var</span><span class="token punctuation">(</span>--hidden--on<span class="token punctuation">,</span> <span class="token function">rect</span><span class="token punctuation">(</span>0 0 0 0<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">clip-path</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token function">var</span><span class="token punctuation">(</span>--hidden--off<span class="token punctuation">,</span> revert-layer<span class="token punctuation">)</span></span>
<span class="line">      <span class="token function">var</span><span class="token punctuation">(</span>--hidden--on<span class="token punctuation">,</span> <span class="token function">inset</span><span class="token punctuation">(</span>50%<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">height</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token function">var</span><span class="token punctuation">(</span>--hidden--off<span class="token punctuation">,</span> revert-layer<span class="token punctuation">)</span></span>
<span class="line">      <span class="token function">var</span><span class="token punctuation">(</span>--hidden--on<span class="token punctuation">,</span> 1px<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">/* etcâ€¦ */</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/* apply the mixin by overriding the custom property */</span></span>
<span class="line"><span class="token selector">[hidden-when=small]</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token atrule"><span class="token rule">@container</span> <span class="token punctuation">(</span>inline-size &lt; 40ch<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">--hidden</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--hidden--on<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Itâ€™s not the most elegant solution, but it works â€“ and can apply style changes directly, today, without any nesting.</p><hr><h2 id="custom-properties-cascade" tabindex="-1"><a class="header-anchor" href="#custom-properties-cascade"><span>Custom properties <em>cascade</em></span></a></h2><p>â€˜The Cascadeâ€™ in CSS is an algorithm to resolve conflicts. Every property (including custom properties) on a given element can only have a <em>single value</em>. If the same property is declared twice, only one of those declarations will apply â€“ the one with higher <em>cascade priority</em> (specificity, layers, source order, etc).</p>`,5)),s("p",null,[n[30]||(n[30]=a("What stood out to me during Romanâ€™s ",-1)),s("a",P,[e(t,{icon:"fa-brands fa-youtube"}),n[29]||(n[29]=a("talk at CSS Day",-1))]),n[31]||(n[31]=a(" was the fact that both these pseudo-mixin solutions use custom properties to apply the mixin. As a result, the mixing-in declaration â€“ the code that applies or doesnâ€™t apply the mixin â€“ ",-1)),n[32]||(n[32]=s("em",null,"cascades",-1)),n[33]||(n[33]=a(".",-1))]),n[41]||(n[41]=s("p",null,"That leads to an interesting feature: a mixin can be applied in one place, and removed somewhere else. Once â€˜turned offâ€™, itâ€™s as though the mixin was never applied at all. The properties simply revert to their un-mixed-in state:",-1)),e(k,{user:"miriamsuzanne","slug-hash":"dyEzQPz",title:"Un-mixing a mixin","default-tab":["css","result"],theme:c.dark},null,8,["theme"]),n[42]||(n[42]=o(`<hr><h2 id="it-s-hard-to-un-mix-a-previously-mixed-in-mixin-once-mixed" tabindex="-1"><a class="header-anchor" href="#it-s-hard-to-un-mix-a-previously-mixed-in-mixin-once-mixed"><span>Itâ€™s hard to un-mix a previously mixed-in mixin once mixed</span></a></h2><p>We donâ€™t get that same behavior with the <code>@apply</code> rule as currently defined. If we apply the same mixin twice with different values, both rules will be replaced by the internals of the mixin.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@mixin</span> <span class="token function">--card</span><span class="token punctuation">(</span>--color<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--color<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">border</span><span class="token punctuation">:</span> thick solid <span class="token function">color-mix</span><span class="token punctuation">(</span>in oklch<span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--color<span class="token punctuation">)</span><span class="token punctuation">,</span> black<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token selector">p</span> <span class="token punctuation">{</span> <span class="token atrule"><span class="token rule">@apply</span> <span class="token function">--card</span><span class="token punctuation">(</span>pink<span class="token punctuation">)</span><span class="token punctuation">;</span></span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">p:last-child</span> <span class="token punctuation">{</span> <span class="token atrule"><span class="token rule">@apply</span> <span class="token function">--card</span><span class="token punctuation">(</span>powderblue<span class="token punctuation">)</span><span class="token punctuation">;</span></span> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The result after substitution will be:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">p</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">background</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">border</span><span class="token punctuation">:</span> thick solid <span class="token function">color-mix</span><span class="token punctuation">(</span>in oklch<span class="token punctuation">,</span> pink<span class="token punctuation">,</span> black<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">p:last-child</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">background</span><span class="token punctuation">:</span> powderblue<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">border</span><span class="token punctuation">:</span> thick solid <span class="token function">color-mix</span><span class="token punctuation">(</span>in oklch<span class="token punctuation">,</span> powderblue<span class="token punctuation">,</span> black<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In some cases, that will be fine. The properties inside the mixin will continue to cascade. Each declaration of <code>background</code> overrides the previous, and the same with <code>border</code>. In the end, we get the expected result.</p><p>But we canâ€™t â€˜removeâ€™ the mixin, or any of those property definitions, we can only override them with new values. That can be a real problem.</p><p>Letâ€™s go back to our <code>visually-hidden</code> example. We should really clarify that we donâ€™t want it applied when an element has focus. With the custom property, we can override a single property wherever necessary:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">[visually-hidden]</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--hidden</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--hidden--on<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token selector">[hidden-when=small]</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token atrule"><span class="token rule">@container</span> <span class="token punctuation">(</span>inline-size &lt; 20ch<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">--hidden</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--hidden--on<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token selector">:focus,</span>
<span class="line">:active</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--hidden</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--hidden--off<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>But with <code>@apply</code> we either have to plan ahead for all conditions <em>before we apply the mixin</em>:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">[visually-hidden]:not(:focus):not(:active)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token atrule"><span class="token rule">@apply</span> --visually-hidden<span class="token punctuation">;</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Or we need to carefully revert every property of the mixin. Butâ€¦ revert <em>to what value</em>? Maybe we can use <code>revert-layer</code> and some clever layering? We could even build the off switch into our mixin:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token comment">/* when &#39;--off&#39; is undefined we get the output */</span></span>
<span class="line"><span class="token atrule"><span class="token rule">@mixin</span> <span class="token function">--visually-hidden</span><span class="token punctuation">(</span>--off<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">clip</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--off<span class="token punctuation">,</span> <span class="token function">rect</span><span class="token punctuation">(</span>0 0 0 0<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">clip-path</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--off<span class="token punctuation">,</span> <span class="token function">inset</span><span class="token punctuation">(</span>50%<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--off<span class="token punctuation">,</span> 1px<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">overflow</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--off<span class="token punctuation">,</span> hidden<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">position</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--off<span class="token punctuation">,</span> absolute<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">white-space</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--off<span class="token punctuation">,</span> nowrap<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--off<span class="token punctuation">,</span> 1px<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> base</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">[visually-hidden]</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token atrule"><span class="token rule">@apply</span> --visually-hidden<span class="token punctuation">;</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/* put our overrides in a higher layer to revert from */</span></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> overrides</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">:focus,</span>
<span class="line">  :active</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">/* set --off to revert-layer */</span></span>
<span class="line">    <span class="token atrule"><span class="token rule">@apply</span> <span class="token function">--visually-hidden</span><span class="token punctuation">(</span>revert-layer<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That provides an off switch, but it requires some careful planning ahead, and the layering requirement seems fragile.</p><hr><h2 id="should-mixin-calls-cascade" tabindex="-1"><a class="header-anchor" href="#should-mixin-calls-cascade"><span>Should mixin calls cascade?</span></a></h2><p>This isnâ€™t a new or theoretical issue. After years of using Sass mixins, itâ€™s something Iâ€™ve encountered many times. In most situations itâ€™s possible to work around the issue, but sometimes it becomes quite complicated to get all the logic right in one place.</p><p>The cascade is useful for these situations. When weâ€™re defining new CSS features we often ask <em>should these behaviors cascade together</em>, are they intertwined? If so, they belong in the same property.</p><p>It seems clear to me that it would be useful (at least sometimes) for the mixin-application syntax to cascade. But before we make any big changes we also need to ask:</p><ul><li>Are there places we <em>donâ€™t want</em> that behavior? Places we want to call a mixin twice with different arguments, and have both apply? I havenâ€™t thought of good examples, but they might exist?</li><li>Can we design a cascading mixin-application syntax? We intentionally avoided cascading mixin <em>definitions</em> â€“ one mixin name canâ€™t refer to different things in different places. Would cascading <code>@apply</code> rules have similar issues?</li></ul><p>I donâ€™t think we want something like the JavaScript <code>removeEventListener()</code> function, which requires a careful matching of arguments. Iâ€™d like to avoid any <code>@un-apply</code>-style rules. That has always seemed fragile to me, and Iâ€™d rather use the cascade if we can.</p><p>What do you think? Should mixin calls cascade? Are there use cases for both behaviors?</p>`,23)),h(" TODO: add ARTICLE CARD "),e(u,r(d({title:"Can you un-mix a mixin?",desc:"Rethinking the CSS mixin proposal after CSS Day",link:"https://chanhi2000.github.io/bookshelf/oddbird.net/removing-mixins.html",logo:"https://oddbird.net/safari-pinned-tab.svg",background:"rgba(145,208,222,0.2)"})),null,16)])}const R=v(y,[["render",M]]),D=JSON.parse('{"path":"/oddbird.net/removing-mixins.html","title":"Can you un-mix a mixin?","lang":"en-US","frontmatter":{"lang":"en-US","title":"Can you un-mix a mixin?","description":"Article(s) > Can you un-mix a mixin?","icon":"fa-brands fa-css3-alt","category":["CSS","Article(s)"],"tag":["blog","oddbird.net","css"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Can you un-mix a mixin?\\",\\"image\\":[\\"https://oddbird.net/assets/images/blog/2024/blender-1600w.jpeg\\"],\\"datePublished\\":\\"2024-06-11T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Miriam Suzanne\\",\\"url\\":\\"https://oddbird.net/authors/miriam/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/oddbird.net/removing-mixins.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Can you un-mix a mixin?"}],["meta",{"property":"og:description","content":"Article(s) > Can you un-mix a mixin?"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://oddbird.net/assets/images/blog/2024/blender-1600w.jpeg"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://oddbird.net/assets/images/blog/2024/blender-1600w.jpeg"}],["meta",{"name":"twitter:image:alt","content":"Can you un-mix a mixin?"}],["meta",{"property":"article:author","content":"Miriam Suzanne"}],["meta",{"property":"article:tag","content":"css"}],["meta",{"property":"article:tag","content":"oddbird.net"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2024-06-11T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Can you un-mix a mixin?"},{"property":"og:description","content":"Can you un-mix a mixin?"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/oddbird.net/removing-mixins.html"}]],"prev":"/programming/css/articles/README.md","date":"2024-06-11T00:00:00.000Z","isOriginal":false,"author":[{"name":"Miriam Suzanne","url":"https://oddbird.net/authors/miriam/"}],"cover":"https://oddbird.net/assets/images/blog/2024/blender-1600w.jpeg"},"git":{},"readingTime":{"minutes":5.44,"words":1632},"filePathRelative":"oddbird.net/removing-mixins.md","copyright":{"author":"Miriam Suzanne"}}');export{R as comp,D as data};
