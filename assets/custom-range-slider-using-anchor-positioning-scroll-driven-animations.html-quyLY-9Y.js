import{_ as v}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as f,d as e,f as t,b as p,a as b,t as k,n as h,g,w as l,e as s,r as c,o as w}from"./app-BItykJLQ.js";const y={},S={id:"frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´",tabindex:"-1"},C={class:"header-anchor",href:"#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"},A={class:"table-of-contents"},x={href:"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_anchor_positioning",target:"_blank",rel:"noopener noreferrer"},T={href:"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_scroll-driven_animations",target:"_blank",rel:"noopener noreferrer"},I={href:"https://css-generators.com/tooltip-speech-bubble/",target:"_blank",rel:"noopener noreferrer"},q={class:"hint-container info"},D={href:"https://developer.mozilla.org/en-US/docs/Web/CSS",target:"_blank",rel:"noopener noreferrer"},j={href:"https://anchor-tool.com/",target:"_blank",rel:"noopener noreferrer"},B={href:"https://w3.org/TR/css-anchor-position-1/#anchor-scope",target:"_blank",rel:"noopener noreferrer"},P={href:"https://w3.org/TR/css-anchor-position-1/#anchor-scope",target:"_blank",rel:"noopener noreferrer"},E={href:"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_scroll-driven_animations",target:"_blank",rel:"noopener noreferrer"},W={href:"https://bram.us/2023/10/23/css-scroll-detection/",target:"_blank",rel:"noopener noreferrer"},F={href:"https://css-generators.com/tooltip-speech-bubble/",target:"_blank",rel:"noopener noreferrer"},z={href:"https://css-tip.com/",target:"_blank",rel:"noopener noreferrer"};function U(a,n){const d=c("VPCard"),r=c("router-link"),u=c("SiteInfo"),o=c("VPIcon"),i=c("CodePen"),m=c("RouteLink");return w(),f("div",null,[e("h1",S,[e("a",C,[e("span",null,k(a.$frontmatter.title)+" Í¥ÄÎ†®",1)])]),t(d,h(g({title:"CSS > Article(s)",desc:"Article(s)",link:"/programming/css/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),e("nav",A,[e("ul",null,[e("li",null,[t(r,{to:"#prerequisites"},{default:l(()=>[...n[0]||(n[0]=[s("Prerequisites",-1)])]),_:1})]),e("li",null,[t(r,{to:"#the-tooltip-position"},{default:l(()=>[...n[1]||(n[1]=[s("The Tooltip Position",-1)])]),_:1})]),e("li",null,[t(r,{to:"#the-tooltip-content"},{default:l(()=>[...n[2]||(n[2]=[s("The Tooltip Content",-1)])]),_:1})]),e("li",null,[t(r,{to:"#adding-motion"},{default:l(()=>[...n[3]||(n[3]=[s("Adding Motion",-1)])]),_:1})]),e("li",null,[t(r,{to:"#another-example"},{default:l(()=>[...n[4]||(n[4]=[s("Another Example",-1)])]),_:1})]),e("li",null,[t(r,{to:"#conclusion"},{default:l(()=>[...n[5]||(n[5]=[s("Conclusion",-1)])]),_:1})])])]),n[48]||(n[48]=e("hr",null,null,-1)),t(u,{name:"Custom Range Slider Using Anchor Positioning & Scroll-Driven Animations",desc:"We'll make some extremely stylized range sliders with simple semantic HTML and some very fresh CSS. You might be surprised how custom these things can get these days.",url:"https://frontendmasters.com/blog/custom-range-slider-using-anchor-positioning-scroll-driven-animations",logo:"https://frontendmasters.com/favicon.ico",preview:"https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/3569"}),e("p",null,[e("a",x,[t(o,{icon:"fa-brands fa-firefox"}),n[6]||(n[6]=s("Anchor positioning",-1))]),n[8]||(n[8]=s("and",-1)),e("a",T,[t(o,{icon:"fa-brands fa-firefox"}),n[7]||(n[7]=s("scroll-driven animations",-1))]),n[9]||(n[9]=s("are among of the most popular and exciting CSS features of 2024. They unlock a lot of possibilities, and will continue to do so as browser support improves and developers get to know them.",-1))]),n[49]||(n[49]=e("p",null,"Here is a demo of a custom range slider where I am relying on such features.",-1)),t(i,{user:"t_afif","slug-hash":"MWdmZPL",title:"CSS-only Custom range slider with motion","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[50]||(n[50]=p(`<p>This whole UI is a semantic HTML<code>&lt;input type=&quot;range&quot;&gt;</code>, with another semantic<code>&lt;output&gt;</code>element showing off the current value, along with quite fancy CSS.</p><p>Intuitively, you may think there is a JavaScript code somewhere gathering the value of the input ‚Äúon change‚Äù and updating the position/content of the tooltip. As for the motion, it‚Äôs probably a kind of JavaScript library that calculates the speed of the mouse movement to apply a rotation and create that traction illusion.</p><p>Actually, there is no JavaScript at all.</p><p>It‚Äôs hard to believe but CSS has evolved in a way that we can achieve such magic without any scripts or library. You will also see that the code is not that complex. It‚Äôs a combination of small CSS tricks that we will dissect together so follow along!</p><div class="hint-container note"><p class="hint-container-title">Note</p><p>At the time of writing, only Chrome (and Edge) have the full support of the features we will be using.</p></div><hr><h2 id="prerequisites" tabindex="-1"><a class="header-anchor" href="#prerequisites"><span>Prerequisites</span></a></h2><p>First, let‚Äôs start with the HTML structure:</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code class="language-html"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  Label</span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>range<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>one<span class="token punctuation">&quot;</span></span> <span class="token attr-name">min</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>120<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>output</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>one<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">--min</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token property">--max</span><span class="token punctuation">:</span> 120</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>output</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>An<code>input</code>element and an<code>output</code>element are all that we need here. The label part is not mandatory for the functionality, but form elements should always be labelled and you need a wrapper element anyway.</p><p>I won‚Äôt detail the attributes of the<code>input</code>element but note the use of two CSS variables on the<code>output</code>element that should have the same values as the <code>min</code> and <code>max</code> attributes.</p>`,11)),e("p",null,[n[11]||(n[11]=s("In addition to the HTML code, I am going to consider the styling of the range slider and the tooltip as prerequisites as well. I will mainly focus on the new features and skip most of the aesthetic parts, although I have covered some of those aspects in other articles, ",-1)),t(m,{to:"/sitepoint.com/css-custom-range-slider.html"},{default:l(()=>[...n[10]||(n[10]=[s("like here",-1)])]),_:1}),n[12]||(n[12]=s(" where I detail the styling of the range slider.",-1))]),t(i,{user:"t_afif","slug-hash":"KKGpmGE",title:"CSS only custom range sliders","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),e("p",null,[n[15]||(n[15]=s("As for the tooltip, I have a ",-1)),e("a",I,[t(o,{icon:"fas fa-globe"}),n[13]||(n[13]=s("big collection of 100 different tooltip shapes",-1))]),n[16]||(n[16]=s(" and I am going to use the #41 and #42. I also have a",-1)),t(m,{to:"/smashingmagazine.com/modern-css-tooltips-speech-bubbles-part1.html"},{default:l(()=>[...n[14]||(n[14]=[s("two-part article",-1)])]),_:1}),n[17]||(n[17]=s(" detailing the creation of most of the tooltips.",-1))]),n[51]||(n[51]=e("figure",null,[e("img",{src:"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/08/s_3FEC3DE430682F2526F00121B6B9A21346D04C3B20F98BA491C64590EEBAAF65_1723504367208_image.png?resize=989%2C307&ssl=1",alt:"",tabindex:"0",loading:"lazy"}),e("figcaption")],-1)),n[52]||(n[52]=e("p",null,[s("You don‚Äôt "),e("em",null,"need"),s(" the fancy styled tooltip output, nor do you need the custom styling of the range slider itself, it‚Äôs just fun and offers some visual control you might want. Here‚Äôs a ‚Äúnaked‚Äù demo without all that:")],-1)),t(i,{user:"t_afif","slug-hash":"oNrojEJ",title:"Naked range slider demo","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[53]||(n[53]=p(`<hr><h2 id="the-tooltip-position" tabindex="-1"><a class="header-anchor" href="#the-tooltip-position"><span>The Tooltip Position</span></a></h2><p>The first thing we are going to do is to correctly place the tooltip above (or below) the thumb element of the slider. This will be the job of Anchor positioning and here is the code:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">input[type=&quot;range&quot; i]::-webkit-slider-thumb</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">anchor-name</span><span class="token punctuation">:</span> --thumb<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">output</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">position-anchor</span><span class="token punctuation">:</span> --thumb<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">position-area</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span> <span class="token comment">/* or bottom */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That‚Äôs all! No more than four CSS declarations and our tooltip is correctly placed and will follow the movement of the slider thumb.</p><p>Anchor positioning is an upgrade of<code>position: absolute</code> here. Instead of positioning the element relatively to an ancestor having<code>position: relative</code>we can consider any element on the page called an ‚Äúanchor‚Äù. To define an anchor we use<code>anchor-name</code>with whatever value you want. It‚Äôs mandatory to use the dashed indent notation like with custom properties. That same value can later be used within the absolute element to link it with the ‚Äúanchor‚Äù using<code>position-anchor</code>.</p><p>Defining the anchor is not enough, we also need to correctly position the element. For this, we have the<code>position-area</code>.</p>`,7)),e("div",q,[n[22]||(n[22]=e("p",{class:"hint-container-title"},"Info",-1)),e("p",null,[n[19]||(n[19]=s("The",-1)),n[20]||(n[20]=e("code",null,"position-area",-1)),e("a",D,[t(o,{icon:"fas fa-firefox"}),n[18]||(n[18]=s("CSS",-1))]),n[21]||(n[21]=s("property enables an anchor-positioned element to be positioned relative to the edges of its associated anchor element by placing the positioned element on one or more tiles of an implicit 3√ó3 grid, where the anchoring element is the center cell.",-1))]),t(u,{name:"position-area - CSS: Cascading Style Sheets | MDN",desc:"The position-area CSS property enables an anchor-positioned element to be positioned relative to the edges of its associated anchor element by placing the positioned element on one or more tiles of an implicit 3x3 grid, where the anchoring element is the center cell.",url:"https://developer.mozilla.org/en-US/docs/Web/CSS/position-area/",logo:"https://developer.mozilla.org/favicon-48x48.bc390275e955dacb2e65.png",preview:"https://developer.mozilla.org/mdn-social-share.d893525a4fb5fb1f67a2.png"})]),e("p",null,[e("a",j,[t(o,{icon:"fas fa-globe"}),n[23]||(n[23]=s("Here is an online tool",-1))]),n[24]||(n[24]=s(" to visualize the different values.",-1))]),n[54]||(n[54]=e("p",null,[s("We‚Äôre using "),e("code",null,"position-area: top"),s(" on the "),e("code",null,"<output>"),s(", and a "),e("code",null,"bottom"),s(" class flips that to "),e("code",null,"position-area: bottom"),s(" to re-position it and make the design work below.")],-1)),n[55]||(n[55]=e("p",null,"Here is the demo so far:",-1)),t(i,{user:"t_afif","slug-hash":"ZEdaxpL",title:"Adding the position","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[56]||(n[56]=e("p",null,"Hmmmm, there is an issue! Both tooltips are linked to the same thumb. This is understandable, because I used the same anchor name so the first one will get ignored.",-1)),e("p",null,[n[26]||(n[26]=e("em",null,"Use a different name",-1)),n[27]||(n[27]=s(", you say, and that‚Äôs correct but it‚Äôs not the optimal solution. We can still keep the same name and instead, limit the scope using",-1)),e("a",B,[t(o,{icon:"iconfont icon-w3c"}),n[25]||(n[25]=e("code",null,"anchor-scope",-1))]),n[28]||(n[28]=s(".",-1))]),n[57]||(n[57]=p(`<div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">label</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">anchor-scope</span><span class="token punctuation">:</span> --thumb<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The above code should limit the scope of the anchor<code>--thumb</code>to the<code>label</code>element and its descendant. In other words, the anchor cannot be seen outside the<code>label</code>element.</p><p>Another fix is to add<code>position: relative</code>to<code>label</code>. I won‚Äôt detail how it works but it has to do with the creation of a containing block.</p>`,3)),t(i,{user:"t_afif","slug-hash":"ZEdaxwa",title:"Correcting the position","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[58]||(n[58]=e("p",null,"Hmmmmm. We have fixed the scoping problem but the position of the tooltip is still not good. If you move the thumb to the edges, the tooltip is no longer following. It‚Äôs limited to the boundary of the slider. It‚Äôs kind of strange, but it‚Äôs by design.",-1)),e("p",null,[n[30]||(n[30]=s("By adding ",-1)),n[31]||(n[31]=e("code",null,"position: relative",-1)),n[32]||(n[32]=s(" we create a containing block for the tooltip and we trigger the following behavior described by",-1)),e("a",P,[t(o,{icon:"iconfont icon-w3c"}),n[29]||(n[29]=s("the specification",-1))]),n[33]||(n[33]=s(":",-1))]),n[59]||(n[59]=e("blockquote",null,[e("p",null,"If the box overflows its inset-modified containing block, but would still fit within its original containing block, by default it will ‚Äúshift‚Äù to stay within its original containing block, even if that violates its normal alignment. This behavior makes it more likely that positioned boxes remain visible and within their intended bounds, even when their containing block ends up smaller than anticipated.")],-1)),n[60]||(n[60]=e("p",null,[s("To fix this, we can use negative margin "),e("code",null,"margin-inline: -4em"),s(" or a negative inset "),e("code",null,"inset: 0 -4em"),s(" to allow the element to go outside the boundary")],-1)),t(i,{user:"t_afif","slug-hash":"BaXmbNL",title:"Correcting the edge cases","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[61]||(n[61]=e("p",null,"Of course, it applies to only this particular demo. You may need a different fix in different situations but at least you are aware of this quirk so don‚Äôt forget about it!",-1)),n[62]||(n[62]=e("hr",null,null,-1)),n[63]||(n[63]=e("h2",{id:"the-tooltip-content",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#the-tooltip-content"},[e("span",null,"The Tooltip Content")])],-1)),n[64]||(n[64]=e("p",null,[s("Now that our tooltip is correctly positioned, let‚Äôs move to the content. This is where scroll-driven animations enter the story. I know what you are thinking: "),e("em",null,"‚ÄúWe have nothing to scroll, so how are we going to use scroll-driven animations?‚Äù")],-1)),e("p",null,[n[35]||(n[35]=s("If you read",-1)),e("a",E,[t(o,{icon:"fa-brands fa-firefox"}),n[34]||(n[34]=s("the MDN page",-1))]),n[36]||(n[36]=s("you will find something called a ‚Äú",-1)),n[37]||(n[37]=e("em",null,"view progress timeline",-1)),n[38]||(n[38]=s("‚Äù:",-1))]),n[65]||(n[65]=p(`<blockquote><p>You progress this timeline based on the change in visibility of an element (known as the subject) inside a scroller. The visibility of the subject inside the scroller is tracked as a percentage of progress ‚Äî by default, the timeline is at 0% when the subject is first visible at one edge of the scroller, and 100% when it reaches the opposite edge.</p></blockquote><p>This is perfect for us since we have a thumb (the subject) that moves inside the input (the scroller) so we don‚Äôt really need to have anything else to scroll.</p><p>We start by defining the timeline as follows:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">input</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span> <span class="token comment">/* or \`auto\` */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">input[type=&quot;range&quot; i]::-webkit-slider-thumb</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">view-timeline</span><span class="token punctuation">:</span> --thumb-view inline<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span>\`</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Similar to what we did with the anchor, we give a name and the axis (<code>inline</code>) which is the horizontal one in our default writing mode. Then, we define<code>overflow: hidden</code>on the input element. This will make the input our scroller while the thumb is the subject.</p><p>If you forget about the overflow (so easy to forget!), another element will get used as the scroller, and won‚Äôt really know which one, and nothing will work as expected. Always remember that you need to define the subject using<code>view-timeline</code>and the scroller using<code>overflow</code>. I will repeat it again: <strong>don‚Äôt forget to define overflow on the scroller element!</strong></p><p>Next, we define the animation:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@property</span> --val</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">syntax</span><span class="token punctuation">:</span> <span class="token string">&#39;&lt;integer&gt;&#39;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">inherits</span><span class="token punctuation">:</span> true<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">initial-value</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">label</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">timeline-scope</span><span class="token punctuation">:</span> --thumb-view<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">output</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">animation</span><span class="token punctuation">:</span> range linear both<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">animation-timeline</span><span class="token punctuation">:</span> --thumb-view<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token atrule"><span class="token rule">@keyframes</span> range</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">0%</span>   <span class="token punctuation">{</span> <span class="token property">--val</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--max<span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token selector">100%</span> <span class="token punctuation">{</span> <span class="token property">--val</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--min<span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Let‚Äôs start with<code>timeline-scope</code>. This is yet another scoping issue that will give you a lot of headaches. With anchor positioning, we saw that an anchor is by default available everywhere on the page and we have to limit its scope. With scroll-driven animations, the scope is limited to the element where it‚Äôs defined (the subject) and its descendant so we have to increase the scope to make it available to other elements. Two different implementations but the same issue.</p><p>Never<strong>ever</strong>forget about scoping when working with both features. Sometimes, everything is correctly defined and you are only missing<code>timeline-scope</code>or<code>position: relative</code>somewhere.</p><p>Next we define an animation that animates an integer between the <code>min</code> and <code>max</code> variables, then link that animation with the timeline we previously defined using<code>animation-timeline</code>.</p><p>Why the <code>max</code> is at 0% and the <code>min</code> at 100%? Isn‚Äôt that backwards, you ask?</p><p>Intuitively, we tend to think ‚Äúfrom left to right‚Äù but this looks like it‚Äôs ‚Äúfrom right to left‚Äù. To understand this, we need to consider the ‚Äúscroll‚Äù part of the feature.</p><p>I know that we don‚Äôt have scrolling in our case but consider the following example to better understand.</p>`,14)),t(i,{user:"t_afif","slug-hash":"xxoPQWj",title:"Illustrating the 'left to right' logic","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[66]||(n[66]=p(`<p>When you scroll the container ‚Äúfrom left to right‚Äù you have a red circle that moves ‚Äúfrom right to left‚Äù. We still have the ‚Äúfrom left to right‚Äù behavior but it‚Äôs linked to the scroll. As for the content, it will logically move in the opposite direction ‚Äúfrom right to left‚Äù.</p><p>When the scroll is at the left, the element is at the right and when the scroll is at the right, the element is at the left. The same logic applies to our thumb even if there is nothing to scroll. When the thumb is at the right edge, this is our<code>0%</code>state and we need to have the <code>max</code> value there. The left edge will be the<code>100%</code>state and it‚Äôs the <code>min</code> value.</p><p>The last step is to show the value using a pseudo-element and<code>counter()</code></p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">output::before</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">counter</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">counter-reset</span><span class="token punctuation">:</span> num <span class="token function">var</span><span class="token punctuation">(</span>--val<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>And we are done!</p>`,5)),t(i,{user:"t_afif","slug-hash":"BagmGPy",title:"Adding the content","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[67]||(n[67]=p(`<p>Wait a minute, the values aren‚Äôt good! We are not reaching the min and max values. For the first slider, we are supposed to go from<code>0</code>to<code>120</code>but instead, we have<code>9</code>and<code>111</code>.</p><p>Another trick related to the scroll part of the feature and here is a figure to illustrate what is happening:</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/08/DLxrh0pl.png?resize=977%2C254&amp;ssl=1" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>The movement of the thumb is limited to the input container (the scroller) but the<code>0%</code>and<code>100%</code>state are defined to be outside the scroller. In our case, the subject cannot reach the<code>0%</code>and<code>100%</code>since it cannot go outside but luckily we can update the<code>0%</code>and<code>100%</code>state:</p><p>We can either use<code>animation-range</code>to make both states inside the container:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">output</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">animation</span><span class="token punctuation">:</span> range linear both<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">animation-timeline</span><span class="token punctuation">:</span> --thumb-view<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">animation-range</span><span class="token punctuation">:</span> entry 100% exit 0%<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://i0.wp.com/paper-attachments.dropboxusercontent.com/s_3FEC3DE430682F2526F00121B6B9A21346D04C3B20F98BA491C64590EEBAAF65_1723632516189_image.png?ssl=1" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Or we consider<code>view-timeline-inset</code>with a value equal to the width of the thumb.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">input[type=&quot;range&quot; i]::-webkit-slider-thumb</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">anchor-name</span><span class="token punctuation">:</span> --thumb<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">view-timeline</span><span class="token punctuation">:</span> --thumb-view inline<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">view-timeline-inset</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* --s is defined on an upper element and is used to define the size of the thumb */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The first method seems better as we don‚Äôt have to know the size of the thumb (the subject) but keep in mind both methods.The <code>view-timeline-inset</code>property may be more suitable in some situations.</p>`,10)),t(i,{user:"t_afif","slug-hash":"JjqNEbZ",title:"CSS-only Custom range slider","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[68]||(n[68]=p(`<p>Now our slider is perfect!</p><p>A lot of stuff to remember, right? Between the scoping issues, the range we have to correct, the overflow we should not forget, the <code>min</code> that should be at<code>100%</code>and <code>max</code> that should be at<code>0%</code>, etc. Don‚Äôt worry, I feel the same. They are new features with new mechanisms so it requires a lot of practice to get used to them and build a clear mental model. If you are a bit lost, that‚Äôs fine! No need to understand everything at once. Take the time to play with the different demos, read the doc of each property, and try things on your own.</p><hr><h2 id="adding-motion" tabindex="-1"><a class="header-anchor" href="#adding-motion"><span>Adding Motion</span></a></h2><p>Now let‚Äôs move to the fun part, those silly wobbly animations. A tooltip that follows the thumb with dynamic content is good but it‚Äôs even better if we add some motion to it.</p><p>You may think this is gonna be the hardest part but actually it‚Äôs the easiest one, and here is the relevant code:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@property</span> --val</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">syntax</span><span class="token punctuation">:</span> <span class="token string">&#39;&lt;integer&gt;&#39;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">inherits</span><span class="token punctuation">:</span> true<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">initial-value</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token atrule"><span class="token rule">@property</span> --e</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">syntax</span><span class="token punctuation">:</span> <span class="token string">&#39;&lt;number&gt;&#39;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">inherits</span><span class="token punctuation">:</span> true<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">initial-value</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">output</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">animation</span><span class="token punctuation">:</span> range linear both<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">animation-timeline</span><span class="token punctuation">:</span> --thumb-view<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">animation-range</span><span class="token punctuation">:</span> entry 100% exit 0%<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">output:before</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">counter</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">counter-reset</span><span class="token punctuation">:</span> num <span class="token function">var</span><span class="token punctuation">(</span>--val<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">--e</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--val<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">transition</span><span class="token punctuation">:</span> --e .1s ease-out<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">rotate</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--e<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--val<span class="token punctuation">)</span><span class="token punctuation">)</span>*2deg<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token atrule"><span class="token rule">@keyframes</span> range</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">0%</span>   <span class="token punctuation">{</span> <span class="token property">--val</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--max<span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token selector">100%</span> <span class="token punctuation">{</span> <span class="token property">--val</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--min<span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We add a new CSS variable<code>--e</code>with a number type. This variable will be equal to the<code>--val</code>variable. Until now, nothing fancy. We have two variables having the same value but one of them has a <code>transition</code>. Here comes the magic.</p><p>When you move the thumb, the animation will update the<code>--val</code>variable inside the output element. The pseudo-element will then inherit that value to update the content and also update<code>--e</code>. But since we are applying a transition to<code>--e</code>, it will not have an instant update but a smooth one (well, you know how transitions work!). This means that for a brief moment, both<code>--e</code>and<code>--val</code>will not be equal thus their difference is different from 0. We use that difference inside the rotation!</p><p>In addition to this, the difference can get bigger if you move the thumb fast or slow. Let‚Äôs suppose the current value is equal to<code>5</code>. If you move the thumb rapidly to the value<code>50</code>, the difference will be equal to<code>45</code>hence we get a big rotation. If you move to the value<code>7</code>, the difference will be equal to<code>2</code>and the rotation won‚Äôt be that big.</p><p>Here is the full demo again so you can play with it. Try different speeds of movement and see how the rotation is different each time.</p>`,11)),t(i,{user:"t_afif","slug-hash":"MWdmZPL",title:"CSS-only Custom range slider with motion","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),e("p",null,[n[40]||(n[40]=s("If you want to dig more into this technique and see more examples I advise you to ",-1)),e("a",W,[t(o,{icon:"fas fa-globe"}),n[39]||(n[39]=s("read this article by Bramus",-1))]),n[41]||(n[41]=s(".",-1))]),t(u,{name:"Solved by CSS Scroll-Driven Animations: Style an element based on the active Scroll Direction and Scroll Speed",desc:"Combine Scroll-Driven Animations with @property, transition-delay, calc(), sign() and abs() ‚Ä¶ and you can do Scroll Detection using only CSS!",url:"https://bram.us/2023/10/23/css-scroll-detection/",logo:"https://bram.us/favicon.ico",preview:"https://bram.us/wordpress/wp-content/uploads/2023/10/sda-badass-short-020p-10fps.gif"}),n[69]||(n[69]=e("hr",null,null,-1)),n[70]||(n[70]=e("h2",{id:"another-example",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#another-example"},[e("span",null,"Another Example")])],-1)),n[71]||(n[71]=e("p",null,"Let‚Äôs try a different idea.",-1)),t(i,{user:"t_afif","slug-hash":"vYweZQa",title:"CSS-only Custom range slider","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[72]||(n[72]=e("p",null,"This time, I am adjusting the tooltip position (and its tail) to remain within the horizontal boundary of the input element. Can you figure out how it‚Äôs done? This will be your homework!",-1)),e("p",null,[n[43]||(n[43]=s("For the tooltip part, I already did the job for you. I will redirect you again to",-1)),e("a",F,[t(o,{icon:"fas fa-globe"}),n[42]||(n[42]=s("my online collection",-1))]),n[44]||(n[44]=s("where you can get the code of the tooltip shape. Within that code, I am already defining one variable that controls the tail position.",-1))]),n[73]||(n[73]=e("hr",null,null,-1)),n[74]||(n[74]=e("h2",{id:"conclusion",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#conclusion"},[e("span",null,"Conclusion")])],-1)),n[75]||(n[75]=e("p",null,"CSS is cool. A few years ago, doing such stuff with CSS would have been impossible. You would probably need one or two JavaScript libraries to handle the position of the tooltip, the dynamic content, the motion, etc. Now, all it takes is a few lines of CSS.",-1)),e("p",null,[n[46]||(n[46]=s("It‚Äôs still early to adopt those features and include them in real projects but I think it‚Äôs a good time to explore them and get an overview of what could be done in the near future. If you want more ‚Äúfuturistic‚Äù experimentation make sure to check",-1)),e("a",z,[t(o,{icon:"fas fa-globe"}),n[45]||(n[45]=s("my CSS Tip website",-1))]),n[47]||(n[47]=s("where I regularly share cool demos!",-1))]),b(" TODO: add ARTICLE CARD "),t(d,h(g({title:"Custom Range Slider Using Anchor Positioning & Scroll-Driven Animations",desc:"We'll make some extremely stylized range sliders with simple semantic HTML and some very fresh CSS. You might be surprised how custom these things can get these days.",link:"https://chanhi2000.github.io/bookshelf/frontendmasters.com/custom-range-slider-using-anchor-positioning-scroll-driven-animations.html",logo:"https://frontendmasters.com/favicon.ico",background:"rgba(188,75,52,0.2)"})),null,16)])}const L=v(y,[["render",U]]),M=JSON.parse('{"path":"/frontendmasters.com/custom-range-slider-using-anchor-positioning-scroll-driven-animations.html","title":"Custom Range Slider Using Anchor Positioning & Scroll-Driven Animations","lang":"en-US","frontmatter":{"lang":"en-US","title":"Custom Range Slider Using Anchor Positioning & Scroll-Driven Animations","description":"Article(s) > Custom Range Slider Using Anchor Positioning & Scroll-Driven Animations","icon":"fa-brands fa-css3-alt","category":["CSS","Article(s)"],"tag":["blog","frontendmasters.com","css"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Custom Range Slider Using Anchor Positioning & Scroll-Driven Animations\\",\\"image\\":[\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/08/s_3FEC3DE430682F2526F00121B6B9A21346D04C3B20F98BA491C64590EEBAAF65_1723504367208_image.png?resize=989%2C307&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/08/DLxrh0pl.png?resize=977%2C254&ssl=1\\",\\"https://i0.wp.com/paper-attachments.dropboxusercontent.com/s_3FEC3DE430682F2526F00121B6B9A21346D04C3B20F98BA491C64590EEBAAF65_1723632516189_image.png?ssl=1\\"],\\"datePublished\\":\\"2024-08-21T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Temani Afif\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/frontendmasters.com/custom-range-slider-using-anchor-positioning-scroll-driven-animations.html"}],["meta",{"property":"og:site_name","content":"üìöBookshelf"}],["meta",{"property":"og:title","content":"Custom Range Slider Using Anchor Positioning & Scroll-Driven Animations"}],["meta",{"property":"og:description","content":"Article(s) > Custom Range Slider Using Anchor Positioning & Scroll-Driven Animations"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/3569"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/3569"}],["meta",{"name":"twitter:image:alt","content":"Custom Range Slider Using Anchor Positioning & Scroll-Driven Animations"}],["meta",{"property":"article:author","content":"Temani Afif"}],["meta",{"property":"article:tag","content":"css"}],["meta",{"property":"article:tag","content":"frontendmasters.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2024-08-21T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Custom Range Slider Using Anchor Positioning & Scroll-Driven Animations"},{"property":"og:description","content":"Custom Range Slider Using Anchor Positioning & Scroll-Driven Animations"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/frontendmasters.com/custom-range-slider-using-anchor-positioning-scroll-driven-animations.html"}]],"prev":"/programming/css/articles/README.md","date":"2024-08-21T00:00:00.000Z","isOriginal":false,"author":"Temani Afif","cover":"https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/3569"},"git":{},"readingTime":{"minutes":11.39,"words":3416},"filePathRelative":"frontendmasters.com/custom-range-slider-using-anchor-positioning-scroll-driven-animations.md","copyright":{"author":"Temani Afif"}}');export{L as comp,M as data};
