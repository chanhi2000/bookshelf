import{_ as g}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as k,d as t,f as e,b as i,a as b,t as v,n as p,g as c,w as r,e as s,r as u,o as w}from"./app-BItykJLQ.js";const y={},T={id:"frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´",tabindex:"-1"},P={class:"header-anchor",href:"#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"},A={class:"table-of-contents"},x={class:"hint-container info"},I={href:"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_anchor_positioning",target:"_blank",rel:"noopener noreferrer"},S={href:"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_anchor_positioning",target:"_blank",rel:"noopener noreferrer"},C={class:"hint-container info"},W={class:"hint-container-title"},F={href:"https://css-generators.com/tooltip-speech-bubble/",target:"_blank",rel:"noopener noreferrer"},N={class:"hint-container info"};function z(a,n){const l=u("VPCard"),d=u("router-link"),f=u("SiteInfo"),h=u("VPIcon"),o=u("CodePen"),m=u("RouteLink");return w(),k("div",null,[t("h1",T,[t("a",P,[t("span",null,v(a.$frontmatter.title)+" Í¥ÄÎ†®",1)])]),e(l,p(c({title:"CSS > Article(s)",desc:"Article(s)",link:"/programming/css/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),t("nav",A,[t("ul",null,[t("li",null,[e(d,{to:"#the-initial-configuration"},{default:r(()=>[...n[0]||(n[0]=[s("The Initial Configuration",-1)])]),_:1})]),t("li",null,[e(d,{to:"#making-the-position-dynamic"},{default:r(()=>[...n[1]||(n[1]=[s("Making the Position Dynamic",-1)])]),_:1})]),t("li",null,[e(d,{to:"#adding-the-tail"},{default:r(()=>[...n[2]||(n[2]=[s("Adding The Tail",-1)])]),_:1})]),t("li",null,[e(d,{to:"#moving-the-tail"},{default:r(()=>[...n[3]||(n[3]=[s("Moving The Tail",-1)])]),_:1})]),t("li",null,[e(d,{to:"#conclusion"},{default:r(()=>[...n[4]||(n[4]=[s("Conclusion",-1)])]),_:1})])])]),n[37]||(n[37]=t("hr",null,null,-1)),e(f,{name:"Perfectly Pointed Tooltips: A Foundation",desc:"The Anchor Positioning API in CSS is very powerful. This is the beginning of a series where we understand it through the perfect use-case: tooltips.",url:"https://frontendmasters.com/blog/perfectly-pointed-tooltips-a-foundation/",logo:"https://frontendmasters.com/favicon.ico",preview:"https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/7514"}),t("div",x,[n[5]||(n[5]=t("p",{class:"hint-container-title"},"Article Series",-1)),e(l,p(c({title:"Perfectly Pointed Tooltips: A Foundation",desc:"The Anchor Positioning API in CSS is very powerful. This is the beginning of a series where we understand it through the perfect use-case: tooltips.",link:"/frontendmasters.com/perfectly-pointed-tooltips-a-foundation.md",logo:"https://frontendmasters.com/favicon.ico",background:"rgba(188,75,52,0.2)"})),null,16),e(l,p(c({title:"Perfectly Pointed Tooltips: All Four Sides",desc:"Tooltips are a natural fit for the abilities of Anchor Positioning, which can help place them on *any* side or corner. It does make dealing with the pointer extra tricky though.",link:"/frontendmasters.com/perfectly-pointed-tooltips-all-four-sides.md",logo:"https://frontendmasters.com/favicon.ico",background:"rgba(188,75,52,0.2)"})),null,16),e(l,p(c({title:"Perfectly Pointed Tooltips: To The Corners",desc:"With our foundation in positioning and flipping tooltips with anchors, and making pointer tails, we're going to get extra tricky and point them diagonally.",link:"/frontendmasters.com/perfectly-pointed-tooltips-to-the-corners.md",logo:"https://frontendmasters.com/favicon.ico",background:"rgba(188,75,52,0.2)"})),null,16)]),n[38]||(n[38]=t("p",null,"Tooltips are a classic in web development. You click on an element, and a small bubble appears to display additional details. Behind that simple click, there tends to be JavaScript performing calculations to determine the correct position for the tooltip. Let‚Äôs try to place it at the top. Nope, not enough space. Let‚Äôs try the bottom instead. It‚Äôs also touching the right edge so let‚Äôs shift it a bit to the left. There is a lot that can go into making sure a tooltip is placed well without any cutoffs losing information.",-1)),n[39]||(n[39]=t("p",null,"In this article, I will show you how to write good JavaScript that covers all the possibilities‚Ä¶",-1)),t("p",null,[n[7]||(n[7]=s("Kidding! We‚Äôll be using CSS and I will show how the modern ",-1)),t("a",I,[e(h,{icon:"fa-brands fa-firefox"}),n[6]||(n[6]=s("anchor positioning API",-1))]),n[8]||(n[8]=s(" can help us with all this. None of the weight and performance concerns of JavaScript here.",-1))]),n[40]||(n[40]=t("div",{class:"hint-container note"},[t("p",{class:"hint-container-title"},"Note"),t("p",null,"At the time of writing, only Chrome and Edge have full support of the features we will be using.")],-1)),n[41]||(n[41]=t("p",null,"Let‚Äôs start with a demo:",-1)),e(o,{user:"t_afif","slug-hash":"RNrKmpY",title:"Follow me if you can! (drag the anchor)","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[42]||(n[42]=t("p",null,"Click-and-drag the anchor and see how the tooltip behaves. It will try to position itself in a way to remain visible and avoid any overflow. Cool, right? No JavaScript is used to position the tooltip (except the one for dragging the anchor, which is irrelevant to the trick).",-1)),t("p",null,[n[10]||(n[10]=s("This is made possible thanks to the new ",-1)),t("a",S,[e(h,{icon:"fa-brands fa-firefox"}),n[9]||(n[9]=s("Anchor Positioning API",-1))]),n[11]||(n[11]=s(" and a few other tricks we will dissect together. We will also study more examples, so if you are new to anchor positioning, you are in the right place.",-1))]),n[43]||(n[43]=i(`<hr><h2 id="the-initial-configuration" tabindex="-1"><a class="header-anchor" href="#the-initial-configuration"><span>The Initial Configuration</span></a></h2><p>Let‚Äôs start with the markup: An anchor element and its tooltip:</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code class="language-html"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>anchor<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>tooltip<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>This isn‚Äôt interesting HTML, but it does showcase how the anchor and the tooltip are different elements that don‚Äôt need to be parent/child. They can be anywhere in the DOM and the CSS can handle that (though, for practical and accessibility reasons, you may want to keep them close together and associate them).</p><p>The HTML structure you use will depend on your use case and your type of content, so choose it carefully. In all cases, it‚Äôs mainly one element for the anchor and another one for the tooltip.</p>`,6)),t("p",null,[n[13]||(n[13]=s("Here is a demo taken from another ",-1)),e(m,{to:"/frontendmasters.com/custom-range-slider-using-anchor-positioning-scroll-driven-animations.html"},{default:r(()=>[...n[12]||(n[12]=[t("strong",null,"article",-1)])]),_:1}),n[14]||(n[14]=s(" where the anchor is the thumb of a slider and the tooltip is an ",-1)),n[15]||(n[15]=t("code",null,"<output>",-1)),n[16]||(n[16]=s(" element:",-1))]),e(o,{user:"t_afif","slug-hash":"dPGVXyv",title:"Initial configuration","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[44]||(n[44]=i(`<p>The CSS:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">#anchor</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">anchor-name</span><span class="token punctuation">:</span> --anchor<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">#tooltip</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span> </span>
<span class="line">  <span class="token property">position-anchor</span><span class="token punctuation">:</span> --anchor<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">position-area</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We define the anchor using <code>anchor-name</code>, link the tooltip to the anchor using <code>position-anchor</code> (and a custom ident, the <code>--anchor</code> bit that looks like a custom property but is really just a unique name), and then we place it at the top using <code>position-area</code>. The tooltip needs to be absolutely positioned (which includes fixed position as well).</p>`,3)),e(o,{user:"t_afif","slug-hash":"dPGVXyv",title:"Initial configuration","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[45]||(n[45]=t("p",null,"Nothing fancy so far. The tooltip is ‚Äúalways‚Äù placed at the top, whatever the anchor‚Äôs position. You can drag the anchor to see the result.",-1)),n[46]||(n[46]=t("p",null,[s("In this article we‚Äôll use simple values for "),t("code",null,"position-area"),s(", but this property can be very tricky.")],-1)),t("figure",null,[n[20]||(n[20]=t("img",{src:"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/10/1hmIC9A1.png?resize=833%2C622&ssl=1",alt:"I‚Äôve created an interactive demo if you want to explore all the different values and understand how alignment works in the context of Anchor Positioning.",tabindex:"0",loading:"lazy"},null,-1)),t("figcaption",null,[n[18]||(n[18]=s("I‚Äôve created ",-1)),e(m,{to:"/css-tip.com/position-area.html"},{default:r(()=>[...n[17]||(n[17]=[t("strong",null,"an interactive demo",-1)])]),_:1}),n[19]||(n[19]=s(" if you want to explore all the different values and understand how alignment works in the context of Anchor Positioning.",-1))])]),n[47]||(n[47]=i(`<p>Now that our tooltip is placed, let‚Äôs add a small offset at the bottom to prepare the space for the tail. Using <code>bottom</code> will do the job.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">#anchor</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">anchor-name</span><span class="token punctuation">:</span> --anchor<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">#tooltip</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--d</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span> <span class="token comment">/* distance between tooltip and anchor */</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span> </span>
<span class="line">  <span class="token property">position-anchor</span><span class="token punctuation">:</span> --anchor<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">position-area</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">bottom</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--d<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2)),e(o,{user:"t_afif","slug-hash":"YPwEVqm",title:"adding gap","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[48]||(n[48]=t("hr",null,null,-1)),n[49]||(n[49]=t("h2",{id:"making-the-position-dynamic",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#making-the-position-dynamic"},[t("span",null,"Making the Position Dynamic")])],-1)),n[50]||(n[50]=t("p",null,"Let‚Äôs move to the interesting part, where we will adjust the position of the tooltip to make it always visible and avoid any overflow. Anchor Positioning has native mechanisms to do this, and all we need to do is understand how to use them correctly.",-1)),n[51]||(n[51]=t("p",null,"The first thing is to identify the containing block of the absolutely positioned element. We may intuitively think that the logic is to avoid a screen overflow, but that‚Äôs not the case. It‚Äôs related to the containing block. This can be very confusing if you don‚Äôt understand this part, so let‚Äôs look closely.",-1)),t("div",C,[t("p",W,[n[21]||(n[21]=s("The specification (",-1)),e(h,{icon:"fas fa-globe"}),n[22]||(n[22]=t("code",null,"w3.org",-1)),n[23]||(n[23]=s(")",-1))]),n[24]||(n[24]=t("blockquote",null,[t("p",null,[s("Anchor positioning, while powerful, can also be unpredictable. The anchor box might be anywhere on the page, so positioning a box in any particular fashion might result in the positioned box "),t("strong",null,"overflowing its containing block"),s(" or being positioned partially off screen.")]),t("p",null,[s("To ameliorate this, an absolutely positioned box can use the position-try-fallbacks property to refer to several variant sets of positioning/alignment properties that the UA can try if the box overflows its initial position. Each is applied to the box, one by one, and the first "),t("strong",null,"that doesn‚Äôt cause the box to overflow its containing block"),s(" is taken as the winner.")])],-1)),e(l,p(c({title:"CSS Anchor Positioning",desc:"Anchor positioning, while powerful, can also be unpredictable. The anchor box might be anywhere on the page, so positioning a box in any particular fashion (such as above the anchor, or the right of the anchor) might result in the positioned box overflowing its containing block or being positioned partially off screen.",link:"https://w3.org/TR/css-anchor-position-1/#fallback/",logo:"https://w3.org/favicon.ico",background:"rgba(47,93,149,0.2)"})),null,16)]),t("p",null,[n[26]||(n[26]=s("As you can read, it‚Äôs all about the containing block, and the containing block of an absolutely positioned element is the first ancestor with a position different from ",-1)),n[27]||(n[27]=t("code",null,"static",-1)),n[28]||(n[28]=s(" (the default). If such element doesn‚Äôt exist we consider ",-1)),e(m,{to:"/css-tip.com/initial-containing-block.html"},{default:r(()=>[...n[25]||(n[25]=[t("strong",null,"the initial containing block",-1)])]),_:1}),n[29]||(n[29]=s(".",-1))]),n[52]||(n[52]=t("p",null,"In our example, I am going to use the body as the containing block, and I will add a border and an offset from each side to better illustrate:",-1)),e(o,{user:"t_afif","slug-hash":"OPMOwNO",title:"the containing block","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[53]||(n[53]=i(`<p>Drag the anchor to the left or the right and see what happens. When the tooltip touches the edges, it stops, even if you can still move the anchor. It overflows the body only when the anchor is getting outside.</p><p>The browser will initially place the tooltip at the top and centered. The priority is to remain withing the containing block, so if there isn‚Äôt enough space to keep the center behavior, the tooltip is shifted. The second priority is to keep the anchor behavior, and in this case, the browser will allow the overflow if the anchor element is outside.</p><figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/10/SW5hUi3K.png?resize=1024%2C228&amp;ssl=1" alt="A three-part interactive demo showing a tooltip following an anchor element as it is dragged. The tooltip displays the message &#39;Drag the anchor and I should follow...&#39; with an anchor icon below." tabindex="0" loading="lazy"><figcaption>A three-part interactive demo showing a tooltip following an anchor element as it is dragged. The tooltip displays the message &#39;Drag the anchor and I should follow...&#39; with an anchor icon below.</figcaption></figure><p>Assuming the anchor will remain within the body area, we already have what we want without too much effort. The tooltip will never overflow from the right, left, or bottom side. What remains is the top.</p><p>By default, the browser can shift the element within the area defined by <code>position-area</code>, but cannot do more than that. We need to instruct the browser on how to handle the other cases. For this, we use <code>position-try-fallbacks</code> where we define different positions for the browser to ‚Äútry‚Äù in case the element doesn‚Äôt fit its containing block.</p><p>Let‚Äôs define a bottom position:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">position-try-fallbacks</span><span class="token punctuation">:</span> bottom<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Drag the anchor to the top and see what happens:</p>`,8)),e(o,{user:"t_afif","slug-hash":"PwZOyZq",title:"adding a fallback position","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[54]||(n[54]=i(`<p>Now, when the tooltip overflows the body from the top, the position becomes ‚Äúbottom‚Äù. It will also remain bottom until the tooltip overflows again from the bottom. In other words, when the browser picks a position after an overflow, it keeps it until a new overflow happens.</p><p>That‚Äôs all, we are done! Now our tooltip is perfectly placed, whatever the anchor position.</p><div class="hint-container note"><p class="hint-container-title">Note</p><p>But we no longer have the gap when the position is at the bottom (for the future arrow). How do we fix that?</p></div><p>We told the browser to only change the value of <code>position-area</code> to <code>bottom</code>, but we can do better by using:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">position-try-fallbacks</span><span class="token punctuation">:</span> flip-block<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>‚ÄúBlock‚Äù refers to the block axis (the vertical axis in our default writing mode), and this instruction means flip the position across the vertical axis. The logic is to mirror the initial position on the other side. To do this the browser needs to update different properties in addition to <code>position-area</code>.</p><p>In the example we‚Äôve defined <code>position-area: top</code> and <code>bottom: var(--d)</code>. With <code>position-try-fallbacks: flip-block</code> in place, when that flip happens, it‚Äôs as if we defined <code>position-area: bottom</code> and <code>top: var(--d)</code>. We keep the gap!</p>`,7)),e(o,{user:"t_afif","slug-hash":"wBMPYoz",title:"flip-block","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[55]||(n[55]=t("p",null,"If you are a bit lost and confused, don‚Äôt worry. We are dealing with new mechanisms not common to the CSS world so it may take time to click for you.",-1)),n[56]||(n[56]=t("p",null,[s("To sum up, we can either instruct the browser to update only the "),t("code",null,"position-area"),s(" by defining a new position or to ‚Äúflip‚Äù the actual position across one axis which will update different properties.")],-1)),n[57]||(n[57]=t("hr",null,null,-1)),n[58]||(n[58]=t("h2",{id:"adding-the-tail",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#adding-the-tail"},[t("span",null,"Adding The Tail")])],-1)),t("p",null,[n[31]||(n[31]=s("Adding a tail to a tooltip is pretty straightforward (I even have a ",-1)),t("a",F,[e(h,{icon:"fas fa-globe"}),n[30]||(n[30]=s("collection of 100 different designs",-1))]),n[32]||(n[32]=s("), but changing the direction of the tail based on the position is a bit tricky.",-1))]),n[59]||(n[59]=i(`<figure><img src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/10/aAotEaeC.png?resize=940%2C230&amp;ssl=1" alt="Three tooltip examples illustrating text that says &#39;Drag the anchor and I should follow...&#39; with an anchor icon, showcasing dynamic positioning." tabindex="0" loading="lazy"><figcaption>Three tooltip examples illustrating text that says &#39;Drag the anchor and I should follow...&#39; with an anchor icon, showcasing dynamic positioning.</figcaption></figure><p>For now, Anchor Positioning doesn‚Äôt offer a way to update the CSS based on the position, but we can still use the existing features to ‚Äúhack‚Äù it. Hacking with CSS can be fun!</p><p>I am going to rely on the ‚Äúflip‚Äù feature and the fact that it can update the margin to achieve the final result.</p><p>First, I will consider a pseudo-element to create the tail shape:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">#tooltip</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--d</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span> <span class="token comment">/* distance between tooltip and anchor */</span></span>
<span class="line">  <span class="token property">--s</span><span class="token punctuation">:</span> 1.2em<span class="token punctuation">;</span> <span class="token comment">/* tail size */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">#tooltip::before</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--s<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">background</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">inset</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>-1*<span class="token function">var</span><span class="token punctuation">(</span>--d<span class="token punctuation">)</span><span class="token punctuation">)</span> 0<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">left</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50% - <span class="token function">var</span><span class="token punctuation">(</span>--s<span class="token punctuation">)</span>/2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">clip-path</span><span class="token punctuation">:</span> <span class="token function">polygon</span><span class="token punctuation">(</span>50% .2em<span class="token punctuation">,</span>100% <span class="token function">var</span><span class="token punctuation">(</span>--d<span class="token punctuation">)</span><span class="token punctuation">,</span>100% <span class="token function">calc</span><span class="token punctuation">(</span>100% - <span class="token function">var</span><span class="token punctuation">(</span>--d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>50% <span class="token function">calc</span><span class="token punctuation">(</span>100% - .2em<span class="token punctuation">)</span><span class="token punctuation">,</span>0 <span class="token function">calc</span><span class="token punctuation">(</span>100% - <span class="token function">var</span><span class="token punctuation">(</span>--d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>0 <span class="token function">var</span><span class="token punctuation">(</span>--d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5)),e(o,{user:"t_afif","slug-hash":"NPxyqed",title:"adding the tail","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[60]||(n[60]=i(`<p>Both tails are visible by default. Click ‚Äúdebug mode‚Äù to better understand the shape and how it‚Äôs placed.</p><p>When the tooltip is at the top, we need to hide the top part. For this, we can use a <code>margin-top</code> on the pseudo-element equal to variable <code>--d</code>. And when the tooltip is at the bottom, we need <code>margin-bottom</code>.</p><p>I am going to define the <code>margin</code> on the tooltip element and then inherit it on pseudo-element:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">#tooltip</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--d</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span> <span class="token comment">/* distance between tooltip and anchor */</span></span>
<span class="line">  <span class="token property">--s</span><span class="token punctuation">:</span> 1.2em<span class="token punctuation">;</span> <span class="token comment">/* tail size */</span></span>
<span class="line"></span>
<span class="line">  <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--d<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">#tooltip::before</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">margin</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4)),e(o,{user:"t_afif","slug-hash":"wBMyaZo",title:"fixing the vertical position","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[61]||(n[61]=i(`<p>Tada. Our tooltip is now perfect! The use of margin will hide one side keeping one tail visible at a time.</p><div class="hint-container note"><p class="hint-container-title">Note</p><p>But we didn‚Äôt define <code>margin-bottom</code>. How does it work for the bottom position?</p></div><p>That‚Äôs the ‚Äúflip‚Äù feature. Remember what we did with the gap where we only defined <code>top</code> and <code>flip-block</code> changed it to <code>bottom</code>? The same logic applies here with margin: the <code>margin-top</code> automatically becomes a <code>margin-bottom</code> when the position is flipped! Cool, right?</p><p>Note that using margin will cause the tooltip to flip a bit earlier since margin is part of the element, and the logic is to prevent the overflow of the ‚Äúmargin box‚Äù. It‚Äôs not a big deal in our example; it‚Äôs nicer to flip the position before it touches the edges.</p><hr><h2 id="moving-the-tail" tabindex="-1"><a class="header-anchor" href="#moving-the-tail"><span>Moving The Tail</span></a></h2><p>The top and bottom parts are good, but we still need to fix the cases where the tooltip shifts when it‚Äôs close to the left and right edges. The tail needs to follow the anchor. For this, we have to update the left value and make it follow the anchor position.</p><p>Instead of:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">left</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50% - <span class="token function">var</span><span class="token punctuation">(</span>--s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>We use:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token property">left</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">anchor</span><span class="token punctuation">(</span>--anchor center<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--s<span class="token punctuation">)</span>/2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>I replace <code>50%</code>, which refers to the center of the tooltip element, with <code>anchor(--anchor center)</code>, which is the center of the anchor element.</p><p>The <code>anchor()</code> function is another cool feature of Anchor Positioning. It allows us to query a position from any anchor element and use it to place an absolutely positioned element.</p>`,13)),e(o,{user:"t_afif","slug-hash":"JoGpKqG",title:"adding anchor()","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[62]||(n[62]=t("p",null,[t("em",null,"Uh oh ‚Äî that doesn‚Äôt work."),s(" I‚Äôve left this in though, as it‚Äôs a educational moment we need to look at.")],-1)),n[63]||(n[63]=t("p",null,[s("We hit one of the trickiest issues of Anchor Positioning. In theory, any element on the page can be an anchor using "),t("code",null,"anchor-name"),s(" and any other element can position itself relative to that anchor. That‚Äôs the main purpose of the feature but there are exceptions where an element cannot reference an anchor.")],-1)),n[64]||(n[64]=t("p",null,"I won‚Äôt detail all the cases, but in our example, the pseudo-element (the tail) is a child of the tooltip, which is an absolutely positioned element. This makes the tooltip the containing block of the pseudo-element and prevents it from seeing any anchor defined outside it. (If you think z-index and stacking context are hard, get ready for this)",-1)),n[65]||(n[65]=t("p",null,"To overcome this, I will update the position of the pseudo-element to fixed. This changes its containing block (the viewport at the moment) and makes it able to see the anchor element.",-1)),e(o,{user:"t_afif","slug-hash":"WbrMGea",title:"using fixed position","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[66]||(n[66]=i(`<p>Yes, the demo is broken, but drag the anchor close to the edges and see how the tail is correctly placed horizontally as it‚Äôs now able to ‚Äúsee‚Äù the anchor element. However, the pseudo-element now has a fixed position so it can no longer be placed relatively to its parent element, the tooltip. To fix this we can make the tooltip an anchor element as well, so the pseudo-element can reference it.</p><p>In the end we need <em>two</em> anchors: <code>#anchor</code> and <code>#tooltip</code>. The tooltip is positioned relatively to the anchor, and the tail is positioned relatively to both the anchor and the tooltip.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">#anchor</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">anchor-name</span><span class="token punctuation">:</span> --anchor<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">#tooltip</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">--d</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span>  <span class="token comment">/* distance between anchor and tooltip  */</span></span>
<span class="line">  <span class="token property">--s</span><span class="token punctuation">:</span> 1.2em<span class="token punctuation">;</span> <span class="token comment">/* tail size */</span></span>
<span class="line">  </span>
<span class="line">  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span> </span>
<span class="line">  <span class="token property">position-anchor</span><span class="token punctuation">:</span> --anchor<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">anchor-name</span><span class="token punctuation">:</span> --tooltip<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">/* the tail */</span></span>
<span class="line"><span class="token selector">#tooltip:before</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--s<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">/* vertical position from tooltip  */</span></span>
<span class="line">  <span class="token property">top</span><span class="token punctuation">:</span>    <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">anchor</span><span class="token punctuation">(</span>--tooltip top   <span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">bottom</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">anchor</span><span class="token punctuation">(</span>--tooltip bottom<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">/* horizontal position from anchor */</span></span>
<span class="line">  <span class="token property">left</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">anchor</span><span class="token punctuation">(</span>--anchor center<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--s<span class="token punctuation">)</span>/2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Thanks to <code>anchor()</code>, I can retrieve the top and bottom edges of the tooltip element and the center of the anchor element to correctly position the pseudo-element.</p>`,4)),e(o,{user:"t_afif","slug-hash":"bNELwpm",title:"Final demo","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[67]||(n[67]=i(`<p>Our tooltip is now perfect! As I mentioned in the introduction, this CSS is not particularly complex. We barely used 20 declarations.</p><div class="hint-container note"><p class="hint-container-title">Note</p><p>What if we want to start with the bottom position?</p></div><p>Easy! You simply change the initial configuration to consider the bottom position and <code>flip-block</code> will switch to the top one when there is an overflow.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token selector">#tooltip</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">position-area</span><span class="token punctuation">:</span> bottom<span class="token punctuation">;</span> <span class="token comment">/* instead of position-area: top; */</span></span>
<span class="line">  <span class="token property">top</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* instead of bottom: var(--d); */</span></span>
<span class="line">  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* margin-top: var(--d) */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4)),e(o,{user:"t_afif","slug-hash":"WbrzJKP",title:"changing to bottom position","default-tab":["css","result"],theme:a.dark},null,8,["theme"]),n[68]||(n[68]=t("hr",null,null,-1)),n[69]||(n[69]=t("h2",{id:"conclusion",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#conclusion"},[t("span",null,"Conclusion")])],-1)),n[70]||(n[70]=t("p",null,[s("That‚Äôs all for this first part. We learned how to place a tooltip using "),t("code",null,"position-area"),s(" and how to defined a fallback position when an overflow occurs. Not to mention the flip feature and the use of the "),t("code",null,"anchor()"),s(" function.")],-1)),t("p",null,[n[34]||(n[34]=s("In the second part (coming soon!), we will increase the difficulty by working with more than two positions. Take the time to digest this first part before moving to the next one I also invite you to spend a few minutes on ",-1)),e(m,{to:"/css-tip.com/position-area.html"},{default:r(()=>[...n[33]||(n[33]=[t("strong",null,[s("my interactive demo of "),t("code",null,"position-area")],-1)])]),_:1}),n[35]||(n[35]=s(" to familiarize yourself with it.",-1))]),t("div",N,[n[36]||(n[36]=t("p",{class:"hint-container-title"},"Article Series",-1)),e(l,p(c({title:"Perfectly Pointed Tooltips: A Foundation",desc:"The Anchor Positioning API in CSS is very powerful. This is the beginning of a series where we understand it through the perfect use-case: tooltips.",link:"/frontendmasters.com/perfectly-pointed-tooltips-a-foundation.md",logo:"https://frontendmasters.com/favicon.ico",background:"rgba(188,75,52,0.2)"})),null,16),e(l,p(c({title:"Perfectly Pointed Tooltips: All Four Sides",desc:"Tooltips are a natural fit for the abilities of Anchor Positioning, which can help place them on *any* side or corner. It does make dealing with the pointer extra tricky though.",link:"/frontendmasters.com/perfectly-pointed-tooltips-all-four-sides.md",logo:"https://frontendmasters.com/favicon.ico",background:"rgba(188,75,52,0.2)"})),null,16),e(l,p(c({title:"Perfectly Pointed Tooltips: To The Corners",desc:"With our foundation in positioning and flipping tooltips with anchors, and making pointer tails, we're going to get extra tricky and point them diagonally.",link:"/frontendmasters.com/perfectly-pointed-tooltips-to-the-corners.md",logo:"https://frontendmasters.com/favicon.ico",background:"rgba(188,75,52,0.2)"})),null,16)]),b(" TODO: add ARTICLE CARD "),e(l,p(c({title:"Perfectly Pointed Tooltips: A Foundation",desc:"The Anchor Positioning API in CSS is very powerful. This is the beginning of a series where we understand it through the perfect use-case: tooltips.",link:"https://chanhi2000.github.io/bookshelf/frontendmasters.com/perfectly-pointed-tooltips-a-foundation.html",logo:"https://frontendmasters.com/favicon.ico",background:"rgba(188,75,52,0.2)"})),null,16)])}const D=g(y,[["render",z]]),M=JSON.parse('{"path":"/frontendmasters.com/perfectly-pointed-tooltips-a-foundation.html","title":"Perfectly Pointed Tooltips: A Foundation","lang":"en-US","frontmatter":{"lang":"en-US","title":"Perfectly Pointed Tooltips: A Foundation","description":"Article(s) > Perfectly Pointed Tooltips: A Foundation","icon":"fa-brands fa-css3-alt","category":["CSS","Article(s)"],"tag":["blog","frontendmasters.com","css"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Perfectly Pointed Tooltips: A Foundation\\",\\"image\\":[\\"https://chanhi2000.github.io/bookshelf/css-tip.com/position-area.md\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/10/SW5hUi3K.png?resize=1024%2C228&ssl=1\\",\\"https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2025/10/aAotEaeC.png?resize=940%2C230&ssl=1\\"],\\"datePublished\\":\\"2025-10-28T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Temani Afif\\",\\"url\\":\\"https://frontendmasters.com/blog/author/temaniafif/\\"}]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/frontendmasters.com/perfectly-pointed-tooltips-a-foundation.html"}],["meta",{"property":"og:site_name","content":"üìöBookshelf"}],["meta",{"property":"og:title","content":"Perfectly Pointed Tooltips: A Foundation"}],["meta",{"property":"og:description","content":"Article(s) > Perfectly Pointed Tooltips: A Foundation"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/7514"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/7514"}],["meta",{"name":"twitter:image:alt","content":"Perfectly Pointed Tooltips: A Foundation"}],["meta",{"property":"article:author","content":"Temani Afif"}],["meta",{"property":"article:tag","content":"css"}],["meta",{"property":"article:tag","content":"frontendmasters.com"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:published_time","content":"2025-10-28T00:00:00.000Z"}],[{"meta":null},{"property":"og:title","content":"Article(s) > Perfectly Pointed Tooltips: A Foundation"},{"property":"og:description","content":"Perfectly Pointed Tooltips: A Foundation"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/frontendmasters.com/perfectly-pointed-tooltips-a-foundation.html"}]],"prev":"/programming/css/articles/README.md","date":"2025-10-28T00:00:00.000Z","isOriginal":false,"author":[{"name":"Temani Afif","url":"https://frontendmasters.com/blog/author/temaniafif/"}],"cover":"https://frontendmasters.com/blog/wp-json/social-image-generator/v1/image/7514"},"git":{},"readingTime":{"minutes":11.6,"words":3480},"filePathRelative":"frontendmasters.com/perfectly-pointed-tooltips-a-foundation.md","copyright":{"author":"Temani Afif"}}');export{D as comp,M as data};
