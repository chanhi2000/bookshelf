<!doctype html>
<html lang="en-US" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.99" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Understanding Cursor Pagination and Why It's So Fast (Deep Dive)","image":["https://milanjovanovic.tech/blog-covers/mnw_129.png"],"datePublished":"2025-02-15T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"Milan Jovanoviƒá"}]}</script><meta property="og:url" content="https://chanhi2000.github.io/bookshelf/milanjovanovic.tech/understanding-cursor-pagination-and-why-its-so-fast-deep-dive.html"><meta property="og:site_name" content="üìöBookshelf"><meta property="og:title" content="Understanding Cursor Pagination and Why It's So Fast (Deep Dive)"><meta property="og:description" content="Article(s) > Understanding Cursor Pagination and Why It's So Fast (Deep Dive)"><meta property="og:type" content="article"><meta property="og:image" content="https://milanjovanovic.tech/blog-covers/mnw_129.png"><meta property="og:locale" content="en-US"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:src" content="https://milanjovanovic.tech/blog-covers/mnw_129.png"><meta name="twitter:image:alt" content="Understanding Cursor Pagination and Why It's So Fast (Deep Dive)"><meta property="article:author" content="Milan Jovanoviƒá"><meta property="article:tag" content="postgresql"><meta property="article:tag" content="postgres"><meta property="article:tag" content="dotnet"><meta property="article:tag" content="csharp"><meta property="article:tag" content="c#"><meta property="article:tag" content="cs"><meta property="article:tag" content="milanjovanovic.tech"><meta property="article:tag" content="blog"><meta property="article:published_time" content="2025-02-15T00:00:00.000Z"><link rel="icon" href="/bookshelf/assets/icon/favicon.svg"><title>Understanding Cursor Pagination and Why It's So Fast (Deep Dive) | üìöBookshelf</title><meta name="description" content="Article(s) > Understanding Cursor Pagination and Why It's So Fast (Deep Dive)">
    <link rel="preload" href="/bookshelf/assets/style-Bhb-QcDa.css" as="style"><link rel="stylesheet" href="/bookshelf/assets/style-Bhb-QcDa.css">
    
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/bookshelf/" aria-label="Take me home"><img class="vp-nav-logo" src="/bookshelf/assets/icon/favicon.svg" alt><!----><span class="vp-site-name hide-in-pad">üìöBookshelf</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/bookshelf/news.html" aria-label><!--[--><i class="vp-icon fas fa-rss" sizing="height"></i><!--]--><!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-keyboard" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/hackingwithswift.com/" aria-label="hackingwithswift.com"><!--[--><img class="vp-icon" src="https://hackingwithswift.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->hackingwithswift.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fcc/" aria-label="freecodecamp.org"><!--[--><img class="vp-icon" src="https://cdn.freecodecamp.org/universal/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->freecodecamp.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kodeco.com/" aria-label="kodeco.com"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->kodeco.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.kotzilla.io/" aria-label="blog.kotzilla.io"><!--[--><img class="vp-icon" src="https://blog.kotzilla.io/hubfs/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.kotzilla.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kt.academy/" aria-label="kt.academy"><!--[--><img class="vp-icon" src="https://kt.academy/logo.png" alt aria-hidden no-view sizing="both"><!--]-->kt.academy<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/droidcon.com/" aria-label="droidcon.com"><!--[--><img class="vp-icon" src="https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png" alt aria-hidden no-view sizing="both"><!--]-->droidcon.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/outcomeschool.com/" aria-label="outcomeschool.com"><!--[--><img class="vp-icon" src="https://outcomeschool.com/static/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->outcomeschool.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/frontendmasters.com/" aria-label="frontendmasters.com"><!--[--><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->frontendmasters.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tricks.com/" aria-label="css-tricks.com"><!--[--><img class="vp-icon" src="https://css-tricks.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->css-tricks.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="smashingmagazine.com"><!--[--><img class="vp-icon" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->smashingmagazine.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="oddbird.net"><!--[--><img class="vp-icon" src="https://oddbird.net/safari-pinned-tab.svg" alt aria-hidden no-view sizing="both"><!--]-->oddbird.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/zeroheight.com/" aria-label="zeroheight.com"><!--[--><img class="vp-icon" src="https://zeroheight.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->zeroheight.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/typescript.tv/" aria-label="typescript.tv"><!--[--><img class="vp-icon" src="https://typescript.tv/_astro/android-chrome-192x192.BhQ8hcWh.png" alt aria-hidden no-view sizing="both"><!--]-->typescript.tv<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.logrocket.com/" aria-label="blog.logrocket.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.logrocket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/realpython.com/" aria-label="realpython.com"><!--[--><img class="vp-icon" src="https://realpython.com/static/favicon.68cbf4197b0c.png" alt aria-hidden no-view sizing="both"><!--]-->realpython.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/digitalocean.com/" aria-label="digitalocean.com"><!--[--><img class="vp-icon" src="https://digitalocean.com/_next/static/media/favicon.594d6067.ico" alt aria-hidden no-view sizing="both"><!--]-->digitalocean.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/antonioleiva.com/" aria-label="antonioleiva.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/antonioleiva.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->antonioleiva.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/johnnyreilly.com/" aria-label="johnnyreilly.com"><!--[--><img class="vp-icon" src="https://johnnyreilly.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->johnnyreilly.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/code-maze.com/" aria-label="code-maze.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/code-maze.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->code-maze.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/bookshelf/milanjovanovic.tech/" aria-label="milanjovanovic.tech"><!--[--><img class="vp-icon" src="https://milanjovanovic.tech/profile_favicon.png" alt aria-hidden no-view sizing="both"><!--]-->milanjovanovic.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/shopify.engineering/" aria-label="shopify.engineering"><!--[--><img class="vp-icon" src="https://cdn.shopify.com/static/shopify-favicon.png" alt aria-hidden no-view sizing="both"><!--]-->shopify.engineering<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devtoolstips.org/" aria-label="devtoolstips.org"><!--[--><img class="vp-icon" src="https://devtoolstips.org/assets/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devtoolstips.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/piccalil.li/" aria-label="piccalil.li"><!--[--><img class="vp-icon" src="https://piccalil.li/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->piccalil.li<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/sitepoint.com/" aria-label="sitepoint.com"><!--[--><img class="vp-icon" src="https://sitepoint.com/favicons/512x512.png" alt aria-hidden no-view sizing="both"><!--]-->sitepoint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/event-driven.io/" aria-label="event-driven.io"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/event-driven.io/favicon.jfif" alt aria-hidden no-view sizing="both"><!--]-->event-driven.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/packagemain.tech/" aria-label="packagemain.tech"><!--[--><img class="vp-icon" src="https://substack-post-media.s3.amazonaws.com/public/images/2ea54e25-eaa6-4630-bfc0-10b8cfdce894/apple-touch-icon-1024x1024.png" alt aria-hidden no-view sizing="both"><!--]-->packagemain.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/gosolve.io/" aria-label="gosolve.io"><!--[--><img class="vp-icon" src="https://gosolve.io/wp-content/uploads/2022/03/cropped-ikona1-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->gosolve.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/bram.us/" aria-label="bram.us"><!--[--><img class="vp-icon" src="https://bram.us/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->bram.us<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/una.im/" aria-label="una.im"><!--[--><img class="vp-icon" src="https://una.im/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->una.im<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/joshwcomeau.com/" aria-label="joshwcomeau.com"><!--[--><img class="vp-icon" src="https://joshwcomeau.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->joshwcomeau.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tip.com/" aria-label="css-tip.com"><!--[--><img class="vp-icon" src="https://css-tip.com/img/fav.png" alt aria-hidden no-view sizing="both"><!--]-->css-tip.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/nerdy.dev/" aria-label="nerdy.dev"><!--[--><img class="vp-icon" src="https://nerdy.dev/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->nerdy.dev<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/towardsdatascience.com/" aria-label="towardsdatascience.com"><!--[--><img class="vp-icon" src="https://cdn-images-1.medium.com/v2/resize:fill:128:128/1*VzTUkfeGymHP4Bvav-T-lA.png" alt aria-hidden no-view sizing="both"><!--]-->towardsdatascience.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/douggregor.net/" aria-label="douggregor.net"><!--[--><i class="vp-icon fas fa-globe" sizing="both"></i><!--]-->douggregor.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/d2.naver.com/" aria-label="d2.naver.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/d2.naver.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->d2.naver.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakao.com/" aria-label="tech.kakao.com"><!--[--><img class="vp-icon" src="https://www.kakaocorp.com/page/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakao.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakaopay.com/" aria-label="tech.kakaopay.com"><!--[--><img class="vp-icon" src="https://tech.kakaopay.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakaopay.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fe-developers.kakaoent.com/" aria-label="fe-developers.kakaoent.com"><!--[--><img class="vp-icon" src="https://fe-developers.kakaoent.com/favicon-32x32.png?v=44803cb16c1e2debd3984cf2e8cb2ded" alt aria-hidden no-view sizing="both"><!--]-->fe-developers.kakaoent.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/yozm.wishket.com/" aria-label="yozm.wishket.com"><!--[--><img class="vp-icon" src="https://yozm.wishket.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->yozm.wishket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/popit.kr/" aria-label="popit.kr"><!--[--><img class="vp-icon" src="https://popit.kr/wp-content/uploads/2016/08/favicon_32x32.png" alt aria-hidden no-view sizing="both"><!--]-->popit.kr<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devkuma.com/" aria-label="devkuma.com"><!--[--><img class="vp-icon" src="https://devkuma.com/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devkuma.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.gangnamunni.com/" aria-label="blog.gangnamunni.com"><!--[--><img class="vp-icon" src="https://blog.gangnamunni.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->blog.gangnamunni.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/codingeverybody.kr/" aria-label="codingeverybody.kr"><!--[--><img class="vp-icon" src="https://codingeverybody.kr/wp-content/uploads/cropped-favicon-origin-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->codingeverybody.kr<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-network-wired" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tecmint.com/" aria-label="tecmint.com"><!--[--><img class="vp-icon" src="https://tecmint.com/wp-content/uploads/2020/07/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tecmint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/docker.com/" aria-label="docker.com"><!--[--><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->docker.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/learnkube.com/" aria-label="learnkube.com"><!--[--><img class="vp-icon" src="https://static.learnkube.com/f7e5160d4744cf05c46161170b5c11c9.svg" alt aria-hidden no-view sizing="both"><!--]-->learnkube.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/itsfoss.com/" aria-label="itsfoss.com"><!--[--><img class="vp-icon" src="https://itsfoss.com/content/images/size/w256h256/2022/12/android-chrome-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->itsfoss.com<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/chanhi2000/bookshelf" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><!----></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="vp-icon" src="https://milanjovanovic.tech/profile_favicon.png" alt aria-hidden no-view sizing="both"><span class="vp-sidebar-title">milanjovanovic.tech</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2026</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">2025</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/how-to-build-a-high-performance-cache-without-external-libraries.html" aria-label="How to Build a High-Performance Cache Without External Libraries"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->How to Build a High-Performance Cache Without External Libraries<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/server-sent-events-in-aspnetcore-and-dotnet-10.html" aria-label="Server-Sent Events in ASP.NET Core and .NET 10"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Server-Sent Events in ASP.NET Core and .NET 10<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/the-new-slnx-solution-format-migration-guide.html" aria-label="The New .slnx Solution Format (migration guide)"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->The New .slnx Solution Format (migration guide)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/dbcontext-is-not-thread-safe-parallelizing-ef-core-queries-the-right-way.html" aria-label="DbContext is Not Thread-Safe: Parallelizing EF Core Queries the Right Way"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->DbContext is Not Thread-Safe: Parallelizing EF Core Queries the Right Way<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/vertical-slice-architecture-where-does-the-shared-logic-live.html" aria-label="Vertical Slice Architecture: Where Does the Shared Logic Live?"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Vertical Slice Architecture: Where Does the Shared Logic Live?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/the-false-comfort-of-the-happy-path-decoupling-your-services.html" aria-label="The False Comfort of the ‚ÄúHappy Path‚Äù: Decoupling Your Services"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->The False Comfort of the ‚ÄúHappy Path‚Äù: Decoupling Your Services<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/exploring-csharp-file-based-apps-in-dotnet-10.html" aria-label="Exploring C# File-based Apps in .NET 10"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Exploring C# File-based Apps in .NET 10<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/the-idempotent-consumer-pattern-in-dotnet-and-why-you-need-it.html" aria-label="The Idempotent Consumer Pattern in .NET (And Why You Need It)"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->The Idempotent Consumer Pattern in .NET (And Why You Need It)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/whats-new-in-ef-core-10-leftjoin-and-rightjoin-operators-in-linq.html" aria-label="What&#39;s New in EF Core 10: LeftJoin and RightJoin Operators in LINQ"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->What&#39;s New in EF Core 10: LeftJoin and RightJoin Operators in LINQ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/the-interview-question-that-changed-how-i-think-about-system-design.html" aria-label="The Interview Question That Changed How I Think About System Design"><!--[--><i class="vp-icon fas fa-pen-ruler" sizing="both"></i><!--]-->The Interview Question That Changed How I Think About System Design<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/6-steps-for-setting-up-a-new-dotnet-project-the-right-way.html" aria-label="6 Steps for Setting Up a New .NET Project the Right Way"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->6 Steps for Setting Up a New .NET Project the Right Way<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/building-fast-serverless-apis-with-minimal-apis-on-aws-lambda.html" aria-label="Building Fast Serverless APIs With Minimal APIs on AWS Lambda"><!--[--><i class="vp-icon fa-brands fa-aws" sizing="both"></i><!--]-->Building Fast Serverless APIs With Minimal APIs on AWS Lambda<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/using-stored-procedures-and-functions-with-ef-core-and-postgresql.html" aria-label="Using Stored Procedures and Functions With EF Core and PostgreSQL"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Using Stored Procedures and Functions With EF Core and PostgreSQL<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/building-secure-apis-with-role-based-access-control-in-aspnetcore.html" aria-label="Building Secure APIs with Role-Based Access Control in ASP.NET Core"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Building Secure APIs with Role-Based Access Control in ASP.NET Core<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/distributed-locking-in-dotnet-coordinating-work-across-multiple-instances.html" aria-label="Distributed Locking in .NET: Coordinating Work Across Multiple Instances"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Distributed Locking in .NET: Coordinating Work Across Multiple Instances<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/building-semantic-search-with-amazon-s3-vectors.html" aria-label="Building Semantic Search with Amazon S3 Vectors"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Building Semantic Search with Amazon S3 Vectors<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/standalone-aspire-dashboard-setup-for-distributed-dotnet-applications.html" aria-label="Standalone Aspire Dashboard Setup for Distributed .NET Applications"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Standalone Aspire Dashboard Setup for Distributed .NET Applications<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/the-real-cost-of-abstractions-in-dotnet.html" aria-label="The Real Cost of Abstractions in .NET"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->The Real Cost of Abstractions in .NET<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/building-generative-ai-applications-with-github-models-and-dotnet-aspire.html" aria-label="Building Generative AI Applications With GitHub Models and .NET Aspire"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Building Generative AI Applications With GitHub Models and .NET Aspire<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/the-5-most-common-rest-api-design-mistakes-and-how-to-avoid-them.html" aria-label="The 5 Most Common REST API Design Mistakes (and How to Avoid Them)"><!--[--><i class="vp-icon fas fa-pen-ruler" sizing="both"></i><!--]-->The 5 Most Common REST API Design Mistakes (and How to Avoid Them)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/how-to-keep-your-data-boundaries-intact-in-a-modular-monolith.html" aria-label="How to Keep Your Data Boundaries Intact in a Modular Monolith"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->How to Keep Your Data Boundaries Intact in a Modular Monolith<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/named-query-filters-in-ef-10-multiple-query-filters-per-entity.html" aria-label="Named Query Filters in EF 10 (multiple query filters per entity)"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Named Query Filters in EF 10 (multiple query filters per entity)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/pdf-reporting-in-dotnet-with-html-templates-and-puppeteersharp.html" aria-label="PDF Reporting in .NET With HTML Templates and PuppeteerSharp (and it&#39;s free)"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->PDF Reporting in .NET With HTML Templates and PuppeteerSharp (and it&#39;s free)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/global-error-handling-in-aspnetcore-from-middleware-to-modern-handlers.html" aria-label="Global Error Handling in ASP.NET Core: From Middleware to Modern Handlers"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Global Error Handling in ASP.NET Core: From Middleware to Modern Handlers<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/using-dotnet-aspire-with-the-docker-publisher.html" aria-label="Using .NET Aspire With the Docker Publisher"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Using .NET Aspire With the Docker Publisher<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/testcontainers-best-practices-dotnet-integration-testing.html" aria-label="Testcontainers Best Practices for .NET Integration Testing"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Testcontainers Best Practices for .NET Integration Testing<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/monitoring-dotnet-applications-with-opentelemetry-and-grafana.html" aria-label="Monitoring .NET Applications with OpenTelemetry and Grafana"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Monitoring .NET Applications with OpenTelemetry and Grafana<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/run-csharp-scripts-with-dotnet-run-app-no-project-files-needed.html" aria-label="Run C# Scripts With dotnet run app.cs (No Project Files Needed)"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Run C# Scripts With dotnet run app.cs (No Project Files Needed)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/debunking-the-filter-early-join-later-sql-performance-myth.html" aria-label="Debunking the ‚ÄúFilter Early, JOIN Later‚Äù SQL Performance Myth"><!--[--><i class="vp-icon fas fa-database" sizing="both"></i><!--]-->Debunking the ‚ÄúFilter Early, JOIN Later‚Äù SQL Performance Myth<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/yarp-vs-nginx-a-quick-performance-comparison.html" aria-label="YARP vs Nginx - A Quick Performance Comparison"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->YARP vs Nginx - A Quick Performance Comparison<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/building-a-custom-domain-events-dispatcher-in-dotnet.html" aria-label="Building a Custom Domain Events Dispatcher in .NET"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Building a Custom Domain Events Dispatcher in .NET<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/cqrs-pattern-the-way-it-should-have-been-from-the-start.html" aria-label="CQRS Pattern the Way It Should&#39;ve Been From the Start"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->CQRS Pattern the Way It Should&#39;ve Been From the Start<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/from-anemic-models-to-behavior-driven-models-a-practical-ddd-refactor-in-csharp.html" aria-label="From Anemic Models to Behavior-Driven Models: A Practical DDD Refactor in C#"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->From Anemic Models to Behavior-Driven Models: A Practical DDD Refactor in C#<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/event-driven-architecture-in-dotnet-with-rabbitmq.html" aria-label="Event-Driven Architecture in .NET with RabbitMQ"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Event-Driven Architecture in .NET with RabbitMQ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/refactoring-overgrown-bounded-contexts-in-modular-monoliths.html" aria-label="Refactoring Overgrown Bounded Contexts in Modular Monoliths"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Refactoring Overgrown Bounded Contexts in Modular Monoliths<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/understanding-microservices-core-concepts-and-benefits.html" aria-label="Understanding Microservices: Core Concepts and Benefits"><!--[--><i class="vp-icon fas fa-pen-ruler" sizing="both"></i><!--]-->Understanding Microservices: Core Concepts and Benefits<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/what-is-vector-search-a-concise-guide.html" aria-label="What is Vector Search? A Concise Guide"><!--[--><i class="vp-icon fas fa-language" sizing="both"></i><!--]-->What is Vector Search? A Concise Guide<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/mediatr-and-masstransit-going-commercial-what-this-means-for-you.html" aria-label="MediatR and MassTransit Going Commercial: What This Means For You"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->MediatR and MassTransit Going Commercial: What This Means For You<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/how-dotnet-aspire-simplifies-service-discovery.html" aria-label="How .NET Aspire Simplifies Service Discovery"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->How .NET Aspire Simplifies Service Discovery<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/options-pattern-validation-in-aspnetcore-with-fluentvalidation.html" aria-label="Options Pattern Validation in ASP.NET Core With FluentValidation"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Options Pattern Validation in ASP.NET Core With FluentValidation<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/streamlining-dotnet-9-deployment-with-github-actions-and-azure.html" aria-label="Streamlining .NET 9 Deployment With GitHub Actions and Azure"><!--[--><i class="vp-icon iconfont icon-github" sizing="both"></i><!--]-->Streamlining .NET 9 Deployment With GitHub Actions and Azure<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/better-request-tracing-with-user-context-in-asp-net-core.html" aria-label="Better Request Tracing with User Context in ASP.NET Core"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Better Request Tracing with User Context in ASP.NET Core<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/introduction-to-dapr-for-dotnet-developers.html" aria-label="Introduction to Dapr for .NET Developers"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Introduction to Dapr for .NET Developers<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/building-a-better-mediatr-publisher-with-channels-and-why-you-shouldnt.html" aria-label="Building a Better MediatR Publisher With Channels (and why you shouldn&#39;t)"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Building a Better MediatR Publisher With Channels (and why you shouldn&#39;t)<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/bookshelf/milanjovanovic.tech/understanding-cursor-pagination-and-why-its-so-fast-deep-dive.html" aria-label="Understanding Cursor Pagination and Why It&#39;s So Fast (Deep Dive)"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Understanding Cursor Pagination and Why It&#39;s So Fast (Deep Dive)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/stop-conflating-cqrs-and-mediatr.html" aria-label="Stop Conflating CQRS and MediatR"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Stop Conflating CQRS and MediatR<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/overriding-default-http-resilience-handlers-in-dotnet.html" aria-label="Overriding Default HTTP Resilience Handlers in .NET"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Overriding Default HTTP Resilience Handlers in .NET<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/implementing-aes-encryption-with-csharp.html" aria-label="Implementing AES Encryption With C#"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Implementing AES Encryption With C#<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/scaling-monoliths-a-practical-guide-for-growing-systems.html" aria-label="Scaling Monoliths: A Practical Guide for Growing Systems"><!--[--><i class="vp-icon fas fa-pen-ruler" sizing="both"></i><!--]-->Scaling Monoliths: A Practical Guide for Growing Systems<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/working-with-llms-in-dotnet-using-microsoft-extensions-ai.html" aria-label="Working with LLMs in .NET using Microsoft.Extensions.AI"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Working with LLMs in .NET using Microsoft.Extensions.AI<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/milanjovanovic.tech/unit-testing-clean-architecture-use-cases.html" aria-label="Unit Testing Clean Architecture Use Cases"><!--[--><i class="vp-icon iconfont icon-csharp" sizing="both"></i><!--]-->Unit Testing Clean Architecture Use Cases<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2024</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2023</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2022</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><div class="page-cover"><img src="https://milanjovanovic.tech/blog-covers/mnw_129.png" alt no-view></div><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon iconfont icon-csharp" sizing="height"></i>Understanding Cursor Pagination and Why It&#39;s So Fast (Deep Dive)</h1><div class="page-info"><span class="page-author-info" aria-label="Authorüñä" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Milan Jovanoviƒá</span></span><span property="author" content="Milan Jovanoviƒá"></span></span><!----><span class="page-date-info" aria-label="Writing DateüìÖ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2/15/25</span><meta property="datePublished" content="2025-02-15T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time‚åõ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 9 min</span><meta property="timeRequired" content="PT9M"></span><span class="page-category-info" aria-label="Categoryüåà" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color0" role>C#</span><span class="page-category-item color3" role>DotNet</span><span class="page-category-item color2" role>Postgres</span><span class="page-category-item color8" role>Article(s)</span><!--]--><meta property="articleSection" content="C#,DotNet,Postgres,Article(s)"></span><span class="page-tag-info" aria-label="Tagüè∑" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8" role>blog</span><span class="page-tag-item color5" role>milanjovanovic.tech</span><span class="page-tag-item color5" role>cs</span><span class="page-tag-item color4" role>c#</span><span class="page-tag-item color2" role>csharp</span><span class="page-tag-item color0" role>dotnet</span><span class="page-tag-item color7" role>postgres</span><span class="page-tag-item color2" role>postgresql</span><!--]--><meta property="keywords" content="blog,milanjovanovic.tech,cs,c#,csharp,dotnet,postgres,postgresql"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´" tabindex="-1"><a class="header-anchor" href="#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"><span>Understanding Cursor Pagination and Why It&#39;s So Fast (Deep Dive) Í¥ÄÎ†®</span></a></h1><a class="route-link vp-card" href="/bookshelf/programming/cs/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="/bookshelf/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">C# > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><a class="route-link vp-card" href="/bookshelf/data-science/postgres/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="https://chanhi2000.github.io/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">PostgreSQL > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><nav class="table-of-contents"><ul><li><a aria-current="page" href="/bookshelf/milanjovanovic.tech/understanding-cursor-pagination-and-why-its-so-fast-deep-dive.html#database-schema" class="router-link-active router-link-exact-active">Database Schema</a></li><li><a aria-current="page" href="/bookshelf/milanjovanovic.tech/understanding-cursor-pagination-and-why-its-so-fast-deep-dive.html#offset-pagination-the-traditional-approach" class="router-link-active router-link-exact-active">Offset Pagination: The Traditional Approach</a><ul><li><a aria-current="page" href="/bookshelf/milanjovanovic.tech/understanding-cursor-pagination-and-why-its-so-fast-deep-dive.html#limitations-of-offset-pagination" class="router-link-active router-link-exact-active">Limitations of Offset Pagination</a></li></ul></li><li><a aria-current="page" href="/bookshelf/milanjovanovic.tech/understanding-cursor-pagination-and-why-its-so-fast-deep-dive.html#cursor-based-pagination-a-faster-approach" class="router-link-active router-link-exact-active">Cursor-Based Pagination: A Faster Approach</a><ul><li><a aria-current="page" href="/bookshelf/milanjovanovic.tech/understanding-cursor-pagination-and-why-its-so-fast-deep-dive.html#limitations-of-cursor-pagination" class="router-link-active router-link-exact-active">Limitations of Cursor Pagination</a></li></ul></li><li><a aria-current="page" href="/bookshelf/milanjovanovic.tech/understanding-cursor-pagination-and-why-its-so-fast-deep-dive.html#examining-the-sql-execution-plans" class="router-link-active router-link-exact-active">Examining the SQL Execution Plans</a></li><li><a aria-current="page" href="/bookshelf/milanjovanovic.tech/understanding-cursor-pagination-and-why-its-so-fast-deep-dive.html#adding-indexes-for-cursor-pagination" class="router-link-active router-link-exact-active">Adding Indexes for Cursor Pagination</a></li><li><a aria-current="page" href="/bookshelf/milanjovanovic.tech/understanding-cursor-pagination-and-why-its-so-fast-deep-dive.html#encoding-the-cursor" class="router-link-active router-link-exact-active">Encoding the Cursor</a></li><li><a aria-current="page" href="/bookshelf/milanjovanovic.tech/understanding-cursor-pagination-and-why-its-so-fast-deep-dive.html#summary" class="router-link-active router-link-exact-active">Summary</a></li></ul></nav><hr><div class="vp-site-info" data-name="Understanding Cursor Pagination and Why It&#39;s So Fast (Deep Dive)"><a class="vp-site-info-navigator no-external-link-icon" title="Understanding Cursor Pagination and Why It&#39;s So Fast (Deep Dive)" href="https://milanjovanovic.tech/blog/understanding-cursor-pagination-and-why-its-so-fast-deep-dive" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://milanjovanovic.tech/blog-covers/mnw_129.png) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://milanjovanovic.tech/profile_favicon.png" alt loading="lazy" no-view><div class="vp-site-info-name">Understanding Cursor Pagination and Why It&#39;s So Fast (Deep Dive)</div><div class="vp-site-info-desc">While offset pagination is widely used, cursor-based pagination offers significant performance advantages - my tests show a 17x speedup when paginating through a million-record dataset in PostgreSQL. Let&#39;s take a deep dive into cursor pagination, compare it with offset pagination, and examine the SQL execution plans.</div></div><!----></div><p>Pagination is crucial for efficiently handling large datasets. While offset pagination is widely used and gets the job done, cursor-based pagination offers some interesting advantages for certain scenarios.</p><p>It&#39;s particularly valuable for real-time feeds, infinite scroll interfaces, and APIs where performance at scale matters - like social media timelines, activity logs, or event streams where users frequently page through large datasets.</p><p>Let&#39;s explore both approaches using a simple <code>UserNotes</code> table and see how they perform with a million records.</p><p>We&#39;ll look at the implementation details, compare query performance, and discuss where each approach makes the most sense.</p><p>I&#39;ve included real execution plans from <a href="https://postgresql.org" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-postgresql" sizing="height"></i>PostgreSQL</a> to demonstrate the significant performance differences between these approaches.</p><hr><h2 id="database-schema" tabindex="-1"><a class="header-anchor" href="#database-schema"><span>Database Schema</span></a></h2><p>I created a simple table to demonstrate pagination techniques. The table is seeded with <code>1,000,000</code> records for testing purposes, which should be enough to show the performance difference between offset and cursor pagination.</p><p>We&#39;ll use the following SQL schema for the examples:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> user_notes <span class="token punctuation">(</span></span>
<span class="line">    id uuid <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">    user_id uuid <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">    note <span class="token keyword">character</span> <span class="token keyword">varying</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">date</span> <span class="token keyword">date</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">CONSTRAINT</span> pk_user_notes <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>And here&#39;s the C# class representing the <code>UserNote</code> entity:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="UserNote.cs"><span>UserNote.cs</span></div><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserNote</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token return-type class-name">Guid</span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token return-type class-name">Guid</span> UserId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> Note <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token return-type class-name">DateOnly</span> Date <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>I will use PostgreSQL as the database, but the concepts also apply to other databases.</p><hr><h2 id="offset-pagination-the-traditional-approach" tabindex="-1"><a class="header-anchor" href="#offset-pagination-the-traditional-approach"><span>Offset Pagination: The Traditional Approach</span></a></h2><p><a href="https://learn.microsoft.com/en-us/ef/core/querying/pagination#offset-pagination" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-microsoft" sizing="height"></i>Offset pagination</a> uses <code>Skip</code> and <code>Take</code> operations. We <em>skip</em> a certain number of rows and <em>take</em> a fixed number of rows. These usually translate to <code>OFFSET</code> and <code>LIMIT</code> in SQL queries.</p><p>Here&#39;s an example of offset pagination in ASP.NET Core:</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line">app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/offset&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token class-name">AppDbContext</span> dbContext<span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name"><span class="token keyword">int</span></span> page <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name"><span class="token keyword">int</span></span> pageSize <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name">CancellationToken</span> cancellationToken <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>page <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> Results<span class="token punctuation">.</span><span class="token function">BadRequest</span><span class="token punctuation">(</span><span class="token string">&quot;Page must be greater than 0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>pageSize <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> Results<span class="token punctuation">.</span><span class="token function">BadRequest</span><span class="token punctuation">(</span><span class="token string">&quot;Page size must be greater than 0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>pageSize <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">return</span> Results<span class="token punctuation">.</span><span class="token function">BadRequest</span><span class="token punctuation">(</span><span class="token string">&quot;Page size must be less than or equal to 100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token class-name"><span class="token keyword">var</span></span> query <span class="token operator">=</span> dbContext<span class="token punctuation">.</span>UserNotes</span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">OrderByDescending</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Date<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">ThenByDescending</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Offset pagination typically counts the total number of items</span></span>
<span class="line">    <span class="token class-name"><span class="token keyword">var</span></span> totalCount <span class="token operator">=</span> <span class="token keyword">await</span> query<span class="token punctuation">.</span><span class="token function">CountAsync</span><span class="token punctuation">(</span>cancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name"><span class="token keyword">var</span></span> totalPages <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>Math<span class="token punctuation">.</span><span class="token function">Ceiling</span><span class="token punctuation">(</span>totalCount <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Skip and take the required number of items</span></span>
<span class="line">    <span class="token class-name"><span class="token keyword">var</span></span> items <span class="token operator">=</span> <span class="token keyword">await</span> query</span>
<span class="line highlighted">        <span class="token punctuation">.</span><span class="token function">Skip</span><span class="token punctuation">(</span><span class="token punctuation">(</span>page <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> pageSize<span class="token punctuation">)</span></span>
<span class="line highlighted">        <span class="token punctuation">.</span><span class="token function">Take</span><span class="token punctuation">(</span>pageSize<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">ToListAsync</span><span class="token punctuation">(</span>cancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> Results<span class="token punctuation">.</span><span class="token function">Ok</span><span class="token punctuation">(</span><span class="token keyword">new</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        Items <span class="token operator">=</span> items<span class="token punctuation">,</span></span>
<span class="line">        Page <span class="token operator">=</span> page<span class="token punctuation">,</span></span>
<span class="line">        PageSize <span class="token operator">=</span> pageSize<span class="token punctuation">,</span></span>
<span class="line">        TotalCount <span class="token operator">=</span> totalCount<span class="token punctuation">,</span></span>
<span class="line">        TotalPages <span class="token operator">=</span> totalPages<span class="token punctuation">,</span></span>
<span class="line">        HasNextPage <span class="token operator">=</span> page <span class="token operator">&lt;</span> totalPages<span class="token punctuation">,</span></span>
<span class="line">        HasPreviousPage <span class="token operator">=</span> page <span class="token operator">&gt;</span> <span class="token number">1</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that I&#39;m sorting the results by <code>Date</code> and <code>Id</code> in descending order. This ensures consistent results when paginating.</p><p>Here&#39;s the generated SQL for offset pagination:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token comment">-- This query is sent first</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>::<span class="token keyword">int</span> <span class="token keyword">FROM</span> user_notes <span class="token keyword">AS</span> u<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- Followed by the actual data query</span></span>
<span class="line"><span class="token keyword">SELECT</span> u<span class="token punctuation">.</span>id<span class="token punctuation">,</span> u<span class="token punctuation">.</span><span class="token keyword">date</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>note<span class="token punctuation">,</span> u<span class="token punctuation">.</span>user_id</span>
<span class="line"><span class="token keyword">FROM</span> user_notes <span class="token keyword">AS</span> u</span>
<span class="line"><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> u<span class="token punctuation">.</span><span class="token keyword">date</span> <span class="token keyword">DESC</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>id <span class="token keyword">DESC</span></span>
<span class="line"><span class="token keyword">LIMIT</span> <span class="token variable">@pageSize</span> <span class="token keyword">OFFSET</span> <span class="token variable">@offset</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="limitations-of-offset-pagination" tabindex="-1"><a class="header-anchor" href="#limitations-of-offset-pagination"><span>Limitations of Offset Pagination</span></a></h3><ol><li>Performance degrades as offset increases because the database must scan and discard all rows before the offset</li><li>Risk of missing or duplicating items when data changes between pages</li><li>Inconsistent results with concurrent updates</li></ol><hr><h2 id="cursor-based-pagination-a-faster-approach" tabindex="-1"><a class="header-anchor" href="#cursor-based-pagination-a-faster-approach"><span>Cursor-Based Pagination: A Faster Approach</span></a></h2><p><a href="https://learn.microsoft.com/en-us/ef/core/querying/pagination#keyset-pagination" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-microsoft" sizing="height"></i>Cursor pagination</a> uses a reference point (cursor) to fetch the next set of results. This reference point is typically a <strong>unique identifier</strong> or a combination of fields that define the sort order.</p><p>I&#39;ll use the <code>Date</code> and <code>Id</code> fields to create a cursor for our <code>UserNotes</code> table. The cursor is a composite of these two fields, allowing us to paginate efficiently.</p><p>Here&#39;s an example of cursor pagination in ASP.NET Core:</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line">app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/cursor&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token class-name">AppDbContext</span> dbContext<span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name">DateOnly<span class="token punctuation">?</span></span> date <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name">Guid<span class="token punctuation">?</span></span> lastId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name"><span class="token keyword">int</span></span> limit <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name">CancellationToken</span> cancellationToken <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>limit <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> Results<span class="token punctuation">.</span><span class="token function">BadRequest</span><span class="token punctuation">(</span><span class="token string">&quot;Limit must be greater than 0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>limit <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">return</span> Results<span class="token punctuation">.</span><span class="token function">BadRequest</span><span class="token punctuation">(</span><span class="token string">&quot;Limit must be less than or equal to 100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token class-name"><span class="token keyword">var</span></span> query <span class="token operator">=</span> dbContext<span class="token punctuation">.</span>UserNotes<span class="token punctuation">.</span><span class="token function">AsQueryable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>date <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> lastId <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// Use the cursor to fetch the next set of results</span></span>
<span class="line">        <span class="token comment">// If we were sorting in ASC order, we&#39;d use &gt; instead of &lt;</span></span>
<span class="line highlighted">        query <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Date <span class="token operator">&lt;</span> date <span class="token operator">||</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>Date <span class="token operator">==</span> date <span class="token operator">&amp;&amp;</span> x<span class="token punctuation">.</span>Id <span class="token operator">&lt;=</span> lastId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Fetch the items and determine if there are more</span></span>
<span class="line">    <span class="token class-name"><span class="token keyword">var</span></span> items <span class="token operator">=</span> <span class="token keyword">await</span> query</span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">OrderByDescending</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Date<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">ThenByDescending</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Id<span class="token punctuation">)</span></span>
<span class="line highlighted">        <span class="token punctuation">.</span><span class="token function">Take</span><span class="token punctuation">(</span>limit <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">ToListAsync</span><span class="token punctuation">(</span>cancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Extract the cursor and ID for the next page</span></span>
<span class="line">    <span class="token class-name"><span class="token keyword">bool</span></span> hasMore <span class="token operator">=</span> items<span class="token punctuation">.</span>Count <span class="token operator">&gt;</span> limit<span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">DateOnly<span class="token punctuation">?</span></span> nextDate <span class="token operator">=</span> hasMore <span class="token punctuation">?</span> items<span class="token punctuation">[</span><span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Date <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">Guid<span class="token punctuation">?</span></span> nextLastId <span class="token operator">=</span> hasMore <span class="token punctuation">?</span> items<span class="token punctuation">[</span><span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Id <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Remove the extra item before returning results</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>hasMore<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        items<span class="token punctuation">.</span><span class="token function">RemoveAt</span><span class="token punctuation">(</span>items<span class="token punctuation">.</span>Count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> Results<span class="token punctuation">.</span><span class="token function">Ok</span><span class="token punctuation">(</span><span class="token keyword">new</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        Items <span class="token operator">=</span> items<span class="token punctuation">,</span></span>
<span class="line">        NextDate <span class="token operator">=</span> nextDate<span class="token punctuation">,</span></span>
<span class="line">        NextLastId <span class="token operator">=</span> nextLastId<span class="token punctuation">,</span></span>
<span class="line">        HasMore <span class="token operator">=</span> hasMore</span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The sort order is the same as in the offset pagination example. However, the sort order is critical for consistent results with cursor pagination. Because the <code>Date</code> isn&#39;t a unique value in our table, we use the <code>Id</code> field to handle ties. This ensures that we don&#39;t miss or duplicate items when paginating.</p><p>Here&#39;s the generated SQL for cursor pagination:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">SELECT</span> u<span class="token punctuation">.</span>id<span class="token punctuation">,</span> u<span class="token punctuation">.</span><span class="token keyword">date</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>note<span class="token punctuation">,</span> u<span class="token punctuation">.</span>user_id</span>
<span class="line"><span class="token keyword">FROM</span> user_notes <span class="token keyword">AS</span> u</span>
<span class="line"><span class="token keyword">WHERE</span> u<span class="token punctuation">.</span><span class="token keyword">date</span> <span class="token operator">&lt;</span> <span class="token variable">@date</span> <span class="token operator">OR</span> <span class="token punctuation">(</span>u<span class="token punctuation">.</span><span class="token keyword">date</span> <span class="token operator">=</span> <span class="token variable">@date</span> <span class="token operator">AND</span> u<span class="token punctuation">.</span>id <span class="token operator">&lt;=</span> <span class="token variable">@lastId</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> u<span class="token punctuation">.</span><span class="token keyword">date</span> <span class="token keyword">DESC</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>id <span class="token keyword">DESC</span></span>
<span class="line"><span class="token keyword">LIMIT</span> <span class="token variable">@limit</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that there&#39;s no <code>OFFSET</code> in the query. We&#39;re directly seeking the rows based on the cursor, which is more efficient than offset pagination.</p><p>The <code>COUNT</code> query is omitted in cursor pagination because we&#39;re not counting the total number of items. This can be a limitation if you need to display the total number of pages upfront. However, the performance benefits of cursor pagination often outweigh this limitation.</p><h3 id="limitations-of-cursor-pagination" tabindex="-1"><a class="header-anchor" href="#limitations-of-cursor-pagination"><span>Limitations of Cursor Pagination</span></a></h3><ol><li>If users need to change sort fields dynamically, cursor pagination becomes significantly more complicated since the cursor must incorporate all sort conditions</li><li>Users can&#39;t jump to a specific page number - they must traverse sequentially through the pages</li><li>More complex to implement correctly compared to offset pagination, especially when handling ties and ensuring stable ordering</li></ol><hr><h2 id="examining-the-sql-execution-plans" tabindex="-1"><a class="header-anchor" href="#examining-the-sql-execution-plans"><span>Examining the SQL Execution Plans</span></a></h2><p>I wanted to compare the execution plans for offset and cursor pagination. I used the <code>EXPLAIN ANALYZE</code> command in PostgreSQL to see the <a href="https://postgresql.org/docs/current/using-explain.html" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-postgresql" sizing="height"></i>query plans</a>.</p><p>Here&#39;s the offset pagination query:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">SELECT</span> u<span class="token punctuation">.</span>id<span class="token punctuation">,</span> u<span class="token punctuation">.</span><span class="token keyword">date</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>note<span class="token punctuation">,</span> u<span class="token punctuation">.</span>user_id</span>
<span class="line"><span class="token keyword">FROM</span> user_notes <span class="token keyword">AS</span> u</span>
<span class="line"><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> u<span class="token punctuation">.</span><span class="token keyword">date</span> <span class="token keyword">DESC</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>id <span class="token keyword">DESC</span></span>
<span class="line"><span class="token keyword">LIMIT</span> <span class="token number">1000</span> <span class="token keyword">OFFSET</span> <span class="token number">900000</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>I&#39;m intentionally skipping <code>900,000</code> rows to exaggerate the performance impact. After that, we fetch the next <code>1,000</code> rows.</p><p>Here&#39;s the query plan for offset pagination:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">EXPLAIN</span> <span class="token keyword">ANALYZE</span> <span class="token keyword">SELECT</span> u<span class="token punctuation">.</span>id<span class="token punctuation">,</span> u<span class="token punctuation">.</span><span class="token keyword">date</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>note<span class="token punctuation">,</span> u<span class="token punctuation">.</span>user_id</span>
<span class="line"><span class="token keyword">FROM</span> user_notes <span class="token keyword">AS</span> u</span>
<span class="line"><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> u<span class="token punctuation">.</span><span class="token keyword">date</span> <span class="token keyword">DESC</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>id <span class="token keyword">DESC</span></span>
<span class="line"><span class="token keyword">LIMIT</span> <span class="token number">1000</span> <span class="token keyword">OFFSET</span> <span class="token number">900000</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">---</span></span>
<span class="line"><span class="token comment">-- Limit  (cost=165541.59..165541.71 rows=1 width=52) (actual time=695.026..701.406 rows=1000 loops=1)</span></span>
<span class="line"><span class="token comment">--   -&gt;  Gather Merge  (cost=68312.50..165541.59 rows=833334 width=52) (actual time=342.475..684.567 rows=901000 loops=1)</span></span>
<span class="line"><span class="token comment">--         Workers Planned: 2</span></span>
<span class="line"><span class="token comment">--         Workers Launched: 2</span></span>
<span class="line"><span class="token comment">--         -&gt;  Sort  (cost=67312.48..68354.15 rows=416667 width=52) (actual time=327.846..450.295 rows=300841 loops=3)</span></span>
<span class="line"><span class="token comment">--               Sort Key: date DESC, id DESC</span></span>
<span class="line"><span class="token comment">--               Sort Method: external merge  Disk: 20440kB</span></span>
<span class="line"><span class="token comment">--               Worker 0:  Sort Method: external merge  Disk: 18832kB</span></span>
<span class="line"><span class="token comment">--               Worker 1:  Sort Method: external merge  Disk: 18912kB</span></span>
<span class="line"><span class="token comment">--               -&gt;  Parallel Seq Scan on user_notes u  (cost=0.00..14174.67 rows=416667 width=52) (actual time=1.035..22.876 rows=333333 loops=3)</span></span>
<span class="line"><span class="token comment">-- Planning Time: 0.050 ms</span></span>
<span class="line"><span class="token comment">-- JIT:</span></span>
<span class="line"><span class="token comment">--   Functions: 8</span></span>
<span class="line"><span class="token comment">--   Options: Inlining false, Optimization false, Expressions true, Deforming true</span></span>
<span class="line"><span class="token comment">--   Timing: Generation 0.243 ms (Deform 0.111 ms), Inlining 0.000 ms, Optimization 0.270 ms, Emission 4.085 ms, Total 4.598 ms</span></span>
<span class="line"><span class="token comment">-- Execution Time: 704.217 ms</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The total execution time is <code>704.217 ms</code> for offset pagination.</p><p>Here&#39;s the query returning the same set of rows using cursor pagination. I had to hardcode the <code>@date</code> and <code>@lastId</code> values for this comparison:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">SELECT</span> u<span class="token punctuation">.</span>id<span class="token punctuation">,</span> u<span class="token punctuation">.</span><span class="token keyword">date</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>note<span class="token punctuation">,</span> u<span class="token punctuation">.</span>user_id</span>
<span class="line"><span class="token keyword">FROM</span> user_notes <span class="token keyword">AS</span> u</span>
<span class="line"><span class="token keyword">WHERE</span> u<span class="token punctuation">.</span><span class="token keyword">date</span> <span class="token operator">&lt;</span> <span class="token variable">@date</span> <span class="token operator">OR</span> <span class="token punctuation">(</span>u<span class="token punctuation">.</span><span class="token keyword">date</span> <span class="token operator">=</span> <span class="token variable">@date</span> <span class="token operator">AND</span> u<span class="token punctuation">.</span>id <span class="token operator">&lt;=</span> <span class="token variable">@lastId</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> u<span class="token punctuation">.</span><span class="token keyword">date</span> <span class="token keyword">DESC</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>id <span class="token keyword">DESC</span></span>
<span class="line"><span class="token keyword">LIMIT</span> <span class="token number">1000</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Finally, here&#39;s the query plan for cursor pagination:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">EXPLAIN</span> <span class="token keyword">ANALYZE</span> <span class="token keyword">SELECT</span> u<span class="token punctuation">.</span>id<span class="token punctuation">,</span> u<span class="token punctuation">.</span><span class="token keyword">date</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>note<span class="token punctuation">,</span> u<span class="token punctuation">.</span>user_id</span>
<span class="line"><span class="token keyword">FROM</span> user_notes <span class="token keyword">AS</span> u</span>
<span class="line"><span class="token keyword">WHERE</span> u<span class="token punctuation">.</span><span class="token keyword">date</span> <span class="token operator">&lt;</span> <span class="token variable">@date</span> <span class="token operator">OR</span> <span class="token punctuation">(</span>u<span class="token punctuation">.</span><span class="token keyword">date</span> <span class="token operator">=</span> <span class="token variable">@date</span> <span class="token operator">AND</span> u<span class="token punctuation">.</span>id <span class="token operator">&lt;=</span> <span class="token variable">@lastId</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> u<span class="token punctuation">.</span><span class="token keyword">date</span> <span class="token keyword">DESC</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>id <span class="token keyword">DESC</span></span>
<span class="line"><span class="token keyword">LIMIT</span> <span class="token number">1000</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">---</span></span>
<span class="line"><span class="token comment">-- Limit  (cost=20605.63..20722.31 rows=1000 width=52) (actual time=37.993..40.958 rows=1000 loops=1)</span></span>
<span class="line"><span class="token comment">--   -&gt;  Gather Merge  (cost=20605.63..30419.62 rows=84114 width=52) (actual time=37.992..40.921 rows=1000 loops=1)</span></span>
<span class="line"><span class="token comment">--         Workers Planned: 2</span></span>
<span class="line"><span class="token comment">--         Workers Launched: 2</span></span>
<span class="line"><span class="token comment">--         -&gt;  Sort  (cost=19605.61..19710.75 rows=42057 width=52) (actual time=24.611..24.630 rows=811 loops=3)</span></span>
<span class="line"><span class="token comment">--               Sort Key: date DESC, id DESC</span></span>
<span class="line"><span class="token comment">--               Sort Method: top-N heapsort  Memory: 240kB</span></span>
<span class="line"><span class="token comment">--               Worker 0:  Sort Method: top-N heapsort  Memory: 239kB</span></span>
<span class="line"><span class="token comment">--               Worker 1:  Sort Method: top-N heapsort  Memory: 238kB</span></span>
<span class="line"><span class="token comment">--               -&gt;  Parallel Seq Scan on user_notes u  (cost=0.00..17299.67 rows=42057 width=52) (actual time=0.009..21.462 rows=33333 loops=3)</span></span>
<span class="line"><span class="token comment">--                     Filter: ((date &lt; @date::date) OR ((date = @date::date) AND (id &lt;= @lastId::uuid)))</span></span>
<span class="line"><span class="token comment">--                     Rows Removed by Filter: 300000</span></span>
<span class="line"><span class="token comment">-- Planning Time: 0.063 ms</span></span>
<span class="line"><span class="token comment">-- Execution Time: 40.993 ms</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The total execution time for cursor pagination is <code>40.993 ms</code>.</p><p>A whopping <code>17x</code> performance improvement with cursor pagination compared to offset pagination!</p><p>The performance with cursor pagination is consistent regardless of the page depth. This is because we&#39;re directly seeking the rows based on the cursor, which is more efficient than offset pagination. It&#39;s a huge advantage over offset pagination, especially for large datasets.</p><hr><h2 id="adding-indexes-for-cursor-pagination" tabindex="-1"><a class="header-anchor" href="#adding-indexes-for-cursor-pagination"><span>Adding Indexes for Cursor Pagination</span></a></h2><p>I also tested the impact of indexes on <a href="https://use-the-index-luke.com/blog/2013-07/pagination-done-the-postgresql-way" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>cursor pagination</a>. I created a composite index on the <code>Date</code> and <code>Id</code> fields to speed up the queries. Or so I thought...</p><p>Here&#39;s the SQL command to create the composite index:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> idx_user_notes_date_id <span class="token keyword">ON</span> user_notes <span class="token punctuation">(</span><span class="token keyword">date</span> <span class="token keyword">DESC</span><span class="token punctuation">,</span> id <span class="token keyword">DESC</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The index is created in descending order to match the sort order in our queries.</p><p>Let&#39;s see the query plan for cursor pagination with the composite index:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">EXPLAIN</span> <span class="token keyword">ANALYZE</span> <span class="token keyword">SELECT</span> u<span class="token punctuation">.</span>id<span class="token punctuation">,</span> u<span class="token punctuation">.</span><span class="token keyword">date</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>note<span class="token punctuation">,</span> u<span class="token punctuation">.</span>user_id</span>
<span class="line"><span class="token keyword">FROM</span> user_notes <span class="token keyword">AS</span> u</span>
<span class="line"><span class="token keyword">WHERE</span> u<span class="token punctuation">.</span><span class="token keyword">date</span> <span class="token operator">&lt;</span> <span class="token variable">@date</span> <span class="token operator">OR</span> <span class="token punctuation">(</span>u<span class="token punctuation">.</span><span class="token keyword">date</span> <span class="token operator">=</span> <span class="token variable">@date</span> <span class="token operator">AND</span> u<span class="token punctuation">.</span>id <span class="token operator">&lt;=</span> <span class="token variable">@lastId</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> u<span class="token punctuation">.</span><span class="token keyword">date</span> <span class="token keyword">DESC</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>id <span class="token keyword">DESC</span></span>
<span class="line"><span class="token keyword">LIMIT</span> <span class="token number">1000</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">---</span></span>
<span class="line"><span class="token comment">-- Limit  (cost=0.42..816.55 rows=1000 width=52) (actual time=298.534..298.924 rows=1000 loops=1)</span></span>
<span class="line"><span class="token comment">--   -&gt;  Index Scan using idx_user_notes_date_id on user_notes u  (cost=0.42..82376.42 rows=100936 width=52) (actual time=298.532..298.888 rows=1000 loops=1)</span></span>
<span class="line"><span class="token comment">--         Filter: ((date &lt; @date::date) OR ((date = @date::date) AND (id &lt;= @lastId::uuid)))</span></span>
<span class="line"><span class="token comment">--         Rows Removed by Filter: 900000</span></span>
<span class="line"><span class="token comment">-- Planning Time: 0.068 ms</span></span>
<span class="line"><span class="token comment">-- Execution Time: 298.955 ms</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We have an <code>Index Scan</code> using the composite index. However, the execution time is <code>298.955 ms</code>, which is slower than the previous query without the index.</p><p>This might be because the dataset is too small to benefit from the index. I have only <code>1,000,000</code> records in the table, which might not be enough to see the performance improvement with the index.</p><p>But wait, there&#39;s more to it!</p><p>What if we were to use a tuple comparison in SQL?</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">EXPLAIN</span> <span class="token keyword">ANALYZE</span> <span class="token keyword">SELECT</span> u<span class="token punctuation">.</span>id<span class="token punctuation">,</span> u<span class="token punctuation">.</span><span class="token keyword">date</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>note<span class="token punctuation">,</span> u<span class="token punctuation">.</span>user_id</span>
<span class="line"><span class="token keyword">FROM</span> user_notes <span class="token keyword">AS</span> u</span>
<span class="line"><span class="token keyword">WHERE</span> <span class="token punctuation">(</span>u<span class="token punctuation">.</span><span class="token keyword">date</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token punctuation">(</span><span class="token variable">@date</span><span class="token punctuation">,</span> <span class="token variable">@lastId</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> u<span class="token punctuation">.</span><span class="token keyword">date</span> <span class="token keyword">DESC</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>id <span class="token keyword">DESC</span></span>
<span class="line"><span class="token keyword">LIMIT</span> <span class="token number">1000</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">---</span></span>
<span class="line"><span class="token comment">-- Limit  (cost=0.42..432.81 rows=1000 width=52) (actual time=0.020..0.641 rows=1000 loops=1)</span></span>
<span class="line"><span class="token comment">--   -&gt;  Index Scan using idx_user_notes_date_id on user_notes u  (cost=0.42..43817.85 rows=101339 width=52) (actual time=0.019..0.606 rows=1000 loops=1)</span></span>
<span class="line"><span class="token comment">--         Index Cond: (ROW(date, id) &lt;= ROW(@date::date, @lastId::uuid))</span></span>
<span class="line"><span class="token comment">-- Planning Time: 0.060 ms</span></span>
<span class="line"><span class="token comment">-- Execution Time: 0.668 ms</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Finally, the index is working. The execution time is <code>0.668 ms</code>, which is significantly faster than the previous queries.</p><p>The query optimizer cannot determine whether the composite index can be used for row-level comparison. However, the index is effectively used with a tuple comparison.</p><p>How do you translate this to EF Core?</p><p>The Postgres provider has <code>EF.Functions.LessThanOrEqual</code>, which accepts a <code>ValueTuple</code> as an argument. We can use it to produce a <code>(u.date, u.id) &lt;= (@date, @lastId)</code> comparison in the query. And this will utilize the composite index.</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line">query <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> EF<span class="token punctuation">.</span>Functions<span class="token punctuation">.</span><span class="token function">LessThanOrEqual</span><span class="token punctuation">(</span></span>
<span class="line">    ValueTuple<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>Date<span class="token punctuation">,</span> x<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    ValueTuple<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> lastId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="encoding-the-cursor" tabindex="-1"><a class="header-anchor" href="#encoding-the-cursor"><span>Encoding the Cursor</span></a></h2><p>Here&#39;s a small utility class for encoding and decoding the cursor. We&#39;ll use this to encode the cursor in the URL and decode it when fetching the next set of results.</p><p>The clients will receive the cursor as a Base64-encoded string. They don&#39;t need to know the internal structure of the cursor.</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="Cursor.cs"><span>Cursor.cs</span></div><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line"><span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Authentication</span><span class="token punctuation">;</span> <span class="token comment">// For Base64UrlTextEncoder</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">sealed</span> <span class="token keyword">record</span> <span class="token class-name">Cursor</span><span class="token punctuation">(</span><span class="token class-name">DateOnly</span> Date<span class="token punctuation">,</span> <span class="token class-name">Guid</span> LastId<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Encode</span><span class="token punctuation">(</span><span class="token class-name">DateOnly</span> date<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> lastId<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name"><span class="token keyword">var</span></span> cursor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Cursor</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> lastId<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name"><span class="token keyword">string</span></span> json <span class="token operator">=</span> JsonSerializer<span class="token punctuation">.</span><span class="token function">Serialize</span><span class="token punctuation">(</span>cursor<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> Base64UrlTextEncoder<span class="token punctuation">.</span><span class="token function">Encode</span><span class="token punctuation">(</span>Encoding<span class="token punctuation">.</span>UTF8<span class="token punctuation">.</span><span class="token function">GetBytes</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Cursor<span class="token punctuation">?</span></span> <span class="token function">Decode</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> cursor<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrWhiteSpace</span><span class="token punctuation">(</span>cursor<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">try</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name"><span class="token keyword">string</span></span> json <span class="token operator">=</span> Encoding<span class="token punctuation">.</span>UTF8<span class="token punctuation">.</span><span class="token function">GetString</span><span class="token punctuation">(</span>Base64UrlTextEncoder<span class="token punctuation">.</span><span class="token function">Decode</span><span class="token punctuation">(</span>cursor<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">return</span> JsonSerializer<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Deserialize</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Cursor<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">catch</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Here&#39;s an example of encoding and decoding the cursor:</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line"><span class="token class-name"><span class="token keyword">string</span></span> encodedCursor <span class="token operator">=</span> Cursor<span class="token punctuation">.</span><span class="token function">Encode</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DateOnly</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  Guid<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;019500f9-8b41-74cf-ab12-25a48d4d4ab4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// Result:</span></span>
<span class="line"><span class="token comment">// eyJEYXRlIjoiMjAyNS0wMi0xNSIsIkxhc3RJZCI6IjAxOTUwMGY5LThiNDEtNzRjZi1hYjEyLTI1YTQ4ZDRkNGFiNCJ9</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">Cursor</span> decodedCursor <span class="token operator">=</span> Cursor<span class="token punctuation">.</span><span class="token function">Decode</span><span class="token punctuation">(</span>encodedCursor<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// Result:</span></span>
<span class="line"><span class="token comment">// {</span></span>
<span class="line"><span class="token comment">//     &quot;Date&quot;: &quot;2025-02-15&quot;,</span></span>
<span class="line"><span class="token comment">//     &quot;LastId&quot;: &quot;019500f9-8b41-74cf-ab12-25a48d4d4ab4&quot;</span></span>
<span class="line"><span class="token comment">// }</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="summary" tabindex="-1"><a class="header-anchor" href="#summary"><span>Summary</span></a></h2><p>While offset pagination is simpler to implement, it suffers from significant performance degradation at scale. My tests showed a 17x slowdown compared to cursor pagination when accessing deeper pages.</p><p>Cursor pagination maintains consistent performance regardless of page depth and works particularly well for real-time feeds and infinite scroll interfaces.</p><p>However, cursor pagination comes with tradeoffs. It requires careful implementation, especially around cursor encoding and handling sort orders. It also doesn&#39;t provide total page counts, making it unsuitable for interfaces that need to support paged navigation.</p><p>The choice between these approaches ultimately depends on your use case:</p><ul><li>Choose cursor pagination for performance-critical APIs, real-time feeds, infinite scroll, or any scenario where users frequently access deep pages</li><li>Stick with offset pagination for admin interfaces, small datasets, or when you need upfront page counts</li></ul><p>Another thing to consider: which page will your users typically land on? If most users start at the first page and rarely visit other pages, offset pagination might be sufficient. This will be the case for many applications.</p><p>Remember to use tuple comparisons and appropriate indexes to get the best performance from cursor pagination.</p><hr><!-- TODO: add ARTICLE CARD --><a class="vp-card" href="https://chanhi2000.github.io/bookshelf/milanjovanovic.tech/understanding-cursor-pagination-and-why-its-so-fast-deep-dive.html" target="_blank" style="background:rgba(79,70,229,0.2);"><img class="vp-card-logo" src="https://milanjovanovic.tech/profile_favicon.png" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Understanding Cursor Pagination and Why It's So Fast (Deep Dive)</div><hr><div class="vp-card-desc">While offset pagination is widely used, cursor-based pagination offers significant performance advantages - my tests show a 17x speedup when paginating through a million-record dataset in PostgreSQL. Let's take a deep dive into cursor pagination, compare it with offset pagination, and examine the SQL execution plans.</div></div></a></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/chanhi2000/bookshelf/edit/main/src/milanjovanovic.tech/understanding-cursor-pagination-and-why-its-so-fast-deep-dive.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/bookshelf/programming/cs/articles/" aria-label="/programming/cs/articles/"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->/programming/cs/articles/</div></a><a class="route-link auto-link next" href="/bookshelf/milanjovanovic.tech/stop-conflating-cqrs-and-mediatr.html" aria-label="Stop Conflating CQRS and MediatR"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Stop Conflating CQRS and MediatR<i class="vp-icon iconfont icon-csharp" sizing="height"></i></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">MIT Licensed | Copyright ¬© 2022-present <a href="https://github.com/chanhi2000">Chan Hee Lee</a></div><div class="vp-copyright">Copyright ¬© 2026 Milan Jovanoviƒá </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/bookshelf/assets/app-BItykJLQ.js" defer></script>
  </body>
</html>
