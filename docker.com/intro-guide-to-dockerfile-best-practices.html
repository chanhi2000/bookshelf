<!doctype html>
<html lang="en-US" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.99" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Intro Guide to Dockerfile file Best Practices","image":["https://docker.com/app/uploads/2019/07/ef41db8f-fe5e-4a78-940a-6a929db7929d-1.jpg","https://docker.com/app/uploads/2019/07/0c1d0c4e-406c-468c-b6ba-b71ac68b9c84.jpg","https://docker.com/app/uploads/2019/07/2322a39e-bd7e-4a2b-9a8f-548a97dbacb4.jpg","https://docker.com/app/uploads/2019/07/a1b36f64-1a30-45bf-8fcd-4f88437c189e.jpg","https://docker.com/app/uploads/2019/07/363961a4-005e-46fc-963b-f7b690be12ef.jpg","https://docker.com/app/uploads/2019/07/f336014d-d2aa-4c1b-a2bd-e1d5d6ed0d93.jpg","https://docker.com/app/uploads/2019/07/9d991da9-bdb9-4108-8b36-296a5a3772aa.jpg","https://docker.com/app/uploads/2019/07/6c486200-5198-4457-86c0-b5275e70e699.jpg","https://docker.com/app/uploads/2019/07/f393ad07-c25d-4241-a40f-c6168e0ba4dd.jpg","https://docker.com/app/uploads/2019/07/41ea71ce-11c3-42a3-8d2b-05fe20901745.jpg","https://docker.com/app/uploads/2019/07/97ec1992-f0df-4c8f-82a0-e177c230e5c5.jpg","https://docker.com/app/uploads/2019/07/80c3c350-5f7e-4cf1-ab3e-89df755b3c33.jpg"],"datePublished":"2019-07-03T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"Tibor Vass","url":"https://docker.com/author/tibor/"}]}</script><meta property="og:url" content="https://chanhi2000.github.io/bookshelf/docker.com/intro-guide-to-dockerfile-best-practices.html"><meta property="og:site_name" content="üìöBookshelf"><meta property="og:title" content="Intro Guide to Dockerfile file Best Practices"><meta property="og:description" content="Article(s) > Intro Guide to Dockerfile file Best Practices"><meta property="og:type" content="article"><meta property="og:image" content="https://docker.com/app/uploads/2019/07/ef41db8f-fe5e-4a78-940a-6a929db7929d-1.jpg"><meta property="og:locale" content="en-US"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:src" content="https://docker.com/app/uploads/2019/07/ef41db8f-fe5e-4a78-940a-6a929db7929d-1.jpg"><meta name="twitter:image:alt" content="Intro Guide to Dockerfile file Best Practices"><meta property="article:author" content="Tibor Vass"><meta property="article:tag" content="docker"><meta property="article:tag" content="devops"><meta property="article:tag" content="docker.com"><meta property="article:tag" content="blog"><meta property="article:published_time" content="2019-07-03T00:00:00.000Z"><link rel="icon" href="/bookshelf/assets/icon/favicon.svg"><title>Intro Guide to Dockerfile file Best Practices | üìöBookshelf</title><meta name="description" content="Article(s) > Intro Guide to Dockerfile file Best Practices">
    <link rel="preload" href="/bookshelf/assets/style-Bhb-QcDa.css" as="style"><link rel="stylesheet" href="/bookshelf/assets/style-Bhb-QcDa.css">
    
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/bookshelf/" aria-label="Take me home"><img class="vp-nav-logo" src="/bookshelf/assets/icon/favicon.svg" alt><!----><span class="vp-site-name hide-in-pad">üìöBookshelf</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/bookshelf/news.html" aria-label><!--[--><i class="vp-icon fas fa-rss" sizing="height"></i><!--]--><!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-keyboard" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/hackingwithswift.com/" aria-label="hackingwithswift.com"><!--[--><img class="vp-icon" src="https://hackingwithswift.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->hackingwithswift.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fcc/" aria-label="freecodecamp.org"><!--[--><img class="vp-icon" src="https://cdn.freecodecamp.org/universal/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->freecodecamp.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kodeco.com/" aria-label="kodeco.com"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->kodeco.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.kotzilla.io/" aria-label="blog.kotzilla.io"><!--[--><img class="vp-icon" src="https://blog.kotzilla.io/hubfs/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.kotzilla.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kt.academy/" aria-label="kt.academy"><!--[--><img class="vp-icon" src="https://kt.academy/logo.png" alt aria-hidden no-view sizing="both"><!--]-->kt.academy<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/droidcon.com/" aria-label="droidcon.com"><!--[--><img class="vp-icon" src="https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png" alt aria-hidden no-view sizing="both"><!--]-->droidcon.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/outcomeschool.com/" aria-label="outcomeschool.com"><!--[--><img class="vp-icon" src="https://outcomeschool.com/static/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->outcomeschool.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/frontendmasters.com/" aria-label="frontendmasters.com"><!--[--><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->frontendmasters.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tricks.com/" aria-label="css-tricks.com"><!--[--><img class="vp-icon" src="https://css-tricks.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->css-tricks.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="smashingmagazine.com"><!--[--><img class="vp-icon" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->smashingmagazine.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="oddbird.net"><!--[--><img class="vp-icon" src="https://oddbird.net/safari-pinned-tab.svg" alt aria-hidden no-view sizing="both"><!--]-->oddbird.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/zeroheight.com/" aria-label="zeroheight.com"><!--[--><img class="vp-icon" src="https://zeroheight.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->zeroheight.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/typescript.tv/" aria-label="typescript.tv"><!--[--><img class="vp-icon" src="https://typescript.tv/_astro/android-chrome-192x192.BhQ8hcWh.png" alt aria-hidden no-view sizing="both"><!--]-->typescript.tv<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.logrocket.com/" aria-label="blog.logrocket.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.logrocket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/realpython.com/" aria-label="realpython.com"><!--[--><img class="vp-icon" src="https://realpython.com/static/favicon.68cbf4197b0c.png" alt aria-hidden no-view sizing="both"><!--]-->realpython.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/digitalocean.com/" aria-label="digitalocean.com"><!--[--><img class="vp-icon" src="https://digitalocean.com/_next/static/media/favicon.594d6067.ico" alt aria-hidden no-view sizing="both"><!--]-->digitalocean.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/antonioleiva.com/" aria-label="antonioleiva.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/antonioleiva.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->antonioleiva.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/johnnyreilly.com/" aria-label="johnnyreilly.com"><!--[--><img class="vp-icon" src="https://johnnyreilly.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->johnnyreilly.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/code-maze.com/" aria-label="code-maze.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/code-maze.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->code-maze.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/milanjovanovic.tech/" aria-label="milanjovanovic.tech"><!--[--><img class="vp-icon" src="https://milanjovanovic.tech/profile_favicon.png" alt aria-hidden no-view sizing="both"><!--]-->milanjovanovic.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/shopify.engineering/" aria-label="shopify.engineering"><!--[--><img class="vp-icon" src="https://cdn.shopify.com/static/shopify-favicon.png" alt aria-hidden no-view sizing="both"><!--]-->shopify.engineering<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devtoolstips.org/" aria-label="devtoolstips.org"><!--[--><img class="vp-icon" src="https://devtoolstips.org/assets/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devtoolstips.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/piccalil.li/" aria-label="piccalil.li"><!--[--><img class="vp-icon" src="https://piccalil.li/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->piccalil.li<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/sitepoint.com/" aria-label="sitepoint.com"><!--[--><img class="vp-icon" src="https://sitepoint.com/favicons/512x512.png" alt aria-hidden no-view sizing="both"><!--]-->sitepoint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/event-driven.io/" aria-label="event-driven.io"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/event-driven.io/favicon.jfif" alt aria-hidden no-view sizing="both"><!--]-->event-driven.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/packagemain.tech/" aria-label="packagemain.tech"><!--[--><img class="vp-icon" src="https://substack-post-media.s3.amazonaws.com/public/images/2ea54e25-eaa6-4630-bfc0-10b8cfdce894/apple-touch-icon-1024x1024.png" alt aria-hidden no-view sizing="both"><!--]-->packagemain.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/gosolve.io/" aria-label="gosolve.io"><!--[--><img class="vp-icon" src="https://gosolve.io/wp-content/uploads/2022/03/cropped-ikona1-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->gosolve.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/bram.us/" aria-label="bram.us"><!--[--><img class="vp-icon" src="https://bram.us/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->bram.us<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/una.im/" aria-label="una.im"><!--[--><img class="vp-icon" src="https://una.im/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->una.im<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/joshwcomeau.com/" aria-label="joshwcomeau.com"><!--[--><img class="vp-icon" src="https://joshwcomeau.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->joshwcomeau.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tip.com/" aria-label="css-tip.com"><!--[--><img class="vp-icon" src="https://css-tip.com/img/fav.png" alt aria-hidden no-view sizing="both"><!--]-->css-tip.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/nerdy.dev/" aria-label="nerdy.dev"><!--[--><img class="vp-icon" src="https://nerdy.dev/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->nerdy.dev<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/towardsdatascience.com/" aria-label="towardsdatascience.com"><!--[--><img class="vp-icon" src="https://cdn-images-1.medium.com/v2/resize:fill:128:128/1*VzTUkfeGymHP4Bvav-T-lA.png" alt aria-hidden no-view sizing="both"><!--]-->towardsdatascience.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/douggregor.net/" aria-label="douggregor.net"><!--[--><i class="vp-icon fas fa-globe" sizing="both"></i><!--]-->douggregor.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/d2.naver.com/" aria-label="d2.naver.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/d2.naver.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->d2.naver.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakao.com/" aria-label="tech.kakao.com"><!--[--><img class="vp-icon" src="https://www.kakaocorp.com/page/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakao.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakaopay.com/" aria-label="tech.kakaopay.com"><!--[--><img class="vp-icon" src="https://tech.kakaopay.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakaopay.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fe-developers.kakaoent.com/" aria-label="fe-developers.kakaoent.com"><!--[--><img class="vp-icon" src="https://fe-developers.kakaoent.com/favicon-32x32.png?v=44803cb16c1e2debd3984cf2e8cb2ded" alt aria-hidden no-view sizing="both"><!--]-->fe-developers.kakaoent.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/yozm.wishket.com/" aria-label="yozm.wishket.com"><!--[--><img class="vp-icon" src="https://yozm.wishket.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->yozm.wishket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/popit.kr/" aria-label="popit.kr"><!--[--><img class="vp-icon" src="https://popit.kr/wp-content/uploads/2016/08/favicon_32x32.png" alt aria-hidden no-view sizing="both"><!--]-->popit.kr<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devkuma.com/" aria-label="devkuma.com"><!--[--><img class="vp-icon" src="https://devkuma.com/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devkuma.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.gangnamunni.com/" aria-label="blog.gangnamunni.com"><!--[--><img class="vp-icon" src="https://blog.gangnamunni.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->blog.gangnamunni.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/codingeverybody.kr/" aria-label="codingeverybody.kr"><!--[--><img class="vp-icon" src="https://codingeverybody.kr/wp-content/uploads/cropped-favicon-origin-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->codingeverybody.kr<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-network-wired" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tecmint.com/" aria-label="tecmint.com"><!--[--><img class="vp-icon" src="https://tecmint.com/wp-content/uploads/2020/07/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tecmint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/bookshelf/docker.com/" aria-label="docker.com"><!--[--><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->docker.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/learnkube.com/" aria-label="learnkube.com"><!--[--><img class="vp-icon" src="https://static.learnkube.com/f7e5160d4744cf05c46161170b5c11c9.svg" alt aria-hidden no-view sizing="both"><!--]-->learnkube.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/itsfoss.com/" aria-label="itsfoss.com"><!--[--><img class="vp-icon" src="https://itsfoss.com/content/images/size/w256h256/2022/12/android-chrome-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->itsfoss.com<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/chanhi2000/bookshelf" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><!----></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><span class="vp-sidebar-title">docker.com</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2025</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2024</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2023</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2022</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2021</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2020</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">2019</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/containers-today-recap.html" aria-label="Containers Today Recap: The Future of the Developer JourneyDocker"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Containers Today Recap: The Future of the Developer JourneyDocker<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/deep-dive-into-new-docker-desktop-filesharing-implementation.html" aria-label="Deep Dive Into the New Docker Desktop filesharing Implementation Using FUSE"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Deep Dive Into the New Docker Desktop filesharing Implementation Using FUSE<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/new-filesharing-implementation-in-docker-desktop-windows.html" aria-label="New Filesharing Implementation in Docker Desktop Windows Improves Developer Inner Loop UXDocker"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->New Filesharing Implementation in Docker Desktop Windows Improves Developer Inner Loop UXDocker<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/depend-on-docker-for-kubeflow.html" aria-label="Depend on Docker for Kubeflow"><!--[--><i class="vp-icon iconfont icon-k8s" sizing="both"></i><!--]-->Depend on Docker for Kubeflow<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html" aria-label="Introducing the Docker Desktop WSL 2 BackendDocker"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Introducing the Docker Desktop WSL 2 BackendDocker<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/developing-docker-windows-app-wsl2.html" aria-label="Developing Docker-Powered Apps on Windows with WSL 2"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Developing Docker-Powered Apps on Windows with WSL 2<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/maintainable-integration-tests-with-docker.html" aria-label="Write Maintainable Integration Tests with Docker"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Write Maintainable Integration Tests with Docker<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/keep-nodejs-rockin-in-docker.html" aria-label="Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/road-to-containing-iscsi.html" aria-label="Road to containing iSCSI"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Road to containing iSCSI<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/bookshelf/docker.com/intro-guide-to-dockerfile-best-practices.html" aria-label="Intro Guide to Dockerfile file Best Practices"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Intro Guide to Dockerfile file Best Practices<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/getting-started-with-docker-for-arm-on-linux.html" aria-label="Getting started with Docker for Arm on Linux"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Getting started with Docker for Arm on Linux<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/containerizing-test-tooling-creating-your-dockerfile-and-makefile.html" aria-label="Containerizing Test Tooling: Creating your file and Makefile"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Containerizing Test Tooling: Creating your file and Makefile<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/whats-in-a-container-platform.html" aria-label="What&#39;s in a Container Platform?"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->What&#39;s in a Container Platform?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/multi-arch-images.html" aria-label="Building Multi-Arch Images for Arm and x86 with  Desktop"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Building Multi-Arch Images for Arm and x86 with  Desktop<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/happy-pi-day-docker-raspberry-pi.html" aria-label="Happy Pi Day with  and Raspberry Pi"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Happy Pi Day with  and Raspberry Pi<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/addressing-time-drift-in-docker-desktop-for-mac.html" aria-label="Addressing Time Drift in Docker Desktop for Mac"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Addressing Time Drift in Docker Desktop for Mac<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2018</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2017</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2016</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2015</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2013</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><div class="page-cover"><img src="https://docker.com/app/uploads/2019/07/ef41db8f-fe5e-4a78-940a-6a929db7929d-1.jpg" alt no-view></div><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon fa-brands fa-docker" sizing="height"></i>Intro Guide to Dockerfile file Best Practices</h1><div class="page-info"><span class="page-author-info" aria-label="Authorüñä" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://docker.com/author/tibor/" target="_blank" rel="noopener noreferrer">Tibor Vass</a></span><span property="author" content="Tibor Vass"></span></span><!----><span class="page-date-info" aria-label="Writing DateüìÖ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">7/3/19</span><meta property="datePublished" content="2019-07-03T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time‚åõ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 6 min</span><meta property="timeRequired" content="PT6M"></span><span class="page-category-info" aria-label="Categoryüåà" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color2" role>DevOps</span><span class="page-category-item color8" role>Docker</span><span class="page-category-item color8" role>Article(s)</span><!--]--><meta property="articleSection" content="DevOps,Docker,Article(s)"></span><span class="page-tag-info" aria-label="Tagüè∑" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8" role>blog</span><span class="page-tag-item color5" role>docker.com</span><span class="page-tag-item color7" role>devops</span><span class="page-tag-item color2" role>docker</span><!--]--><meta property="keywords" content="blog,docker.com,devops,docker"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´" tabindex="-1"><a class="header-anchor" href="#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"><span>Intro Guide to Dockerfile file Best Practices Í¥ÄÎ†®</span></a></h1><a class="route-link vp-card" href="/bookshelf/devops/docker/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="/bookshelf/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Docker > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><nav class="table-of-contents"><ul><li><a aria-current="page" href="/bookshelf/docker.com/intro-guide-to-dockerfile-best-practices.html#incremental-build-time" class="router-link-active router-link-exact-active">Incremental build time</a><ul><li><a aria-current="page" href="/bookshelf/docker.com/intro-guide-to-dockerfile-best-practices.html#tip-1-order-matters-for-caching" class="router-link-active router-link-exact-active">Tip #1: Order matters for caching</a></li><li><a aria-current="page" href="/bookshelf/docker.com/intro-guide-to-dockerfile-best-practices.html#tip-2-more-specific-copy-to-limit-cache-busts" class="router-link-active router-link-exact-active">Tip #2: More specific COPY to limit cache busts</a></li><li><a aria-current="page" href="/bookshelf/docker.com/intro-guide-to-dockerfile-best-practices.html#tip-3-identify-cacheable-units-such-as-apt-get-update-install" class="router-link-active router-link-exact-active">Tip #3: Identify cacheable units such as apt-get update &amp; install</a></li></ul></li><li><a aria-current="page" href="/bookshelf/docker.com/intro-guide-to-dockerfile-best-practices.html#reduce-image-size" class="router-link-active router-link-exact-active">Reduce Image size</a><ul><li><a aria-current="page" href="/bookshelf/docker.com/intro-guide-to-dockerfile-best-practices.html#tip-4-remove-unnecessary-dependencies" class="router-link-active router-link-exact-active">Tip #4: Remove unnecessary dependencies</a></li><li><a aria-current="page" href="/bookshelf/docker.com/intro-guide-to-dockerfile-best-practices.html#tip-5-remove-package-manager-cache" class="router-link-active router-link-exact-active">Tip #5: Remove package manager cache</a></li></ul></li><li><a aria-current="page" href="/bookshelf/docker.com/intro-guide-to-dockerfile-best-practices.html#maintainability" class="router-link-active router-link-exact-active">Maintainability</a><ul><li><a aria-current="page" href="/bookshelf/docker.com/intro-guide-to-dockerfile-best-practices.html#tip-6-use-official-images-when-possible" class="router-link-active router-link-exact-active">Tip #6: Use official images when possible</a></li><li><a aria-current="page" href="/bookshelf/docker.com/intro-guide-to-dockerfile-best-practices.html#tip-7-use-more-specific-tags" class="router-link-active router-link-exact-active">Tip #7: Use more specific tags</a></li><li><a aria-current="page" href="/bookshelf/docker.com/intro-guide-to-dockerfile-best-practices.html#tip-8-look-for-minimal-flavors" class="router-link-active router-link-exact-active">Tip #8: Look for minimal flavors</a></li></ul></li><li><a aria-current="page" href="/bookshelf/docker.com/intro-guide-to-dockerfile-best-practices.html#reproducibility" class="router-link-active router-link-exact-active">Reproducibility</a><ul><li><a aria-current="page" href="/bookshelf/docker.com/intro-guide-to-dockerfile-best-practices.html#tip-9-build-from-source-in-a-consistent-environment" class="router-link-active router-link-exact-active">Tip #9: Build from source in a consistent environment</a></li></ul></li></ul></nav><hr><div class="vp-site-info" data-name="Intro Guide to Dockerfile file Best Practices"><a class="vp-site-info-navigator no-external-link-icon" title="Intro Guide to Dockerfile file Best Practices" href="https://docker.com/blog/intro-guide-to-dockerfile-best-practices" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://docker.com/app/uploads/2019/07/ef41db8f-fe5e-4a78-940a-6a929db7929d-1.jpg) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt loading="lazy" no-view><div class="vp-site-info-name">Intro Guide to Dockerfile file Best Practices</div><div class="vp-site-info-desc">Learn from Docker experts to simplify and advance your app development and management with Docker. Stay up to date on Docker events and new version</div></div><!----></div><p>There are over one million <a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-docker" sizing="height"></i><code>Dockerfiles</code></a> on GitHub today, but not all <i class="vp-icon fa-brands fa-docker" sizing="height"></i><code>Dockerfiles</code> are created equally. Efficiency is critical, and this blog series will cover five areas for Dockerfile best practices to help you write better <i class="vp-icon fa-brands fa-docker" sizing="height"></i><code>Dockerfiles</code>: incremental build time, image size, maintainability, security and repeatability. If you‚Äôre just beginning with Docker, this first blog post is for you! The next posts in the series will be more advanced.</p><div class="hint-container note"><p class="hint-container-title">Important note</p><p>the tips below follow the journey of ever-improving <i class="vp-icon fa-brands fa-docker" sizing="height"></i><code>Dockerfiles</code> for an example Java project based on Maven. The last Dockerfile is thus the recommended Dockerfile, while all intermediate ones are there only to illustrate specific best practices.</p></div><hr><h2 id="incremental-build-time" tabindex="-1"><a class="header-anchor" href="#incremental-build-time"><span>Incremental build time</span></a></h2><p>In a development cycle, when building a Docker image, making code changes, then rebuilding, it is important to leverage caching. Caching helps to avoid running build steps again when they don‚Äôt need to.</p><h3 id="tip-1-order-matters-for-caching" tabindex="-1"><a class="header-anchor" href="#tip-1-order-matters-for-caching"><span>Tip #1: Order matters for caching</span></a></h3><figure><img src="https://docker.com/app/uploads/2019/07/ef41db8f-fe5e-4a78-940a-6a929db7929d-1.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!-- TODO: ÏΩîÎìúÌôî --><p>However, the order of the build steps (<i class="vp-icon fa-brands fa-docker" sizing="height"></i><code>Dockerfile</code> instructions) matters, because when a step‚Äôs cache is invalidated by changing files or modifying lines in the <i class="vp-icon fa-brands fa-docker" sizing="height"></i><code>Dockerfile</code>, subsequent steps of their cache will break. Order your steps from least to most frequently changing steps to optimize caching.</p><h3 id="tip-2-more-specific-copy-to-limit-cache-busts" tabindex="-1"><a class="header-anchor" href="#tip-2-more-specific-copy-to-limit-cache-busts"><span>Tip #2: More specific COPY to limit cache busts</span></a></h3><figure><img src="https://docker.com/app/uploads/2019/07/0c1d0c4e-406c-468c-b6ba-b71ac68b9c84.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!-- TODO: ÏΩîÎìúÌôî --><p>Only copy what‚Äôs needed. If possible, avoid <code>COPY .</code> When copying files into your image, make sure you are very specific about what you want to copy. Any changes to the files being copied will break the cache. In the example above, only the pre-built jar application is needed inside the image, so only copy that. That way unrelated file changes will not affect the cache.</p><h3 id="tip-3-identify-cacheable-units-such-as-apt-get-update-install" tabindex="-1"><a class="header-anchor" href="#tip-3-identify-cacheable-units-such-as-apt-get-update-install"><span>Tip #3: Identify cacheable units such as <code>apt-get update &amp; install</code></span></a></h3><figure><img src="https://docker.com/app/uploads/2019/07/2322a39e-bd7e-4a2b-9a8f-548a97dbacb4.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!-- TODO: ÏΩîÎìúÌôî --><p>Each <code>RUN</code> instruction can be seen as a cacheable unit of execution. Too many of them can be unnecessary, while chaining all commands into one <code>RUN</code> instruction can bust the cache easily, hurting the development cycle. When installing packages from package managers, you always want to update the index and install packages in the same <code>RUN</code>: they form together one cacheable unit. Otherwise you risk installing outdated packages.</p><hr><h2 id="reduce-image-size" tabindex="-1"><a class="header-anchor" href="#reduce-image-size"><span>Reduce Image size</span></a></h2><p>Image size can be important because smaller images equal faster deployments and a smaller attack surface.</p><h3 id="tip-4-remove-unnecessary-dependencies" tabindex="-1"><a class="header-anchor" href="#tip-4-remove-unnecessary-dependencies"><span>Tip #4: Remove unnecessary dependencies</span></a></h3><figure><img src="https://docker.com/app/uploads/2019/07/a1b36f64-1a30-45bf-8fcd-4f88437c189e.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!-- TODO:ÏΩîÎìúÌôî --><p>Remove unnecessary dependencies and do not install debugging tools. If needed debugging tools can always be installed later. Certain package managers such as apt, automatically install packages that are recommended by the user-specified package, unnecessarily increasing the footprint. Apt has the <code>‚Äìno-install-recommends</code> flag which ensures that dependencies that were not actually needed are not installed. If they are needed, add them explicitly.</p><h3 id="tip-5-remove-package-manager-cache" tabindex="-1"><a class="header-anchor" href="#tip-5-remove-package-manager-cache"><span>Tip #5: Remove package manager cache</span></a></h3><figure><img src="https://docker.com/app/uploads/2019/07/363961a4-005e-46fc-963b-f7b690be12ef.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!-- TODO:ÏΩîÎìúÌôî --><p>Package managers maintain their own cache which may end up in the image. One way to deal with it is to remove the cache in the same RUN instruction that installed packages. Removing it in another RUN instruction would not reduce the image size.</p><p>There are further ways to reduce image size such as multi-stage builds which will be covered at the end of this blog post. The next set of best practices will look at how we can optimize for maintainability, security, and repeatability of the Dockerfile.</p><hr><h2 id="maintainability" tabindex="-1"><a class="header-anchor" href="#maintainability"><span>Maintainability</span></a></h2><h3 id="tip-6-use-official-images-when-possible" tabindex="-1"><a class="header-anchor" href="#tip-6-use-official-images-when-possible"><span>Tip #6: Use official images when possible</span></a></h3><figure><img src="https://docker.com/app/uploads/2019/07/f336014d-d2aa-4c1b-a2bd-e1d5d6ed0d93.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!-- TODO: ÏΩîÎìúÌôî --><p>Official images can save a lot of time spent on maintenance because all the installation steps are done and best practices are applied. If you have multiple projects, they can share those layers because they use exactly the same base image.</p><h3 id="tip-7-use-more-specific-tags" tabindex="-1"><a class="header-anchor" href="#tip-7-use-more-specific-tags"><span>Tip #7: Use more specific tags</span></a></h3><figure><img src="https://docker.com/app/uploads/2019/07/9d991da9-bdb9-4108-8b36-296a5a3772aa.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!-- TODO: ÏΩîÎìúÌôî --><p>Do not use the latest tag. It has the convenience of always being available for official images on Docker Hub but there can be breaking changes over time. Depending on how far apart in time you rebuild the Dockerfile without cache, you may have failing builds.</p><p>Instead, use more specific tags for your base images. In this case, we‚Äôre using openjdk. There are a lot more tags available so check out the <a href="https://hub.docker.com/_/openjdk" target="_blank" rel="noopener noreferrer">Docker Hub documentation (<i class="vp-icon fa-brands fa-docker" sizing="height"></i><code>openjdk</code>)</a> for that image which lists all the existing variants.</p><h3 id="tip-8-look-for-minimal-flavors" tabindex="-1"><a class="header-anchor" href="#tip-8-look-for-minimal-flavors"><span>Tip #8: Look for minimal flavors</span></a></h3><figure><img src="https://docker.com/app/uploads/2019/07/6c486200-5198-4457-86c0-b5275e70e699.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!-- TODO: ÏΩîÎìúÌôî --><p>Some of those tags have minimal flavors which means they are even smaller images. The slim variant is based on a stripped down Debian, while the alpine variant is based on the even smaller Alpine Linux distribution image. A notable difference is that debian still uses GNU libc while alpine uses musl libc which, although much smaller, may in some cases cause compatibility issues. In the case of openjdk, the jre flavor only contains the java runtime, not the sdk; this also drastically reduces the image size.</p><hr><h2 id="reproducibility" tabindex="-1"><a class="header-anchor" href="#reproducibility"><span>Reproducibility</span></a></h2><p>So far the Dockerfiles above have assumed that your jar artifact was built on the host. This is not ideal because you lose the benefits of the consistent environment provided by containers. For instance if your Java application depends on specific libraries it may introduce unwelcome inconsistencies depending on which computer the application is built.</p><h3 id="tip-9-build-from-source-in-a-consistent-environment" tabindex="-1"><a class="header-anchor" href="#tip-9-build-from-source-in-a-consistent-environment"><span>Tip #9: Build from source in a consistent environment</span></a></h3><p>The source code is the source of truth from which you want to build a Docker image. The Dockerfile is simply the blueprint.</p><figure><img src="https://docker.com/app/uploads/2019/07/f393ad07-c25d-4241-a40f-c6168e0ba4dd.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!-- TODO: ÏΩîÎìúÌôî --><p>You should start by identifying all that‚Äôs needed to build your application. Our simple Java application requires Maven and the JDK, so let‚Äôs base our Dockerfile off of a specific minimal official maven image from Docker Hub, that includes the JDK. If you needed to install more dependencies, you could do so in a <code>RUN</code> step.</p><p>The <i class="vp-icon iconfont icon-code" sizing="height"></i><code>pom.xml</code> and src folders are copied in as they are needed for the final RUN step that produces the app.jar application with <code>mvn package</code>. (The <code>-e</code> flag is to show errors and <code>-B</code> to run in non-interactive aka ‚Äúbatch‚Äù mode).</p><p>We solved the inconsistent environment problem, but introduced another one: every time the code is changed, all the dependencies described in <i class="vp-icon iconfont icon-code" sizing="height"></i><code>pom.xml</code> are fetched. Hence the next tip.</p><h4 id="tip-10-fetch-dependencies-in-a-separate-step" tabindex="-1"><a class="header-anchor" href="#tip-10-fetch-dependencies-in-a-separate-step"><span>Tip #10: Fetch dependencies in a separate step</span></a></h4><figure><img src="https://docker.com/app/uploads/2019/07/41ea71ce-11c3-42a3-8d2b-05fe20901745.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!-- TODO: ÏΩîÎìúÌôî --><p>By again thinking in terms of cacheable units of execution, we can decide that fetching dependencies is a separate cacheable unit that only needs to depend on changes to <i class="vp-icon iconfont icon-code" sizing="height"></i><code>pom.xml</code> and not the source code. The RUN step between the two COPY steps tells Maven to only fetch the dependencies.</p><p>There is one more problem that got introduced by building in consistent environments: our image is way bigger than before because it includes all the build-time dependencies that are not needed at runtime. `</p><h4 id="tip-11-use-multi-stage-builds-to-remove-build-dependencies-recommended-dockerfile" tabindex="-1"><a class="header-anchor" href="#tip-11-use-multi-stage-builds-to-remove-build-dependencies-recommended-dockerfile"><span>Tip #11: Use multi-stage builds to remove build dependencies (recommended <code>Dockerfile</code>)</span></a></h4><figure><img src="https://docker.com/app/uploads/2019/07/97ec1992-f0df-4c8f-82a0-e177c230e5c5.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!-- TODO: ÏΩîÎìúÌôî --><p>Multi-stage builds are recognizable by the multiple FROM statements. Each FROM starts a new stage. They can be named with the AS keyword which we use to name our first stage ‚Äúbuilder‚Äù to be referenced later. It will include all our build dependencies in a consistent environment.</p><p>The second stage is our final stage which will result in the final image. It will include the strict necessary for the runtime, in this case a minimal JRE (Java Runtime) based on Alpine. The intermediary builder stage will be cached but not present in the final image. In order to get build artifacts into our final image, use <code>COPY --from=STAGE_NAME</code>. In this case, STAGE_NAME is builder.</p><figure><img src="https://docker.com/app/uploads/2019/07/80c3c350-5f7e-4cf1-ab3e-89df755b3c33.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!-- TODO: ÏΩîÎìúÌôî --><p>Multi-stage builds is the go-to solution to remove build-time dependencies.</p><p>We went from building bloated images inconsistently to building minimal images in a consistent environment while being cache-friendly. In the next blog post, we will dive more into other uses of multi-stage builds.</p><!-- TODO: add ARTICLE CARD --><a class="vp-card" href="https://chanhi2000.github.io/bookshelf/docker.com/intro-guide-to-dockerfile-best-practices.html" target="_blank" style="background:rgba(29,99,237,0.2);"><img class="vp-card-logo" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Intro Guide to Dockerfile file Best Practices</div><hr><div class="vp-card-desc">Learn from Docker experts to simplify and advance your app development and management with Docker. Stay up to date on Docker events and new version</div></div></a></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/chanhi2000/bookshelf/edit/main/src/docker.com/intro-guide-to-dockerfile-best-practices.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/bookshelf/devops/docker/articles/" aria-label="/devops/docker/articles/"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->/devops/docker/articles/</div></a><a class="route-link auto-link next" href="/bookshelf/docker.com/getting-started-with-docker-for-arm-on-linux.html" aria-label="Getting started with Docker for Arm on Linux"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Getting started with Docker for Arm on Linux<i class="vp-icon fa-brands fa-docker" sizing="height"></i></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">MIT Licensed | Copyright ¬© 2022-present <a href="https://github.com/chanhi2000">Chan Hee Lee</a></div><div class="vp-copyright">Copyright ¬© 2026 Tibor Vass </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/bookshelf/assets/app-BItykJLQ.js" defer></script>
  </body>
</html>
