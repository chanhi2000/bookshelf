<!doctype html>
<html lang="en-US" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.99" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker","image":["https://docker.com/app/uploads/2019/07/C3-promo-small.jpg","https://docker.com/app/uploads/2019/07/docker-image-ls-node.png","https://docker.com/app/uploads/2019/07/node-solution-b.png"],"datePublished":"2019-07-31T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"Bret Fisher","url":"https://docker.com/author/bret-fisher/"}]}</script><meta property="og:url" content="https://chanhi2000.github.io/bookshelf/docker.com/keep-nodejs-rockin-in-docker.html"><meta property="og:site_name" content="üìöBookshelf"><meta property="og:title" content="Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker"><meta property="og:description" content="Article(s) > Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker"><meta property="og:type" content="article"><meta property="og:image" content="https://docker.com/app/uploads/2019/07/C3-promo-small.jpg"><meta property="og:locale" content="en-US"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:src" content="https://docker.com/app/uploads/2019/07/C3-promo-small.jpg"><meta name="twitter:image:alt" content="Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker"><meta property="article:author" content="Bret Fisher"><meta property="article:tag" content="node-js"><meta property="article:tag" content="nodejs"><meta property="article:tag" content="node"><meta property="article:tag" content="docker"><meta property="article:tag" content="devops"><meta property="article:tag" content="docker.com"><meta property="article:tag" content="blog"><meta property="article:published_time" content="2019-07-31T00:00:00.000Z"><link rel="icon" href="/bookshelf/assets/icon/favicon.svg"><title>Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker | üìöBookshelf</title><meta name="description" content="Article(s) > Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker">
    <link rel="preload" href="/bookshelf/assets/style-Bhb-QcDa.css" as="style"><link rel="stylesheet" href="/bookshelf/assets/style-Bhb-QcDa.css">
    
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/bookshelf/" aria-label="Take me home"><img class="vp-nav-logo" src="/bookshelf/assets/icon/favicon.svg" alt><!----><span class="vp-site-name hide-in-pad">üìöBookshelf</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/bookshelf/news.html" aria-label><!--[--><i class="vp-icon fas fa-rss" sizing="height"></i><!--]--><!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-keyboard" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/hackingwithswift.com/" aria-label="hackingwithswift.com"><!--[--><img class="vp-icon" src="https://hackingwithswift.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->hackingwithswift.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fcc/" aria-label="freecodecamp.org"><!--[--><img class="vp-icon" src="https://cdn.freecodecamp.org/universal/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->freecodecamp.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kodeco.com/" aria-label="kodeco.com"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->kodeco.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.kotzilla.io/" aria-label="blog.kotzilla.io"><!--[--><img class="vp-icon" src="https://blog.kotzilla.io/hubfs/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.kotzilla.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kt.academy/" aria-label="kt.academy"><!--[--><img class="vp-icon" src="https://kt.academy/logo.png" alt aria-hidden no-view sizing="both"><!--]-->kt.academy<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/droidcon.com/" aria-label="droidcon.com"><!--[--><img class="vp-icon" src="https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png" alt aria-hidden no-view sizing="both"><!--]-->droidcon.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/outcomeschool.com/" aria-label="outcomeschool.com"><!--[--><img class="vp-icon" src="https://outcomeschool.com/static/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->outcomeschool.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/frontendmasters.com/" aria-label="frontendmasters.com"><!--[--><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->frontendmasters.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tricks.com/" aria-label="css-tricks.com"><!--[--><img class="vp-icon" src="https://css-tricks.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->css-tricks.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="smashingmagazine.com"><!--[--><img class="vp-icon" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->smashingmagazine.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="oddbird.net"><!--[--><img class="vp-icon" src="https://oddbird.net/safari-pinned-tab.svg" alt aria-hidden no-view sizing="both"><!--]-->oddbird.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/zeroheight.com/" aria-label="zeroheight.com"><!--[--><img class="vp-icon" src="https://zeroheight.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->zeroheight.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/typescript.tv/" aria-label="typescript.tv"><!--[--><img class="vp-icon" src="https://typescript.tv/_astro/android-chrome-192x192.BhQ8hcWh.png" alt aria-hidden no-view sizing="both"><!--]-->typescript.tv<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.logrocket.com/" aria-label="blog.logrocket.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.logrocket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/realpython.com/" aria-label="realpython.com"><!--[--><img class="vp-icon" src="https://realpython.com/static/favicon.68cbf4197b0c.png" alt aria-hidden no-view sizing="both"><!--]-->realpython.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/digitalocean.com/" aria-label="digitalocean.com"><!--[--><img class="vp-icon" src="https://digitalocean.com/_next/static/media/favicon.594d6067.ico" alt aria-hidden no-view sizing="both"><!--]-->digitalocean.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/antonioleiva.com/" aria-label="antonioleiva.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/antonioleiva.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->antonioleiva.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/johnnyreilly.com/" aria-label="johnnyreilly.com"><!--[--><img class="vp-icon" src="https://johnnyreilly.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->johnnyreilly.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/code-maze.com/" aria-label="code-maze.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/code-maze.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->code-maze.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/milanjovanovic.tech/" aria-label="milanjovanovic.tech"><!--[--><img class="vp-icon" src="https://milanjovanovic.tech/profile_favicon.png" alt aria-hidden no-view sizing="both"><!--]-->milanjovanovic.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/shopify.engineering/" aria-label="shopify.engineering"><!--[--><img class="vp-icon" src="https://cdn.shopify.com/static/shopify-favicon.png" alt aria-hidden no-view sizing="both"><!--]-->shopify.engineering<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devtoolstips.org/" aria-label="devtoolstips.org"><!--[--><img class="vp-icon" src="https://devtoolstips.org/assets/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devtoolstips.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/piccalil.li/" aria-label="piccalil.li"><!--[--><img class="vp-icon" src="https://piccalil.li/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->piccalil.li<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/sitepoint.com/" aria-label="sitepoint.com"><!--[--><img class="vp-icon" src="https://sitepoint.com/favicons/512x512.png" alt aria-hidden no-view sizing="both"><!--]-->sitepoint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/event-driven.io/" aria-label="event-driven.io"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/event-driven.io/favicon.jfif" alt aria-hidden no-view sizing="both"><!--]-->event-driven.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/packagemain.tech/" aria-label="packagemain.tech"><!--[--><img class="vp-icon" src="https://substack-post-media.s3.amazonaws.com/public/images/2ea54e25-eaa6-4630-bfc0-10b8cfdce894/apple-touch-icon-1024x1024.png" alt aria-hidden no-view sizing="both"><!--]-->packagemain.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/gosolve.io/" aria-label="gosolve.io"><!--[--><img class="vp-icon" src="https://gosolve.io/wp-content/uploads/2022/03/cropped-ikona1-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->gosolve.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/bram.us/" aria-label="bram.us"><!--[--><img class="vp-icon" src="https://bram.us/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->bram.us<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/una.im/" aria-label="una.im"><!--[--><img class="vp-icon" src="https://una.im/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->una.im<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/joshwcomeau.com/" aria-label="joshwcomeau.com"><!--[--><img class="vp-icon" src="https://joshwcomeau.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->joshwcomeau.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tip.com/" aria-label="css-tip.com"><!--[--><img class="vp-icon" src="https://css-tip.com/img/fav.png" alt aria-hidden no-view sizing="both"><!--]-->css-tip.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/nerdy.dev/" aria-label="nerdy.dev"><!--[--><img class="vp-icon" src="https://nerdy.dev/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->nerdy.dev<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/towardsdatascience.com/" aria-label="towardsdatascience.com"><!--[--><img class="vp-icon" src="https://cdn-images-1.medium.com/v2/resize:fill:128:128/1*VzTUkfeGymHP4Bvav-T-lA.png" alt aria-hidden no-view sizing="both"><!--]-->towardsdatascience.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/douggregor.net/" aria-label="douggregor.net"><!--[--><i class="vp-icon fas fa-globe" sizing="both"></i><!--]-->douggregor.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/d2.naver.com/" aria-label="d2.naver.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/d2.naver.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->d2.naver.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakao.com/" aria-label="tech.kakao.com"><!--[--><img class="vp-icon" src="https://www.kakaocorp.com/page/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakao.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakaopay.com/" aria-label="tech.kakaopay.com"><!--[--><img class="vp-icon" src="https://tech.kakaopay.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakaopay.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fe-developers.kakaoent.com/" aria-label="fe-developers.kakaoent.com"><!--[--><img class="vp-icon" src="https://fe-developers.kakaoent.com/favicon-32x32.png?v=44803cb16c1e2debd3984cf2e8cb2ded" alt aria-hidden no-view sizing="both"><!--]-->fe-developers.kakaoent.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/yozm.wishket.com/" aria-label="yozm.wishket.com"><!--[--><img class="vp-icon" src="https://yozm.wishket.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->yozm.wishket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/popit.kr/" aria-label="popit.kr"><!--[--><img class="vp-icon" src="https://popit.kr/wp-content/uploads/2016/08/favicon_32x32.png" alt aria-hidden no-view sizing="both"><!--]-->popit.kr<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devkuma.com/" aria-label="devkuma.com"><!--[--><img class="vp-icon" src="https://devkuma.com/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devkuma.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.gangnamunni.com/" aria-label="blog.gangnamunni.com"><!--[--><img class="vp-icon" src="https://blog.gangnamunni.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->blog.gangnamunni.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/codingeverybody.kr/" aria-label="codingeverybody.kr"><!--[--><img class="vp-icon" src="https://codingeverybody.kr/wp-content/uploads/cropped-favicon-origin-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->codingeverybody.kr<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-network-wired" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tecmint.com/" aria-label="tecmint.com"><!--[--><img class="vp-icon" src="https://tecmint.com/wp-content/uploads/2020/07/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tecmint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/bookshelf/docker.com/" aria-label="docker.com"><!--[--><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->docker.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/learnkube.com/" aria-label="learnkube.com"><!--[--><img class="vp-icon" src="https://static.learnkube.com/f7e5160d4744cf05c46161170b5c11c9.svg" alt aria-hidden no-view sizing="both"><!--]-->learnkube.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/itsfoss.com/" aria-label="itsfoss.com"><!--[--><img class="vp-icon" src="https://itsfoss.com/content/images/size/w256h256/2022/12/android-chrome-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->itsfoss.com<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/chanhi2000/bookshelf" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><!----></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><span class="vp-sidebar-title">docker.com</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2025</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2024</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2023</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2022</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2021</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2020</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">2019</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/containers-today-recap.html" aria-label="Containers Today Recap: The Future of the Developer JourneyDocker"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Containers Today Recap: The Future of the Developer JourneyDocker<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/deep-dive-into-new-docker-desktop-filesharing-implementation.html" aria-label="Deep Dive Into the New Docker Desktop filesharing Implementation Using FUSE"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Deep Dive Into the New Docker Desktop filesharing Implementation Using FUSE<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/new-filesharing-implementation-in-docker-desktop-windows.html" aria-label="New Filesharing Implementation in Docker Desktop Windows Improves Developer Inner Loop UXDocker"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->New Filesharing Implementation in Docker Desktop Windows Improves Developer Inner Loop UXDocker<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/depend-on-docker-for-kubeflow.html" aria-label="Depend on Docker for Kubeflow"><!--[--><i class="vp-icon iconfont icon-k8s" sizing="both"></i><!--]-->Depend on Docker for Kubeflow<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html" aria-label="Introducing the Docker Desktop WSL 2 BackendDocker"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Introducing the Docker Desktop WSL 2 BackendDocker<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/developing-docker-windows-app-wsl2.html" aria-label="Developing Docker-Powered Apps on Windows with WSL 2"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Developing Docker-Powered Apps on Windows with WSL 2<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/maintainable-integration-tests-with-docker.html" aria-label="Write Maintainable Integration Tests with Docker"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Write Maintainable Integration Tests with Docker<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/bookshelf/docker.com/keep-nodejs-rockin-in-docker.html" aria-label="Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/road-to-containing-iscsi.html" aria-label="Road to containing iSCSI"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Road to containing iSCSI<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/intro-guide-to-dockerfile-best-practices.html" aria-label="Intro Guide to Dockerfile file Best Practices"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Intro Guide to Dockerfile file Best Practices<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/getting-started-with-docker-for-arm-on-linux.html" aria-label="Getting started with Docker for Arm on Linux"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Getting started with Docker for Arm on Linux<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/containerizing-test-tooling-creating-your-dockerfile-and-makefile.html" aria-label="Containerizing Test Tooling: Creating your file and Makefile"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Containerizing Test Tooling: Creating your file and Makefile<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/whats-in-a-container-platform.html" aria-label="What&#39;s in a Container Platform?"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->What&#39;s in a Container Platform?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/multi-arch-images.html" aria-label="Building Multi-Arch Images for Arm and x86 with  Desktop"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Building Multi-Arch Images for Arm and x86 with  Desktop<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/happy-pi-day-docker-raspberry-pi.html" aria-label="Happy Pi Day with  and Raspberry Pi"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Happy Pi Day with  and Raspberry Pi<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/addressing-time-drift-in-docker-desktop-for-mac.html" aria-label="Addressing Time Drift in Docker Desktop for Mac"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Addressing Time Drift in Docker Desktop for Mac<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2018</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2017</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2016</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2015</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2013</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><div class="page-cover"><img src="https://docker.com/app/uploads/2019/07/C3-promo-small.jpg" alt no-view></div><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon fa-brands fa-docker" sizing="height"></i>Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker</h1><div class="page-info"><span class="page-author-info" aria-label="Authorüñä" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://docker.com/author/bret-fisher/" target="_blank" rel="noopener noreferrer">Bret Fisher</a></span><span property="author" content="Bret Fisher"></span></span><!----><span class="page-date-info" aria-label="Writing DateüìÖ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">7/31/19</span><meta property="datePublished" content="2019-07-31T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time‚åõ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 8 min</span><meta property="timeRequired" content="PT8M"></span><span class="page-category-info" aria-label="Categoryüåà" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color2" role>DevOps</span><span class="page-category-item color8" role>Docker</span><span class="page-category-item color1" role>Node.js</span><span class="page-category-item color8" role>Article(s)</span><!--]--><meta property="articleSection" content="DevOps,Docker,Node.js,Article(s)"></span><span class="page-tag-info" aria-label="Tagüè∑" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8" role>blog</span><span class="page-tag-item color5" role>docker.com</span><span class="page-tag-item color7" role>devops</span><span class="page-tag-item color2" role>docker</span><span class="page-tag-item color2" role>node</span><span class="page-tag-item color6" role>nodejs</span><span class="page-tag-item color3" role>node-js</span><!--]--><meta property="keywords" content="blog,docker.com,devops,docker,node,nodejs,node-js"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´" tabindex="-1"><a class="header-anchor" href="#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"><span>Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker Í¥ÄÎ†®</span></a></h1><a class="route-link vp-card" href="/bookshelf/devops/docker/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="/bookshelf/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Docker > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><nav class="table-of-contents"><ul><li><a aria-current="page" href="/bookshelf/docker.com/keep-nodejs-rockin-in-docker.html#stick-with-your-current-base-distro" class="router-link-active router-link-exact-active">Stick With Your Current Base Distro</a></li><li><a aria-current="page" href="/bookshelf/docker.com/keep-nodejs-rockin-in-docker.html#dealing-with-node-modules" class="router-link-active router-link-exact-active">Dealing With Node Modules</a><ul><li><a aria-current="page" href="/bookshelf/docker.com/keep-nodejs-rockin-in-docker.html#solution-a-keep-it-simple" class="router-link-active router-link-exact-active">Solution A: Keep It Simple</a></li><li><a aria-current="page" href="/bookshelf/docker.com/keep-nodejs-rockin-in-docker.html#solution-b-move-container-modules-and-hide-host-modules" class="router-link-active router-link-exact-active">Solution B: Move Container Modules and Hide Host Modules</a></li></ul></li><li><a aria-current="page" href="/bookshelf/docker.com/keep-nodejs-rockin-in-docker.html#use-the-node-user-go-least-privilege" class="router-link-active router-link-exact-active">Use The Node User, Go Least Privilege</a></li><li><a aria-current="page" href="/bookshelf/docker.com/keep-nodejs-rockin-in-docker.html#don-t-use-process-managers-in-production" class="router-link-active router-link-exact-active">Don‚Äôt Use Process Managers In Production</a></li><li><a aria-current="page" href="/bookshelf/docker.com/keep-nodejs-rockin-in-docker.html#start-node-directly-in-dockerfiles" class="router-link-active router-link-exact-active">Start Node Directly in Dockerfiles</a></li><li><a aria-current="page" href="/bookshelf/docker.com/keep-nodejs-rockin-in-docker.html#is-that-all" class="router-link-active router-link-exact-active">Is That All?</a></li></ul></nav><hr><div class="vp-site-info" data-name="Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker"><a class="vp-site-info-navigator no-external-link-icon" title="Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker" href="https://docker.com/blog/keep-nodejs-rockin-in-docker" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://docker.com/app/uploads/2019/07/C3-promo-small.jpg) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt loading="lazy" no-view><div class="vp-site-info-name">Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker</div><div class="vp-site-info-desc">There‚Äôs a ton of info out there on using Node.js with Docker, but so much of it is years out of date, and I‚Äôm here to help you optimize your setups for Node.js 10+ and Docker 18.09+.</div></div><!----></div><div class="hint-container note"><p class="hint-container-title">Note</p><p>This is a guest post from <a href="https://docker.com/captains/bret-fisher" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-docker" sizing="height"></i>Docker Captain Bret Fisher</a>, a long time DevOps sysadmin and speaker who teaches container skills with his popular Docker Mastery courses including <a href="https://bretfisher.com/node" target="_blank" rel="noopener noreferrer">Docker Mastery for Node.js</a>, weekly <a href="https://youtube.com/@BretFisher" target="_blank" rel="noopener noreferrer">YouTube Live shows (<i class="vp-icon fa-brands fa-youtube" sizing="height"></i><code>@BretFisher</code>)</a>, and consults to companies adopting Docker. Join Bret for an <a href="https://events.docker.com/events/details/docker-docker-online-meetups-presents-nodejs-in-docker-tips-and-tricks-with-docker-captain-bret-fisher/#/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-docker" sizing="height"></i>online meetup on August 28th</a>, where he‚Äôll give demos and Q&amp;A on Node.js and Docker topics.</p></div><figure><img src="https://docker.com/app/uploads/2019/07/C3-promo-small.jpg" alt="Foxy, my Docker Mastery mascot is a fan of Node and Docker" tabindex="0" loading="lazy"><figcaption>Foxy, my Docker Mastery mascot is a fan of Node and Docker</figcaption></figure><p>We‚Äôve all got our favorite languages and frameworks, and Node.js is tops for me. I‚Äôve run Node.js in Docker since the early days for mission-critical apps. <strong>I‚Äôm on a mission to educate everyone on how to get the most out of this framework</strong> and its tools like npm, Yarn, and nodemon with Docker.</p><p>There‚Äôs a ton of info out there on using Node.js with Docker, <strong>but so much of it is years out of date</strong>, and I‚Äôm here to help you optimize your setups for Node.js 10+ and Docker 18.09+. If you‚Äôd rather watch my DockerCon 2019 talk that covers these topics and more, <a href="https://youtu.be/Zgx0o8QjJk4" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-youtube" sizing="height"></i>check it out on YouTube</a>.</p><div></div><p>Let‚Äôs go through 4 steps for making your Node.js containers sing! <strong>I‚Äôll include some quick ‚ÄúToo Long; Didn‚Äôt Read‚Äù for those that need it.</strong></p><hr><h2 id="stick-with-your-current-base-distro" tabindex="-1"><a class="header-anchor" href="#stick-with-your-current-base-distro"><span>Stick With Your Current Base Distro</span></a></h2><div class="hint-container info"><p class="hint-container-title">TL;DR:</p><p>If you‚Äôre migrating Node.js apps into containers, use the base image of the host OS you have in production today. After that, my favorite base image is the official <code>node:slim</code> editions rather than <code>node:alpine</code>, which is still good but usually more work to implement and comes with limitations.</p></div><p>One of the first questions anyone asks when putting a Node.js app in Docker, is <strong>‚ÄúWhich base image should I start my Node.js Dockerfile from?‚Äù</strong></p><figure><img src="https://docker.com/app/uploads/2019/07/docker-image-ls-node.png" alt="docker image ls node" tabindex="0" loading="lazy"><figcaption>docker image ls node</figcaption></figure><!-- TODO: ÏΩîÎìúÌôî --><p>slim and alpine are quite smaller than the default image</p><p>There are multiple factors that weigh into this, but don‚Äôt make ‚Äúimage size‚Äù a top priority unless you‚Äôre dealing with IoT or embedded devices where every MB counts. <strong>In recent years the slim image has shrunk down in size to 150MB and works the best across the widest set of scenarios.</strong> Alpine is a very minimal container distribution, with the smallest node image at only 75MB. However, the level of effort to swap package managers (apt to apk), deal with <a href="https://github.com/remy/nodemon/issues/1447" target="_blank" rel="noopener noreferrer">edge cases (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>remy/nodemon</code>)</a>, and work around <a href="https://kubedex.com/follow-up-container-scanning-comparison/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>security scanning limitations</a> causes me hold off on recommending node:alpine for most use cases.</p><p>When adopting container tech, like anything, you want to do what you can to reduce the change rate. So many new tools and processes come along with containers. <strong>Choosing the base image your devs and ops are most used to has many unexpected benefits</strong>, so try to stick with it when it makes sense, even if this means making a custom image for CentOS, Ubuntu, etc.</p><hr><h2 id="dealing-with-node-modules" tabindex="-1"><a class="header-anchor" href="#dealing-with-node-modules"><span>Dealing With Node Modules</span></a></h2><div class="hint-container info"><p class="hint-container-title">TL;DR</p><p>You don‚Äôt have to relocate node_modules in your containers as long as you follow a few rules for proper local development. A second option is to move mode_modules up a directory in your Dockerfile, configure your container properly, and it‚Äôll provide the most flexible option, but may not work with every npm framework.</p></div><p>We‚Äôre all now used to a world where we don‚Äôt write all the code we run in an app, and that means dealing with app framework dependencies. <strong>One common question is how to deal with those code dependencies in containers when they are a subdirectory of our app.</strong> Local bind-mounts for development can affect your app differently if those dependencies were designed to run on your host OS and not the container OS.</p><p>The core of this issue for Node.js is that node_modules can contain binaries compiled for your host OS, and if it‚Äôs different then the container OS, you‚Äôll get errors trying to run your app when you‚Äôre bind-mounting it from the host for development. <strong>Note that if you‚Äôre a pure Linux developer and you develop on Linux x64 for Linux x64, this bind-mount issue isn‚Äôt usually a concern.</strong></p><div class="hint-container note"><p class="hint-container-title">Note</p><p>For Node.js I offer you two approaches, which come with their own benefits and limitations:</p></div><h3 id="solution-a-keep-it-simple" tabindex="-1"><a class="header-anchor" href="#solution-a-keep-it-simple"><span>Solution A: Keep It Simple</span></a></h3><p>Don‚Äôt move node_modules. It will still sit in the default subdirectory of your app in the container, but this means that you have to prevent the node_modules created on your host from being used in the container during development.</p><p><strong>This is my preferred method when doing pure-Docker development.</strong> It works great with a few rules you must follow for local development:</p><h4 id="_1-develop-only-through-the-container" tabindex="-1"><a class="header-anchor" href="#_1-develop-only-through-the-container"><span>1. Develop only through the container</span></a></h4><p>Why? Basically, you don‚Äôt want to mix up the node_modules on your host with the node_modules in the container. On macOS and Windows, Docker Desktop bind-mounts your code across the OS barrier, and this can cause problems with binaries you‚Äôve installed with npm for the host OS, that can‚Äôt be run in the container OS.</p><h4 id="_2-run-all-your-npm-commands-through-docker-compose" tabindex="-1"><a class="header-anchor" href="#_2-run-all-your-npm-commands-through-docker-compose"><span>2. Run all your npm commands through docker-compose.</span></a></h4><p>This means your initial <code>npm install</code> for your project should now be <code>docker-compose run &lt;service name&gt; npm install</code>.</p><h3 id="solution-b-move-container-modules-and-hide-host-modules" tabindex="-1"><a class="header-anchor" href="#solution-b-move-container-modules-and-hide-host-modules"><span>Solution B: Move Container Modules and Hide Host Modules</span></a></h3><p>Relocate node_modules up the file path in the Dockerfile so you can develop Node.js in and out of the container, and the dependencies won‚Äôt clash which you switch between host-native development and Docker-based development.</p><p>Since Node.js is designed to run on multiple OS‚Äôs and architectures, you may not want to always develop in containers. <strong>If you want the flexibility to sometimes develop/run your Node.js app directly on the host, and then other times spin it up in a local container, then Solution B is your jam.</strong></p><figure><img src="https://docker.com/app/uploads/2019/07/node-solution-b.png" alt="node solution b" tabindex="0" loading="lazy"><figcaption>node solution b</figcaption></figure><!-- TODO: ÏΩîÎìúÌôî --><p>Rules for this solution include:</p><p>For both of these solutions, always remember to add <a href="https://github.com/BretFisher/node-docker-good-defaults/blob/69c923bc646bc96003e9ada55d1ec5ca943a1b19/.dockerignore" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-folder-open" sizing="height"></i><code>node_modules</code> to your <i class="vp-icon fa-brands fa-docker" sizing="height"></i><code>.dockerignore</code> file</a> (same syntax as <i class="vp-icon iconfont icon-git" sizing="height"></i><code>.gitignore</code>) so you‚Äôll never accidentally build your images with modules from the host. You always want your builds to run an npm install <strong>inside</strong> the image build.</p><hr><h2 id="use-the-node-user-go-least-privilege" tabindex="-1"><a class="header-anchor" href="#use-the-node-user-go-least-privilege"><span>Use The Node User, Go Least Privilege</span></a></h2><p>All the official Node.js images have a Linux user added in the upstream image called node. <strong>This user is not used by default</strong>, <strong>which means your Node.js app will run as root in the container by default.</strong> This isn‚Äôt the worst thing, as it‚Äôs still isolated to that container, but you should enable in all your projects where you don‚Äôt need Node to run as root. Just add a new line in your <code>Dockerfile</code>: <code>USER node</code></p><div class="hint-container info"><p class="hint-container-title">Here are some rules for using it:</p><ol><li>Location in the <code>Dockerfile</code> matters. Add <code>USER</code> after <code>apt/yum/apk</code> commands, and <em>usually</em> before npm install commands.</li><li>It doesn‚Äôt affect all commands, like <code>COPY</code>, which has <a href="https://docs.docker.com/engine/reference/builder/#copy" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-docker" sizing="height"></i>its own syntax for controlling owner of files you copy in.</a></li><li>You can always switch back to <code>USER root</code> if you need to. In more complex Dockerfiles this will be necessary, like <a href="https://github.com/BretFisher/dockercon19/blob/master/5.Dockerfile" target="_blank" rel="noopener noreferrer">my multi-stage example (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>BretFisher/dockercon19</code>)</a> that includes running tests and security scans during optional stages.</li><li>Permissions may get tricky during development because now you‚Äôll be doing things in the container as a non-root user by default. The way to often get around this is to do things like npm install by telling Docker you want to run those one-off commands as root: <code>docker-compose run -u root npm install</code></li></ol></div><hr><h2 id="don-t-use-process-managers-in-production" tabindex="-1"><a class="header-anchor" href="#don-t-use-process-managers-in-production"><span>Don‚Äôt Use Process Managers In Production</span></a></h2><div class="hint-container info"><p class="hint-container-title">TL;DR</p><p>Except for local development, don‚Äôt wrap your node startup commands with anything. Don‚Äôt use npm, nodemon, etc. Have your <i class="vp-icon fa-brands fa-docker" sizing="height"></i><code>Dockerfile</code> <code>CMD</code> be something like <code>[‚Äúnode‚Äù, ‚Äúfile-to-start.js‚Äù]</code> and you‚Äôll have an easier time managing and replacing your containers.</p></div><p>Nodemon and other ‚Äúfile watchers‚Äù are necessary in development, but one big win for adopting Docker in your Node.js apps is that Docker takes over the job of what we used to use <code>pm2</code>, <code>nodemon</code>, <code>forever</code>, and <code>systemd</code> for on servers.</p><p>Docker, Swarm, and Kubernetes will do the job of running healthchecks and restarting or recreating your container if it fails. It‚Äôs also now the job of orchestrators to scale the number of replicas of our apps, which we used to use tools like pm2 and forever for.</p><div class="hint-container note"><p class="hint-container-title">Note</p><p>Remember, Node.js is still single-threaded in most cases, so even on a single server you‚Äôll likely want to spin up multiple container replicas to take advantage of multiple CPU‚Äôs.</p></div><p><a href="https://github.com/BretFisher/node-docker-good-defaults" target="_blank" rel="noopener noreferrer">My example repo (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>BretFisher/node-docker-good-defaults</code>)</a> shows you how to using node directly in your <i class="vp-icon fa-brands fa-docker" sizing="height"></i><code>Dockerfile</code>, and then for local development, either build use a different image stage with <code>docker build --target &lt;stage name&gt;</code>, or override the CMD in your compose YAML.</p><hr><h2 id="start-node-directly-in-dockerfiles" tabindex="-1"><a class="header-anchor" href="#start-node-directly-in-dockerfiles"><span>Start Node Directly in <code>Dockerfile</code>s</span></a></h2><div class="hint-container info"><p class="hint-container-title">TL;DR</p><p>I also don‚Äôt recommend using npm to start your apps in your <i class="vp-icon fa-brands fa-docker" sizing="height"></i><code>Dockerfile</code>. Let me explain.</p></div><p>I recommend calling the node binary directly, largely due to the ‚ÄúPID 1 Problem‚Äù where you‚Äôll find some confusion and misinformation online about how to deal with this in Node.js apps. <strong>To clear up confusion in the blogosphere, you don‚Äôt always need a ‚Äúinit‚Äù tool to sit between Docker and Node.js, and you should probably spend more time thinking about how your app stops gracefully</strong>.</p><p>Node.js accepts and forwards signals like SIGINT and SIGTERM from the OS, which is important for proper shutdown of your app. Node.js leaves it up to your app to decide how to handle those signals, which means if you don‚Äôt write code or use a module to handle them, your app won‚Äôt shut down gracefully. It‚Äôll ignore those signals and then be killed by Docker or Kubernetes after a timeout period (Docker defaults to 10 seconds, Kubernetes to 30 seconds.) <strong>You‚Äôll care a lot more about this once you have a production HTTP app that you have to ensure doesn‚Äôt just drop connections when you want to update your apps.</strong></p><p><strong>Using other apps to start Node.js for you, like npm for example, often break this signaling.</strong> npm won‚Äôt pass those signals to your app, so it‚Äôs best to leave it out of your <code>Dockerfiles</code> ENTRYPOINT and <code>CMD</code>. This also has the benefit of having one less binary running in the container. Another bonus is it allows you to see in the Dockerfile <strong>exactly</strong> what your app will do when your container is launched, rather then also having to check the package.json for the true startup command.</p><p>For those that know about init options like <code>docker run --init</code> or using <a href="https://github.com/krallin/tini" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-github" sizing="height"></i><code>krallin/tini</code></a> in your Dockerfile, they are good backup options when you can‚Äôt change your app code, but it‚Äôs a much better solution to write code to handle proper signal handling for graceful shutdowns. Two examples are <a href="https://github.com/BretFisher/node-docker-good-defaults/blob/69c923bc646bc96003e9ada55d1ec5ca943a1b19/bin/www#L16-L71" target="_blank" rel="noopener noreferrer">some boilerplate code I have here (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>BretFisher/node-docker-good-defaults</code>)</a>, and looking at modules like <a href="https://github.com/hunterloftis/stoppable" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-github" sizing="height"></i><code>hunterloftis/stoppable</code></a>.</p><hr><h2 id="is-that-all" tabindex="-1"><a class="header-anchor" href="#is-that-all"><span>Is That All?</span></a></h2><p>Nope. These are concerns that nearly every Node.js team deals with, and there‚Äôs lots of other considerations that go along with that. Topics like multi-stage builds, HTTP proxies, npm install performance, healthchecks, CVE scanning, container logging, testing during image builds, and microservice docker-compose setups are all common questions for my Node.js clients and students.</p><div class="hint-container info"><p class="hint-container-title">Info</p><p>If you‚Äôre wanting more info on these topics, you can watch <a href="https://youtu.be/Zgx0o8QjJk4" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-youtube" sizing="height"></i>my DockerCon 2019 session video on this topic</a>, or check my 8-hours of Docker for Node.js videos at <a href="https://bretfisher.com/node" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>bretfisher.com/node</a></p></div><p>Thanks for reading. You can reach me on <a href="https://twitter.com/bretfisher" target="_blank" rel="noopener noreferrer">Twitter (<i class="vp-icon fa-brands fa-x-twitter" sizing="height"></i><code>bretfisher</code>)</a>, get my weekly <a href="https://bretfisher.com/newsletter" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>DevOps and Docker newsletter</a>, subscribe to my <a href="https://youtube.com/@BretFisher" target="_blank" rel="noopener noreferrer">weekly YouTube videos and Live Show (<i class="vp-icon fa-brands fa-youtube" sizing="height"></i><code>@BretFisher</code>)</a>, and check out my <a href="https://bretfisher.com/docker" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>other Docker resources and courses</a>.</p><p>Keep on Dockering!</p><!-- TODO: add ARTICLE CARD --><a class="vp-card" href="https://chanhi2000.github.io/bookshelf/docker.com/keep-nodejs-rockin-in-docker.html" target="_blank" style="background:rgba(29,99,237,0.2);"><img class="vp-card-logo" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker</div><hr><div class="vp-card-desc">There‚Äôs a ton of info out there on using Node.js with Docker, but so much of it is years out of date, and I‚Äôm here to help you optimize your setups for Node.js 10+ and Docker 18.09+.</div></div></a></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/chanhi2000/bookshelf/edit/main/src/docker.com/keep-nodejs-rockin-in-docker.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/bookshelf/devops/docker/articles/" aria-label="/devops/docker/articles/"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->/devops/docker/articles/</div></a><a class="route-link auto-link next" href="/bookshelf/docker.com/road-to-containing-iscsi.html" aria-label="Road to containing iSCSI"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Road to containing iSCSI<i class="vp-icon fa-brands fa-docker" sizing="height"></i></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">MIT Licensed | Copyright ¬© 2022-present <a href="https://github.com/chanhi2000">Chan Hee Lee</a></div><div class="vp-copyright">Copyright ¬© 2026 Bret Fisher </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/bookshelf/assets/app-BItykJLQ.js" defer></script>
  </body>
</html>
