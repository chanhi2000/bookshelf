<!doctype html>
<html lang="en-US" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.99" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Introducing the Docker Desktop WSL 2 BackendDocker","image":["https://docker.com/app/uploads/engineering/2019/10/wsl2_docker_settings-1110x679.jpg","https://docker.com/app/uploads/engineering/2019/10/architecture_hyper_v_backend-1110x851.png","https://docker.com/app/uploads/engineering/2019/10/archtecture_wsl2-1110x900.png"],"datePublished":"2019-10-25T00:00:00.000Z","dateModified":null,"author":[]}</script><meta property="og:url" content="https://chanhi2000.github.io/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html"><meta property="og:site_name" content="üìöBookshelf"><meta property="og:title" content="Introducing the Docker Desktop WSL 2 BackendDocker"><meta property="og:description" content="Article(s) > Introducing the Docker Desktop WSL 2 BackendDocker"><meta property="og:type" content="article"><meta property="og:image" content="https://docker.com/app/uploads/engineering/2019/10/wsl2_docker_settings-1110x679.jpg"><meta property="og:locale" content="en-US"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:src" content="https://docker.com/app/uploads/engineering/2019/10/wsl2_docker_settings-1110x679.jpg"><meta name="twitter:image:alt" content="Introducing the Docker Desktop WSL 2 BackendDocker"><meta property="article:tag" content="docker"><meta property="article:tag" content="devops"><meta property="article:tag" content="docker.com"><meta property="article:tag" content="blog"><meta property="article:published_time" content="2019-10-25T00:00:00.000Z"><link rel="icon" href="/bookshelf/assets/icon/favicon.svg"><title>Introducing the Docker Desktop WSL 2 BackendDocker | üìöBookshelf</title><meta name="description" content="Article(s) > Introducing the Docker Desktop WSL 2 BackendDocker">
    <link rel="preload" href="/bookshelf/assets/style-Bhb-QcDa.css" as="style"><link rel="stylesheet" href="/bookshelf/assets/style-Bhb-QcDa.css">
    
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/bookshelf/" aria-label="Take me home"><img class="vp-nav-logo" src="/bookshelf/assets/icon/favicon.svg" alt><!----><span class="vp-site-name hide-in-pad">üìöBookshelf</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/bookshelf/news.html" aria-label><!--[--><i class="vp-icon fas fa-rss" sizing="height"></i><!--]--><!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-keyboard" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/hackingwithswift.com/" aria-label="hackingwithswift.com"><!--[--><img class="vp-icon" src="https://hackingwithswift.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->hackingwithswift.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fcc/" aria-label="freecodecamp.org"><!--[--><img class="vp-icon" src="https://cdn.freecodecamp.org/universal/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->freecodecamp.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kodeco.com/" aria-label="kodeco.com"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->kodeco.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.kotzilla.io/" aria-label="blog.kotzilla.io"><!--[--><img class="vp-icon" src="https://blog.kotzilla.io/hubfs/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.kotzilla.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kt.academy/" aria-label="kt.academy"><!--[--><img class="vp-icon" src="https://kt.academy/logo.png" alt aria-hidden no-view sizing="both"><!--]-->kt.academy<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/droidcon.com/" aria-label="droidcon.com"><!--[--><img class="vp-icon" src="https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png" alt aria-hidden no-view sizing="both"><!--]-->droidcon.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/outcomeschool.com/" aria-label="outcomeschool.com"><!--[--><img class="vp-icon" src="https://outcomeschool.com/static/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->outcomeschool.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/frontendmasters.com/" aria-label="frontendmasters.com"><!--[--><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->frontendmasters.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tricks.com/" aria-label="css-tricks.com"><!--[--><img class="vp-icon" src="https://css-tricks.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->css-tricks.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="smashingmagazine.com"><!--[--><img class="vp-icon" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->smashingmagazine.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="oddbird.net"><!--[--><img class="vp-icon" src="https://oddbird.net/safari-pinned-tab.svg" alt aria-hidden no-view sizing="both"><!--]-->oddbird.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/zeroheight.com/" aria-label="zeroheight.com"><!--[--><img class="vp-icon" src="https://zeroheight.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->zeroheight.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/typescript.tv/" aria-label="typescript.tv"><!--[--><img class="vp-icon" src="https://typescript.tv/_astro/android-chrome-192x192.BhQ8hcWh.png" alt aria-hidden no-view sizing="both"><!--]-->typescript.tv<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.logrocket.com/" aria-label="blog.logrocket.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.logrocket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/realpython.com/" aria-label="realpython.com"><!--[--><img class="vp-icon" src="https://realpython.com/static/favicon.68cbf4197b0c.png" alt aria-hidden no-view sizing="both"><!--]-->realpython.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/digitalocean.com/" aria-label="digitalocean.com"><!--[--><img class="vp-icon" src="https://digitalocean.com/_next/static/media/favicon.594d6067.ico" alt aria-hidden no-view sizing="both"><!--]-->digitalocean.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/antonioleiva.com/" aria-label="antonioleiva.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/antonioleiva.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->antonioleiva.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/johnnyreilly.com/" aria-label="johnnyreilly.com"><!--[--><img class="vp-icon" src="https://johnnyreilly.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->johnnyreilly.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/code-maze.com/" aria-label="code-maze.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/code-maze.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->code-maze.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/milanjovanovic.tech/" aria-label="milanjovanovic.tech"><!--[--><img class="vp-icon" src="https://milanjovanovic.tech/profile_favicon.png" alt aria-hidden no-view sizing="both"><!--]-->milanjovanovic.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/shopify.engineering/" aria-label="shopify.engineering"><!--[--><img class="vp-icon" src="https://cdn.shopify.com/static/shopify-favicon.png" alt aria-hidden no-view sizing="both"><!--]-->shopify.engineering<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devtoolstips.org/" aria-label="devtoolstips.org"><!--[--><img class="vp-icon" src="https://devtoolstips.org/assets/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devtoolstips.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/piccalil.li/" aria-label="piccalil.li"><!--[--><img class="vp-icon" src="https://piccalil.li/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->piccalil.li<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/sitepoint.com/" aria-label="sitepoint.com"><!--[--><img class="vp-icon" src="https://sitepoint.com/favicons/512x512.png" alt aria-hidden no-view sizing="both"><!--]-->sitepoint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/event-driven.io/" aria-label="event-driven.io"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/event-driven.io/favicon.jfif" alt aria-hidden no-view sizing="both"><!--]-->event-driven.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/packagemain.tech/" aria-label="packagemain.tech"><!--[--><img class="vp-icon" src="https://substack-post-media.s3.amazonaws.com/public/images/2ea54e25-eaa6-4630-bfc0-10b8cfdce894/apple-touch-icon-1024x1024.png" alt aria-hidden no-view sizing="both"><!--]-->packagemain.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/gosolve.io/" aria-label="gosolve.io"><!--[--><img class="vp-icon" src="https://gosolve.io/wp-content/uploads/2022/03/cropped-ikona1-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->gosolve.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/bram.us/" aria-label="bram.us"><!--[--><img class="vp-icon" src="https://bram.us/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->bram.us<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/una.im/" aria-label="una.im"><!--[--><img class="vp-icon" src="https://una.im/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->una.im<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/joshwcomeau.com/" aria-label="joshwcomeau.com"><!--[--><img class="vp-icon" src="https://joshwcomeau.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->joshwcomeau.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tip.com/" aria-label="css-tip.com"><!--[--><img class="vp-icon" src="https://css-tip.com/img/fav.png" alt aria-hidden no-view sizing="both"><!--]-->css-tip.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/nerdy.dev/" aria-label="nerdy.dev"><!--[--><img class="vp-icon" src="https://nerdy.dev/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->nerdy.dev<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/towardsdatascience.com/" aria-label="towardsdatascience.com"><!--[--><img class="vp-icon" src="https://cdn-images-1.medium.com/v2/resize:fill:128:128/1*VzTUkfeGymHP4Bvav-T-lA.png" alt aria-hidden no-view sizing="both"><!--]-->towardsdatascience.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/douggregor.net/" aria-label="douggregor.net"><!--[--><i class="vp-icon fas fa-globe" sizing="both"></i><!--]-->douggregor.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/d2.naver.com/" aria-label="d2.naver.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/d2.naver.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->d2.naver.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakao.com/" aria-label="tech.kakao.com"><!--[--><img class="vp-icon" src="https://www.kakaocorp.com/page/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakao.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakaopay.com/" aria-label="tech.kakaopay.com"><!--[--><img class="vp-icon" src="https://tech.kakaopay.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakaopay.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fe-developers.kakaoent.com/" aria-label="fe-developers.kakaoent.com"><!--[--><img class="vp-icon" src="https://fe-developers.kakaoent.com/favicon-32x32.png?v=44803cb16c1e2debd3984cf2e8cb2ded" alt aria-hidden no-view sizing="both"><!--]-->fe-developers.kakaoent.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/yozm.wishket.com/" aria-label="yozm.wishket.com"><!--[--><img class="vp-icon" src="https://yozm.wishket.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->yozm.wishket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/popit.kr/" aria-label="popit.kr"><!--[--><img class="vp-icon" src="https://popit.kr/wp-content/uploads/2016/08/favicon_32x32.png" alt aria-hidden no-view sizing="both"><!--]-->popit.kr<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devkuma.com/" aria-label="devkuma.com"><!--[--><img class="vp-icon" src="https://devkuma.com/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devkuma.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.gangnamunni.com/" aria-label="blog.gangnamunni.com"><!--[--><img class="vp-icon" src="https://blog.gangnamunni.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->blog.gangnamunni.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/codingeverybody.kr/" aria-label="codingeverybody.kr"><!--[--><img class="vp-icon" src="https://codingeverybody.kr/wp-content/uploads/cropped-favicon-origin-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->codingeverybody.kr<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-network-wired" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tecmint.com/" aria-label="tecmint.com"><!--[--><img class="vp-icon" src="https://tecmint.com/wp-content/uploads/2020/07/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tecmint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/bookshelf/docker.com/" aria-label="docker.com"><!--[--><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->docker.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/learnkube.com/" aria-label="learnkube.com"><!--[--><img class="vp-icon" src="https://static.learnkube.com/f7e5160d4744cf05c46161170b5c11c9.svg" alt aria-hidden no-view sizing="both"><!--]-->learnkube.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/itsfoss.com/" aria-label="itsfoss.com"><!--[--><img class="vp-icon" src="https://itsfoss.com/content/images/size/w256h256/2022/12/android-chrome-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->itsfoss.com<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/chanhi2000/bookshelf" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><!----></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><span class="vp-sidebar-title">docker.com</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2025</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2024</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2023</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2022</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2021</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2020</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">2019</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/containers-today-recap.html" aria-label="Containers Today Recap: The Future of the Developer JourneyDocker"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Containers Today Recap: The Future of the Developer JourneyDocker<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/deep-dive-into-new-docker-desktop-filesharing-implementation.html" aria-label="Deep Dive Into the New Docker Desktop filesharing Implementation Using FUSE"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Deep Dive Into the New Docker Desktop filesharing Implementation Using FUSE<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/new-filesharing-implementation-in-docker-desktop-windows.html" aria-label="New Filesharing Implementation in Docker Desktop Windows Improves Developer Inner Loop UXDocker"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->New Filesharing Implementation in Docker Desktop Windows Improves Developer Inner Loop UXDocker<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/depend-on-docker-for-kubeflow.html" aria-label="Depend on Docker for Kubeflow"><!--[--><i class="vp-icon iconfont icon-k8s" sizing="both"></i><!--]-->Depend on Docker for Kubeflow<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html" aria-label="Introducing the Docker Desktop WSL 2 BackendDocker"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Introducing the Docker Desktop WSL 2 BackendDocker<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/developing-docker-windows-app-wsl2.html" aria-label="Developing Docker-Powered Apps on Windows with WSL 2"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Developing Docker-Powered Apps on Windows with WSL 2<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/maintainable-integration-tests-with-docker.html" aria-label="Write Maintainable Integration Tests with Docker"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Write Maintainable Integration Tests with Docker<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/keep-nodejs-rockin-in-docker.html" aria-label="Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/road-to-containing-iscsi.html" aria-label="Road to containing iSCSI"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Road to containing iSCSI<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/intro-guide-to-dockerfile-best-practices.html" aria-label="Intro Guide to Dockerfile file Best Practices"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Intro Guide to Dockerfile file Best Practices<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/getting-started-with-docker-for-arm-on-linux.html" aria-label="Getting started with Docker for Arm on Linux"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Getting started with Docker for Arm on Linux<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/containerizing-test-tooling-creating-your-dockerfile-and-makefile.html" aria-label="Containerizing Test Tooling: Creating your file and Makefile"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Containerizing Test Tooling: Creating your file and Makefile<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/whats-in-a-container-platform.html" aria-label="What&#39;s in a Container Platform?"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->What&#39;s in a Container Platform?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/multi-arch-images.html" aria-label="Building Multi-Arch Images for Arm and x86 with  Desktop"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Building Multi-Arch Images for Arm and x86 with  Desktop<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/happy-pi-day-docker-raspberry-pi.html" aria-label="Happy Pi Day with  and Raspberry Pi"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Happy Pi Day with  and Raspberry Pi<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/docker.com/addressing-time-drift-in-docker-desktop-for-mac.html" aria-label="Addressing Time Drift in Docker Desktop for Mac"><!--[--><i class="vp-icon fa-brands fa-docker" sizing="both"></i><!--]-->Addressing Time Drift in Docker Desktop for Mac<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2018</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2017</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2016</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2015</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2013</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><div class="page-cover"><img src="https://docker.com/app/uploads/engineering/2019/10/wsl2_docker_settings-1110x679.jpg" alt no-view></div><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon fa-brands fa-docker" sizing="height"></i>Introducing the Docker Desktop WSL 2 BackendDocker</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="Writing DateüìÖ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">10/25/19</span><meta property="datePublished" content="2019-10-25T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time‚åõ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 8 min</span><meta property="timeRequired" content="PT8M"></span><span class="page-category-info" aria-label="Categoryüåà" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color2" role>DevOps</span><span class="page-category-item color8" role>Docker</span><span class="page-category-item color8" role>Article(s)</span><!--]--><meta property="articleSection" content="DevOps,Docker,Article(s)"></span><span class="page-tag-info" aria-label="Tagüè∑" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8" role>blog</span><span class="page-tag-item color5" role>docker.com</span><span class="page-tag-item color7" role>devops</span><span class="page-tag-item color2" role>docker</span><!--]--><meta property="keywords" content="blog,docker.com,devops,docker"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´" tabindex="-1"><a class="header-anchor" href="#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"><span>Introducing the Docker Desktop WSL 2 BackendDocker Í¥ÄÎ†®</span></a></h1><a class="route-link vp-card" href="/bookshelf/devops/docker/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="/bookshelf/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Docker > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><nav class="table-of-contents"><ul><li><a aria-current="page" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html#what-s-changed-since-the-tech-preview" class="router-link-active router-link-exact-active">What‚Äôs Changed Since the Tech Preview</a></li><li><a aria-current="page" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html#what-is-new" class="router-link-active router-link-exact-active">What is new?</a></li><li><a aria-current="page" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html#introducing-our-new-architecture" class="router-link-active router-link-exact-active">Introducing our new architecture</a><ul><li><a aria-current="page" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html#architecture-of-the-hyper-v-backend" class="router-link-active router-link-exact-active">Architecture of the Hyper-V backend</a></li><li><a aria-current="page" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html#how-it-translates-to-the-new-wsl-2-backend" class="router-link-active router-link-exact-active">How it translates to the new WSL 2 backend</a></li></ul></li><li><a aria-current="page" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html#linux-workspaces-support" class="router-link-active router-link-exact-active">Linux Workspaces support</a></li><li><a aria-current="page" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html#initial-limitations" class="router-link-active router-link-exact-active">Initial limitations</a></li><li><a aria-current="page" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html#why-did-we-do-that" class="router-link-active router-link-exact-active">Why did we do that?</a></li><li><a aria-current="page" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html#top-issues-driving-this-decision" class="router-link-active router-link-exact-active">Top issues driving this decision</a><ul><li><a aria-current="page" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html#users-want-kubernetes-support" class="router-link-active router-link-exact-active">Users want Kubernetes support</a></li><li><a aria-current="page" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html#docker-compose-cannot-talk-to-the-wsl-2-engine" class="router-link-active router-link-exact-active">Docker-compose cannot talk to the WSL 2 engine</a></li><li><a aria-current="page" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html#sometimes-containers-networking-don-t-work" class="router-link-active router-link-exact-active">Sometimes containers networking don‚Äôt work</a></li><li><a aria-current="page" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html#diagnostics-are-a-nightmare" class="router-link-active router-link-exact-active">Diagnostics are a nightmare</a></li><li><a aria-current="page" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html#supporting-more-than-one-hosting-distro-is-challenging" class="router-link-active router-link-exact-active">Supporting more than one ‚Äúhosting distro‚Äù is challenging</a></li><li><a aria-current="page" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html#maintenance-cost-of-the-integration-package-is-very-high" class="router-link-active router-link-exact-active">Maintenance cost of the integration package is very high</a></li><li><a aria-current="page" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html#handling-upgrades-is-very-hard" class="router-link-active router-link-exact-active">Handling upgrades is very hard</a></li></ul></li><li><a aria-current="page" href="/bookshelf/docker.com/new-docker-desktop-wsl2-backend.html#the-future-of-docker-desktop" class="router-link-active router-link-exact-active">The future of Docker Desktop</a></li></ul></nav><hr><div class="vp-site-info" data-name="Introducing the Docker Desktop WSL 2 BackendDocker"><a class="vp-site-info-navigator no-external-link-icon" title="Introducing the Docker Desktop WSL 2 BackendDocker" href="https://docker.com/blog/new-docker-desktop-wsl2-backend#what-s-changed-since-the-tech-preview" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://docker.com/app/uploads/engineering/2019/10/wsl2_docker_settings-1110x679.jpg) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt loading="lazy" no-view><div class="vp-site-info-name">Introducing the Docker Desktop WSL 2 BackendDocker</div><div class="vp-site-info-desc">Learn from Docker experts to simplify and advance your app development and management with Docker. Stay up to date on Docker events and new version</div></div><!----></div><h2 id="what-s-changed-since-the-tech-preview" tabindex="-1"><a class="header-anchor" href="#what-s-changed-since-the-tech-preview"><span>What‚Äôs Changed Since the Tech Preview</span></a></h2><p>Earlier this year, we released a technical preview of our vision for the future of Docker development on Windows using WSL 2. We received lots of feedback from Windows Insiders via different channels, and collated common failure cases. We also used it ourselves a lot, and took the time to evaluate its architecture.</p><p>Based on this analysis, we worked hard to redesign Docker Desktop‚Äôs WSL2 integration in a more robust and easier to maintain way, while ensuring we get feature parity with what we have today with our Hyper-V backend.</p><hr><h2 id="what-is-new" tabindex="-1"><a class="header-anchor" href="#what-is-new"><span>What is new?</span></a></h2><p>Before digging into the details of the new backend architecture, let us see what new features we have:</p><ol><li>Kubernetes support: you can now enable Kubernetes when using the WSL 2 backend</li><li>Updated daemon: our WSL 2 backend now runs our latest stable Docker Daemon</li><li>VPN-friendly networking: our WSL 2 backend leverages our efforts in this area, using vpnkit to ensure a VPN-friendly networking stack</li><li>And more: the WSL 2 backend is now at feature parity with our Hyper-V backend. HTTP proxy settings, trusted CA synchronization, version pack support, support for our new container UI‚Ä¶</li></ol><p>This new backend can be enabled in Docker Desktop settings:</p><figure><img src="https://docker.com/app/uploads/engineering/2019/10/wsl2_docker_settings-1110x679.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Once WSL 2 is generally available, we will remove this checkbox, and automatically switch on the WSL 2 backend on compatible machines.</p><hr><h2 id="introducing-our-new-architecture" tabindex="-1"><a class="header-anchor" href="#introducing-our-new-architecture"><span>Introducing our new architecture</span></a></h2><p>Based on our users feedback, and on the requirements we identified internally, there are 3 major aspects that we wanted to change in the WSL integration architecture:</p><ul><li>Run in an isolated environment: we want to run in a separate network/pid/mount namespace, to avoid as much as possible side effects from other applications running on WSL2</li><li>Leverage our current codebase to avoid re-implementing all the features we already implemented in our own Hyper-V VM</li><li>Have a complete integration with the existing UI our users are familiar with.</li></ul><h3 id="architecture-of-the-hyper-v-backend" tabindex="-1"><a class="header-anchor" href="#architecture-of-the-hyper-v-backend"><span>Architecture of the Hyper-V backend</span></a></h3><figure><img src="https://docker.com/app/uploads/engineering/2019/10/architecture_hyper_v_backend-1110x851.png" alt="architecture hyper v backend" tabindex="0" loading="lazy"><figcaption>architecture hyper v backend</figcaption></figure><p>To understand this new architecture, we need to step back a little and look at how the Hyper-V backend is designed, and how the Windows frontend communicates with it.</p><p>The most important thing is the Linux VM we run on Hyper-V. This Linux VM is entirely built using LinuxKit which makes it very easy for us to have precise control over everything that runs in it. We wrote a number of LinuxKit components, used both in our Hyper-V and Mac VMs: services controlling the lifecycle of Docker and Kubernetes, services to collect diagnostics in case of failure, services aggregating logs, etc. Those services are packaged in an iso file in the Docker Desktop installation directory (docker-desktop.iso).</p><p>On top of this base distro, at runtime we mount a second iso, that we call a version-pack iso. This file contains binaries and deployment / upgrade scripts specific to a version of the Docker Engine and Kubernetes. In Enterprise edition, this second iso is part of the version packs we publish, while in Community, a single version pack is supported (the docker.iso file, also present in the docker desktop installation folder).</p><p>Before starting the VM, we also attach a VHD to store container images and configs, as well as the Kubernetes data store.</p><p>To make those services reachable from the Windows side, we built a proxy that exposes Unix sockets as Windows named pipes, using Hyper-V Sockets under the hood.</p><h3 id="how-it-translates-to-the-new-wsl-2-backend" tabindex="-1"><a class="header-anchor" href="#how-it-translates-to-the-new-wsl-2-backend"><span>How it translates to the new WSL 2 backend</span></a></h3><p>The new WSL backend design is very close to that, with the difference that we don‚Äôt run the LinuxKit distro in a VM but‚Ä¶ in a container.</p><figure><img src="https://docker.com/app/uploads/engineering/2019/10/archtecture_wsl2-1110x900.png" alt="archtecture wsl2" tabindex="0" loading="lazy"><figcaption>archtecture wsl2</figcaption></figure><p>This will create 2 WSL distros for you:</p><ul><li>Docker-desktop, which I‚Äôll call the bootstrapping distro</li><li>Docker-desktop-data, which I‚Äôll call the data store distro</li></ul><p>From a high level perspective, the bootstrapping distro essentially replaces Hyper-V, while the data store distro replaces the VHD that we previously attached to the VM.</p><p>The bootstrapping distro creates a Linux namespace with its own root filesystem based on the same 2 iso files we mentioned earlier (not entirely true, but close enough), and use the data-store distro as the backing store for container images etc. instead of a VHD (WSL 2 does not allow us to attach additional VHD at the moment, so we leverage cross-distro mounts for that). The first iso file is slightly modified from the original one: we have stripped out the Linux Kernel, and the system services provided out of the box by WSL 2. The second one (the version pack iso), is strictly identical to the one we use with Hyper-V (and on Mac as well). The bootstrapping distro also manages things like mounting the Windows 9p shares in a place that can be accessed by the Linuxkit container (to avoid using Samba for sharing Windows files with containers), and controls the lifecycle of the Linuxkit container (ensuring clean shutdown etc.).</p><p>This way, Docker runs in a contained environment that is very similar to Hyper-V and MacOS VMs. So close that we actually share the same code base for our Linuxkit components, we very quickly achieved feature parity with Hyper-V backend using the same version pack isos, and the same Windows side code base.</p><p>The big difference that this makes is that it starts 15 times quicker than our Hyper-V VM, and thanks to WSL 2 dynamic resource allocations, it can access all the resources of the machine, and consume as little as it really needs. It will make it able to run in environments with lower memory where it was previously difficult to allocate 2GB of the Hyper-V VM upfront.</p><p>In a longer term, it also opens the door to supporting Windows versions where Hyper-V is not available but WSL 2 is (Windows Home edition in particular).</p><hr><h2 id="linux-workspaces-support" tabindex="-1"><a class="header-anchor" href="#linux-workspaces-support"><span>Linux Workspaces support</span></a></h2><p>With the tech preview architecture, Linux Workspaces were very easy to implement: the daemon ran in your own distro, so it had direct access to your filesystem. Exposing the daemon worked out of the box as well as bind mounts.</p><p>With the new architecture, things are a little bit trickier: we run in a separate distro, and inside an isolated namespace, so how can we achieve the same level of performance?</p><p>WSL 2 runs all distros in the same utility VM, sharing the same Kernel. Recently, Microsoft introduced cross-distros bindings, which enables access to the VHD of a given distro from another. Using this we are actually able to expose the daemon to the user distro, and we can access the user distro files from within our contained environment with native Linux performance.</p><p>To make bind-mounts a seamless experience, we introduced a docker api proxy similar to the one we use for enabling bind mounts of Windows files that translates paths relative to the user distro into a path to the same file accessible from the LinuxKit container.</p><hr><h2 id="initial-limitations" tabindex="-1"><a class="header-anchor" href="#initial-limitations"><span>Initial limitations</span></a></h2><p>We are still working on polishing the Linux Workspace experience. Initially, you will have to deal with those following limitations:</p><ol><li>You can only mounts files backed by your distro VHD (that means you can‚Äôt bind mounts things within /tmp, /mnt, /var/run, /proc, /sys etc.). For most people, this should not be a problem, but mounting things like /var/run/docker.sock in a container won‚Äôt work initially. We are working with Microsoft on solving this issue, a future Windows Update will bring full bind mount support.</li><li>We don‚Äôt provide client binaries yet. You need to install the docker cli and plugins using apt, yum or any other package manager on your distro. We will automate this in a later update.</li></ol><hr><h2 id="why-did-we-do-that" tabindex="-1"><a class="header-anchor" href="#why-did-we-do-that"><span>Why did we do that?</span></a></h2><p>When we released the tech preview, what we wanted was to put in the hands of real users, something that represents the vision we have about the future of Linux container development on Windows. We worked very quickly, aside from our main Docker Desktop project to build something we could experiment with, and collected a lot of user feedback (thank you Windows Insiders by the way, this helped a lot!).</p><p>We also challenged the tech preview architecture in term of long term concerns such as maintenance costs, problems diagnostics, stability, update handling, code sharing with other backends etc.</p><p>We then went back to the whiteboard, designed a few potential alternative architectures, and found that with minimal effort, we would be able to run our LinuxKit VM, with very small modifications, in a container within WSL 2. This approach makes it really easy to implement the same exact mechanisms as we have today for things like problems diagnostics, handling updates, ensuring version pack support, and feature parity with our other backends.</p><p>We went to a prototyping phase that proved successful and went on to integrate it directly in our Docker Desktop codebase.</p><hr><h2 id="top-issues-driving-this-decision" tabindex="-1"><a class="header-anchor" href="#top-issues-driving-this-decision"><span>Top issues driving this decision</span></a></h2><h3 id="users-want-kubernetes-support" tabindex="-1"><a class="header-anchor" href="#users-want-kubernetes-support"><span>Users want Kubernetes support</span></a></h3><p>In a larger extent, we want feature parity with the Hyper-V backend. This includes Kubernetes support, of course but also many hidden features like:</p><ul><li>Version pack support in Enterprise</li><li>Trusted CA synchronization</li><li>VPN-friendly networking</li><li>HTTP proxies support</li></ul><p>Our new architecture solve all this.</p><h3 id="docker-compose-cannot-talk-to-the-wsl-2-engine" tabindex="-1"><a class="header-anchor" href="#docker-compose-cannot-talk-to-the-wsl-2-engine"><span>Docker-compose cannot talk to the WSL 2 engine</span></a></h3><p>The version of docker-compose we shipped with the tech preview was not aware of docker contexts. While we are working on fixing docker-compose, the new architecture makes it easier for client tools not supporting docker context yet to work with (including older versions of docker-compose).</p><h3 id="sometimes-containers-networking-don-t-work" tabindex="-1"><a class="header-anchor" href="#sometimes-containers-networking-don-t-work"><span>Sometimes containers networking don‚Äôt work</span></a></h3><p>We identified several reasons for that, and they are all related to a flaw in our original design: the tech preview runs within your own distro. In this distro you might be running other applications that might deal with network interfaces, iptables, etc. It can create conflicts that are completely outside of our control.</p><p>Even worse, all WSL2 distros run in the same network namespace‚Ä¶ we have had reports from some users who had issues because they tried to run docker in 2 distros at once. Naturally the 2 Docker daemons killed each other by creating conflicting iptables rules.</p><p>Our new architecture is not subject to this issue any more.</p><h3 id="diagnostics-are-a-nightmare" tabindex="-1"><a class="header-anchor" href="#diagnostics-are-a-nightmare"><span>Diagnostics are a nightmare</span></a></h3><p>Running within a distro that we don‚Äôt control causes huge challenges in terms of problem diagnostics. Especially when adding support for Kubernetes.</p><p>There are too many ways the user can break everything, and it is very difficult to create a diagnostics system collecting only non-sensitive data on a system we don‚Äôt control. Running within an isolated container solves this issue for us, and we can leverage the same diagnostics services we already use in the Hyper-V and Mac backends.</p><h3 id="supporting-more-than-one-hosting-distro-is-challenging" tabindex="-1"><a class="header-anchor" href="#supporting-more-than-one-hosting-distro-is-challenging"><span>Supporting more than one ‚Äúhosting distro‚Äù is challenging</span></a></h3><p>Not all our users want to run on Ubuntu, we recognize that and want to give them the choice. However automating installation of the integration package in a really ‚Äúuniversal‚Äù way is very challenging. By running in our own WSL distro, within a container, we don‚Äôt have this issue anymore, and keep the same filesystem performance thanks to cross-distro bind mounts.</p><h3 id="maintenance-cost-of-the-integration-package-is-very-high" tabindex="-1"><a class="header-anchor" href="#maintenance-cost-of-the-integration-package-is-very-high"><span>Maintenance cost of the integration package is very high</span></a></h3><p>The architecture of the Hyper-V and Mac backends makes it easy for us to share a lot of code. Mac and Windows VMs are almost identical, and we want to keep this great productivity value on WSL 2 as well. The cost of implementing all the features in a new way with the integration package was too high.</p><p>Our new approach allows us to share the large majority of our Linux code base between Mac, Hyper-V and WSL 2 backends.</p><h3 id="handling-upgrades-is-very-hard" tabindex="-1"><a class="header-anchor" href="#handling-upgrades-is-very-hard"><span>Handling upgrades is very hard</span></a></h3><p>We have extensive experience at handling upgrades with Docker Desktop. It is hard, and we don‚Äôt want to duplicate this work.</p><p>The new architecture shares the same exact logic as what we have in place for Hyper-V and Mac backends.</p><hr><h2 id="the-future-of-docker-desktop" tabindex="-1"><a class="header-anchor" href="#the-future-of-docker-desktop"><span>The future of Docker Desktop</span></a></h2><p>Once Microsoft makes WSL 2 generally available, we plan to enable the WSL 2 engine on all supported Windows versions by default. We will still support the Hyper-V backend until Microsoft stops supporting Windows versions without WSL 2 though, but only as a fallback mechanism.</p><p>By moving to this ‚ÄúWSL 2 first‚Äù approach, we also want to take advantage of its unique characteristics to unlock new features in the future. As an example, WSL 2 is supported on Windows 10 Home. We want to take advantage of that to reach new users in the future (nothing to announce yet, but it is definitely in our backlog).</p><p>This new backend paves the way for exciting new features to come, and we are eager to hear your feedback.</p><p>We will be releasing the new WSL 2 architecture as part of the next Docker Desktop Edge release. For Windows users already with WSL 2 <a href="https://download.docker.com/win/edge/Docker%20Desktop%20Installer.exe" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-docker" sizing="height"></i>Download Edge today</a> to get access to the latest Docker architecture in the next couple of weeks.</p><!-- TODO: add ARTICLE CARD --><a class="vp-card" href="https://chanhi2000.github.io/bookshelf/docker.com/new-docker-desktop-wsl2-backend#what-s-changed-since-the-tech-preview.html" target="_blank" style="background:rgba(29,99,237,0.2);"><img class="vp-card-logo" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Introducing the Docker Desktop WSL 2 BackendDocker</div><hr><div class="vp-card-desc">Learn from Docker experts to simplify and advance your app development and management with Docker. Stay up to date on Docker events and new version</div></div></a></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/chanhi2000/bookshelf/edit/main/src/docker.com/new-docker-desktop-wsl2-backend.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/bookshelf/devops/docker/articles/" aria-label="/devops/docker/articles/"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->/devops/docker/articles/</div></a><a class="route-link auto-link next" href="/bookshelf/docker.com/developing-docker-windows-app-wsl2.html" aria-label="Developing Docker-Powered Apps on Windows with WSL 2"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Developing Docker-Powered Apps on Windows with WSL 2<i class="vp-icon fa-brands fa-docker" sizing="height"></i></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">MIT Licensed | Copyright ¬© 2022-present <a href="https://github.com/chanhi2000">Chan Hee Lee</a></div><!----></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/bookshelf/assets/app-BItykJLQ.js" defer></script>
  </body>
</html>
