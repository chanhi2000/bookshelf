<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.24" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.94" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Using ES modules in Node.js","image":["https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/es-modules-in-node-today/banner.jpeg"],"datePublished":"2021-03-03T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"Alexander Nnakwue","url":"https://blog.logrocket.com/author/alexandernnakwue/"}]}</script><meta property="og:url" content="https://chanhi2000.github.io/bookshelf/blog.logrocket.com/es-modules-in-node-today.html"><meta property="og:site_name" content="📚Bookshelf"><meta property="og:title" content="Using ES modules in Node.js"><meta property="og:description" content="Article(s) > Using ES modules in Node.js"><meta property="og:type" content="article"><meta property="og:image" content="https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/es-modules-in-node-today/banner.jpeg"><meta property="og:locale" content="en-US"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:src" content="https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/es-modules-in-node-today/banner.jpeg"><meta name="twitter:image:alt" content="Using ES modules in Node.js"><meta property="article:author" content="Alexander Nnakwue"><meta property="article:tag" content="node-js"><meta property="article:tag" content="nodejs"><meta property="article:tag" content="node"><meta property="article:tag" content="blog.logrocket.com"><meta property="article:tag" content="blog"><meta property="article:published_time" content="2021-03-03T00:00:00.000Z"><link rel="icon" href="/bookshelf/assets/icon/favicon.svg"><title>Using ES modules in Node.js | 📚Bookshelf</title><meta name="description" content="Article(s) > Using ES modules in Node.js">
    <link rel="preload" href="/bookshelf/assets/style-DmRYlEXZ.css" as="style"><link rel="stylesheet" href="/bookshelf/assets/style-DmRYlEXZ.css">
    
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/bookshelf/" aria-label="Take me home"><img class="vp-nav-logo" src="/bookshelf/assets/icon/favicon.svg" alt><!----><span class="vp-site-name hide-in-pad">📚Bookshelf</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/bookshelf/news.html" aria-label><!--[--><i class="vp-icon fas fa-rss" sizing="height"></i><!--]--><!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-keyboard" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/hackingwithswift.com/" aria-label="hackingwithswift.com"><!--[--><img class="vp-icon" src="https://hackingwithswift.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->hackingwithswift.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fcc/" aria-label="freecodecamp.org"><!--[--><img class="vp-icon" src="https://cdn.freecodecamp.org/universal/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->freecodecamp.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kodeco.com/" aria-label="kodeco.com"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->kodeco.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.kotzilla.io/" aria-label="blog.kotzilla.io"><!--[--><img class="vp-icon" src="https://blog.kotzilla.io/hubfs/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.kotzilla.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kt.academy/" aria-label="kt.academy"><!--[--><img class="vp-icon" src="https://kt.academy/logo.png" alt aria-hidden no-view sizing="both"><!--]-->kt.academy<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/droidcon.com/" aria-label="droidcon.com"><!--[--><img class="vp-icon" src="https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png" alt aria-hidden no-view sizing="both"><!--]-->droidcon.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/outcomeschool.com/" aria-label="outcomeschool.com"><!--[--><img class="vp-icon" src="https://outcomeschool.com/static/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->outcomeschool.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/frontendmasters.com/" aria-label="frontendmasters.com"><!--[--><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->frontendmasters.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tricks.com/" aria-label="css-tricks.com"><!--[--><img class="vp-icon" src="https://css-tricks.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->css-tricks.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="smashingmagazine.com"><!--[--><img class="vp-icon" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->smashingmagazine.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/bookshelf/blog.logrocket.com/" aria-label="blog.logrocket.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.logrocket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/realpython.com/" aria-label="realpython.com"><!--[--><img class="vp-icon" src="https://realpython.com/static/favicon.68cbf4197b0c.png" alt aria-hidden no-view sizing="both"><!--]-->realpython.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/digitalocean.com/" aria-label="digitalocean.com"><!--[--><img class="vp-icon" src="https://digitalocean.com/_next/static/media/favicon.594d6067.ico" alt aria-hidden no-view sizing="both"><!--]-->digitalocean.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/antonioleiva.com/" aria-label="antonioleiva.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/antonioleiva.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->antonioleiva.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/johnnyreilly.com/" aria-label="johnnyreilly.com"><!--[--><img class="vp-icon" src="https://johnnyreilly.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->johnnyreilly.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/code-maze.com/" aria-label="code-maze.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/code-maze.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->code-maze.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/milanjovanovic.tech/" aria-label="milanjovanovic.tech"><!--[--><img class="vp-icon" src="https://milanjovanovic.tech/profile_favicon.png" alt aria-hidden no-view sizing="both"><!--]-->milanjovanovic.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/shopify.engineering/" aria-label="shopify.engineering"><!--[--><img class="vp-icon" src="https://cdn.shopify.com/static/shopify-favicon.png" alt aria-hidden no-view sizing="both"><!--]-->shopify.engineering<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devtoolstips.org/" aria-label="devtoolstips.org"><!--[--><img class="vp-icon" src="https://devtoolstips.org/assets/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devtoolstips.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/piccalil.li/" aria-label="piccalil.li"><!--[--><img class="vp-icon" src="https://piccalil.li/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->piccalil.li<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/sitepoint.com/" aria-label="sitepoint.com"><!--[--><img class="vp-icon" src="https://sitepoint.com/favicons/512x512.png" alt aria-hidden no-view sizing="both"><!--]-->sitepoint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/event-driven.io/" aria-label="event-driven.io"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/event-driven.io/favicon.jfif" alt aria-hidden no-view sizing="both"><!--]-->event-driven.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/packagemain.tech/" aria-label="packagemain.tech"><!--[--><img class="vp-icon" src="https://substack-post-media.s3.amazonaws.com/public/images/2ea54e25-eaa6-4630-bfc0-10b8cfdce894/apple-touch-icon-1024x1024.png" alt aria-hidden no-view sizing="both"><!--]-->packagemain.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/gosolve.io/" aria-label="gosolve.io"><!--[--><img class="vp-icon" src="https://gosolve.io/wp-content/uploads/2022/03/cropped-ikona1-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->gosolve.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/towardsdatascience.com/" aria-label="towardsdatascience.com"><!--[--><img class="vp-icon" src="https://cdn-images-1.medium.com/v2/resize:fill:128:128/1*VzTUkfeGymHP4Bvav-T-lA.png" alt aria-hidden no-view sizing="both"><!--]-->towardsdatascience.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/douggregor.net/" aria-label="douggregor.net"><!--[--><i class="vp-icon fas fa-globe" sizing="both"></i><!--]-->douggregor.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/d2.naver.com/" aria-label="d2.naver.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/d2.naver.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->d2.naver.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakao.com/" aria-label="tech.kakao.com"><!--[--><img class="vp-icon" src="https://www.kakaocorp.com/page/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakao.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakaopay.com/" aria-label="tech.kakaopay.com"><!--[--><img class="vp-icon" src="https://tech.kakaopay.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakaopay.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fe-developers.kakaoent.com/" aria-label="fe-developers.kakaoent.com"><!--[--><img class="vp-icon" src="https://fe-developers.kakaoent.com/favicon-32x32.png?v=44803cb16c1e2debd3984cf2e8cb2ded" alt aria-hidden no-view sizing="both"><!--]-->fe-developers.kakaoent.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/yozm.wishket.com/" aria-label="yozm.wishket.com"><!--[--><img class="vp-icon" src="https://yozm.wishket.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->yozm.wishket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/popit.kr/" aria-label="popit.kr"><!--[--><img class="vp-icon" src="https://popit.kr/wp-content/uploads/2016/08/favicon_32x32.png" alt aria-hidden no-view sizing="both"><!--]-->popit.kr<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devkuma.com/" aria-label="devkuma.com"><!--[--><img class="vp-icon" src="https://devkuma.com/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devkuma.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.gangnamunni.com/" aria-label="blog.gangnamunni.com"><!--[--><img class="vp-icon" src="https://blog.gangnamunni.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->blog.gangnamunni.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/codingeverybody.kr/" aria-label="codingeverybody.kr"><!--[--><img class="vp-icon" src="https://codingeverybody.kr/wp-content/uploads/cropped-favicon-origin-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->codingeverybody.kr<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-network-wired" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tecmint.com/" aria-label="tecmint.com"><!--[--><img class="vp-icon" src="https://tecmint.com/wp-content/uploads/2020/07/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tecmint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/docker.com/" aria-label="docker.com"><!--[--><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->docker.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/learnk8s.io/" aria-label="learnk8s.io"><!--[--><img class="vp-icon" src="https://static.learnk8s.io/f7e5160d4744cf05c46161170b5c11c9.svg" alt aria-hidden no-view sizing="both"><!--]-->learnk8s.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/itsfoss.com/" aria-label="itsfoss.com"><!--[--><img class="vp-icon" src="https://itsfoss.com/content/images/size/w256h256/2022/12/android-chrome-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->itsfoss.com<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/chanhi2000/articles" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-appearance-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-appearance-dropdown"><!----></div></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><span class="vp-sidebar-title">blog.logrocket.com</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2025</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2024</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2023</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2022</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">2021</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/whats-new-django-v4.html" aria-label="What&#39;s new in Django v4.0"><!--[--><i class="vp-icon iconfont icon-django" sizing="both"></i><!--]-->What&#39;s new in Django v4.0<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/making-django-migrations-python.html" aria-label="Making Django migrations in Python"><!--[--><i class="vp-icon iconfont icon-django" sizing="both"></i><!--]-->Making Django migrations in Python<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/why-your-css-fails.html" aria-label="Understanding why your CSS fails"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Understanding why your CSS fails<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/fundamentals-functional-programming-react.html" aria-label="Fundamentals of functional programming with React"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Fundamentals of functional programming with React<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/using-axios-all-make-concurrent-requests.html" aria-label="Using axios.all to make concurrent requests"><!--[--><i class="vp-icon iconfont icon-axios" sizing="both"></i><!--]-->Using axios.all to make concurrent requests<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/animations-react-hooks-greensock.html" aria-label="Animations using React Hooks and GreenSock"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Animations using React Hooks and GreenSock<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/controlled-vs-uncontrolled-components-in-react.html" aria-label="Controlled vs. uncontrolled components in React"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Controlled vs. uncontrolled components in React<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/detect-click-outside-react-component-how-to.html" aria-label="How to detect a click outside a React component"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->How to detect a click outside a React component<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/css-margin-vs-padding.html" aria-label="CSS margin vs. padding"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->CSS margin vs. padding<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/using-setstate-react-components.html" aria-label="Using setState in React components"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Using setState in React components<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/level-up-your-css-selector-skills.html" aria-label="A complete guide for leveling up your CSS selector skills"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->A complete guide for leveling up your CSS selector skills<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/guide-to-css-animation-for-javascript-developers.html" aria-label="Guide to CSS animation for JavaScript developers"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Guide to CSS animation for JavaScript developers<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/create-react-app-a-quick-setup-guide.html" aria-label="Create React App: A quick setup guide"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Create React App: A quick setup guide<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/a-deep-dive-into-css-modules.html" aria-label="A deep dive into CSS Module"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->A deep dive into CSS Module<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/usestate-vs-useref.html" aria-label="useState vs. useRef: Similarities, differences, and use cases"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->useState vs. useRef: Similarities, differences, and use cases<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/react-hooks-state-management.html" aria-label="Using React Hooks for state management"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Using React Hooks for state management<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/using-state-machines-with-xstate-and-react.html" aria-label="Using state machines with XState and React"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Using state machines with XState and React<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/understanding-common-frustrations-react-hooks.html" aria-label="Understanding common frustrations with React Hooks"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Understanding common frustrations with React Hooks<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/javascript-generators-the-superior-async-await.html" aria-label="JavaScript generators: The superior async/await"><!--[--><i class="vp-icon iconfont icon-typescript" sizing="both"></i><!--]-->JavaScript generators: The superior async/await<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/bookshelf/blog.logrocket.com/es-modules-in-node-today.html" aria-label="Using ES modules in Node.js"><!--[--><i class="vp-icon fa-brands fa-node" sizing="both"></i><!--]-->Using ES modules in Node.js<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/react-memo-vs-usememo.html" aria-label="React.memo vs. useMemo: Major differences and use cases"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->React.memo vs. useMemo: Major differences and use cases<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/managing-react-state-zustand.html" aria-label="Managing React state with Zustand"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Managing React state with Zustand<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/immer-and-immutable-js-how-do-they-compare.html" aria-label="Immer and Immutable.js: How do they compare?"><!--[--><i class="vp-icon fa-brands fa-node" sizing="both"></i><!--]-->Immer and Immutable.js: How do they compare?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/avoiding-common-mistakes-in-react-hooks.html" aria-label="Avoiding common mistakes in React Hooks"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Avoiding common mistakes in React Hooks<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2020</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2019</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2018</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><div class="page-cover"><img src="/bookshelf/assets/image/blog.logrocket.com/es-modules-in-node-today/banner.jpeg" alt no-view></div><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon fa-brands fa-node" sizing="height"></i>Using ES modules in Node.js</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://blog.logrocket.com/author/alexandernnakwue/" target="_blank" rel="noopener noreferrer">Alexander Nnakwue</a></span><span property="author" content="Alexander Nnakwue"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">3/3/21</span><meta property="datePublished" content="2021-03-03T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 15 min</span><meta property="timeRequired" content="PT15M"></span><span class="page-category-info" aria-label="Category🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color1" role>Node.js</span><span class="page-category-item color8" role>Article(s)</span><!--]--><meta property="articleSection" content="Node.js,Article(s)"></span><span class="page-tag-info" aria-label="Tag🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8" role>blog</span><span class="page-tag-item color5" role>blog.logrocket.com</span><span class="page-tag-item color2" role>node</span><span class="page-tag-item color6" role>nodejs</span><span class="page-tag-item color3" role>node-js</span><!--]--><meta property="keywords" content="blog,blog.logrocket.com,node,nodejs,node-js"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="frontmatter-title-관련" tabindex="-1"><a class="header-anchor" href="#frontmatter-title-관련"><span>Using ES modules in Node.js 관련</span></a></h1><a class="route-link vp-card" href="/bookshelf/programming/js-node/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="/bookshelf/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Node.js > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><nav class="table-of-contents"><ul><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/es-modules-in-node-today.html#introduction" class="router-link-active router-link-exact-active">Introduction</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/es-modules-in-node-today.html#table-of-contents" class="router-link-active router-link-exact-active">Table of contents</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/es-modules-in-node-today.html#what-are-es-modules" class="router-link-active router-link-exact-active">What are ES modules?</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/es-modules-in-node-today.html#adding-support-for-es-modules-in-node-today" class="router-link-active router-link-exact-active">Adding support for ES modules in Node today</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/es-modules-in-node-today.html#package-scope" class="router-link-active router-link-exact-active">Package scope</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/es-modules-in-node-today.html#import-and-export-syntax-in-es-modules" class="router-link-active router-link-exact-active">Import and export syntax in ES modules</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/es-modules-in-node-today.html#package-entry-points" class="router-link-active router-link-exact-active">Package entry points</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/es-modules-in-node-today.html#commonjs-module-system" class="router-link-active router-link-exact-active">CommonJS module system</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/es-modules-in-node-today.html#interoperability-for-both-module-systems" class="router-link-active router-link-exact-active">Interoperability for both module systems</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/es-modules-in-node-today.html#features-of-both-module-systems" class="router-link-active router-link-exact-active">Features of both module systems</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/es-modules-in-node-today.html#es-modules-moving-forward" class="router-link-active router-link-exact-active">ES modules moving forward</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/es-modules-in-node-today.html#conclusion" class="router-link-active router-link-exact-active">Conclusion</a></li></ul></nav><hr><div class="vp-site-info" data-name="Using ES modules in Node.js"><a class="vp-site-info-navigator no-external-link-icon" title="Using ES modules in Node.js" href="https://blog.logrocket.com/es-modules-in-node-today" target="_blank"></a><div class="vp-site-info-preview" style="background:url(/bookshelf/assets/image/blog.logrocket.com/es-modules-in-node-today/banner.jpeg) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="/assets/image/blog.logrocket.com/favicon.png" alt loading="lazy" no-view><div class="vp-site-info-name">Using ES modules in Node.js</div><div class="vp-site-info-desc">Learn about the state of ES modules in Node today, including concerns realted to transitioning from and interoperability with CommonJS.</div></div><!----></div><div class="hint-container note"><p class="hint-container-title">Editor’s note</p><p>This article was updated on 3 March 2021.</p></div><hr><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction"><span>Introduction</span></a></h2><figure><img src="/bookshelf/assets/image/blog.logrocket.com/es-modules-in-node-today/banner.jpeg" alt="ES Modules In Node Today" tabindex="0" loading="lazy"><figcaption>ES Modules In Node Today</figcaption></figure><div class="hint-container info"><p class="hint-container-title">Ralph Johnson</p><blockquote><p>“Before software can be reusable, it first has to be usable.”</p></blockquote><a class="vp-card" href="https://en.wikipedia.org/wiki/Ralph_Johnson_(computer_scientist)/" target="_blank" style="background:rgba(244,245,255,0.2);"><img class="vp-card-logo" src="https://en.wikipedia.org/static/favicon/wikipedia.ico" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Ralph Johnson (computer scientist) - Wikipedia</div><hr><div class="vp-card-desc">Ralph E. Johnson is a Research Associate Professor in the Department of Computer Science at the University of Illinois at Urbana-Champaign. He is a co-author of the influential computer science textbook Design Patterns: Elements of Reusable Object-Oriented Software, for which he won the 2010 ACM SIGSOFT Outstanding Research Award.</div></div></a></div><p><a href="https://en.wikipedia.org/wiki/Module" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-wikipedia-w" sizing="height"></i>Modules</a> are independent building blocks of a software program. They are basically a design pattern that implements features of <a href="https://en.wikipedia.org/wiki/Modular_programming" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-wikipedia-w" sizing="height"></i>modular design</a> in programming languages. The module system is supported in many languages and is quite popular since the way dependencies are handled, packaged, and managed determines how easy it is to work with a large and growing source code.</p><p>In modular design, business logic pertaining to particular features or functionalities are packaged (modularized) in a standardized format for reusability, flexibility, and for the sake of reducing complexity. This setup affords a loosely coupled system due to a smooth interface of communication, as there are no global variables or shared state.</p><p>Although the concept of modules is <a href="https://en.wikipedia.org/wiki/Modular_programming#Terminology" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-wikipedia-w" sizing="height"></i>quite different depending on the language</a>, they are akin to the idea of <a href="https://en.wikipedia.org/wiki/Module_pattern#Namespaces" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-wikipedia-w" sizing="height"></i>namespaces</a> in languages like Java. Modules enable code organization by splitting a codebase into reusable components such that each performs individual functions and can be combined or composed to form larger functionalities or an entire application.</p><p>In Node.js, the <a href="https://nodejs.org/docs/latest/api/modules.html#modules_modules" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>module system</a> has come a long way from its earlier adoption of <a href="https://requirejs.org/docs/commonjs.html" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>CommonJS</a>. Today, <a href="https://nodejs.org/dist/latest-v13.x/docs/api/esm.html#esm_ecmascript_modules" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>ECMAScript modules</a> (ES modules), which are now stable and fit for production use,are the official standard for packaging code for reuse in both client- and server-side JavaScript.</p><hr><h2 id="table-of-contents" tabindex="-1"><a class="header-anchor" href="#table-of-contents"><span>Table of contents</span></a></h2><p>In this article, we are going to learn about ES modules in Node. However, we will briefly explore other ways of handling and organizing server-side code with CommonJS.</p><p>Why? So that we have a point of reference to recognize the benefits of ES modules. In essence, we will learn about the challenges it tries to solve that earlier module systems were not adapted to solve.</p><p>We will be looking at:</p><ul><li><strong>An introduction to ES modules</strong> — here, we introduce ES modules in an exciting way</li><li><strong>A brief history of ES modules</strong> — here, we learn about the transition from the earlier module system to ES modules. We will also briefly examine how interoperable these modules systems are with one another</li><li><strong>Adding support for ES modules in Node</strong> — here, we learn about how we can incrementally add support for ES modules in Node. We also learn how to migrate an old codebase to start using ES modules</li><li><strong>Comparing and contrasting features</strong> — here, we will learn about the features of both these module systems and how they compare</li><li><strong>Then lastly, ES modules moving forward</strong></li></ul><div class="hint-container note"><p class="hint-container-title">Prerequisites</p><p>To easily follow along with this tutorial, it is advisable to have the latest version of Node.js installed. Instructions on how to do so are available in the <a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>Node documentation</a>.</p><p>Also, for better context, readers may need to be fairly knowledgeable with the <a href="https://requirejs.org/docs/commonjs.html" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>CommonJS</a> module system in Node. It is equally welcoming for newcomers learning the Node.js module system or applying ES modules in their Node projects today.</p></div><hr><h2 id="what-are-es-modules" tabindex="-1"><a class="header-anchor" href="#what-are-es-modules"><span>What are ES modules?</span></a></h2><p>With the release of Node version 15.3.0 (currently in v15.11.0), <a href="https://nodejs.org/api/esm.html#esm_introduction" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>ES modules</a> can now be used without an experimental flag, as they are now stable and compatible with the NPM ecosystem. Details about the stability index can be found <a href="https://nodejs.org/api/documentation.html" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>here</a> in the node.js ESM documentation.With ES modules, modules are defined with the use of the <code>import</code> and <code>export</code> keywords instead of the <code>require()</code> function in CommonJS. Here is how they are used:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="f.js"><span>f.js</span></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">sayLanguage</span><span class="token punctuation">(</span><span class="token parameter">language</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">I love </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>language<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="code-block-with-title"><div class="code-block-title-bar" data-title="g.js"><span>g.js</span></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span>sayLanguage<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./f.js&#39;</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sayLanguage</span><span class="token punctuation">(</span><span class="token string">&#39;JavaScript&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="code-block-with-title"><div class="code-block-title-bar" data-title="package.json"><span>package.json</span></div><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esm&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="hint-container note"><p class="hint-container-title">Note</p><p>Readers should take note of the type field in the <i class="vp-icon iconfont icon-json" sizing="height"></i><code>package.json</code> file above. To be able to load an ES module, we need to set <code>&quot;type&quot;: &quot;module&quot;</code> in this file or, as an alternative, we can use the <code>.mjs</code> file extension as against the usual <code>.js</code> file extension. Also, from Node version <code>12.7.0</code> and <code>13.2.0</code>, loading ECMAScript modules no longer required us to pass any command-line flag.</p></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">node</span> g.js</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># I love JavaScript!</span></span>
<span class="line"><span class="token comment"># undefined</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The result/terminal output of running our code is shown above.</p><hr><h2 id="adding-support-for-es-modules-in-node-today" tabindex="-1"><a class="header-anchor" href="#adding-support-for-es-modules-in-node-today"><span>Adding support for ES modules in Node today</span></a></h2><p>This support was previously behind the <code>--experimental-module</code> flag. Currently, this is no longer required as from version 13.14.0 to 14.0.0, the implementation is now stable and can now be used with the earlier commonJS module system.</p><p>Files ending with <code>.mjs</code> or <code>.js</code> extensions (with the nearest <i class="vp-icon iconfont icon-json" sizing="height"></i><code>package.json</code> file with a <code>field</code> type) are treated as ES modules, as shown earlier. So, in essence, when we run <code>node g.js</code> in the same folder as the above <i class="vp-icon iconfont icon-json" sizing="height"></i><code>package.json</code>, the file is treated as an ESM. Additionally, it is an ESM if we are passing string arguments to the Node.js standard input with flag <code>--input-type=module</code>. More details can be found <a href="https://nodejs.org/api/packages.html#packages_determining_module_system" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>here</a>.</p><p>It’s important to note that with ESM, without the <code>type</code> field in the parent <i class="vp-icon iconfont icon-json" sizing="height"></i><code>package.json</code> file or the other ways specified above, Node throws the error shown below:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="output"><span>output</span></div><div class="language-plaintext line-numbers-mode" data-highlighter="prismjs" data-ext="plaintext"><pre><code class="language-plaintext"><span class="line">(node:2844) Warning: To load an ES module, set &quot;type&quot;: &quot;module&quot; in the package.json or use the .mjs extension.(Use `node --trace-warnings ...` to show where the warning was created). Also, as an aside, we cannot make use of import statements outside of modules.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></div><hr><h2 id="package-scope" tabindex="-1"><a class="header-anchor" href="#package-scope"><span>Package scope</span></a></h2><p>A package scope, defined by the <code>type</code> flag in a parent <i class="vp-icon iconfont icon-json" sizing="height"></i><code>package.json</code> file and all folders below it, is present in the current scope of that package, as explained earlier. Furthermore, files ending with the <code>.mjs</code> extension are always loaded as ES modules regardless of the scope of that package.</p><p>In the same light, all other forms of files without extensions and without the <code>type</code> flag in the parent <i class="vp-icon iconfont icon-json" sizing="height"></i><code>package.json</code> file are treated as CommonJS. Additionally, files ending with <code>.cjs</code> extensions are treated as CJS modules regardless of package scope.</p><p>It’s important to know that because Node.js now supports both ES modules and commonJS modules, package authors need to always ensure the <code>type</code> field in their package.json file is always included, regardless of the module type. This allows for backwards compatibility; for instance, in a situation where the default type of Node.js changes, Node would know how to handle or interprete files in our program. More details <a href="https://nodejs.org/api/packages.html#packages_determining_module_system" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>here</a>.</p><hr><h2 id="import-and-export-syntax-in-es-modules" tabindex="-1"><a class="header-anchor" href="#import-and-export-syntax-in-es-modules"><span>Import and export syntax in ES modules</span></a></h2><p>In ES modules, specifiers are like string-based file paths used after the <code>from</code> keyword. There are both <a href="https://nodejs.org/api/esm.html#esm_resolution_algorithm" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>algorithms</a> to load an ES module specifier and to determine the module format of a resolved URL. An example is shown below:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span>cat<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;animals&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The <code>animal</code> specifier in this case is an npm package, for example. Other ways specifiers can be referenced include from both absolute and relative file paths or URLs, and paths within other packages. Examples are shown in this <a href="https://nodejs.org/api/esm.html#esm_import_specifiers" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>section</a> of the documentation.</p><div class="hint-container note"><p class="hint-container-title">Note</p><p>Node.js built-in Modules can now be loaded or referenced by absolute URL strings from version <code>14.13.1</code>. When using the import keyword, a file extension must be provided to resolve relative or absolute URL specifiers.</p></div><p>Although <code>import</code> statements are permitted only in ES modules, they can reference both an ESM or CommonJS modules. For example:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> packageMain <span class="token keyword">from</span> <span class="token string">&#39;commonjs-package&#39;</span><span class="token punctuation">;</span> <span class="token comment">// Works</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> method <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;commonjs-package&#39;</span><span class="token punctuation">;</span> <span class="token comment">// Errors</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container note"><p class="hint-container-title">Note</p><p><a href="https://nodejs.org/api/esm.html#esm_import_statements" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>Import statements</a> that reference other types of files like JSON or Wasm are still experimental and require the <code>--experimental-json-modules</code> and <code>--experimental-wasm-modules</code> flags, respectively, to be passed, as they are only supported in commonJS. From Node version 14.8.0, we were able to make use of the top-level await without passing CLI flags. Details including using the await keyword outside async functions (AKA top-level await) for ESM, can be found <a href="https://nodejs.org/api/esm.html#esm_experimental_json_modules" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>here</a>.</p></div><p>For exports in ES modules, we can make use of the following:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// Named exports</span></span>
<span class="line">module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Alex&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Default exports</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;My name is Mat&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container note"><p class="hint-container-title">Note</p><p>All built-in Node packages support all types of exports (named, default) described above. Since Node version <code>14.13.0</code>, support has been added for detection of CommonJS named exports in ESM.</p></div><hr><h2 id="package-entry-points" tabindex="-1"><a class="header-anchor" href="#package-entry-points"><span>Package entry points</span></a></h2><p>There are now two fields that can define entry points for a package: <code>main</code> and <code>exports</code>, in a project’s <i class="vp-icon iconfont icon-json" sizing="height"></i><code>package.json</code> file. While the <code>main</code> field only defines the main entry point of the package, the <code>exports</code> field provides an alternative where the main entry point can be defined while also providing the benefit of encapsulating the package.</p><p>Module files within packages can be accessed by appending a path to the package name. Another way is if the package’s <i class="vp-icon iconfont icon-json" sizing="height"></i><code>package.json</code> contains an <code>exports</code> field where the files within packages can only be accessed via the paths defined in the <code>exports</code> object.</p><p>To set the main entry point for a package for example, it is advisable to define both <code>exports</code> and <code>main</code> in the package’s <i class="vp-icon iconfont icon-json" sizing="height"></i><code>package.json</code> file. More details can be found in the <a href="https://nodejs.org/api/esm.html#esm_package_entry_points" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>documentation</a>.</p><hr><h2 id="commonjs-module-system" tabindex="-1"><a class="header-anchor" href="#commonjs-module-system"><span>CommonJS module system</span></a></h2><p>Prior to the introduction of ES modules, the community relied heavily on CommonJS for packaging server-side JavaScript code. In the CommonJS module system, each file is treated as a module, which exposes a set of APIs (via a well-defined interface) with the use of the <a href="https://github.com/nodejs/ecmascript-modules/blob/modules-lkgr/doc/api/modules.md#exports" target="_blank" rel="noopener noreferrer"><code>exports</code>object (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>nodejs/ecmascript-modules</code>)</a>. To understand this better, here is an example using the object created by the module system:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="a.js"><span>a.js</span></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">function</span> <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">sayAge</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">I&#39;m </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> years old.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>sayName<span class="token punctuation">,</span> sayAge<span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>To use these functions (imported as modules in a different file), we can use the <a href="https://github.com/nodejs/ecmascript-modules/blob/modules-lkgr/doc/api/modules.md#requireid" target="_blank" rel="noopener noreferrer"><code>require</code> function (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>nodejs/ecmascript-modules</code>)</a>. This accepts a module identifier (ID) specified by either a relative or an absolute path or by name, based on the module type of the exposed APIs, like so:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="b.js"><span>b.js</span></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span>sayName<span class="token punctuation">,</span> sayAge<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./a&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// assuming a.js is in the same folder path</span></span>
<span class="line"></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token string">&#39;Alex&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// My name is Alex.</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sayAge</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// I&#39;m 25 years old.</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// TO RUN THE CODE SAMPLE TYPE: </span></span>
<span class="line"><span class="token comment">// node b.js </span></span>
<span class="line"><span class="token comment">// on your terminal</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>As we can see above, the <code>require</code> object returns/imports the module content exported from the <code>a.js</code> file. To learn more about the <a href="https://github.com/nodejs/node/blob/7c63bc6540f4ad21f911f38f8708ed988f433ce7/lib/internal/modules/cjs/loader.js#L166" target="_blank" rel="noopener noreferrer">implementation (<i class="vp-icon iconfont icon-json" sizing="height"></i><code>nodejs/node</code>)</a> of the <code>module</code>, <code>export</code>, and <code>require</code> keywords, we can peek at the module wrapper <a href="https://github.com/nodejs/ecmascript-modules/blob/modules-lkgr/doc/api/modules.md#the-module-wrapper" target="_blank" rel="noopener noreferrer">here (<i class="vp-icon iconfont icon-json" sizing="height"></i><code>nodejs/ecmascript-modules</code>)</a>.</p><p>The CommonJS specification is also available <a href="https://github.com/commonjs/commonjs/blob/master/docs/specs/modules/1.0.html.markdown" target="_blank" rel="noopener noreferrer">here (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>commonjs/commonjs</code>)</a>. The spec <a href="https://github.com/commonjs/commonjs/blob/master/docs/specs/modules/1.0.html.markdown#commonjs-modules" target="_blank" rel="noopener noreferrer">highlights (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>commonjs/commonjs</code>)</a> the minimum features that a module system must have in order to support and be interoperable with other module systems.</p><p>The CommonJS implementation allows for a defined structure in how files are loaded. In this approach, code required from other files are loaded or parsed synchronously. For this reason, catching and detecting failure points or debugging code are easier and less tedious.</p><p>Why? Because variables present in the modules or exported files are within the scope of that module or private to it and not in the global scope, as such errors are properly propagated. Also, because of the huge separation of concern, modules are loaded from parent to child, traversing down the dependency graph.</p><div class="hint-container note"><p class="hint-container-title">Note</p><p>When the wrapper function returns, the exports object is cached, then returned as the return value for the <code>require()</code> method. This is like a cycle. How? On the next call to the <code>module.exports</code> method, the same process of wrapping the module with the wrapper function is repeated. But not without checking if that module is already stored in the cache.</p></div><p>The signature of the wrapper function is shown below:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">exports<span class="token punctuation">,</span> require<span class="token punctuation">,</span> module<span class="token punctuation">,</span> __filename<span class="token punctuation">,</span> __dirname</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Module code actually lives in here</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>Module</code> object, which takes in an ID and a parent module as parameters, contains the <code>export</code> object:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">function</span> <span class="token function">Module</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> parent<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>path <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> parent<span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">updateChildren</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>filename <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>loaded <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>updateChildren</code> method scans through the file path until the root of the file system is reached. Its job is to update the <code>children</code> property of the <code>Module</code> object with the new <code>parent</code>, as the case may be. Here is the signature below:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">function</span> <span class="token function">updateChildren</span><span class="token punctuation">(</span><span class="token parameter">parent<span class="token punctuation">,</span> child<span class="token punctuation">,</span> scan</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> children <span class="token operator">=</span> parent <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span>children<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>children <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>scan <span class="token operator">&amp;&amp;</span> children<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">   children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Let’s see an example to understand this better. In the <i class="vp-icon fa-brands fa-js" sizing="height"></i><code>b.js</code> file above, add this line of code to print the module and the argument object:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>After running <code>node b.js</code>, we get the following output:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">node</span> b.js</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># My name is Alex.</span></span>
<span class="line"><span class="token comment"># undefined</span></span>
<span class="line"><span class="token comment"># I&#39;m 25 years old.</span></span>
<span class="line"><span class="token comment"># undefined</span></span>
<span class="line"><span class="token comment"># &lt;ref *1&gt; Module {</span></span>
<span class="line"><span class="token comment">#   id: &#39;.&#39;,</span></span>
<span class="line"><span class="token comment">#   path: &#39;/Users/retina/Desktop/es-modules in Node&#39;,</span></span>
<span class="line"><span class="token comment">#   exports: {},</span></span>
<span class="line"><span class="token comment">#   parent: null,</span></span>
<span class="line"><span class="token comment">#   filename: &#39;/Users/retina/Desktop/es-modules in Node/b.js&#39;,</span></span>
<span class="line"><span class="token comment">#   loaded: false,</span></span>
<span class="line"><span class="token comment">#   children: [</span></span>
<span class="line"><span class="token comment">#     Module {</span></span>
<span class="line"><span class="token comment">#       id: &#39;/Users/retina/Desktop/es-modules in Node/a.js&#39;,</span></span>
<span class="line"><span class="token comment">#       path: &#39;/Users/retina/Desktop/es-modules in Node&#39;,</span></span>
<span class="line"><span class="token comment">#       exports: [Object],</span></span>
<span class="line"><span class="token comment">#       parent: [Circular *1],</span></span>
<span class="line"><span class="token comment">#       filename: &#39;/Users/retina/Desktop/es-modules in Node/a.js&#39;,</span></span>
<span class="line"><span class="token comment">#       loaded: true,</span></span>
<span class="line"><span class="token comment">#       children: [],</span></span>
<span class="line"><span class="token comment">#       paths: [Array]</span></span>
<span class="line"><span class="token comment">#     }</span></span>
<span class="line"><span class="token comment">#   ],</span></span>
<span class="line"><span class="token comment">#   paths: [</span></span>
<span class="line"><span class="token comment">#     &#39;/Users/retina/Desktop/es-modules in Node/node_modules&#39;,</span></span>
<span class="line"><span class="token comment">#     &#39;/Users/retina/Desktop/node_modules&#39;,</span></span>
<span class="line"><span class="token comment">#     &#39;/Users/retina/node_modules&#39;,</span></span>
<span class="line"><span class="token comment">#     &#39;/Users/node_modules&#39;,</span></span>
<span class="line"><span class="token comment">#     &#39;/node_modules&#39;</span></span>
<span class="line"><span class="token comment">#   ]</span></span>
<span class="line"><span class="token comment"># } [Arguments] {</span></span>
<span class="line"><span class="token comment">#   &#39;0&#39;: {},</span></span>
<span class="line"><span class="token comment">#   &#39;1&#39;: [Function: require] {</span></span>
<span class="line"><span class="token comment">#     resolve: [Function: resolve] { paths: [Function: paths] },</span></span>
<span class="line"><span class="token comment">#     main: Module {</span></span>
<span class="line"><span class="token comment">#       id: &#39;.&#39;,</span></span>
<span class="line"><span class="token comment">#       path: &#39;/Users/retina/Desktop/es-modules in Node&#39;,</span></span>
<span class="line"><span class="token comment">#       exports: {},</span></span>
<span class="line"><span class="token comment">#       parent: null,</span></span>
<span class="line"><span class="token comment">#       filename: &#39;/Users/retina/Desktop/es-modules in Node/b.js&#39;,</span></span>
<span class="line"><span class="token comment">#       loaded: false,</span></span>
<span class="line"><span class="token comment">#       children: [Array],</span></span>
<span class="line"><span class="token comment">#       paths: [Array]</span></span>
<span class="line"><span class="token comment">#     },</span></span>
<span class="line"><span class="token comment">#     extensions: [Object: null prototype] {</span></span>
<span class="line"><span class="token comment">#       &#39;.js&#39;: [Function (anonymous)],</span></span>
<span class="line"><span class="token comment">#       &#39;.json&#39;: [Function (anonymous)],</span></span>
<span class="line"><span class="token comment">#       &#39;.node&#39;: [Function (anonymous)]</span></span>
<span class="line"><span class="token comment">#     },</span></span>
<span class="line"><span class="token comment">#     cache: [Object: null prototype] {</span></span>
<span class="line"><span class="token comment">#       &#39;/Users/retina/Desktop/es-modules in Node/b.js&#39;: [Module],</span></span>
<span class="line"><span class="token comment">#       &#39;/Users/retina/Desktop/es-modules in Node/a.js&#39;: [Module]</span></span>
<span class="line"><span class="token comment">#     }</span></span>
<span class="line"><span class="token comment">#   },</span></span>
<span class="line"><span class="token comment">#   &#39;2&#39;: Module {</span></span>
<span class="line"><span class="token comment">#     id: &#39;.&#39;,</span></span>
<span class="line"><span class="token comment">#     path: &#39;/Users/retina/Desktop/es-modules in Node&#39;,</span></span>
<span class="line"><span class="token comment">#     exports: {},</span></span>
<span class="line"><span class="token comment">#     parent: null,</span></span>
<span class="line"><span class="token comment">#     filename: &#39;/Users/retina/Desktop/es-modules in Node/b.js&#39;,</span></span>
<span class="line"><span class="token comment">#     loaded: false,</span></span>
<span class="line"><span class="token comment">#     children: [ [Module] ],</span></span>
<span class="line"><span class="token comment">#     paths: [</span></span>
<span class="line"><span class="token comment">#       &#39;/Users/retina/Desktop/es-modules in Node/node_modules&#39;,</span></span>
<span class="line"><span class="token comment">#       &#39;/Users/retina/Desktop/node_modules&#39;,</span></span>
<span class="line"><span class="token comment">#       &#39;/Users/retina/node_modules&#39;,</span></span>
<span class="line"><span class="token comment">#       &#39;/Users/node_modules&#39;,</span></span>
<span class="line"><span class="token comment">#       &#39;/node_modules&#39;</span></span>
<span class="line"><span class="token comment">#     ]</span></span>
<span class="line"><span class="token comment">#   },</span></span>
<span class="line"><span class="token comment">#   &#39;3&#39;: &#39;/Users/retina/Desktop/es-modules in Node/b.js&#39;,</span></span>
<span class="line"><span class="token comment">#   &#39;4&#39;: &#39;/Users/retina/Desktop/es-modules in Node&#39;</span></span>
<span class="line"><span class="token comment"># }</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>As shown above, we can see the <a href="https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js#L156" target="_blank" rel="noopener noreferrer">module object (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>nodejs/node</code>)</a> on line 6 with all the properties, including the <code>filename</code>, <code>id</code>, <code>children</code>, path depth, etc. Also, we can see the <code>argument</code> object, which consists of the <code>export</code> object, <code>require</code> function, file and folder path, and the <code>Module</code> (which is essentially what the wrapper function does, but it executes the code contained in a file/module).</p><p>Finally, as an exercise, we can go ahead and print the <code>require</code> function in the <code>b.js</code> file. To learn more about the output of the <code>require</code> function, we can check the <a href="https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js#L1087" target="_blank" rel="noopener noreferrer">implementation (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>nodejs/node</code>)</a> in this section of the Node source code.</p><div class="hint-container note"><p class="hint-container-title">Note</p><p>Special emphasis should be placed on the <a href="https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js#L890:8" target="_blank" rel="noopener noreferrer"><code>load</code> (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>nodejs/node</code>)</a> and <code>validateString</code> methods. The <code>validateString</code> method, as its name implies, checks whether the passed-in module ID is a valid string. To understand the require function on a much higher level, you can check the <a href="https://nodejs.org/en/knowledge/getting-started/what-is-require/" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-name" sizing="height"></i>Knowledge section</a> of the Node documentation.</p></div><hr><h2 id="interoperability-for-both-module-systems" tabindex="-1"><a class="header-anchor" href="#interoperability-for-both-module-systems"><span>Interoperability for both module systems</span></a></h2><p>In CommonJS, <a href="https://github.com/nodejs/ecmascript-modules/blob/modules-lkgr/doc/api/modules.md#the-module-wrapper" target="_blank" rel="noopener noreferrer">modules are wrapped as functions (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>nodejs/ecmascript-modules</code>)</a> before they are evaluated at runtime. For ES modules, code reuse provided via <code>import</code> and <code>export</code> <a href="https://github.com/nodejs/node-eps/blob/master/002-es-modules.md#21-types" target="_blank" rel="noopener noreferrer">binding (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>nodejs/node-eps</code>)</a> are already <a href="https://github.com/nodejs/node-eps/blob/master/002-es-modules.md#31-async-loading" target="_blank" rel="noopener noreferrer">created or loaded (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>nodejs/node-eps</code>)</a> asynchronously before they are evaluated. To understand how ESM works under the hood, you can check <a href="https://github.com/nodejs/node-eps/blob/master/002-es-modules.md#22-operations" target="_blank" rel="noopener noreferrer">here (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>nodejs/node-eps</code>)</a>. Now let’s explore further 🙂</p><p>For a quick comparison, a CommonJS module goes through this phase in its lifecycle:</p><p>Resolution -&gt; Loading -&gt; Wrapping -&gt; Evaluation -&gt; Caching</p><p>This validates the fact that for CommonJS, there is no way to determine what gets exported as a module until the module is wrapped and evaluated. This is quite different for ES modules, as the imported symbols are already <a href="https://github.com/nodejs/node-eps/blob/master/002-es-modules.md#22-operations" target="_blank" rel="noopener noreferrer">parsed and understood by the language (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>nodejs/node-eps</code>)</a> before the code gets evaluated.</p><p>When the code is parsed, just before it is evaluated, an internal <a href="https://tc39.es/ecma262/#sec-source-text-module-records" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Module Record</a> is created, and only after this data structure is well-formed are the files parsed and the code evaluated.</p><p>For example:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="d.mjs"><span>d.mjs</span></div><div class="language-mjs line-numbers-mode" data-highlighter="prismjs" data-ext="mjs"><pre><code class="language-mjs"><span class="line">const check = () =&gt; {</span>
<span class="line">  console.log(&#39;Just checking&#39;);</span>
<span class="line">};</span>
<span class="line">export.check = check;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="code-block-with-title"><div class="code-block-title-bar" data-title="e.mjs"><span>e.mjs</span></div><div class="language-mjs line-numbers-mode" data-highlighter="prismjs" data-ext="mjs"><pre><code class="language-mjs"><span class="line">import {check} from &#39;./d&#39; // assuming they are on the same folder path</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></div><p>In the <i class="vp-icon fa-brands fa-js" sizing="height"></i><code>e.mjs</code> file above, Node.js parses and validates the imports before going further to execute or evaluate the piece of code. This is not the case for a CommonJS module: the exported symbols are only made known after the module is wrapped and evaluated.</p><p>This incompatibility is one of the many reasons the standard body in charge of ECMAScript intended to implement interoperability for both ESM and Node’s existing CommonJS module system.</p><p>Furthermore, the <a href="https://nodejs.org/api/esm.html#esm_customizing_esm_specifier_resolution_algorithm" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>current specifier resolution</a> does not support all default behavior of the CommonJS loader. One of the major differences is automatic resolution of file extensions and the ability to import directories that have an index file.</p><p>For example, if we do an <code>import &#39;./directory&#39;</code> from, say, a directory that has an <i class="vp-icon fa-brands fa-js" sizing="height"></i><code>index.js</code>, ES modules do not look for an <i class="vp-icon fa-brands fa-js" sizing="height"></i><code>index.js</code> file in the specified folder, as was the case in CommonJS. Instead, it throws an error. This can be fixed by passing the experimental flag <code>--experimental-specifier-resolution=[mode]</code>. More details <a href="https://nodejs.org/api/esm.html#esm_customizing_esm_specifier_resolution_algorithm" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>here</a>.</p><div class="hint-container note"><p class="hint-container-title">Note</p><p>To customize the default module resolution, loader hooks can optionally be provided via the <code>--experimental-loader ./loader-name.mjs</code> argument to Node.js. The loaders APIs are currently being redesigned, which means they would change in the future.</p></div><p>Also, while import statements can reference both an ES module and a commonJS module, import statements are permitted only in ES modules. However, for loading ES modules, commonJS supports dynamic import expressions. As an addition, a require function can be constructed within an ESM using the <code>module.createRequire()</code> method.</p><p>More details about interoperability with CommonJS can be found in this <a href="https://nodejs.org/api/esm.html#esm_interoperability_with_commonjs" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>section</a> of the documentation.</p><hr><h2 id="features-of-both-module-systems" tabindex="-1"><a class="header-anchor" href="#features-of-both-module-systems"><span>Features of both module systems</span></a></h2><ul><li>Dynamic <code>import()</code> is supported in both CommonJS and ES modules. It can be used to include ES module files from CommonJS code</li><li>ECMAScript 6 also provides that modules can be loaded from a URL, while CommonJS is limited to relative and absolute file paths. <a href="https://nodejs.org/api/esm.html#esm_https_loader" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>This new improvement</a> not only makes loading more complicated, but also slow</li><li>Sources that are in formats Node.js doesn’t understand can be converted into JavaScript. More details can be found <a href="https://nodejs.org/api/esm.html#esm_transpiler_loader" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>here</a></li><li>Support for <a href="https://github.com/WICG/import-maps#extension-less-imports" target="_blank" rel="noopener noreferrer">extensionless main entry points (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>WICG/import-maps</code>)</a> in ESM has been dropped</li><li><a href="https://github.com/tc39/proposal-import-meta" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-github" sizing="height"></i><code>tc39/proposal-import-meta</code></a> provides the absolute URL of the current ES module file. It is currently a stage 4 proposal in the TC39 spec</li><li>Dynamic imports can be used to import both ES and CommonJS modules. In CommonJS modules it can be used to load ES modules. Note that it returns a promise</li><li>A file extension must be provided when using the <code>import</code> keyword. Directory indexes (e.g., <code>&#39;./database/index.js&#39;</code>) must be fully specified</li><li>Dual CommonJS and ESM are now possible with the use of <a href="https://nodejs.org/api/esm.html#esm_conditional_exports" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>conditional exports.</a> Now, Node.js can run ES module entry points, and a package can contain both CommonJS and ESM entry points</li><li>From version 14.13.1, ESM added support for using <code>node: URLs</code> to load Node.js built-in modules, allowing built-in modules to be referenced by valid absolute URL strings</li></ul><div class="hint-container note"><p class="hint-container-title">Note</p><p>Function <code>require</code> shouldn’t be used in ES modules. This is because ES modules are executed asynchronously. To load an ES module from a CommonJS module, we can make use of <code>import()</code>.</p></div><p>Readers should also note that there are still some known differences between ESM and commonJS modules. For example, native modules are not currently supported with ESM imports. Also, the ES module loader has its own kind of caching system and does not rely on <code>require.cache</code> found in the commonJS parlance.</p><p>Others include the unavailability of <em>_filename</em> or <em>_dirname</em> found in the commonJS module system. ESM provides other ways of replicating this behaviour with the use of <code>import.meta.url</code>.</p><p>For more details about the differences between ES Modules and commonJS modules, readers can check this <a href="https://nodejs.org/api/esm.html#esm_differences_between_es_modules_and_commonjs" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>section of the documentation</a>.</p><hr><h2 id="es-modules-moving-forward" tabindex="-1"><a class="header-anchor" href="#es-modules-moving-forward"><span>ES modules moving forward</span></a></h2><p>ES modules are no longer tagged experimental, and are now stable in terms of technical implementation as of Node version 15.3.0. This means that they are now ready for production usage. The challenge, therefore, is upon package authors, maintainers, and developers to be explicit with defining the type field in the <i class="vp-icon iconfont icon-json" sizing="height"></i><code>package.json</code> file and other useful conventions discussed in the specifications. More details about this can be found <a href="https://nodejs.org/api/esm.html#esm_writing_dual_packages_while_avoiding_or_minimizing_hazards" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>here</a>.</p><p>Nowadays, it is possible to use both CommonJS and ESM in one application, but with less friction. But of course, CommonJS modules need to know if the module being loaded is a CommonJS or an ES module since the latter is loaded only asynchronously.</p><p>The issues relating to dual-package hazard and ways to avoid or curtail these hazards are extensively covered in the <a href="https://nodejs.org/api/packages.html#packages_dual_commonjs_es_module_packages" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>package section</a> of the documentation.</p><p>Also, in accordance with the ESM spec, using the import keyword does not complete the file path by default with the file name extension, as for CommonJS modules. Therefore, this should also be explicitly stated beforehand. More details can be found in the section <a href="https://nodejs.org/docs/latest-v15.x/api/esm.html#esm_differences_between_es_modules_and_commonjs" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>outlining the differences between both module systems</a>.</p><hr><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h2><p>Prior to the introduction of the ES6 standard, there wasn’t any native implementation for organizing source code in server-side JavaScript. The community relied heavily on CommonJS module format.</p><p>Nowadays, with the introduction and API stabilization of ES modules, developers can enjoy the many benefits associated with the release specification. This article has highlighted the transition between both module systems and their interoperability.</p><p>Note that this article has not covered the loaders API since they are still experimental and will definitely change in future versions. To learn more about it please check <a href="https://nodejs.org/docs/latest-v15.x/api/esm.html#esm_loaders" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-node" sizing="height"></i>this section</a> of the documentation.</p><p>Tools like <a href="https://babeljs.io/" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-babel" sizing="height"></i>Babel</a> and <a href="https://github.com/standard-things/esm#readme" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-github" sizing="height"></i>`standard-things/esm``</a>, which translate the newer syntax into code compatible with older environments, the transition becomes even easier.</p><p>In the long run, this entire draft process is an important step and paves the way for further future improvements. Let me know if you have any questions in the comment section below, or message me on my <a href="https://twitter.com/alex_nnakwue" target="_blank" rel="noopener noreferrer">Twitter handle ()<i class="vp-icon fa-brands fa-x-twitter" sizing="height"></i><code>alex_nnakwue</code></a>. Thanks for reading 🙂</p><!-- TODO: add ARTICLE CARD --><a class="vp-card" href="https://chanhi2000.github.io/bookshelf/blog.logrocket.com/es-modules-in-node-today.html" target="_blank" style="background:rgba(112,76,182,0.2);"><img class="vp-card-logo" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Using ES modules in Node.js</div><hr><div class="vp-card-desc">Learn about the state of ES modules in Node today, including concerns realted to transitioning from and interoperability with CommonJS.</div></div></a></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/chanhi2000/articles/edit/main/src/blog.logrocket.com/es-modules-in-node-today.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/bookshelf/programming/js-node/articles/" aria-label="/programming/js-node/articles/"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->/programming/js-node/articles/</div></a><a class="route-link auto-link next" href="/bookshelf/blog.logrocket.com/react-memo-vs-usememo.html" aria-label="React.memo vs. useMemo: Major differences and use cases"><div class="hint">Next<span class="arrow end"></span></div><div class="link">React.memo vs. useMemo: Major differences and use cases<i class="vp-icon fa-brands fa-react" sizing="height"></i></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">MIT Licensed | Copyright © 2022-present <a href="https://github.com/chanhi2000">Chan Hee Lee</a></div><div class="vp-copyright">Copyright © 2025 Alexander Nnakwue </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/bookshelf/assets/app-BVguHYKu.js" defer></script>
  </body>
</html>
