<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.24" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.94" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Making Django migrations in Python","image":["https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/making-django-migrations-python/banner.png"],"datePublished":"2021-12-17T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"Jaya Moore","url":"https://blog.logrocket.com/author/jayamoore/"}]}</script><meta property="og:url" content="https://chanhi2000.github.io/bookshelf/blog.logrocket.com/making-django-migrations-python.html"><meta property="og:site_name" content="📚Bookshelf"><meta property="og:title" content="Making Django migrations in Python"><meta property="og:description" content="Article(s) > Making Django migrations in Python"><meta property="og:type" content="article"><meta property="og:image" content="https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/making-django-migrations-python/banner.png"><meta property="og:locale" content="en-US"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:src" content="https://chanhi2000.github.io/bookshelf/assets/image/blog.logrocket.com/making-django-migrations-python/banner.png"><meta name="twitter:image:alt" content="Making Django migrations in Python"><meta property="article:author" content="Jaya Moore"><meta property="article:tag" content="py-django"><meta property="article:tag" content="django"><meta property="article:tag" content="py"><meta property="article:tag" content="python"><meta property="article:tag" content="blog.logrocket.com"><meta property="article:tag" content="blog"><meta property="article:published_time" content="2021-12-17T00:00:00.000Z"><link rel="icon" href="/bookshelf/assets/icon/favicon.svg"><title>Making Django migrations in Python | 📚Bookshelf</title><meta name="description" content="Article(s) > Making Django migrations in Python">
    <link rel="preload" href="/bookshelf/assets/style-DmRYlEXZ.css" as="style"><link rel="stylesheet" href="/bookshelf/assets/style-DmRYlEXZ.css">
    
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/bookshelf/" aria-label="Take me home"><img class="vp-nav-logo" src="/bookshelf/assets/icon/favicon.svg" alt><!----><span class="vp-site-name hide-in-pad">📚Bookshelf</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/bookshelf/news.html" aria-label><!--[--><i class="vp-icon fas fa-rss" sizing="height"></i><!--]--><!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-keyboard" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/hackingwithswift.com/" aria-label="hackingwithswift.com"><!--[--><img class="vp-icon" src="https://hackingwithswift.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->hackingwithswift.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fcc/" aria-label="freecodecamp.org"><!--[--><img class="vp-icon" src="https://cdn.freecodecamp.org/universal/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->freecodecamp.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kodeco.com/" aria-label="kodeco.com"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->kodeco.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.kotzilla.io/" aria-label="blog.kotzilla.io"><!--[--><img class="vp-icon" src="https://blog.kotzilla.io/hubfs/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.kotzilla.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kt.academy/" aria-label="kt.academy"><!--[--><img class="vp-icon" src="https://kt.academy/logo.png" alt aria-hidden no-view sizing="both"><!--]-->kt.academy<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/droidcon.com/" aria-label="droidcon.com"><!--[--><img class="vp-icon" src="https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png" alt aria-hidden no-view sizing="both"><!--]-->droidcon.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/outcomeschool.com/" aria-label="outcomeschool.com"><!--[--><img class="vp-icon" src="https://outcomeschool.com/static/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->outcomeschool.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/frontendmasters.com/" aria-label="frontendmasters.com"><!--[--><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->frontendmasters.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tricks.com/" aria-label="css-tricks.com"><!--[--><img class="vp-icon" src="https://css-tricks.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->css-tricks.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="smashingmagazine.com"><!--[--><img class="vp-icon" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->smashingmagazine.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/bookshelf/blog.logrocket.com/" aria-label="blog.logrocket.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.logrocket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/realpython.com/" aria-label="realpython.com"><!--[--><img class="vp-icon" src="https://realpython.com/static/favicon.68cbf4197b0c.png" alt aria-hidden no-view sizing="both"><!--]-->realpython.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/digitalocean.com/" aria-label="digitalocean.com"><!--[--><img class="vp-icon" src="https://digitalocean.com/_next/static/media/favicon.594d6067.ico" alt aria-hidden no-view sizing="both"><!--]-->digitalocean.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/antonioleiva.com/" aria-label="antonioleiva.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/antonioleiva.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->antonioleiva.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/johnnyreilly.com/" aria-label="johnnyreilly.com"><!--[--><img class="vp-icon" src="https://johnnyreilly.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->johnnyreilly.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/code-maze.com/" aria-label="code-maze.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/code-maze.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->code-maze.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/milanjovanovic.tech/" aria-label="milanjovanovic.tech"><!--[--><img class="vp-icon" src="https://milanjovanovic.tech/profile_favicon.png" alt aria-hidden no-view sizing="both"><!--]-->milanjovanovic.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/shopify.engineering/" aria-label="shopify.engineering"><!--[--><img class="vp-icon" src="https://cdn.shopify.com/static/shopify-favicon.png" alt aria-hidden no-view sizing="both"><!--]-->shopify.engineering<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devtoolstips.org/" aria-label="devtoolstips.org"><!--[--><img class="vp-icon" src="https://devtoolstips.org/assets/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devtoolstips.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/piccalil.li/" aria-label="piccalil.li"><!--[--><img class="vp-icon" src="https://piccalil.li/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->piccalil.li<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/sitepoint.com/" aria-label="sitepoint.com"><!--[--><img class="vp-icon" src="https://sitepoint.com/favicons/512x512.png" alt aria-hidden no-view sizing="both"><!--]-->sitepoint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/event-driven.io/" aria-label="event-driven.io"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/event-driven.io/favicon.jfif" alt aria-hidden no-view sizing="both"><!--]-->event-driven.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/packagemain.tech/" aria-label="packagemain.tech"><!--[--><img class="vp-icon" src="https://substack-post-media.s3.amazonaws.com/public/images/2ea54e25-eaa6-4630-bfc0-10b8cfdce894/apple-touch-icon-1024x1024.png" alt aria-hidden no-view sizing="both"><!--]-->packagemain.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/gosolve.io/" aria-label="gosolve.io"><!--[--><img class="vp-icon" src="https://gosolve.io/wp-content/uploads/2022/03/cropped-ikona1-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->gosolve.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/towardsdatascience.com/" aria-label="towardsdatascience.com"><!--[--><img class="vp-icon" src="https://cdn-images-1.medium.com/v2/resize:fill:128:128/1*VzTUkfeGymHP4Bvav-T-lA.png" alt aria-hidden no-view sizing="both"><!--]-->towardsdatascience.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/douggregor.net/" aria-label="douggregor.net"><!--[--><i class="vp-icon fas fa-globe" sizing="both"></i><!--]-->douggregor.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/d2.naver.com/" aria-label="d2.naver.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/d2.naver.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->d2.naver.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakao.com/" aria-label="tech.kakao.com"><!--[--><img class="vp-icon" src="https://www.kakaocorp.com/page/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakao.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakaopay.com/" aria-label="tech.kakaopay.com"><!--[--><img class="vp-icon" src="https://tech.kakaopay.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakaopay.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fe-developers.kakaoent.com/" aria-label="fe-developers.kakaoent.com"><!--[--><img class="vp-icon" src="https://fe-developers.kakaoent.com/favicon-32x32.png?v=44803cb16c1e2debd3984cf2e8cb2ded" alt aria-hidden no-view sizing="both"><!--]-->fe-developers.kakaoent.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/yozm.wishket.com/" aria-label="yozm.wishket.com"><!--[--><img class="vp-icon" src="https://yozm.wishket.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->yozm.wishket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/popit.kr/" aria-label="popit.kr"><!--[--><img class="vp-icon" src="https://popit.kr/wp-content/uploads/2016/08/favicon_32x32.png" alt aria-hidden no-view sizing="both"><!--]-->popit.kr<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devkuma.com/" aria-label="devkuma.com"><!--[--><img class="vp-icon" src="https://devkuma.com/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devkuma.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.gangnamunni.com/" aria-label="blog.gangnamunni.com"><!--[--><img class="vp-icon" src="https://blog.gangnamunni.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->blog.gangnamunni.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/codingeverybody.kr/" aria-label="codingeverybody.kr"><!--[--><img class="vp-icon" src="https://codingeverybody.kr/wp-content/uploads/cropped-favicon-origin-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->codingeverybody.kr<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-network-wired" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tecmint.com/" aria-label="tecmint.com"><!--[--><img class="vp-icon" src="https://tecmint.com/wp-content/uploads/2020/07/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tecmint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/docker.com/" aria-label="docker.com"><!--[--><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->docker.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/learnk8s.io/" aria-label="learnk8s.io"><!--[--><img class="vp-icon" src="https://static.learnk8s.io/f7e5160d4744cf05c46161170b5c11c9.svg" alt aria-hidden no-view sizing="both"><!--]-->learnk8s.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/itsfoss.com/" aria-label="itsfoss.com"><!--[--><img class="vp-icon" src="https://itsfoss.com/content/images/size/w256h256/2022/12/android-chrome-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->itsfoss.com<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/chanhi2000/articles" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-appearance-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-appearance-dropdown"><!----></div></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><span class="vp-sidebar-title">blog.logrocket.com</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2025</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2024</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2023</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2022</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">2021</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/whats-new-django-v4.html" aria-label="What&#39;s new in Django v4.0"><!--[--><i class="vp-icon iconfont icon-django" sizing="both"></i><!--]-->What&#39;s new in Django v4.0<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/bookshelf/blog.logrocket.com/making-django-migrations-python.html" aria-label="Making Django migrations in Python"><!--[--><i class="vp-icon iconfont icon-django" sizing="both"></i><!--]-->Making Django migrations in Python<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/why-your-css-fails.html" aria-label="Understanding why your CSS fails"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Understanding why your CSS fails<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/fundamentals-functional-programming-react.html" aria-label="Fundamentals of functional programming with React"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Fundamentals of functional programming with React<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/using-axios-all-make-concurrent-requests.html" aria-label="Using axios.all to make concurrent requests"><!--[--><i class="vp-icon iconfont icon-axios" sizing="both"></i><!--]-->Using axios.all to make concurrent requests<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/animations-react-hooks-greensock.html" aria-label="Animations using React Hooks and GreenSock"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Animations using React Hooks and GreenSock<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/controlled-vs-uncontrolled-components-in-react.html" aria-label="Controlled vs. uncontrolled components in React"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Controlled vs. uncontrolled components in React<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/detect-click-outside-react-component-how-to.html" aria-label="How to detect a click outside a React component"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->How to detect a click outside a React component<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/css-margin-vs-padding.html" aria-label="CSS margin vs. padding"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->CSS margin vs. padding<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/using-setstate-react-components.html" aria-label="Using setState in React components"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Using setState in React components<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/level-up-your-css-selector-skills.html" aria-label="A complete guide for leveling up your CSS selector skills"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->A complete guide for leveling up your CSS selector skills<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/guide-to-css-animation-for-javascript-developers.html" aria-label="Guide to CSS animation for JavaScript developers"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Guide to CSS animation for JavaScript developers<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/create-react-app-a-quick-setup-guide.html" aria-label="Create React App: A quick setup guide"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Create React App: A quick setup guide<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/a-deep-dive-into-css-modules.html" aria-label="A deep dive into CSS Module"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->A deep dive into CSS Module<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/usestate-vs-useref.html" aria-label="useState vs. useRef: Similarities, differences, and use cases"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->useState vs. useRef: Similarities, differences, and use cases<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/react-hooks-state-management.html" aria-label="Using React Hooks for state management"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Using React Hooks for state management<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/using-state-machines-with-xstate-and-react.html" aria-label="Using state machines with XState and React"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Using state machines with XState and React<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/understanding-common-frustrations-react-hooks.html" aria-label="Understanding common frustrations with React Hooks"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Understanding common frustrations with React Hooks<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/javascript-generators-the-superior-async-await.html" aria-label="JavaScript generators: The superior async/await"><!--[--><i class="vp-icon iconfont icon-typescript" sizing="both"></i><!--]-->JavaScript generators: The superior async/await<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/es-modules-in-node-today.html" aria-label="Using ES modules in Node.js"><!--[--><i class="vp-icon fa-brands fa-node" sizing="both"></i><!--]-->Using ES modules in Node.js<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/react-memo-vs-usememo.html" aria-label="React.memo vs. useMemo: Major differences and use cases"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->React.memo vs. useMemo: Major differences and use cases<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/managing-react-state-zustand.html" aria-label="Managing React state with Zustand"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Managing React state with Zustand<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/immer-and-immutable-js-how-do-they-compare.html" aria-label="Immer and Immutable.js: How do they compare?"><!--[--><i class="vp-icon fa-brands fa-node" sizing="both"></i><!--]-->Immer and Immutable.js: How do they compare?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/blog.logrocket.com/avoiding-common-mistakes-in-react-hooks.html" aria-label="Avoiding common mistakes in React Hooks"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->Avoiding common mistakes in React Hooks<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2020</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2019</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2018</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><div class="page-cover"><img src="/bookshelf/assets/image/blog.logrocket.com/making-django-migrations-python/banner.png" alt no-view></div><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon iconfont icon-django" sizing="height"></i>Making Django migrations in Python</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://blog.logrocket.com/author/jayamoore/" target="_blank" rel="noopener noreferrer">Jaya Moore</a></span><span property="author" content="Jaya Moore"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">12/17/21</span><meta property="datePublished" content="2021-12-17T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 14 min</span><meta property="timeRequired" content="PT14M"></span><span class="page-category-info" aria-label="Category🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color6" role>Python</span><span class="page-category-item color3" role>Django</span><span class="page-category-item color8" role>Article(s)</span><!--]--><meta property="articleSection" content="Python,Django,Article(s)"></span><span class="page-tag-info" aria-label="Tag🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8" role>blog</span><span class="page-tag-item color5" role>blog.logrocket.com</span><span class="page-tag-item color7" role>python</span><span class="page-tag-item color7" role>py</span><span class="page-tag-item color2" role>django</span><span class="page-tag-item color0" role>py-django</span><!--]--><meta property="keywords" content="blog,blog.logrocket.com,python,py,django,py-django"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="frontmatter-title-관련" tabindex="-1"><a class="header-anchor" href="#frontmatter-title-관련"><span>Making Django migrations in Python 관련</span></a></h1><a class="route-link vp-card" href="/bookshelf/programming/py-django/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="/bookshelf/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Django > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><nav class="table-of-contents"><ul><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/making-django-migrations-python.html#what-is-django" class="router-link-active router-link-exact-active">What is Django?</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/making-django-migrations-python.html#what-is-a-migration" class="router-link-active router-link-exact-active">What is a migration?</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/making-django-migrations-python.html#setting-up-a-django-project" class="router-link-active router-link-exact-active">Setting up a Django project</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/making-django-migrations-python.html#performing-django-migrations" class="router-link-active router-link-exact-active">Performing Django migrations</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/making-django-migrations-python.html#creating-migrations-for-new-models" class="router-link-active router-link-exact-active">Creating migrations for new models</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/making-django-migrations-python.html#applying-migrations-to-existing-models" class="router-link-active router-link-exact-active">Applying migrations to existing models</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/making-django-migrations-python.html#reversing-migrations" class="router-link-active router-link-exact-active">Reversing migrations</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/making-django-migrations-python.html#showing-migrations" class="router-link-active router-link-exact-active">Showing migrations</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/making-django-migrations-python.html#troubleshooting-errors-in-django-migrations" class="router-link-active router-link-exact-active">Troubleshooting errors in Django migrations</a><ul><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/making-django-migrations-python.html#deleting-a-migration-file" class="router-link-active router-link-exact-active">Deleting a migration file</a></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/making-django-migrations-python.html#deleting-a-model-field" class="router-link-active router-link-exact-active">Deleting a model field</a></li></ul></li><li><a aria-current="page" href="/bookshelf/blog.logrocket.com/making-django-migrations-python.html#conclusion" class="router-link-active router-link-exact-active">Conclusion</a></li></ul></nav><hr><div class="vp-site-info" data-name="Making Django migrations in Python"><a class="vp-site-info-navigator no-external-link-icon" title="Making Django migrations in Python" href="https://blog.logrocket.com/making-django-migrations-python" target="_blank"></a><div class="vp-site-info-preview" style="background:url(/bookshelf/assets/image/blog.logrocket.com/making-django-migrations-python/banner.png) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="/assets/image/blog.logrocket.com/favicon.png" alt loading="lazy" no-view><div class="vp-site-info-name">Making Django migrations in Python</div><div class="vp-site-info-desc">By working closely with Django migrations to manage a SQL database, you can learn how to troubleshoot costly mistakes.</div></div><!----></div><p>Python’s <a href="https://djangoproject.com/" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-django" sizing="height"></i>Django web framework</a> abstracts away much of the complexity when building web applications. One of its key facets is the ability to dynamically interact with a given database on a user’s behalf.</p><figure><img src="/bookshelf/assets/image/blog.logrocket.com/making-django-migrations-python/banner.png" alt="Django Migrations With Python" tabindex="0" loading="lazy"><figcaption>Django Migrations With Python</figcaption></figure><p>Still, any developer needs to understand what’s going on behind the scenes, or it could lead to catastrophic consequences.</p><p>In this tutorial, you’ll work closely with Django migrations to manage a SQL database and learn how to troubleshoot costly mistakes.</p><hr><h2 id="what-is-django" tabindex="-1"><a class="header-anchor" href="#what-is-django"><span>What is Django?</span></a></h2><p>Django is a popular web framework that allows developers to quickly spin up a web application. Touted as “the web framework for perfectionists with deadlines,” <a href="https://djangoproject.com/" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-django" sizing="height"></i>Django</a> takes care of many low-level functions that can slow the development process.</p><p>Django offers out-of-the-box capabilities for routing URLs, authenticating users, and interfacing with databases. This is particularly useful for those who have little to no experience with Structured Query Language (<a href="https://en.wikipedia.org/wiki/SQL" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-wikipedia-w" sizing="height"></i>SQL</a>).</p><p>SQL is a domain-specific programming language that is used to interact with a relational database management system. Using SQL, one can create, read, update, and remove the records in a given database. However, the intricacies of SQL can be quite complex, and running improper queries can quickly result in the loss of sensitive or irretrievable data.</p><p>Django solves this problem by using an <a href="https://en.wikipedia.org/wiki/Object%E2%80%93relational_mapping" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-wikipedia-w" sizing="height"></i>object-relational mapper</a> to interface with the database on your behalf. In other words, you tell Django what structure you want the database to have, and Django takes care of translating your Python instructions to SQL queries to be executed on your chosen database. While you can still write SQL if needed, you don’t have to: you simply define your data models in Python, and Django takes care of the rest.</p><p>Here’s an example of a Django data model:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="models.py"><span>models.py</span></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">class</span> <span class="token class-name">Rocket</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;A model of a rocket ship.&quot;&quot;&quot;</span></span>
<span class="line">    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span></span>
<span class="line">    launch_date <span class="token operator">=</span> models<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line highlighted">    ready_to_launch <span class="token operator">=</span> models<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>This data model defines the structure for a database table called <code>Rocket</code>. The model states that the <code>Rocket</code> table should have three columns: <code>name</code>, <code>launch_date</code>, and <code>ready_to_launch</code>.</p><p>Note that this data model doesn’t specify an index or a row counter; that’s because Django implements this automatically under the hood.</p><p>Once you’re ready, you’ll pass this data model off to Django, where it will be transformed into the following database table:</p><table><thead><tr><th><code>id</code></th><th><code>name</code></th><th><code>launch_date</code></th><th><code>ready_to_launch</code></th></tr></thead><tbody><tr><td>1</td><td>Apollo</td><td>2035-10-19</td><td>False</td></tr><tr><td>2</td><td>Orion</td><td>2022-04-05</td><td>True</td></tr></tbody></table><p>The fields of your data model correspond to the headers in your database table. This table has been populated with data, and Django has automatically created a new <code>id</code> for each row.</p><hr><h2 id="what-is-a-migration" tabindex="-1"><a class="header-anchor" href="#what-is-a-migration"><span>What is a migration?</span></a></h2><p>So, how exactly does Django translate your Python model into a database table? Surely defining a table structure as a data model isn’t all there is to it.</p><p>Well, in order to go from data model to database table, you’ll need a migration. This is a special type of Python file that contains the instructions that Django needs to create the database table on your behalf.</p><p>Django uses your data model to populate these instructions and then runs a <code>migrate</code> command to apply those changes to the database.</p><p>In short, Django migrations follow two key steps:</p><ol><li>Create a migration file containing instructions for altering the database table</li><li>Migrate the database table by running the code contained in the migration file</li></ol><p>This two-step process ensures that only the changes you explicitly want to be made are applied. If a migration file contains an error or is missing a critical field, you’re able to correct the issue before applying the changes to the database itself.</p><p>This process makes it extremely simple for even junior web developers to interact with a robust database management system. There’s no need for complex SQL queries or to use a browser-based management console to change the database.</p><p>Simply define your data models, migrate your changes, and you’re good to go! Migrations are an excellent example of Django’s rapid prototyping capabilities.</p><hr><h2 id="setting-up-a-django-project" tabindex="-1"><a class="header-anchor" href="#setting-up-a-django-project"><span>Setting up a Django project</span></a></h2><p>Let’s initialize our project by creating a new folder and activating a virtual environment:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">mkdir</span> django-migrations-tutorial</span>
<span class="line"><span class="token builtin class-name">cd</span> django-migrations-tutorial</span>
<span class="line">python3 <span class="token parameter variable">-m</span> venv django-tut</span>
<span class="line"><span class="token builtin class-name">source</span> django-tut/bin/activate</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>source django-tut/bin/activate</code> command will activate the <code>django-tut</code> virtual environment on Linux or macOS. If you’re on Windows, the command will look slightly different:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">django-tut/bin/activate</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Inside of your virtual environment, install the latest version of Django:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python3 <span class="token parameter variable">-m</span> pip <span class="token function">install</span> django</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now that you have Django installed, you can start a new project using the <code>startproject</code> command. Let’s name our project <code>log_rocket</code>:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">django-admin startproject log_rocket.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The trailing period tells Django to install the project inside the current directory. Here’s what the project directory looks like now (excluding the virtual environment directory):</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">tree</span>
<span class="line"><span class="token comment">#</span></span>
<span class="line"><span class="token comment"># .</span></span>
<span class="line"><span class="token comment"># ├── log_rocket</span></span>
<span class="line"><span class="token comment"># │   ├── asgi.py</span></span>
<span class="line"><span class="token comment"># │   ├── __init__.py</span></span>
<span class="line"><span class="token comment"># │   ├── settings.py</span></span>
<span class="line"><span class="token comment"># │   ├── urls.py</span></span>
<span class="line"><span class="token comment"># │   └── wsgi.py</span></span>
<span class="line"><span class="token comment"># └── manage.py</span></span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># 1 directory, 6 files</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="performing-django-migrations" tabindex="-1"><a class="header-anchor" href="#performing-django-migrations"><span>Performing Django migrations</span></a></h2><p>Because Django acts as a scaffold to help you bootstrap your web development, it comes prepackaged with several internal data models and will automatically create a SQLite database for you when you apply an initial migration.</p><p>To migrate Django’s internal data models and create the initial database, you’ll use the <code>migrate</code> management command:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python3 manage.py migrate</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># Operations to perform:</span></span>
<span class="line"><span class="token comment">#   Apply all migrations: admin, auth, contenttypes, sessions</span></span>
<span class="line"><span class="token comment"># Running migrations:</span></span>
<span class="line"><span class="token comment">#   Applying contenttypes.0001_initial... OK</span></span>
<span class="line"><span class="token comment">#   Applying auth.0001_initial... OK</span></span>
<span class="line"><span class="token comment">#   Applying admin.0001_initial... OK</span></span>
<span class="line"><span class="token comment">#   Applying admin.0002_logentry_remove_auto_add... OK</span></span>
<span class="line"><span class="token comment">#   Applying admin.0003_logentry_add_action_flag_choices... OK</span></span>
<span class="line"><span class="token comment">#   Applying contenttypes.0002_remove_content_type_name... OK</span></span>
<span class="line"><span class="token comment">#   Applying auth.0002_alter_permission_name_max_length... OK</span></span>
<span class="line"><span class="token comment">#   Applying auth.0003_alter_user_email_max_length... OK</span></span>
<span class="line"><span class="token comment">#   Applying auth.0004_alter_user_username_opts... OK</span></span>
<span class="line"><span class="token comment">#   Applying auth.0005_alter_user_last_login_null... OK</span></span>
<span class="line"><span class="token comment">#   Applying auth.0006_require_contenttypes_0002... OK</span></span>
<span class="line"><span class="token comment">#   Applying auth.0007_alter_validators_add_error_messages... OK</span></span>
<span class="line"><span class="token comment">#   Applying auth.0008_alter_user_username_max_length... OK</span></span>
<span class="line"><span class="token comment">#   Applying auth.0009_alter_user_last_name_max_length... OK</span></span>
<span class="line"><span class="token comment">#   Applying auth.0010_alter_group_name_max_length... OK</span></span>
<span class="line"><span class="token comment">#   Applying auth.0011_update_proxy_permissions... OK</span></span>
<span class="line"><span class="token comment">#   Applying auth.0012_alter_user_first_name_max_length... OK</span></span>
<span class="line"><span class="token comment">#   Applying sessions.0001_initial... OK</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The output should show that Django has successfully run its own internal instructions to create an initial database. Now, if you examine the directory structure again, you should see a new file:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">tree</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># .</span></span>
<span class="line"><span class="token comment"># ├── db.sqlite3</span></span>
<span class="line"><span class="token comment"># ├── log_rocket</span></span>
<span class="line"><span class="token comment"># │   ├── asgi.py</span></span>
<span class="line"><span class="token comment"># │   ├── __init__.py</span></span>
<span class="line"><span class="token comment"># │   ├── __pycache__</span></span>
<span class="line"><span class="token comment"># │   │   ├── __init__.cpython-38.pyc</span></span>
<span class="line"><span class="token comment"># │   │   ├── settings.cpython-38.pyc</span></span>
<span class="line"><span class="token comment"># │   │   └── urls.cpython-38.pyc</span></span>
<span class="line"><span class="token comment"># │   ├── settings.py</span></span>
<span class="line"><span class="token comment"># │   ├── urls.py</span></span>
<span class="line"><span class="token comment"># │   └── wsgi.py</span></span>
<span class="line"><span class="token comment"># └── manage.py</span></span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># 2 directories, 10 files</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>At the top of the tree, there’s a new database file, <i class="vp-icon iconfont icon-sqlite" sizing="height"></i><code>db.sqlite3</code>. This is a SQLite database, which is the default database that Django creates for local development and testing purposes.</p><p>You can use the <code>dbshell</code> management command to examine the new database and confirm that Django has created the tables:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python3 manage.py dbshell</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># SQLite version 3.28.0 2019-04-16 19:49:53</span></span>
<span class="line"><span class="token comment"># Enter &quot;.help&quot; for usage hints.</span></span>
<span class="line"><span class="token comment"># sqlite&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In the prompt, type <code>.tables</code> to see a list of all the tables in the database:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="sqlite prompt"><span>sqlite prompt</span></div><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token punctuation">.</span><span class="token keyword">tables</span></span>
<span class="line"><span class="token comment">-- </span></span>
<span class="line"><span class="token comment">-- auth_group                  auth_user_user_permissions</span></span>
<span class="line"><span class="token comment">-- auth_group_permissions      django_admin_log</span></span>
<span class="line"><span class="token comment">-- auth_permission             django_content_type</span></span>
<span class="line"><span class="token comment">-- auth_user                   django_migrations</span></span>
<span class="line"><span class="token comment">-- auth_user_groups            django_session</span></span>
<span class="line"><span class="token punctuation">.</span><span class="token keyword">exit</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>You can exit the database shell with the <code>.exit</code> command.</p><hr><h2 id="creating-migrations-for-new-models" tabindex="-1"><a class="header-anchor" href="#creating-migrations-for-new-models"><span>Creating migrations for new models</span></a></h2><p>Django comes with a few data models built-in, but you’ll need to define most of them from scratch. In this section, we’ll create a Django app, define a model for it, and migrate your changes to the database.</p><p>Previously, we started a Django project called <code>log_rocket</code>. Now, you’ll create an app to attach to this project. A Django project is a directory that contains the global settings needed to manage all apps that are associated with it.</p><p>A Django app is a self-contained chunk of a larger project that focuses on a discrete portion of the whole. For example, a web project may contain a blogging app, a users app, a newsletter app, and more.</p><p>Let’s create an app for our project called <code>rockets</code>:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python3 manage.py startapp rockets</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>To tell Django about your new app, add its name to the <code>INSTALLED_APPS</code> setting in your project settings file:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="log_rocket/settings.py"><span>log_rocket/settings.py</span></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line">INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">&#39;django.contrib.admin&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;django.contrib.auth&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;django.contrib.contenttypes&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;django.contrib.sessions&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;django.contrib.messages&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;django.contrib.staticfiles&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;rockets&#39;</span> <span class="token comment"># add your new app name here</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>This will create a new directory called <code>rockets</code> alongside your project directory. If you examine the files in this new directory, you’ll see that Django has already provided the files you’ll need to define a new data model:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">tree rockets/</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># rockets/</span></span>
<span class="line"><span class="token comment"># ├── admin.py</span></span>
<span class="line"><span class="token comment"># ├── apps.py</span></span>
<span class="line"><span class="token comment"># ├── __init__.py</span></span>
<span class="line"><span class="token comment"># ├── migrations</span></span>
<span class="line"><span class="token comment"># │   └── __init__.py</span></span>
<span class="line"><span class="token comment"># ├── models.py</span></span>
<span class="line"><span class="token comment"># ├── tests.py</span></span>
<span class="line"><span class="token comment"># └── views.py</span></span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># 1 directory, 7 files</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>There’s a <i class="vp-icon fa-brands fa-python" sizing="height"></i><code>models.py</code> file, which you’ll use to define your data model, as well as a <code>migrations/</code> folder for Django to store the instructions for turning your data models into database tables.</p><p>Let’s move the <code>Rocket</code> data model we saw earlier into the <i class="vp-icon fa-brands fa-python" sizing="height"></i><code>models.py</code> file. Open the file in your text editor and paste in the code:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Create your models here.</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Rocket</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;A model of a rocket ship.&quot;&quot;&quot;</span></span>
<span class="line">    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span></span>
<span class="line">    launch_date <span class="token operator">=</span> models<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    ready_to_launch <span class="token operator">=</span> models<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Save and close the file. Now, you need to tell Django that you want to make a new table in the database. In other words, you need to make a migrations file for Django to use. Thankfully, Django comes with a handy management command that you can use to do this, called <code>makemigrations</code>:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python3 manage.py makemigrations rockets</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># Migrations for &#39;rockets&#39;:</span></span>
<span class="line"><span class="token comment">#   rockets/migrations/0001_initial.py</span></span>
<span class="line"><span class="token comment">#     - Create model Rocket</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The output you see is Django confirming that you want to create a migration file for the <code>rockets</code> app, within which you’ve defined a new model named <code>Rocket</code>.</p><p>The instructions for this data model are saved in the <i class="vp-icon fas fa-folder-open" sizing="height"></i><code>migrations/</code> folder, with the file name <i class="vp-icon fa-brands fa-python" sizing="height"></i><code>0001_initial.py</code>. You can open this file and confirm that the changes Django is going to make match what you’ve specified in your <i class="vp-icon fa-brands fa-python" sizing="height"></i><code>models.py</code> file.</p><p>Once you’ve confirmed the instructions are correct, you can tell Django to apply them with the <code>migrate</code> command:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python3 manage.py migrate rockets</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># Operations to perform:</span></span>
<span class="line"><span class="token comment">#   Apply all migrations: rockets</span></span>
<span class="line"><span class="token comment"># Running migrations:</span></span>
<span class="line"><span class="token comment">#   Applying rockets.0001_initial... OK</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>All migrations were applied successfully. Now, when you open <code>dbshell</code> and examine the list of tables, you should see a new one:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python3 manage.py dbshell</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># SQLite version 3.28.0 2019-04-16 19:49:53</span></span>
<span class="line"><span class="token comment"># Enter &quot;.help&quot; for usage hints.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="code-block-with-title"><div class="code-block-title-bar" data-title="sqlite prompt"><span>sqlite prompt</span></div><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token punctuation">.</span><span class="token keyword">tables</span></span>
<span class="line"><span class="token comment">-- auth_group                  django_admin_log</span></span>
<span class="line"><span class="token comment">-- auth_group_permissions      django_content_type</span></span>
<span class="line"><span class="token comment">-- auth_permission             django_migrations</span></span>
<span class="line"><span class="token comment">-- auth_user                   django_session</span></span>
<span class="line"><span class="token comment">-- auth_user_groups            rockets_rocket</span></span>
<span class="line"><span class="token comment">-- auth_user_user_permissions</span></span>
<span class="line"><span class="token punctuation">.</span>quit</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Django has named the new table <code>rockets_rocket</code> after the name of the app (<code>rockets</code>) and the lowercase name of the model you specified (<code>Rockets</code>).</p><p>You can manually add data to the new table using an <code>INSERT</code> SQL query:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> rockets_rocket <span class="token punctuation">(</span>name<span class="token punctuation">,</span> launch_date<span class="token punctuation">,</span> ready_to_launch<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">&quot;Apollo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2035-10-19&quot;</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> rockets_rocket <span class="token punctuation">(</span>name<span class="token punctuation">,</span> launch_date<span class="token punctuation">,</span> ready_to_launch<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">&quot;Orion&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2022-04-05&quot;</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> rockets_rocket<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">-- </span></span>
<span class="line"><span class="token comment">-- 1|Apollo|2035-10-19|0</span></span>
<span class="line"><span class="token comment">-- 2|Orion|2022-04-05|1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here, you used the same field names that you defined in your <code>Rocket</code> model. Each row is automatically assigned a unique <code>id</code>.</p><p>Note that you’ve manually inserted strings into the <code>launch_date</code> column, even though your data model specified that these fields should be <code>date</code> objects. Because you’ve already put strings into the database, you’ll want to update your data model to handle values in this column as character data instead. The next section will walk you through how to do this.</p><hr><h2 id="applying-migrations-to-existing-models" tabindex="-1"><a class="header-anchor" href="#applying-migrations-to-existing-models"><span>Applying migrations to existing models</span></a></h2><p>It’s highly unlikely that the first time you work on a model will also be the last. More often than not, you’ll need to tweak your models to reflect desired changes to the underlying database.</p><p>For instance, the <code>launch_date</code> field now contains string data that was manually inserted into the database. However, in your <code>Rocket</code> data model, you initially decided that this field should contain a <code>date</code> object.</p><p>Because it’s easier to manually insert strings into a database, let’s change this field on our model to accept character data:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="models.py"><span>models.py</span></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Create your models here.</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Rocket</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;A model of a rocket ship.&quot;&quot;&quot;</span></span>
<span class="line">    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span></span>
<span class="line">    launch_date <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token comment"># Update this line</span></span>
<span class="line">    ready_to_launch <span class="token operator">=</span> models<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Now, run the same commands to tell Django about the change to the data model:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python3 manage.py makemigrations rockets</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># Migrations for &#39;rockets&#39;:</span></span>
<span class="line"><span class="token comment">#   rockets/migrations/0002_alter_rocket_launch_date.py</span></span>
<span class="line"><span class="token comment">#     - Alter field launch_date on rocket</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Django correctly recognizes that you’ve altered the <code>launch_date</code> field. Because this is what you want to happen, you can apply this migration:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python3 manage.py migrate rockets</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># Operations to perform:</span></span>
<span class="line"><span class="token comment">#   Apply all migrations: rockets</span></span>
<span class="line"><span class="token comment"># Running migrations:</span></span>
<span class="line"><span class="token comment">#   Applying rockets.0002_alter_rocket_launch_date... OK</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>From this point forward, Django will ensure that all dynamically generated launch dates are rendered as strings.</p><p>You can use the <code>dbshell</code> to view the database schema and confirm that this change was made:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="sqlite prompt"><span>sqlite prompt</span></div><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token punctuation">.</span><span class="token keyword">schema</span> rockets_rocket</span>
<span class="line"><span class="token comment">-- </span></span>
<span class="line"><span class="token comment">-- CREATE TABLE IF NOT EXISTS &quot;rockets_rocket&quot; (&quot;id&quot; integer NOT NULL PRIMARY KEY AUTOINCREMENT, &quot;name&quot; varchar(200) NOT NULL, &quot;ready_to_launch&quot; bool NOT NULL, &quot;launch_date&quot; varchar(200) NOT NULL);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Here, you can see that the <code>&quot;launch_date&quot;</code> column should contain <code>varchar(200)</code> data, or character data with a length no longer than 200 characters.</p><hr><h2 id="reversing-migrations" tabindex="-1"><a class="header-anchor" href="#reversing-migrations"><span>Reversing migrations</span></a></h2><p>Let’s say that you’ve decided it was better to have the <code>launch_date</code> rendered as a date object. This will make it easier to schedule rocket launches, as you can take advantage of Python functions like <code>datetime.timedelta()</code>. This means you’ll need to undo that change you just made to the <code>launch_date</code> field in the database.</p><p>Once again, Django saves the day by providing you with simple commands that you can use to quickly reverse your changes. To unapply a migration, you’ll need to migrate the database once more, passing in the name of the migration that you want to revert to as an argument.</p><p>Django helpfully numbers the migrations for you. Changing the <code>launch_date</code> field was the second migration performed, and it’s named <code>0002_alter_rocket_launch_date</code>. To undo this change, you’ll want to revert to the first migration, which is named <code>0001_initial</code>:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python3 manage.py migrate rockets 0001_initial</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># Operations to perform:</span></span>
<span class="line"><span class="token comment">#   Target specific migration: 0001_initial, from rockets</span></span>
<span class="line"><span class="token comment"># Running migrations:</span></span>
<span class="line"><span class="token comment">#   Rendering model states... DONE</span></span>
<span class="line"><span class="token comment">#   Unapplying rockets.0002_alter_rocket_launch_date... OK</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The output confirms that Django has reversed the second migration.</p><p>A quick look at the database schema also confirms the reversal:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="sqlite prompt"><span>sqlite prompt</span></div><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token punctuation">.</span><span class="token keyword">schema</span> rockets_rocket</span>
<span class="line"><span class="token comment">-- </span></span>
<span class="line"><span class="token comment">-- CREATE TABLE IF NOT EXISTS &quot;rockets_rocket&quot; (&quot;id&quot; integer NOT NULL PRIMARY KEY AUTOINCREMENT, &quot;launch_date&quot; date NOT NULL, &quot;name&quot; varchar(200) NOT NULL, &quot;ready_to_launch&quot; bool NOT NULL);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>The type for the <code>&quot;launch_date&quot;</code> column has been set to a <code>date</code> object once again.</p><hr><h2 id="showing-migrations" tabindex="-1"><a class="header-anchor" href="#showing-migrations"><span>Showing migrations</span></a></h2><p>If you want to see a quick overview of what migrations have been applied to a Django project, you can use the <code>showmigrations</code> command to view them all at once:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python3 manage.py showmigrations</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># admin</span></span>
<span class="line"><span class="token comment">#  [X] 0001_initial</span></span>
<span class="line"><span class="token comment">#  [X] 0002_logentry_remove_auto_add</span></span>
<span class="line"><span class="token comment">#  [X] 0003_logentry_add_action_flag_choices</span></span>
<span class="line"><span class="token comment"># auth</span></span>
<span class="line"><span class="token comment">#  [X] 0001_initial</span></span>
<span class="line"><span class="token comment">#  [X] 0002_alter_permission_name_max_length</span></span>
<span class="line"><span class="token comment">#  [X] 0003_alter_user_email_max_length</span></span>
<span class="line"><span class="token comment">#  [X] 0004_alter_user_username_opts</span></span>
<span class="line"><span class="token comment">#  [X] 0005_alter_user_last_login_null</span></span>
<span class="line"><span class="token comment">#  [X] 0006_require_contenttypes_0002</span></span>
<span class="line"><span class="token comment">#  [X] 0007_alter_validators_add_error_messages</span></span>
<span class="line"><span class="token comment">#  [X] 0008_alter_user_username_max_length</span></span>
<span class="line"><span class="token comment">#  [X] 0009_alter_user_last_name_max_length</span></span>
<span class="line"><span class="token comment">#  [X] 0010_alter_group_name_max_length</span></span>
<span class="line"><span class="token comment">#  [X] 0011_update_proxy_permissions</span></span>
<span class="line"><span class="token comment">#  [X] 0012_alter_user_first_name_max_length</span></span>
<span class="line"><span class="token comment"># contenttypes</span></span>
<span class="line"><span class="token comment">#  [X] 0001_initial</span></span>
<span class="line"><span class="token comment">#  [X] 0002_remove_content_type_name</span></span>
<span class="line"><span class="token comment"># rockets</span></span>
<span class="line"><span class="token comment">#  [X] 0001_initial</span></span>
<span class="line"><span class="token comment">#  [ ] 0002_alter_rocket_launch_date</span></span>
<span class="line"><span class="token comment"># sessions</span></span>
<span class="line"><span class="token comment">#  [X] 0001_initial</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Look closely at the migrations for the <code>rockets</code> app. Even though you reversed the change to the <code>launch_date</code> field, Django has still kept a record of this migration. Indeed, you can list the contents of the migrations directory and see that the file is still there.</p><p>This is an immensely useful feature, as it allows you to reapply a previously reversed migration should you so choose. However, Django will automatically reapply that migration the next time you migrate the entire project, so keep this in mind.</p><hr><h2 id="troubleshooting-errors-in-django-migrations" tabindex="-1"><a class="header-anchor" href="#troubleshooting-errors-in-django-migrations"><span>Troubleshooting errors in Django migrations</span></a></h2><p>This section will cover a few errors you might come across while working with Django migrations. The concepts in this section are considered advanced because of the severe potential for critical data loss.</p><p>Remember to use datasets that you either have a backup for, or whose data you don’t mind losing completely, while you practice the techniques mentioned in the following sections.</p><h3 id="deleting-a-migration-file" tabindex="-1"><a class="header-anchor" href="#deleting-a-migration-file"><span>Deleting a migration file</span></a></h3><p>In the previous section, you saw that Django keeps a record of all migrations, even ones you’ve unapplied. Furthermore, you know that if you try to migrate the database again, Django will reapply that migration automatically! How can you stop this from happening?</p><p>You might try to delete the migration file and migrate the database from there:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">rm</span> rockets/migrations/0002_alter_rocket_launch_date.py</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This will remove the file that says to change the <code>launch_date</code> field to accept character data instead of a date object.</p><p>However, Django will present you with an error message if you try to migrate the database now:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python3 manage.py migrate rockets</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># Operations to perform:</span></span>
<span class="line"><span class="token comment">#   Apply all migrations: rockets</span></span>
<span class="line"><span class="token comment"># Running migrations:</span></span>
<span class="line"><span class="token comment">#   No migrations to apply.</span></span>
<span class="line"><span class="token comment">#   Your models in app(s): &#39;rockets&#39; have changes that are not yet reflected in a migration, and so won&#39;t be applied.</span></span>
<span class="line"><span class="token comment">#   Run &#39;manage.py makemigrations&#39; to make new migrations, and then re-run &#39;manage.py migrate&#39; to apply them.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This error message is saying that your data model does not match what’s currently in the database. When you deleted the migrations field, you deleted the instructions that said to change the <code>launch_date</code> field. However, your Django model itself still reflects this change.</p><p>To fix this, you need to go into your<i class="vp-icon fa-brands fa-python" sizing="height"></i> <code>models.py</code> file and manually reverse the change as well:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="models.py"><span>models.py</span></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Create your models here.</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Rocket</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line highlighted">    <span class="token triple-quoted-string string">&quot;&quot;&quot;A model of a rocket ship.&quot;&quot;&quot;</span></span>
<span class="line">    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span></span>
<span class="line">    launch_date <span class="token operator">=</span> models<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># Update this line</span></span>
<span class="line">    ready_to_launch <span class="token operator">=</span> models<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Now, when you migrate the database, Django will confirm that the table schema and your model are in sync:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python3 manage.py migrate rockets</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># Operations to perform:</span></span>
<span class="line"><span class="token comment">#   Apply all migrations: rockets</span></span>
<span class="line"><span class="token comment"># Running migrations:</span></span>
<span class="line"><span class="token comment">#   No migrations to apply.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Looking good!</p><h3 id="deleting-a-model-field" tabindex="-1"><a class="header-anchor" href="#deleting-a-model-field"><span>Deleting a model field</span></a></h3><p>When you’re working with production-grade projects, you’ll likely not be the only developer on the team. That means other developers will be interacting with the database and making asynchronous changes.</p><p>Say that one of your teammates misunderstood the requirements and accidentally removed the <code>launch_date</code> field completely. (To replicate this behavior, go ahead and remove the <code>launch_date</code> field from your data model and apply the migration.) The truncated output of <code>showmigrations</code> shows what happened:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="output"><span>output</span></div><div class="language-plaintext line-numbers-mode" data-highlighter="prismjs" data-ext="plaintext"><pre><code class="language-plaintext"><span class="line">rockets</span>
<span class="line"> [X] 0001_initial</span>
<span class="line"> [X] 0002_remove_rocket_launch_date</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Not a problem, right? Let’s try to revert the migration and see what happens:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python3 manage.py migrate rockets 0001_initial</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># Operations to perform:</span></span>
<span class="line"><span class="token comment">#   Target specific migration: 0001_initial, from rockets</span></span>
<span class="line"><span class="token comment"># Running migrations:</span></span>
<span class="line"><span class="token comment">#   Rendering model states... DONE</span></span>
<span class="line"><span class="token comment">#   Unapplying rockets.0002_remove_rocket_launch_date...Traceback (most recent call last):</span></span>
<span class="line"><span class="token comment">#   File &quot;/django-migrations-tutorial/django-tut/lib/python3.8/site-packages/django/db/backends/utils.py&quot;, line 84, in _execute</span></span>
<span class="line"><span class="token comment">#     return self.cursor.execute(sql, params)</span></span>
<span class="line"><span class="token comment">#   File &quot;/django-migrations-tutorial/django-tut/lib/python3.8/site-packages/django/db/backends/sqlite3/base.py&quot;, line 423, in execute</span></span>
<span class="line"><span class="token comment">#     return Database.Cursor.execute(self, query, params)</span></span>
<span class="line"><span class="token comment"># sqlite3.IntegrityError: NOT NULL constraint failed: new__rockets_rocket.launch_date</span></span>
<span class="line"><span class="token comment"># ... # truncated for length</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Uh-oh… Django won’t apply the migration because doing so would violate a constraint on the database.</p><p>Take a closer look at the table schema:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="sqlite prompt"><span>sqlite prompt</span></div><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token punctuation">.</span><span class="token keyword">schema</span> rockets_rocket</span>
<span class="line"><span class="token comment">-- </span></span>
<span class="line"><span class="token comment">-- CREATE TABLE IF NOT EXISTS &quot;rockets_rocket&quot; (&quot;id&quot; integer NOT NULL PRIMARY KEY AUTOINCREMENT, &quot;launch_date&quot; date NOT NULL, &quot;name&quot; varchar(200) NOT NULL, &quot;ready_to_launch&quot; bool NOT NULL);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>You can see that the <code>&quot;launch_date&quot;</code> field has a constraint on it called <code>NOT NULL</code>. This means that each row in the database must have a value in this field — it cannot be empty. Django models carry this constraint by default.</p><p>Unfortunately, when your colleague removed the <code>launch_date</code> field, Django applied this change to the database, dropping that column from the table as well:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="sqlite prompt"><span>sqlite prompt</span></div><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> rockets_rocket<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">-- </span></span>
<span class="line"><span class="token comment">-- 1|Apollo|0</span></span>
<span class="line"><span class="token comment">-- 2|Orion|1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>You cannot simply undo the change because you would be reverting to a database schema that requires the <code>launch_date</code> column to have a value in it. Yet, the table has existing rows that have no values for this field! Django is unable to reconcile the conflict, so the migration will not run.</p><p>To fix this, you’ll need to explicitly re-define the deleted table column in your data model:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="models.py"><span>models.py</span></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Create your models here.</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Rocket</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;A model of a rocket ship.&quot;&quot;&quot;</span></span>
<span class="line">    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span></span>
<span class="line">    launch_date <span class="token operator">=</span> models<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># Make sure this line exists</span></span>
<span class="line">    ready_to_launch <span class="token operator">=</span> models<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>When you try to make the new migration, you should be greeted with the following prompt:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">python3 manage.py makemigrations rockets</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># You are trying to add a non-nullable field &#39;launch_date&#39; to rocket without a default; we can&#39;t do that (the database needs something to populate existing rows).</span></span>
<span class="line"><span class="token comment"># Please select a fix:</span></span>
<span class="line"><span class="token comment">#  1) Provide a one-off default now (will be set on all existing rows with a null value for this column)</span></span>
<span class="line"><span class="token comment">#  2) Quit, and let me add a default in models.py</span></span>
<span class="line"><span class="token comment"># Select an option:</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This time, Django can ask you explicitly what you want to do about the non-nullable field <code>launch_date</code>. Select the option to provide a one-off default value:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># Select an option: 1</span></span>
<span class="line"><span class="token comment"># Please enter the default value now, as valid Python</span></span>
<span class="line"><span class="token comment"># The datetime and django.utils.timezone modules are available, so you can do e.g. timezone.now</span></span>
<span class="line"><span class="token comment"># Type &#39;exit&#39; to exit this prompt</span></span>
<span class="line"><span class="token comment"># &gt;&gt;&gt; timezone.now()</span></span>
<span class="line"><span class="token comment"># Migrations for &#39;rockets&#39;:</span></span>
<span class="line"><span class="token comment">#   rockets/migrations/0003_rocket_launch_date.py</span></span>
<span class="line"><span class="token comment">#     - Add field launch_date to rocket</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>launch_date</code> field accepts <code>date</code> objects, so you can use the <code>timezone.now()</code> function to provide the current date and time as a default value.</p><p>You can examine the newly created migrations file to confirm that Django will use that default value on existing rows in the database:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="rockets/migrations/0003_rocket_launch_date.py"><span>rockets/migrations/0003_rocket_launch_date.py</span></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">class</span> <span class="token class-name">Migration</span><span class="token punctuation">(</span>migrations<span class="token punctuation">.</span>Migration<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># ...</span></span>
<span class="line">    operations <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">        migrations<span class="token punctuation">.</span>AddField<span class="token punctuation">(</span></span>
<span class="line">            model_name<span class="token operator">=</span><span class="token string">&#39;rocket&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            name<span class="token operator">=</span><span class="token string">&#39;launch_date&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            field<span class="token operator">=</span>models<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span>default<span class="token operator">=</span>datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">(</span><span class="token number">2021</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">37</span><span class="token punctuation">,</span> <span class="token number">82124</span><span class="token punctuation">,</span> tzinfo<span class="token operator">=</span>utc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            preserve_default<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Now, when you migrate the database, Django will add the <code>launch_date</code> back to the table, and populate the existing rows with the specified default value:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="sqlite prompt"><span>sqlite prompt</span></div><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> rockets_rocket<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">-- </span></span>
<span class="line"><span class="token comment">-- 1|Apollo|0|2021-12-02</span></span>
<span class="line"><span class="token comment">-- 2|Orion|1|2021-12-02</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>If you don’t want to supply a default value, then you can mitigate this issue by explicitly removing the <code>NOT NULL</code> constraint. This is done by passing an argument in to the field you’re defining in your data model:</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="models.py"><span>models.py</span></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Create your models here.</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Rocket</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line highlighted">    <span class="token triple-quoted-string string">&quot;&quot;&quot;A model of a rocket ship.&quot;&quot;&quot;</span></span>
<span class="line">    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span></span>
<span class="line">    launch_date <span class="token operator">=</span> models<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span>null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment"># Allow null values</span></span>
<span class="line">    ready_to_launch <span class="token operator">=</span> models<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Now, if the <code>launch_date</code> column is removed and added back in, Django will apply the migration even when existing table rows contain no value for this field.</p><hr><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h2><p>Django’s object-relational mapper is a powerful tool and a boon to Python web developers across the world. In this tutorial, you’ve seen how you can work with Django migrations to quickly spin up database tables in Python without the need to write any SQL queries on your end.</p><p>You also learned a few techniques to troubleshoot errors like accidentally deleting a migration file or dropping a field from a database table. Working with data is a touchy endeavor, and while Django can help you reverse some mistakes, it can’t recover the data itself — so be sure to always back up your tables!</p><p>If you have any questions or comments, then please share them in the comments section below.</p><p>Thanks for reading!</p><!-- TODO: add ARTICLE CARD --><a class="vp-card" href="https://chanhi2000.github.io/bookshelf/blog.logrocket.com/making-django-migrations-python.html" target="_blank" style="background:rgba(112,76,182,0.2);"><img class="vp-card-logo" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Making Django migrations in Python</div><hr><div class="vp-card-desc">By working closely with Django migrations to manage a SQL database, you can learn how to troubleshoot costly mistakes.</div></div></a></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/chanhi2000/articles/edit/main/src/blog.logrocket.com/making-django-migrations-python.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/bookshelf/programming/py-django/articles/" aria-label="/programming/py-django/articles/"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->/programming/py-django/articles/</div></a><a class="route-link auto-link next" href="/bookshelf/blog.logrocket.com/why-your-css-fails.html" aria-label="Understanding why your CSS fails"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Understanding why your CSS fails<i class="vp-icon fa-brands fa-css3-alt" sizing="height"></i></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">MIT Licensed | Copyright © 2022-present <a href="https://github.com/chanhi2000">Chan Hee Lee</a></div><div class="vp-copyright">Copyright © 2025 Jaya Moore </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/bookshelf/assets/app-BVguHYKu.js" defer></script>
  </body>
</html>
