<!doctype html>
<html lang="ko-KR" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.24" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.94" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Swift for C++ Practitioners, Part 1: Intro & Value Types","image":[""],"datePublished":"2024-02-11T00:00:00.000Z","dateModified":null,"author":[]}</script><meta property="og:url" content="https://chanhi2000.github.io/bookshelf/douggregor.net/swift-for-cpp-practitioners-1.html"><meta property="og:site_name" content="📚Bookshelf"><meta property="og:title" content="Swift for C++ Practitioners, Part 1: Intro & Value Types"><meta property="og:description" content="Article(s) > Swift for C++ Practitioners, Part 1: Intro & Value Types"><meta property="og:type" content="article"><meta property="og:locale" content="ko-KR"><meta property="article:tag" content="cpp"><meta property="article:tag" content="c++"><meta property="article:tag" content="ios"><meta property="article:tag" content="swift"><meta property="article:tag" content="douggregor.net"><meta property="article:tag" content="blog"><meta property="article:published_time" content="2024-02-11T00:00:00.000Z"><link rel="icon" href="/bookshelf/assets/icon/favicon.svg"><title>Swift for C++ Practitioners, Part 1: Intro & Value Types | 📚Bookshelf</title><meta name="description" content="Article(s) > Swift for C++ Practitioners, Part 1: Intro & Value Types">
    <link rel="preload" href="/bookshelf/assets/style-DmRYlEXZ.css" as="style"><link rel="stylesheet" href="/bookshelf/assets/style-DmRYlEXZ.css">
    
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/bookshelf/" aria-label="Take me home"><img class="vp-nav-logo" src="/bookshelf/assets/icon/favicon.svg" alt><!----><span class="vp-site-name hide-in-pad">📚Bookshelf</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/bookshelf/news.html" aria-label><!--[--><i class="vp-icon fas fa-rss" sizing="height"></i><!--]--><!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-keyboard" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/hackingwithswift.com/" aria-label="hackingwithswift.com"><!--[--><img class="vp-icon" src="https://hackingwithswift.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->hackingwithswift.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fcc/" aria-label="freecodecamp.org"><!--[--><img class="vp-icon" src="https://cdn.freecodecamp.org/universal/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->freecodecamp.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kodeco.com/" aria-label="kodeco.com"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->kodeco.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.kotzilla.io/" aria-label="blog.kotzilla.io"><!--[--><img class="vp-icon" src="https://blog.kotzilla.io/hubfs/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.kotzilla.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kt.academy/" aria-label="kt.academy"><!--[--><img class="vp-icon" src="https://kt.academy/logo.png" alt aria-hidden no-view sizing="both"><!--]-->kt.academy<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/droidcon.com/" aria-label="droidcon.com"><!--[--><img class="vp-icon" src="https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png" alt aria-hidden no-view sizing="both"><!--]-->droidcon.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/outcomeschool.com/" aria-label="outcomeschool.com"><!--[--><img class="vp-icon" src="https://outcomeschool.com/static/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->outcomeschool.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/frontendmasters.com/" aria-label="frontendmasters.com"><!--[--><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->frontendmasters.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tricks.com/" aria-label="css-tricks.com"><!--[--><img class="vp-icon" src="https://css-tricks.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->css-tricks.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="smashingmagazine.com"><!--[--><img class="vp-icon" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->smashingmagazine.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.logrocket.com/" aria-label="blog.logrocket.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.logrocket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/realpython.com/" aria-label="realpython.com"><!--[--><img class="vp-icon" src="https://realpython.com/static/favicon.68cbf4197b0c.png" alt aria-hidden no-view sizing="both"><!--]-->realpython.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/digitalocean.com/" aria-label="digitalocean.com"><!--[--><img class="vp-icon" src="https://digitalocean.com/_next/static/media/favicon.594d6067.ico" alt aria-hidden no-view sizing="both"><!--]-->digitalocean.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/antonioleiva.com/" aria-label="antonioleiva.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/antonioleiva.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->antonioleiva.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/johnnyreilly.com/" aria-label="johnnyreilly.com"><!--[--><img class="vp-icon" src="https://johnnyreilly.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->johnnyreilly.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/code-maze.com/" aria-label="code-maze.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/code-maze.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->code-maze.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/milanjovanovic.tech/" aria-label="milanjovanovic.tech"><!--[--><img class="vp-icon" src="https://milanjovanovic.tech/profile_favicon.png" alt aria-hidden no-view sizing="both"><!--]-->milanjovanovic.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/shopify.engineering/" aria-label="shopify.engineering"><!--[--><img class="vp-icon" src="https://cdn.shopify.com/static/shopify-favicon.png" alt aria-hidden no-view sizing="both"><!--]-->shopify.engineering<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devtoolstips.org/" aria-label="devtoolstips.org"><!--[--><img class="vp-icon" src="https://devtoolstips.org/assets/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devtoolstips.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/piccalil.li/" aria-label="piccalil.li"><!--[--><img class="vp-icon" src="https://piccalil.li/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->piccalil.li<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/sitepoint.com/" aria-label="sitepoint.com"><!--[--><img class="vp-icon" src="https://sitepoint.com/favicons/512x512.png" alt aria-hidden no-view sizing="both"><!--]-->sitepoint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/event-driven.io/" aria-label="event-driven.io"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/event-driven.io/favicon.jfif" alt aria-hidden no-view sizing="both"><!--]-->event-driven.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/packagemain.tech/" aria-label="packagemain.tech"><!--[--><img class="vp-icon" src="https://substack-post-media.s3.amazonaws.com/public/images/2ea54e25-eaa6-4630-bfc0-10b8cfdce894/apple-touch-icon-1024x1024.png" alt aria-hidden no-view sizing="both"><!--]-->packagemain.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/gosolve.io/" aria-label="gosolve.io"><!--[--><img class="vp-icon" src="https://gosolve.io/wp-content/uploads/2022/03/cropped-ikona1-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->gosolve.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/towardsdatascience.com/" aria-label="towardsdatascience.com"><!--[--><img class="vp-icon" src="https://cdn-images-1.medium.com/v2/resize:fill:128:128/1*VzTUkfeGymHP4Bvav-T-lA.png" alt aria-hidden no-view sizing="both"><!--]-->towardsdatascience.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/bookshelf/douggregor.net/" aria-label="douggregor.net"><!--[--><i class="vp-icon fas fa-globe" sizing="both"></i><!--]-->douggregor.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/d2.naver.com/" aria-label="d2.naver.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/d2.naver.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->d2.naver.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakao.com/" aria-label="tech.kakao.com"><!--[--><img class="vp-icon" src="https://www.kakaocorp.com/page/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakao.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakaopay.com/" aria-label="tech.kakaopay.com"><!--[--><img class="vp-icon" src="https://tech.kakaopay.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakaopay.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fe-developers.kakaoent.com/" aria-label="fe-developers.kakaoent.com"><!--[--><img class="vp-icon" src="https://fe-developers.kakaoent.com/favicon-32x32.png?v=44803cb16c1e2debd3984cf2e8cb2ded" alt aria-hidden no-view sizing="both"><!--]-->fe-developers.kakaoent.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/yozm.wishket.com/" aria-label="yozm.wishket.com"><!--[--><img class="vp-icon" src="https://yozm.wishket.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->yozm.wishket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/popit.kr/" aria-label="popit.kr"><!--[--><img class="vp-icon" src="https://popit.kr/wp-content/uploads/2016/08/favicon_32x32.png" alt aria-hidden no-view sizing="both"><!--]-->popit.kr<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devkuma.com/" aria-label="devkuma.com"><!--[--><img class="vp-icon" src="https://devkuma.com/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devkuma.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.gangnamunni.com/" aria-label="blog.gangnamunni.com"><!--[--><img class="vp-icon" src="https://blog.gangnamunni.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->blog.gangnamunni.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/codingeverybody.kr/" aria-label="codingeverybody.kr"><!--[--><img class="vp-icon" src="https://codingeverybody.kr/wp-content/uploads/cropped-favicon-origin-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->codingeverybody.kr<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-network-wired" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tecmint.com/" aria-label="tecmint.com"><!--[--><img class="vp-icon" src="https://tecmint.com/wp-content/uploads/2020/07/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tecmint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/docker.com/" aria-label="docker.com"><!--[--><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->docker.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/learnk8s.io/" aria-label="learnk8s.io"><!--[--><img class="vp-icon" src="https://static.learnk8s.io/f7e5160d4744cf05c46161170b5c11c9.svg" alt aria-hidden no-view sizing="both"><!--]-->learnk8s.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/itsfoss.com/" aria-label="itsfoss.com"><!--[--><img class="vp-icon" src="https://itsfoss.com/content/images/size/w256h256/2022/12/android-chrome-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->itsfoss.com<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/chanhi2000/articles" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-appearance-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-appearance-dropdown"><!----></div></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><i class="vp-icon fas fa-globe" sizing="both"></i><span class="vp-sidebar-title">douggregor.net</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-1.html" aria-label="Swift for C++ Practitioners, Part 1: Intro &amp; Value Types"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->Swift for C++ Practitioners, Part 1: Intro &amp; Value Types<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-2.html" aria-label="Swift for C++ Practitioners, Part 2: Reference Types &amp; Optionals"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->Swift for C++ Practitioners, Part 2: Reference Types &amp; Optionals<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-3.html" aria-label="Swift for C++ Practitioners, Part 3: Extensions and Access Control"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->Swift for C++ Practitioners, Part 3: Extensions and Access Control<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-4.html" aria-label="Swift for C++ Practitioners, Part 4: Generics"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->Swift for C++ Practitioners, Part 4: Generics<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-5.html" aria-label="Swift for C++ Practitioners, Part 5: Type erasure &amp; metatypes"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->Swift for C++ Practitioners, Part 5: Type erasure &amp; metatypes<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-6.html" aria-label="Swift for C++ Practitioners, Part 6: Error Handling"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->Swift for C++ Practitioners, Part 6: Error Handling<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-7.html" aria-label="Swift for C++ Practitioners, Part 7: Closures"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->Swift for C++ Practitioners, Part 7: Closures<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-8.html" aria-label="Swift for C++ Practitioners, Part 8: Global Variables"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->Swift for C++ Practitioners, Part 8: Global Variables<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-9.html" aria-label="Swift for C++ Practitioners, Part 9: Extensible Literals"><!--[--><i class="vp-icon fa-brands fa-swift" sizing="both"></i><!--]-->Swift for C++ Practitioners, Part 9: Extensible Literals<!----></a></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon fa-brands fa-swift" sizing="height"></i>Swift for C++ Practitioners, Part 1: Intro &amp; Value Types</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">24. 2. 11.</span><meta property="datePublished" content="2024-02-11T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 18 min</span><meta property="timeRequired" content="PT18M"></span><span class="page-category-info" aria-label="Category🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color3" role>Swift</span><span class="page-category-item color6" role>C++</span><span class="page-category-item color8" role>Article(s)</span><!--]--><meta property="articleSection" content="Swift,C++,Article(s)"></span><span class="page-tag-info" aria-label="Tag🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8" role>blog</span><span class="page-tag-item color8" role>douggregor.net</span><span class="page-tag-item color6" role>swift</span><span class="page-tag-item color8" role>ios</span><span class="page-tag-item color8" role>c++</span><span class="page-tag-item color4" role>cpp</span><!--]--><meta property="keywords" content="blog,douggregor.net,swift,ios,c++,cpp"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="frontmatter-title-관련" tabindex="-1"><a class="header-anchor" href="#frontmatter-title-관련"><span>Swift for C++ Practitioners, Part 1: Intro &amp; Value Types 관련</span></a></h1><a class="route-link vp-card" href="/bookshelf/programming/swift/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="https://chanhi2000.github.io/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Swift > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><a class="route-link vp-card" href="/bookshelf/programming/cpp/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="https://chanhi2000.github.io/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">C++ > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><nav class="table-of-contents"><ul><li><a aria-current="page" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-1.html#hello-world" class="router-link-active router-link-exact-active">Hello, World!</a></li><li><a aria-current="page" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-1.html#value-types" class="router-link-active router-link-exact-active">Value types</a><ul><li><a aria-current="page" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-1.html#aggregating-values-in-structs" class="router-link-active router-link-exact-active">Aggregating values in structs</a></li><li><a aria-current="page" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-1.html#initialization-always-goes-through-initializers" class="router-link-active router-link-exact-active">Initialization always goes through initializers</a></li><li><a aria-current="page" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-1.html#where-s-my-copy-constructor" class="router-link-active router-link-exact-active">Where&#39;s my copy constructor?</a></li><li><a aria-current="page" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-1.html#immutability-runs-deep-with-value-types" class="router-link-active router-link-exact-active">Immutability runs deep with value types</a></li><li><a aria-current="page" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-1.html#memory-safety-and-the-law-of-exclusivity" class="router-link-active router-link-exact-active">Memory safety and the law of exclusivity</a></li><li><a aria-current="page" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-1.html#enums-are-the-union-of-enums-and-unions" class="router-link-active router-link-exact-active">Enums are the union of enums and unions</a></li></ul></li><li><a aria-current="page" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-1.html#collections" class="router-link-active router-link-exact-active">Collections</a></li><li><a aria-current="page" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-1.html#regular-types" class="router-link-active router-link-exact-active">Regular types</a></li><li><a aria-current="page" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-1.html#what-s-next" class="router-link-active router-link-exact-active">What&#39;s next?</a></li><li><a aria-current="page" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-1.html#참조" class="router-link-active router-link-exact-active">참조</a></li></ul></nav><hr><a class="vp-card" href="https://www.douggregor.net/posts/swift-for-cxx-practitioners-value-types/" target="_blank" style="background:rgba(22,22,22,0.2);"><!----><div class="vp-card-content"><div class="vp-card-title">Swift for C++ Practitioners, Part 1: Intro & Value Types | Doug's Compiler Corner</div><hr><div class="vp-card-desc">Swift for C++ Practitioners, Part 1: Intro & Value Types</div></div></a><p>There is a <a href="https://www.swift.org/getting-started" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-swift" sizing="height"></i>Getting Started</a> guide for Swift that&#39;s good for a general audience. However, I&#39;ve noticed that folks coming from C++ tend to struggle with certain aspects of Swift&#39;s design, and can get themselves stuck. I think I understand why: the two languages feel similar enough that someone familiar with C++ will take the idioms and patterns from C++ and project them on to Swift, which doesn&#39;t always end up well. So, I want to take a different approach to teaching Swift that is specifically geared toward C++ &quot;practitioners&quot;: folks who write C++ day-to-day and understand not only the C++ language, but its standard library and best practices. For you, dear C++ practitioner, I want to teach Swift by mapping from the idioms, patterns, and mental model of C++ into Swift. My hope is that you&#39;ll come through this series of posts not just learning Swift, but learning how to use Swift <em>well</em>.</p><p>As a C++ programmer, some parts of Swift will feel like magic, such as separately type-checked generics and value types that compose beautifully, and we&#39;ll revel in those. I&#39;ll show how some of the aspects of C++ that we&#39;ve collectively come to view as problematic, such as wrong defaults or avoidable foot guns, are addressed by Swift&#39;s design. Other parts of Swift will grate against the sensibilities of a C++ practitioner, and we won&#39;t shy away from those, either. Instead, we&#39;ll explain what is different, why Swift is designed that way, and how to cope. I live in both worlds: I&#39;m a Swift designer, implementer, and advocate, and yet I&#39;ve a long history with C++ that includes being a code owner of Clang and spending a decade on the ISO C++ committee. Most of the code I write day-to-day is in the Swift compiler, which is mostly C++ but is migrating toward Swift.</p><div class="hint-container note"><p class="hint-container-title">Note</p><p>You may have heard about <a href="https://www.swift.org/documentation/cxx-interop" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-swift" sizing="height"></i>Swift&#39;s interoperability with C++</a>. It&#39;s a fantastic tool for incrementally moving a C++ code base toward Swift or wrapping up a C++ library in a nicer Swift interface. However, it&#39;s the wrong place to start if you know C++ already and want to learn Swift. Instead, I recommend building something purely in Swift first, to get the feel for Swift without the &quot;pull&quot; of existing C++ code toward more C++-centric patterns. You&#39;ll be able to integrate Swift better into your existing code bases once you have a solid understanding of both languages.</p></div><p>This is a multi-part series that will walk through the various features of Swift. We&#39;ll start with the obligatory &quot;Hello, world&quot; and then dive straight into <em>value types</em>.</p><hr><h2 id="hello-world" tabindex="-1"><a class="header-anchor" href="#hello-world"><span>Hello, World!</span></a></h2><p>Okay, let&#39;s get this over with: this is &quot;Hello, World&quot; in Swift:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Hello, world!&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>But it&#39;s more important to greet you, dear C++ practictioner, so let&#39;s customize it a little bit:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">let</span> reader <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;dear C++ practitioner&quot;</span></span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;&quot;&quot;</span>
<span class="line">      Hello, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">reader</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">!</span>
<span class="line">      </span>
<span class="line">      Today, we shall embark on learning a new programming language, Swift.</span>
<span class="line">      &quot;&quot;&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>let</code> is how we declare an immutable variable, like <code>const</code> in C++, but with stronger guarantees: we&#39;ll get to that later. We&#39;ve omitted the type because Swift does type inference in a manner that&#39;s similar to <code>auto</code> in C++, but we could have written the type explicitly with <code>let reader: String</code>. The triple-quotes describe a <a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/stringsandcharacters#Multiline-String-Literals" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-swift" sizing="height"></i>multi-line string literal</a>, and the <code>\(...)</code> syntax within it is <a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/stringsandcharacters#String-Interpolation" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-swift" sizing="height"></i>string interpolation</a>, a feature common in scripting languages that makes it easy to plug values into the middle of a string.</p><hr><h2 id="value-types" tabindex="-1"><a class="header-anchor" href="#value-types"><span>Value types</span></a></h2><p>C++ provides rich support for <em>value types</em>, i.e., types for which each copy is completely independent of the original. Let&#39;s take a simple example with C++ vectors:</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line">std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;</span> v1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;original&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;</span> v2 <span class="token operator">=</span> v1<span class="token punctuation">;</span></span>
<span class="line">v2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;copy&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here, <code>v1</code> is a vector containing <code>&quot;Hello&quot;</code> and <code>&quot;original&quot;</code>. When we make a copy <code>v2</code>, that copy is completely independent of the original: the change to <code>v2</code> on the last line, so that it contains <code>&quot;Hello&quot;</code> and <code>&quot;copy&quot;</code> , doesn&#39;t modify the original <code>v1</code>.</p><p>Many C++ types are value types, from builtin types like integers and floating-point types to standard library containers like <code>std::string</code>, <code>std::vector</code>, and <code>std::map</code>. C++ lets you build your own value types by letting you control how a class type is created, copied, and destroyed, so long as you follow the <a href="https://en.cppreference.com/w/cpp/language/rule_of_three" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-cpp" sizing="height"></i>Rule of Three/Five/Zero</a>.</p><p>Swift also emphasizes value types because they aid <em>local reasoning</em>, which is the ability to look at code in isolation and reason about what it does, and whether it does so correctly. When you copy an instance of a value type, you don&#39;t need to worry that something you do will affect the original. As in C++, many Swift types are value types, including <code>String</code>, <code>Array</code>, and <code>Dictionary</code>, which are analogous to <code>std::string</code>, <code>std::vector</code>, and <code>std::map</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">let</span> v1<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;Hello&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;original&quot;</span></span><span class="token punctuation">]</span> <span class="token comment">// [String] is an array type, can also be spelled Array&lt;String&gt;</span></span>
<span class="line"><span class="token keyword">var</span> v2 <span class="token operator">=</span> v1 <span class="token comment">// inferred to also have type [String]</span></span>
<span class="line">v2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;copy&quot;</span></span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span> <span class="token comment">// prints [&quot;Hello&quot;, &quot;original&quot;]</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>v2<span class="token punctuation">)</span> <span class="token comment">// prints [&quot;Hello&quot;, &quot;copy&quot;]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here we&#39;ve introduced the <code>var</code> keyword: <code>var</code> introduces variables that can be modified (i.e., they are mutable), whereas <code>let</code> introduces variables that cannot be modified (they are immutable). In Swift, we prefer that you use <code>let</code> wherever you can, because immutability aids local reasoning: it&#39;s easier to reason about something if it isn&#39;t changing.</p><h3 id="aggregating-values-in-structs" tabindex="-1"><a class="header-anchor" href="#aggregating-values-in-structs"><span>Aggregating values in structs</span></a></h3><p>As in C++, Swift has structs to aggregate data together. While in C++ the difference between <code>struct</code> and <code>class</code> is almost cosmetic (it only impacts whether the defaults are <code>public</code> vs. <code>private</code>), in Swift they are completely different animals. A Swift <code>struct</code> is generally a value type, whereas a Swift <code>class</code> is a class in the Object-Oriented sense of the word, and has <em>reference semantics</em>: copies still refer to the same underlying instance. We&#39;ll get back to classes in a later post, because <code>struct</code>s are one way we build value types out of other value types:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">struct</span> <span class="token class-name">LabeledPoint</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token class-name">Double</span></span>
<span class="line">  <span class="token keyword">var</span> y<span class="token punctuation">:</span> <span class="token class-name">Double</span></span>
<span class="line">  <span class="token keyword">var</span> label<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Structs containing other value types are themselves value types. For example, let&#39;s use that labeled point:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token class-name">LabeledPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> label<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;origin&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">var</span> p2 <span class="token operator">=</span> p1</span>
<span class="line">p2<span class="token punctuation">.</span>label <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;center&quot;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span> <span class="token comment">// LabeledPoint(x: 0, y: 0, label: &quot;origin&quot;)</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span> <span class="token comment">// LabeledPoint(x: 0, y: 0, label: &quot;center&quot;)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That first line is creating a new instance of a <code>LabeledPoint</code>, calling an <em>initializer</em> (that&#39;s what Swift calls constructors) to produce the new value from the component parts. The result is on the stack, not the heap, just like you&#39;d expect in C++. Copying the <code>p1</code> value into <code>p2</code> produces a completely separate value, just as you&#39;d expect from the corresponding C++ code.</p><div class="hint-container info"><p class="hint-container-title">Labeled arguments</p><p>When creating the new <code>LabeledPoint</code> instance, notice that each of the arguments requires a label, e.g., <code>x:</code>, <code>y:</code>, and <code>label:</code>. By default, all function arguments must be labeled at the call site, which communicates information about what the function will be doing with the corresponding argument, aiding readability. This is particularly useful when combined with default arguments. A function can opt out of having a particular argument labeled, of course, and we&#39;ll get back to that later.</p></div><h3 id="initialization-always-goes-through-initializers" tabindex="-1"><a class="header-anchor" href="#initialization-always-goes-through-initializers"><span>Initialization always goes through initializers</span></a></h3><p>C++ has a couple of different ways to initialize an instance of a <code>struct</code>, including constructor calls, initializer lists, default initialization, and copy initialization. Swift settles on one: calling an initializer. Initializers are responsible for initializing all of the fields of the struct before they return (no excuses). The creation of the <code>LabeledPoint</code> in the previous section is using the <em>memberwise</em> initializer that Swift provides automatically for structs, which initializes the fields in order from the corresponding parameters. We could go ahead and write out this initializer directly if we wanted to, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">struct</span> <span class="token class-name">LabeledPoint</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token class-name">Double</span></span>
<span class="line">  <span class="token keyword">var</span> y<span class="token punctuation">:</span> <span class="token class-name">Double</span></span>
<span class="line">  <span class="token keyword">var</span> label<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">init</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">,</span> label<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">self</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x</span>
<span class="line">    <span class="token keyword">self</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y</span>
<span class="line">    <span class="token keyword">self</span><span class="token punctuation">.</span>label <span class="token operator">=</span> label</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>init</code> keyword is what defines an initializer, and is the equivalent of repeating the class name in C++ to define a constructor, but usually less verbose. <code>self</code> is the Swift equivalent to <code>this</code>, but think of it as being a like a C++ reference (<code>ClassName&amp;</code>) rather than a pointer like it would be in C++ (<code>ClassName*</code>).</p><p>There is no special syntax for initializing the fields in a <code>struct</code>, like there is in C++. Instead, it&#39;s just normal assignments to the fields, and the compiler checks that (1) you don&#39;t read a field before it&#39;s been assigned, and (2) all fields have been assigned before <code>self</code> is referenced as a whole object, including the function return. So let&#39;s try out a semantic disaster of an initializer that breaks both rules:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token comment">// in LabeledPoint ...</span></span>
<span class="line"><span class="token keyword">init</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">,</span> label<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">self</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>x   <span class="token comment">// error: &#39;self&#39; used before all stored properties are initialized</span></span>
<span class="line">  <span class="token keyword">self</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x</span>
<span class="line">  <span class="token keyword">if</span> <span class="token class-name">Int</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token operator">..&lt;</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token comment">// error: &#39;self&#39; used before all stored properties are initialized</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token comment">//  error: return from initializer without initializing all stored properties</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Uses of uninitialized variables don&#39;t happen in Swift, because of a semantic guarantee called <em>definite initialization</em>: the compiler checks that every variable is initialized before it is used, in all execution paths. This applies equally to all code, and it helps define away a class of bugs that bite us in C++:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">let</span> p<span class="token punctuation">:</span> <span class="token class-name">LabeledPoint</span></span>
<span class="line"><span class="token keyword">if</span> y <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span></span>
<span class="line">  p <span class="token operator">=</span> <span class="token class-name">LabeledPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> label<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;origin&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token comment">// error: constant &#39;p&#39; used before being initialized</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Because of definite initialization, Swift has no notion of a default constructor the way C++ does. The variable <code>p</code> <em>is not initialized</em> on the line where it is defined, the way a C++ class with a non-trivial default constructor would be. Rather, you assign to it, and the first assignment is an initialization. You can&#39;t read from it before initializing it, so there is no <em>undefined behavior</em> due to uninitialized values.</p><p>You could write an initializer that takes no arguments, and perhaps that makes sense for points to (say) create the origin point, but Swift will never automatically call it: you&#39;ll always call it explicitly. Let&#39;s write that out so we can demonstrate the Swift equivalent to C++ <a href="https://learn.microsoft.com/en-us/cpp/cpp/delegating-constructors?view=msvc-170" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-microsoft" sizing="height"></i>delegating constructors</a>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token comment">// also in LabeledPoint</span></span>
<span class="line"><span class="token keyword">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> label<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;origin&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The call to <code>self.init</code> delegates the responsibility for initializing all of the fields of <code>self</code> to another initializer. The rules of definite initialization kick in here, too: you can&#39;t use (or initialize) any of the fields of <code>self</code> before the <code>self.init</code> call, and after that call <code>self</code> is fully initialized.</p><h3 id="where-s-my-copy-constructor" tabindex="-1"><a class="header-anchor" href="#where-s-my-copy-constructor"><span>Where&#39;s my copy constructor?</span></a></h3><p>By now, you&#39;ve probably noted that we could write an initializer that looks very much like a copy constructor:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token comment">// also in LabeledPoint</span></span>
<span class="line"><span class="token keyword">init</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> other<span class="token punctuation">:</span> <span class="token class-name">LabeledPoint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">self</span><span class="token punctuation">.</span>x <span class="token operator">=</span> other<span class="token punctuation">.</span>x</span>
<span class="line">  <span class="token keyword">self</span><span class="token punctuation">.</span>y <span class="token operator">=</span> other<span class="token punctuation">.</span>y</span>
<span class="line">  <span class="token keyword">self</span><span class="token punctuation">.</span>label <span class="token operator">=</span> other<span class="token punctuation">.</span>label</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>_</code> in the declaration of <code>other</code> is a placeholder for &quot;not named&quot;, and here it means that the argument to this initializer is not named. Therefore, we can call this initializer with the syntax <code>LabeledPoint(other)</code>, just like one would in C++. However, Swift will never <em>implicitly</em> call an initializer like this, because it&#39;s not special in any way.</p><p>Swift will copy, move, and destroy instances of structs by performing those operations directly on each instance property of the <code>struct</code>. In essence, a Swift <code>struct</code> always follows the <a href="http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Rc-zero" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-cpp" sizing="height"></i>C++ rule of zero</a>, where one relies on the default implementations of all of the special constructors, assignment operators, and destructor. In practice, this means that it&#39;s not possible to observe when Swift is making copies of value types, so the compiler is free to make copies that are necessary for implementing the semantics of the program, and optimize away copies when they are no longer needed. The compiler can even implicitly turn a &quot;copy&quot; into a move when it determines that the source of the copy is going away.</p><p>For a type that needs hold on to resources, Swift has classes, which I&#39;ve already noted will be the subject of another post. Swift also has a notion of &quot;noncopyable&quot; types, but those will come much later. For now, we&#39;ll dive deeper into value types.</p><h3 id="immutability-runs-deep-with-value-types" tabindex="-1"><a class="header-anchor" href="#immutability-runs-deep-with-value-types"><span>Immutability runs deep with value types</span></a></h3><p>Earlier, we introduced <code>let</code> as a way to create immutable local variables. With value types, immutability is the default. Parameters are immutable unless otherwise specified, which also includes <code>self</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token comment">// in LabeledPoint</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">badSwapX</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> other<span class="token punctuation">:</span> <span class="token class-name">LabeledPoint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> tmpX <span class="token operator">=</span> other<span class="token punctuation">.</span>x</span>
<span class="line">  other<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>x  <span class="token comment">// error: &#39;other&#39; parameter is immutable</span></span>
<span class="line">  <span class="token keyword">self</span><span class="token punctuation">.</span>x <span class="token operator">=</span> tmpX     <span class="token comment">// error: &#39;self&#39; parameter is immutable</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>One can create methods that mutate <code>self</code> by putting the <code>mutating</code> modifier before the <code>func</code> keyword. Let&#39;s start with a sensible example:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token comment">// in LabeledPoint</span></span>
<span class="line"><span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">reflectOverXAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  y <span class="token operator">=</span> <span class="token operator">-</span>y</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>For other parameters, one can place <code>inout</code> on the parameter to indicate that it is meant to be modified by the function. Formally, <code>mutating</code> on the function is equivalant to <code>inout</code> on the <code>self</code> parameter, but Swift uses <code>mutating</code> because it reads better. With <code>inout</code> parameters and <code>mutating</code> methods, we can write a working version of the <code>badSwapX</code> method:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token comment">// in LabeledPoint</span></span>
<span class="line"><span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">swapX</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> other<span class="token punctuation">:</span> <span class="token keyword">inout</span> <span class="token class-name">LabeledPoint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> tmpX <span class="token operator">=</span> other<span class="token punctuation">.</span>x</span>
<span class="line">  other<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>x</span>
<span class="line">  <span class="token keyword">self</span><span class="token punctuation">.</span>x <span class="token operator">=</span> tmpX</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>When calling a function with an <code>inout</code> argument, the argument must be prefixed with <code>&amp;</code> to indicate that we&#39;re passing it&#39;s (logical) address to the function. For example, here&#39;s a call to <code>swapX</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token class-name">LabeledPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> label<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Origin&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token class-name">LabeledPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> label<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Upper right unit&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">p1<span class="token punctuation">.</span><span class="token function">swapX</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>p2<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If the value we are trying to apply <code>&amp;</code> to is immutable, the Swift compiler would produce an error. Note that there is no prefix <code>&amp;</code> on <code>p1</code>, even though it&#39;s calling a <code>mutable</code> method: it&#39;s not needed because the name of the method should <a href="https://www.swift.org/documentation/api-design-guidelines/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-swift" sizing="height"></i>clearly imply the mutation</a>. Of course, if <code>p1</code> were immutable, it would still be an error.</p><p>There are two more important things to say about immutability before we move on to our next kind of value type, <code>enum</code>.</p><p>First, you <em>cannot cheat immutability</em> any more than you can cheat Death. There is no equivalent to the C++ <code>const_cast</code> in Swift. There are no <code>mutable</code> data members in Swift; even a <code>var</code> member of a struct can only be modified on a <code>var</code> instance of that struct. There are no <code>const T&amp;</code> parameters whose values can change out from underneath you: an immutable value is truly immutable, and the compiler makes sure that no matter how an immutable parameter is actually passed (by-value or by-reference), the underlying value won&#39;t change. This can be frustrating, because you&#39;ve given up control about when to pass by-value, pass by <code>const</code> reference, or pass by rvalue reference to do a move. On the other hand, it is liberating: there&#39;s no spooky-action-at-a-distance when that <code>const&amp;</code> actually <em>does</em> change underneath you, and you can lean on immutability to make it easier to reason about your code.</p><p>That brings us to the second point: <em>there is no aliasing of inout parameters</em>. Aliasing, as I mean it here, is when two different pass-by-reference parameters actually refer to the same underlying instance. If you&#39;ve ever had to go add an <code>if (this == &amp;other) { ... }</code> check into your copy or move assignment operator in C++, you know just how vicious unexpected aliasing of parameters can be for program semantics. In Swift, we have the <a href="https://github.com/apple/swift/blob/main/docs/OwnershipManifesto.md#the-law-of-exclusivity" target="_blank" rel="noopener noreferrer">law of exclusivity (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>apple/swift</code>)</a>, which prevents any such aliasing.</p><h3 id="memory-safety-and-the-law-of-exclusivity" tabindex="-1"><a class="header-anchor" href="#memory-safety-and-the-law-of-exclusivity"><span>Memory safety and the law of exclusivity</span></a></h3><p>Swift&#39;s <em>law of exclusivity</em> states that two accesses to a given value in memory can only occur simultaneously if both of them are reads, so it is an error to (for example) try to form a mutating access (such as passing something <code>inout</code>) while accessing that value. But this isn&#39;t some abstract rule that introduces undefined behavior when you mess up: Swift enforces the law of exclusivity through a combination of static checking (which can produce compiler errors if you produce aliasing) and dynamic checking (when it&#39;s not possible for the compiler to prove that there is no aliasing).</p><p>Static checking of the law of exclusivity applies when the value being accessed is sufficiently local that it&#39;s possible to reason about all possible accesses to that value. Value types are great for this, because two independent <code>var</code> instances of value type are guaranteed not to alias. The compiler can correctly determine that the two <code>inout</code> arguments in the call <code>p1.swapX(&amp;p2)</code> do not alias, because <code>p1</code> and <code>p2</code> are separate variables. If one instead wrote <code>p1.swapX(&amp;p1)</code>, the compiler would produce an error describing the problem:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">=== exclusivity.swift:28 ===</span>
<span class="line">   ┆</span>
<span class="line">26 │   var p1 = LabeledPoint(x: 0, y: 0, label: &quot;Origin&quot;)</span>
<span class="line">27 │   var p2 = LabeledPoint(x: 1, y: 1, label: &quot;Upper right unit&quot;)</span>
<span class="line">28 │   p1.swapX(&amp;p1)</span>
<span class="line">   │   │        ╰─ note: conflicting access is here</span>
<span class="line">   │   ╰─ error: overlapping accesses to &#39;p1&#39;, but modification requires exclusive access; consider copying to a local variable</span>
<span class="line">29 │ </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now, if we&#39;re dealing with a variable that isn&#39;t local---say it&#39;s a global variable (gasp!) or a member of a reference type like a <code>class</code>, then it&#39;s impossible to reason about all of the accesses. Let&#39;s build a small contrived example of this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">var</span> globalOrigin <span class="token operator">=</span> <span class="token class-name">LabeledPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> label<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;origin&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">swapXWithGlobalOrigin</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> other<span class="token punctuation">:</span> <span class="token keyword">inout</span> <span class="token class-name">LabeledPoint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  other<span class="token punctuation">.</span><span class="token function">swapX</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>globalOrigin<span class="token punctuation">)</span> <span class="token comment">// is this safe?</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">somewhereElse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">swapXWithGlobalOrigin</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>globalOrigin<span class="token punctuation">)</span> <span class="token comment">// uh oh</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Within <code>swapXWithGlobalOrigin</code>, there is no way to know whether some other part of the program might access <code>globalOrigin</code> while it runs. So, the Swift compiler will insert a runtime check that tracks when <code>globalOrigin</code> is potentially being modified, and will stop the program if a simultaneous access occurs:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">Simultaneous accesses to 0x100e93008, but modification requires exclusive access.</span>
<span class="line">Previous access (a modification) started at t`somewhereElse() + 42 (0x100e8e95a).</span>
<span class="line">Current access (a modification) started at:</span>
<span class="line">0    libswiftCore.dylib                 0x00007ff82b380890 swift::runtime::AccessSet::insert(swift::runtime::Access*, void*, void*, swift::ExclusivityFlags) + 444</span>
<span class="line">1    libswiftCore.dylib                 0x00007ff82b380ae0 swift_beginAccess + 66</span>
<span class="line">2    t                                  0x0000000100e8e8d0 swapXWithGlobalOrigin(_:) + 59</span>
<span class="line">3    t                                  0x0000000100e8e930 somewhereElse() + 51</span>
<span class="line">4    t                                  0x0000000100e8ea40 static Main.main() + 9</span>
<span class="line">5    t                                  0x0000000100e8ea50 static Main.$main() + 9</span>
<span class="line">6    t                                  0x0000000100e8ea70 main + 9</span>
<span class="line">7    dyld                               0x00007ff81aaa9c10 start + 1942</span>
<span class="line">Fatal access conflict detected.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Most Swift programmers never think about the Law of Exclusivity: it&#39;s enforcement is there to prevent mistakes that would cause undefined behavior mayhem in C++, so it&#39;s critical to Swift&#39;s memory-safety story. But a lot of mutation in Swift works on local values, and the language helps you avoid most of these situations, so the runtime checking is rarely encountered in practice.</p><h3 id="enums-are-the-union-of-enums-and-unions" tabindex="-1"><a class="header-anchor" href="#enums-are-the-union-of-enums-and-unions"><span>Enums are the union of enums and unions</span></a></h3><p>Enums are one of Swift&#39;s loveliest little features. We borrowed them from <a href="https://en.wikipedia.org/wiki/CLU_(programming_language)" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-wikipedia-w" sizing="height"></i>CLU</a>, and for a time before Swift 1.0 they even used the keyword <code>oneof</code> . A Swift enum is a type-safe variant, which subsumes C++&#39;s <code>enum</code>, <code>union</code>, and <code>std::variant</code> in one nice little package. An enum can express one of a set of named cases, such as a font size expressed via semantic names:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">enum</span> <span class="token class-name">FontSize</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> title</span>
<span class="line">  <span class="token keyword">case</span> paragraph</span>
<span class="line">  <span class="token keyword">case</span> footnote</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This enum works just like you&#39;d expect the equivalent C++ <code>enum class</code>. For example:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">let</span> fontSize<span class="token punctuation">:</span> <span class="token class-name">FontSize</span> <span class="token operator">=</span> <span class="token punctuation">.</span>paragraph</span>
<span class="line"></span>
<span class="line"><span class="token keyword">switch</span> fontSize <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token punctuation">.</span>title<span class="token punctuation">:</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Title&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token punctuation">.</span>paragraph<span class="token punctuation">:</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Paragraph&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token punctuation">.</span>footnote<span class="token punctuation">:</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Footnote&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>I snuck a <code>switch</code> statement in there because one often uses switch statements to deal with each of the cases in an enum. Switch statements in Swift must always be exhaustive: if you don&#39;t handle all possible cases, you need to add a <code>default</code> clause. This eliminates accidents of omission when (for example) someone adds a new case, and is commonly a warning in C++ compilers. If you&#39;ve been cringing about the missing <code>break</code> statements above, don&#39;t: Swift puts a <code>break</code> before the next case, and if you really want to fall through to the next case, you have to explicitly write <code>fallthrough</code> to do so.</p><p>Back to <code>FontSize</code>: the cases of <code>FontSize</code> are inside the type. If you want to refer to the <code>paragraph</code> case, you can do so with <code>FontSize.paragraph</code>. However, whenever there is type information, such as when you&#39;re initializing a variable of type <code>FontSize</code> or switching on a value of type <code>FontSize</code>, you can use the <em>leading dot syntax</em> like <code>.paragraph</code> and let Swift&#39;s type inference figure out the type. Compare the above to the corresponding C++ <code>enum class</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">enum</span> <span class="token keyword">class</span> <span class="token class-name">FontSize</span> <span class="token punctuation">{</span></span>
<span class="line">  title<span class="token punctuation">,</span></span>
<span class="line">  paragraph<span class="token punctuation">,</span></span>
<span class="line">  footnote</span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">auto fontSize <span class="token operator">=</span> <span class="token class-name">FontSize</span><span class="token punctuation">:</span><span class="token punctuation">:</span>paragraph<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">switch</span> <span class="token punctuation">(</span>fontSize<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token class-name">FontSize</span><span class="token punctuation">:</span><span class="token punctuation">:</span>title<span class="token punctuation">:</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Title&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token class-name">FontSize</span><span class="token punctuation">:</span><span class="token punctuation">:</span>paragraph<span class="token punctuation">:</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Paragraph&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token class-name">FontSize</span><span class="token punctuation">:</span><span class="token punctuation">:</span>footnote<span class="token punctuation">:</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Footnote&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It&#39;s the little things, but they really do add up to cleaner code. Swift&#39;s leading dot syntax works really nicely with labeled arguments, because the argument label implies the type of the argument, leading to very readable code. For example, let&#39;s imagine a <code>Font</code> struct that uses <code>FontSize</code> along with <code>FontStyle</code> and <code>FontWeight</code> enums, including some default values:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">struct</span> <span class="token class-name">Font</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> style<span class="token punctuation">:</span> <span class="token class-name">FontStyle</span> <span class="token operator">=</span> <span class="token punctuation">.</span>sanSerif</span>
<span class="line">  <span class="token keyword">var</span> size<span class="token punctuation">:</span> <span class="token class-name">FontSize</span> <span class="token operator">=</span> <span class="token punctuation">.</span>paragraph</span>
<span class="line">  <span class="token keyword">var</span> weight<span class="token punctuation">:</span> <span class="token class-name">FontWeight</span> <span class="token operator">=</span> <span class="token punctuation">.</span>regular</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now, we can create a new <code>Font</code> like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">let</span> font <span class="token operator">=</span> <span class="token class-name">Font</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> <span class="token punctuation">.</span>title<span class="token punctuation">,</span> weight<span class="token punctuation">:</span> <span class="token punctuation">.</span>bold<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Note how the argument labels <code>size</code> and <code>weight</code> naturally describe the arguments that follow them, and the types provide enough information so we don&#39;t need to write out the redundant <code>FontSize</code> and <code>FontWeight</code> types on those arguments. Moreover, we are able to use the default argument for <code>style</code> even though it&#39;s the first parameter: labeled arguments make default arguments work really well. These are simple design decisions for a language to make, but they reinforce readable code.</p><p>Alright, back to enums! Imagine that you wrote that <code>FontSize</code> as an <code>enum class</code> in C++. Hold it in your mind. It&#39;s simple, it works. Now, someone comes along and tells you that you need to support <em>custom</em> font sizes, which can be expressed in terms of points. Your nice <code>enum class</code> is out the window, because you can&#39;t enumerate all of the custom point sizes. Here&#39;s the pattern I would use in C++:</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">class</span> <span class="token class-name">FontSize</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">public</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">enum</span> <span class="token class-name">Kind</span> <span class="token punctuation">{</span></span>
<span class="line">    title<span class="token punctuation">,</span></span>
<span class="line">    paragraph<span class="token punctuation">,</span></span>
<span class="line">    footnote<span class="token punctuation">,</span></span>
<span class="line">    custom</span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">private</span><span class="token operator">:</span></span>
<span class="line">  Kind kind<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">int</span> points<span class="token punctuation">;</span> <span class="token comment">// only valid when kind == custom</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span><span class="token operator">:</span></span>
<span class="line">  <span class="token function">FontSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">kind</span><span class="token punctuation">(</span>paragraph<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">FontSize</span><span class="token punctuation">(</span>Kind kind<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">kind</span><span class="token punctuation">(</span>kind<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">assert</span><span class="token punctuation">(</span>kind <span class="token operator">!=</span> custom<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">static</span> FontSize <span class="token function">forCustom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> </span>
<span class="line">    FontSize size<span class="token punctuation">;</span></span>
<span class="line">    size<span class="token punctuation">.</span>kind <span class="token operator">=</span> custom<span class="token punctuation">;</span></span>
<span class="line">    size<span class="token punctuation">.</span>points <span class="token operator">=</span> points<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> size<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">explicit</span> <span class="token keyword">operator</span> <span class="token function">Kind</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> kind<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment">// so we can switch</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">int</span> <span class="token function">getPoints</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">assert</span><span class="token punctuation">(</span>kind <span class="token operator">==</span> custom<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> points<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That is a <em>lot</em> of code. It is implementing a type-safe union that consists of the three simple cases, plus the one <code>custom</code> case. I cringe ever time I have to write one of these in C++ (which happens a lot), because it is so much boilerplate and it&#39;s so easy to make a silly mistake. I&#39;ve yet to come across a C++ technique or library that makes this cleaner. Feel free to let me know if you have a significantly more elegant solution in C++.</p><p>In Swift, you add one case to <code>FontSize</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">case</span> <span class="token function">custom</span><span class="token punctuation">(</span>points<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Swift cases can carry values in them, which is why I said earlier that they also are like C++ unions---without all of the undefined behavior. Given this case, I can create a custom font size:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">let</span> customFont<span class="token punctuation">:</span> <span class="token class-name">FontSize</span> <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token function">custom</span><span class="token punctuation">(</span>points<span class="token punctuation">:</span> <span class="token number">32</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>And extend my <code>switch</code> statement accordingly:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">switch</span> fontSize <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token punctuation">.</span>title<span class="token punctuation">:</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Title&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token punctuation">.</span>paragraph<span class="token punctuation">:</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Paragraph&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token punctuation">.</span>footnote<span class="token punctuation">:</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Footnote&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">custom</span><span class="token punctuation">(</span><span class="token keyword">let</span> pt<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">pt</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> points&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Swift provides pattern matching. When we match the <code>custom</code> case, we also declare a new variable <code>pt</code> to capture the <code>points</code> value. The value <code>pt</code> is only available when one is using a custom font size, so there&#39;s no need for runtime assertions like <code>kind == custom</code> like we had in C++.</p><p>Let&#39;s add one more case to our font size, which lets us take an existing font size and scale it by a given factor. It can be expressed like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">indirect</span> <span class="token keyword">case</span> <span class="token function">scaled</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> <span class="token class-name">FontSize</span><span class="token punctuation">,</span> factor<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This way, one can construct a font that is 20% larger than the paragraph font using, e.g.,</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token class-name">FontSize</span><span class="token punctuation">.</span><span class="token function">scaled</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> <span class="token punctuation">.</span>paragraph<span class="token punctuation">,</span> factor<span class="token punctuation">:</span> <span class="token number">1.2</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The <code>indirect</code> is needed to indicate that the value associated with the case (called the <em>associated value</em> in Swift) needs to be stored <em>indirectly</em>, because the associated value contains an instance of <code>FontSize</code> itself. Enums are value types and generally use stack storage, so the <code>indirect</code> indicates when the value for the case needs to be moved off to the heap. If the <code>indirect</code> were missing, the compiler would complain because the <code>FontSize</code> type doesn&#39;t have a fixed size in memory:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">=== FontSize.swift:1 ===</span>
<span class="line"> 1 │ enum FontSize {</span>
<span class="line">   │      ╰─ error: recursive enum &#39;FontSize&#39; is not marked &#39;indirect&#39;</span>
<span class="line"> 2 │   case title</span>
<span class="line"> 3 │   case paragraph</span>
<span class="line"> 4 │   case footnote</span>
<span class="line"> 5 │   case custom(points: Int)</span>
<span class="line"> 6 │   case scaled(size: FontSize, factor: Double)</span>
<span class="line">   │        ╰─ note: cycle beginning here: (size: FontSize, factor: Double) -&gt; (.0: FontSize)</span>
<span class="line"> 7 │ }</span>
<span class="line"> 8 │ </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Indirect enum cases are useful for building recursive data structures, like a binary tree. We&#39;ll come back to those when we can do it properly, with generics.</p><p>Now we can create a nice member function that scales the font instance we have by a specific factor:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token comment">// in FontSize</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">scaled</span><span class="token punctuation">(</span>by factor<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">Self</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">scaled</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">,</span> factor<span class="token punctuation">:</span> factor<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This can be called as, e.g., <code>myFontSize.scaled(by: 1.2)</code>. There are a few little things to notice here. The first is that enums can have methods just like structs can. They can also have initializers, which must eventually assign one of the cases to <code>self</code>. Next, our function is returning <code>Self</code>, which is shorthand for &quot;the type of <code>self</code>&quot;. Finally, look at how the parameter is named, &quot;<code>by factor</code>&quot;: here, the <em>argument label</em> is <code>by</code> (it&#39;s used at the call site) and the <em>parameter name</em> is <code>factor</code> (it&#39;s used inside the body). This is because the argument label is there to describe the argument at the call site, i.e., we&#39;re scaling &quot;<code>by</code> 1.2&quot;, whereas the parameter name is the noun of what the parameter actually is---the <code>factor</code> used in the computation. Before now, we&#39;ve seen that the two names are generally the same, or the argument label is omitted, but separating the two can lead to elegant, readable code particularly when the argument label is a preposition.</p><hr><h2 id="collections" tabindex="-1"><a class="header-anchor" href="#collections"><span>Collections</span></a></h2><p>The standard Swift collections types <code>Array</code>, <code>Dictionary</code>, and <code>Set</code> are value types when they are storing value types. For example, we could have an array of <code>Font</code> instances, which will behave as a value type:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">var</span> fonts <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">Font</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> <span class="token punctuation">.</span>title<span class="token punctuation">,</span> weight<span class="token punctuation">:</span> <span class="token punctuation">.</span>bold<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Font</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> <span class="token punctuation">.</span>paragraph<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// infers type Array&lt;Font&gt;, also written [Font]</span></span>
<span class="line"><span class="token keyword">var</span> oldFonts <span class="token operator">=</span> fonts  <span class="token comment">// copies the contents of fonts</span></span>
<span class="line">fonts<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">Font</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> <span class="token punctuation">.</span>footnote<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>fonts<span class="token punctuation">.</span>count<span class="token punctuation">)</span>    <span class="token comment">// 3</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>oldFonts<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token comment">// 2</span></span>
<span class="line">fonts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>weight <span class="token operator">=</span> <span class="token punctuation">.</span>bold <span class="token comment">// doesn&#39;t affect oldFonts</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Dictionaries and sets work similarly. For example, let&#39;s build a dictionary that names all of our fonts:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">var</span> fontsDict <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token comment">// infers type Dictionary&lt;String, Font&gt;, also written [String: Font]</span></span>
<span class="line">  <span class="token string-literal"><span class="token string">&quot;Title&quot;</span></span> <span class="token punctuation">:</span> <span class="token class-name">Font</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> <span class="token punctuation">.</span>title<span class="token punctuation">,</span> weight<span class="token punctuation">:</span> <span class="token punctuation">.</span>bold<span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">  <span class="token string-literal"><span class="token string">&quot;Paragraph&quot;</span></span> <span class="token punctuation">:</span> <span class="token class-name">Font</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> <span class="token punctuation">.</span>paragraph<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> oldFontsDict <span class="token operator">=</span> fontsDict <span class="token comment">// make a copy</span></span>
<span class="line">fontsDict<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;Footnote&quot;</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Font</span><span class="token punctuation">(</span>size<span class="token punctuation">:</span> <span class="token punctuation">.</span>footnote<span class="token punctuation">)</span> <span class="token comment">// add an element</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>fontDict<span class="token punctuation">.</span>count<span class="token punctuation">)</span>    <span class="token comment">// 3</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>oldFontsDict<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token comment">// 2</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The bracket syntax is used for both dictionary literals (when the elements are <code>key: value</code> pairs) and array literals (when the elements are just... elements). The literals are actually extensible: you can use an array literal to initialize a <code>Set</code>, or even your own type, by defining an appropriate initializer and opting in to be &quot;expressible by&quot; that literal type using the generics system. (More on that in a later post, I promise.)</p><hr><h2 id="regular-types" tabindex="-1"><a class="header-anchor" href="#regular-types"><span>Regular types</span></a></h2><p>In C++ we sometimes talk about <a href="http://stepanovpapers.com/DeSt98.pdf" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-file-pdf" sizing="height"></i>regular types</a>, defined by Alexander Stepanov, which are types that behave predictably with respect to value semantics: you can copy them, and the copy is equal to the original. They can be moved, destroyed, and swapped. C++20 has a <a href="https://en.cppreference.com/w/cpp/concepts/regular" target="_blank" rel="noopener noreferrer">FontIcon icon=&quot;iconfont icon-cpp&quot;/&gt;<code>std::regular</code> concept</a> to capture these requirements.</p><p>Swift value types fulfill most of the requirements of a regular type by default, and are based on the same semantic contract. Swift value types are always copyable, destructible, assignable, and movable. Indeed, you can&#39;t really even express these ideas in Swift, it&#39;s just the way types behave.</p><p>However, there are some notable differences from the Stepanov or C++ standard definitions of a regular type. The first was noted earlier: Swift doesn&#39;t have a notion of &quot;default construction&quot; at all, so Swift value types are not &quot;default constructible&quot;. You tend not to need this notion in Swift, though, because of definite initialization. There is a benefit here for the authors of types: you don&#39;t have to worry about inventing a &quot;default&quot; state if one doesn&#39;t make sense. For example, imagine an collection that is always non-empty: how would you give it a default constructor? You can&#39;t without doing something weird, like adding a single default-constructed element, so such a type can&#39;t be regular.</p><p>Regular types also have (in)equality operators (<code>==</code> and <code>!=</code>). Swift doesn&#39;t provide those for free, but you can either write them yourself with, e.g.,</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token comment">// in Font</span></span>
<span class="line"><span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token operator">==</span><span class="token punctuation">(</span>lhs<span class="token punctuation">:</span> <span class="token class-name">Font</span><span class="token punctuation">,</span> rhs<span class="token punctuation">:</span> <span class="token class-name">Font</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> lhs<span class="token punctuation">.</span>style <span class="token operator">==</span> rhs<span class="token punctuation">.</span>style <span class="token operator">&amp;&amp;</span> lhs<span class="token punctuation">.</span>size <span class="token operator">==</span> rhs<span class="token punctuation">.</span>size <span class="token operator">&amp;&amp;</span> lhs<span class="token punctuation">.</span>weight <span class="token operator">==</span> rhs<span class="token punctuation">.</span>weight</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>or let the compiler do it for you, by putting <code>: Equatable</code> in the type definition:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">struct</span> <span class="token class-name">Font</span><span class="token punctuation">:</span> <span class="token class-name">Equatable</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> style<span class="token punctuation">:</span> <span class="token class-name">FontStyle</span> <span class="token operator">=</span> <span class="token punctuation">.</span>sanSerif</span>
<span class="line">  <span class="token keyword">var</span> size<span class="token punctuation">:</span> <span class="token class-name">FontSize</span> <span class="token operator">=</span> <span class="token punctuation">.</span>paragraph</span>
<span class="line">  <span class="token keyword">var</span> weight<span class="token punctuation">:</span> <span class="token class-name">FontWeight</span> <span class="token operator">=</span> <span class="token punctuation">.</span>regular</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This says that the <code>Font</code> type is <code>Equatable</code>, and the compiler will synthesize both <code>==</code> and <code>!=</code> for you based on the data members. You can also put <code>Hashable</code> here to get a hash function that combines the data members, which then allows your type to be used as a key in a <code>Dictionary</code> or a value in a <code>Set</code>. Again, this is dipping our toes into Swift&#39;s generics system, but for now you can think of <code>Equatable</code> as being a little bit like a C++ concept (we call it a <em>protocol</em> in Swift), but... better.</p><hr><h2 id="what-s-next" tabindex="-1"><a class="header-anchor" href="#what-s-next"><span>What&#39;s next?</span></a></h2><p>We&#39;ve talked about value types---a lot. If you&#39;re writing Swift, you should use them often, because they provide excellent local reasoning and the ability to model most data in a straightforward manner: <code>struct</code>s and collections to aggregate data and <code>enum</code>s to capture different choices.</p><p>In the next part of this series, we&#39;ll talk about reference types. Specifically, classes, and how Swift supports Object-Oriented Programming.</p><hr><h2 id="참조" tabindex="-1"><a class="header-anchor" href="#참조"><span>참조</span></a></h2><div class="pdf-viewer-wrapper" style="width:100%;height:auto;"><div></div><button class="pdf-fullscreen-button"><svg xmlns="http://www.w3.org/2000/svg" class="pdf-fullscreen-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="enter-fullscreen icon" name="enter-fullscreen"><path d="M762.773 90.24h-497.28c-96.106 0-174.4 78.293-174.4 174.4v497.28c0 96.107 78.294 174.4 174.4 174.4h497.28c96.107 0 175.04-78.293 174.4-174.4V264.64c0-96.213-78.186-174.4-174.4-174.4zm-387.2 761.173H215.04c-21.867 0-40.427-17.92-41.067-41.066V649.92c0-22.507 17.92-40.427 40.427-40.427 11.307 0 21.227 4.694 28.48 11.947 7.253 7.253 11.947 17.92 11.947 28.48v62.293l145.28-145.28c15.893-15.893 41.813-15.893 57.706 0 15.894 15.894 15.894 41.814 0 57.707l-145.28 145.28h62.294c22.506 0 40.426 17.92 40.426 40.427s-17.173 41.066-39.68 41.066zM650.24 165.76h160.427c21.866 0 40.426 17.92 41.066 41.067v160.426c0 22.507-17.92 40.427-40.426 40.427-11.307 0-21.227-4.693-28.48-11.947-7.254-7.253-11.947-17.92-11.947-28.48v-62.186L625.6 450.347c-15.893 15.893-41.813 15.893-57.707 0-15.893-15.894-15.893-41.814 0-57.707l145.28-145.28H650.88c-22.507 0-40.427-17.92-40.427-40.427s17.174-41.173 39.787-41.173z"></path></svg></button></div></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/chanhi2000/articles/edit/main/src/douggregor.net/swift-for-cpp-practitioners-1.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/bookshelf/programming/swift/articles/" aria-label="/programming/swift/articles/"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->/programming/swift/articles/</div></a><a class="route-link auto-link next" href="/bookshelf/douggregor.net/swift-for-cpp-practitioners-2.html" aria-label="Swift for C++ Practitioners, Part 2: Reference Types &amp; Optionals"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Swift for C++ Practitioners, Part 2: Reference Types &amp; Optionals<i class="vp-icon fa-brands fa-swift" sizing="height"></i></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">MIT Licensed | Copyright © 2022-present <a href="https://github.com/chanhi2000">Chan Hee Lee</a></div><!----></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/bookshelf/assets/app-BVguHYKu.js" defer></script>
  </body>
</html>
