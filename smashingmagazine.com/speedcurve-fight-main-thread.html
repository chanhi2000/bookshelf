<!doctype html>
<html lang="ko-KR" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.24" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.94" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"The Fight For The Main Thread","image":["https://files.smashing.media/articles/fight-main-thread/speedcurve-logo.svg","https://unsplash.com/@noodlenelson","https://files.smashing.media/articles/fight-main-thread/2-devtools-lighthouse-smashing-magazine.png","https://files.smashing.media/articles/fight-main-thread/3-devtools-lighthouse-espn.png","https://files.smashing.media/articles/fight-main-thread/4-speedcurve-tbt-smashing-magazine.png","https://files.smashing.media/articles/fight-main-thread/5-charts-speedcurve-distribution-core-web-vitals-metrics.png","https://files.smashing.media/articles/fight-main-thread/6-javascript-time.png","https://files.smashing.media/articles/fight-main-thread/7-speedcurve-waterfull-view.png","https://files.smashing.media/articles/fight-main-thread/8-speed-waterfall-fcp.png","https://files.smashing.media/articles/fight-main-thread/9-speed-waterfall-options.png","https://files.smashing.media/articles/fight-main-thread/10-speed-waterfall-fcp.png","https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://files.smashing.media/articles/fight-main-thread/11-speed-favorite-chart.png","https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://files.smashing.media/articles/fight-main-thread/12-speed-favorite-duration.png","https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://files.smashing.media/articles/fight-main-thread/13-speed-favorite-blocking.png","https://files.smashing.media/articles/fight-main-thread/annie-sullivan-tweet.png","https://files.smashing.media/articles/fight-main-thread/14-correlation-chart-long-tasks-vs-inp.png","https://files.smashing.media/articles/fight-main-thread/15-speed-first-third-party-graph.png","https://files.smashing.media/articles/fight-main-thread/16-speed-assets-source-distribution.png"],"datePublished":"2023-10-24T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"Geoff Graham","url":"https://smashingmagazine.com/author/geoff-graham/"}]}</script><meta property="og:url" content="https://chanhi2000.github.io/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html"><meta property="og:site_name" content="📚Bookshelf"><meta property="og:title" content="The Fight For The Main Thread"><meta property="og:description" content="Article(s) > The Fight For The Main Thread"><meta property="og:type" content="article"><meta property="og:image" content="https://files.smashing.media/articles/fight-main-thread/speedcurve-fight-main-thread.jpg"><meta property="og:locale" content="ko-KR"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:src" content="https://files.smashing.media/articles/fight-main-thread/speedcurve-fight-main-thread.jpg"><meta name="twitter:image:alt" content="The Fight For The Main Thread"><meta property="article:author" content="Geoff Graham"><meta property="article:tag" content="computer-engineering"><meta property="article:tag" content="computerengineering"><meta property="article:tag" content="coen"><meta property="article:tag" content="engineering"><meta property="article:tag" content="smashingmagazine.com"><meta property="article:tag" content="blog"><meta property="article:published_time" content="2023-10-24T00:00:00.000Z"><link rel="icon" href="/bookshelf/assets/icon/favicon.svg"><title>The Fight For The Main Thread | 📚Bookshelf</title><meta name="description" content="Article(s) > The Fight For The Main Thread">
    <link rel="preload" href="/bookshelf/assets/style-DmRYlEXZ.css" as="style"><link rel="stylesheet" href="/bookshelf/assets/style-DmRYlEXZ.css">
    
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/bookshelf/" aria-label="Take me home"><img class="vp-nav-logo" src="/bookshelf/assets/icon/favicon.svg" alt><!----><span class="vp-site-name hide-in-pad">📚Bookshelf</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/bookshelf/news.html" aria-label><!--[--><i class="vp-icon fas fa-rss" sizing="height"></i><!--]--><!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-keyboard" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/hackingwithswift.com/" aria-label="hackingwithswift.com"><!--[--><img class="vp-icon" src="https://hackingwithswift.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->hackingwithswift.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fcc/" aria-label="freecodecamp.org"><!--[--><img class="vp-icon" src="https://cdn.freecodecamp.org/universal/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->freecodecamp.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kodeco.com/" aria-label="kodeco.com"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->kodeco.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.kotzilla.io/" aria-label="blog.kotzilla.io"><!--[--><img class="vp-icon" src="https://blog.kotzilla.io/hubfs/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.kotzilla.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kt.academy/" aria-label="kt.academy"><!--[--><img class="vp-icon" src="https://kt.academy/logo.png" alt aria-hidden no-view sizing="both"><!--]-->kt.academy<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/droidcon.com/" aria-label="droidcon.com"><!--[--><img class="vp-icon" src="https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png" alt aria-hidden no-view sizing="both"><!--]-->droidcon.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/outcomeschool.com/" aria-label="outcomeschool.com"><!--[--><img class="vp-icon" src="https://outcomeschool.com/static/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->outcomeschool.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/frontendmasters.com/" aria-label="frontendmasters.com"><!--[--><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->frontendmasters.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tricks.com/" aria-label="css-tricks.com"><!--[--><img class="vp-icon" src="https://css-tricks.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->css-tricks.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="smashingmagazine.com"><!--[--><img class="vp-icon" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->smashingmagazine.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.logrocket.com/" aria-label="blog.logrocket.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.logrocket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/realpython.com/" aria-label="realpython.com"><!--[--><img class="vp-icon" src="https://realpython.com/static/favicon.68cbf4197b0c.png" alt aria-hidden no-view sizing="both"><!--]-->realpython.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/digitalocean.com/" aria-label="digitalocean.com"><!--[--><img class="vp-icon" src="https://digitalocean.com/_next/static/media/favicon.594d6067.ico" alt aria-hidden no-view sizing="both"><!--]-->digitalocean.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/antonioleiva.com/" aria-label="antonioleiva.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/antonioleiva.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->antonioleiva.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/johnnyreilly.com/" aria-label="johnnyreilly.com"><!--[--><img class="vp-icon" src="https://johnnyreilly.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->johnnyreilly.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/code-maze.com/" aria-label="code-maze.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/code-maze.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->code-maze.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/milanjovanovic.tech/" aria-label="milanjovanovic.tech"><!--[--><img class="vp-icon" src="https://milanjovanovic.tech/profile_favicon.png" alt aria-hidden no-view sizing="both"><!--]-->milanjovanovic.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/shopify.engineering/" aria-label="shopify.engineering"><!--[--><img class="vp-icon" src="https://cdn.shopify.com/static/shopify-favicon.png" alt aria-hidden no-view sizing="both"><!--]-->shopify.engineering<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devtoolstips.org/" aria-label="devtoolstips.org"><!--[--><img class="vp-icon" src="https://devtoolstips.org/assets/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devtoolstips.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/piccalil.li/" aria-label="piccalil.li"><!--[--><img class="vp-icon" src="https://piccalil.li/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->piccalil.li<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/sitepoint.com/" aria-label="sitepoint.com"><!--[--><img class="vp-icon" src="https://sitepoint.com/favicons/512x512.png" alt aria-hidden no-view sizing="both"><!--]-->sitepoint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/event-driven.io/" aria-label="event-driven.io"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/event-driven.io/favicon.jfif" alt aria-hidden no-view sizing="both"><!--]-->event-driven.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/packagemain.tech/" aria-label="packagemain.tech"><!--[--><img class="vp-icon" src="https://substack-post-media.s3.amazonaws.com/public/images/2ea54e25-eaa6-4630-bfc0-10b8cfdce894/apple-touch-icon-1024x1024.png" alt aria-hidden no-view sizing="both"><!--]-->packagemain.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/gosolve.io/" aria-label="gosolve.io"><!--[--><img class="vp-icon" src="https://gosolve.io/wp-content/uploads/2022/03/cropped-ikona1-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->gosolve.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/towardsdatascience.com/" aria-label="towardsdatascience.com"><!--[--><img class="vp-icon" src="https://cdn-images-1.medium.com/v2/resize:fill:128:128/1*VzTUkfeGymHP4Bvav-T-lA.png" alt aria-hidden no-view sizing="both"><!--]-->towardsdatascience.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/douggregor.net/" aria-label="douggregor.net"><!--[--><i class="vp-icon fas fa-globe" sizing="both"></i><!--]-->douggregor.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/d2.naver.com/" aria-label="d2.naver.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/d2.naver.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->d2.naver.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakao.com/" aria-label="tech.kakao.com"><!--[--><img class="vp-icon" src="https://www.kakaocorp.com/page/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakao.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakaopay.com/" aria-label="tech.kakaopay.com"><!--[--><img class="vp-icon" src="https://tech.kakaopay.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakaopay.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fe-developers.kakaoent.com/" aria-label="fe-developers.kakaoent.com"><!--[--><img class="vp-icon" src="https://fe-developers.kakaoent.com/favicon-32x32.png?v=44803cb16c1e2debd3984cf2e8cb2ded" alt aria-hidden no-view sizing="both"><!--]-->fe-developers.kakaoent.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/yozm.wishket.com/" aria-label="yozm.wishket.com"><!--[--><img class="vp-icon" src="https://yozm.wishket.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->yozm.wishket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/popit.kr/" aria-label="popit.kr"><!--[--><img class="vp-icon" src="https://popit.kr/wp-content/uploads/2016/08/favicon_32x32.png" alt aria-hidden no-view sizing="both"><!--]-->popit.kr<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devkuma.com/" aria-label="devkuma.com"><!--[--><img class="vp-icon" src="https://devkuma.com/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devkuma.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.gangnamunni.com/" aria-label="blog.gangnamunni.com"><!--[--><img class="vp-icon" src="https://blog.gangnamunni.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->blog.gangnamunni.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/codingeverybody.kr/" aria-label="codingeverybody.kr"><!--[--><img class="vp-icon" src="https://codingeverybody.kr/wp-content/uploads/cropped-favicon-origin-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->codingeverybody.kr<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-network-wired" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tecmint.com/" aria-label="tecmint.com"><!--[--><img class="vp-icon" src="https://tecmint.com/wp-content/uploads/2020/07/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tecmint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/docker.com/" aria-label="docker.com"><!--[--><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->docker.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/learnk8s.io/" aria-label="learnk8s.io"><!--[--><img class="vp-icon" src="https://static.learnk8s.io/f7e5160d4744cf05c46161170b5c11c9.svg" alt aria-hidden no-view sizing="both"><!--]-->learnk8s.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/itsfoss.com/" aria-label="itsfoss.com"><!--[--><img class="vp-icon" src="https://itsfoss.com/content/images/size/w256h256/2022/12/android-chrome-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->itsfoss.com<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/chanhi2000/articles" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-appearance-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-appearance-dropdown"><!----></div></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="vp-icon" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt aria-hidden no-view sizing="both"><span class="vp-sidebar-title">smashingmagazine.com</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/getting-started-css-calc-techniques.html" aria-label="Getting Started With CSS calc ()"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Getting Started With CSS calc ()<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/guide-command-line-data-manipulation-cli-miller.html" aria-label="A Guide To Command-Line Data Manipulation"><!--[--><i class="vp-icon iconfont icon-shell" sizing="both"></i><!--]-->A Guide To Command-Line Data Manipulation<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/build-magazine-layout-css-grid-areas.html" aria-label="How To Build A Magazine Layout With CSS Grid Areas"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->How To Build A Magazine Layout With CSS Grid Areas<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html" aria-label="The Fight For The Main Thread"><!--[--><i class="vp-icon fas fa-computer" sizing="both"></i><!--]-->The Fight For The Main Thread<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/end-of-gatsby-journey.html" aria-label="The End Of My Gatsby Journey"><!--[--><i class="vp-icon iconfont icon-gatsby" sizing="both"></i><!--]-->The End Of My Gatsby Journey<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/harness-mouse-interaction-data-machine-learning.html" aria-label="How To Harness Mouse Interaction Data For Practical Machine Learning Solutions"><!--[--><i class="vp-icon fas fa-brain" sizing="both"></i><!--]-->How To Harness Mouse Interaction Data For Practical Machine Learning Solutions<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/forensics-react-server-components.html" aria-label="The Forensics Of React Server Components (RSCs)"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->The Forensics Of React Server Components (RSCs)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/how-run-ux-research-without-access-users.html" aria-label="How To Run UX Research Without Access To Users"><!--[--><i class="vp-icon fas fa-pen-ruler" sizing="both"></i><!--]-->How To Run UX Research Without Access To Users<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/modern-guide-making-css-shapes.html" aria-label="The Modern Guide For Making CSS Shapes"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->The Modern Guide For Making CSS Shapes<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/times-need-custom-property-instead-css-variable.html" aria-label="The Times You Need A Custom @property Instead Of A CSS Variable"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->The Times You Need A Custom @property Instead Of A CSS Variable<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/designers-business-ux-language.html" aria-label="Why Designers Aren’t Understood"><!--[--><i class="vp-icon fas fa-pen-ruler" sizing="both"></i><!--]-->Why Designers Aren’t Understood<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/transforming-relationship-between-designers-developers.html" aria-label="Transforming The Relationship Between Designers And Developers"><!--[--><i class="vp-icon fas fa-user-tie" sizing="both"></i><!--]-->Transforming The Relationship Between Designers And Developers<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/beyond-css-media-queries.html" aria-label="Beyond CSS Media Queries"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Beyond CSS Media Queries<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/building-user-segmentation-matrix-foster-cross-org-alignment.html" aria-label="Building A User Segmentation Matrix To Foster Cross-Org Alignment"><!--[--><i class="vp-icon fas fa-pen-ruler" sizing="both"></i><!--]-->Building A User Segmentation Matrix To Foster Cross-Org Alignment<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/hidden-vs-disabled-ux.html" aria-label="Hidden vs. Disabled In UX"><!--[--><i class="vp-icon fas fa-pen-ruler" sizing="both"></i><!--]-->Hidden vs. Disabled In UX<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/modern-css-layouts-no-framework-needed.html" aria-label="Modern CSS Layouts: You Might Not Need A Framework For That"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Modern CSS Layouts: You Might Not Need A Framework For That<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/naming-best-practices.html" aria-label="Best Practices For Naming Design Tokens, Components And Variables"><!--[--><i class="vp-icon fas fa-pen-ruler" sizing="both"></i><!--]-->Best Practices For Naming Design Tokens, Components And Variables<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/switching-it-up-html-latest-control.html" aria-label="Switching It Up With HTML’s Latest Control"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Switching It Up With HTML’s Latest Control<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/netlify-platform-primitives.html" aria-label="The Era Of Platform Primitives Is Finally Here"><!--[--><i class="vp-icon fa-brands fa-react" sizing="both"></i><!--]-->The Era Of Platform Primitives Is Finally Here<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/scaling-success-key-insights-pratical-takeaways.html" aria-label="Scaling Success: Key Insights And Practical Takeaways"><!--[--><i class="vp-icon fas fa-pen-ruler" sizing="both"></i><!--]-->Scaling Success: Key Insights And Practical Takeaways<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/css-tips-and-techniques.html" aria-label="Useful CSS Tips And Techniques"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->Useful CSS Tips And Techniques<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/smashingmagazine.com/introduction-css-scroll-driven-animations.html" aria-label="An IntroductionToCSSScroll-Driven Animations: Scroll And View Progress Timelines"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->An IntroductionToCSSScroll-Driven Animations: Scroll And View Progress Timelines<!----></a></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><div class="page-cover"><img src="https://files.smashing.media/articles/fight-main-thread/speedcurve-fight-main-thread.jpg" alt no-view></div><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon fas fa-computer" sizing="height"></i>The Fight For The Main Thread</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://smashingmagazine.com/author/geoff-graham/" target="_blank" rel="noopener noreferrer">Geoff Graham</a></span><span property="author" content="Geoff Graham"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">23. 10. 24.</span><meta property="datePublished" content="2023-10-24T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 17 min</span><meta property="timeRequired" content="PT17M"></span><span class="page-category-info" aria-label="Category🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color5" role>Computer</span><span class="page-category-item color8" role>Engineering</span><span class="page-category-item color8" role>Article(s)</span><!--]--><meta property="articleSection" content="Computer,Engineering,Article(s)"></span><span class="page-tag-info" aria-label="Tag🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8" role>blog</span><span class="page-tag-item color1" role>smashingmagazine.com</span><span class="page-tag-item color6" role>engineering</span><span class="page-tag-item color3" role>coen</span><span class="page-tag-item color3" role>computerengineering</span><span class="page-tag-item color1" role>computer-engineering</span><!--]--><meta property="keywords" content="blog,smashingmagazine.com,engineering,coen,computerengineering,computer-engineering"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="frontmatter-title-관련" tabindex="-1"><a class="header-anchor" href="#frontmatter-title-관련"><span>The Fight For The Main Thread 관련</span></a></h1><a class="route-link vp-card" href="/bookshelf/academcis/coen/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="/bookshelf/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Computer Engineering > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><nav class="table-of-contents"><ul><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#fighting-for-the-main-thread" class="router-link-active router-link-exact-active">Fighting For The Main Thread</a></li><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#monitoring-the-main-thread" class="router-link-active router-link-exact-active">Monitoring The Main Thread</a><ul><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#total-blocking-time" class="router-link-active router-link-exact-active">Total Blocking Time</a></li><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#spotting-long-tasks" class="router-link-active router-link-exact-active">Spotting Long Tasks</a></li><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#first-third-party-scripts" class="router-link-active router-link-exact-active">First &amp; Third Party Scripts</a></li><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#monitoring-blocking-scripts" class="router-link-active router-link-exact-active">Monitoring Blocking Scripts</a></li><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#monitoring-interaction-to-next-paint" class="router-link-active router-link-exact-active">Monitoring Interaction to Next Paint</a></li></ul></li><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#not-all-scripts-are-created-equal" class="router-link-active router-link-exact-active">Not All Scripts Are Created Equal</a><ul><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#who-s-it-serving" class="router-link-active router-link-exact-active">Who&#39;s It Serving?</a></li><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#when-is-it-served" class="router-link-active router-link-exact-active">When Is It Served?</a></li><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#where-is-it-served-from" class="router-link-active router-link-exact-active">Where Is It Served From?</a></li><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#what-is-it-serving" class="router-link-active router-link-exact-active">What Is It Serving?</a></li></ul></li><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#getting-javascript-off-the-main-thread" class="router-link-active router-link-exact-active">Getting JavaScript Off The Main Thread</a><ul><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#use-web-workers" class="router-link-active router-link-exact-active">Use Web Workers</a></li><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#split-javascript-bundles-into-individual-pieces" class="router-link-active router-link-exact-active">Split JavaScript Bundles Into Individual Pieces</a></li><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#async-or-defer-scripts" class="router-link-active router-link-exact-active">Async or Defer Scripts</a></li><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#preconnect-network-connections" class="router-link-active router-link-exact-active">Preconnect Network Connections</a></li></ul></li><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#non-technical-approaches" class="router-link-active router-link-exact-active">Non-Technical Approaches</a><ul><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#nuke-scripts-that-lack-purpose" class="router-link-active router-link-exact-active">Nuke Scripts That Lack Purpose</a></li><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#bend-google-tag-manager-to-your-will" class="router-link-active router-link-exact-active">Bend Google Tag Manager To Your Will</a></li></ul></li><li><a aria-current="page" href="/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html#wrapping-up" class="router-link-active router-link-exact-active">Wrapping Up</a></li></ul></nav><hr><div class="vp-site-info" data-name="The Fight For The Main Thread"><a class="vp-site-info-navigator no-external-link-icon" title="The Fight For The Main Thread" href="https://smashingmagazine.com/2023/10/speedcurve-fight-main-thread/" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://files.smashing.media/articles/fight-main-thread/speedcurve-fight-main-thread.jpg) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt loading="lazy" no-view><div class="vp-site-info-name">The Fight For The Main Thread</div><div class="vp-site-info-desc">Having access to a free reporting tool like Lighthouse in DevTools is a great start for diagnosing performance issues by identifying bottlenecks on the main thread. Even better are paid tools like [SpeedCurve](https://www.speedcurve.com/) to dig deeper into the data for more targeted insights and to produce visual reports to help make a case for performance improvements for your team and other stakeholders.</div></div><!----></div><p>Having access to a free reporting tool like Lighthouse in DevTools is a great start for diagnosing performance issues by identifying bottlenecks on the main thread. Even better are paid tools like <a href="https://speedcurve.com/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>SpeedCurve</a> to dig deeper into the data for more targeted insights and to produce visual reports to help make a case for performance improvements for your team and other stakeholders.</p><p>This article has been kindly supported by our dear friends at <a href="https://speedcurve.com/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>SpeedCurve</a> who not only help people measure the speed of their websites, but also identify and fix performance issues.</p><figure><img src="https://files.smashing.media/articles/fight-main-thread/speedcurve-logo.svg" alt="SpeedCurve" tabindex="0" loading="lazy"><figcaption>SpeedCurve</figcaption></figure><p>Performance work is one of those things, as they say, that ought to happen in development. You know, have a plan for it and write code that&#39;s mindful about adding extra weight to the page.</p><p>But not everything about performance happens directly at the code level, right? I&#39;d say many — if not most — sites and apps rely on some number of third-party scripts where we might not have any influence over the code. Analytics is a good example. Writing a hand-spun analytics tracking dashboard isn&#39;t what my clients really want to pay me for, so I&#39;ll drop in the ol&#39; Google Analytics script and maybe never think of it again.</p><p>That&#39;s one example and a common one at that. But what&#39;s also common is managing multiple third-party scripts on a single page. One of my clients is big into user tracking, so in addition to a script for analytics, they&#39;re also running third-party scripts for heatmaps, cart abandonments, and personalized recommendations — typical e-commerce stuff. All of that is dumped on any given page in one fell swoop courtesy of Google Tag Manager (GTM), which allows us to deploy and run scripts without having to go through the pain of re-deploying the entire site.</p><p>As a result, adding and executing scripts is a fairly trivial task. It is so effortless, in fact, that even non-developers on the team have contributed their own fair share of scripts, many of which I have no clue what they do. The boss wants something, and it&#39;s going to happen one way or another, and GTM facilitates that work without friction between teams.</p><p>All of this adds up to what I often hear described as a “fight for the main thread.” That&#39;s when I started hearing more performance-related jargon, like web workers, Core Web Vitals, deferring scripts, and using pre-connect, among others. <strong>But what I&#39;ve started learning is that these technical terms for performance make up an arsenal of tools to combat performance bottlenecks.</strong></p><p>The real fight, it seems, is evaluating our needs as developers and stakeholders against a user&#39;s needs, namely, the need for a fast and frictionless page load.</p><hr><h2 id="fighting-for-the-main-thread" tabindex="-1"><a class="header-anchor" href="#fighting-for-the-main-thread"><span>Fighting For The Main Thread</span></a></h2><p>We&#39;re talking about performance in the context of JavaScript, but there are lots of things that happen during a page load. The HTML is parsed. Same deal with CSS. Elements are rendered. JavaScript is loaded, and scripts are executed.</p><p>All of this happens on the <strong>main thread</strong>. I&#39;ve heard the main thread described as a highway that gets cars from Point A to Point B; the more cars that are added to the road, the more crowded it gets and the more time it takes for cars to complete their trip. That&#39;s accurate, I think, but we can take it a little further because this particular highway has just <em>one lane</em>, and it only goes in <em>one direction</em>. My mind thinks of San Francisco&#39;s Lombard Street, a twisty one-way path of a tourist trap on a steep decline.</p><figure><img src="https://files.smashing.media/articles/fight-main-thread/1-twisty-one-way-path.png" alt="A picture of San Francisco&#39;s Lombard Street, a twisty one-way path&lt;br/&gt;Credit: &lt;VPIcon icon=&quot;fas fa-globe&quot;/&gt;Brandon Nelson on &lt;VPIcon icon=&quot;fas fa-globe&quot;/&gt;Unsplash. (&lt;VPIcon icon=&quot;fas fa-globe&quot;/&gt;Large preview)" tabindex="0" loading="lazy"><figcaption>A picture of San Francisco&#39;s Lombard Street, a twisty one-way path<br>Credit: <a href="https://unsplash.com/@noodlenelson" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Brandon Nelson</a> on <a href="https://unsplash.com/photos/2smDZopBMso" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Unsplash</a>. (<a href="https://files.smashing.media/articles/fight-main-thread/1-twisty-one-way-path.png" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Large preview</a>)</figcaption></figure><p>The main thread may not be that curvy, but you get the point: there&#39;s only one way to go, and everything that enters it must go through it.</p><p>JavaScript operates in much the same way. It&#39;s “single-threaded,” which is how we get the one-way street comparison. I like how <a href="https://dev.to/bbarbour/if-javascript-is-single-threaded-how-is-it-asynchronous-56gd" target="_blank" rel="noopener noreferrer">Brian Barbour explains it (<i class="vp-icon fa-brands fa-dev" sizing="height"></i><code>bbarbour</code>)</a>:</p><div class="hint-container info"><p class="hint-container-title">bbarbour - If Javascript Is Single Threaded, How Is It Asynchronous?</p><blockquote><p>“This means it has one call stack and one memory heap. As expected, it executes code in order and must finish executing a piece of code before moving on to the next. It&#39;s synchronous, but at times that can be harmful. For example, if a function takes a while to execute or has to wait on something, it freezes everything up in the meantime.”</p></blockquote></div><p>So, there we have it: a fight for the main thread. Each resource on a page is a contender vying for a spot on the thread and wants to run first. If one contender takes its sweet time doing its job, then the contenders behind it in line just have to wait.</p><hr><h2 id="monitoring-the-main-thread" tabindex="-1"><a class="header-anchor" href="#monitoring-the-main-thread"><span>Monitoring The Main Thread</span></a></h2><p>If you&#39;re like me, I immediately reach for DevTools and open the Lighthouse tab when I need to look into a site&#39;s performance. It covers a lot of ground, like reporting stats about a page&#39;s load time that include <strong>Time to First Byte (TTFB)</strong>, <strong>First Contentful Paint (FCP)</strong>, <strong>Largest Contentful Paint (LCP)</strong>, <strong>Cumulative Layout Shift (CLS)</strong>, and so on.</p><figure><img src="https://files.smashing.media/articles/fight-main-thread/2-devtools-lighthouse-smashing-magazine.png" alt="Hey, look at that — great job, team! (&lt;VPIcon icon=&quot;fas fa-globe&quot;/&gt;Large preview)" tabindex="0" loading="lazy"><figcaption>Hey, look at that — great job, team! (<a href="https://files.smashing.media/articles/fight-main-thread/2-devtools-lighthouse-smashing-magazine.png" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Large preview</a>)</figcaption></figure><p>I love this stuff! But I also am scared to death of it. I mean, this is stuff for back-end engineers, right? A measly front-end designer like me can be blissfully ignorant of all this mumbo-jumbo.</p><p>Meh, untrue. Like accessibility, performance is everyone&#39;s job because everyone&#39;s work contributes to it. Even the choice to use a particular CSS framework influences performance.</p><h3 id="total-blocking-time" tabindex="-1"><a class="header-anchor" href="#total-blocking-time"><span>Total Blocking Time</span></a></h3><p>One thing I know would be more helpful than a set of Core Web Vitals scores from Lighthouse is knowing the time it takes to go from the First Contentful Paint (FCP) to the Time to Interactive (TTI), a metric known as the <strong>Total Blocking Time (TBT)</strong>. You can see that Lighthouse does indeed provide that metric. Let&#39;s look at it for a site that&#39;s much “heavier” than Smashing Magazine.</p><figure><img src="https://files.smashing.media/articles/fight-main-thread/3-devtools-lighthouse-espn.png" alt="A screenshot of DevTools on espn.com with 61 scores on performance and total blocking time equals to 260ms (&lt;VPIcon icon=&quot;fas fa-globe&quot;/&gt;Large preview)" tabindex="0" loading="lazy"><figcaption>A screenshot of DevTools on espn.com with 61 scores on performance and total blocking time equals to 260ms (<a href="https://files.smashing.media/articles/fight-main-thread/3-devtools-lighthouse-espn.png" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Large preview</a>)</figcaption></figure><p>There we go. The problem with the Lighthouse report, though, is that I have no idea what is causing that TBT. We can get a better view if we run the same test in another service, like <a href="https://speedcurve.com" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>SpeedCurve</a>, which digs deeper into the metric. We can expand the metric to glean insights into what exactly is causing traffic on the main thread.</p><figure><img src="https://files.smashing.media/articles/fight-main-thread/4-speedcurve-tbt-smashing-magazine.png" alt="A screenshot of SpeedCurve with TBT of Smahsing Magazine (&lt;VPIcon icon=&quot;fas fa-globe&quot;/&gt;Large preview)" tabindex="0" loading="lazy"><figcaption>A screenshot of SpeedCurve with TBT of Smahsing Magazine (<a href="https://files.smashing.media/articles/fight-main-thread/4-speedcurve-tbt-smashing-magazine.png" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Large preview</a>)</figcaption></figure><p>That&#39;s a nice big view and is a good illustration of TBT&#39;s impact on page speed. The user is forced to wait a whopping 4.1 seconds between the time the first significant piece of content loads and the time the page becomes interactive. That&#39;s a lifetime in web seconds, particularly considering that this test is based on a desktop experience on a high-speed connection.</p><p>One of my favorite charts in SpeedCurve is this one showing the distribution of Core Web Vitals metrics during render. You can see the delta between contentful paints and interaction!</p><figure><img src="https://files.smashing.media/articles/fight-main-thread/5-charts-speedcurve-distribution-core-web-vitals-metrics.png" alt="A chart in SpeedCurve showing the distribution of Core Web Vitals metrics during render (&lt;VPIcon icon=&quot;fas fa-globe&quot;/&gt;Large preview)" tabindex="0" loading="lazy"><figcaption>A chart in SpeedCurve showing the distribution of Core Web Vitals metrics during render (<a href="https://files.smashing.media/articles/fight-main-thread/5-charts-speedcurve-distribution-core-web-vitals-metrics.png" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Large preview</a>)</figcaption></figure><h3 id="spotting-long-tasks" tabindex="-1"><a class="header-anchor" href="#spotting-long-tasks"><span>Spotting Long Tasks</span></a></h3><p>What I really want to see is JavaScript, which takes more than 50ms to run. These are called <a href="https://speedcurve.com/blog/tag/long-tasks/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i><strong>long tasks</strong></a>, and they contribute the most strain on the main thread. If I scroll down further into the report, all of the long tasks are highlighted in red.</p><figure><img src="https://files.smashing.media/articles/fight-main-thread/6-javascript-time.png" alt="A screenshot with long tasks time (&lt;VPIcon icon=&quot;fas fa-globe&quot;/&gt;Large preview)" tabindex="0" loading="lazy"><figcaption>A screenshot with long tasks time (<a href="https://files.smashing.media/articles/fight-main-thread/6-javascript-time.png" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Large preview</a>)</figcaption></figure><p>Another way I can evaluate scripts is by opening up the Waterfall View. The default view is helpful to see where a particular event happens in the timeline.</p><figure><img src="https://files.smashing.media/articles/fight-main-thread/7-speedcurve-waterfull-view.png" alt="Speedcurve Waterfull view (&lt;VPIcon icon=&quot;fas fa-globe&quot;/&gt;Large preview)" tabindex="0" loading="lazy"><figcaption>Speedcurve Waterfull view (<a href="https://files.smashing.media/articles/fight-main-thread/7-speedcurve-waterfull-view.png" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Large preview</a>)</figcaption></figure><p>But wait! This report can be expanded to see not only what is loaded at the various points in time but whether they are blocking the thread and by how much. Most important are the assets that come before the FCP.</p><figure><img src="https://files.smashing.media/articles/fight-main-thread/8-speed-waterfall-fcp.png" alt="Expanded Waterfull view review (&lt;VPIcon icon=&quot;fas fa-globe&quot;/&gt;Large preview)" tabindex="0" loading="lazy"><figcaption>Expanded Waterfull view review (<a href="https://files.smashing.media/articles/fight-main-thread/8-speed-waterfall-fcp.png" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Large preview</a>)</figcaption></figure><h3 id="first-third-party-scripts" tabindex="-1"><a class="header-anchor" href="#first-third-party-scripts"><span>First &amp; Third Party Scripts</span></a></h3><p>I can see right off the bat that Optimizely is serving a render-blocking script. SpeedCurve can go even deeper by distinguishing between first- and third-party scripts.</p><figure><img src="https://files.smashing.media/articles/fight-main-thread/9-speed-waterfall-options.png" alt="Waterfull option of showing third-party scripts (&lt;VPIcon icon=&quot;fas fa-globe&quot;/&gt;Large preview)" tabindex="0" loading="lazy"><figcaption>Waterfull option of showing third-party scripts (<a href="https://files.smashing.media/articles/fight-main-thread/9-speed-waterfall-options.png" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Large preview</a>)</figcaption></figure><p>That way, I can see more detail about what&#39;s happening on the Optimizely side of things.</p><figure><a href="https://files.smashing.media/articles/fight-main-thread/10-speed-waterfall-fcp.png" target="_blank" rel="noopener noreferrer"><img src="https://files.smashing.media/articles/fight-main-thread/10-speed-waterfall-fcp.png" alt="SpeedCurve showing the First Contentful Paint with distinguishment between first- and third-party scripts (&lt;VPIcon icon=&quot;fas fa-globe&quot;/&gt;Large preview)" tabindex="0" loading="lazy"></a><figcaption>SpeedCurve showing the First Contentful Paint with distinguishment between first- and third-party scripts (<a href="https://files.smashing.media/articles/fight-main-thread/10-speed-waterfall-fcp.png" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Large preview</a>)</figcaption></figure><h3 id="monitoring-blocking-scripts" tabindex="-1"><a class="header-anchor" href="#monitoring-blocking-scripts"><span>Monitoring Blocking Scripts</span></a></h3><p>With that in place, SpeedCurve actually lets me track all the resources from a specific third-party source in a custom graph that offers me many more data points to evaluate. For example, I can dive into scripts that come from Optimizely with a set of custom filters to compare them with overall requests and sizes.</p><figure><a href="https://files.smashing.media/articles/fight-main-thread/11-speed-favorite-chart.png" target="_blank" rel="noopener noreferrer"><img src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://files.smashing.media/articles/fight-main-thread/11-speed-favorite-chart.png" alt="SpeedCurve custom graph" tabindex="0" loading="lazy"></a><figcaption>SpeedCurve custom graph</figcaption></figure><p>(<a href="https://files.smashing.media/articles/fight-main-thread/11-speed-favorite-chart.png" target="_blank" rel="noopener noreferrer">Large preview</a>)</p><p>This provides a nice way to compare the impact of different third-party scripts that represent blocking and long tasks, like how much time those long tasks represent.</p><figure><a href="https://files.smashing.media/articles/fight-main-thread/12-speed-favorite-duration.png" target="_blank" rel="noopener noreferrer"><img src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://files.smashing.media/articles/fight-main-thread/12-speed-favorite-duration.png" alt="The total time of long tasks" tabindex="0" loading="lazy"></a><figcaption>The total time of long tasks</figcaption></figure><p>(<a href="https://files.smashing.media/articles/fight-main-thread/12-speed-favorite-duration.png" target="_blank" rel="noopener noreferrer">Large preview</a>)</p><p>Or perhaps which of these sources are actually render-blocking:</p><figure><a href="https://files.smashing.media/articles/fight-main-thread/13-speed-favorite-blocking.png" target="_blank" rel="noopener noreferrer"><img src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://files.smashing.media/articles/fight-main-thread/13-speed-favorite-blocking.png" alt="The number of blocking requests" tabindex="0" loading="lazy"></a><figcaption>The number of blocking requests</figcaption></figure><p>(<a href="https://files.smashing.media/articles/fight-main-thread/13-speed-favorite-blocking.png" target="_blank" rel="noopener noreferrer">Large preview</a>)</p><p>These are the kinds of tools that allow us to identify bottlenecks and make a case for optimizing them or removing them altogether. SpeedCurve allows me to monitor this over time, giving me better insight into the performance of those assets.</p><h3 id="monitoring-interaction-to-next-paint" tabindex="-1"><a class="header-anchor" href="#monitoring-interaction-to-next-paint"><span>Monitoring Interaction to Next Paint</span></a></h3><p>There&#39;s going to be a new way to gain insights into main thread traffic when <a href="https://web.dev/inp/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Interaction to Next Paint (INP)</a> is released as a new core vital metric in March 2024. It replaces the <a href="https://web.dev/fid/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>First Input Delay (FID)</a> metric.</p><p>What&#39;s so important about that? Well, FID has been used to measure <strong>load responsiveness</strong>, which is a fancy way of saying it looks at how fast the browser loads the first user interaction on the page. And by <em>interaction</em>, we mean some action the user takes that triggers an event, such as a <code>click</code>, <code>mousedown</code>, <code>keydown</code>, or <code>pointerdown</code> event. FID looks at the time the user sparks an interaction and how long the browser processes — or responds to — that input.</p><p>FID might easily be overlooked when trying to diagnose long tasks on the main thread because it looks at the amount of time a user spends waiting after interacting with the page rather than the time it takes to render the page itself. It can&#39;t be replicated with lab data because it&#39;s based on a real user interaction. That said, FID is correlated to TBT in that the higher the FID, the higher the TBT, and vice versa. So, TBT is often the go-to metric for identifying long tasks because it can be measured with lab data as well as real-user monitoring (RUM).</p><p>But FID is <a href="https://web.dev/better-responsiveness-metric/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>wrought with limitations</a>, the most significant perhaps being that it&#39;s only a measure of the <em>first</em> interaction. That&#39;s where INP comes into play. Instead of measuring the first interaction and only the first interaction, it measures <em>all</em> interactions on a page. Jeremy Wagner has a more articulate explanation:</p><p>::: web.dev - Towards a better responsiveness metric</p><blockquote><p>“The goal of INP is to ensure the time from when a user initiates an interaction until the next frame is painted is as short as possible for all or most interactions the user makes.”</p></blockquote><a class="vp-card" href="https://web.dev/blog/better-responsiveness-metric/" target="_blank" style="background:rgba(42,100,246,0.2);"><img class="vp-card-logo" src="https://gstatic.com/devrel-devsite/prod/vda41147226ae308b24384f785d31d739107d2716272d99cd11c490ff3892954d/web/images/favicon.png" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Towards a better responsiveness metric | Blog | web.dev</div><hr><div class="vp-card-desc">Learn about our thoughts on measuring responsiveness and give us feedback.</div></div></a><p>:::</p><p>Some interactions are naturally going to take longer to respond than others. So, we might think of FID as merely a first impression of responsiveness, whereas INP is a more complete picture. And like FID, the INP score is closely correlated with TBT but even more so, as Annie Sullivan reports:</p><figure><img src="https://files.smashing.media/articles/fight-main-thread/annie-sullivan-tweet.png" alt="Tweet by Annie Sullivan: First, is INP correlated with TBT? Is it more correlated with TBT than FID? Yes and yes!&lt;br&gt;&lt;br&gt;But they are both correlated with TBT; is INP catching more problems with main thread blocking JavaScript? We can break down the percent of sites meeting the good threshold: yes it is! (&lt;VPIcon icon=&quot;fas fa-globe&quot;/&gt;Large preview)" tabindex="0" loading="lazy"><figcaption>Tweet by Annie Sullivan: First, is INP correlated with TBT? Is it more correlated with TBT than FID? Yes and yes!<br><br>But they are both correlated with TBT; is INP catching more problems with main thread blocking JavaScript? We can break down the percent of sites meeting the good threshold: yes it is! (<a href="https://files.smashing.media/articles/fight-main-thread/annie-sullivan-tweet.png" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Large preview</a>)</figcaption></figure><p>Thankfully, performance tools are already beginning to bake INP into their reports. SpeedCurve is indeed one of them, and its report shows how its RUM capabilities can be used to illustrate the correlation between INP and long tasks on the main thread. This correlation chart illustrates how INP gets worse as the total long tasks&#39; time increases.</p><figure><img src="https://files.smashing.media/articles/fight-main-thread/14-correlation-chart-long-tasks-vs-inp.png" alt="A correlation chart illustrating Long tasks vs Interaction to Next Paint (&lt;VPIcon icon=&quot;fas fa-globe&quot;/&gt;Large preview)" tabindex="0" loading="lazy"><figcaption>A correlation chart illustrating Long tasks vs Interaction to Next Paint (<a href="https://files.smashing.media/articles/fight-main-thread/14-correlation-chart-long-tasks-vs-inp.png" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Large preview</a>)</figcaption></figure><p>What&#39;s cool about this report is that it is always collecting data, providing a way to monitor INP and its relationship to long tasks over time.</p><hr><h2 id="not-all-scripts-are-created-equal" tabindex="-1"><a class="header-anchor" href="#not-all-scripts-are-created-equal"><span>Not All Scripts Are Created Equal</span></a></h2><p>There is such a thing as a “good” script. It&#39;s not like I&#39;m some anti-JavaScript bloke intent on getting scripts off the web. But what constitutes a “good” one is nuanced.</p><h3 id="who-s-it-serving" tabindex="-1"><a class="header-anchor" href="#who-s-it-serving"><span>Who&#39;s It Serving?</span></a></h3><p>Some scripts benefit the organization, and others benefit the user (or both). The challenge is balancing business needs with user needs.</p><p>I think web fonts are a good example that serves both needs. A font is a branding consideration as well as a design asset that can enhance the legibility of a site&#39;s content. Something like that might make loading a font script or file worth its cost to page performance. That&#39;s a tough one. So, rather than fully eliminating a font, maybe it can be optimized instead, perhaps by self-hosting the files rather than connecting to a third-party domain or only loading a subset of characters.</p><p>Analytics is another difficult choice. I removed analytics from my personal site long ago because I rarely, if ever, looked at them. And even if I did, the stats were more of an ego booster than insightful details that helped me improve the user experience. It&#39;s an easy decision for me, but not so easy for a site that lives and dies by reports that are used to identify and scope improvements.</p><p>If the script is really being used to benefit the user at the end of the day, then yeah, it&#39;s worth keeping around.</p><h3 id="when-is-it-served" tabindex="-1"><a class="header-anchor" href="#when-is-it-served"><span>When Is It Served?</span></a></h3><p>A script may very well serve a valid purpose and benefit both the organization and the end user. But does it need to load first before anything else? That&#39;s the sort of question to ask when a script might be useful, but can certainly jump out of line to let others run first.</p><p>I think of chat widgets for customer support. Yes, having a persistent and convenient way for customers to get in touch with support is going to be important, particularly for e-commerce and SaaS-based services. But does it need to be available <em>immediately</em>? Probably not. You&#39;ll probably have a greater case for getting the site to a state that the user can interact with compared to getting a third-party widget up front and center. There&#39;s little point in rendering the widget if the rest of the site is inaccessible anyway. It is better to get things moving first by prioritizing some scripts ahead of others.</p><h3 id="where-is-it-served-from" tabindex="-1"><a class="header-anchor" href="#where-is-it-served-from"><span>Where Is It Served From?</span></a></h3><p>Just because a script comes from a third party doesn&#39;t mean it has to be hosted by a third party. The web fonts example from earlier applies. Can the font files be self-hosted instead rather than needing to establish another outside connection? It&#39;s worth asking. There are self-hosted alternatives to Google Analytics, after all. And even <a href="https://developers.google.com/tag-platform/tag-manager/server-side/custom-domain" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-google" sizing="height"></i>GTM can be self-hosted</a>! That&#39;s why grouping first and third-party scripts in SpeedCurve&#39;s reporting is so useful: spot <em>what</em> is being served and <em>where</em> it is coming from and identify possible opportunities.</p><figure><img src="https://files.smashing.media/articles/fight-main-thread/15-speed-first-third-party-graph.png" alt="A graph showing first and third party size (&lt;VPIcon icon=&quot;fas fa-globe&quot;/&gt;Large preview)" tabindex="0" loading="lazy"><figcaption>A graph showing first and third party size (<a href="https://files.smashing.media/articles/fight-main-thread/15-speed-first-third-party-graph.png" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Large preview</a>)</figcaption></figure><h3 id="what-is-it-serving" tabindex="-1"><a class="header-anchor" href="#what-is-it-serving"><span>What Is It Serving?</span></a></h3><p>Loading one script can bring unexpected visitors along for the ride. I think the classic case is a third-party script that loads its own assets, like a stylesheet. Even if you think you&#39;re only loading one stylesheet — your own — it&#39;s very possible that a script loads additional external stylesheets, all of which need to be downloaded and rendered.</p><figure><img src="https://files.smashing.media/articles/fight-main-thread/16-speed-assets-source-distribution.png" alt="A graph showing a number of requests made by each third party, broken down by content type (&lt;VPIcon icon=&quot;fas fa-globe&quot;/&gt;Large preview)" tabindex="0" loading="lazy"><figcaption>A graph showing a number of requests made by each third party, broken down by content type (<a href="https://files.smashing.media/articles/fight-main-thread/16-speed-assets-source-distribution.png" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Large preview</a>)</figcaption></figure><hr><h2 id="getting-javascript-off-the-main-thread" tabindex="-1"><a class="header-anchor" href="#getting-javascript-off-the-main-thread"><span>Getting JavaScript Off The Main Thread</span></a></h2><p>That&#39;s the goal! We want fewer cars on the road to alleviate traffic on the main thread. There are a bunch of technical ways to go about it. I&#39;m not here to write up a definitive guide of technical approaches for optimizing the main thread, but there is a wealth of material on the topic.</p><p>I&#39;ll break down several different approaches and fill them in with resources that do a great job explaining them in full.</p><h3 id="use-web-workers" tabindex="-1"><a class="header-anchor" href="#use-web-workers"><span>Use Web Workers</span></a></h3><p>A web worker, at its most basic, allows us to establish separate threads that handle tasks off the main thread. Web workers run parallel to the main thread. There are limitations to them, of course, most notably not having direct access to the DOM and being unable to share variables with other threads. But using them can be an effective way to re-route traffic from the main thread to other streets, so to speak.</p><ul><li><a href="https://html.spec.whatwg.org/multipage/workers.html" target="_blank" rel="noopener noreferrer">Web Workers</a> (HTML Living Standard)</li><li>“<a href="https://css-tricks.com/the-difference-between-web-sockets-web-workers-and-service-workers/" target="_blank" rel="noopener noreferrer">The Difference Between Web Sockets, Web Workers, and Service Workers</a>,” Aisha Bukar</li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers" target="_blank" rel="noopener noreferrer">Using Web Workers</a> (MDN)</li><li>“<a href="https://web.dev/off-main-thread/" target="_blank" rel="noopener noreferrer">Use Web Workers to Run JavaScript Off the Browser&#39;s Main Thread</a>,” Dave Surma</li><li>“<a href="https://smashingmagazine.com/2020/10/tasks-react-app-web-workers/" target="_blank" rel="noopener noreferrer">Managing Long-Running Tasks In A React App With Web Workers</a>,” Chidi Orji</li><li>“<a href="https://smashingmagazine.com/2023/04/potential-web-workers-multithreading-web/" target="_blank" rel="noopener noreferrer">Exploring The Potential Of Web Workers For Multithreading On The Web</a>,” Sarah Oke Okolo</li><li>“<a href="https://web.dev/workers-basics/" target="_blank" rel="noopener noreferrer">The Basics of Web Workers</a>,” Malte Ubl and Eiji Kitamura</li></ul><h3 id="split-javascript-bundles-into-individual-pieces" tabindex="-1"><a class="header-anchor" href="#split-javascript-bundles-into-individual-pieces"><span>Split JavaScript Bundles Into Individual Pieces</span></a></h3><p>The basic idea is to avoid bundling JavaScript as a monolithic concatenated file in favor of “code splitting” or splitting the bundle up into separate, smaller payloads to send only the code that&#39;s needed. This reduces the amount of JavaScript that needs to be parsed, which improves traffic along the main thread.</p><ul><li>“<a href="https://web.dev/reduce-javascript-payloads-with-code-splitting/" target="_blank" rel="noopener noreferrer">Reduce JavaScript Payloads With Code Splitting</a>,” Houssein Djirdeh and Jeremy Wagner</li><li>“<a href="https://nextjs.org/learn/foundations/how-nextjs-works/code-splitting" target="_blank" rel="noopener noreferrer">What Is Code Splitting?</a>,” Next.js</li><li>“<a href="https://smashingmagazine.com/2022/02/javascript-bundle-performance-code-splitting/" target="_blank" rel="noopener noreferrer">Improving JavaScript Bundle Performance With Code-Splitting</a>,” Adrian Bece</li><li>“<a href="https://gomakethings.com/code-splitting-with-vanilla-js/" target="_blank" rel="noopener noreferrer">Code Splitting With Vanilla JS</a>,” Chris Ferdinandi</li><li>“<a href="https://developer.chrome.com/blog/supercharged-codesplit/" target="_blank" rel="noopener noreferrer">Supercharged Live Stream Blog — Code Splitting</a>,” Dave Surma</li></ul><h3 id="async-or-defer-scripts" tabindex="-1"><a class="header-anchor" href="#async-or-defer-scripts"><span>Async or Defer Scripts</span></a></h3><p>Both are ways to load JavaScript without blocking the DOM. But they are different! Adding the <code>async</code> attribute to a <code>&lt;script&gt;</code> tag will load the script asynchronously, executing it as soon as it&#39;s downloaded. That&#39;s different from the <code>defer</code> attribute, which is also asynchronous but waits until the DOM is fully loaded before it executes.</p><ul><li>“<a href="https://zellwk.com/blog/javascript-async-and-defer/" target="_blank" rel="noopener noreferrer">How And When To Use Async And Defer Attributes</a>,” Zell Liew</li><li>“<a href="https://digitalocean.com/community/tutorials/html-defer-async" target="_blank" rel="noopener noreferrer">Eliminate Render-Blocking JavaScript With Async And Defer</a>,” (DigitalOcean)</li><li>“<a href="https://web.dev/optimize-long-tasks/" target="_blank" rel="noopener noreferrer">Optimize Long Tasks</a>,” Jeremy Wagner</li><li>“<a href="https://web.dev/efficiently-load-third-party-javascript/" target="_blank" rel="noopener noreferrer">Efficiently Load Third-party JavaScript</a>,” Milica Mihajlija</li><li><a href="https://javascript.info/script-async-defer" target="_blank" rel="noopener noreferrer">Scripts: async, defer</a> (JavaScript.info)</li></ul><h3 id="preconnect-network-connections" tabindex="-1"><a class="header-anchor" href="#preconnect-network-connections"><span>Preconnect Network Connections</span></a></h3><p>I guess I could have filed this with <code>async</code> and <code>defer</code>. That&#39;s because <code>preconnect</code> is a value on the <code>rel</code> attribute that&#39;s used on a <code>&lt;link&gt;</code> tag. It gives the browser a hint that you plan to connect to another domain. It establishes the connection as soon as possible prior to actually downloading the resource. The connection is done in advance, allowing the full script to download later.</p><p>While it sounds excellent — and it is — pre-connecting comes with an unfortunate downside in that it exposes a user&#39;s IP address to third-party resources used on the page, which is a breach of <a href="https://smashingmagazine.com/2018/02/gdpr-for-web-developers/" target="_blank" rel="noopener noreferrer">GDPR compliance</a>. There was a little uproar over that when it was found out that <a href="https://css-tricks.com/bunny-fonts/" target="_blank" rel="noopener noreferrer">using a Google Fonts script is prone to that as well</a>.</p><ul><li>“<a href="https://web.dev/preconnect-and-dns-prefetch/" target="_blank" rel="noopener noreferrer">Establish Network Connections Early to Improve Perceived Page Speed</a>,” Milica Mihajlija and Jeremy Wagner</li><li>“<a href="https://web.dev/prioritize-resources/" target="_blank" rel="noopener noreferrer">Prioritize Resources</a>,” Sérgio Gomes</li><li>“<a href="https://andydavies.me/blog/2019/03/22/improving-perceived-performance-with-a-link-rel-equals-preconnect-http-header/" target="_blank" rel="noopener noreferrer">Improving Perceived Performance With the Link Rel=preconnect HTTP Header</a>,” Andy Davies</li><li>“<a href="https://andydavies.me/blog/2019/08/07/experimenting-with-link-rel-equals-preconnect-using-custom-script-injection-in-webpagetest/" target="_blank" rel="noopener noreferrer">Experimenting With Link Rel=preconnect Using Custom Script Injection in WebPageTest</a>,” Andy Davies</li><li>“<a href="https://developer.chrome.com/blog/early-hints/" target="_blank" rel="noopener noreferrer">Faster Page Loads Using Server Think-time With Early Hints</a>,” Kenji Baheux</li><li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel/preconnect" target="_blank" rel="noopener noreferrer">rel=preconnect</a> (MDN)</li></ul><hr><h2 id="non-technical-approaches" tabindex="-1"><a class="header-anchor" href="#non-technical-approaches"><span>Non-Technical Approaches</span></a></h2><p>I often think of a Yiddish proverb I first saw in Malcolm Gladwell&#39;s <a href="https://gladwellbooks.com/titles/malcolm-gladwell/outliers/9780316040341/" target="_blank" rel="noopener noreferrer"><em>Outliers</em></a>; however, many years ago it came out:</p><blockquote><p>To a worm in horseradish, the whole world is horseradish.</p></blockquote><p>It&#39;s a more pleasing and articulate version of the saying that goes, “To a carpenter, every problem looks like a nail.” So, too, it is for developers working on performance. To us, every problem is code that needs a technical solution. But there are indeed ways to reduce the amount of work happening on the main thread without having to touch code directly.</p><p>We discussed earlier that performance is not only a developer&#39;s job; it&#39;s everyone&#39;s responsibility. So, think of these as strategies that encourage a “culture” of good performance in an organization.</p><h3 id="nuke-scripts-that-lack-purpose" tabindex="-1"><a class="header-anchor" href="#nuke-scripts-that-lack-purpose"><span>Nuke Scripts That Lack Purpose</span></a></h3><p>As I said at the start of this article, there are some scripts on the projects I work on that I have no idea what they do. It&#39;s not because I don&#39;t care. It&#39;s because GTM makes it ridiculously easy to inject scripts on a page, and more than one person can access it across multiple teams.</p><p>So, maybe compile a list of all the third-party and render-blocking scripts and figure out who owns them. Is it Dave in DevOps? Marcia in Marketing? Is it someone else entirely? You gotta make friends with them. That way, there can be an honest evaluation of which scripts are actually helping and are critical to balance.</p><h3 id="bend-google-tag-manager-to-your-will" tabindex="-1"><a class="header-anchor" href="#bend-google-tag-manager-to-your-will"><span>Bend Google Tag Manager To Your Will</span></a></h3><p>Or any tag manager, for that matter. Tag managers have a pretty bad reputation for adding bloat to a page. It&#39;s true; they can definitely make the page size balloon as more and more scripts are injected.</p><p>But that reputation is not totally warranted because, like most tools, you have to use them responsibly. Sure, the beauty of something like GTM is how easy it makes adding scripts to a page. That&#39;s the “Tag” in Google Tag Manager. But the <em>real</em> beauty is that convenience, <em>plus</em> the features it provides to manage the scripts. You know, the “Manage” in Google Tag <em>Manager</em>. It&#39;s spelled out right on the tin!</p><ul><li>“<a href="https://web.dev/tag-best-practices/" target="_blank" rel="noopener noreferrer">Best Practices For Tags And Tag Managers</a>,” Katie Hempenius and Barry Pollard</li><li>“<a href="https://digitalreachagency.com/blog/mastering-your-gtm-pt-2-techniques-on-how-to-improve-your-gtm/" target="_blank" rel="noopener noreferrer">Techniques on How to Improve Your GTM</a>,” Ryan Rosati</li><li>“<a href="https://crystallize.com/blog/fast-loading-google-tag-manager" target="_blank" rel="noopener noreferrer">Keeping Websites Fast when Loading Google Tag Manager</a>,” Håkon Gullord Krogh</li><li>“<a href="https://pilotdigital.com/blog/optimizing-gtm-for-page-speed/" target="_blank" rel="noopener noreferrer">Optimizing Page Speed with Google Tag Manager</a>,” Charlie Weller</li><li><a href="https://support.google.com/tagmanager/answer/7679219?hl=en" target="_blank" rel="noopener noreferrer">Custom event trigger</a> (Tag Manager Help)</li></ul><hr><h2 id="wrapping-up" tabindex="-1"><a class="header-anchor" href="#wrapping-up"><span>Wrapping Up</span></a></h2><p>Phew! Performance is not exactly a straightforward science. There are objective ways to measure performance, of course, but if I&#39;ve learned anything about it, it&#39;s that subjectivity is a big part of the process. Different scripts are of different sizes and consist of different resources serving different needs that have different priorities for different organizations and their users.</p><p>Having access to a free reporting tool like Lighthouse in DevTools is a great start for diagnosing performance issues by identifying bottlenecks on the main thread. Even better are paid tools like <a href="https://speedcurve.com/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>SpeedCurve</a> to dig deeper into the data for more targeted insights and to produce visual reports to help make a case for performance improvements for your team and other stakeholders.</p><p>While I wish there were some sort of silver bullet to guarantee good performance, I&#39;ll gladly take these and similar tools as a starting point. Most important, though, is having a performance game plan that is served by the tools. And <a href="https://smashingmagazine.com/2021/01/front-end-performance-2021-free-pdf-checklist/" target="_blank" rel="noopener noreferrer">Vitaly&#39;s front-end performance checklist</a> is an excellent place to start.</p><!-- TODO: add ARTICLE CARD --><a class="vp-card" href="https://chanhi2000.github.io/bookshelf/smashingmagazine.com/speedcurve-fight-main-thread.html" target="_blank" style="background:rgba(211,58,44,0.2);"><img class="vp-card-logo" src="https://smashingmagazine.com/images/favicon/favicon.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">The Fight For The Main Thread</div><hr><div class="vp-card-desc">Having access to a free reporting tool like Lighthouse in DevTools is a great start for diagnosing performance issues by identifying bottlenecks on the main thread. Even better are paid tools like [SpeedCurve](https://www.speedcurve.com/) to dig deeper into the data for more targeted insights and to produce visual reports to help make a case for performance improvements for your team and other stakeholders.</div></div></a></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/chanhi2000/articles/edit/main/src/smashingmagazine.com/speedcurve-fight-main-thread.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/bookshelf/academcis/coen/articles/" aria-label="/academcis/coen/articles/"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->/academcis/coen/articles/</div></a><a class="route-link auto-link next" href="/bookshelf/smashingmagazine.com/end-of-gatsby-journey.html" aria-label="The End Of My Gatsby Journey"><div class="hint">Next<span class="arrow end"></span></div><div class="link">The End Of My Gatsby Journey<i class="vp-icon iconfont icon-gatsby" sizing="height"></i></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">MIT Licensed | Copyright © 2022-present <a href="https://github.com/chanhi2000">Chan Hee Lee</a></div><div class="vp-copyright">Copyright © 2025 Geoff Graham </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/bookshelf/assets/app-BVguHYKu.js" defer></script>
  </body>
</html>
