<!doctype html>
<html lang="en-US" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.99" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"The Future of CSS: Cascade Layers (CSS @layer)","image":["https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-cascade-layers-champ-bramus.png","https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-current-cascade-bramus.png","https://bram.us/wordpress/wp-content/uploads/2021/09/itcss.jpg","https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-cascade-layers-bramus.png","https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-layer-order-bramus.png","https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-cascade-layers-bramus.png","https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-layers-determine-winner-bramus.png","https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-unlayered-styles-revised-bramus.png","https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-nested-layers-bramus.png","https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-layers-important-bramus.png"],"datePublished":"2021-09-15T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"Bramus!","url":"https://bram.us/author/bramus/"}]}</script><meta property="og:url" content="https://chanhi2000.github.io/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html"><meta property="og:site_name" content="üìöBookshelf"><meta property="og:title" content="The Future of CSS: Cascade Layers (CSS @layer)"><meta property="og:description" content="Article(s) > The Future of CSS: Cascade Layers (CSS @layer)"><meta property="og:type" content="article"><meta property="og:image" content="https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-cascade-layers-champ-bramus.png"><meta property="og:locale" content="en-US"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:src" content="https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-cascade-layers-champ-bramus.png"><meta name="twitter:image:alt" content="The Future of CSS: Cascade Layers (CSS @layer)"><meta property="article:author" content="Bramus!"><meta property="article:tag" content="css"><meta property="article:tag" content="bram.us"><meta property="article:tag" content="blog"><meta property="article:published_time" content="2021-09-15T00:00:00.000Z"><link rel="icon" href="/bookshelf/assets/icon/favicon.svg"><title>The Future of CSS: Cascade Layers (CSS @layer) | üìöBookshelf</title><meta name="description" content="Article(s) > The Future of CSS: Cascade Layers (CSS @layer)">
    <link rel="preload" href="/bookshelf/assets/style-Bhb-QcDa.css" as="style"><link rel="stylesheet" href="/bookshelf/assets/style-Bhb-QcDa.css">
    
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/bookshelf/" aria-label="Take me home"><img class="vp-nav-logo" src="/bookshelf/assets/icon/favicon.svg" alt><!----><span class="vp-site-name hide-in-pad">üìöBookshelf</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/bookshelf/news.html" aria-label><!--[--><i class="vp-icon fas fa-rss" sizing="height"></i><!--]--><!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-keyboard" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/hackingwithswift.com/" aria-label="hackingwithswift.com"><!--[--><img class="vp-icon" src="https://hackingwithswift.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->hackingwithswift.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fcc/" aria-label="freecodecamp.org"><!--[--><img class="vp-icon" src="https://cdn.freecodecamp.org/universal/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->freecodecamp.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kodeco.com/" aria-label="kodeco.com"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->kodeco.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.kotzilla.io/" aria-label="blog.kotzilla.io"><!--[--><img class="vp-icon" src="https://blog.kotzilla.io/hubfs/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.kotzilla.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kt.academy/" aria-label="kt.academy"><!--[--><img class="vp-icon" src="https://kt.academy/logo.png" alt aria-hidden no-view sizing="both"><!--]-->kt.academy<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/droidcon.com/" aria-label="droidcon.com"><!--[--><img class="vp-icon" src="https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png" alt aria-hidden no-view sizing="both"><!--]-->droidcon.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/outcomeschool.com/" aria-label="outcomeschool.com"><!--[--><img class="vp-icon" src="https://outcomeschool.com/static/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->outcomeschool.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/frontendmasters.com/" aria-label="frontendmasters.com"><!--[--><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->frontendmasters.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tricks.com/" aria-label="css-tricks.com"><!--[--><img class="vp-icon" src="https://css-tricks.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->css-tricks.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="smashingmagazine.com"><!--[--><img class="vp-icon" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->smashingmagazine.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="oddbird.net"><!--[--><img class="vp-icon" src="https://oddbird.net/safari-pinned-tab.svg" alt aria-hidden no-view sizing="both"><!--]-->oddbird.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/zeroheight.com/" aria-label="zeroheight.com"><!--[--><img class="vp-icon" src="https://zeroheight.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->zeroheight.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/typescript.tv/" aria-label="typescript.tv"><!--[--><img class="vp-icon" src="https://typescript.tv/_astro/android-chrome-192x192.BhQ8hcWh.png" alt aria-hidden no-view sizing="both"><!--]-->typescript.tv<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.logrocket.com/" aria-label="blog.logrocket.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.logrocket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/realpython.com/" aria-label="realpython.com"><!--[--><img class="vp-icon" src="https://realpython.com/static/favicon.68cbf4197b0c.png" alt aria-hidden no-view sizing="both"><!--]-->realpython.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/digitalocean.com/" aria-label="digitalocean.com"><!--[--><img class="vp-icon" src="https://digitalocean.com/_next/static/media/favicon.594d6067.ico" alt aria-hidden no-view sizing="both"><!--]-->digitalocean.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/antonioleiva.com/" aria-label="antonioleiva.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/antonioleiva.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->antonioleiva.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/johnnyreilly.com/" aria-label="johnnyreilly.com"><!--[--><img class="vp-icon" src="https://johnnyreilly.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->johnnyreilly.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/code-maze.com/" aria-label="code-maze.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/code-maze.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->code-maze.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/milanjovanovic.tech/" aria-label="milanjovanovic.tech"><!--[--><img class="vp-icon" src="https://milanjovanovic.tech/profile_favicon.png" alt aria-hidden no-view sizing="both"><!--]-->milanjovanovic.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/shopify.engineering/" aria-label="shopify.engineering"><!--[--><img class="vp-icon" src="https://cdn.shopify.com/static/shopify-favicon.png" alt aria-hidden no-view sizing="both"><!--]-->shopify.engineering<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devtoolstips.org/" aria-label="devtoolstips.org"><!--[--><img class="vp-icon" src="https://devtoolstips.org/assets/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devtoolstips.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/piccalil.li/" aria-label="piccalil.li"><!--[--><img class="vp-icon" src="https://piccalil.li/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->piccalil.li<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/sitepoint.com/" aria-label="sitepoint.com"><!--[--><img class="vp-icon" src="https://sitepoint.com/favicons/512x512.png" alt aria-hidden no-view sizing="both"><!--]-->sitepoint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/event-driven.io/" aria-label="event-driven.io"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/event-driven.io/favicon.jfif" alt aria-hidden no-view sizing="both"><!--]-->event-driven.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/packagemain.tech/" aria-label="packagemain.tech"><!--[--><img class="vp-icon" src="https://substack-post-media.s3.amazonaws.com/public/images/2ea54e25-eaa6-4630-bfc0-10b8cfdce894/apple-touch-icon-1024x1024.png" alt aria-hidden no-view sizing="both"><!--]-->packagemain.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/gosolve.io/" aria-label="gosolve.io"><!--[--><img class="vp-icon" src="https://gosolve.io/wp-content/uploads/2022/03/cropped-ikona1-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->gosolve.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/bookshelf/bram.us/" aria-label="bram.us"><!--[--><img class="vp-icon" src="https://bram.us/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->bram.us<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/una.im/" aria-label="una.im"><!--[--><img class="vp-icon" src="https://una.im/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->una.im<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/joshwcomeau.com/" aria-label="joshwcomeau.com"><!--[--><img class="vp-icon" src="https://joshwcomeau.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->joshwcomeau.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tip.com/" aria-label="css-tip.com"><!--[--><img class="vp-icon" src="https://css-tip.com/img/fav.png" alt aria-hidden no-view sizing="both"><!--]-->css-tip.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/nerdy.dev/" aria-label="nerdy.dev"><!--[--><img class="vp-icon" src="https://nerdy.dev/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->nerdy.dev<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/towardsdatascience.com/" aria-label="towardsdatascience.com"><!--[--><img class="vp-icon" src="https://cdn-images-1.medium.com/v2/resize:fill:128:128/1*VzTUkfeGymHP4Bvav-T-lA.png" alt aria-hidden no-view sizing="both"><!--]-->towardsdatascience.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/douggregor.net/" aria-label="douggregor.net"><!--[--><i class="vp-icon fas fa-globe" sizing="both"></i><!--]-->douggregor.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/d2.naver.com/" aria-label="d2.naver.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/d2.naver.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->d2.naver.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakao.com/" aria-label="tech.kakao.com"><!--[--><img class="vp-icon" src="https://www.kakaocorp.com/page/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakao.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakaopay.com/" aria-label="tech.kakaopay.com"><!--[--><img class="vp-icon" src="https://tech.kakaopay.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakaopay.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fe-developers.kakaoent.com/" aria-label="fe-developers.kakaoent.com"><!--[--><img class="vp-icon" src="https://fe-developers.kakaoent.com/favicon-32x32.png?v=44803cb16c1e2debd3984cf2e8cb2ded" alt aria-hidden no-view sizing="both"><!--]-->fe-developers.kakaoent.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/yozm.wishket.com/" aria-label="yozm.wishket.com"><!--[--><img class="vp-icon" src="https://yozm.wishket.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->yozm.wishket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/popit.kr/" aria-label="popit.kr"><!--[--><img class="vp-icon" src="https://popit.kr/wp-content/uploads/2016/08/favicon_32x32.png" alt aria-hidden no-view sizing="both"><!--]-->popit.kr<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devkuma.com/" aria-label="devkuma.com"><!--[--><img class="vp-icon" src="https://devkuma.com/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devkuma.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.gangnamunni.com/" aria-label="blog.gangnamunni.com"><!--[--><img class="vp-icon" src="https://blog.gangnamunni.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->blog.gangnamunni.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/codingeverybody.kr/" aria-label="codingeverybody.kr"><!--[--><img class="vp-icon" src="https://codingeverybody.kr/wp-content/uploads/cropped-favicon-origin-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->codingeverybody.kr<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-network-wired" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tecmint.com/" aria-label="tecmint.com"><!--[--><img class="vp-icon" src="https://tecmint.com/wp-content/uploads/2020/07/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tecmint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/docker.com/" aria-label="docker.com"><!--[--><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->docker.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/learnkube.com/" aria-label="learnkube.com"><!--[--><img class="vp-icon" src="https://static.learnkube.com/f7e5160d4744cf05c46161170b5c11c9.svg" alt aria-hidden no-view sizing="both"><!--]-->learnkube.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/itsfoss.com/" aria-label="itsfoss.com"><!--[--><img class="vp-icon" src="https://itsfoss.com/content/images/size/w256h256/2022/12/android-chrome-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->itsfoss.com<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/chanhi2000/bookshelf" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><!----></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="vp-icon" src="https://bram.us/favicon.ico" alt aria-hidden no-view sizing="both"><span class="vp-sidebar-title">bram.us</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2025</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2024</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2023</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2022</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">2021</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/bram.us/a-first-look-at-container-query-polyfill-a-polyfill-for-css-container-queries.html" aria-label="A first look at container-query-polyfill, a polyfill for CSS Container Queries"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->A first look at container-query-polyfill, a polyfill for CSS Container Queries<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html" aria-label="The Future of CSS: Cascade Layers (CSS @layer)"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->The Future of CSS: Cascade Layers (CSS @layer)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/bram.us/the-large-small-and-dynamic-viewports.html" aria-label="The Large, Small, and Dynamic Viewports"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->The Large, Small, and Dynamic Viewports<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/bram.us/a-first-look-at-cqfill-a-polyfill-for-css-container-queries.html" aria-label="A first look at CQFill, a Polyfill for CSS Container Queries"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->A first look at CQFill, a Polyfill for CSS Container Queries<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/bram.us/css-container-queries-a-first-look-and-demo.html" aria-label="CSS Container Queries: A First Look + Demo"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->CSS Container Queries: A First Look + Demo<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/bram.us/the-future-of-css-scroll-linked-animations-part-1.html" aria-label="The Future of CSS: Scroll-Linked Animations with @scroll-timeline (Part 1)"><!--[--><i class="vp-icon fa-brands fa-css3-alt" sizing="both"></i><!--]-->The Future of CSS: Scroll-Linked Animations with @scroll-timeline (Part 1)<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2020</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2019</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2017</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2016</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><div class="page-cover"><img src="https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-cascade-layers-champ-bramus.png" alt no-view></div><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon fa-brands fa-css3-alt" sizing="height"></i>The Future of CSS: Cascade Layers (CSS @layer)</h1><div class="page-info"><span class="page-author-info" aria-label="Authorüñä" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://bram.us/author/bramus/" target="_blank" rel="noopener noreferrer">Bramus!</a></span><span property="author" content="Bramus!"></span></span><!----><span class="page-date-info" aria-label="Writing DateüìÖ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">9/15/21</span><meta property="datePublished" content="2021-09-15T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time‚åõ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 14 min</span><meta property="timeRequired" content="PT14M"></span><span class="page-category-info" aria-label="Categoryüåà" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color7" role>CSS</span><span class="page-category-item color8" role>Article(s)</span><!--]--><meta property="articleSection" content="CSS,Article(s)"></span><span class="page-tag-info" aria-label="Tagüè∑" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8" role>blog</span><span class="page-tag-item color2" role>bram.us</span><span class="page-tag-item color2" role>css</span><!--]--><meta property="keywords" content="blog,bram.us,css"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´" tabindex="-1"><a class="header-anchor" href="#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"><span>The Future of CSS: Cascade Layers (CSS @layer) Í¥ÄÎ†®</span></a></h1><a class="route-link vp-card" href="/bookshelf/programming/css/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="/bookshelf/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">CSS > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><nav class="table-of-contents"><ul><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#the-css-cascade-a-quick-primer" class="router-link-active router-link-exact-active">The CSS Cascade, a Quick Primer</a></li><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#taming-the-cascade" class="router-link-active router-link-exact-active">Taming the Cascade</a></li><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#introducing-cascade-layers" class="router-link-active router-link-exact-active">Introducing Cascade Layers</a><ul><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#creating-a-cascade-layer" class="router-link-active router-link-exact-active">Creating a Cascade Layer</a></li><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#managing-layer-order" class="router-link-active router-link-exact-active">Managing Layer Order</a></li><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#cascade-layers-and-the-cascade" class="router-link-active router-link-exact-active">Cascade Layers and the Cascade</a></li></ul></li><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#intermediate-summary" class="router-link-active router-link-exact-active">Intermediate Summary</a></li><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#details-you-need-to-know" class="router-link-active router-link-exact-active">Details you need to know</a><ul><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#unlayered-styles-come-first-last-in-the-layer-order" class="router-link-active router-link-exact-active">Unlayered Styles come first last in the Layer Order</a></li><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#naming-a-layer-is-optional" class="router-link-active router-link-exact-active">Naming a Layer is optional</a></li><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#layers-can-be-nested" class="router-link-active router-link-exact-active">Layers can be nested</a></li></ul></li><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#a-few-more-notes-caveats" class="router-link-active router-link-exact-active">A few more notes / caveats</a><ul><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#cascade-layers-and-the-use-of-important" class="router-link-active router-link-exact-active">Cascade Layers and the use of !important</a></li><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#cascade-layers-vs-media-queries-and-other-conditionals" class="router-link-active router-link-exact-active">Cascade Layers vs. Media Queries (and other conditionals)</a></li><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#cascade-layers-vs-name-defining-rules" class="router-link-active router-link-exact-active">Cascade Layers vs. ‚ÄúName-Defining Rules‚Äù</a></li><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#no-interleaving-of-import-namespace-and-layer" class="router-link-active router-link-exact-active">No Interleaving of @import/@namespace and @layer</a></li></ul></li><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#browser-support" class="router-link-active router-link-exact-active">Browser Support</a><ul><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#chromium-blink" class="router-link-active router-link-exact-active">Chromium (Blink)</a></li><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#firefox-gecko" class="router-link-active router-link-exact-active">Firefox (Gecko)</a></li><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#safari-webkit" class="router-link-active router-link-exact-active">Safari (WebKit)</a></li></ul></li><li><a aria-current="page" href="/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html#in-closing" class="router-link-active router-link-exact-active">In Closing</a></li></ul></nav><hr><div class="vp-site-info" data-name="The Future of CSS: Cascade Layers (CSS @layer)"><a class="vp-site-info-navigator no-external-link-icon" title="The Future of CSS: Cascade Layers (CSS @layer)" href="https://bram.us/bram.us/2021/09/15/the-future-of-css-cascade-layers-css-at-layer/" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-cascade-layers-champ-bramus.png) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://bramu.us/favicon.ico" alt loading="lazy" no-view><div class="vp-site-info-name">The Future of CSS: Cascade Layers (CSS @layer)</div><div class="vp-site-info-desc">When authoring CSS we have to carefully think about how we write and structure our code. Cascade Layers (CSS @layer) aim to ease this task.</div></div><!----></div><figure><img src="https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-cascade-layers-champ-bramus.png" alt="Cascade Layers" tabindex="0" loading="lazy"><figcaption>Cascade Layers</figcaption></figure><p>When writing CSS, we developers have to carefully think about how we write and structure our code. Without any proper <em>‚Äúplan of attack‚Äù</em> the Cascade can suddenly work against us, and we might end up with pieces of code overwriting each other, selectors getting heavier and heavier, a few <code>!important</code> modifiers here and there, ‚Ä¶ ‚Äî Uhoh!</p><p>To regain control over the Cascade in those situations there‚Äôs a new CSS Language Feature coming to help us: <strong>Cascade Layers <em>(CSS <code>@layer</code>)</em></strong>.</p><p>Let‚Äôs take a look at what they are, how we can use them, and what benefits they bring ‚Ä¶</p><hr><h2 id="the-css-cascade-a-quick-primer" tabindex="-1"><a class="header-anchor" href="#the-css-cascade-a-quick-primer"><span>The CSS Cascade, a Quick Primer</span></a></h2><p>The <a href="https://drafts.csswg.org/css-cascade/#cascading" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>CSS Cascade</a> is the algorithm which CSS uses to resolve competing declarations that want to be applied to an element.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token comment">/* HTML: &lt;input type=&quot;password&quot; id=&quot;password&quot; style=&quot;color: blue;&quot; /&gt; */</span></span>
<span class="line"><span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">color</span><span class="token punctuation">:</span> grey<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">input[type=&quot;password&quot;]</span> <span class="token punctuation">{</span> <span class="token property">color</span><span class="token punctuation">:</span> hotpink <span class="token important">!important</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">#password</span> <span class="token punctuation">{</span> <span class="token property">color</span><span class="token punctuation">:</span> lime<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>Will the <code>input</code> color be <code>grey</code>, <code>lime</code>, <code>hotpink</code>, or <code>blue</code>? Or the User-Agent default <code>black</code>?</em></p><p>To determine which declaration should ‚Äúwin‚Äù <em>(and thus be applied)</em>, the Cascade looks at a few criteria. Without taking Cascade Layers into account just yet, these criteria are:</p><ol><li>Origin and Importance</li><li>Context</li><li>Style Attribute</li><li>Specificity</li><li>Order of Appearance <em>(aka Source Code Order)</em></li></ol><p>These criteria are ranked from high to low priority, and are checked one after the other until a winning declaration has been determined. In case it is undecided which property declaration will ‚Äúwin‚Äù at a higher criterion, the Cascade will move on to the next criterion.</p><figure><img src="https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-current-cascade-bramus.png" alt="The CSS Cascade Visualized" tabindex="0" loading="lazy"><figcaption>The CSS Cascade Visualized</figcaption></figure><div class="hint-container info"><p class="hint-container-title">Info</p><p>For more in-depth info, please refer to <a class="route-link" href="/bookshelf/bram.us/the-css-cascade-a-deep-dive-2022-06-09-css-day.html"><strong>my CSS Day 2022 talk on the subject</strong></a>. It also covers Cascade Layers, so you can watch the entire thing instead of continuing to read üòâ</p><div></div><p>You can <a class="route-link" href="/bookshelf/bram.us/the-css-cascade-a-deep-dive-2022-06-09-css-day.html"><strong>find the the slides here</strong></a>.</p></div><hr><h2 id="taming-the-cascade" tabindex="-1"><a class="header-anchor" href="#taming-the-cascade"><span>Taming the Cascade</span></a></h2><p>When authoring CSS we place our CSS mainly into one and the same origin: the Author Origin. As a result, we end up juggling with <strong>Selector Specificity</strong> and <strong>Order of Appearance</strong> as our ways to control the cascade ‚Äî if not having thrown in an <code>!important</code> somewhere. While doing so, we have to perform a fine balancing act between both of these aspects:</p><ul><li>Statements that use selectors of a high specificity can cause problems in case you want to override some properties later in the code. This often leads to even more heavy selectors or the use of <code>!important</code>, which in itself can raise even more issues.</li><li>Statements that use selectors of a low specificity can be overwritten too easily by statements that appear later in the code. This can especially be troublesome when loading third-party CSS after your own code.</li></ul><p>To help us tame those aspects of the Cascade, a few clever developers have come up with methodologies such as <a class="route-link" href="/bookshelf/css-tricks.com/bem-101.html"><strong>BEM</strong></a>, <a href="https://youtu.be/1OKZOV-iLj4?t=460" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-youtube" sizing="height"></i>ITCSS</a>, <a class="route-link" href="/bookshelf/smashingmagazine.com/an-introduction-to-object-oriented-css-oocss.html"><strong>OOCSS</strong></a>, etc. over time. These methodologies mainly lean on the following aspects:</p><ol><li>Structuring your code in such a way that you create some sort of logical order that works for most scenarios.</li><li>Keeping Selector Specificity as low as possible by leaning primarily to classes.</li></ol><figure><img src="https://bram.us/wordpress/wp-content/uploads/2021/09/itcss.jpg" alt="The almighty Inverted Triangle of CSS." tabindex="0" loading="lazy"><figcaption>The almighty Inverted Triangle of CSS.</figcaption></figure><p>While these approaches can certainly help you strike a balance between Selector Specificity and Order of Appearance, they are not 100% closing:</p><ul><li>The established order is never really enforced as Order of Appearance still determines things.</li><li>Selector Specificity still has the upper hand over the order of the layers</li></ul><hr><h2 id="introducing-cascade-layers" tabindex="-1"><a class="header-anchor" href="#introducing-cascade-layers"><span>Introducing Cascade Layers</span></a></h2><p>To make this balancing act more easy, there‚Äôs a new mechanism named Cascade Layers being worked on. It‚Äôs a CSS feature led by <a href="https://x.com/TerribleMia/" target="_blank" rel="noopener noreferrer">Miriam Suzanne (<i class="vp-icon fa-brands fa-x-twitter" sizing="height"></i><code>TerribleMia</code>)</a> ‚Äî <em>whom you might also know from <a class="route-link" href="/bookshelf/bram.us/css-container-queries-a-first-look-and-demo.html"><strong>CSS Container Queries</strong></a></em> ‚Äî and is part of the upcoming <a href="https://w3.org/TR/css-cascade-5/" target="_blank" rel="noopener noreferrer"><i class="vp-icon iconfont icon-w3c" sizing="height"></i>CSS Cascading and Inheritance Level 5 (<code>css-cascade-5</code>) Specification</a>.</p><p>With Cascade Layers you can split your CSS into several layers via the <code>@layer</code> at-rule. As per spec:</p><blockquote><p>In the same way that Origins provide a balance of power between user and author styles, Cascade Layers provide a structured way to organize and balance concerns within a single Origin.</p></blockquote><p>Because of its unique position in the Cascade, using Layers comes with a few benefits that give us developers more control over the Cascade.</p><figure><img src="https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-cascade-layers-bramus.png" alt="The new CSS Cascade with Layers added to it" tabindex="0" loading="lazy"><figcaption>The new CSS Cascade with Layers added to it</figcaption></figure><p>Let‚Äôs dive in with some code examples, explaining the benefits along the way.</p><p>::: critical üö®</p><p>Before we continue: try and forget any assumption you have about ‚Äúlayers in CSS‚Äù. <strong>By simply looking at their name, it‚Äôs easy to confuse Cascade Layers with layering via <code>z-index</code> or the <em>(deprecated)</em> HTML <code>&lt;layer&gt;</code> element.</strong> These things are not the same:</p><ul><li>Layering via <code>z-index</code> is about visually stacking boxes onto a webpage.</li><li>The HTML <code>&lt;layer&gt;</code> element is <a href="https://web.archive.org/web/20010210102906fw_/http://developer.netscape.com/docs/manuals/communicator/dynhtml/layers31.htm#1026297" target="_blank" rel="noopener noreferrer">ancient history</a>.</li><li>Cascade Layers is about structuring your CSS Code and controlling the CSS Cascade.</li></ul><p>:::</p><h3 id="creating-a-cascade-layer" tabindex="-1"><a class="header-anchor" href="#creating-a-cascade-layer"><span>Creating a Cascade Layer</span></a></h3><p>A Cascade Layer can be declared in several ways:</p><ol><li>Using the <code>@layer</code> <em>block</em> at-rule, with styles assigned immediately to it:</li></ol><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@layer</span> reset</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">*</span> <span class="token punctuation">{</span> <span class="token comment">/* Poor Man&#39;s Reset */</span></span>
<span class="line">    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>Using the <code>@layer</code> <em>statement</em> at-rule, without any styles assigned:</li></ol><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@layer</span> reset<span class="token punctuation">;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="3"><li>Using @import with the <code>layer</code> keyword or <code>layer()</code> function:</li></ol><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@import</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>reset.css<span class="token punctuation">)</span></span> <span class="token function">layer</span><span class="token punctuation">(</span>reset<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Each of these standalone examples, creates a Cascade Layer named <code>reset</code>.</p><div class="hint-container info"><p class="hint-container-title">üí°</p><p>A possible 4th way is still being worked on: by means of an attribute on a <code>&lt;link&gt;</code> element. See <a href="https://github.com/w3c/csswg-drafts/issues/5853" target="_blank" rel="noopener noreferrer">CSSWG Issue #5853 (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>w3c/csswg-drafts</code>)</a>.</p></div><h3 id="managing-layer-order" tabindex="-1"><a class="header-anchor" href="#managing-layer-order"><span>Managing Layer Order</span></a></h3><p>Cascade layers are sorted by the order in which they first are declared.</p><p>In the example below we create four layers: <code>reset</code>, <code>base</code>, <code>theme</code>, and <code>utilities</code>.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@layer</span> reset</span> <span class="token punctuation">{</span> <span class="token comment">/* Create 1st layer named ‚Äúreset‚Äù */</span></span>
<span class="line">  <span class="token selector">*</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> base</span> <span class="token punctuation">{</span> <span class="token comment">/* Create 2nd layer named ‚Äúbase‚Äù */</span></span>
<span class="line">  ‚Ä¶</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> theme</span> <span class="token punctuation">{</span> <span class="token comment">/* Create 3rd layer named ‚Äútheme‚Äù */</span></span>
<span class="line">  ‚Ä¶</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> utilities</span> <span class="token punctuation">{</span> <span class="token comment">/* Create 4th layer named ‚Äúutilities‚Äù */</span></span>
<span class="line">  ‚Ä¶</span>
<span class="line"><span class="token punctuation">}</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Following their declaration order, the Layer Order becomes:</p><ol><li><code>reset</code></li><li><code>base</code></li><li><code>theme</code></li><li><code>utilities</code></li></ol><figure><img src="https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-layer-order-bramus.png" alt="Cascade layers are sorted by the order in which they first are declared" tabindex="0" loading="lazy"><figcaption>Cascade layers are sorted by the order in which they first are declared</figcaption></figure><p>When re-using the name of a Layer, styles will be appended to the already existing Layer. The order of the Layers remains the same, as it‚Äôs only the first appearance which determines the order:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@layer</span> reset</span> <span class="token punctuation">{</span> <span class="token comment">/* Create 1st layer named ‚Äúreset‚Äù */</span></span>
<span class="line">  ‚Ä¶</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> base</span> <span class="token punctuation">{</span> <span class="token comment">/* Create 2nd layer named ‚Äúbase‚Äù */</span></span>
<span class="line">  ‚Ä¶</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> theme</span> <span class="token punctuation">{</span> <span class="token comment">/* Create 3rd layer named ‚Äútheme‚Äù */</span></span>
<span class="line">  ‚Ä¶</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> utilities</span> <span class="token punctuation">{</span> <span class="token comment">/* Create 4th layer named ‚Äúutilities‚Äù */</span></span>
<span class="line">  ‚Ä¶</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> base</span> <span class="token punctuation">{</span> <span class="token comment">/* Append to existing layer named ‚Äúbase‚Äù */</span></span>
<span class="line">  ‚Ä¶</span>
<span class="line"><span class="token punctuation">}</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The fact that the Layer order remains the same when re-using a Layer name makes the <code>@layer</code> statement at-rule syntax darn handy. Using it, you can establish Layer Order upfront, and append all CSS later to it:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@layer</span> reset<span class="token punctuation">;</span></span>     <span class="token comment">/* Create 1st layer named ‚Äúreset‚Äù */</span></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> base<span class="token punctuation">;</span></span>      <span class="token comment">/* Create 2nd layer named ‚Äúbase‚Äù */</span></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> theme<span class="token punctuation">;</span></span>     <span class="token comment">/* Create 3rd layer named ‚Äútheme‚Äù */</span></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> utilities<span class="token punctuation">;</span></span> <span class="token comment">/* Create 4th layer named ‚Äúutilities‚Äù */</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> reset</span> <span class="token punctuation">{</span> <span class="token comment">/* Append to layer named ‚Äúreset‚Äù */</span></span>
<span class="line">  ‚Ä¶</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> theme</span> <span class="token punctuation">{</span> <span class="token comment">/* Append to layer named ‚Äútheme‚Äù */</span></span>
<span class="line">  ‚Ä¶</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> base</span> <span class="token punctuation">{</span> <span class="token comment">/* Append to layer named ‚Äúbase‚Äù */</span></span>
<span class="line">  ‚Ä¶</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> theme</span> <span class="token punctuation">{</span> <span class="token comment">/* Append to layer named ‚Äútheme‚Äù */</span></span>
<span class="line">  ‚Ä¶</span>
<span class="line"><span class="token punctuation">}</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Heck, you can write it even shorter, using a comma-separated list of Layer Names:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@layer</span> reset<span class="token punctuation">,</span> base<span class="token punctuation">,</span> theme<span class="token punctuation">,</span> utilities<span class="token punctuation">;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">üî• Best Practice</p><p>To keep control over Layer Order, it‚Äôs recommended to declare all your layers upfront by using this one-line syntax, and ‚Äîonce the order is established‚Äî then append styles to them.</p></div><h3 id="cascade-layers-and-the-cascade" tabindex="-1"><a class="header-anchor" href="#cascade-layers-and-the-cascade"><span>Cascade Layers and the Cascade</span></a></h3><p>In the Cascade <em>(the algorithm)</em>, Layers get a higher precedence than Specificity and Order of Appearance. So the criteria of the Cascade become this <em>(in order)</em>:</p><ol><li>Origin and Importance</li><li>Context</li><li>Style Attribute</li><li><strong>Layers</strong></li><li>Specificity</li><li>Order of Appearance</li></ol><figure><img src="https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-cascade-layers-bramus.png" alt="The new CSS Cascade with Layers added to it" tabindex="0" loading="lazy"><figcaption>The new CSS Cascade with Layers added to it</figcaption></figure><p>When evaluating the Layers criterion, the Cascade will look at the Layer Order to determine the winning declaration. Declarations whose cascade layer is last, will win from declarations in earlier-declared Layers <em>(cfr. how Order of Appearance works: last one wins)</em>.</p><blockquote><p>Cascade layers (like declarations) are ordered by order of appearance. When comparing declarations that belong to different layers, then for normal rules the declaration whose cascade layer is last wins [‚Ä¶]</p></blockquote><figure><img src="https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-layers-determine-winner-bramus.png" alt="How the Cascade evaluates Layers" tabindex="0" loading="lazy"><figcaption>How the Cascade evaluates Layers</figcaption></figure><p>Take this snippet from earlier:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@layer</span> reset<span class="token punctuation">,</span> base<span class="token punctuation">,</span> theme<span class="token punctuation">,</span> utilities<span class="token punctuation">;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>In total we create 4 layers, in this order:</p><ol><li><code>reset</code></li><li><code>base</code></li><li><code>theme</code></li><li><code>utilities</code></li></ol><p>For example: Competing declarations in the <code>theme</code> Layer <em>(3)</em> will win from declarations in the <code>base</code> <em>(2)</em> and <code>reset</code> <em>(1)</em> Layers because those Layers were declared before <code>theme</code>. Competing declarations in the <code>theme</code> Layer <em>(3)</em> however won‚Äôt win from those in <code>utilities</code> <em>(4)</em>, as that Layer has been declared later.</p><p><strong>Once a winning declaration has been determined via Layer Order, the Cascade won‚Äôt even check Specificity or Order of Appearance for those declarations anymore. This is because Layers is a separate and higher ranked criterion of the Cascade.</strong></p><p>Practical example:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@import</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>reset.css<span class="token punctuation">)</span></span> <span class="token function">layer</span><span class="token punctuation">(</span>reset<span class="token punctuation">)</span><span class="token punctuation">;</span></span> <span class="token comment">/* 1st layer */</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> base</span> <span class="token punctuation">{</span> <span class="token comment">/* 2nd layer */</span></span>
<span class="line">  <span class="token selector">form input</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">font-size</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span> </span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> theme</span> <span class="token punctuation">{</span> <span class="token comment">/* 3rd layer */</span></span>
<span class="line">  <span class="token selector">input</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">font-size</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Although the <code>input</code>-selector <em>(Specificity <code>0,0,1</code>)</em> used on line #10 is less specific than the <code>form input</code>-selector <em>(Specificity <code>0,0,2</code>)</em> from line #4, the declaration on line #10 will win because the <code>theme</code> Layer <em>(3)</em> is ordered after the <code>base</code> layer <em>(2)</em>.</p><div class="hint-container note"><p class="hint-container-title">üî•</p><p>Because later-declared Layers always win from earlier-declared Layers, you ‚Äîas a developer‚Äî don‚Äôt need to worry about the Specificity nor Order of Appearance that is used in those other Layers: it‚Äôs the Layer Order that dictates who the winner in case of conflict is.</p><p>This also means that you can easily move Layers around, knowing that their Layer Order ‚Äîand not the Specificity nor Order of Appearance‚Äî will determine things.</p></div><div class="hint-container warning"><p class="hint-container-title">‚ÄºÔ∏è</p><p>Do note that this doesn‚Äôt mean that Specificity and Order of Appearance are no longer important. These two criteria still are, but only inside one and the same Layer. When comparing declarations between Layers, these two criteria can be ignored.</p></div><hr><h2 id="intermediate-summary" tabindex="-1"><a class="header-anchor" href="#intermediate-summary"><span>Intermediate Summary</span></a></h2><p>If you were able to follow along there, this intermediate summary should make sense:</p><ul><li>With Cascade Layers you can split your CSS into several layers.</li><li>Upon creating a Layer with <code>@layer</code>, you also determine the Layer Order.</li><li>Re-using Layer names will append to the already created Layer, without altering Layer Order.</li><li>When evaluating Layers, the Cascade <em>(the algorithm)</em> will have declarations placed in later-declared Layers win from declarations in early-declared Layers (i.e. <em>‚ÄúLast Layer Wins‚Äù</em>).</li><li>The Cascade evaluates Layers before Specificity and Order Of Appearance. That way you no longer need to worry about these two criteria for CSS found in separate Layers, as Layer Order will already have determined the winning declaration.</li></ul><p>Cool, right?! ü§©</p><div class="hint-container info"><p class="hint-container-title">üíÅ‚Äç‚ôÇÔ∏è</p><p>Like what you see so far? Happen to be conference or meetup organiser? Feel free to <a href="https://bram.us/speaking-training/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>contact me to come speak at your event</a>, with a talk covering the contents of this post.</p></div><hr><h2 id="details-you-need-to-know" tabindex="-1"><a class="header-anchor" href="#details-you-need-to-know"><span>Details you need to know</span></a></h2><p>There‚Äôs a few details that one needs to know about the inner workings of Cascade Layers.</p><h3 id="unlayered-styles-come-first-last-in-the-layer-order" tabindex="-1"><a class="header-anchor" href="#unlayered-styles-come-first-last-in-the-layer-order"><span>Unlayered Styles come <sub>first</sub> last in the Layer Order</span></a></h3><div class="hint-container note"><p class="hint-container-title">Update 2021.10.07</p><p>The CSS Working Group <a href="https://github.com/w3c/csswg-drafts/issues/6284#issuecomment-937262197" target="_blank" rel="noopener noreferrer">has decided (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>w3c/csswg-drafts</code>)</a> that Unlayered Styles should come last <em>(instead of first as it was specced before)</em>. This post has been updated accordingly.</p></div><p>Styles that are not defined in a Cascade Layer will be collected in an implicit layer. This implicit layer will be positioned <sub>first</sub> last in the Layer Order.</p><figure><img src="https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-unlayered-styles-revised-bramus.png" alt="Unlayered Styles come last in the Layer Order" tabindex="0" loading="lazy"><figcaption>Unlayered Styles come last in the Layer Order</figcaption></figure><p>Because of this position, Unlayered Styles will always override styles declared in Layers.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@import</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>reset.css<span class="token punctuation">)</span></span> <span class="token function">layer</span><span class="token punctuation">(</span>reset<span class="token punctuation">)</span><span class="token punctuation">;</span></span> <span class="token comment">/* 1st layer */</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/* Some Unlayered Styles */</span></span>
<span class="line"><span class="token selector">h1</span> <span class="token punctuation">{</span> <span class="token property">color</span><span class="token punctuation">:</span> hotpink<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> base</span> <span class="token punctuation">{</span> <span class="token comment">/* 2nd layer */</span></span>
<span class="line">  <span class="token selector">h1</span> <span class="token punctuation">{</span> <span class="token property">font-family</span><span class="token punctuation">:</span> ‚Ä¶ <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> theme</span> <span class="token punctuation">{</span> <span class="token comment">/* 3rd layer */</span></span>
<span class="line">  <span class="token selector">body h1</span> <span class="token punctuation">{</span> <span class="token property">color</span><span class="token punctuation">:</span> rebeccapurple<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> utilities</span> <span class="token punctuation">{</span> <span class="token comment">/* 4th layer */</span></span>
<span class="line">  <span class="token selector">[hidden]</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The Layer Order for this snippet looks like this:</p><ol><li><code>reset</code></li><li><code>base</code></li><li><code>theme</code></li><li><code>utilities</code></li><li><em>(unlayered styles)</em></li></ol><p>The result from the example above will be that the <code>h1</code> will be colored <code>hotpink</code>, even though the unlayered styles come earlier the Source Order and the used selector in <code>theme</code> Layer has a higher Specificity.</p><div class="hint-container info"><p class="hint-container-title">üí°</p><p>In the future we might gain the ability to control the layer position of these unlayered declarations. This is being tracked in <a href="https://github.com/w3c/csswg-drafts/issues/6323" target="_blank" rel="noopener noreferrer">CSSWG Issue #6323 (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>w3c/csswg-drafts</code>)</a></p></div><h3 id="naming-a-layer-is-optional" tabindex="-1"><a class="header-anchor" href="#naming-a-layer-is-optional"><span>Naming a Layer is optional</span></a></h3><p>Cascade Layers can also be created without giving them a name. These are called ‚ÄúAnonymous Layers‚Äù.</p><ol><li>Using the <code>@layer</code> <em>block</em> at-rule, with styles assigned immediately to it</li></ol><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@layer</span></span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">*</span> <span class="token punctuation">{</span> <span class="token comment">/* Poor Man&#39;s Reset */</span></span>
<span class="line">    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">2. Using `<span class="token atrule"><span class="token rule">@import</span>`<span class="token punctuation">:</span></span>
<span class="line"></span>
<span class="line">```css</span>
<span class="line"><span class="token atrule"><span class="token rule">@import</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>reset.css<span class="token punctuation">)</span></span> layer<span class="token punctuation">;</span></span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>A disadvantage of not using a name is that you can‚Äôt append to these anonymous layers:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@layer</span></span> <span class="token punctuation">{</span> <span class="token comment">/* layer 1 */</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span></span> <span class="token punctuation">{</span> <span class="token comment">/* layer 2 */</span> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@import</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>base-forms.css<span class="token punctuation">)</span></span> layer<span class="token punctuation">;</span></span> <span class="token comment">/* layer 1 */</span></span>
<span class="line"><span class="token atrule"><span class="token rule">@import</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>base-links.css<span class="token punctuation">)</span></span> layer<span class="token punctuation">;</span></span> <span class="token comment">/* layer 2 */</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">üí°</p><p>Using the <code>@layer</code> <em>statement</em> at-rule without a name (e.g. <code>@layer;</code>) is possible, but not mentioned as it‚Äôs a useless statement to make:</p><ul><li>It has no content to begin with</li><li>You can‚Äôt append extra content since you can‚Äôt refer to it.</li></ul></div><h3 id="layers-can-be-nested" tabindex="-1"><a class="header-anchor" href="#layers-can-be-nested"><span>Layers can be nested</span></a></h3><p>It‚Äôs perfectly fine to nest <code>@layer</code> statements.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@layer</span> base</span> <span class="token punctuation">{</span> <span class="token comment">/* 1st Layer */</span></span>
<span class="line">  <span class="token selector">p</span> <span class="token punctuation">{</span> <span class="token property">max-width</span><span class="token punctuation">:</span> 70ch<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> framework</span> <span class="token punctuation">{</span> <span class="token comment">/* 2nd Layer */</span></span>
<span class="line">  <span class="token atrule"><span class="token rule">@layer</span> base</span> <span class="token punctuation">{</span> <span class="token comment">/* 1st Child Layer inside 2nd Layer */</span></span>
<span class="line">    <span class="token selector">p</span> <span class="token punctuation">{</span> <span class="token property">margin-block</span><span class="token punctuation">:</span> 0.75em<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token atrule"><span class="token rule">@layer</span> theme</span> <span class="token punctuation">{</span> <span class="token comment">/* 2nd Child Layer inside 2nd Layer */</span></span>
<span class="line">    <span class="token selector">p</span> <span class="token punctuation">{</span> <span class="token property">color</span><span class="token punctuation">:</span> #222<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In this example there‚Äôs two outer layers:</p><ol><li><code>base</code></li><li><code>framework</code></li></ol><p>The <code>framework</code> layer itself also contains two layers:</p><ol><li><code>base</code></li><li><code>theme</code></li></ol><div class="hint-container info"><p class="hint-container-title">üí°</p><p>The re-use of the name <code>base</code> does not conflict here, as that 2nd <code>base</code> is part of the <code>framework</code> layer. Yes, the names are scoped to their surrounding outer-layer <em>(if any)</em></p></div><p>Representing the Layers as one combined tree, it would look like this:</p><ol><li><code>base</code></li><li><code>framework</code><ol><li><code>base</code></li><li><code>theme</code></li></ol></li></ol><figure><img src="https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-nested-layers-bramus.png" alt="Layers can be nested" tabindex="0" loading="lazy"><figcaption>Layers can be nested</figcaption></figure><p>To refer to a Layer that is contained inside an other Layer, use it‚Äôs full name which uses the period to determine the hierarchy, e.g. <code>framework.theme</code>.</p><p>The flattened Layer Tree for this code example would then look like this:</p><ol><li><code>base</code></li><li><code>framework.base</code></li><li><code>framework.theme</code></li></ol><p>To append styles to a nested Layer, you need to refer to it using this full name:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@layer</span> framework</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token atrule"><span class="token rule">@layer</span> default</span> <span class="token punctuation">{</span></span>
<span class="line">     <span class="token selector">p</span> <span class="token punctuation">{</span> <span class="token property">margin-block</span><span class="token punctuation">:</span> 0.75em<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token atrule"><span class="token rule">@layer</span> theme</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token selector">p</span> <span class="token punctuation">{</span> <span class="token property">color</span><span class="token punctuation">:</span> #222<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> framework.theme</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">/* These styles will be added to the theme layer inside the framework layer */</span></span>
<span class="line">  <span class="token selector">blockquote</span> <span class="token punctuation">{</span> <span class="token property">color</span><span class="token punctuation">:</span> rebeccapurple<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="a-few-more-notes-caveats" tabindex="-1"><a class="header-anchor" href="#a-few-more-notes-caveats"><span>A few more notes / caveats</span></a></h2><p>If you still haven‚Äôt had enough, there are a few extra things worth mentioning.</p><p>üòµ‚Äçüí´ Already had enough? Feel free to skip this part and <a href="#browser-support">immediately jump to Browser Support</a> as it becomes pretty advanced/complicated.</p><h3 id="cascade-layers-and-the-use-of-important" tabindex="-1"><a class="header-anchor" href="#cascade-layers-and-the-use-of-important"><span>Cascade Layers and the use of <code>!important</code></span></a></h3><p>When evaluating the Origin criterion, the Cascade orders the several Origins as follows <em>(ranked from high to low)</em>:</p><ol><li><em>Transitions</em></li><li>Important User-Agent</li><li>Important User</li><li>Important Author</li><li><em>Animations</em></li><li>Normal Author</li><li>Normal User</li><li>Normal User-Agent</li></ol><p>Notice how Origins with <code>!important</code> have the reverse order of their normal <em>(i.e. non-important)</em> counterpart? That‚Äôs because of how CSS works:</p><blockquote><p>When a declaration is marked !important, its weight in the cascade increases and inverts the order of precedence.</p></blockquote><p>This inversion-rule is also applied declarations in Cascade Layers: declarations with <code>!important</code> annotation will be put in the ‚ÄúImportant Author‚Äù Origin, but the Layers will have the inverse order when compared to the ‚ÄúNormal Author‚Äù Origin.</p><figure><img src="https://bram.us/wordpress/wp-content/uploads/2021/09/css-cascade-layers-important-bramus.png" alt="Cascade Layers vs. use of " tabindex="0" loading="lazy"><figcaption>Cascade Layers vs. use of <code>!important</code></figcaption></figure><p>Winging back to our four layers from earlier:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@layer</span> reset<span class="token punctuation">,</span> base<span class="token punctuation">,</span> theme<span class="token punctuation">,</span> utilities<span class="token punctuation">;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Normal declarations in these layers all go in the ‚ÄúNormal Author‚Äù Origin, and will be ordered as such:</p><ol><li>Normal <code>reset</code> Layer</li><li>Normal <code>base</code> Layer</li><li>Normal <code>theme</code> Layer</li><li>Normal <code>utilities</code> Layer</li></ol><p>Important declarations in these layers however all will go in the ‚ÄúImportant Author‚Äù Origin, and will be ordered in reverse:</p><ol><li>Important <code>utilities</code> Layer</li><li>Important <code>theme</code> Layer</li><li>Important <code>base</code> Layer</li><li>Important <code>reset</code> Layer</li></ol><p>Because <em>‚ÄúNormal Unlayered Styles‚Äù</em> implicitly go last, this also means that <em>‚ÄúImportant Unlayered Styles‚Äù</em> will go first then.</p><div class="hint-container info"><p class="hint-container-title">üí°</p><p>So yes, an <code>!important</code> declaration inside a layer will win from an <code>!important</code> declaration inside Unlayered Styles.</p></div><h3 id="cascade-layers-vs-media-queries-and-other-conditionals" tabindex="-1"><a class="header-anchor" href="#cascade-layers-vs-media-queries-and-other-conditionals"><span>Cascade Layers vs. Media Queries <em>(and other conditionals)</em></span></a></h3><p>When a <code>@layer</code> is nested inside a Media Query (or any other conditional), and the condition does not evaluate to <code>true</code>, the <code>@layer</code> will be not be taken into account for the Layer Order. Should the Media Query/Conditional evaluate to <code>true</code> later on ‚Äî because of the screen size changing for example ‚Äî Layer Order will be recalculated.</p><p>For Example:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 30em<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token atrule"><span class="token rule">@layer</span> layout</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token selector">.title</span> <span class="token punctuation">{</span> <span class="token property">font-size</span><span class="token punctuation">:</span> x-large<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-color-scheme</span><span class="token punctuation">:</span> dark<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token atrule"><span class="token rule">@layer</span> theme</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token selector">.title</span> <span class="token punctuation">{</span> <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If the first Media Query matches <em>(based on viewport dimensions)</em>, then the <code>layout</code> layer will come first in the Layer Order. If only the <code>color-scheme</code> Preference Query matches, then <code>theme</code> will be the first layer.</p><p>Should both match, then the Layer Order will be <code>layout</code>, <code>theme</code>. If none matches no Layers are defined.</p><h3 id="cascade-layers-vs-name-defining-rules" tabindex="-1"><a class="header-anchor" href="#cascade-layers-vs-name-defining-rules"><span>Cascade Layers vs. ‚ÄúName-Defining Rules‚Äù</span></a></h3><p>Name-Defining Rules ‚Äî such as <code>@keyframes</code>, <a class="route-link" href="/bookshelf/bram.us/the-future-of-css-scroll-linked-animations-part-1.html"><strong><code>@scroll-timeline</code></strong></a>, <code>@font-face</code> ‚Äî follow Layer Order as you‚Äôd expect:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@layer</span> framework<span class="token punctuation">,</span> override<span class="token punctuation">;</span></span> <span class="token comment">/* Establish Layer Order */</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> framework</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token atrule"><span class="token rule">@keyframes</span> slide-left</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token selector">from</span> <span class="token punctuation">{</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">    <span class="token selector">to</span> <span class="token punctuation">{</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> -100%<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> override</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token atrule"><span class="token rule">@keyframes</span> slide-left</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token selector">from</span> <span class="token punctuation">{</span> <span class="token property">translate</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">    <span class="token selector">to</span> <span class="token punctuation">{</span> <span class="token property">translate</span><span class="token punctuation">:</span> -100% 0<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token selector">.sidebar</span> <span class="token punctuation">{</span> <span class="token property">animation</span><span class="token punctuation">:</span> slide-left 300ms<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The Layer Order looks like this:</p><ol><li><code>framework</code></li><li><code>override</code></li></ol><p>As the last layer wins, the <code>slide-left</code> Keyframes from the <code>override</code> Layer <em>(2)</em> ‚Äî the ones using <code>translate</code> ‚Äî will be used.</p><h3 id="no-interleaving-of-import-namespace-and-layer" tabindex="-1"><a class="header-anchor" href="#no-interleaving-of-import-namespace-and-layer"><span>No Interleaving of <code>@import</code>/<code>@namespace</code> and <code>@layer</code></span></a></h3><p>For parsing reasons <em>(see <a href="https://github.com/w3c/csswg-drafts/issues/6522" target="_blank" rel="noopener noreferrer">CSSWG Issue #6522 (<i class="vp-icon iconfont icon-github" sizing="height"></i><code>w3c/csswg-drafts</code>)</a>)</em> it‚Äôs not allowed to interleave <code>@layer</code> with <code>@import</code>/<code>@namespace</code> rules.</p><p>From the moment the CSS parser sees a <code>@layer</code> that follows an earlier <code>@import</code>, all subsequent <code>@import</code> rules after it will be ignored:</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@layer</span> default<span class="token punctuation">;</span></span></span>
<span class="line"><span class="token atrule"><span class="token rule">@import</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>theme.css<span class="token punctuation">)</span></span> <span class="token function">layer</span><span class="token punctuation">(</span>theme<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> components<span class="token punctuation">;</span></span> <span class="token comment">/* üëà This @layer statement here which comes after the @import above ‚Ä¶ */</span></span>
<span class="line"><span class="token atrule"><span class="token rule">@import</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>default.css<span class="token punctuation">)</span></span> <span class="token function">layer</span><span class="token punctuation">(</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span></span> <span class="token comment">/* ‚ùóÔ∏è ‚Ä¶ will make this @import rule (and any other that follow) be ignored. */</span></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">audio[controls]</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To counteract this, group your <code>@import</code> rules together.</p><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@layer</span> default<span class="token punctuation">;</span></span></span>
<span class="line"><span class="token atrule"><span class="token rule">@import</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>theme.css<span class="token punctuation">)</span></span> <span class="token function">layer</span><span class="token punctuation">(</span>theme<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>
<span class="line"><span class="token atrule"><span class="token rule">@import</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>default.css<span class="token punctuation">)</span></span> <span class="token function">layer</span><span class="token punctuation">(</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> components<span class="token punctuation">;</span></span></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">audio[controls]</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">üî• Best Practice</p><p>Should you rely on <code>@import</code> <em>(which you shouldn‚Äôt, as <a href="https://csswizardry.com/2018/11/css-and-network-performance/#avoid-import-in-css-files" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>it‚Äôs a performance hit</a>)</em> best is to:</p><ol><li>Establish a layer order upfront using <code>@layer</code> statement at-rules</li><li>Group your <code>@import</code>s after that</li><li>Append styles to already established layers using <code>@layer</code> block at-rules</li></ol><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line"><span class="token atrule"><span class="token rule">@layer</span> default<span class="token punctuation">,</span> theme<span class="token punctuation">,</span> components<span class="token punctuation">;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@import</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>theme.css<span class="token punctuation">)</span></span> <span class="token function">layer</span><span class="token punctuation">(</span>theme<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>
<span class="line"><span class="token atrule"><span class="token rule">@import</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>default.css<span class="token punctuation">)</span></span> <span class="token function">layer</span><span class="token punctuation">(</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token atrule"><span class="token rule">@layer</span> default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">audio[controls]</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><hr><h2 id="browser-support" tabindex="-1"><a class="header-anchor" href="#browser-support"><span>Browser Support</span></a></h2><p>I‚Äôm very happy to see that <strong>all browser vendors ~are working on adding~ have support for Cascade Layers ü•≥</strong>. <s>It‚Äôs all still experimental support, but given that the spec has matured since it got first proposed in 2019, things are looking very good to see it shipped by the end of this year / early next year.</s></p><h3 id="chromium-blink" tabindex="-1"><a class="header-anchor" href="#chromium-blink"><span>Chromium <em>(Blink)</em></span></a></h3><p>‚úÖ Supported in Chromium 99 and up</p><p>Was supported as an Experimental Feature in Chrome 96+ through the <code>--enable-blink-features=CSSCascadeLayers</code> <a href="https://chromium.org/developers/how-tos/run-chromium-with-flags" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-chrome" sizing="height"></i>run-time flag</a>. Starting with version 96.0.4661.0, you could toggle it via the <code>#enable-cascade-layers</code> feature flag in <code>chrome://flags/</code></p><h3 id="firefox-gecko" tabindex="-1"><a class="header-anchor" href="#firefox-gecko"><span>Firefox <em>(Gecko)</em></span></a></h3><p>‚úÖ Supported in Firefox 97 and up</p><p>Was supported as an Experimental Feature in Firefox 94+ <em>(current Canary)</em> by setting <code>layout.css.cascade-layers.enabled</code> to <code>true</code> via <code>about:config</code>.</p><h3 id="safari-webkit" tabindex="-1"><a class="header-anchor" href="#safari-webkit"><span>Safari <em>(WebKit)</em></span></a></h3><p>‚úÖ Supported in Safari 15.4 and up</p><p>Was supported as an Experimental Feature in Safari Technology Preview 133. Had to be enabled manually by using Safari‚Äôs App Menu in the Menu Bar and choose Develop ‚Üí Experimental Features ‚Üí CSS Cascade Layers.</p><p>The demo below ‚Äî by <a href="https://x.com/TerribleMia/" target="_blank" rel="noopener noreferrer">Miriam (<i class="vp-icon fa-brands fa-x-twitter" sizing="height"></i><code>TerribleMia</code>)</a> ‚Äî will show a green checkmark when <code>@layer</code> support is enabled.</p><div class="codepen-wrapper codepen-poweapY"><!----><span>See <a>OMG, Layers</a> by <a href="https://codepen.io/miriamsuzanne">miriamsuzanne</a> on <a href="https://codepen.io">CodePen</a>.</span></div><p>To stay up-to-date regarding browser support, you can follow these tracking issues:</p><ul><li>Chromium: <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1095765" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-chrome" sizing="height"></i>Issue #1095765</a></li><li>Firefox: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1699215" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-firefox" sizing="height"></i>Issue #1699215</a></li><li>Safari: <a href="https://bugs.webkit.org/show_bug.cgi?id=220779" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-safari" sizing="height"></i>Issue #220779</a></li></ul><hr><h2 id="in-closing" tabindex="-1"><a class="header-anchor" href="#in-closing"><span>In Closing</span></a></h2><p>With Cascade Layers coming, we developers will have more tools available to control the Cascade. The true power of Cascade Layers comes from its unique position in the Cascade: before Selector Specificity and Order Of Appearance. Because of that we don‚Äôt need to worry about the Selector Specificity of the CSS that is used in other Layers, nor about the order in which we load CSS into these Layers ‚Äî something that will come in very handy for larger teams or when loading in third-party CSS.</p><p>Personally I‚Äôm really looking forward to give Cascade Layers a try. Being able to enforce the ordering used in ITCSS at the language level for example, feels like a great win.</p><!-- TODO: add ARTICLE CARD --><a class="vp-card" href="https://chanhi2000.github.io/bookshelf/bram.us/the-future-of-css-cascade-layers-css-at-layer.html" target="_blank" style="background:rgba(17,17,17,0.2);"><img class="vp-card-logo" src="https://bramu.us/favicon.ico" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">The Future of CSS: Cascade Layers (CSS @layer)</div><hr><div class="vp-card-desc">When authoring CSS we have to carefully think about how we write and structure our code. Cascade Layers (CSS @layer) aim to ease this task.</div></div></a></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/chanhi2000/bookshelf/edit/main/src/bram.us/the-future-of-css-cascade-layers-css-at-layer.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/bookshelf/programming/css/articles/" aria-label="/programming/css/articles/"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->/programming/css/articles/</div></a><a class="route-link auto-link next" href="/bookshelf/bram.us/the-large-small-and-dynamic-viewports.html" aria-label="The Large, Small, and Dynamic Viewports"><div class="hint">Next<span class="arrow end"></span></div><div class="link">The Large, Small, and Dynamic Viewports<i class="vp-icon fa-brands fa-css3-alt" sizing="height"></i></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">MIT Licensed | Copyright ¬© 2022-present <a href="https://github.com/chanhi2000">Chan Hee Lee</a></div><div class="vp-copyright">Copyright ¬© 2026 Bramus! </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/bookshelf/assets/app-BItykJLQ.js" defer></script>
  </body>
</html>
