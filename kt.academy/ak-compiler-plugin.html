<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.24" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.94" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Kotlin Compiler Plugins","image":["https://kt.academy/_next/image?url=https%3A%2F%2Fmarcinmoskala.com%2Fadvanced-kotlin-book%2Fmanuscript%2Fresources%2Fcompiler_frontend_backend.png&w=1080&q=75","https://kt.academy/_next/image?url=https%3A%2F%2Fmarcinmoskala.com%2Fadvanced-kotlin-book%2Fmanuscript%2Fresources%2Fcompiler_bckend_ir.png&w=1080&q=75","https://kt.academy/_next/image?url=https%3A%2F%2Fmarcinmoskala.com%2Fadvanced-kotlin-book%2Fmanuscript%2Fresources%2Fbackend_plugin_place.png&w=1080&q=75","https://kt.academy/_next/image?url=https%3A%2F%2Fmarcinmoskala.com%2Fadvanced-kotlin-book%2Fmanuscript%2Fresources%2Fplugins_folder.png&w=1080&q=75"],"datePublished":"2025-03-03T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"Marcin Moskała","url":"https://kt.academy/user/marcinmoskala"}]}</script><meta property="og:url" content="https://chanhi2000.github.io/bookshelf/kt.academy/ak-compiler-plugin.html"><meta property="og:site_name" content="📚Bookshelf"><meta property="og:title" content="Kotlin Compiler Plugins"><meta property="og:description" content="Article(s) > Kotlin Compiler Plugins"><meta property="og:type" content="article"><meta property="og:image" content="https://marcinmoskala.com/advanced-kotlin-book/promotion/12_compiler_plugin.jpg"><meta property="og:locale" content="en-US"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:src" content="https://marcinmoskala.com/advanced-kotlin-book/promotion/12_compiler_plugin.jpg"><meta name="twitter:image:alt" content="Kotlin Compiler Plugins"><meta property="article:author" content="Marcin Moskała"><meta property="article:tag" content="kotlin"><meta property="article:tag" content="java"><meta property="article:tag" content="kt.academy"><meta property="article:tag" content="blog"><meta property="article:published_time" content="2025-03-03T00:00:00.000Z"><link rel="icon" href="/bookshelf/assets/icon/favicon.svg"><title>Kotlin Compiler Plugins | 📚Bookshelf</title><meta name="description" content="Article(s) > Kotlin Compiler Plugins">
    <link rel="preload" href="/bookshelf/assets/style-DmRYlEXZ.css" as="style"><link rel="stylesheet" href="/bookshelf/assets/style-DmRYlEXZ.css">
    
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/bookshelf/" aria-label="Take me home"><img class="vp-nav-logo" src="/bookshelf/assets/icon/favicon.svg" alt><!----><span class="vp-site-name hide-in-pad">📚Bookshelf</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/bookshelf/news.html" aria-label><!--[--><i class="vp-icon fas fa-rss" sizing="height"></i><!--]--><!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-keyboard" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/hackingwithswift.com/" aria-label="hackingwithswift.com"><!--[--><img class="vp-icon" src="https://hackingwithswift.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->hackingwithswift.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fcc/" aria-label="freecodecamp.org"><!--[--><img class="vp-icon" src="https://cdn.freecodecamp.org/universal/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->freecodecamp.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/kodeco.com/" aria-label="kodeco.com"><!--[--><img class="vp-icon" src="https://kodeco.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->kodeco.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.kotzilla.io/" aria-label="blog.kotzilla.io"><!--[--><img class="vp-icon" src="https://blog.kotzilla.io/hubfs/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.kotzilla.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/bookshelf/kt.academy/" aria-label="kt.academy"><!--[--><img class="vp-icon" src="https://kt.academy/logo.png" alt aria-hidden no-view sizing="both"><!--]-->kt.academy<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/droidcon.com/" aria-label="droidcon.com"><!--[--><img class="vp-icon" src="https://droidcon.com/wp-content/uploads/2021/07/favicon-300x300.png" alt aria-hidden no-view sizing="both"><!--]-->droidcon.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/outcomeschool.com/" aria-label="outcomeschool.com"><!--[--><img class="vp-icon" src="https://outcomeschool.com/static/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->outcomeschool.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/frontendmasters.com/" aria-label="frontendmasters.com"><!--[--><img class="vp-icon" src="https://frontendmasters.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->frontendmasters.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/css-tricks.com/" aria-label="css-tricks.com"><!--[--><img class="vp-icon" src="https://css-tricks.com/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->css-tricks.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/smashingmagazine.com/" aria-label="smashingmagazine.com"><!--[--><img class="vp-icon" src="https://smashingmagazine.com/images/favicon/favicon.svg" alt aria-hidden no-view sizing="both"><!--]-->smashingmagazine.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.logrocket.com/" aria-label="blog.logrocket.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/blog.logrocket.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->blog.logrocket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/realpython.com/" aria-label="realpython.com"><!--[--><img class="vp-icon" src="https://realpython.com/static/favicon.68cbf4197b0c.png" alt aria-hidden no-view sizing="both"><!--]-->realpython.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/digitalocean.com/" aria-label="digitalocean.com"><!--[--><img class="vp-icon" src="https://digitalocean.com/_next/static/media/favicon.594d6067.ico" alt aria-hidden no-view sizing="both"><!--]-->digitalocean.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/antonioleiva.com/" aria-label="antonioleiva.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/antonioleiva.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->antonioleiva.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/johnnyreilly.com/" aria-label="johnnyreilly.com"><!--[--><img class="vp-icon" src="https://johnnyreilly.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->johnnyreilly.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/code-maze.com/" aria-label="code-maze.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/code-maze.com/favicon.png" alt aria-hidden no-view sizing="both"><!--]-->code-maze.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/milanjovanovic.tech/" aria-label="milanjovanovic.tech"><!--[--><img class="vp-icon" src="https://milanjovanovic.tech/profile_favicon.png" alt aria-hidden no-view sizing="both"><!--]-->milanjovanovic.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/shopify.engineering/" aria-label="shopify.engineering"><!--[--><img class="vp-icon" src="https://cdn.shopify.com/static/shopify-favicon.png" alt aria-hidden no-view sizing="both"><!--]-->shopify.engineering<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devtoolstips.org/" aria-label="devtoolstips.org"><!--[--><img class="vp-icon" src="https://devtoolstips.org/assets/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devtoolstips.org<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/piccalil.li/" aria-label="piccalil.li"><!--[--><img class="vp-icon" src="https://piccalil.li/favicons/apple-touch-icon.png" alt aria-hidden no-view sizing="both"><!--]-->piccalil.li<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/sitepoint.com/" aria-label="sitepoint.com"><!--[--><img class="vp-icon" src="https://sitepoint.com/favicons/512x512.png" alt aria-hidden no-view sizing="both"><!--]-->sitepoint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/event-driven.io/" aria-label="event-driven.io"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/event-driven.io/favicon.jfif" alt aria-hidden no-view sizing="both"><!--]-->event-driven.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/packagemain.tech/" aria-label="packagemain.tech"><!--[--><img class="vp-icon" src="https://substack-post-media.s3.amazonaws.com/public/images/2ea54e25-eaa6-4630-bfc0-10b8cfdce894/apple-touch-icon-1024x1024.png" alt aria-hidden no-view sizing="both"><!--]-->packagemain.tech<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/gosolve.io/" aria-label="gosolve.io"><!--[--><img class="vp-icon" src="https://gosolve.io/wp-content/uploads/2022/03/cropped-ikona1-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->gosolve.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/towardsdatascience.com/" aria-label="towardsdatascience.com"><!--[--><img class="vp-icon" src="https://cdn-images-1.medium.com/v2/resize:fill:128:128/1*VzTUkfeGymHP4Bvav-T-lA.png" alt aria-hidden no-view sizing="both"><!--]-->towardsdatascience.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/douggregor.net/" aria-label="douggregor.net"><!--[--><i class="vp-icon fas fa-globe" sizing="both"></i><!--]-->douggregor.net<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/d2.naver.com/" aria-label="d2.naver.com"><!--[--><img class="vp-icon" src="/bookshelf/assets/image/d2.naver.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->d2.naver.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakao.com/" aria-label="tech.kakao.com"><!--[--><img class="vp-icon" src="https://www.kakaocorp.com/page/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakao.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tech.kakaopay.com/" aria-label="tech.kakaopay.com"><!--[--><img class="vp-icon" src="https://tech.kakaopay.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tech.kakaopay.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/fe-developers.kakaoent.com/" aria-label="fe-developers.kakaoent.com"><!--[--><img class="vp-icon" src="https://fe-developers.kakaoent.com/favicon-32x32.png?v=44803cb16c1e2debd3984cf2e8cb2ded" alt aria-hidden no-view sizing="both"><!--]-->fe-developers.kakaoent.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/yozm.wishket.com/" aria-label="yozm.wishket.com"><!--[--><img class="vp-icon" src="https://yozm.wishket.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->yozm.wishket.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/popit.kr/" aria-label="popit.kr"><!--[--><img class="vp-icon" src="https://popit.kr/wp-content/uploads/2016/08/favicon_32x32.png" alt aria-hidden no-view sizing="both"><!--]-->popit.kr<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/devkuma.com/" aria-label="devkuma.com"><!--[--><img class="vp-icon" src="https://devkuma.com/favicons/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->devkuma.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/blog.gangnamunni.com/" aria-label="blog.gangnamunni.com"><!--[--><img class="vp-icon" src="https://blog.gangnamunni.com/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->blog.gangnamunni.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/codingeverybody.kr/" aria-label="codingeverybody.kr"><!--[--><img class="vp-icon" src="https://codingeverybody.kr/wp-content/uploads/cropped-favicon-origin-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->codingeverybody.kr<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label><!--[--><i class="vp-icon fas fa-network-wired" sizing="height"></i><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/tecmint.com/" aria-label="tecmint.com"><!--[--><img class="vp-icon" src="https://tecmint.com/wp-content/uploads/2020/07/favicon.ico" alt aria-hidden no-view sizing="both"><!--]-->tecmint.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/docker.com/" aria-label="docker.com"><!--[--><img class="vp-icon" src="https://docker.com/app/uploads/2024/02/cropped-docker-logo-favicon-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->docker.com<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/learnk8s.io/" aria-label="learnk8s.io"><!--[--><img class="vp-icon" src="https://static.learnk8s.io/f7e5160d4744cf05c46161170b5c11c9.svg" alt aria-hidden no-view sizing="both"><!--]-->learnk8s.io<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/bookshelf/itsfoss.com/" aria-label="itsfoss.com"><!--[--><img class="vp-icon" src="https://itsfoss.com/content/images/size/w256h256/2022/12/android-chrome-192x192.png" alt aria-hidden no-view sizing="both"><!--]-->itsfoss.com<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/chanhi2000/articles" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-appearance-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-appearance-dropdown"><!----></div></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="vp-icon" src="https://kt.academy/logo.png" alt aria-hidden no-view sizing="both"><span class="vp-sidebar-title">kt.academy</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">2025</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kt.academy/interop-coroutines-to-callback.html" aria-label="Suspending functions or flows into callbacks"><!--[--><i class="vp-icon iconfont icon-kotlin" sizing="both"></i><!--]-->Suspending functions or flows into callbacks<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kt.academy/kmp-to-compose-guide.html" aria-label="Building Your First Kotlin Multiplatform App: From Setup to iOS App Store with Compose Multiplatform (2025 Guide)"><!--[--><i class="vp-icon iconfont icon-kotlin" sizing="both"></i><!--]-->Building Your First Kotlin Multiplatform App: From Setup to iOS App Store with Compose Multiplatform (2025 Guide)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kt.academy/interop-blocking-to-coroutines.html" aria-label="Calling blocking functions from suspending functions"><!--[--><i class="vp-icon iconfont icon-kotlin" sizing="both"></i><!--]-->Calling blocking functions from suspending functions<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kt.academy/interop-callbacks-to-coroutines.html" aria-label="How to turn callback functions into suspend functions or Flow"><!--[--><i class="vp-icon iconfont icon-kotlin" sizing="both"></i><!--]-->How to turn callback functions into suspend functions or Flow<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/bookshelf/kt.academy/ak-compiler-plugin.html" aria-label="Kotlin Compiler Plugins"><!--[--><i class="vp-icon iconfont icon-kotlin" sizing="both"></i><!--]-->Kotlin Compiler Plugins<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kt.academy/game-story-collection-processing-wasm.html" aria-label="The problems of Kotlin/Wasm I had when making a game"><!--[--><i class="vp-icon iconfont icon-kotlin" sizing="both"></i><!--]-->The problems of Kotlin/Wasm I had when making a game<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/bookshelf/kt.academy/modifier-order.html" aria-label="How modifiers order affects Compose UI appearance"><!--[--><i class="vp-icon fa-brands fa-android" sizing="both"></i><!--]-->How modifiers order affects Compose UI appearance<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2024</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2023</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><div class="page-cover"><img src="https://marcinmoskala.com/advanced-kotlin-book/promotion/12_compiler_plugin.jpg" alt no-view></div><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon iconfont icon-kotlin" sizing="height"></i>Kotlin Compiler Plugins</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://kt.academy/user/marcinmoskala" target="_blank" rel="noopener noreferrer">Marcin Moskała</a></span><span property="author" content="Marcin Moskała"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">3/3/25</span><meta property="datePublished" content="2025-03-03T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 11 min</span><meta property="timeRequired" content="PT11M"></span><span class="page-category-info" aria-label="Category🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color8" role>Java</span><span class="page-category-item color2" role>Kotlin</span><span class="page-category-item color8" role>Article(s)</span><!--]--><meta property="articleSection" content="Java,Kotlin,Article(s)"></span><span class="page-tag-info" aria-label="Tag🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8" role>blog</span><span class="page-tag-item color7" role>kt.academy</span><span class="page-tag-item color8" role>java</span><span class="page-tag-item color0" role>kotlin</span><!--]--><meta property="keywords" content="blog,kt.academy,java,kotlin"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="frontmatter-title-관련" tabindex="-1"><a class="header-anchor" href="#frontmatter-title-관련"><span>Kotlin Compiler Plugins 관련</span></a></h1><a class="route-link vp-card" href="/bookshelf/programming/java/articles/" style="background:rgba(10,10,10,0.2);"><img class="vp-card-logo" src="/bookshelf/images/ico-wind.svg" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Kotlin > Article(s)</div><hr><div class="vp-card-desc">Article(s)</div></div></a><nav class="table-of-contents"><ul><li><a aria-current="page" href="/bookshelf/kt.academy/ak-compiler-plugin.html#popular-compiler-plugins" class="router-link-active router-link-exact-active">Popular compiler plugins</a></li><li><a aria-current="page" href="/bookshelf/kt.academy/ak-compiler-plugin.html#making-all-classes-open" class="router-link-active router-link-exact-active">Making all classes open</a></li><li><a aria-current="page" href="/bookshelf/kt.academy/ak-compiler-plugin.html#changing-a-type" class="router-link-active router-link-exact-active">Changing a type</a></li><li><a aria-current="page" href="/bookshelf/kt.academy/ak-compiler-plugin.html#generate-function-wrappers" class="router-link-active router-link-exact-active">Generate function wrappers</a></li><li><a aria-current="page" href="/bookshelf/kt.academy/ak-compiler-plugin.html#example-plugin-implementations" class="router-link-active router-link-exact-active">Example plugin implementations</a></li><li><a aria-current="page" href="/bookshelf/kt.academy/ak-compiler-plugin.html#summary" class="router-link-active router-link-exact-active">Summary</a></li></ul></nav><hr><div class="vp-site-info" data-name="Kotlin Compiler Plugins"><a class="vp-site-info-navigator no-external-link-icon" title="Kotlin Compiler Plugins" href="https://kt.academy/ak-compiler-plugin" target="_blank"></a><div class="vp-site-info-preview" style="background:url(https://marcinmoskala.com/advanced-kotlin-book/promotion/12_compiler_plugin.jpg) center/cover no-repeat;"></div><div class="vp-site-info-detail"><img class="vp-site-info-logo" src="https://kt.academy/logo.png" alt loading="lazy" no-view><div class="vp-site-info-name">Kotlin Compiler Plugins</div><div class="vp-site-info-desc">All you need to know about Kotlin Compiler plugins.</div></div><!----></div><div class="hint-container info"><p class="hint-container-title">Info</p><p>This is a chapter from the book <a href="https://kt.academy/book/advanced_kotlin" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>Advanced Kotlin</a>. You can find it on <a href="https://leanpub.com/advanced_kotlin/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fas fa-globe" sizing="height"></i>LeanPub</a> or <a href="https://amazon.com/Advanced-Kotlin-Developers-Marcin-Moskala/dp/839668474X/" target="_blank" rel="noopener noreferrer"><i class="vp-icon fa-brands fa-amazon" sizing="height"></i>Amazon</a>.</p><p>The Kotlin Compiler is a program that compiles Kotlin code but is also used by the IDE to provide analytics for code completion, warnings, and much more. Like many programs, the Kotlin Compiler can use plugins that change its behavior. We define a Kotlin Compiler plugin by extending a special class, called an extension, and then register it using a registrar. Each extension is called by the compiler in a certain phase of its work, thereby potentially changing the result of this phase. For example, you can register a plugin that will be called when the compiler generates supertypes for a class, thus adding additional supertypes to the result. When we write a compiler plugin, we are limited to what the supported extensions allow us to do. We will discuss the currently available extensions soon, but let&#39;s start with some essential knowledge about how the compiler works.</p><hr><h2 id="compiler-frontend-and-backend" tabindex="-1"><a class="header-anchor" href="#compiler-frontend-and-backend"><span>Compiler frontend and backend</span></a></h2><p>Kotlin is a multiplatform language, which means the same code can be used to generate low-level code for different platforms. It is reasonable that Kotlin Compiler is divided into two big parts:</p><ul><li>Frontend, responsible for parsing and transforming Kotlin code into a representation that can be interpreted by the backend and used for Kotlin code analysis.</li><li>Backend, responsible for generating actual low-level code based on the representation received from the frontend.</li></ul><p>The compiler frontend is independent of the target, and its results can be reused when we compile a multiplatform module. However, there is a revolution going on at the moment because a new K2 frontend is replacing the older K1 frontend.</p><p>The compiler backend is specific to your compilation target, so there is a separate backend for JVM, JS, Native, and WASM. They have some shared parts, but they are essentially different.</p><figure><img src="https://kt.academy/_next/image?url=https%3A%2F%2Fmarcinmoskala.com%2Fadvanced-kotlin-book%2Fmanuscript%2Fresources%2Fcompiler_frontend_backend.png&amp;w=1080&amp;q=75" alt="Compiler frontend is responsible for parsing and analyzing Kotlin code and transforming it into a representation that is sent to the backend, on the basis of which the backend generates platform-specific files. The frontend is target-independent, but there are two frontends: older K1, and newer K2. The backend is target-specific." tabindex="0" loading="lazy"><figcaption>Compiler frontend is responsible for parsing and analyzing Kotlin code and transforming it into a representation that is sent to the backend, on the basis of which the backend generates platform-specific files. The frontend is target-independent, but there are two frontends: older K1, and newer K2. The backend is target-specific.</figcaption></figure><p>When you use Kotlin in an IDE like IntelliJ, the IDE shows you warnings, errors, component usages, code completions, etc., but IntelliJ itself doesn’t analyze Kotlin: all these features are based on communication with the Kotlin Compiler, which has a special API for IDEs, and the frontend is responsible for this communication.</p><p>Each backend variant shares a part that generates Kotlin <em>intermediate representation</em> from the representation provided by the frontend (in the case of K2, it is FIR, which means <em>frontend intermediate representation</em>). Platform-specific files are generated based on this representation.</p><figure><img src="https://kt.academy/_next/image?url=https%3A%2F%2Fmarcinmoskala.com%2Fadvanced-kotlin-book%2Fmanuscript%2Fresources%2Fcompiler_bckend_ir.png&amp;w=1080&amp;q=75" alt="Each backend shares a part that transforms the representation provided by the frontend into Kotlin intermediate representation, which is used to generate target-specific files." tabindex="0" loading="lazy"><figcaption>Each backend shares a part that transforms the representation provided by the frontend into Kotlin intermediate representation, which is used to generate target-specific files.</figcaption></figure><p>You can find detailed descriptions of how the compiler frontend and the compiler backend work in many presentations and articles, like those by Amanda Hinchman-Dominguez or Mikhail Glukhikh. I won’t go into detail here because we’ve already covered everything we need in order to talk about compiler plugins.</p><hr><h2 id="compiler-extensions" tabindex="-1"><a class="header-anchor" href="#compiler-extensions"><span>Compiler extensions</span></a></h2><p>Kotlin Compiler extensions are also divided into those for the frontend or the backend. All the frontend extensions start with the <code>Fir</code> prefix and end with the <code>Extension</code> suffix. Here is the complete list of the currently supported K2 extensions<sup class="footnote-ref"><a href="#footnote1">[1]</a><a class="footnote-anchor" id="footnote-ref1"></a></sup></p><ul><li><code>FirStatusTransformerExtension</code> - called when an element status (visibility, modifiers, etc.) is established and allows it to be changed. The All-open compiler plugin uses it to make all classes with appropriate annotations open by default (e.g., used by Spring Framework).</li><li><code>FirDeclarationGenerationExtension</code> - can specify additional declarations to be generated for a Kotlin file. Its different methods are called at different phases of compilation and allow the generation of different kinds of elements, like classes or methods. Used by many plugins, including the Kotlin Serialization plugin, to generate serialization methods.</li><li><code>FirAdditionalCheckersExtension</code> - allows the specification of additional checkers that will be called when the compiler checks the code; it can also report additional errors or warnings that can be visualized by IntelliJ.</li><li><code>FirSupertypeGenerationExtension</code> - called when the compiler generates supertypes for a class and allows additional supertypes to be added. For instance, if the class <code>A</code> inherits from <code>B</code> and implements <code>C</code>, and the extension decides it should also have supertypes <code>D</code> and <code>F</code>, then the compiler will consider <code>A</code> to have supertypes <code>B</code>, <code>C</code>, <code>D</code> and <code>F</code>. Used by many plugins, including the Kotlin Serialization plugin, which uses it to make all classes annotated with the <code>Serializer</code> annotation have an implicit <code>KSerializer</code> supertype with appropriate type arguments.</li><li><code>FirTypeAttributeExtension</code> - allows an attribute to be added to a type based on an annotation or determines an annotation based on an attribute. Used by the experimental Kotlin Assignment plugin, which allows a number type to be annotated as either positive or negative and then uses this information to throw an error if this contract is broken. Works with the code of libraries used by our project.</li><li><code>FirExpressionResolutionExtension</code> - can be used to add an implicit extension receiver when a function is called. Used by the experimental Kotlin Assignment plugin, which injects <code>Algebra&lt;T&gt;</code> as an implicit receiver if <code>injectAlgebra&lt;T&gt;()</code> is called.</li><li><code>FirSamConversionTransformerExtension</code> - called when the compiler converts a Java SAM interface to a Kotlin function type and allows the result type to be changed. Used by the <code>SAM-with-receiver compiler plugin</code> to generate a function type with a receiver instead of a regular function type for SAM interfaces with appropriate annotation.</li><li><code>FirAssignExpressionAltererExtension</code> - allows a variable assignment to be transformed into any kind of statement. Used by the experimental Kotlin Assignment plugin, which allows the assignment operator to be overloaded.</li><li><code>FirFunctionTypeKindExtension</code> - allows additional function types to be registered. Works with the code of libraries used by our project.</li><li><code>FirDeclarationsForMetadataProviderExtension</code> - currently allows additional declarations to be added in Kotlin metadata. Used by the Kotlin Serialization plugin to generate a deserialization constructor or a method to write itself. Its behavior might change in the future.</li><li><code>FirScriptConfiguratorExtension</code> - currently called when the compiler processes a script; it also allows the script configuration to be changed. Its behavior might change in the future.</li><li><code>FirExtensionSessionComponent</code> - currently allows additional extension session components to be added for a session. In other words, it allows a component to be registered so that it can be reused by different extensions. Used by many plugins. For instance, the Kotlin Serialization plugin uses it to register a component that keeps a cache of serializers in a file or KClass first from file annotation. Its behavior might change in the future.</li></ul><div class="hint-container note"><p class="hint-container-title">Note</p><p>Beware! In this chapter we only discuss K2 frontend extensions because the K1 frontend is deprecated and will be removed in the future. However, the K2 compiler frontend is currently not used by default. To use it, you need to have at least Kotlin version 1.9.0-Beta and add the <code>-Pkotlin.experimental.tryK2=true</code> compiler option.</p></div></div><p>As you can see, these plugins allow us to apply changes to compilation and analysis. They can be used to show a warning or break compilation with an error. They can also be used to change the visibility of specific elements, thus influencing the behavior of the resulting code and suggestions in IDE.</p><p>Regarding the backend, there is only one extension: <code>IrGenerationExtension</code>. It is used after IR (Kotlin intermediate representation) is generated from the FIR (frontend intermediate representation) but before it is used to generate platform-specific files. <code>IrGenerationExtension</code> is used to modify the IR tree. This means that <code>IrGenerationExtension</code> can change absolutely anything in the generated code, but using it is hard as we can easily introduce breaking changes, so it must be used with great care. Also, <code>IrGenerationExtension</code> cannot influence code analysis, so it cannot impact IDE suggestions, warnings, etc.</p><figure><img src="https://kt.academy/_next/image?url=https%3A%2F%2Fmarcinmoskala.com%2Fadvanced-kotlin-book%2Fmanuscript%2Fresources%2Fbackend_plugin_place.png&amp;w=1080&amp;q=75" alt="Backend plugin extensions are used after IR (Kotlin Intermediate Representation) is generated from the FIR (frontend intermediate representation), but before it is used to generate platform-specific files." tabindex="0" loading="lazy"><figcaption>Backend plugin extensions are used after IR (Kotlin Intermediate Representation) is generated from the FIR (frontend intermediate representation), but before it is used to generate platform-specific files.</figcaption></figure><p>I want to make it clear that the backend cannot influence IDE analysis. If you use <code>IrGenerationExtension</code> to add a method to a class, you won’t be able to call it directly in IntelliJ because it won’t recognize such a method, so you will only be able to call it using reflection. In contrast, a method added to a class using the frontend <code>FirDeclarationGenerationExtension</code> can be used directly because the IDE knows about its existence.</p><p>The majority of popular Kotlin plugins require multiple extensions, both frontend and backend. For instance, Kotlin Serialization uses backend extensions to generate all the functions for serialization and deserialization; on the other hand, it uses frontend extensions to add implicit supertypes, checks and declarations.</p><p>This is the essential knowledge about Kotlin Compiler plugins. To make it a bit more practical, let&#39;s take a look at a couple of examples.</p><hr><h2 id="popular-compiler-plugins" tabindex="-1"><a class="header-anchor" href="#popular-compiler-plugins"><span>Popular compiler plugins</span></a></h2><p>Many compiler plugins and libraries that use compiler plugins are already available. The most popular ones are:</p><ul><li>Kotlin Serialization: a plugin that generates serialization methods for Kotlin classes. It’s multiplatform and very efficient because it uses a compiler plugin instead of reflection.</li><li>Jetpack Compose: a popular UI framework that uses a compiler plugin to support its view element definitions. All the composable functions are transformed into a special representation that is then used by the framework to generate the UI.</li><li>Arrow Meta: a powerful plugin introducing support for features known from functional programming languages, like optics or refined types. It also supports Aspect Oriented Programming.</li><li>Parcelize: a plugin that generates <code>Parcelable</code> implementations for Kotlin classes. It uses a compiler plugin to add appropriate methods to existing classes.</li><li>All-open: a plugin that makes all classes with appropriate annotations open by default. The Spring Framework uses it to make all classes with <code>@Component</code> annotation open by default (to be able to create proxies for them).</li></ul><p>The majority of plugins use more than one extension, so let’s consider the simple Parcelize plugin, which uses only the following extensions:</p><ul><li><code>IrGenerationExtension</code> to generate functions and properties that are used under the hood.</li><li><code>FirDeclarationGenerationExtension</code> to generate the functions required for the project to compile.</li><li><code>FirAdditionalCheckersExtension</code> to show errors and warnings.</li></ul><p>Kotlin compiler plugins are defined in <i class="vp-icon iconfont icon-kotlin" sizing="height"></i><code>build.gradle(.kts)</code> in the plugins section:</p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="v-0" aria-selected="true"><i class="vp-icon iconfont icon-gradle" sizing="height"></i>build.gradle</button></div><!--[--><div class="vp-tab active" id="v-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title"><i class="vp-icon iconfont icon-gradle" sizing="height"></i>build.gradle</div><!--[--><div class="language-groovy line-numbers-mode" data-highlighter="prismjs" data-ext="groovy"><pre><code class="language-groovy"><span class="line">plugins <span class="token punctuation">{</span></span>
<span class="line">  id <span class="token string">&#39;kotlin-parcelize&#39;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- @tab <VPIcon icon="iconfont icon-kotlin"/>build.gradle.kts

```kotlin title="build.gradle.kts"
plugins {
  id("kotlin-parcelize")
}
``` --><!--]--></div><!--]--></div><!-- TODO: find why there's syntax error --><p>Some plugins are distributed as part of individual Gradle plugins.</p><hr><h2 id="making-all-classes-open" tabindex="-1"><a class="header-anchor" href="#making-all-classes-open"><span>Making all classes open</span></a></h2><p>We’ll start our journey with a simple task: make all classes open. This behavior is inspired by the AllOpen plugin, which opens all classes annotated with one of the specified annotations. However, our example will be simpler as we will just open all classes.</p><p>As a dependency, we only need <code>kotlin-compiler-embeddable</code> that offers us the classes we can use for defining plugins.</p><p>Just like in KSP or Annotation Processing, we need to add a file to <i class="vp-icon fas fa-folder-open" sizing="height"></i><code>resources/META-INF/services</code> with the registrar&#39;s name. The name of this file should be <code>org.jetbrains.kotlin.compiler.plugin.CompilerPluginRegistrar</code>, which is the fully qualified name of the <code>CompilerPluginRegistrar</code> class. Inside it, you should place the fully qualified name of your registrar class. In our case, this will be <code>com.marcinmoskala.AllOpenComponentRegistrar</code>.</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token comment">// org.jetbrains.kotlin.compiler.plugin.</span></span>
<span class="line"><span class="token comment">// CompilerPluginRegistrar</span></span>
<span class="line">com<span class="token punctuation">.</span>marcinmoskala<span class="token punctuation">.</span>AllOpenComponentRegistrar</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Our <code>AllOpenComponentRegistrar</code> registrar needs to register an extension registrar (we’ll call it <code>FirAllOpenExtensionRegistrar</code>), which registers our extension. Note that the registrar has access to the configuration so that we can pass parameters to our plugin, but we don’t need this configuration now. Our extension is just a class that extends <code>FirStatusTransformerExtension</code>; it has two methods: <code>needTransformStatus</code> and <code>transformStatus</code>. The former determines whether the transformation should be applied; the latter applies it. In our case, we apply our extension to all classes, and we change their status to open, regardless of what this status was before.</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token annotation builtin">@file:OptIn</span><span class="token punctuation">(</span>ExperimentalCompilerApi<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> AllOpenComponentRegistrar <span class="token operator">:</span> <span class="token function">CompilerPluginRegistrar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">fun</span> ExtensionStorage<span class="token punctuation">.</span><span class="token function">registerExtensions</span><span class="token punctuation">(</span></span>
<span class="line">        configuration<span class="token operator">:</span> CompilerConfiguration</span>
<span class="line">    <span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        FirExtensionRegistrarAdapter</span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">registerExtension</span><span class="token punctuation">(</span><span class="token function">FirAllOpenExtensionRegistrar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">val</span> supportsK2<span class="token operator">:</span> Boolean</span>
<span class="line">       <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> FirAllOpenExtensionRegistrar <span class="token operator">:</span> <span class="token function">FirExtensionRegistrar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">fun</span> ExtensionRegistrarContext<span class="token punctuation">.</span><span class="token function">configurePlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token operator">+</span><span class="token operator">::</span>FirAllOpenStatusTransformer</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token function">FirAllOpenStatusTransformer</span><span class="token punctuation">(</span></span>
<span class="line">    session<span class="token operator">:</span> FirSession</span>
<span class="line"><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">FirStatusTransformerExtension</span><span class="token punctuation">(</span>session<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">needTransformStatus</span><span class="token punctuation">(</span></span>
<span class="line">        declaration<span class="token operator">:</span> FirDeclaration</span>
<span class="line">    <span class="token punctuation">)</span><span class="token operator">:</span> Boolean <span class="token operator">=</span> declaration <span class="token keyword">is</span> FirRegularClass</span>
<span class="line"></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">transformStatus</span><span class="token punctuation">(</span></span>
<span class="line">        status<span class="token operator">:</span> FirDeclarationStatus<span class="token punctuation">,</span></span>
<span class="line">        declaration<span class="token operator">:</span> FirDeclaration</span>
<span class="line">    <span class="token punctuation">)</span><span class="token operator">:</span> FirDeclarationStatus <span class="token operator">=</span></span>
<span class="line">        status<span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span>modality <span class="token operator">=</span> Modality<span class="token punctuation">.</span>OPEN<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This is just a simplified version, but the actual AllOpen plugin is slightly more complicated as it only opens classes that are annotated with one of the specified annotations. For that, <code>FirAllOpenExtensionRegistrar</code> registers a plugin that is used by <code>FirAllOpenStatusTransformer</code> to determine if a specific class should be opened or not. If you are interested in the details, see the AllOpen plugin in the <code>plugins</code> folder in the Kotlin repository.</p><hr><h2 id="changing-a-type" tabindex="-1"><a class="header-anchor" href="#changing-a-type"><span>Changing a type</span></a></h2><p>Our following example will be the SAM-with-receiver compiler plugin, which changes the type of function types generated from SAM interfaces with appropriate annotations to function types with a receiver. It uses the <code>FirSamConversionTransformerExtension</code>, which is quite specific to this plugin because it is only called when a SAM interface is converted to a function type, and it allows the type that will be generated to be changed. This example is interesting because it adds a type that will be recognized by the IDE and can be used directly in code. The complete implementation can be found in the Kotlin repository in the <code>plugins/sam-with-receiver</code> folder, but here I only want to show a simplified implementation of this extension:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">class</span> <span class="token function">FirScriptSamWithReceiverConventionTransformer</span><span class="token punctuation">(</span></span>
<span class="line">    session<span class="token operator">:</span> FirSession</span>
<span class="line"><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">FirSamConversionTransformerExtension</span><span class="token punctuation">(</span>session<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">getCustomFunctionTypeForSamConversion</span><span class="token punctuation">(</span></span>
<span class="line">        function<span class="token operator">:</span> FirSimpleFunction</span>
<span class="line">    <span class="token punctuation">)</span><span class="token operator">:</span> ConeLookupTagBasedType<span class="token operator">?</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">val</span> containingClassSymbol <span class="token operator">=</span> function</span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">containingClassLookupTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">toFirRegularClassSymbol</span><span class="token punctuation">(</span>session<span class="token punctuation">)</span></span>
<span class="line">            <span class="token operator">?:</span> <span class="token keyword">return</span> <span class="token keyword">null</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">shouldTransform</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">val</span> parameterTypes <span class="token operator">=</span> function<span class="token punctuation">.</span>valueParameters</span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>returnTypeRef<span class="token punctuation">.</span>coneType <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>parameterTypes<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span></span>
<span class="line">            <span class="token function">createFunctionType</span><span class="token punctuation">(</span></span>
<span class="line">                <span class="token function">getFunctionType</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                parameters <span class="token operator">=</span> parameterTypes<span class="token punctuation">.</span><span class="token function">drop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                receiverType <span class="token operator">=</span> parameterTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                rawReturnType <span class="token operator">=</span> function<span class="token punctuation">.</span>returnTypeRef</span>
<span class="line">                    <span class="token punctuation">.</span>coneType</span>
<span class="line">            <span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">null</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// ...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If the <code>getCustomFunctionTypeForSamConversion</code> function doesn’t return <code>null</code>, it overrides the type that will be generated for a SAM interface. In our case, we determine whether the function should be transformed; if so, we create a function type with a receiver by using the <code>createFunctionType</code> function. There are builder functions that help us to create many elements that are represented in FIR. Examples include <code>buildSimpleFunction</code> or <code>buildRegularClass</code>, and most of them offer a simple DSL. Here, the <code>createFunctionType</code> function creates a function type with a receiver representation of type <code>ConeLookupTagBasedType</code>, which will replace automatically generated types from a SAM interface. In essence, this is how this plugin works.</p><hr><h2 id="generate-function-wrappers" tabindex="-1"><a class="header-anchor" href="#generate-function-wrappers"><span>Generate function wrappers</span></a></h2><p>Let&#39;s consider the following problem: Kotlin suspend functions can only be called in Kotlin code. This means that if you want to call a suspend function from Java, you can use, for example, <code>runBlocking</code> to wrap it in a regular function that calls the suspend function in a coroutine.</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token function">suspendFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token comment">/* ... */</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">fun</span> <span class="token function">blockingFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> runBlocking <span class="token punctuation">{</span> <span class="token function">suspendFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We might use a plugin to generate such wrappers over suspend functions automatically using either a backend or a frontend plugin.</p><p>A backend plugin would require an extension for <code>IrGenerationExtension</code> that generates an additional wrapper function in IR for the appropriate function. These wrapper functions will be present in the generated platform-specific code and are therefore available for Java, Groovy, and other languages. The problem is that these wrapper classes will not be visible in Kotlin code. This is fine if our wrapper functions are meant to be used from other languages anyway, but we need to know about this serious limitation. There is an open-source plugin called kotlin-jvm-blocking-bridge that generates blocking wrappers for suspend functions using a backend plugin; you can find its source code under the link <code>github.com/Him188/kotlin-jvm-blocking-bridge</code>.</p><p>A frontend plugin would require an extension for the class <code>FirDeclarationGenerationExtension</code> to generate wrapper functions for the appropriate suspend functions in FIR. These additional functions would then be used to generate IR and finally platform-specific code. Those functions would also be visible in IntelliJ, so we would be able to use them in both Kotlin and Java. However, such a plugin would only work with the K2 compiler, so since Kotlin 2.0. To support the previous language version, we need to define an additional extension that supports K1. ---</p><h2 id="example-plugin-implementations" tabindex="-1"><a class="header-anchor" href="#example-plugin-implementations"><span>Example plugin implementations</span></a></h2><p>Kotlin Compiler Plugins are currently not documented, and generated elements must respect many restrictions for our code to not break, so defining custom plugins is quite hard. If you want to define your own plugin, my recommendation is to first get the Kotlin Compiler sources and then analyze the existing plugins in the <code>plugins</code> folder.</p><figure><img src="https://kt.academy/_next/image?url=https%3A%2F%2Fmarcinmoskala.com%2Fadvanced-kotlin-book%2Fmanuscript%2Fresources%2Fplugins_folder.png&amp;w=1080&amp;q=75" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>This folder includes not only K2 plugins but also K1 and KSP-based plugins. We are only interested in K2 plugins, so you can ignore the rest.</p><p>A list of all the supported extensions can be found in the <code>FirExtensionRegistrar</code> class. To analyze how the compiler uses an extension, you can search for the usage of its open methods. To do this, hit command/Ctrl and click on a method name to jump to its usage. This should show you where the Kotlin Compiler uses this extension. Beware, though, that all the knowledge that is not documented is more likely to change in the future.</p><hr><h2 id="summary" tabindex="-1"><a class="header-anchor" href="#summary"><span>Summary</span></a></h2><p>As you can see, the capabilities of Kotlin Compiler Plugins are determined by the extensions supported by the Kotlin Compiler. On the compiler’s frontend, these extension capabilities are limited, so there is currently only a specific set of things that can be done on the frontend with Kotlin Compiler Plugins. On the compiler backend, you can change generated IR representation in any way; this offers many possibilities but can also easily cause breaking changes in your code.</p><p>Kotlin Compiler Plugins technology is still young, undocumented, and changing. It should be used with great care as it can easily break your code, but it is also extremely powerful and offers possibilities beyond comprehension. Jetpack Compose is a great example. I have only been able to share with you the general idea of how Kotlin Compiler Plugins work and what they can do, but I hope it is enough for you to understand the key concept and possibilities.</p><p>In the next chapter, we will talk about another tool that helps with code development: static code analyzers. On the one hand, it is more limited than KSP or Compiler Plugins because it cannot generate any code; on the other hand, static code analyzers are also extremely powerful as they can seriously influence our development process and help us improve our actual code.</p><!-- TODO: add ARTICLE CARD --><a class="vp-card" href="https://chanhi2000.github.io/bookshelf/kt.academy/ak-compiler-plugin.html" target="_blank" style="background:rgba(243,139,49,0.2);"><img class="vp-card-logo" src="https://kt.academy/logo.png" loading="lazy" no-view><div class="vp-card-content"><div class="vp-card-title">Kotlin Compiler Plugins</div><hr><div class="vp-card-desc">All you need to know about Kotlin Compiler plugins.</div></div></a><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="footnote1" class="footnote-item"><p>K1 extensions are deprecated, so I will just skip them. <a href="#footnote-ref1" class="footnote-backref">↩︎</a></p></li></ol></section></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/chanhi2000/articles/edit/main/src/kt.academy/ak-compiler-plugin.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/bookshelf/programming/java/articles/" aria-label="/programming/java/articles/"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->/programming/java/articles/</div></a><a class="route-link auto-link next" href="/bookshelf/kt.academy/game-story-collection-processing-wasm.html" aria-label="The problems of Kotlin/Wasm I had when making a game"><div class="hint">Next<span class="arrow end"></span></div><div class="link">The problems of Kotlin/Wasm I had when making a game<i class="vp-icon iconfont icon-kotlin" sizing="height"></i></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">MIT Licensed | Copyright © 2022-present <a href="https://github.com/chanhi2000">Chan Hee Lee</a></div><div class="vp-copyright">Copyright © 2025 Marcin Moskała </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/bookshelf/assets/app-BVguHYKu.js" defer></script>
  </body>
</html>
